<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="程序语言记录">
<meta property="og:type" content="website">
<meta property="og:title" content="PeacefulRace">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="PeacefulRace">
<meta property="og:description" content="程序语言记录">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Private">
<meta property="article:tag" content="python, 前端, 后端 ...">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>PeacefulRace</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">PeacefulRace</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">27</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python-web-flask-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python-web-flask-1/" class="post-title-link" itemprop="url">python-web-flask-1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-06-23 13:58:42" itemprop="dateModified" datetime="2022-06-23T13:58:42+08:00">2022-06-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WEB应用开发-Flask第一天"><a href="#WEB应用开发-Flask第一天" class="headerlink" title="WEB应用开发-Flask第一天"></a>WEB应用开发-Flask第一天</h1><h2 id="一、WEB应用服务的认知"><a href="#一、WEB应用服务的认知" class="headerlink" title="一、WEB应用服务的认知"></a>一、WEB应用服务的认知</h2><p>flask开发文档： <a target="_blank" rel="noopener" href="http://docs.jinkan.org/docs/flask/quickstart.html">http://docs.jinkan.org/docs/flask/quickstart.html</a></p>
<p>WEB应用服务基于HTTP协议/规范，实现静态资源和动态资源的请求与处理，静态资源包含html网页、图片、样式、javascript脚本、视频、音频等等。动态资源即通过程序（java/php/python/.net）和数据库（mysql/oracle/sqlsever）根据业务处理流程会动态的生成html，再将html响应给请求（客户端）。</p>
<p>HTTP(1.0、1.1、2.0)和HTML的关系：</p>
<p>\1. 客户端封装Http请求（HttpRequest），向服务端发起请求</p>
<p>\2. 服务端接收请求之后，分析资源请求的路径、请求参数（查询参数、表单参数、json/字节流）、请求方法、请求头等。</p>
<p>\3. 服务端根据资源的请求路径读取文件的内容，并生成字节码数据且封装响应对象(HttpResponse)</p>
<p>\4. 客户端接收服务端的响应数据（HttpResponse），判断请求是否成功，如果成功则显示数据（html/json）。</p>
<p>WEB应用服务：</p>
<p>\1. 客户端（Browser浏览器）发起请求（HttpRequest）</p>
<p>\2. 服务端(Apache/Nginx/PythonWeb)接收请求，根据请求的资源信息，读取文件，并封装到响应对象（HttpResponse）中。</p>
<p>\3. 客户端接收资源，分析资源的类型然后渲染并显示出来。</p>
<p>另外，WEB应用服务基于HTTP协议，HTTP协议又基于TCP/IP协议，因此是安全性连接。</p>
<p>应用层/表示层/会话层/传输层/网络层/数据链路层/物理层</p>
<h2 id="二、Python-Web开发框架"><a href="#二、Python-Web开发框架" class="headerlink" title="二、Python Web开发框架"></a>二、Python Web开发框架</h2><p>Python本身实现WEB应用服务的接口（规范），便于我们开发动态资源请求。提供的开发模块是wsgiref。此模块是所有其他高级框架中最核心的，最基本的规范，如Flask基于Werkzeug库实现了wsgi通信协议。</p>
<p>WSGI: Web Server Gataway Interface - WEB服务网关接口，负责http协议的底层通信。</p>
<p>Python WEB开发框架：Django（组件最全、最强大的框架，主要用于后端服务管理、运维（Ansible/Openstack））；Flask小巧的、灵活的框架、可以快速开发API接口；Tornado是基于协程和单线程单进程的框架实现非阻塞的网络框架。Sanic是性能最优的WEB非阻塞框架。</p>
<p>Python wsgi 案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">app</span>(<span class="params">enviro, start_response</span>):</span><br><span class="line">	<span class="comment"># 核心业务</span></span><br><span class="line"><span class="comment"># 生成响应的对象</span></span><br><span class="line">start_response(‘HTTP/<span class="number">1.1</span> <span class="number">200</span> OK’, [(‘content-<span class="built_in">type</span>’, ‘text/html’), ()]) <span class="comment">#响应头</span></span><br><span class="line"><span class="keyword">return</span> [‘&lt;h3&gt;hello, wsgi&lt;/h3&gt;’.encode(‘utf-<span class="number">8</span>’)]</span><br><span class="line"></span><br><span class="line">httpd = make_server(‘<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>’, <span class="number">8000</span>, app)</span><br><span class="line">Httpd.serve_forever(poll_interval=<span class="number">0.5</span>)  <span class="comment"># 轮询监听的间隔时间</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>代码分析：</p>
<p>* make_server() 是创建WEB服务进程</p>
<p>* app()函数的enviro是environment的简写，表示请求的环境信息，是字典类型。</p>
<p>* app()函数在返回数据之前，需要生成响应头信息即start_response(‘200 OK’, [(header-key, value)])</p>
<h2 id="三、Flask框架的应用"><a href="#三、Flask框架的应用" class="headerlink" title="三、Flask框架的应用"></a>三、Flask框架的应用</h2><p>1.1 安装环境</p>
<p>(apiserver) &gt; pip install flask</p>
<p>1.2 第一个Flask项目</p>
<p>创建server2.py脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="comment"># 创建Flask对象-Httpd WEB服务对象</span></span><br><span class="line">app = Flask(<span class="string">&#x27;hiflask&#x27;</span>) <span class="comment"># __name__可以是任意的小写字母，表示Flask应用对象名称</span></span><br><span class="line"><span class="comment"># 声明WEB服务的请求资源(指定资源访问的路由)（动态的）</span></span><br><span class="line"><span class="comment"># RESTful 设计风格中关于资源的动作：&#x27;GET&#x27;, &#x27;POST&#x27;, &#x27;PUT&#x27;, &#x27;DELETE&#x27;, &#x27;PATCH&#x27;</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/hello&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>():</span><br><span class="line">    <span class="comment"># 获取平台参数：platform</span></span><br><span class="line">    <span class="comment"># 只支持Android手机访问</span></span><br><span class="line">    platform = request.args.get(<span class="string">&#x27;platform&#x27;</span>, <span class="string">&#x27;pc&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> platform.lower() != <span class="string">&#x27;android&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;目前只支持Android设备&lt;/h2&gt;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">    <span class="comment"># request是请求对象(HttpRequest)，它包含请求资源的路径，请求方法，请求头，上传的表单数据，文件等信息。</span></span><br><span class="line">    <span class="comment"># 获取请求中的查询参数（username, password）</span></span><br><span class="line">    <span class="comment"># wsgi -&gt; query_string: username=disen&amp;password=123</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 返回生成的HTML网页内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            &lt;h1&gt;用户登录的信息&lt;/h1&gt; </span></span><br><span class="line"><span class="string">            &lt;form action=&quot;/hello?platform=android&quot; method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;input name=&quot;name&quot; placeholder=&quot;用户名&quot;&gt;&lt;br&gt;</span></span><br><span class="line"><span class="string">                &lt;input name=&quot;pwd&quot; placeholder=&quot;口令&quot;&gt;&lt;br&gt;</span></span><br><span class="line"><span class="string">                &lt;button&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># &lt;h3&gt;用户名：%s &lt;/h3&gt;</span></span><br><span class="line">        <span class="comment"># &lt;h3&gt;口令：%s &lt;/h3&gt;</span></span><br><span class="line">        <span class="comment"># % (name, password)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 获取表单的参数</span></span><br><span class="line">        name = request.form.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">        pwd = request.form.get(<span class="string">&#x27;pwd&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>((</span><br><span class="line">            name.strip() == <span class="string">&#x27;qaz&#x27;</span>,</span><br><span class="line">            pwd.strip() == <span class="string">&#x27;987&#x27;</span></span><br><span class="line">        )):</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                &lt;h2 style=&quot;color:blue;&quot;&gt;登录成功&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                &lt;h2 style=&quot;color:orange;&quot;&gt;登录失败, &lt;a href=&quot;/hello&quot;&gt;重试&lt;/a&gt;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动flask的WEB服务器</span></span><br><span class="line">app.run(host=<span class="string">&quot;localhost&quot;</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>

<p> 3.3 Flask的MVC设计思想</p>
<p>\1. 客户端发起请求之后，通过路由找到视图处理函数</p>
<p>\2. 路由（请求资源）和视图处理函数-V(Controller)事先在app中声明</p>
<p>\3. 在视图的处理函数中根据业务需求，加载数据(Model)并渲染到模板中(View)</p>
<p>\4. 将渲染之后的模板数据返回给客户端。</p>
<p>3.4 Flask特有MTV设计思想</p>
<p>MTV设计思想，基于MVC的：</p>
<p>* M-Model</p>
<p>* T-Template模板（VIEW）</p>
<p>* V-View处理函数（Controller）</p>
<p>**案例分析</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/bank&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addBank</span>():</span><br><span class="line">    <span class="comment"># 加载数据(Model 交互操作)</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;绑定银行卡&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;error_message&#x27;</span>: <span class="string">&#x27;卡号和银行卡名称不能为空&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 渲染模板</span></span><br><span class="line">    html = render_template(<span class="string">&#x27;bank_edit.html&#x27;</span>, **data)</span><br><span class="line">    <span class="keyword">return</span> html <span class="comment"># 将数据返回给客户端</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;&#123; title &#125;&#125;的页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; title &#125;&#125;的页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>银行名称<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>卡号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;card_num&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; error_message &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>以上html文件不是静态的网页文件，而是一个动态的模板文件，页面中存在动态显示的变量。需要在视图函数中，指定数据渲染模板，渲染之后的html内容才是静态资源。</p>
<p>3.5 app.run()函数的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动flask的WEB服务器</span></span><br><span class="line">app.run(<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        <span class="number">5000</span>,</span><br><span class="line">        <span class="literal">True</span>, <span class="comment"># 默认未开启调试模式，True开启调试模式</span></span><br><span class="line">        threaded=<span class="literal">True</span>,  <span class="comment"># 默认是单线程，即为False</span></span><br><span class="line">        processes=<span class="number">4</span>) <span class="comment"># 默认只有一个进程</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：多进程和多线程不能同时开启，只能选择一种，如processes=4，同时threaded=True则会报错。</span></span><br></pre></td></tr></table></figure>

<p>3.6 请求request和响应response</p>
<p>3.7 Flask-script插件</p>
<p>安装包：pip install flask-script</p>
<p>Flask需用1.1.x版本</p>
<p>在server.py使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mainapp <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 以脚本的方式启动flask应用服务</span></span><br><span class="line">    manager = Manager(app)</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>

<p>在命令窗口运行server.py脚本</p>
<p>Python server.py runserver -d  # debug调试模式</p>
<p>3.8 flask-blueprint插件</p>
<p>blueprint插件主要实现拆分多个视图函数，让同类或同一个模块分到一个view的脚本中，如银行系统中，可以分用户模块、银行模块、交易模块等，每一个模块有它自己的view处理函数的脚本。</p>
<p>安装依赖包</p>
<p>Pip install flask-blueprint</p>
<p>在views.bank.py脚本中使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line">blue = Blueprint(<span class="string">&#x27;bankBlue&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/bank&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bank</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;h3&gt;hi, Bank-Blue&lt;/h3&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/delbank&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">del_bank</span>():</span><br><span class="line">    bank_id = request.args.get(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;h3&gt;正在删除银行：%s&lt;/h3&gt;&quot;</span> % bank_id</span><br></pre></td></tr></table></figure>

<p>注意：Blueprint类从flask模块中导入。</p>
<p>在server.py脚本中注册views.bank.py中的blue蓝图对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> mainapp <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> mainapp.views <span class="keyword">import</span> bank, user</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将蓝图对象注册到flask服务中</span></span><br><span class="line">    app.register_blueprint(bank.blue)</span><br><span class="line">    app.register_blueprint(user.blue, url_prefix=<span class="string">&#x27;/user&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 以脚本的方式启动flask应用服务</span></span><br><span class="line">    manager = Manager(app)</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>

<p>另外，在注册蓝图对象时，可以设置蓝图中路由访问的前缀，如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建蓝图的时候，第一个参数：name可以任意命名，第二个参数：必须使用__name__表示导包的名称</span></span><br><span class="line">blue = Blueprint(<span class="string">&#x27;userBlue&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明的API接口</span></span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;h2&gt;hi, User - Blueprint&lt;/h2&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># url_prefix 设置蓝图中子路由的前缀</span></span><br><span class="line">app.register_blueprint(user.blue, url_prefix=<span class="string">&#x27;/user&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>如果要访问user.py中/find路由，全路径时：<a target="_blank" rel="noopener" href="http://localhost:5000/user/find">http://localhost:5000/user/find</a>     </p>
<h1 id="WEB服务Flask第二天"><a href="#WEB服务Flask第二天" class="headerlink" title="WEB服务Flask第二天"></a>WEB服务Flask第二天</h1><h2 id="一、路由、request与response"><a href="#一、路由、request与response" class="headerlink" title="一、路由、request与response"></a>一、路由、request与response</h2><p><strong>1.1</strong> 路由规则</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params">‘/find’</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line">   <span class="keyword">return</span> “”</span><br></pre></td></tr></table></figure>

<p>请求的url是<a target="_blank" rel="noopener" href="http://localhost:5000/find%E3%80%82%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E8%B7%AF%E5%BE%84%E5%8D%B3%E6%98%AF%E8%AF%B7%E6%B1%82%E7%9A%84path%E8%B7%AF%E5%BE%84%E3%80%82">http://localhost:5000/find。路由中配置的路径即是请求的path路径。</a></p>
<p>如果使用“蓝图”则在注册时，可以注明它的url前缀。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.register_blueprint(bank.blue, url_prefix=”/bank”)</span><br></pre></td></tr></table></figure>

<p>通过url_prefix参数指定某一个模块下的所有请求资源，对于/find路由来说的，应该是/bank的子路径（路由），访问全路径是<a target="_blank" rel="noopener" href="http://localhost:5000/bank/find%E3%80%82">http://localhost:5000/bank/find。</a></p>
<p>1.1.1 <strong>路由中的参数</strong></p>
<p>语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params">‘/find/&lt;converter:word&gt;’, methods=[‘GET’]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">word</span>):</span><br><span class="line">   <span class="keyword">return</span> “”</span><br></pre></td></tr></table></figure>

<p>converter是参数的转换器，一般是指定的类型，如string，<strong>int<strong><strong>，float</strong></strong>，path</strong>，uuid，any。</p>
<p>其中any()比较特殊，可以指定任意的类型转换器，如&lt;any(int,string,uuid):word&gt;，但目前最新的flask版本不支持any()动作，直接写成“/find/<word>”.word表示任意类型。</p>
<p>另外，path转换器主要用于引用别的网址时使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params">‘/forward/&lt;path:url&gt;’</span>)</span></span><br><span class="line">Def forward(url):</span><br><span class="line"><span class="comment">#重定向url</span></span><br><span class="line"><span class="keyword">return</span> redirect(url)</span><br></pre></td></tr></table></figure>

<p>以上的路由配置，对于“/forward/<a target="_blank" rel="noopener" href="http://www.baidu.com”路径是合法的,如果将path转换器换成string有可能会出错./">http://www.baidu.com”路径是合法的，如果将path转换器换成string有可能会出错。</a></p>
<p>另外，path路径中可以接收多个参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add/&lt;bankName&gt;/&lt;int:page&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>(<span class="params">bankName, page</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;%s开户成功！在第 %s 页&quot;</span> % (bankName, page)</span><br></pre></td></tr></table></figure>

<p><strong>1.1.2</strong> <strong>路由的请求方法</strong></p>
<p>路由中的请求方法是通过methods设置的，且要求是list类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find/&lt;keyword&gt;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>(<span class="params">keyword</span>):</span><br><span class="line">    <span class="comment"># keyword有可能是银行的id，名称，地址</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;keyword 是string类型，值是 %s&quot;</span> %(keyword)</span><br></pre></td></tr></table></figure>

<p>上面的注册路由是没有指定methods，默认中包含GET和OPTIONS。</p>
<p>常见的请求方法：</p>
<p>*GET查询数据使用，可以上传的参数大小限于1M以内，参数是显示在请求地址中的。</p>
<p>*POST添加或编辑数据时使用，可以上传超过1G的大数据，且以表单参数的方式上传，并不显示请求地址中，相比于GET，请求参数比较安全且支持大数据或文件。</p>
<p>*PUT更新数据时使用，局部数据的修改，如修改用户的口令或头像</p>
<p>*PATCH批量更新数据时使用，整体的数据修改，如修改用户的收货地址、实名认证、绑定银行卡。</p>
<p>*DELETE删除数据时使用。</p>
<p>*其他的方法：OPTIONS、HEAD</p>
<p> 如声明一个处理函数，用于删除银行信息，正确的路由配置如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params">‘/<span class="keyword">del</span>/&lt;<span class="built_in">int</span>:bank_id&gt;’, methods=[“DELETE”]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete4id</span>(<span class="params">bank_id</span>):</span><br><span class="line">Return “删除操作成功！”</span><br></pre></td></tr></table></figure>

<p>针对PUT/DELETE/POST/GET等url接口测试，可以使用requests库。</p>
<p>Pip install requests</p>
<p>Requests库中提供相关函数，函数的名称与请求方法是一一对应，当然也可以使用requests.request()方法是最全的方法，其他的函数都是在request()方法之上重新封装的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://localhost:5000/bank/del/100&quot;</span></span><br><span class="line">method=<span class="string">&#x27;DELETE&#x27;</span></span><br><span class="line">resp = requests.request(method, url)</span><br><span class="line"><span class="built_in">print</span>(resp.text)</span><br></pre></td></tr></table></figure>

<p>也可以使用请求方法对应的requests库的相关函数，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://localhost:5000/bank/del/100&quot;</span></span><br><span class="line">method=<span class="string">&#x27;DELETE&#x27;</span></span><br><span class="line">resp = requests.delete(url)</span><br><span class="line"><span class="built_in">print</span>(resp.text)</span><br></pre></td></tr></table></figure>



<p><strong>1.1.3</strong> <strong>路由的反向解析</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">From flask <span class="keyword">import</span> url_for</span><br><span class="line">From flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line">Blue = Blueprint(‘myBlueName’)</span><br><span class="line"></span><br><span class="line"><span class="meta">@blue.route(<span class="params">‘/add/&lt;bankName&gt;’</span>)</span></span><br><span class="line">Def add(bankName):</span><br><span class="line">...</span><br><span class="line"><span class="meta">@blue.route(<span class="params">‘/select’</span>)</span></span><br><span class="line">Def select():</span><br><span class="line">Return “&lt;a href=%s&gt;进入下一个页面&lt;/a&gt;” % url_for(‘myBlueName.add’, bankName=”中国银行”)</span><br></pre></td></tr></table></figure>

<p>Url_for(“函数名”， **kwargs)反向解析的是flask的路由注册的路径</p>
<p>Url_for(“蓝图名.函数名”, **kwargs)反向解析指定蓝图下的路由注册路径。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add/&lt;bankName&gt;/&lt;int:page&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>(<span class="params">bankName, page</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;&quot; </span></span><br><span class="line"><span class="string">        %s开户成功！在第 %s 页</span></span><br><span class="line"><span class="string">        &lt;br&gt;</span></span><br><span class="line"><span class="string">        &lt;a href=&quot;%s&quot;&gt;返回首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span> % (bankName, page, url_for(<span class="string">&#x27;index&#x27;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span>  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        &lt;ul&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;银行卡开户&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;银行管理&lt;/a&gt;&lt;/li&gt;    </span></span><br><span class="line"><span class="string">            &lt;li&gt;&lt;a href=&quot;%s&quot;&gt;用户管理&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span> % (</span><br><span class="line">        url_for(<span class="string">&#x27;cardBlue.addCard&#x27;</span>, bankName=<span class="string">&quot;中国银行&quot;</span>, page=<span class="number">3</span>),</span><br><span class="line">        url_for(<span class="string">&#x27;bankBlue.edit&#x27;</span>, bankId=<span class="number">1</span>),</span><br><span class="line">        url_for(<span class="string">&#x27;userBlue.find&#x27;</span>),</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>1.2<strong>请求对象</strong></p>
<p>From flask import request</p>
<p>请求对象本质上是封装客户端发送的请求数据，在Flask中由Werkzeug库（实现Python的WSGI接口）封装的，包含请求的路径、请求的方法、请求的头、请求中包含的Cookie、请求的参数及上传的数据。</p>
<p> 一个请求对象中包含的数据的属性一般都是dict类型，如：</p>
<p>*request.args查询参数，url路径中使用?分隔的查询参数。</p>
<p>*request.form表单参数，一般是post请求方法中包含的数据。</p>
<p>*request.headers请求头</p>
<p>*request.cookies Cookie数据</p>
<p>*request.files上传的文件</p>
<p>*request.method请求方法，且大写字母表示的</p>
<p>*request.url 请求的路径</p>
<p>*request.remote_addr 远程访问的客户端ip地址</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>url: &#123;&#123; request.url &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>base_url: &#123;&#123; request.base_url &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>host_url: &#123;&#123; request.host_url &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>path: &#123;&#123; request.path &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>method: &#123;&#123; request.method &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>客户端ip: &#123;&#123; request.remote_addr &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>请求头: &#123;&#123; request.headers &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Cookie: &#123;&#123; request.cookies &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;url&#x27;</span>, request.url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;base_url&#x27;</span>, request.base_url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;host_url&#x27;</span>, request.host_url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;path&#x27;</span>, request.path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;headers&#x27;</span>, request.headers)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;cookie&#x27;</span>, request.cookies)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;user_list.html&quot;</span>, request=request)</span><br></pre></td></tr></table></figure>

<p>1.3 <strong>响应对象response</strong></p>
<p>在服务端，当业务处理完成后，生成响应的数据并封装成响应对象，并传给Python的WSGI，由WSGI向客户端发送数据流。</p>
<ol>
<li><p>直接返回文本和状态码</p>
<p>flask的处理函数如果直接返回文本或附带一个响应的状态码，则会自动封装一个简单Response对象，且数据类型默认为：text/html;charset=utf-8.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">    <span class="comment"># return &quot;&lt;h3&gt;预发布银行公告&lt;/h3&gt;&quot;, 200</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span>, <span class="number">200</span></span><br></pre></td></tr></table></figure>

<p>如果返回的是一个html文本数据，可以使用render_template()函数，将写好的html模板经过渲染之后生成的html返回会更好些。</p>
</li>
<li><p>使用make_response(data, code)生成response对象。这种方式是较为常用的方式，通过生成的response响应对象，可以设置响应的header相关的信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">    <span class="comment"># return &quot;&lt;h3&gt;预发布银行公告&lt;/h3&gt;&quot;, 200</span></span><br><span class="line">    <span class="comment"># return &#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;, 200</span></span><br><span class="line">    data = <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line">    code = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将数据和响应的状态码封装到response对象中</span></span><br><span class="line">    response = make_response(data, code)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 根据数据的类型，设置响应头</span></span><br><span class="line">    response.headers[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></li>
<li><p>jsonify()快速生成json响应对象。此函数返回的也是一个response对象，只不过response对象的headerd已经设置了content-type属性为application/json。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">   @blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">       data = <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line">       code = <span class="number">200</span></span><br><span class="line">       <span class="keyword">return</span> jsonify(data, code)</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> Response类生成响应对象。</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line"><span class="meta">   @blue.route(<span class="params"><span class="string">&#x27;/publish&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">publish_bank</span>():</span><br><span class="line">       data = <span class="string">&#x27;&#123;&quot;id&quot;: 101, &quot;age&quot;: 20&#125;&#x27;</span></span><br><span class="line">       code = <span class="number">200</span></span><br><span class="line">       <span class="comment"># Response(response= None, status= None, headers = None, mimetype = None, content_type = None, direct_passthrough = False)</span></span><br><span class="line">       response = Response(data, code, content_type=<span class="string">&quot;application/json&quot;</span>)</span><br><span class="line">       <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

<p>创建Response对象方法中，可以省略code，同时也可以将content_type改为mimetype。mimetype表示文件的数据类型，和content_type表示的含义相同。</p>
</li>
<li><p>重定向：在一个请求中，由于业务处理的要求，在处理业务之后，需要进入新的页面。而这个页面之前已经声明它的路由，则需要使用重定向的方式进入到下一页。</p>
<p>【注意】重定向也是响应对象，必须要返回。而且相对于浏览器或客户端再次发送新的请求。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/list&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">listCard</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/list.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="comment"># 接收开户信息</span></span><br><span class="line">        bankId =request.form.get(<span class="string">&#x27;bank&#x27;</span>)</span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        phone =  request.form.get(<span class="string">&#x27;phone&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 验证数据是否为空</span></span><br><span class="line">        <span class="comment"># 假如操作成功，进入页面中</span></span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;bankBlue.listCard&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># GET请求，响应的是开户页面</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/add.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>开户页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>开户页面<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/bank/add&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;bank&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>--请选择银行--<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>中国银行<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>中国工商银行<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-请求异常"><a href="#1-4-请求异常" class="headerlink" title="1.4 请求异常"></a>1.4 请求异常</h2><p>请求异常，在请求处理过程中，验证某一数据出现的错误，可以中断请求。如果请求异常不是请求数据而引起的，或者说请求资源不存在或服务器发生异常，此时可以捕获异常。</p>
<h3 id="1-4-1-abort-中断"><a href="#1-4-1-abort-中断" class="headerlink" title="1.4.1 abort()中断"></a>1.4.1 abort()中断</h3><p>在请求处理函数中，可以直接调用abort()函数，中断业务处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/add&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addCard</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="comment"># 接收开户信息</span></span><br><span class="line">        bankId =request.form.get(<span class="string">&#x27;bank&#x27;</span>)</span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        phone =  request.form.get(<span class="string">&#x27;phone&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> phone != <span class="string">&#x27;111222333&#x27;</span>:</span><br><span class="line">            <span class="comment"># 中断业务</span></span><br><span class="line">            <span class="comment"># abort(401) # 发出一个异常响应码</span></span><br><span class="line">            abort(Response(<span class="string">&quot;&lt;h3 style=&#x27;color:red&#x27;&gt;%s当前手机号不能被注册&lt;/h3&gt;&quot;</span> % phone,<span class="number">403</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 验证数据是否为空</span></span><br><span class="line">        <span class="comment"># 假如操作成功，进入页面中</span></span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;bankBlue.listCard&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># GET请求，响应的是开户页面</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/add.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>abort()两种写法：</p>
<p>1.abort(status_code); 2. abort(data, code, headers,…)</p>
<h3 id="1-4-2-捕获请求异常"><a href="#1-4-2-捕获请求异常" class="headerlink" title="1.4.2 捕获请求异常"></a>1.4.2 捕获请求异常</h3><p>通过相关的状态码，获取请求异常，并指定处理函数来响应异常的信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.errorhandler(<span class="params"><span class="number">404</span></span>) </span><span class="comment"># 指定状态码捕获</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">notfound</span>(<span class="params">error</span>):</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;404.html&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>建议处理异常的函数写在与app对象同一个脚本中。</p>
<p>如果处理业务中抛出相关的异常或发生500的异常，则可以指定异常类捕获</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/list&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">listCard</span>():</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;自定义异常&#x27;</span>)</span><br><span class="line">    <span class="comment"># abort(500)</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;card/list.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">   @app.errorhandler(<span class="params">Exception</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">handlerOfError</span>(<span class="params">error</span>):</span><br><span class="line">       <span class="keyword">return</span> render_template(<span class="string">&#x27;500.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 二、Cookie与Session技术</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.1 Cookie存储技术</span></span><br><span class="line"></span><br><span class="line">Cookie数据存储技术，它的数据存储在客户端（浏览器），在浏览器中会为每个站点（host）创建存储Cookie的空间出来，Cookie的数据存储以Key=Value形式，但是每个key都有生命周期（有效期）。一个完整的Cookie信息包含：名称、内容、域名、路径（/）、有效时间（创建时间、到期时间）、如查看chrome下localhost域名下的所有cookie数据：chrome://settings/siteData。在搜索Cookie的文本框中输入“localhost”，查出localhost站点之前创建的Cookie。</span><br><span class="line"></span><br><span class="line"><span class="comment">### 2.1.1 向客户端写入Cookie</span></span><br><span class="line"></span><br><span class="line">使用response对象的set_cookie()方法可以向客户端添加Cookie。</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_cookie</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        key: <span class="built_in">str</span>,</span></span><br><span class="line"><span class="params">        value: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="params">        max_age: t.<span class="type">Optional</span>[t.<span class="type">Union</span>[timedelta, <span class="built_in">int</span>]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        expires: t.<span class="type">Optional</span>[t.<span class="type">Union</span>[<span class="built_in">str</span>, datetime, <span class="built_in">int</span>, <span class="built_in">float</span>]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        path: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="string">&quot;/&quot;</span>,</span></span><br><span class="line"><span class="params">        domain: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        secure: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        httponly: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        samesite: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>):<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/login&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    response = make_response(<span class="string">&quot;进入登录页面&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加cookie</span></span><br><span class="line">    <span class="comment"># response.delete_cookie(&#x27;username&#x27;)</span></span><br><span class="line">    <span class="comment"># expire_datatime = datetime.strptime(&#x27;2022-06-01 06:00:00&#x27;,&#x27;%Y-%m-%d %H:%M:%S&#x27;)</span></span><br><span class="line">    <span class="comment"># response.set_cookie(&#x27;username&#x27;,&#x27;disen&#x27;, expires=expire_datatime)</span></span><br><span class="line">    response.set_cookie(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;11111222222@qq.com&#x27;</span>,max_age=<span class="number">1209600</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

<h3 id="2-1-2-将客户端的cookie删除"><a href="#2-1-2-将客户端的cookie删除" class="headerlink" title="2.1.2 将客户端的cookie删除"></a>2.1.2 将客户端的cookie删除</h3><p>使用响应对象的delete_cookie()方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">delete_cookie</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        key: <span class="built_in">str</span>,</span></span><br><span class="line"><span class="params">        path: <span class="built_in">str</span> = <span class="string">&quot;/&quot;</span>,</span></span><br><span class="line"><span class="params">        domain: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        secure: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        httponly: <span class="built_in">bool</span> = <span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        samesite: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">    </span>):<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>【注意】根据不同浏览器特性，可能删除不了，需要到浏览器删除。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/delcookie/&lt;cookie_name&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">del_cookie</span>(<span class="params">cookie_name</span>):</span><br><span class="line">	resp = make_response(<span class="string">&#x27;删除cookie&#x27;</span>)</span><br><span class="line">	resp.delete_cookie(cookie_name)</span><br><span class="line">	resturn resp</span><br></pre></td></tr></table></figure>

<h3 id="2-1-3-从请求对象中获取cookie"><a href="#2-1-3-从请求对象中获取cookie" class="headerlink" title="2.1.3 从请求对象中获取cookie"></a>2.1.3 从请求对象中获取cookie</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/find&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find</span>():</span><br><span class="line">	<span class="comment"># 客户端的cookie信息随着请求发送，自动将浏览器中的cookie附加到请求中</span></span><br><span class="line">	<span class="comment"># 可以从请求对象中获取浏览器的cookie信息</span></span><br><span class="line">	email = request.cookie.get(<span class="string">&#x27;email&#x27;</span>) <span class="comment"># value</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-会话Session"><a href="#2-2-会话Session" class="headerlink" title="2.2 会话Session"></a>2.2 会话Session</h2><p>会话技术，一般是指客户端与服务端建立的连接，针对HTTP协议来说，会话连接称之为Session。在HTTP/1.0版本上，会话都是一次性，请求与响应的一个完整过程基于session。到HTTP/1.1时，会话是长连接，多个请求与响应共享一个会话。是否为长连接，可以查看响应、请求头connection，如果它的值是keep-alive表示长连接。因为Session是多个请求的共享资源，所以在Session存数据时，多个请求都可以访问。</p>
<p>【注意】在flask中使用session时，需要设置一个安全密钥secret_key。</p>
<p>一般Session使用场景：用户登录、退出、验证用户、城市定位</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> session</span><br><span class="line"><span class="meta">@blue.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, method=[<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">	<span class="keyword">if</span> request.method == <span class="string">&#x27;POST&#x27;</span>:</span><br><span class="line">        <span class="comment"># 读取登录用户信息</span></span><br><span class="line">        <span class="comment"># 前端页面表单域：name, password</span></span><br><span class="line">        name = request.form.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">        password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>((name, password)): <span class="comment"># 验证是否为空</span></span><br><span class="line">            message = <span class="string">&quot;用户名或口令不能为空&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 将数据写入数据库</span></span><br><span class="line">            dao = UserDao()</span><br><span class="line">            <span class="comment"># dao.save(name=name, password=password) # 注册时使用</span></span><br><span class="line">            user = dao.login(name, password) <span class="comment"># 如果存在此用户，则返回用户信息，dict</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> user:</span><br><span class="line">                message = <span class="string">&quot;查无%s此用户，请确认用户名或口令正确！&quot;</span> % name</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">            	<span class="comment"># 用户信息</span></span><br><span class="line">            	session[<span class="string">&#x27;login_user&#x27;</span>] = user</span><br><span class="line">                </span><br><span class="line">            	<span class="comment"># 重定向到主页</span></span><br><span class="line">            	<span class="keyword">return</span> redirect(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">	<span class="keyword">return</span> render_template(<span class="string">&#x27;user/login.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<p>locals()将当前函数内部的变量生成字典对象，变量名即是字典的key，变量值即是key对应的value。</p>
<h1 id="WEB服务Flask第三天"><a href="#WEB服务Flask第三天" class="headerlink" title="WEB服务Flask第三天"></a>WEB服务Flask第三天</h1><h2 id="一、Flask-Session插件"><a href="#一、Flask-Session插件" class="headerlink" title="一、Flask-Session插件"></a>一、Flask-Session插件</h2><p>补充说明：session解决每个客户端中将数据共享在多个请求中，即为每个客户端（client）都会创建session会话连接。问题是服务端如何判断session属于哪一个客户端的。在HTTP协议中已经考虑此问题，解决方案是在cookie中存储一个session_id，当请求发送给服务器时，cookie信息也会传给服务器，服务器以此session_id确定当前请求是属于哪一个session会话的。</p>
<p><strong>在flask中默认情况下，session的数据存在cookie中（客户端）</strong>。通过flask-session插件，解决将session的数据存储在数据库中或缓存（Redis）中。</p>
<p>首先安装flask-session插件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install flask-session</span><br><span class="line">pip install redis==<span class="number">2.10</span><span class="number">.6</span> -i https://mirrors.aliyun.com/pypi/simple</span><br></pre></td></tr></table></figure>

<p>配置flask的session信息，在settings.py脚本中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dev</span>():</span><br><span class="line">    ENV = <span class="string">&#x27;developement&#x27;</span> <span class="comment"># 默认运行环境production</span></span><br><span class="line">    SECRET_KEY = <span class="string">&#x27;!zaq&amp;wsx$&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 配置session</span></span><br><span class="line">    SESSION_TYPE = <span class="string">&#x27;redis&#x27;</span></span><br><span class="line">    SESSION_REDIS = Redis(host=<span class="string">&#x27;192.168.200.4&#x27;</span>, db=<span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<p>在创建flask的脚本中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"><span class="keyword">from</span> flask_session <span class="keyword">import</span> Session</span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 从指定的对象中加载flask服务的配置</span></span><br><span class="line">app.config.from_object(settings.Dev())</span><br><span class="line"></span><br><span class="line">session = Session()</span><br><span class="line">session.init_app(app) <span class="comment"># 初始化session插件</span></span><br></pre></td></tr></table></figure>

<p>session的使用跟之前用法相同，即从flask库中导入session对象即可。</p>
<h2 id="二、模板技术与静态资源"><a href="#二、模板技术与静态资源" class="headerlink" title="二、模板技术与静态资源"></a>二、模板技术与静态资源</h2><h3 id="2-1template模板"><a href="#2-1template模板" class="headerlink" title="2.1template模板"></a>2.1template模板</h3><p>Flask使用了Jinja2模板技术，支持变量、循环与分支以及自定义标签，支持点“.”语法，如：</p>
<p>1、对象.属性</p>
<p>2、列表.索引下标</p>
<p>3、字典.key</p>
<p>模板的html文件存放在templates目录中，templates目录下的所有html网页文件，内部都可以使用jinja2模板的语法，但是html文件必须在view视图函数中通过render_template(‘xx.html’)渲染，即渲染模板文件就是解析模板语法。</p>
<h4 id="2-1-1-模板过滤器"><a href="#2-1-1-模板过滤器" class="headerlink" title="2.1.1 模板过滤器"></a>2.1.1 模板过滤器</h4><p>过滤器主要针对模板中变量的数据进行处理，如日期的格式化、字符串格式化、大小写转换以及列表元素的提取等处理。</p>
<p>参考源码：jinja2.filters.py文件</p>
<h5 id="2-1-1-1-常用的过滤器"><a href="#2-1-1-1-常用的过滤器" class="headerlink" title="2.1.1.1 常用的过滤器"></a>2.1.1.1 常用的过滤器</h5><p>1.字符串过滤器</p>
<p>（1）capitalize 首字母大写；（2）title 每个单词的首字母大写；（3）upper 大写转换；（4）lower 小写转换；（5）format 格式化字符串，类似于%s格式化；（6）trim 删除两边的空格，类似于字符串的strip()函数；（7）default 指定默认值</p>
<p>2.列表（可迭代）过滤器</p>
<p>（1）unique 去掉重复的元素；（2）join 使用指定字符，连接可迭代对象中每一个元素；（3）last 读取最后一个元素；（4）first 读取第一个元素；（5）slice 切分指定元素个数的多个子列表；（6）random随机读取列表中的某一个元素；</p>
<p>（7）sort 排序；（8）list 将生成器、可迭代对象转成list。</p>
<p>3.安全性过滤器</p>
<p>（1）striptags 删除字符串所有html标签（开始、结束）；（2）safe 渲染字符串的html标签，不会进行escape转换；（3）make_safe；（5）make_unsafe。</p>
<p>4.数值过滤器</p>
<p>（1）int 转成int；（2）float 转成float类型；（filesizeformat 按文件大小的格式转换）；（3）round 四舍五入，precision=0, method=”common|ceil|floor”；</p>
<h5 id="2-1-1-2-自定义过滤器"><a href="#2-1-1-2-自定义过滤器" class="headerlink" title="2.1.1.2 自定义过滤器"></a>2.1.1.2 自定义过滤器</h5><p>如果提供的过滤器不满足现有的需求，可以自定义过滤器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义模板过滤器</span></span><br><span class="line"><span class="meta">@app.template_filter(<span class="params"><span class="string">&#x27;datefmt&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">datefmt_filter</span>(<span class="params">value, *args</span>):</span><br><span class="line">    <span class="comment"># value是datatime类型</span></span><br><span class="line">    <span class="built_in">print</span>(value, <span class="built_in">type</span>(value), args)</span><br><span class="line">    <span class="keyword">return</span> value.strftime(args[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>自定义过滤器，实现货币格式化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.template_filter(<span class="params"><span class="string">&#x27;moneyfmt&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">moneyfmt_filter</span>(<span class="params">value, method=<span class="string">&quot;common&quot;</span>, precision=<span class="number">0</span></span>):</span><br><span class="line">    <span class="comment"># method == &#x27;common&#x27; 普通的金额的格式化，以千位符分隔</span></span><br><span class="line">    value = <span class="built_in">round</span>(value, precision)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> method == <span class="string">&#x27;common&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            pre_v = <span class="built_in">str</span>(value)</span><br><span class="line">            end_v = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pre_v, end_v = <span class="built_in">str</span>(value).split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">            end_v = <span class="string">&quot;.&quot;</span> + end_v</span><br><span class="line"></span><br><span class="line">        pre_v = pre_v[::-<span class="number">1</span>]</span><br><span class="line">        vs = [pre_v[i*<span class="number">3</span>:i*<span class="number">3</span>+<span class="number">3</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(math.ceil(<span class="built_in">len</span>(pre_v)/<span class="number">3</span>))]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;,&#x27;</span>.join(vs)[::-<span class="number">1</span>] + end_v</span><br><span class="line"></span><br><span class="line">    <span class="comment"># method == &#x27;currency&#x27; 货币单位，万，百万，千万，亿</span></span><br><span class="line">    cur = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> value / <span class="number">10000</span> &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;元&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> value / (<span class="number">100</span>*<span class="number">10000</span>) &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;万元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / <span class="number">10000</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elif</span> value / (<span class="number">1000</span>*<span class="number">10000</span>) &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;百万元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / (<span class="number">100</span>*<span class="number">10000</span>), <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">elif</span> value / (<span class="number">10000</span>*<span class="number">10000</span>) &lt; <span class="number">1</span>:</span><br><span class="line">        cur = <span class="string">&#x27;千万元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / (<span class="number">1000</span>*<span class="number">10000</span>), <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cur = <span class="string">&#x27;亿元&#x27;</span></span><br><span class="line">        value = <span class="built_in">round</span>(value / (<span class="number">10000</span>*<span class="number">10000</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>(value)+cur</span><br></pre></td></tr></table></figure>

<p>上面的过滤器，定义了两个格式的金额表示，common是以千位符分隔的，currency是不同单位计算的。</p>
<h4 id="2-1-2-布局模板标签"><a href="#2-1-2-布局模板标签" class="headerlink" title="2.1.2 布局模板标签"></a>2.1.2 布局模板标签</h4><p>又称之为结构标签，设计整体页面。如将页面分为上、左、右、下四部分。在子页面中可以继承布局的模板文件，有针对性的实现哪一部分，如只实现右边结构的内容。</p>
<p>创建base.html模板文件，声明页面的结构。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;% block title %&#125; 主页 &#123;% endblock %&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>block title %&#125;  &#123;% endblock %&#125;``` 声明块区域，它的结构被定义title名称。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```&#123;% block content %&#125;  &#123;% endblock %&#125;``` 声明content内容显示的块区域。</span><br><span class="line"></span><br><span class="line">再创建index.html，此页面不需要像base.html那样，将html完整的标签写出来，只需要继承base.html，再使用```&#123;% block title %&#125;  &#123;% endblock %&#125; ```可以填充base.html页面的内容。</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&#123;% extends &quot;base.html&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;</span><br><span class="line">这是我的主页</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;h3&gt;测试block结构标签&lt;/h3&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>如果index.html又被其他子页面继承，在子页面填充的内容会覆盖父一级填充块的内容。如果想保留父级填充块的内容，则在<code>&#123;% block %&#125;  &#123;% endblock %&#125; </code>两个标签之间增加<code>&#123;&#123; super() &#125;&#125;</code>.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;index.html&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;</span><br><span class="line">    第三级的标题-主页</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>以后在此显示内容<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>可以使用<code>&#123;% include "500.html" %&#125;</code>标签将指定网页内容填充到当前位置。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>以后在此显示内容<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% include &quot;500.html&quot; %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<p>include和extends的区别：</p>
<ul>
<li>include导入整个网页，但是不能进行修改</li>
<li>extends只是继承网页，修改感兴趣的block</li>
</ul>
<h4 id="2-1-3-模板宏标签"><a href="#2-1-3-模板宏标签" class="headerlink" title="2.1.3 模板宏标签"></a>2.1.3 模板宏标签</h4><p>可以在html文件中使用<code>&#123;% macro 函数名() %&#125;</code>定义宏函数，它用于生成特定的html标签，而且在之后可以重复使用。</p>
<p>在macro.html，内容如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro menu() %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>库存管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>角色管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure>

<p>在index.html中使用时，需要使用<code>&#123;% from %&#125;</code>标签将宏函数导入到当前的模板中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% from &quot;404.html&quot; import menu %&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; menu() &#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-4-模板分支循环标签"><a href="#2-1-4-模板分支循环标签" class="headerlink" title="2.1.4 模板分支循环标签"></a>2.1.4 模板分支循环标签</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">            &#123;% for item in menus %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> &#123;% <span class="attr">if</span> <span class="attr">loop.index</span> % <span class="attr">2</span> !=<span class="string">0</span> %&#125;<span class="attr">class</span>=<span class="string">&quot;odd&quot;</span> &#123;% <span class="attr">endif</span> %&#125; &gt;</span> &#123;&#123; item &#125;&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>loop循环信息：loop.first    loop.last    loop.index    loop.index0    loop.revindex    loop.revindex0</p>
<h3 id="2-2-静态资源文件"><a href="#2-2-静态资源文件" class="headerlink" title="2.2 静态资源文件"></a>2.2 静态资源文件</h3><p>flask默认情况下指定在static目录中，访问路径也是/static，可以在创建flask对象时，指定static_folder和static_url_path两个参数。</p>
<p>static_folder指定静态资源文件存放的目录，一般情况下，静态资源存放的是css、js、图片素材、字体等。</p>
<p>static_url_path指定静态资源文件访问的url路径，默认是“/static”，如指定“/s”，针对static目录下的css下的my.css样式，完整访问路径url应该是：<a target="_blank" rel="noopener" href="http://localhost:5000/s/css/my.css%E3%80%82">http://localhost:5000/s/css/my.css。</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__, static_folder=<span class="string">&#x27;static&#x27;</span>, static_url_path=<span class="string">&#x27;/s&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>也可以在settings.py文件文件配置, <font color=pink size=4>但不建议使用此方法。</font></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dev</span>():</span><br><span class="line">    ENV = <span class="string">&#x27;developement&#x27;</span> <span class="comment"># 默认运行环境production</span></span><br><span class="line">    SECRET_KEY = <span class="string">&#x27;!zaq&amp;wsx$&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 配置session</span></span><br><span class="line">    SESSION_TYPE = <span class="string">&#x27;redis&#x27;</span></span><br><span class="line">    SESSION_REDIS = Redis(host=<span class="string">&#x27;192.168.200.4&#x27;</span>, db=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 配置静态资源目录及访问的URL</span></span><br><span class="line">    STATIC_FOLDER = <span class="string">&#x27;static&#x27;</span></span><br><span class="line">    STATIC_URL_PATH = <span class="string">&#x27;/s&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务-Flask第四天"><a href="#WEB后端服务-Flask第四天" class="headerlink" title="WEB后端服务-Flask第四天"></a>WEB后端服务-Flask第四天</h1><h2 id="一、数据库操作之ORM设计思想"><a href="#一、数据库操作之ORM设计思想" class="headerlink" title="一、数据库操作之ORM设计思想"></a>一、数据库操作之ORM设计思想</h2><p>相对于数据库的操作，设计DAO结构的目的是简化数据库的操作，把SQL语句封装到基础类（BaseDao）中，但是要求开发人员必须特别熟悉SQL语句和Python的基础。自己设计Dao的优点是有效防止SQL注入风险。通过使用ORM避免不会SQL的开发人员能够快速操作数据库，ORM的思想是将实体类（Model或Entries）和数据库表直接建立关联关系，即类-&gt;表，类对象-&gt;表中的记录，类对象的属性-&gt;表的字段。</p>
<p>ORM(Object Relationship Mapping)对象关系映射。</p>
<ul>
<li><p>类和表</p>
</li>
<li><p>类实例即时表的记录</p>
</li>
<li><p>类属性即为表的字段</p>
<p>当ORM关系映射成功之后，直接操作类和对象，即操作数据库中表或记录。</p>
<p>简单地实现ORM(自省+元类)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>():</span><br><span class="line">	<span class="built_in">id</span> = <span class="number">100</span></span><br><span class="line">    name = <span class="number">20</span></span><br><span class="line">    money = <span class="number">20000</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDB</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">user: User</span>):</span><br><span class="line">        sql = <span class="string">&quot;insert into user(id, name) values(%s, %s)&quot;</span></span><br><span class="line">        <span class="keyword">with</span> self.db <span class="keyword">as</span> c:</span><br><span class="line">            c.execute(sql, args=(user.<span class="built_in">id</span>, user.name))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">User</span>():</span><br><span class="line">      <span class="built_in">id</span> = <span class="number">1</span></span><br><span class="line">      name = <span class="string">&#x27;disen&#x27;</span></span><br><span class="line">      money = <span class="number">20000</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Order</span>():</span><br><span class="line">      number = <span class="number">1001</span></span><br><span class="line">      title = <span class="string">&#x27;huawei-10101&#x27;</span></span><br><span class="line">      price = <span class="number">19000</span></span><br><span class="line">      city = <span class="string">&#x27;xian&#x27;</span></span><br><span class="line">      cate = <span class="string">&#x27;手机神奇&#x27;</span></span><br><span class="line">      store = <span class="string">&#x27;神奇手机店&#x27;</span></span><br><span class="line">      phone = <span class="string">&#x27;11111111&#x27;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">entity</span>):</span><br><span class="line">      <span class="built_in">print</span>(<span class="built_in">dir</span>(entity))</span><br><span class="line">      <span class="comment"># 读取对象的普通属性</span></span><br><span class="line">      <span class="built_in">print</span>([attr <span class="keyword">for</span> attr <span class="keyword">in</span> <span class="built_in">dir</span>(entity) <span class="keyword">if</span> <span class="keyword">not</span> attr.startswith(<span class="string">&#x27;__&#x27;</span>)])</span><br><span class="line">      <span class="built_in">print</span>(entity.__dict__)</span><br><span class="line">      <span class="built_in">print</span>(&#123;attr:<span class="built_in">getattr</span>(entity, attr) <span class="keyword">for</span> attr <span class="keyword">in</span> <span class="built_in">dir</span>(entity) <span class="keyword">if</span> <span class="keyword">not</span> attr.startswith(<span class="string">&#x27;__&#x27;</span>)&#125;)</span><br><span class="line">  </span><br><span class="line">      sql = <span class="string">&quot;insert into %s(%s) values(%s)&quot;</span></span><br><span class="line">      table = entity.__class__.__name__.lower()</span><br><span class="line">      colnames = <span class="string">&#x27;,&#x27;</span>.join([col <span class="keyword">for</span> col <span class="keyword">in</span> entity.__dict__])</span><br><span class="line">      colplaceholders = <span class="string">&#x27;,&#x27;</span>.join([<span class="string">&quot;%%(%s)s&quot;</span> % col <span class="keyword">for</span> col <span class="keyword">in</span> entity.__dict__])</span><br><span class="line">      sql = sql % (table, colnames, colplaceholders)</span><br><span class="line">      <span class="built_in">print</span>(sql)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">      u1 = User()</span><br><span class="line">      u1.<span class="built_in">id</span> = <span class="number">1000</span></span><br><span class="line">      u1.name = <span class="string">&#x27;jack&#x27;</span></span><br><span class="line">      u1.money = <span class="number">300000</span></span><br><span class="line">  </span><br><span class="line">      u2 = User()</span><br><span class="line">      u2.<span class="built_in">id</span> = <span class="number">2000</span></span><br><span class="line">      u2.name = <span class="string">&#x27;xi&#x27;</span></span><br><span class="line">      u2.money = <span class="number">3000000</span></span><br><span class="line">  </span><br><span class="line">      save(u1)</span><br><span class="line">      save(u2)</span><br><span class="line">  </span><br><span class="line">      o1 = Order()</span><br><span class="line">      o1.number = <span class="number">109919</span></span><br><span class="line">      o1.phone = <span class="string">&#x27;110&#x27;</span></span><br><span class="line">      o1.title = Order.title</span><br><span class="line">      o1.price = <span class="number">19000</span></span><br><span class="line">      o1.city = <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">      save(o1)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 二、Flask-SQLAlchemy插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 2.1 安装</span></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">pip install flask-sqlalchemy -i https://mirrors.aliyun.com/pypi/simple</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-配置"><a href="#2-2-配置" class="headerlink" title="2.2 配置"></a>2.2 配置</h3><p>在settings.Dev类进行配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库连接的路径 dialect+driver://user:password@ip:port/db?charset=utf8</span></span><br><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">&#x27;mysql+pymysql://root:123456@192.168.200.4:3306/bank&#x27;</span></span><br><span class="line">SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">True</span> <span class="comment"># 可扩展</span></span><br><span class="line">SQLALCHEMY_COMMIT_ON_TEARDOWN = <span class="literal">True</span> <span class="comment"># 回收资源时自动提交事务</span></span><br><span class="line">SQLALCHEMY_ECHO =<span class="literal">True</span> <span class="comment"># 显示调试SQL</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-创建SQLAlchemy实例并初始化"><a href="#2-3-创建SQLAlchemy实例并初始化" class="headerlink" title="2.3 创建SQLAlchemy实例并初始化"></a>2.3 创建SQLAlchemy实例并初始化</h3><p>创建models模块，在它的“_<em>init</em>_.py”脚本中创建：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">db = SQLAlchemy()</span><br></pre></td></tr></table></figure>

<p>在创建Flask对象app的脚本中，初始化SQLAlchemy类对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> db</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 初始化sqlalchemy类对象</span></span><br><span class="line">db.init_app(app)</span><br></pre></td></tr></table></figure>

<h3 id="2-4-实战项目"><a href="#2-4-实战项目" class="headerlink" title="2.4 实战项目"></a>2.4 实战项目</h3><ol>
<li><p>将银行系统下的所有表创建相应的模型类</p>
<p>1.1. 声明用户的模型类UserEntity，继承db.Model父类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认情况下：类名即为表名</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model):</span><br><span class="line">	<span class="comment"># 声明字段（属性），默认情况下属性名与字段相同</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    number = db.Column(db.String(<span class="number">18</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">20</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    phone = db.Column(db.String(<span class="number">20</span>))</span><br><span class="line">    password = db.Column(db.String(<span class="number">100</span>), nullable=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>1.2. 声明银行模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bank</span>(db.Model):</span><br><span class="line">	<span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">31</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    address = db.Column(db.String(<span class="number">1023</span>), nullable=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>1.3 声明银行卡模型</p>
<p>1.4 声明交易模型</p>
</li>
<li><p>更新所有查询列表页面</p>
<p>2.1. 在用户的list2路由的处理函数中使用User模型类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> User</span><br><span class="line">   data = &#123;</span><br><span class="line">       <span class="string">&#x27;users&#x27;</span>: User.query.<span class="built_in">all</span>(),</span><br><span class="line">       <span class="string">&#x27;session&#x27;</span>: session</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>User.query.all()从数据库中查询所有的用户信息。</p>
</li>
</ol>
<h2 id="三、SQLAlchemy的CURD"><a href="#三、SQLAlchemy的CURD" class="headerlink" title="三、SQLAlchemy的CURD"></a>三、SQLAlchemy的CURD</h2><h3 id="3-1-模型创建数据-Create"><a href="#3-1-模型创建数据-Create" class="headerlink" title="3.1 模型创建数据(Create)"></a>3.1 模型创建数据(Create)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_create</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    user = User(name=<span class="string">&#x27;lixiaolong&#x27;</span>, number=<span class="string">&#x27;546656546546&#x27;</span>, phone=<span class="string">&#x27;5566645656&#x27;</span>, password=crypt.pwd(<span class="string">&#x27;333333&#x27;</span>))</span><br><span class="line">    db.session.add(user)</span><br><span class="line">    db.session.commit()  <span class="comment"># 提交事务</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-模型更新数据（Update）"><a href="#3-2-模型更新数据（Update）" class="headerlink" title="3.2 模型更新数据（Update）"></a>3.2 模型更新数据（Update）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_update</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    user = User.query.get(<span class="number">11</span>)</span><br><span class="line">    <span class="built_in">print</span>(user)</span><br><span class="line"></span><br><span class="line">    user.phone = <span class="string">&#x27;121&#x27;</span></span><br><span class="line">    user.name = <span class="string">&#x27;gaoxinyiyuan&#x27;</span></span><br><span class="line"></span><br><span class="line">    db.session.add(user)</span><br><span class="line">    db.session.commit()  <span class="comment"># 自动检测数据是否发生变化</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-模型删除数据（Delete）"><a href="#3-3-模型删除数据（Delete）" class="headerlink" title="3.3 模型删除数据（Delete）"></a>3.3 模型删除数据（Delete）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_delete</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    db.session.delete(User.query.get(<span class="number">11</span>))</span><br><span class="line">    db.session.commit()</span><br></pre></td></tr></table></figure>

<h3 id="3-4-模型读取数据（Read）"><a href="#3-4-模型读取数据（Read）" class="headerlink" title="3.4 模型读取数据（Read）"></a>3.4 模型读取数据（Read）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_filter</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询所有姓名中包含“e”字的用户</span></span><br><span class="line">    <span class="comment"># for u in User.query.filter(User.name.contains(&#x27;x&#x27;)):</span></span><br><span class="line">    <span class="comment">#     print(u)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询所有“x”开头的用户</span></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.<span class="built_in">filter</span>(User.name.startswith(<span class="string">&#x27;x&#x27;</span>)):</span><br><span class="line">        <span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.<span class="built_in">filter</span>(User.name == <span class="string">&#x27;cheng&#x27;</span>):</span><br><span class="line">        <span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从查询结果中读取一条记录</span></span><br><span class="line">    u = User.query.<span class="built_in">filter</span>(User.number == <span class="string">&#x27;666666666666666666&#x27;</span>).one()</span><br><span class="line">    <span class="built_in">print</span>(u)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">filter</span> = User.query.<span class="built_in">filter</span>(User.name == <span class="string">&#x27;cheng&#x27;</span>, User.password == crypt.pwd(<span class="string">&quot;000000&quot;</span>))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        login_user = <span class="built_in">filter</span>.one()</span><br><span class="line">        <span class="built_in">print</span>(login_user)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;账号或口令错误&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>crypt.pwd()函数的定义如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pwd</span>(<span class="params">txt, hash_name=<span class="string">&#x27;md5&#x27;</span></span>):</span><br><span class="line">    <span class="comment"># 重命名的快捷键：shift+F6</span></span><br><span class="line">    hash_ = hashlib.md5() <span class="keyword">if</span> hash_name == <span class="string">&#x27;md5&#x27;</span> <span class="keyword">else</span> hashlib.sha1()</span><br><span class="line">    hash_.update(txt.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> hash_.hexdigest()</span><br><span class="line">    <span class="comment"># return hashlib.md5(txt.encode(&#x27;utf-8&#x27;)).hexdigest()</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_filter_or_not</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询编号不小于9的，或者是银行名包含“业”字</span></span><br><span class="line">    <span class="keyword">for</span> bank <span class="keyword">in</span> Bank.query.<span class="built_in">filter</span>(db.or_(</span><br><span class="line">        Bank.<span class="built_in">id</span> &gt;= <span class="number">9</span>,</span><br><span class="line">        Bank.name.like(<span class="string">&#x27;%业%&#x27;</span>)</span><br><span class="line">    )):</span><br><span class="line">        <span class="built_in">print</span>(bank.<span class="built_in">id</span>, bank.name, bank.address)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询非‘西安’的银行</span></span><br><span class="line">    <span class="keyword">for</span> bank <span class="keyword">in</span> Bank.query.<span class="built_in">filter</span>(db.not_(Bank.name.contains(<span class="string">&#x27;西安&#x27;</span>))):</span><br><span class="line">        <span class="built_in">print</span>(bank.<span class="built_in">id</span>, bank.name, bank.address)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_filter_func</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    <span class="comment"># __ge__()相当于&gt;=</span></span><br><span class="line">    <span class="keyword">for</span> card <span class="keyword">in</span> Card.query.<span class="built_in">filter</span>(Card.money.__ge__(<span class="number">5000</span>)):</span><br><span class="line">        <span class="built_in">print</span>(card.number, card.money)</span><br></pre></td></tr></table></figure>

<h4 id="3-4-1-session的查询"><a href="#3-4-1-session的查询" class="headerlink" title="3.4.1 session的查询"></a>3.4.1 session的查询</h4><p>query()方法中指定的是查询的字段信息，filter()指定的是条件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.session.query(User.number, User.phone).<span class="built_in">filter</span>(user.name.like(<span class="string">&#x27;%i%&#x27;</span>)).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.session.query(User.number, User.phone).first() <span class="comment">#查看第一条</span></span><br></pre></td></tr></table></figure>

<p><strong>针对query()查询结构集可以使用first()也可以使用all()及get(id)。</strong></p>
<p><strong>针对filter()查询结果集可以使用one()，all()</strong></p>
<h4 id="3-4-2-模型类的查询"><a href="#3-4-2-模型类的查询" class="headerlink" title="3.4.2 模型类的查询"></a>3.4.2 模型类的查询</h4><p>模型类可以直接发起查询，默认情况查询模型下的所有字段。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User.query.<span class="built_in">filter</span>(name=<span class="string">&#x27;disen&#x27;</span>)</span><br><span class="line"><span class="comment"># User.query(User.name, User.phone).all() #模型的query是不能被调用的</span></span><br></pre></td></tr></table></figure>

<h4 id="3-4-3-模型字段查询条件"><a href="#3-4-3-模型字段查询条件" class="headerlink" title="3.4.3 模型字段查询条件"></a>3.4.3 模型字段查询条件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">== 等值查询		!= 不相等		&gt;= 或__ge__() 大于等于		&lt;= 或__le__() 小于等于</span><br><span class="line">in_((1,)) 包含		like() 模糊匹配 		startswith() 字符串开头匹配</span><br><span class="line">endswith() 字符串结尾匹配		contains() 字符串包含匹配</span><br></pre></td></tr></table></figure>

<h4 id="3-4-4-排序与分页"><a href="#3-4-4-排序与分页" class="headerlink" title="3.4.4 排序与分页"></a>3.4.4 排序与分页</h4><p>排序：order_by()，可以在query和filter之后使用order_by。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_model_order_page</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="comment"># 按身份证号排序</span></span><br><span class="line">    app.app_context().push()</span><br><span class="line">    <span class="comment"># 先按姓名排序，姓名相同时，再按身份证号排序</span></span><br><span class="line">    <span class="comment"># 默认按升序ASC-&gt; asc()，可以指定降序DESC-&gt; desc()</span></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.order_by(User.name, User.number.desc()).<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(u.number, u.name, u.phone)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;--&#x27;</span>*<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> User.query.<span class="built_in">filter</span>(User.name.startswith(<span class="string">&#x27;x&#x27;</span>)).order_by(User.phone.desc()).<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(u.name, u.phone, u.number)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询银行卡的余额，按余额的降序排序</span></span><br><span class="line">       <span class="keyword">for</span> card <span class="keyword">in</span> db.session.query(Card).order_by(Card.money.desc()).<span class="built_in">all</span>():</span><br><span class="line">           <span class="built_in">print</span>(card.number, card.money)</span><br></pre></td></tr></table></figure>

<p>分页：offset()，limit()</p>
<p>如果分页函数与order_by组合使用时，必须放在order_by之后。分页函数可以用在query和filter之后。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> count_1 </span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> user.id <span class="keyword">AS</span> user_id, user.number <span class="keyword">AS</span> user_number, user.name <span class="keyword">AS</span> user_name, user.phone <span class="keyword">AS</span> user_phone, user.password <span class="keyword">AS</span> user_password </span><br><span class="line">	<span class="keyword">FROM</span> <span class="keyword">user</span> </span><br><span class="line"> <span class="keyword">WHERE</span> (user.phone <span class="keyword">LIKE</span> concat(<span class="operator">%</span>(phone_1)s, <span class="string">&#x27;%%&#x27;</span>)) </span><br><span class="line"> <span class="keyword">OR</span> (user.phone <span class="keyword">LIKE</span> concat(<span class="operator">%</span>(phone_2)s, <span class="string">&#x27;%%&#x27;</span>)) </span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> user.phone) <span class="keyword">AS</span> anon_1</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_page</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询以“1”或“2”开头手机号的用户信息</span></span><br><span class="line">    <span class="comment"># 先按手机号排序，再分页</span></span><br><span class="line">    query_set = User.query.<span class="built_in">filter</span>(db.or_(User.phone.startswith(<span class="string">&#x27;1&#x27;</span>),</span><br><span class="line">                                      User.phone.startswith(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">    )).order_by(User.phone);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> u <span class="keyword">in</span> self.page_data(query_set, page=<span class="number">2</span>).<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(u.name, u.phone)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page_data</span>(<span class="params">self, query_set, page_size=<span class="number">3</span>, page=<span class="number">1</span></span>):</span><br><span class="line">    total = query_set.count()</span><br><span class="line">    pages = total // page_size + ( <span class="number">1</span> <span class="keyword">if</span> total % page_size &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span> )</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;总条数：%s, 每页显示%s条，总页数：%s&#x27;</span> % (total, page_size, pages))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> page &gt; pages:</span><br><span class="line">        page = pages</span><br><span class="line">    <span class="keyword">elif</span> page &lt;= <span class="number">0</span>:</span><br><span class="line">        page = <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;----------------------显示第%s页-------------------------------&#x27;</span> % page)</span><br><span class="line">    <span class="keyword">return</span> query_set.offset((page-<span class="number">1</span>)*page_size).limit(page_size)</span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务-Flask第五天"><a href="#WEB后端服务-Flask第五天" class="headerlink" title="WEB后端服务-Flask第五天"></a>WEB后端服务-Flask第五天</h1><h2 id="一、聚合查询"><a href="#一、聚合查询" class="headerlink" title="一、聚合查询"></a>一、聚合查询</h2><p>SQLAlchemy支持聚合查询，使用db.session.query()查询和db.func.聚合函数()。</p>
<p>常用的聚合查询函数：</p>
<ul>
<li><p>db.dunc.count(模型类的字段) 统计</p>
</li>
<li><p>db.func.sum() 求和</p>
</li>
<li><p>db.func.min() 最小值</p>
</li>
<li><p>db.func.max() 最大值</p>
</li>
<li><p>db.func.avg() 平均值</p>
<p>以上的聚合函数与mysql中聚合函数一一对应。可以在聚合函数后面使用.label()设置别名。</p>
<p>另外，聚合函数中使用模型类字段必须出现在.group_by()函数中。当然也可以在group_by()之后使用having()设置聚合字段结果的条件，如总财富不少于多少钱，总人数不少于多少人等。在having()中可以使用.label()设定的别名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_sum_money</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 查询每个人的财富</span></span><br><span class="line">    result = db.session.query(Card.user_id, db.func.<span class="built_in">sum</span>(Card.money).label(<span class="string">&#x27;total&#x27;</span>)</span><br><span class="line">                              ).group_by(Card.user_id).having(db.func.<span class="built_in">sum</span>(Card.money) &gt; <span class="number">20000</span></span><br><span class="line">                                                              ).order_by(db.Column(<span class="string">&#x27;total&#x27;</span>).desc()).<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(result))  <span class="comment"># list[(user_id, total), ..]</span></span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 二次查询</span></span><br><span class="line">    user_totals = [ (User.query.get(user_id), money) <span class="keyword">for</span> user_id, money <span class="keyword">in</span> result]</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> user, money <span class="keyword">in</span> user_totals:</span><br><span class="line">        <span class="built_in">print</span>(user.name, user.phone, money)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_bank_money</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="comment"># 防止出现异常：no application found</span></span><br><span class="line">    app.app_context().push()</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># db.session.query() 查询结果是list[(id,name)]</span></span><br><span class="line">    <span class="comment"># result = db.session.query(User.id, User.name).all()</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># collections.namedtuple()</span></span><br><span class="line">    <span class="comment"># print(type(result[0])) # &lt;class &#x27;sqlalchemy.engine.row.Row&#x27;&gt;</span></span><br><span class="line">    <span class="comment"># for id, name in result:</span></span><br><span class="line">    <span class="comment">#     # 以模型对象的方式来显示数据</span></span><br><span class="line">    <span class="comment">#     print(id, name)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># for item in result:</span></span><br><span class="line">    <span class="comment">#     # 以模型对象的方式来显示数据</span></span><br><span class="line">    <span class="comment">#     print(item.id, item.name)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># db.session.query() 查询结果是list[&lt;User 1&gt;, ...]</span></span><br><span class="line">    <span class="comment"># result = db.session.query(User).all()</span></span><br><span class="line">    <span class="comment"># print(result)</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 汇总每个银行的开户的人数、总金额和每个银行的最小金额和最大金额银行卡绑定的用户信息</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 返回结果：list[&lt;sqlalchemy.util._collections.result&gt;] -&gt; collections.namedtuple()</span></span><br><span class="line">    results = db.session.query(Card.bank_id,</span><br><span class="line">                               db.func.<span class="built_in">min</span>(Card.money).label(<span class="string">&#x27;min_&#x27;</span>),</span><br><span class="line">                               db.func.<span class="built_in">max</span>(Card.money).label(<span class="string">&#x27;max_&#x27;</span>),</span><br><span class="line">                               db.func.count(<span class="string">&#x27;*&#x27;</span>).label(<span class="string">&#x27;cnt&#x27;</span>),</span><br><span class="line">                               db.func.<span class="built_in">sum</span>(Card.money).label(<span class="string">&#x27;total&#x27;</span>)</span><br><span class="line">                          	   ).group_by(Card.bank_id).<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> results:</span><br><span class="line">        <span class="built_in">print</span>(Bank.query.get(item.bank_id).name, item.cnt, item.total, item.min_, item.max_)</span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 最小金额的用户信息</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--------------------最小和最大的存款用户信息---------------------&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> user_id, money <span class="keyword">in</span> db.session.query(Card.user_id, Card.money).<span class="built_in">filter</span>(</span><br><span class="line">            Card.bank_id == item.bank_id, db.or_(</span><br><span class="line">                Card.money == item.min_, Card.money == item.max_)).<span class="built_in">all</span>():</span><br><span class="line">            <span class="built_in">print</span>(User.query.get(user_id).name, money)</span><br></pre></td></tr></table></figure>

<h3 id="原生SQL查询"><a href="#原生SQL查询" class="headerlink" title="原生SQL查询"></a>原生SQL查询</h3></li>
</ul>
<p>sqlalchemy库支持原生SQL查询，db.session.execute(sql)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_card_user_bank</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">with</span> app.app_context():</span><br><span class="line">        <span class="comment"># 查询用户名、手机号、银行名、银行地址、银行卡及存款</span></span><br><span class="line">        sql = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            select u.name, u.phone, b.name, b.address, c.number, c.money</span></span><br><span class="line"><span class="string">            from user u</span></span><br><span class="line"><span class="string">            JOIN card c on (u.id = c.user_id)</span></span><br><span class="line"><span class="string">            JOIN bank b on (b.id = c.bank_id)</span></span><br><span class="line"><span class="string">            order by c.money desc</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        exc = db.session.execute(sql)</span><br><span class="line">        <span class="keyword">for</span> username, phone, bankname, address, number, money <span class="keyword">in</span> exc.cursor:</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(username, phone, bankname, address, number, money)</span><br></pre></td></tr></table></figure>

<p>exc.cursor是pymysql.cursor.Cursor类型，而且cursor可以被迭代。</p>
<p>思考：如何让cursor查询结果是dict对象，而不是现在的元组。</p>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><ul>
<li><p>join() 内连接</p>
</li>
<li><p>outerjoin() 外连接</p>
<p>普通的db.session.query()+filter()也可以实现多个实体类进行连接查询</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_user_card</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    result = db.session.query(User.name, User.phone, Card.money,</span><br><span class="line">                              Bank.name.label(<span class="string">&#x27;bankname&#x27;</span>),</span><br><span class="line">                              Bank.address, Card.money, Card.number</span><br><span class="line">                              ).<span class="built_in">filter</span>(</span><br><span class="line">                              User.<span class="built_in">id</span> == Card.user_id).<span class="built_in">filter</span>(Bank.<span class="built_in">id</span> == Card.bank_id)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result.<span class="built_in">all</span>():</span><br><span class="line">        <span class="built_in">print</span>(item.name, item.phone, item.bankname, item.address, item.number.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>), item.money)</span><br></pre></td></tr></table></figure>

<h3 id="总结db-Column-对象的常用方法"><a href="#总结db-Column-对象的常用方法" class="headerlink" title="总结db.Column()对象的常用方法"></a>总结db.Column()对象的常用方法</h3><ul>
<li>label()列的别名</li>
<li>desc() / asc()排序</li>
<li>条件方法<ul>
<li>startswith()    endswith()    like()    contains()    _<em>le()</em>_    _<em>ge()</em>_    lt()    gt()    eq()    isnot()    in_()    notin_()</li>
</ul>
</li>
</ul>
<p>flask.pocoo.org/docs/  官方文档。</p>
<p><a target="_blank" rel="noopener" href="https://www.sqlalchemy.org/">https://www.sqlalchemy.org/</a> 官方文档。</p>
</li>
</ul>
<h2 id="二、SQLAlchemy的模型关系与反向引用"><a href="#二、SQLAlchemy的模型关系与反向引用" class="headerlink" title="二、SQLAlchemy的模型关系与反向引用"></a>二、SQLAlchemy的模型关系与反向引用</h2><p>模型关系分四种：</p>
<ul>
<li>一对一关系</li>
<li>一对多关系</li>
<li>多对一关系</li>
<li>多对多关系</li>
</ul>
<p>配置用户、银行和银行卡的关联关系：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Card</span>(db.Model):</span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    number = db.Column(db.String(<span class="number">20</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    money = db.Column(db.Float(<span class="number">2</span>), default=<span class="number">0</span>, server_default=<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    password = db.Column(db.String(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 模型的关系维护（建立）在多端</span></span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;user.id&#x27;</span>))</span><br><span class="line">    user = db.relationship(User, backref=<span class="string">&#x27;cards&#x27;</span>) <span class="comment"># backref反向链接</span></span><br><span class="line"></span><br><span class="line">    bank_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;bank.id&#x27;</span>))</span><br><span class="line">    bank = db.relationship(Bank, backref=<span class="string">&#x27;cards&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>两个模型类之间建立关系，必须存在一个外键约束。</p>
<p>单元测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestRelationship</span>(<span class="title class_ inherited__">TestCase</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_1</span>(<span class="params">self</span>):</span><br><span class="line">        app.app_context().push()</span><br><span class="line">        user = User.query.get(<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(user.name)</span><br><span class="line">        <span class="keyword">for</span> card <span class="keyword">in</span> user.cards:</span><br><span class="line">            <span class="built_in">print</span>(card.bank.name, card.number, card.money)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_2</span>(<span class="params">self</span>):</span><br><span class="line">    app.app_context().push()</span><br><span class="line">    <span class="keyword">for</span> card <span class="keyword">in</span> Card.query.<span class="built_in">all</span>():</span><br><span class="line">        <span class="comment"># 显示用户名、用户的手机号、银行名，存款</span></span><br><span class="line">        <span class="built_in">print</span>(card.user.name, card.user.phone, card.bank.name, card.money)</span><br></pre></td></tr></table></figure>

<p>关于relationship的用法（自关联）：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9477a28f5079">https://www.jianshu.com/p/9477a28f5079</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94-python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/%E7%96%91%E9%9A%BE%E8%A7%A3%E7%AD%94-python/" class="post-title-link" itemprop="url">疑难解答-python</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-03-18 12:54:58" itemprop="dateModified" datetime="2023-03-18T12:54:58+08:00">2023-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python虚拟环境的常见命令"><a href="#python虚拟环境的常见命令" class="headerlink" title="python虚拟环境的常见命令"></a>python虚拟环境的常见命令</h1><p>原文：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d8833799d934">https://www.jianshu.com/p/d8833799d934</a> </p>
<p>当做一个项目时，可能会用到一些模块，如果都用电脑自带的python环境，并且把所有的模块都安装在这上面，很容易使得自带python环境十分臃肿，而且到时候如果迁移到别的电脑时还需要重新安装对应模块，所以可以用虚拟环境，在不同的环境下安装对应的模块，迁移时也把整个环境迁移过去即可使用虚拟环境步骤</p>
<p>1.创建虚拟环境<br>输入命令：<code>virtualenv 环境名</code><br>（如果有多个python版本，可以通过命令：<code>virtualenv -p python路径 环境名</code>，来创建虚拟环境）<br>2.进入环境下的<code>Scripts</code>文件夹下<br>输入命令执行脚本：<code>activate</code><br>3.接下来就可以在该虚拟环境下pip安装包或者做各种事了，</p>
<p>比如要安装django2.0版本就可以：<code>pip install django==2.0</code></p>
<p><strong>退出虚拟环境</strong></p>
<p>输入命令：<code>deactivate</code></p>
<p><strong>管理虚拟环境</strong></p>
<p>虚拟环境还可以通过一些工具来管理，从而使用起来更加方便，这里推荐<code>virtualenvwrapper</code><br>输入命令：<code>pip install virtualenvwrapper-win</code>（window版），下载<code>virtualenvwrapper</code></p>
<p><strong>创建虚拟环境</strong></p>
<p>输入命令：<code>mkvirtualenv 环境名</code><br>与直接用virtualenv创建不同的是，前面那个是在当前文件夹下创建虚拟环境，而这个是统一在当前用户的<code>envs</code>文件夹下创建，并且会自动进入到该虚拟环境下<br>如果不想在默认地方创建（<code>c:userenvs</code>），可以新建个环境变量：<code>WORKON_HOME</code>，然后里面设置默认路径<br>如果要指定python版本，则输入：<code>mkvirtualenv --python=python路径（到exe文件） 环境名</code></p>
<p><strong>进入虚拟环境输入命令</strong>：<code>workon 环境名</code></p>
<p><strong>退出虚拟环境输入命令</strong>：<code>deactivate</code></p>
<p><strong>删除虚拟环境输入命令</strong>：<code>rmvirtualenv 环境名</code></p>
<p><strong>列出虚拟环境输入命令</strong>：<code>lsvirtualenv</code></p>
<p><strong>进入到虚拟环境目录输入命令</strong>：<code>cdvirtualenv 环境名</code></p>
<p>更多参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/codechangemyworld/p/5277032.html">https://www.cnblogs.com/codechangemyworld/p/5277032.html</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenxinming-top/p/7843178.html">https://www.cnblogs.com/chenxinming-top/p/7843178.html</a></p>
<h1 id="notes"><a href="#notes" class="headerlink" title="notes"></a>notes</h1><p>修改pip安装源：<br>在”c:\users***\pip&quot;下创建”pip.ini”文件<br>文件内写上：<br>[global]<br>index-url=<a target="_blank" rel="noopener" href="https://pypi.doubanio.com/simple">https://pypi.doubanio.com/simple</a></p>
<p>查看依赖库版本：pip freeze / pip list<br>安装指定版本依赖库：pip install ***==x.x.x<br>生成所需依赖库txt文件：pip freeze &gt; requirements.txt<br>根据已有依赖库txt文件安装库：pip install -r requirements.txt</p>
<h1 id="Python-flask-flask-script-报错：ModuleNotFoundError-No-module-named-‘flask-compat’解决方法"><a href="#Python-flask-flask-script-报错：ModuleNotFoundError-No-module-named-‘flask-compat’解决方法" class="headerlink" title="Python flask flask_script 报错：ModuleNotFoundError: No module named ‘flask._compat’解决方法"></a>Python flask flask_script 报错：ModuleNotFoundError: No module named ‘flask._compat’解决方法</h1><ul>
<li><a href="javascript:void(0);">levi</a> 编辑于 2021-06-27</li>
</ul>
<p>本文主要介绍Python中，使用flask中flask_script时，报错：ModuleNotFoundError: No module named ‘flask._compat’的解决方法，以及相关示例代码。</p>
<p><strong>manage.py：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from flask_script import Manager</span><br><span class="line">from main import app</span><br><span class="line">manager = Manager(app)</span><br><span class="line">@manager.command</span><br><span class="line">def hello():</span><br><span class="line">    print (&quot;hello&quot;)</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>

<p><strong>main.py:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br></pre></td></tr></table></figure>

<p><strong>报错信息：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(venv) cjavapy@cjavapy-PC:~/Proyectos Python/flask_script$ python3 manage.py hello</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;manage.py&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    from flask_script import Manager</span><br><span class="line">  File &quot;/home/cjavapy/Proyectos Python/flask_script/venv/lib/python3.8/site-packages/flask_script/__init__.py&quot;, line 15, in &lt;module&gt;</span><br><span class="line">    from flask._compat import text_type</span><br><span class="line">ModuleNotFoundError: No module named &#x27;flask._compat&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>原因：</strong></p>
<p>可能是更新了Flask版本问题，导致<code>Flask._compat</code>的目录发生变化。</p>
<p><strong>解决方法：</strong></p>
<p>使用如下命令降级；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install &quot;Flask==1.1.4&quot;</span><br><span class="line">pip install &quot;werkzeug==1.0.1&quot;</span><br></pre></td></tr></table></figure>

<p>或者</p>
<p>不使用<code>Flask-Script</code>，使用<code>flask</code>命令如下：</p>
<p>初始化数据库：<code>flask db init</code></p>
<p>迁移新更改：<code>flask db migrate</code></p>
<p>升级：<code>flask db upgrade</code></p>
<p>还有其它命令…</p>
<p>或者</p>
<p><strong>不降级则可以尝试修改一下<code>flask_script/__init__.py</code>中<code>from ._compat import text_type</code> 改成 <code>from flask_script._compat import text_type</code> 。</strong></p>
<h1 id="Error-Could-not-locate-a-Flask-application-You-did-not-provide-the-“FLASK-APP“-environment-variabl"><a href="#Error-Could-not-locate-a-Flask-application-You-did-not-provide-the-“FLASK-APP“-environment-variabl" class="headerlink" title="Error: Could not locate a Flask application. You did not provide the “FLASK_APP“ environment variabl"></a>Error: Could not locate a Flask application. You did not provide the “FLASK_APP“ environment variabl</h1><h2 id="报错详情"><a href="#报错详情" class="headerlink" title="报错详情"></a>报错详情</h2><p>flask环境下生成临时web可视网址时报错：<br>Error: Could not locate a Flask application. You did not provide the “FLASK_APP” <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=environment&spm=1001.2101.3001.7020">environment</a> variable, and a “wsgi.py” or “app.py” module was not found in the current directory.<br><img src="https://img-blog.csdnimg.cn/202011191801199.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yS3JhYnNfQ2FzaGllcg==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>解决很简单，因为=前后多了空格，没有识别到</p>
<blockquote>
<p>Set FLASK_APP=microblog.py<br>flask run</p>
</blockquote>
<p>就可以运行了。<br><img src="https://img-blog.csdnimg.cn/20201119181741118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yS3JhYnNfQ2FzaGllcg==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="没有解决问题原因1：可能是文件在目录中的位置不对"><a href="#没有解决问题原因1：可能是文件在目录中的位置不对" class="headerlink" title="没有解决问题原因1：可能是文件在目录中的位置不对"></a>没有解决问题原因1：可能是文件在目录中的位置不对</h2><p>附上我项目的目录，注意_init_.py文件，route.py文件都在blogapp目录下<br>主目录<br><img src="https://img-blog.csdnimg.cn/20201119180815208.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yS3JhYnNfQ2FzaGllcg==,size_16,color_FFFFFF,t_70#pic_center"><br>blogapp目录<br><img src="https://img-blog.csdnimg.cn/20201119180916654.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yS3JhYnNfQ2FzaGllcg==,size_16,color_FFFFFF,t_70#pic_center"><br>templates目录（.env文件放在此目录下）<br><img src="https://img-blog.csdnimg.cn/2020111918101447.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yS3JhYnNfQ2FzaGllcg==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="没有解决问题原因2：可能是flask指令时打开的位置不对"><a href="#没有解决问题原因2：可能是flask指令时打开的位置不对" class="headerlink" title="没有解决问题原因2：可能是flask指令时打开的位置不对"></a>没有解决问题原因2：可能是flask指令时打开的位置不对</h2><p>Windows环境下，在cmd中Set FLASK_APP=microblog.py的话，应该打开到有此py文件的目录下，不然找不到文件。（我的文件在blogapp下，所以打开到blogapp为止）<br><img src="https://img-blog.csdnimg.cn/20201119181418500.png#pic_center"><br>这就是目前经历过的一些问题，后续还有问题再做更改。</p>
<h1 id="【已解决】Python-3-10-使用pdf2docx报错ImportError-cannot-import-name-‘Iterable‘-from-‘collections‘的解决办法"><a href="#【已解决】Python-3-10-使用pdf2docx报错ImportError-cannot-import-name-‘Iterable‘-from-‘collections‘的解决办法" class="headerlink" title="【已解决】Python 3.10 使用pdf2docx报错ImportError:cannot import name ‘Iterable‘ from ‘collections‘的解决办法"></a>【已解决】Python 3.10 使用pdf2docx报错ImportError:cannot import name ‘Iterable‘ from ‘collections‘的解决办法</h1><p>本人初学Python，经推荐看到一个很简单快捷的pdf转docx方法，仅仅需要几行代码即可完成，于是想抄来用，但是因为我安装的Python是3.10.0版，运行的时候老是报错：ImportError:cannot import name ‘Iterable’ from ‘collections’，在“老表Max”的指导下，解决了此问题，感谢！</p>
<p>pdf2docx代码介绍：</p>
<p>Convert PDF — pdf2docx 0.5.2 documentation</p>
<p>运行报错状态：</p>
<p><img src="https://img-blog.csdnimg.cn/24e14282389344a5ba64e93b786faf7d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARGFuaWVsX1hpZV84NA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p>原因查找：</p>
<p>经网上搜索，感谢几位网友的经验，应该是版本导致的问题</p>
<p><img src="https://img-blog.csdnimg.cn/453a8745f36b44a4aaec6faae1033d3b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARGFuaWVsX1hpZV84NA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p>解决方法：</p>
<p>我尝试直接在代码前面加上‘from collections.abc import Iterable’, 测试结果是True,但是还是不能运行。经‘老表Max’指点，看最后一次报错的文件，去改那个文件的代码，然后保存即可 </p>
<p><img src="https://img-blog.csdnimg.cn/09054a3da7b14c35af8756b04954cb5e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARGFuaWVsX1hpZV84NA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/a0726661a71b48fca3ff574f394655ed.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARGFuaWVsX1hpZV84NA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p>运行成功界面：</p>
<p><img src="https://img-blog.csdnimg.cn/db8a76d9d91340ca9607cfcfc6e24763.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARGFuaWVsX1hpZV84NA==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<h1 id="cannot-import-name-‘Mapping‘-from-‘collections‘"><a href="#cannot-import-name-‘Mapping‘-from-‘collections‘" class="headerlink" title="cannot import name ‘Mapping‘ from ‘collections‘"></a>cannot import name ‘Mapping‘ from ‘collections‘</h1><p>解决步骤：</p>
<p>①复制该地址<code>“C:\User\…\AppData\Local\Programs\Python\Python310\lib\collections_init_.py”</code><br>②打开这个地址<br>③加上这条语句：<code>from collections.abc import Mapping</code></p>
<p><img src="https://img-blog.csdnimg.cn/db0e6deff567453cb7f4dab12fb7511a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQXNkenhjeXVpaGprcXdl,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p>
<p>保存，再输一遍，搞掂</p>
<p><img src="https://img-blog.csdnimg.cn/11cae4aca04f4468b62c872f60c2a756.png#pic_center" alt="在这里插入图片描述"></p>
<p>————————————————<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_51092297/article/details/122889327">https://blog.csdn.net/weixin_51092297/article/details/122889327</a></p>
<h1 id="AttributeError-module-‘collections‘-has-no-attribute-‘MutableMapping‘"><a href="#AttributeError-module-‘collections‘-has-no-attribute-‘MutableMapping‘" class="headerlink" title="AttributeError: module ‘collections‘ has no attribute ‘MutableMapping‘"></a>AttributeError: module ‘collections‘ has no attribute ‘MutableMapping‘</h1><p>情况说明<br>今天在装live server时遇到如下两个问题。</p>
<p>module ‘collections’ has no attribute ‘MutableSet’<br>AttributeError: module ‘collections’ has no attribute ‘MutableMapping’<br>部分错误结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(py3_django4-<span class="number">0</span>-<span class="number">4</span>) lds@lishuaige:~/Desktop/meiduo/front_end$ live-server </span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/home/lds/.local/bin/live-server&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> live_server.cli <span class="keyword">import</span> cli</span><br><span class="line">  File <span class="string">&quot;/home/lds/.local/lib/python3.10/site-packages/live_server/cli.py&quot;</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> . <span class="keyword">import</span> watcher</span><br><span class="line">  File <span class="string">&quot;/home/lds/.local/lib/python3.10/site-packages/live_server/watcher.py&quot;</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> . <span class="keyword">import</span> server</span><br><span class="line">  File <span class="string">&quot;/home/lds/.local/lib/python3.10/site-packages/live_server/server.py&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">import</span> tornado.web</span><br><span class="line">  File <span class="string">&quot;/home/lds/.local/lib/python3.10/site-packages/tornado/web.py&quot;</span>, line <span class="number">88</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> tornado <span class="keyword">import</span> httputil</span><br><span class="line">  File <span class="string">&quot;/home/lds/.local/lib/python3.10/site-packages/tornado/httputil.py&quot;</span>, line <span class="number">107</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">HTTPHeaders</span>(collections.MutableMapping):</span><br><span class="line">AttributeError: module <span class="string">&#x27;collections&#x27;</span> has no attribute <span class="string">&#x27;MutableMapping&#x27;</span></span><br></pre></td></tr></table></figure>

<p>解决方案<br>网上找了好多都是把问题贴出来然后就没下文了，琢磨了三四个小时幸亏解决了！！应该是python 3.10 那些 MutableMapping，MutableSet等放的位置变了，他们的上级模块原本直属collections的变成了abc，也就是说，需要把</p>
<p><code>collections.MutableMapping</code><br>改成</p>
<p><code>collections.abc.MutableMapping</code><br>那要怎么改呢？比如我这里报错，就点进源文件里面</p>
<p><img src="https://img-blog.csdnimg.cn/06d7782d73f3445f89512dd4718ac967.png" alt="在这里插入图片描述"></p>
<p>按上述方法修改即可。</p>
<p><img src="https://img-blog.csdnimg.cn/fc4a64259d1944deb86a3b10fe39336a.png" alt="在这里插入图片描述"></p>
<h1 id="Content-Type标头未在Tornado中设置"><a href="#Content-Type标头未在Tornado中设置" class="headerlink" title="Content-Type标头未在Tornado中设置"></a>Content-Type标头未在Tornado中设置</h1><p>我有以下基类：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CorsHandler</span>(tornado.web.RequestHandler):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_default_headers</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(CorsHandler, self).set_default_headers()</span><br><span class="line"></span><br><span class="line">        self.set_header(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, self.request.headers.get(<span class="string">&#x27;Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>))</span><br><span class="line">        self.set_header(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;GET, PUT, POST, DELETE, OPTIONS&#x27;</span>)</span><br><span class="line">        self.set_header(<span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span>, <span class="string">&#x27;true&#x27;</span>)</span><br><span class="line">        self.set_header(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;,&#x27;</span>.join(</span><br><span class="line">            self.request.headers.get(<span class="string">&#x27;Access-Control-Request-Headers&#x27;</span>, <span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27;,&#x27;</span>) +</span><br><span class="line">            [<span class="string">&#x27;Content-Type&#x27;</span>]</span><br><span class="line">        ))</span><br><span class="line"></span><br><span class="line">        self.set_header(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">options</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>和以下处理程序：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, resource_id=<span class="literal">None</span>, field=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> resource_id <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            response = self.resource.query.filter_by(is_deleted=<span class="literal">False</span>).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            record = self.resource.query.get(<span class="built_in">int</span>(resource_id))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> field <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                response = record</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                response = &#123;field: <span class="built_in">getattr</span>(record, field)&#125;</span><br><span class="line"></span><br><span class="line">        self.db.session.commit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception, e:</span><br><span class="line">        self.db.session.rollback()</span><br><span class="line"></span><br><span class="line">        self.send_error(<span class="number">500</span>, message=e.message)</span><br><span class="line"></span><br><span class="line">    self.write(response)</span><br></pre></td></tr></table></figure>

<p>除了未设置Content-Type之外，其他所有内容都非常简单明了。请注意，其他任何标题均已正确设置。</p>
<p><strong>解决方案</strong></p>
<p>看来这是<code>304 Not Modified</code>回应。请记住，只有第一个<code>200 OK</code>响应包含<code>Content-Type</code>标头。如果您请求相同的资源，则以下响应将忽略此标头。</p>
<p>并且要注意，您实际上并不需要显式设置<code>Content-Type</code>。如果您查看Tornado的源代码，您将在以下注释中找到它<code>write(self, chunk)</code>：</p>
<blockquote>
<p>如果给定的块是字典，则将其编写为JSON并将响应的Content-Type设置为<code>application/json</code>。（如果您想以不同的方式发送JSON <code>Content-Type</code>，请<em>在</em>调用write（）<em>之后</em>调用set_header ）。</p>
</blockquote>
<h1 id="python报-DeprecationWarning-“-coroutine”-decorator-…-use-“async-def”-解决办法"><a href="#python报-DeprecationWarning-“-coroutine”-decorator-…-use-“async-def”-解决办法" class="headerlink" title="python报 DeprecationWarning: “@coroutine” decorator …. use “async def” 解决办法"></a>python报 DeprecationWarning: “@coroutine” decorator …. use “async def” 解决办法</h1><p>python报错：<br>DeprecationWarning: “@coroutine” decorator is deprecated since Python 3.8, use “async def” instea def logger_factory(app, handler):</p>
<p><img src="https://img-blog.csdnimg.cn/20191224115944580.png" alt="在这里插入图片描述"></p>
<p>报错原因：<br>用asyncio提供的@asyncio.coroutine可以把一个generator标记为coroutine类型，然后在coroutine内部用yield from调用另一个coroutine实现异步操作。<br>但是从Python 3.5开始引入了新的语法async和await，可以让coroutine的代码更简洁易读（抛弃了@asyncio.coroutine）。</p>
<p>解决办法：<br>async和await是针对coroutine的新语法，要使用新的语法，只需要做两步简单的替换：</p>
<p>1.把@asyncio.coroutine替换为async；<br>2.把yield from替换为await。<br>小结<br>Python从3.5版本开始为asyncio提供了async和await的新语法；<br>注意新语法只能用在Python 3.5以及后续版本，如果使用3.4版本，则仍需使用@asyncio.coroutine。</p>
<h1 id="DeprecationWarning-There-is-no-current-event-loop"><a href="#DeprecationWarning-There-is-no-current-event-loop" class="headerlink" title="DeprecationWarning: There is no current event loop"></a>DeprecationWarning: There is no current event loop</h1><p>我目前所发现的报错原因有以下两种：</p>
<ol>
<li><code>loop=asyncio.get_event_loop()</code><br>改为</li>
</ol>
<p>​    <code>loop = asyncio.new_event_loop() ​    asyncio.set_event_loop(loop)</code></p>
<ol start="2">
<li>由于使用 asyncio.ensure_future() ,需要传入参数以外还需要传入指定loop，如下所示：</li>
</ol>
<p><code>task = asyncio.ensure_future(c, loop=loop)</code><br>由于python代码的缩进问题十分严谨，所以new_event_loop以及set_event_loop必须放在ensure_future上面</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正确用法</span></span><br><span class="line"></span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br><span class="line">...</span><br><span class="line">task = asyncio.ensure_future(c, loop=loop)</span><br><span class="line"></span><br><span class="line"><span class="comment"># c是你自己创建的协程对象，我这里忽略了</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误用法</span></span><br><span class="line"></span><br><span class="line">task = asyncio.ensure_future(c, loop=loop)</span><br><span class="line">...</span><br><span class="line">loop = asyncio.new_event_loop()</span><br><span class="line">asyncio.set_event_loop(loop)</span><br></pre></td></tr></table></figure>

<h1 id="使用Django管理员在后台添加数据库时出现no-such-table-main-auth-user-old解决方法"><a href="#使用Django管理员在后台添加数据库时出现no-such-table-main-auth-user-old解决方法" class="headerlink" title="使用Django管理员在后台添加数据库时出现no such table: main.auth_user__old解决方法"></a>使用Django管理员在后台添加数据库时出现no such table: main.auth_user__old解决方法</h1><p><img src="https://img-blog.csdnimg.cn/20c93d2929ec4a1b8e52a3d6baa4a38d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBATmFyY2lzc3VzYOWwj-aarg==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<p>在学习Django开发时，创建好管理员账号后，准备通过Django内置的管理网页来测试能否在表中添加记录，选择save后出现如上图所示的报错。</p>
<p>解决方案是升级Django的版本，原Django version==2.0<br>在命令行中输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Django --upgrade</span><br></pre></td></tr></table></figure>

<p>删除掉app下的migrations文件夹，删除掉db.sqlite3</p>
<p>然后开始对默认的app进行迁移</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>执行完这条命令就可以看到db.sqlite新建好了</p>
<p>然后迁移自己的app</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations common</span><br><span class="line">python manage.py migrate common</span><br></pre></td></tr></table></figure>

<p>完成数据库迁移之后，再次创建超级用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py createsuperuser</span><br></pre></td></tr></table></figure>

<p>可以在新的auth_user表中查看到自己新建的超级用户</p>
<p><img src="https://img-blog.csdnimg.cn/2e83a4ea95e44d30ba8f7dad5f2ce343.png" alt="在这里插入图片描述"></p>
<p>保证服务器的运行，进入<a target="_blank" rel="noopener" href="http://127.0.0.1/admin/">http://127.0.0.1/admin/</a><br>再次新建用户，此时就可以正常的创建了，问题解决！</p>
<p><img src="https://img-blog.csdnimg.cn/31924b5683e64ef3bc5efcb4fce45e6c.png" alt="在这里插入图片描述"></p>
<h1 id="TemplateDoesNotExist-at"><a href="#TemplateDoesNotExist-at" class="headerlink" title="TemplateDoesNotExist at/****"></a>TemplateDoesNotExist at/****</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">TemplateDoesNotExist at /user/find</span><br><span class="line">fruit/list.html</span><br><span class="line">Request Method:	GET</span><br><span class="line">Request URL:	http://localhost:8000/user/find?price1=5</span><br><span class="line">Django Version:	4.0.6</span><br><span class="line">Exception Type:	TemplateDoesNotExist</span><br><span class="line">Exception Value:	</span><br><span class="line">fruit/list.html</span><br><span class="line">Exception Location:	I:\CDriveSW\desktop\python\python-web2\hiDjango\venv\lib\site-packages\django\template\loader.py, line 19, in get_template</span><br><span class="line">Python Executable:	I:\CDriveSW\desktop\python\python-web2\hiDjango\venv\Scripts\python.exe</span><br><span class="line">Python Version:	3.10.4</span><br><span class="line">Python Path:	</span><br><span class="line">[&#x27;I:\\CDriveSW\\desktop\\python\\python-web2\\hiDjango\\helloDjango&#x27;,</span><br><span class="line"> &#x27;C:\\Users\\Private\\AppData\\Local\\Programs\\Python\\Python310\\python310.zip&#x27;,</span><br><span class="line"> &#x27;C:\\Users\\Private\\AppData\\Local\\Programs\\Python\\Python310\\DLLs&#x27;,</span><br><span class="line"> &#x27;C:\\Users\\Private\\AppData\\Local\\Programs\\Python\\Python310\\lib&#x27;,</span><br><span class="line"> &#x27;C:\\Users\\Private\\AppData\\Local\\Programs\\Python\\Python310&#x27;,</span><br><span class="line"> &#x27;I:\\CDriveSW\\desktop\\python\\python-web2\\hiDjango\\venv&#x27;,</span><br><span class="line"> &#x27;I:\\CDriveSW\\desktop\\python\\python-web2\\hiDjango\\venv\\lib\\site-packages&#x27;]</span><br><span class="line">Server time:	Sat, 16 Jul 2022 14:11:19 +0800</span><br></pre></td></tr></table></figure>

<p>出错原因：访问不到templates里面的模板<br><strong>解决方式</strong></p>
<ul>
<li><p>方法1、 复制hello.html文件至安装路径下的Python27\lib\site-packages\django-1.8.18-py2.7.egg文件下<br>启动服务python manage.py runserver 127.0.0.1:8000<br>运行<a target="_blank" rel="noopener" href="http://127.0.0.1:8000/hello%EF%BC%8C%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E3%80%82">http://127.0.0.1:8000/hello，错误解决。</a></p>
</li>
<li><p>方法2、文件夹templates复制到project项目文件夹下。</p>
</li>
<li><p>方法3、在settings.py里确认TEMPLATES目录</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">  BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))  <span class="comment"># 项目内路径</span></span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  TEMPLATES = [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;DIRS&#x27;</span>: [</span><br><span class="line">              os.path.join(BASE_DIR, <span class="string">&#x27;../templates&#x27;</span>),  <span class="comment"># 后面参数表示模板主目录相对内路径的所在位置</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">&#x27;APP_DIRS&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">          <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">              <span class="string">&#x27;context_processors&#x27;</span>: [</span><br><span class="line">                  <span class="string">&#x27;django.template.context_processors.debug&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;django.template.context_processors.request&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class="line">              ],</span><br><span class="line">          &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu 系统下如何安装pip3工具</span></span><br><span class="line"></span><br><span class="line">一、【导读】</span><br><span class="line">Ubuntu 系统内置了 Python2 和 Python3 两个版本的开发环境，却没有内置相应的 pip3 管理工具，本文将介绍如何在Ubuntu下如何快速安装 pip3 工具，并升级到最新可用版本（教程同样适用于Linux下安装）。</span><br><span class="line"></span><br><span class="line">二、安装</span><br><span class="line">直接在 Ubuntu 终端下输入“pip3 -V”命令尝试查看对应 pip3 工具的版本信息：</span><br><span class="line"></span><br><span class="line">![img](https://img-blog.csdnimg.cn/<span class="number">20190419093412955.</span>png)</span><br><span class="line"></span><br><span class="line">提示没有相关的pip工具，但可以尝试使用 “sudo apt install python3-pip” 命令进行安装，所以只需在终端输入：</span><br><span class="line"></span><br><span class="line">```sudo apt-get install python3-pip```</span><br><span class="line">回车即可安装，但安装的 pip3 工具并不是最新版本的：</span><br><span class="line"></span><br><span class="line">![img](https://img-blog.csdnimg.cn/<span class="number">20190419095622525.</span>png)</span><br><span class="line"></span><br><span class="line">接下来需要进行pip工具的升级更新。</span><br><span class="line"></span><br><span class="line">三、升级</span><br><span class="line">运行更新升级指令：</span><br><span class="line"></span><br><span class="line">```sudo pip3 install --upgrade pip```</span><br><span class="line">升级成功后：</span><br><span class="line"></span><br><span class="line">![img](https://img-blog.csdnimg.cn/<span class="number">20190419105203265.</span>png)</span><br><span class="line"></span><br><span class="line">四、卸载</span><br><span class="line">```sudo apt-get remove python3-pip```</span><br><span class="line"></span><br><span class="line"><span class="comment"># python安装curl</span></span><br><span class="line"></span><br><span class="line">`pycurl`是`libcurl`的 Python 接口，用C语言写的，速度比较快，是一个常用的网络开发库。</span><br><span class="line"></span><br><span class="line">`pycurl`无论在 Linux 还是 Windows 安装都会有点问题。</span><br><span class="line"></span><br><span class="line"><span class="comment">## Linux 下安装</span></span><br><span class="line"></span><br><span class="line">只需要先安装对应的开发包即可(需要root权限)</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">yum install python-devel curl-devel  </span><br><span class="line">pip install pycurl  </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Windows-下安装"><a href="#Windows-下安装" class="headerlink" title="Windows 下安装"></a>Windows 下安装</h2><p>Windows 下安装<code>pycurl</code>要稍微麻烦些。如果是用的 Python 低于 3.6，可以直接使用 pip 命令安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pycurl  </span><br></pre></td></tr></table></figure>

<p>若使用的 Python 版本是 **3.6+**，则会报找不到对应的<code>pycurl</code>版本，导致安装失败。（截止20190911这天还没有）</p>
<p>报错如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Command errored <span class="keyword">out</span> <span class="keyword">with</span> exit status <span class="number">10</span>:  </span><br><span class="line">     command: <span class="string">&#x27;e:\green_tools\python\python37\python.exe&#x27;</span> <span class="operator">-</span>c <span class="string">&#x27;import sys, setuptools, tokenize; sys.argv[0] = &#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\pip-install-1t1yx2hf\\pycur</span></span><br><span class="line"><span class="string">l\\setup.py&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;; __file__=&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\pip-install-1t1yx2hf\\pycurl\\setup.py&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;;f=getattr(tokenize, &#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;open&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;, open)(__file__);code=f.read().  </span></span><br><span class="line"><span class="string">replace(&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;\r\n&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;, &#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;\n&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;);f.close();exec(compile(code, __file__, &#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;exec&#x27;</span>&quot;&#x27;&quot;<span class="string">&#x27;))&#x27;</span> egg_info <span class="comment">--egg-base pip-egg-info  </span></span><br><span class="line">         cwd: C:\Users\ADMINI<span class="operator">~</span><span class="number">1</span>\AppData\<span class="keyword">Local</span>\Temp\pip<span class="operator">-</span>install<span class="number">-1</span>t1yx2hf\pycurl\</span><br><span class="line">    Complete output (<span class="number">1</span> lines):</span><br><span class="line">    Please specify <span class="comment">--curl-dir=/path/to/built/libcurl</span></span><br><span class="line">    <span class="comment">----------------------------------------</span></span><br><span class="line">ERROR: Command errored <span class="keyword">out</span> <span class="keyword">with</span> exit status <span class="number">10</span>: python setup.py egg_info <span class="keyword">Check</span> the logs <span class="keyword">for</span> <span class="keyword">full</span> command output.</span><br></pre></td></tr></table></figure>

<p>我们换一种办法安装，使用<code>whl</code>文件安装，需要借助<code>wheel</code>库，执行如下命令安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install wheel  </span><br></pre></td></tr></table></figure>

<p>打开网址：<a target="_blank" rel="noopener" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#pycurl">https://www.lfd.uci.edu/~gohlke/pythonlibs/#pycurl</a> ，下载对应的<code>pycurl</code>版本的<code>whl</code>文件。 <a target="_blank" rel="noopener" href="https://ghost.oss.sherlocky.com/2/b6/005d8038088246fa2ef2ff24fa7b9.png"><img src="https://ghost.oss.sherlocky.com/2/b6/005d8038088246fa2ef2ff24fa7b9.png" alt="img"></a> </p>
<p>这里我下载的是：pycurl-7.43.0.3-cp37-cp37m-win_amd64.whl</p>
<blockquote>
<p>其中 cp37 指的是 Python3.7<br>win_amd64 指的是 Python 是 64 位的 Windows 版本</p>
</blockquote>
<p>执行如下命令安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install C:\Users\Administrator\Downloads\pycurl-7.43.0.3-cp37-cp37m-win_amd64.whl  </span><br></pre></td></tr></table></figure>

<p>至此安装完毕，以后有类似库找不到对应的版本安装的话，也可以利用<code>wheel</code>安装<code>whl</code>文件。</p>
<h1 id="pip-install-报错Caused-by-SSLError-SSLEOFError-8-‘EOF-occurred-in-violation-of-protocol"><a href="#pip-install-报错Caused-by-SSLError-SSLEOFError-8-‘EOF-occurred-in-violation-of-protocol" class="headerlink" title="pip install 报错Caused by SSLError(SSLEOFError(8, ‘EOF occurred in violation of protocol"></a>pip install 报错Caused by SSLError(SSLEOFError(8, ‘EOF occurred in violation of protocol</h1><p>我的报错原因是：<br>直接原因：系统挂有代理导致</p>
<p>根本原因：不太清楚。</p>
<p>解决方法（以下任一即可）<br>方法一：<br>关掉系统代理（PAC 也不可，需要  清除（关掉）系统代理</p>
<p>方法二：<br>在使用 pip 的终端设置正确的 https 代理</p>
<p>临时设置命令为: set https_proxy=<a href="http://127.0.0.1:port(自己的本地代理端口号)">http://127.0.0.1:port(自己的本地代理端口号)</a></p>
<p>长期设置 or 终端启动 自动设置代理请自行 google 或者 bing</p>
<h1 id="pip-install-weditor安装出错解决方法"><a href="#pip-install-weditor安装出错解决方法" class="headerlink" title="pip install weditor安装出错解决方法"></a>pip install weditor安装出错解决方法</h1><p>报错信息：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">Looking in indexes: https:<span class="comment">//pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class="line">Collecting weditor</span><br><span class="line">Using cachedhttps:<span class="comment">//pypi.tuna.tsinghua.edu.cn/packages/04/9b/ec6c2b8ab08fecd21d98121e2b91244632d1836669bb9c917ff01406bd1a/wedito</span></span><br><span class="line">r<span class="number">-0.6</span><span class="number">.5</span>.tar.gz (<span class="number">2.2</span> MB)</span><br><span class="line">Preparing <span class="title function_">metadata</span> <span class="params">(setup.py)</span> ... error</span><br><span class="line">error: subprocess-exited-with-error</span><br><span class="line"></span><br><span class="line">× python setup.py egg_info did not run successfully.</span><br><span class="line">│ <span class="built_in">exit</span> code: 1</span><br><span class="line">╰─&gt; [34 lines of output]</span><br><span class="line">WARNING: Ignoring invalid distribution -pencv-<span class="title function_">python</span> <span class="params">(c:\users\administrator.desktop<span class="number">-3488</span>grn\appdata\roaming\python\python38</span></span><br><span class="line"><span class="params">site-packages)</span></span><br><span class="line">WARNING: Ignoring invalid distribution -<span class="title function_">ip</span> <span class="params">(e:\ziyuanbao\lib\site-packages)</span></span><br><span class="line">E:\ziyuanbao\lib\site-packages\setuptools\dist.py:738: UserWarning: Usage of dash-separated &#x27;author-email&#x27; will not be suppor</span><br><span class="line">ted in <span class="built_in">future</span> versions. Please use the underscore name &#x27;author_email&#x27; instead</span><br><span class="line">warnings.<span class="title function_">warn</span><span class="params">(</span></span><br><span class="line"><span class="params">E:\ziyuanbao\lib\site-packages\setuptools\dist.py:<span class="number">738</span>: UserWarning: Usage of dash-separated <span class="string">&#x27;home-page&#x27;</span> will not be supported</span></span><br><span class="line"><span class="params">in <span class="built_in">future</span> versions. Please use the underscore name <span class="string">&#x27;home_page&#x27;</span> instead</span></span><br><span class="line"><span class="params">warnings.warn(</span></span><br><span class="line"><span class="params">E:\ziyuanbao\lib\site-packages\setuptools\dist.py:<span class="number">738</span>: UserWarning: Usage of dash-separated <span class="string">&#x27;description-file&#x27;</span> will not be su</span></span><br><span class="line"><span class="params">pported in <span class="built_in">future</span> versions. Please use the underscore name <span class="string">&#x27;description_file&#x27;</span> instead</span></span><br><span class="line"><span class="params">warnings.warn(</span></span><br><span class="line"><span class="params">E:\ziyuanbao\lib\site-packages\pkg_resources_init.py:<span class="number">122</span>: PkgResourcesDeprecationWarning: <span class="number">4.0</span><span class="number">.0</span>-unsupported is an invalid</span></span><br><span class="line"><span class="params">version and will not be supported in a <span class="built_in">future</span> release</span></span><br><span class="line"><span class="params">warnings.warn(</span></span><br><span class="line"><span class="params">E:\ziyuanbao\lib\site-packages\setuptools\installer.py:<span class="number">27</span>: SetuptoolsDeprecationWarning: setuptools.installer is deprecated.</span></span><br><span class="line"><span class="params">Requirements should be satisfied by a PEP <span class="number">517</span> installer.</span></span><br><span class="line"><span class="params">warnings.warn(</span></span><br><span class="line"><span class="params">Error parsing</span></span><br><span class="line"><span class="params">Traceback (most recent call last):</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\core.py&quot;</span>, line <span class="number">111</span>, in pbr</span></span><br><span class="line"><span class="params">attrs = util.cfg_to_args(path, dist.script_args)</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\util.py&quot;</span>, line <span class="number">272</span>, in cfg_to_args</span></span><br><span class="line"><span class="params">pbr.hooks.setup_hook(config)</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\hooks_init.py&quot;</span>, line <span class="number">25</span>, in setup_hook</span></span><br><span class="line"><span class="params">metadata_config.run()</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\hooks\base.py&quot;</span>, line <span class="number">27</span>, in run</span></span><br><span class="line"><span class="params">self.hook()</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\hooks\metadata.py&quot;</span>, line <span class="number">25</span>, in hook</span></span><br><span class="line"><span class="params">self.config[<span class="string">&#x27;version&#x27;</span>] = packaging.get_version(</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\packaging.py&quot;</span>, line <span class="number">860</span>, in get_version</span></span><br><span class="line"><span class="params">version =get_version_from_pkg_metadata(package_name)</span></span><br><span class="line"><span class="params">File <span class="string">&quot;c:\users\administrator.desktop-3488grn\appdata\local\temp\pip-install-c_1owwyj\weditor_c837051f5af04a9893def95fbce5da</span></span></span><br><span class="line"><span class="string"><span class="params">7e.eggs\pbr-5.8.1-py3.8.egg\pbr\packaging.py&quot;</span>, line <span class="number">828</span>, in get_version_from_pkg_metadata</span></span><br><span class="line"><span class="params">pkg_metadata = email.message_from_file(pkg_metadata_file)</span></span><br><span class="line"><span class="params">File <span class="string">&quot;E:\ziyuanbao\lib\email_init.py&quot;</span>, line <span class="number">54</span>, in message_from_file</span></span><br><span class="line"><span class="params"><span class="keyword">return</span> Parser(*args, **kws).parse(fp)</span></span><br><span class="line"><span class="params">File <span class="string">&quot;E:\ziyuanbao\lib\email\parser.py&quot;</span>, line <span class="number">53</span>, in parse</span></span><br><span class="line"><span class="params">data = fp.read(<span class="number">8192</span>)</span></span><br><span class="line"><span class="params">UnicodeDecodeError: <span class="string">&#x27;gbk&#x27;</span> codec can<span class="string">&#x27;t decode byte 0xad in position 825: illegal multibyte sequence</span></span></span><br><span class="line"><span class="string"><span class="params">error in setup command: Error parsing C:\Users\Administrator.DESKTOP-3488GRN\AppData\Local\Temp\pip-install-c_1owwyj\weditor</span></span></span><br><span class="line"><span class="string"><span class="params">c837051f5af04a9893def95fbce5da7e\setup.cfg: UnicodeDecodeError: &#x27;</span>gbk<span class="string">&#x27; codec can&#x27;</span>t decode byte <span class="number">0xad</span> in position <span class="number">825</span>: illegal multiby</span></span><br><span class="line"><span class="params">te sequence</span></span><br><span class="line"><span class="params">[end of output]</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">note: This error originates from a subprocess, and is likely not a problem with pip.</span></span><br><span class="line"><span class="params">error: metadata-generation-failed</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">× Encountered error <span class="keyword">while</span> generating package metadata.</span></span><br><span class="line"><span class="params">╰─&gt; See above <span class="keyword">for</span> output.</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">note: This is an issue with the package mentioned above, not pip.</span></span><br><span class="line"><span class="params">hint: See above <span class="keyword">for</span> details.</span></span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/openatx/weditor</span></span><br><span class="line">pip3 install -e weditor</span><br></pre></td></tr></table></figure>

<h1 id="小米手机Uiautomator启动失败问题-uiautomator2-GatewayError报错"><a href="#小米手机Uiautomator启动失败问题-uiautomator2-GatewayError报错" class="headerlink" title="小米手机Uiautomator启动失败问题 uiautomator2.GatewayError报错"></a>小米手机Uiautomator启动失败问题 uiautomator2.GatewayError报错</h1><p>先看报错:</p>
<p><code>WinError adb shell am instrument -w -r -e debug false -e class com.github.uiautomator.stub.Stub com.github.uiautomator.test/android.support.test.runner.AndroidJUnitRunner] uiautomator2.GatewayError</code><br>打开 <a target="_blank" rel="noopener" href="https://github.com/openatx/uiautomator2/wiki/Common-issues">Common issues · openatx/uiautomator2 Wiki · GitHub</a></p>
<p>是说 app-uiautomator.apk or app-uiautomator-test.apk not installed. 但是实际用</p>
<p><code>python -m uiautomator2 init</code><br>是没有任何报错的，而且可以看到上面的两个app安装成功的信息，所以问题点不在uiautomator app安装失败。</p>
<p>解决方案：</p>
<p>打开小米手机的设置—开启开发者选项—开启USB调试—开启USB安装—开启USB调试（安全设置）—-开启通过USB验证应用（默认开启）—-开启无线显示认证（可选择），关键选项，必须不要启用MIUI优化，操作完上述设置，然后再执行 python -m uiautomator2 init （不会报错），就可以执行相关脚本了。</p>
<h1 id="uiautomator2-使用Python测试-Android应用"><a href="#uiautomator2-使用Python测试-Android应用" class="headerlink" title="uiautomator2 使用Python测试 Android应用"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fnng/p/8486863.html">uiautomator2 使用Python测试 Android应用</a></h1><p>GitHub地址：<a target="_blank" rel="noopener" href="https://github.com/openatx/uiautomator2">https://github.com/openatx/uiautomator2</a></p>
<p>###介绍</p>
<p>uiautomator2 是一个可以使用Python对Android设备进行UI自动化的库。其底层基于Google uiautomator，Google提供的uiautomator库可以获取屏幕上任意一个APP的任意一个控件属性，并对其进行任意操作，但有两个缺点：</p>
<p>1、测试脚本只能使用Java语言。</p>
<p>2、测试脚本必须每次被上传到设备上运行。 我们希望测试能够用一个更脚本化的语言，例如Python编写，同时可以每次所见即所得地修改测试、运行测试。</p>
<p>###安装</p>
<p>安装uiautomator2</p>
<pre><code>pip install --pre uiautomator2

pip install pillow
</code></pre>
<p>###初始化</p>
<p>部署相关的守护进程。</p>
<p>电脑连接上一个手机或多个手机, 确保adb已经添加到环境变量中，执行下面的命令会自动安装本库所需要的设备端程序：uiautomator-server 、atx-agent、openstf/minicap、openstf/minitouch</p>
<pre><code>python -m uiautomator2 init
</code></pre>
<p>安装完成，设备上会多一个uiautomator的应用。</p>
<p>配置手机设备参数：</p>
<p>有两种方法，一种是通过WIFI，另一种是通过USB数据线将手机链接电脑。</p>
<p>WiFi连接更方便一点，需要保持PC和手机使用的一个WIFI，查看手机连接WIFI的IP地址。</p>
<p><img src="https://images2018.cnblogs.com/blog/311516/201803/311516-20180301092953310-1075957612.png"></p>
<p>###测试</p>
<p>编写以下脚本进行验证：</p>
<pre><code>import uiautomator2 as u2

d = u2.connect(&#39;192.168.31.234&#39;)
print(d.info)
</code></pre>
<p>运行结果：</p>
<p>###定位元素：</p>
<p>我们可以借助Android SDK自的uiautomatorviewer查看元素，这就要求手机必须以USB的方式连接PC，我前面使用的是WIFI连接进行连接的。所以，openatx提供了另外一个工具weditor 来解决这个问题。</p>
<p>GitHub地址：<a target="_blank" rel="noopener" href="https://github.com/openatx/weditor">https://github.com/openatx/weditor</a></p>
<p>1、安装：</p>
<pre><code>pip install --pre --upgrade weditor
</code></pre>
<p>2、使用：</p>
<pre><code>python3 -m weditor
</code></pre>
<p>默认会通过浏览器打开页面：<a target="_blank" rel="noopener" href="http://atx.open.netease.com/">http://atx.open.netease.com/</a></p>
<p><img src="https://images2018.cnblogs.com/blog/311516/201803/311516-20180301093125715-1619631377.png"></p>
<p>在页面左上角选择Android，输入设备IP（192.168.31.234），点击Connect按钮。</p>
<p>当我们操作完手机后，可以点击“Reload”按钮进行刷新，从而保持与设备上的界面保持同步。weditor 还可以帮我们生成代码。总之，你研究一下就会用了。</p>
<p>###编写测试脚本</p>
<p>这里针对魅族社区App进行测试。</p>
<pre><code>import uiautomator2 as u2
from time import sleep

d = u2.connect(&#39;192.168.31.234&#39;)

# 启动App
d.app_start(&quot;com.meizu.mzbbs&quot;)

# 搜索
d(resourceId=&quot;com.meizu.mzbbs:id/j0&quot;).click()

# 输入关键字
d(resourceId=&quot;com.meizu.mzbbs:id/p9&quot;).set_text(&quot;flyme&quot;)

# 搜索按钮
d(resourceId=&quot;com.meizu.mzbbs:id/tp&quot;).click()

sleep(2)

# 停止app
d.app_stop(&quot;com.meizu.mzbbs&quot;) 
</code></pre>
<p>app_start()和app_stop()用于启动和停止应用。</p>
<p>常用的定位方式：</p>
<ul>
<li>ResourceId定位：<br>  d(resourceId=”com.meizu.mzbbs:id/tp”).click()</li>
<li>Text定位：<br>  d(text=”精选”).click()</li>
<li>Description定位：<br>  d(description=”..”).click()</li>
<li>ClassName定位：<br>  d(className=”android.widget.TextView”).click()</li>
</ul>
<p><strong>小结</strong>：其实关注该项目已经好几个月了，目前该项目已经趋于稳定，整个测试环境的搭建过程也要比Appium简单得多。</p>
<h1 id="requests库中使用response-json-报错：json-decoder-JSONDecodeError-Expecting-value"><a href="#requests库中使用response-json-报错：json-decoder-JSONDecodeError-Expecting-value" class="headerlink" title="requests库中使用response.json()报错：json.decoder.JSONDecodeError: Expecting value"></a>requests库中使用response.json()报错：json.decoder.JSONDecodeError: Expecting value</h1><p>本文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/Gabriel_wei/article/details/125843426">https://blog.csdn.net/Gabriel_wei/article/details/125843426</a></p>
<p> 报错</p>
<p><img src="https://img-blog.csdnimg.cn/5015daebd7d242448cf67ce5a320a52c.png"></p>
<p>原因</p>
<p>请求得到的数据，不是标准的json格式数据，不能采用<code>response.json()</code>函数解析，采用<code>response.text</code>查看一下数据格式，发现多了jQueryxxxxxxxxx<br><img src="https://img-blog.csdnimg.cn/cd4f4ed238364438bbe9f4d8f90a3153.png"></p>
<p>解决</p>
<p>数据请求的地址为</p>
<pre><code>url = &#39;https://liveapi.huya.com/moment/getMomentContent?callback=jQuery1124023700002544508125_1658109026112&amp;videoId=699727183&amp;uid=&amp;_=1658109026118&#39;
</code></pre>
<p>将地址里面的callback删除，变为</p>
<pre><code>url = &#39;https://liveapi.huya.com/moment/getMomentContent?videoId=699727183&amp;uid=&amp;_=1658109026118&#39;
</code></pre>
<p>改变url请求地址以后，再次使用<code>response.json()</code>就可以了</p>
<h1 id="python中一次替换字符串中的多个字符-通俗易懂"><a href="#python中一次替换字符串中的多个字符-通俗易懂" class="headerlink" title="python中一次替换字符串中的多个字符[通俗易懂]"></a>python中一次替换字符串中的多个字符[通俗易懂]</h1><p><a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-reg-expressions.html">https://www.runoob.com/python/python-reg-expressions.html</a></p>
<p>先直接上解决方案：</p>
<p>比如下面给出的字符串a，有字母、’（单引号）、\n（换行符）、数字、：（冒号）、，（逗号），目标是只保留字符串中的数字和字母，且看我如何操作。</p>
<pre><code>import re
a=&#39;eew \&#39; eawr,2 fd\n sa:21&#39;

b=re.sub(r&#39;[\&#39;:\s ,]*&#39;, &#39;&#39;, a) # 前面是正则表达式，匹配多种字符（串）
print(b)
</code></pre>
<p>复制</p>
<p>具体运行展示一下：</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-8223537/f923a908cfb9c07d8f96becaccfdbc87.png?imageView2/2/w/1620"></p>
<p>解释一下这个正则表达式的意思：r’[\’:\s ,]*’</p>
<p>1：添加r，说明该字符串中全为普通字符（可参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangxinrun/article/details/8124333">以r或u开头的字符串</a>，按评论里<a target="_blank" rel="noopener" href="https://me.csdn.net/IwillbecomeAIgod">IwillbecomeAIgod</a>同学的说法是用于防转义），常用于正则表达式</p>
<p>2：[]内是一个字符集，字符集内的字符任何一个被匹配，都算匹配成功，比如r’a[bcd]e’，可以匹配到’abe’、’ace’、’ade’。</p>
<p>3：*代表匹配前一个字符0次或无限次。</p>
<p>4：\s代表的是空白字符，比如空格、换行符、制表符等等。</p>
<p>于是r’[\’:\s ,]*’组合起来就是匹配字符串中所有的的‘（单引号）、\n（换行符）、：（冒号）、，（逗号）</p>
<p>最后re.sub(a, b, string)表示将string中a所匹配到的所有字符通通替换成b，我们这个例子就是将匹配到的’（单引号）、\n（换行符）、：（冒号）、，（逗号）通通替换成”（nothing）。</p>
<p>关于<a target="_blank" rel="noopener" href="https://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html">正则表达式</a>，另外我是受了<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4c076da1b7f7">这篇文章</a>的启发（在此感谢）：启发就是re.sub可以传给他正则表达式。</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-8223537/3c84fc7008f2cf8f43c7fe78c21a43cb.png?imageView2/2/w/1620"></p>
<p>在此之前，先试了一下用正则表达式来匹配多个字符串，然后用<a target="_blank" rel="noopener" href="http://www.runoob.com/python/att-string-replace.html">replace</a>方法行不通，但这个思路也是很正确的，最终还是帮我解决了问题。先看replace：</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-8223537/638de9483aeab44a398e8e9d67d19b0d.png?imageView2/2/w/1620"></p>
<p>看看在replace中用上面提到的思路是什么结果：</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-8223537/399360a3793f6aca890fbb1835721664.png?imageView2/2/w/1620"></p>
<p>看到了吗，我的正则表达式可没写错，是replace不行，就是说replace不接受我的正则表达式。</p>
<h1 id="超强反爬虫方案！Requests-什么的通通爬不了"><a href="#超强反爬虫方案！Requests-什么的通通爬不了" class="headerlink" title="超强反爬虫方案！Requests 什么的通通爬不了"></a>超强反爬虫方案！Requests 什么的通通爬不了</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/372825949">https://zhuanlan.zhihu.com/p/372825949</a></p>
<p>上一篇文章介绍了如何升级网站到 HTTP/2.0，但是实际上并没有显式地声明禁用 HTTP 1.x 的请求。</p>
<p>想到这里，你可能就想到了一个非常强的反爬虫方案 —— 禁用所有 HTTP 1.x 的请求！</p>
<p>现在很多爬虫库其实对 HTTP/2.0 支持得不好，比如大名鼎鼎的 Python 库 —— requests，到现在为止还只支持 HTTP/1.1，啥时候支持 HTTP/2.0 还不知道。</p>
<p>Scrapy 框架最新版本 2.5.0（2021.04.06 发布）加入了对 HTTP/2.0 的支持，但是官网明确提示，现在是实验性的功能，不推荐用到生产环境，原文如下：</p>
<blockquote>
<p>HTTP/2 support in Scrapy is experimental, and not yet recommended for production environments. Future Scrapy versions may introduce related changes without a deprecation period or warning.  </p>
</blockquote>
<p>插一句，Scrapy 中怎么支持 HTTP/2.0 呢？在 settings.py 里面换一下 Download Handlers 即可：</p>
<pre><code>DOWNLOAD_HANDLERS = &#123;
    &#39;https&#39;: &#39;scrapy.core.downloader.handlers.http2.H2DownloadHandler&#39;,
&#125;
</code></pre>
<p>当前 Scrapy 的 HTTP/2.0 实现的已知限制包括：</p>
<ul>
<li>  不支持 HTTP/2.0 明文（h2c），因为没有主流浏览器支持未加密的 HTTP/2.0。</li>
<li>  没有用于指定最大[帧大小](<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7540">https://tools.ietf.org/html/rfc7540</a> class=)大于默认值 16384 的设置，发送更大帧的服务器的连接将失败。</li>
<li>  不支持[服务器推送](<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7540">https://tools.ietf.org/html/rfc7540</a> class=)。</li>
<li>  不支持<code>[bytes_received](https://docs.scrapy.org/en/latest/topics/signals.html class=)</code>和 <code>[headers_received](https://docs.scrapy.org/en/latest/topics/signals.html class=)</code>信号。</li>
</ul>
<p>关于其他的一些库，也不必多说了，对 HTTP/2.0 的支持也不好，目前对 HTTP/2.0 支持得还可以的有 hyper 和 httpx，后者更加简单易用一些。</p>
<h2 id="反爬虫"><a href="#反爬虫" class="headerlink" title="反爬虫"></a>反爬虫</h2><p>所以，你想到反爬虫方案了吗？</p>
<p>如果我们禁用所有的 HTTP/1.x 的请求，是不是能通杀掉一大半爬虫？requests 没法用了，Scrapy 除非升级到最新版本才能勉强用个实验性版本，其他的语言也不用多说，也会杀一大部分。</p>
<p>而浏览器对 HTTP/2.0 的支持现在已经很好了，所以不会影响用户浏览网页的体验。</p>
<h2 id="措施"><a href="#措施" class="headerlink" title="措施"></a>措施</h2><p>那就让我们来吧！</p>
<p>这个怎么做呢？其实很简单，在 Nginx 里面配置一下就好了，主要就是加这么个判断就行了：</p>
<pre><code>if ($server_protocol !~* &quot;HTTP/2.0&quot;) &#123;
  return 444;
&#125;
</code></pre>
<p>就是这么简单，这里 <code>$server_protocol</code> 就是传输协议，其结果目前有三个：<code>HTTP/1.0</code>、<code>HTTP/1.1</code> 和 <code>HTTP/2.0</code>，另外判断条件我们使用了 <code>!~*</code> ，意思就是不等于，这里的判断条件就是，如果不是 <code>HTTP/2.0</code>，那就直接返回 444 状态码，444 一般代表 CONNECTION CLOSED WITHOUT RESPONSE，就是不返回任何结果关闭连接。</p>
<p>我的服务是在 Kubernetes 里面运行的，所以要加这个配置还得改下 Nginx Ingress 的配置，不过还好 <a target="_blank" rel="noopener" href="https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/">https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/</a> 预留了一个配置叫做 <code>nginx.ingress.kubernetes.io/server-snippet</code>，利用它我们可以自定义 Nginx 的判定逻辑。</p>
<p>官方用法如下：</p>
<pre><code>apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/server-snippet: |
        set $agentflag 0;
        if ($http_user_agent ~* &quot;(Mobile)&quot; )&#123;
          set $agentflag 1;
        &#125;
        if ( $agentflag = 1 ) &#123;
          return 301 https://m.example.com;
        &#125;
</code></pre>
<p>所以这里，我们只需要改成刚才的配置就好了：</p>
<pre><code>apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  annotations:
    nginx.ingress.kubernetes.io/server-snippet: |
      if ($server_protocol !~* &quot;HTTP/2.0&quot;) &#123;
        return 444;
      &#125;
</code></pre>
<p>大功告成！</p>
<p>配置完成了，示例网站是：<a target="_blank" rel="noopener" href="https://spa16.scrape.center/">https://spa16.scrape.center/</a></p>
<p>我们在浏览器中看下效果：</p>
<p><img src="https://pic3.zhimg.com/v2-efd1b807fe1437821873f03001cd8926_r.jpg"></p>
<p>可以看到所有请求都是走的 HTTP 2.0，页面完全正常加载。</p>
<p>然而，我们使用 requests 来请求一下：</p>
<pre><code>import requests
response = requests.get(&#39;https://spa16.scrape.center/&#39;)
print(response.text)
</code></pre>
<p>非常欢乐的报错：</p>
<pre><code>Traceback (most recent call last):
  ...
    raise RemoteDisconnected(&quot;Remote end closed connection without&quot;
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  ...
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
requests.packages.urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host=&#39;spa16.scrape.center&#39;, port=443): Max retries exceeded with url: / (Caused by ProxyError(&#39;Cannot connect to proxy.&#39;, RemoteDisconnected(&#39;Remote end closed connection without response&#39;)))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
    ...
requests.exceptions.ProxyError: HTTPSConnectionPool(host=&#39;spa16.scrape.center&#39;, port=443): Max retries exceeded with url: / (Caused by ProxyError(&#39;Cannot connect to proxy.&#39;, RemoteDisconnected(&#39;Remote end closed connection without response&#39;)))
</code></pre>
<p>如果你用 requests，无论如何都不行的，因为它就不支持 HTTP 2.0。</p>
<p>那我们换一个支持 HTTP 2.0 的库呢？比如 httpx，安装方法如下：</p>
<pre><code>pip3 install &#39;httpx[http2]&#39;
</code></pre>
<p>主意，Python 版本需要在 3.6 及以上才能用 httpx。</p>
<p>安装好了之后测试下：</p>
<pre><code>import httpx
client = httpx.Client(http2=True)

response = client.get(&#39;https://spa16.scrape.center/&#39;)
print(response.text)
</code></pre>
<p>结果如下：</p>
<pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=en&gt;&lt;head&gt;&lt;meta charset=utf-8&gt;&lt;meta http-equiv=X-UA-Compatible content=&quot;IE=edge&quot;&gt;&lt;meta name=viewport content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;meta name=referrer content=no-referrer&gt;&lt;link rel=icon href=/favicon.ico&gt;&lt;title&gt;Scrape | Book&lt;/title&gt;&lt;link href=/css/chunk-50522e84.e4e1dae6.css rel=prefetch&gt;&lt;link href=/css/chunk-f52d396c.4f574d24.css rel=prefetch&gt;&lt;link href=/js/chunk-50522e84.6b3e24aa.js rel=prefetch&gt;&lt;link href=/js/chunk-f52d396c.f8f41620.js rel=prefetch&gt;&lt;link href=/css/app.ea9d802a.css rel=preload as=style&gt;&lt;link href=/js/app.b93891e2.js rel=preload as=script&gt;&lt;link href=/js/chunk-vendors.a02ff921.js rel=preload as=script&gt;&lt;link href=/css/app.ea9d802a.css rel=stylesheet&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We&#39;re sorry but portal doesn&#39;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=app&gt;&lt;/div&gt;&lt;script src=/js/chunk-vendors.a02ff921.js&gt;&lt;/script&gt;&lt;script src=/js/app.b93891e2.js&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;
</code></pre>
<p>可以看到，HTML 就成功被我们获取到了！这就是 HTTP/2.0 的魔法！</p>
<p>我们如果把 <code>http2</code> 参数设置为 False 呢？</p>
<pre><code>import httpx
client = httpx.Client(http2=False)

response = client.get(&#39;https://spa16.scrape.center/&#39;)
print(response.text)
</code></pre>
<p>一样很不幸：</p>
<pre><code>Traceback (most recent call last):
    ...
    raise RemoteProtocolError(msg)
httpcore.RemoteProtocolError: Server disconnected without sending a response.

The above exception was the direct cause of the following exception:
  ...
    raise mapped_exc(message) from exc
httpx.RemoteProtocolError: Server disconnected without sending a response.
</code></pre>
<h3 id="反反爬之-封禁ip"><a href="#反反爬之-封禁ip" class="headerlink" title="反反爬之 封禁ip"></a>反反爬之 封禁ip</h3><p>可以使用代理IP进行网站数据的爬取</p>
<p>在reqest.get中添加参数proxies=</p>
<p><code>response = requests.get(url=url, headers=headers,proxies=&#123;&#39;http&#39;:&#39;http://121.232.148.26:9000&#39;&#125;)</code></p>
<h3 id="反反爬之-账号限制"><a href="#反反爬之-账号限制" class="headerlink" title="反反爬之 账号限制"></a>反反爬之 账号限制</h3><ul>
<li>  通过post请求携带参数 使用session登录</li>
</ul>
<p>http/https协议特性：无状态</p>
<p>没有请求到对应数据的原因：</p>
<p> 发起的第二次基于个人主页请求时，服务器并不知道该次请求时基于登录状态下的请求</p>
<p>cookie：让服务器保留客户端的相关状态</p>
<ul>
<li><p>  通过抓包工具手动处理cookie封装到headers中</p>
</li>
<li><p>cookie时模拟登陆psot后，由服务器端创建</p>
<ul>
<li>session会话对象<ul>
<li>  进行请求发送</li>
<li>  如果请求过程中产生了cookie，则cookie会被自动存储/携带到session对象中</li>
</ul>
</li>
</ul>
</li>
<li><p>  创建session对象：request.Session()</p>
</li>
<li><p>  使用session对象进行模拟登陆post请求发送</p>
</li>
<li><p>session进行get请求发送（携带cookie）</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># -*-coding:utf-8-*-</span></span><br><span class="line">    <span class="keyword">import</span> requests</span><br><span class="line">    <span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">    <span class="keyword">from</span> chaojiying <span class="keyword">import</span> Chaojiying_Client</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">        <span class="comment"># 创建一个session对象</span></span><br><span class="line">        session = requests.Session()</span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        url = <span class="string">&#x27;https://so.gushiwen.cn/user/login.aspx?from=http://so.gushiwen.cn/user/collect.aspx&#x27;</span></span><br><span class="line">        page_txt = session.get(url=url,headers=headers).text</span><br><span class="line">        <span class="comment"># 解析img的src的zhi</span></span><br><span class="line">        tree = etree.HTML(page_txt)</span><br><span class="line">        src = <span class="string">&#x27;https://so.gushiwen.cn&#x27;</span> + tree.xpath(<span class="string">&#x27;//*[@id=&quot;imgCode&quot;]/@src&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        img_data = session.get(url = src,headers=headers).content</span><br><span class="line">        chaojiying = Chaojiying_Client(<span class="string">&#x27;超级鹰账号&#x27;</span>, <span class="string">&#x27;超级鹰密码&#x27;</span>, <span class="string">&#x27;软件ID&#x27;</span>)</span><br><span class="line">        dic = chaojiying.PostPic(img_data, <span class="number">1902</span>)</span><br><span class="line">        code = dic[<span class="string">&quot;pic_str&quot;</span>]</span><br><span class="line">        login_url = <span class="string">&#x27;https://so.gushiwen.cn/user/login.aspx?from=http%3a%2f%2fso.gushiwen.cn%2fuser%2fcollect.aspx&#x27;</span></span><br><span class="line">        data=&#123;</span><br><span class="line">        <span class="string">&#x27;__VIEWSTATE&#x27;</span>: <span class="string">&#x27;gBVayz6 / Fp6Yz2JMFpdRAYclMzJDgyBrLu8SbsEttWCMF9wc8vxeoB6ZWl7gUyyc9zRqeCRNQNn44WGoqL5yrKi85ff84dAiva + yPVTdl7mplq6s7qaOffXZd / 0 =&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;__VIEWSTATEGENERATOR&#x27;</span> : <span class="string">&#x27;C93BE1AE&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;http: // so.gushiwen.cn / user / collect.aspx&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;古诗文网账号&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&#x27;古诗文密码&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;code&#x27;</span>: code,</span><br><span class="line">        <span class="string">&#x27;denglu&#x27;</span>: <span class="string">&#x27;登录&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">#使用session进行post请求的发送</span></span><br><span class="line">        login_txt = session.post(url=login_url,headers=headers,data=data)</span><br><span class="line">        <span class="built_in">print</span>(login_txt.status_code)</span><br><span class="line">    </span><br><span class="line">        user_url = <span class="string">&#x27;https://so.gushiwen.cn/user/collect.aspx&#x27;</span></span><br><span class="line">        <span class="comment">#使用携带cookie的session进行请求</span></span><br><span class="line">        user_txt = session.get(url=user_url,headers=headers).text</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;user.html&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(user_txt)</span><br><span class="line"></span><br><span class="line">requests操作cookie出现相同字段名丢失的问题（python）</span><br><span class="line">====================================</span><br><span class="line"></span><br><span class="line">* * *</span><br><span class="line"></span><br><span class="line"><span class="number">2023</span>年01月<span class="number">14</span>日 <span class="number">11</span>:05 阅读 <span class="number">219</span></span><br><span class="line"></span><br><span class="line">背景：</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">接口访问后返回的cookies，需要保存在文本中，然后其他接口请求时直接去读取文本中的内容。问题在于转储cookies时出现同一字段内容丢失的情况；</span><br><span class="line"></span><br><span class="line">cookies内容查看（CSDN为例）：</span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">**Request Cookies:**</span><br><span class="line"></span><br><span class="line">![](http://cdn.h3blog.com/<span class="number">20230114111214</span>)</span><br><span class="line"></span><br><span class="line">**Response Cookies**</span><br><span class="line"></span><br><span class="line">![](https://img-blog.csdnimg.cn/<span class="number">20181229143728260.</span>png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM5NDg4NTg=,size_16,color_FFFFFF,t_70)</span><br><span class="line"></span><br><span class="line">同上两套图可以看出：Cookie的内容很丰富，有很多属性，有name、value、domain、path等特征。不同的域不同的路径下可以存在同样名字的cookie。也就是说同一个请求或返回不会存在所有字段都一样的内容的cookie。当让我们一般的请求里，只会设置cookie的name和value，所以在这种意识下处理cookie会导致一些数据丢失。</span><br><span class="line"></span><br><span class="line">cookies的字段说明：</span><br><span class="line">-------------</span><br><span class="line"></span><br><span class="line">**属性**</span><br><span class="line"></span><br><span class="line">**描述**</span><br><span class="line"></span><br><span class="line">name</span><br><span class="line"></span><br><span class="line">Cookie的名称，Cookie一旦创建，名称便不可更改</span><br><span class="line"></span><br><span class="line">value</span><br><span class="line"></span><br><span class="line">Cookie的值。如果值为Unicode字符，需要为字符编码。如果值为二进制数据，则需要使用BASE64编码</span><br><span class="line"></span><br><span class="line">expires/maxAge</span><br><span class="line"></span><br><span class="line">Cookie失效的时间，单位秒。如果为正数，则该Cookie在maxAge秒之后失效。如果为负数，该Cookie为临时Cookie，关闭浏览器即失效，浏览器也不会以任何形式保存该Cookie。如果为<span class="number">0</span>，表示删除该Cookie。默认为-<span class="number">1</span>。</span><br><span class="line"></span><br><span class="line">secure</span><br><span class="line"></span><br><span class="line">该Cookie是否仅被使用安全协议传输。安全协议。安全协议有HTTPS，SSL等，在网络上传输数据之前先将数据加密。默认为false。</span><br><span class="line"></span><br><span class="line">path</span><br><span class="line"></span><br><span class="line">Cookie的使用路径。如果设置为“/sessionWeb/”，则只有contextPath为“/sessionWeb”的程序可以访问该Cookie。如果设置为“/”，则本域名下contextPath都可以访问该Cookie。注意最后一个字符必须为“/”。</span><br><span class="line"></span><br><span class="line">domain</span><br><span class="line"></span><br><span class="line">可以访问该Cookie的域名。如果设置为“.google.com”，则所有以“google.com”结尾的域名都可以访问该Cookie。注意第一个字符必须为“.”。</span><br><span class="line"></span><br><span class="line">comment</span><br><span class="line"></span><br><span class="line">该Cookie的用处说明，浏览器显示Cookie信息的时候显示该说明。</span><br><span class="line"></span><br><span class="line">version</span><br><span class="line"></span><br><span class="line">Cookie使用的版本号。<span class="number">0</span>表示遵循Netscape的Cookie规范，<span class="number">1</span>表示遵循W3C的RFC <span class="number">2109</span>规范</span><br><span class="line"></span><br><span class="line">由上面的表我们大致的了解下字段的含义啊，可能一些字段没有点出来，但是够用了，上图中有http，应该是http-only。用不上也就暂时不管了。</span><br><span class="line"></span><br><span class="line">应用：python+requests去处理接口--cookies(防止丢失)</span><br><span class="line">--------------------------------------</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*-coding:utf-8-*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">renren_login</span>():</span><br><span class="line">    url=<span class="string">&#x27;http://&#x27;</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    headers = &#123;&#125;</span><br><span class="line">    r = requests.post(url=url, headers=headers, data=data)</span><br><span class="line">    cookies_file=requests.utils.dict_from_cookiejar(r.cookies)    <span class="comment"># 将cookiejar转化为字典</span></span><br><span class="line">    json.dump(cookies_file,<span class="built_in">open</span>(<span class="string">&#x27;renren_cookies&#x27;</span>,<span class="string">&#x27;w&#x27;</span>))            <span class="comment">#  用json.dump写到文件中</span></span><br><span class="line">    <span class="keyword">return</span> r.cookies</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">up_files</span>():</span><br><span class="line">    url=<span class="string">&#x27;&#x27;</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    headers = &#123;&#125;</span><br><span class="line">    files=&#123;<span class="string">&#x27;file&#x27;</span>:(<span class="string">&#x27;1.jpg&#x27;</span>,<span class="built_in">open</span>(<span class="string">&#x27;C:\\1.jpg&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>),<span class="string">&#x27;image/jpeg&#x27;</span>)&#125;</span><br><span class="line">    cookies=json.load(<span class="built_in">open</span>(<span class="string">&#x27;renren_cookies&#x27;</span>,<span class="string">&#x27;r&#x27;</span>))    <span class="comment"># 读取文件中的cookies</span></span><br><span class="line">    <span class="comment"># 此处有个问题:&quot;dict转为cookiesjar时候,cookie中有个字段是重复的,因此字典中就少了一个key值&quot;</span></span><br><span class="line">  dict_cookiesjar=requests.utils.cookiejar_from_dict(cookies,cookiejar=<span class="literal">None</span>,overwrite=<span class="literal">True</span>)</span><br><span class="line">    r = requests.post(url=url,headers=headers,data=data,cookies=cookies,files=files)</span><br><span class="line">    <span class="built_in">print</span>(r.text)</span><br><span class="line"></span><br><span class="line">up_files()</span><br></pre></td></tr></table></figure></li>
</ul>
<p>分析一下：dict_from_cookiejar方法去转存cookie的时候，他只保留了name和value，其他的字段没有考虑在内，所以原来同名的cookie会被去重，那么我们想要保存cookie到文件里怎么办？那么就重新设计一种方式去存，因为我们现在知道cookie都有哪些字段了，我们需要什么，我们就存什么，上示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*-coding:utf-8-*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line"><span class="keyword">from</span> requests.cookies <span class="keyword">import</span> RequestsCookieJar,create_cookie</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法有很多，可以选择把requests.utils.dict_from_cookiejar方法重写一下 改成list，</span></span><br><span class="line"><span class="comment"># 要点是要保证数据的唯一性，list可重复，还有就是每一位都是一个tuple，</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">list_from_cookiejar</span>(<span class="params">cj</span>):</span><br><span class="line">    cookie_list = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> cookie <span class="keyword">in</span> cj:</span><br><span class="line">        <span class="comment"># 可以根据需求去保存cookie的特征值</span></span><br><span class="line">        cookie_list.append((cookie.name, cookie.value, cookie.path))   </span><br><span class="line">    <span class="keyword">return</span> cookie_list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去加载文件中list，核心代码是create_cookie:回给人多cookie对象的参数去实例化</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reload_cookie_from_file</span>(<span class="params">cookiejar=<span class="literal">None</span>, overwrite=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="keyword">if</span> cookiejar <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        cookiejar = RequestsCookieJar()</span><br><span class="line">    names_from_jar = [cookie.name <span class="keyword">for</span> cookie <span class="keyword">in</span> cookiejar]</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;cookie_file&quot;</span>, <span class="string">&quot;r+&quot;</span>) <span class="keyword">as</span> cf:</span><br><span class="line">        <span class="keyword">for</span> c_ <span class="keyword">in</span> cf:</span><br><span class="line">            c_ = <span class="built_in">str</span>(c_).strip().split(<span class="string">&quot;=&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> overwrite <span class="keyword">or</span> (c_[<span class="number">0</span>] <span class="keyword">not</span> <span class="keyword">in</span> names_from_jar):</span><br><span class="line">                <span class="comment"># 根据保存的重新读取 并实例化为cookie</span></span><br><span class="line">                cookiejar.set_cookie(create_cookie(c_[<span class="number">0</span>], c_[<span class="number">1</span>], path=c_[<span class="number">2</span>]))   </span><br><span class="line">    <span class="keyword">return</span> cookiejar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把接口获取的cookies转化为list，保存到文件中</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">renren_login_for_dump</span>():</span><br><span class="line">    url=<span class="string">&#x27;&#x27;</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    headers = &#123;&#125;</span><br><span class="line">    r = requests.post(url=url, headers=headers, data=data)</span><br><span class="line">    cookies_file=list_from_cookiejar(r.cookies)  <span class="comment">#将cookiejar转化为二位数组</span></span><br><span class="line">    <span class="built_in">print</span> cookies_file</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;cookie_file&quot;</span>, <span class="string">&quot;w+&quot;</span>) <span class="keyword">as</span> cf:</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> cookies_file:</span><br><span class="line">            cf.write(<span class="built_in">str</span>(c[<span class="number">0</span>]+<span class="string">&quot;=&quot;</span>+c[<span class="number">1</span>]+<span class="string">&quot;=&quot;</span>+ c[<span class="number">2</span>]) + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">        cf.flush()</span><br><span class="line">    <span class="comment"># return r.cookies</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接调用方法就可以使用了，没必要使用json去dump和reload</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">up_files_with_cookie</span>():</span><br><span class="line">    url=<span class="string">&#x27;&#x27;</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    headers = &#123;&#125;</span><br><span class="line">    files=&#123;<span class="string">&#x27;file&#x27;</span>:(<span class="string">&#x27;1.jpg&#x27;</span>,<span class="built_in">open</span>(<span class="string">&#x27;C:\\1.jpg&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>),<span class="string">&#x27;image/jpeg&#x27;</span>)&#125;</span><br><span class="line">    cookies=reload_cookie_from_file()</span><br><span class="line">    r = requests.post(url=url,headers=headers,data=data,cookies=cookies,files=files)</span><br><span class="line">    <span class="built_in">print</span>(r.text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># print reload_cookie_from_file()</span></span><br><span class="line">up_files_with_cookie()</span><br></pre></td></tr></table></figure>

<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>1.对操作的对象要有特征上的认识；</p>
<p>2.一些问题一般都在官方文档和源码里给出了，需要去探索和发现；</p>
<blockquote>
<p><strong>版权声明：</strong>如无特殊说明，文章均为<a target="_blank" rel="noopener" href="https://www.h3blog.com/">何三笔记</a>原创，转载请注明出处</p>
<p><strong>本文链接：</strong><a target="_blank" rel="noopener" href="https://www.h3blog.com/article/392/">https://www.h3blog.com/article/392/</a></p>
</blockquote>
<h1 id="python爬虫（3）——cookie与requests库"><a href="#python爬虫（3）——cookie与requests库" class="headerlink" title="python爬虫（3）——cookie与requests库"></a>python爬虫（3）——cookie与requests库</h1><h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a><a href="#" title="cookie"></a>cookie</h2><p>在网站中，http请求是无状态的。也就是说即使第一次和服务器连接后并且登录成功后，第二次请求服务器依然不能知道当前请求是哪个用户。cookie 的出现就是为了解决这个问题，第一次登录后服务器返回一些数据（cookie）给浏览器，然后浏览器保存在本地，当该用户发送第二次请求的时候，就会自动的把上次请求存储的 cookie 数据自动的携带给服务器，服务器通过浏览器携带的数据就能判断当前用户是哪个了。cookie 存储的数据量有限，不同的浏览器有不同的存储大小，但一般不超过 4KB。因此使用 cookie 只能存储一些小量的数据。<br>cookie的一般格式如下：<br><code>Set-Cookie: NAME=VALUE；Expires/Max-age=DATE；Path=PATH；Domain=DOMAIN_NAME；SECURE</code><br>参数的描述如下表：</p>
<p>参数名</p>
<p>参数描述</p>
<p>NAME</p>
<p>cookie的名字</p>
<p>VALUE</p>
<p>cookie的值</p>
<p>Expires</p>
<p>cookie的过期时间</p>
<p>Path</p>
<p>cookie作用的路径</p>
<p>Domain</p>
<p>cookie作用的域名</p>
<p>SECURE</p>
<p>是否只在https协议下起作用</p>
<p>浏览器保存了cookie，后面每次访问时就方便，如果要用代码来向那些需要登录才能访问的（进行更多操作）网站，就需要把cookie信息传给目标服务器，登录说白了也就是要有cookie信息。要获取cookie信息，首先第一想法就是直接去网站上登录，然后按F12，就能找到cookie信息，以人人网（访问演员大鹏主页，需要登录才能访问）为例子：</p>
<p>python</p>
<pre><code>from urllib import request,parse
#先注释掉cookie
headers=&#123;&#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64)\
         AppleWebKit/537.36 (KHTML, like Gecko) \
         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58&#39;,
         # &#39;Cookie&#39;: &#39;ick_login=0ddad9f3-7fa0-4787-b916-5248ea8bb154; anonymid=kca04u42-rmbvi0; depovince=GW; _r01_=1; JSESSIONID=abchsJm52fkNjfdE5xImx; taihe_bi_sdk_uid=15a8a286885699bb6771e6212cc23aa5; taihe_bi_sdk_session=d83833b4a0fb72a6a466205c9329e993; ick=07bea91b-c6d1-4955-ad33-0980db50a672; t=c2a3a8d10309229b0555eb589c8482575; societyguester=c2a3a8d10309229b0555eb589c8482575; id=974715915; xnsid=dd9ddee7; XNESSESSIONID=6c76a75ff812; WebOnLineNotice_974715915=1; ver=7.0; loginfrom=null; jebe_key=060c174f-c2df-4669-9a2c-584b47a0e4a8%7C032338e00e79b21248aaa07a19d3e44d%7C1594009812653%7C1%7C1594009810029; jebe_key=060c174f-c2df-4669-9a2c-584b47a0e4a8%7C032338e00e79b21248aaa07a19d3e44d%7C1594009812653%7C1%7C1594009810031; wp_fold=0; jebecookies=ba0612a2-0ce7-4a4d-95d1-1f71f38ee8ce|||||&#39;
    &#125;
url=&quot;http://www.renren.com/880151247/profile&quot;
req = request.Request(url ,headers=headers)
resp = request.urlopen(req)
with open(&#39;result.html&#39;,&#39;w&#39;,encoding = &#39;utf-8&#39;) as f:
    f.writelines(resp.read().decode(&#39;utf-8&#39;))
</code></pre>
<p>运行代码，会生成一个html文件，我们用浏览器打开它，发现结果如下：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594010413908.jpg"></p>
<p>这并不是我们想要的页面，然后将上面的代码中cookie部分取消注释，再运行，打开result.html：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594010616018.jpg"></p>
<p>可以看到出现了我们想要的页面！这就很好的体现出cookie的作用。</p>
<h2 id="http-cookiejar模块"><a href="#http-cookiejar模块" class="headerlink" title="http.cookiejar模块"></a><a href="#" title="http.cookiejar模块"></a>http.cookiejar模块</h2><p>上面介绍了一种可行的方法，不过我写爬虫不就是为了提高效率嘛，你还每次让我手动去复制粘贴cookie信息？再想想，我们能通过请求获得状态码之类的网站信息，cookie也能用同样的方式获得呀，那不就完事了。这里我们的http.cookiejar模块就闪亮登场了，该模块主要的类有 CookieJar、FileCookieJar、MozillaCookieJar、LWPCookieJar。这四个类的作用分别如下：</p>
<p>类名</p>
<p>描述</p>
<p>CookieJar</p>
<p>管理 HTTP cookie 值、存储 HTTP 请求生成的 cookie、向传出的 HTTP 请求添加 cookie 的对象。整个 cookie 都存储在内存中，对 CookieJar 实例进行垃圾回收后 cookie也将丢失。</p>
<p>FileCookieJar (filename,delayload=None,policy=None)</p>
<p>从 CookieJar 派生而来，用创建 FileCookieJar 实例，检索 cookie 信息并将 cookie 存储到文件中。filename 是存储cookie的文件名。delayload 为 True 时支持延迟访问访问文件，即只有在需要时才读取文件或在文件中存储数据。</p>
<p>MozillaCookieJar (filename,delayload=None,policy=None)</p>
<p>从 FileCookieJar 派生而来，创建与 Mozilla 浏览器 cookies.txt 兼容的 FileCookieJar 实例。</p>
<p>LWPCookieJar (filename,delayload=None,policy=None)</p>
<p>从 FileCookieJar 派生而来，创建与 libwww-perl 标准的 Set-Cookie3 文件格式兼容的 FileCookieJar 实例。</p>
<p>再用该模块实现访问人人网大鹏的主页：</p>
<p>python</p>
<pre><code>from urllib import request,parse
from http.cookiejar import CookieJar

headers=&#123;&#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64)\
         AppleWebKit/537.36 (KHTML, like Gecko) \
         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58&#39;
    &#125;
#创造一个opener
def get_opener():
    cookjar=CookieJar()
    handler=request.HTTPCookieProcessor(cookjar)
    opener=request.build_opener(handler)
    return opener

#利用创造好的opener发送请求，请求返回的数据中就有cookie信息，他会保存到cookiejar类中
def save_cookie(opener):
    login_url=&quot;http://www.renren.com/PLogin.do&quot;
    #账号密码不能泄露啊😂😂😂
    data=&#123;&quot;email&quot;:&quot;##########&quot;,
          &#39;password&#39;:&quot;##########&quot;
        &#125;
    res = request.Request(login_url,data= parse.urlencode(data).encode(&#39;utf8&#39;),method=&#39;POST&#39;,headers=headers)
    opener.open(res)

#访问大鹏主页
def get_profile(opener):
    url=&quot;http://www.renren.com/880151247/profile&quot;
    res=request.Request(url,headers=headers)
    resp=opener.open(res)
    with open(&#39;result2.html&#39;,&#39;w&#39;,encoding = &#39;utf-8&#39;) as f:
        f.writelines(resp.read().decode(&#39;utf-8&#39;))

if __name__==&#39;__main__&#39;:
    opener=get_opener()
    save_cookie(opener)
    get_profile(opener)
</code></pre>
<p>结果如下：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594037026162.jpg"></p>
<h2 id="cookie的保存与加载"><a href="#cookie的保存与加载" class="headerlink" title="cookie的保存与加载"></a><a href="#" title="cookie的保存与加载"></a>cookie的保存与加载</h2><h3 id="保存到本地"><a href="#保存到本地" class="headerlink" title="保存到本地"></a><a href="#" title="保存到本地"></a>保存到本地</h3><p>保存 cookie 到本地，可以使用 MozillaCookieJar 的 save 方法，并且需要指定一个文件名。这里我们再用**<a target="_blank" rel="noopener" href="http://httpbin.org/">http://httpbin.org</a>**这个网站来演示，该网站可以让我们自定义该网站的cookie信息，话不多说，先上图；<br>主页是这样的，先点击cookie选项:  </p>
<p><img src="https://image.resetran.top/bolg_images/1594041407808.jpg"></p>
<p>跟着步骤来：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594041429670.jpg"></p>
<p>设置好后是这样：</p>
<p><img src="https://image.resetran.top/bolg_images/1594041443340.jpg"></p>
<p>如果想重新设置，可以先清除该网站的cookie数据哦，怎么清除点<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/09ea3ede592a34c0afde394e.html">它</a></p>
<p>python</p>
<pre><code>from urllib import request,parse
from http.cookiejar import MozillaCookieJar

headers=&#123;&#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64)\
         AppleWebKit/537.36 (KHTML, like Gecko) \
         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58&#39;
&#125;
url=&quot;http://httpbin.org/cookies/set/python/spyder&quot;
    
cookiejar=MozillaCookieJar()
handler=request.HTTPCookieProcessor(cookiejar)    
opener=request.build_opener(handler)
req=request.Request(url,headers=headers)
opener.open(req)
cookiejar.save(&#39;cookie.txt&#39;,ignore_discard=True,ignore_expires=True)
#由于该网站的cookie不会可能会过期或者被丢弃，所以这里得设置一下参数
#ignore_discard 的意思是即使 cookies 将被丢弃也将它保存下来
#ignore_expires 的意思是如果 cookies 已经过期也将它保存并且文件已存在时将覆盖
with open(&#39;cookie.txt&#39;,&#39;r&#39;) as f:
    print(f.read())
</code></pre>
<p>可以看到已经生成了cookie.txt文件，里边就存储着cookie信息，结果如下（出现这种格式应该是save方法的问题）：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594041878454.jpg"></p>
<h3 id="加载cookie信息"><a href="#加载cookie信息" class="headerlink" title="加载cookie信息"></a><a href="#" title="加载cookie信息"></a>加载cookie信息</h3><p>然后再来看看加载cookie信息，跟上边很类似：</p>
<p>python</p>
<pre><code>headers=&#123;&#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64)\
         AppleWebKit/537.36 (KHTML, like Gecko) \
         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58&#39;
&#125;
url=&quot;http://httpbin.org/cookies&quot;
cookiejar=MozillaCookieJar()
cookiejar.load(&#39;cookie.txt&#39;,ignore_discard=True,ignore_expires=True)
handler=request.HTTPCookieProcessor(cookiejar)    
opener=request.build_opener(handler)
req=request.Request(url,headers=headers)
resp=opener.open(req)
print(resp.read().decode())
</code></pre>
<p>输出：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594043291139.jpg"></p>
<h2 id="Requests库"><a href="#Requests库" class="headerlink" title="Requests库"></a><a href="#" title="Requests库"></a>Requests库</h2><p>虽然 Python 的标准库中 urllib 模块已经包含了平常我们使用的大多数功能，但是它的 API使用起来让人感觉不太好，而 Requests 宣传是 “HTTP for Humans”，说明使用更简洁方便。接下来我们就用requests库来实现和urllib同样的功能</p>
<h3 id="发送get请求"><a href="#发送get请求" class="headerlink" title="发送get请求"></a><a href="#" title="发送get请求"></a>发送get请求</h3><p>requests库发送get请求直接使用get方法即可，返回的是一个response对象，如果想添加 headers，可以传入 headers 参数来增加请求头中的 headers 信息。如果要将参数放在 url 中传递，可以利用params 参数</p>
<p>python</p>
<pre><code>import requests
url=&quot;https://www.baidu.com&quot;
headers=&#123;&#39;user-agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64)\
         AppleWebKit/537.36 (KHTML, like Gecko) \
         Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58&#39;
&#125;
kw=&#123;&#39;wd&#39;:&#39;高考&#39;&#125;
# params 是一个字典或者字符串的查询参数，字典自动转换为 url 编码，不需要urlencode()
response = requests.get(url, params = kw, headers = hea
ders)
# 查看响应内容，response.text 返回的是 Unicode 格式的数据(python 会利用自己猜测的编码方式解码，可能会产生乱码的问题)
print(response.text)
# 查看响应头部字符编码
print(response.encoding)
# python 会根据网页内容来得到一个字符编码
print(response.apparent_encoding)
# 如果 response.text 乱码了，可以先设置
response.encoding= response.apparent_encoding
# 查看响应内容，response.content 返回的字节流 bytes 数据
print(response.content)
print(response.content .decode(&#39;utf-8&#39;))
# 查看完整 url 地址
print(response.url)
# 查看响应码
print(response.status_code)
#如果网页返回的是 json，那么可以通过 response.json()转换为 dict 或者 list
print(response.json())
</code></pre>
<h3 id="发送-POST-请求"><a href="#发送-POST-请求" class="headerlink" title="发送 POST 请求"></a><a href="#" title="发送 POST 请求"></a>发送 POST 请求</h3><p>最基本的 POST 请求可以使用 post 方法，传入 data 数据（这时候就不要再使用 urlencode 进行编码了，直接传入一个字典进去就可以了）。返回的也是response对象，可以进行的操作同上。比如请求拉勾网的数据的代码：</p>
<p>python</p>
<pre><code>import requests

params = &#123;&#39;px&#39;: &#39;default&#39;,
          &#39;city&#39;: &#39;北京&#39;,
          &#39;needAddtionalResult&#39;: &#39;false&#39;&#125;
data = &#123;&#39;first&#39;: &#39;true&#39;,
        &#39;pn&#39;: 1,
        &#39;kd&#39;: &#39;python&#39;&#125;
headers = &#123;&#39;Referer&#39;: &quot;https://www.lagou.com/jobs/list_python&quot;,
           &#39;Cookie&#39;: &#39;JSEIONID=ABAAABA9B2BCC46&#39;,
           &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&#39;&#125;
url = &#39;https://www.lagou.com/jobs/list_python#filterBox&#39;
response = requests.post(url,
                         params=params,
                         headers=headers,
                         data=data,
                         timeout=5)
response.encoding = &#39;UTF-8&#39;
print(response.text)
</code></pre>
<h3 id="使用代理"><a href="#使用代理" class="headerlink" title="使用代理"></a><a href="#" title="使用代理"></a>使用代理</h3><p>使用 requests 添加代理也非常简单，只要在请求的方法中（比如 get 或者 post）传递 proxies参数即可（挂了科学上网软件的最好先关一下，我就因为没关被坑惨了）：</p>
<p>python</p>
<pre><code>import requests

url = &#39;http://www.httpbin.org/ip&#39;
proxy = &#123;
    &#39;http&#39;: &#39;161.35.110.112:3128&#39;
&#125;
resp_1 = requests.get(url, timeout=5)
print(resp_1.text)
resp_2 = requests.get(url, proxies=proxy, timeout=5)
print(resp_2.text)
</code></pre>
<p>输出如下：  </p>
<p><img src="https://image.resetran.top/bolg_images/1594091758109.jpg"></p>
<h3 id="使用requests-session保存cookie"><a href="#使用requests-session保存cookie" class="headerlink" title="使用requests.session保存cookie"></a><a href="#" title="使用requests.session保存cookie"></a>使用requests.session保存cookie</h3><p>之前使用 urllib 库，是可以使用 opener 发送多个请求，多个请求之间是可以共享 cookie 的。那么如果使用 requests，也要达到共享 cookie 的目的，那么可以使用 requests 库给我们提供的 session 对象。注意，这里的 session 不是 web 开发中的那个 session，这个地方只是一个会话的对象而已。还是以登录人人网为例，使用 requests 来实现。示例代码如下：</p>
<p>python</p>
<pre><code>import requests

url = &quot;http://www.renren.com/PLogin.do&quot;
data = &#123;&quot;email&quot;: &quot;970138074@qq.com&quot;, &#39;password&#39;: &quot;pythonspider&quot;&#125;
headers = &#123;
    &#39;UserAgent&#39;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36&quot;
&#125;
# 登录
session = requests.session()
session.post(url, data=data, headers=headers)
# 访问大鹏个人中心
resp = session.get(&#39;http://www.renren.com/880151247/profile&#39;)
print(resp.status_code)
#输出：
200
</code></pre>
<h2 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a><a href="#" title="总结一下"></a>总结一下</h2><p>个人感觉使用方面确实requests库比起urllib的API接口要舒适许多，所以以后能用requests俺就不用urllib🤣🤣🤣</p>
<hr>
<p><em>文章作者:</em> <a target="_blank" rel="noopener" href="https://resetran.top/about">Reset Ran</a></p>
<p><em>文章链接:</em> <a target="_blank" rel="noopener" href="https://resetran.top/python-spyder-3/">https://resetran.top/python-spyder-3/</a></p>
<h1 id="mitmproxy抓包-Python实时生成接口自动化用例（三）"><a href="#mitmproxy抓包-Python实时生成接口自动化用例（三）" class="headerlink" title="mitmproxy抓包 | Python实时生成接口自动化用例（三）"></a>mitmproxy抓包 | Python实时生成接口自动化用例（三）</h1><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1956164">https://cloud.tencent.com/developer/article/1956164</a></p>
<p>发布于2022-03-14 14:27:15阅读 1.2K0</p>
<p>[抓包工具mitmproxy环境配置使用（一）](<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=Mzg5MzI1NTI0Mw==&amp;mid=2247485040&amp;idx=1&amp;sn=2bec68eb00d7dfb084b696b9216430e1&amp;chksm=c030ed54f747644204b510c43220af53cf549833f2f83b57ffa1ce0ff3b252f139b6c1a4b575&amp;scene=21">http://mp.weixin.qq.com/s?__biz=Mzg5MzI1NTI0Mw==&amp;mid=2247485040&amp;idx=1&amp;sn=2bec68eb00d7dfb084b696b9216430e1&amp;chksm=c030ed54f747644204b510c43220af53cf549833f2f83b57ffa1ce0ff3b252f139b6c1a4b575&amp;scene=21</a> target=)</p>
<p>[抓包工具mitmproxy | mitmweb基本用法（二）](<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=Mzg5MzI1NTI0Mw==&amp;mid=2247486272&amp;idx=1&amp;sn=f79e2f7ee08e749139d93d9c0935edb2&amp;chksm=c030e064f7476972ac283a84b238cede0652249b698c9e794ea7a82a7a841c3cc57c00f99e60&amp;scene=21">http://mp.weixin.qq.com/s?__biz=Mzg5MzI1NTI0Mw==&amp;mid=2247486272&amp;idx=1&amp;sn=f79e2f7ee08e749139d93d9c0935edb2&amp;chksm=c030e064f7476972ac283a84b238cede0652249b698c9e794ea7a82a7a841c3cc57c00f99e60&amp;scene=21</a> target=)</p>
<p>前面已经给大家分享了mitmproxy的环境配置和基本使用，文章浏览量很高，相信对抓包工具感兴趣的朋友，已经熟练运用起来了。</p>
<p>这期给大家分享下mitmproxy结合python脚本对抓包信息的（请求头、请求头、接口url、请求方式、响应头、响应体等）进行监控，实时抓取数据并存储到文件里，实现了接口自动化测试中的接口用例设计自动化，无需花费大量时间手动编写接口用例，大大提高了工作效率，相信很多人看到这里已经欣喜难耐了，一定要关注下方公众号，有更多精彩技术文章。</p>
<p>一、mitmproxy介绍</p>
<p>mitmproxy是Python编写的一款功能完善的代理工具，mitmproxy是一款支持拦截HTTP和HTTPS请求和响应并即时修改它们的交互式中间人代理工具。最强大之处在于对python脚步的支持，它提供了Python API给开发者编写插件用来自定义对流量进行处理和修改，可以在python代码中直接处理数据包。</p>
<p>二、mitmproxy的功能：</p>
<p>1、拦截HTTP和HTTPS请求和响应</p>
<p>2、保存HTTP会话并进行分析</p>
<p>3、模拟客户端发起请求，模拟<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/cvm?from=10680">服务器</a>端返回响应</p>
<p>4、利用反向代理将流量转发给指定的服务器</p>
<p>5、支持Mac和linux上的透明代理</p>
<p>6、利用Python对HTTP请求与响应进行实时处理</p>
<p>三、环境</p>
<p>1、部署python环境</p>
<p>2、安装mitmproxy，pip install mitmproxy</p>
<p>mitmproxy提供了HTTP、WebSocket、TCP事件。本次只考虑HTTP事件，HTTP事件提供一些api，详情参考<a target="_blank" rel="noopener" href="https://docs.mitmproxy.org/stable/addons-events/">https://docs.mitmproxy.org/stable/addons-events/</a></p>
<p>四、启动web抓包，抓包信息全量存入文件</p>
<p>1、cmd下执行：</p>
<p>mitmweb -p 8889 -w C:\Users\la\Desktop\test.txt</p>
<p>启动抓包服务，实时抓取全量数据存入文件</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6525263/06eb6a1201bb48bfce6332b69be19668.png?imageView2/2/w/2560/h/7000"></p>
<p>2、自动打开web抓包页面</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6525263/b042cf1d8c2cab85742fc8e74c7e04fb.png?imageView2/2/w/2560/h/7000"></p>
<p>3、边抓包，边将抓包的全量信息实时存入文件</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6525263/e5ea9fcdda825a408600a7e4f89c2a58.png?imageView2/2/w/2560/h/7000"></p>
<p>五、python脚本</p>
<p>编写python脚本，获取接口（请求头、请求头、接口url、请求方式、响应头、响应体等）需要的信息，脚本变更，保存后实时同步，无需重新启动抓包服务</p>
<pre><code>import mitmproxy.http
import csv,json
</code></pre>
<p>​<br>    class CaptureInfoWriteFile:<br>        def <strong>init</strong>(self):<br>            pass</p>
<pre><code>    def request(self, flow: mitmproxy.http.HTTPFlow):
        flow_request = flow.request  # 获取请求对象
        self.url = flow_request.url  # 接口url
        self.host = flow_request.host  # 域名
        self.path = flow_request.path  # 接口地址
        self.method = flow_request.method  # 请求方式
        self.content = flow_request.content
        self.timestamp_start = flow_request.timestamp_start  # 请求开始时间戳
        self.timestamp_end = flow_request.timestamp_end  # 请求结束时间戳
        self.header = flow_request.headers  # 请求头
        self.text = flow_request.text  # 请求体

    def response(self, flow: mitmproxy.http.HTTPFlow):
        flow_response = flow.response  # 获取响应对象
        response_status_code = flow_response.status_code  # 响应状态码
        response_text = flow_response.text  # 响应体
        response_content = flow_response.content
        response_timestamp_start = flow_response.timestamp_start  # 响应开始时间
        response_timestamp_end = flow_response.timestamp_end  # 响应结束时间
        response_header = flow_response.headers  # 响应头

        with open(r&#39;C:\Users\xia\Desktop\test15.csv&#39;, &#39;a+&#39;,newline=&#39;&#39;) as f:
            f_csv = csv.writer(f)
            f_csv.writerows([[self.url, self.host, self.path, self.method, self.header, self.text, response_status_code, response_header, response_text]])
</code></pre>
<p>​<br>    addons = [CaptureInfoWriteFile()]</p>
<p>复制</p>
<p>六、启动web抓包，调用python脚本</p>
<p>1、cmd下执行：</p>
<p>mitmweb -p 8889 -s C:\Users\xia\Desktop\test_maplocal.py</p>
<p>启动抓包服务，实时监控获取抓包信息</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6525263/93c3002ba703dd54eb7310433ab38a2d.png?imageView2/2/w/2560/h/7000"></p>
<p>2、自动打开web抓包页面</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6525263/877ee8d87a735ff2a62f6a8a2909124d.png?imageView2/2/w/2560/h/7000"></p>
<p>3、边抓包，边调用python脚本，将获取的抓包信息实时存储到文件里，方便接口自动测试使用</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6525263/79c8edfc6957f80f93a41dd283e8913b.png?imageView2/2/w/2560/h/7000"></p>
<h1 id="使用HTTPX和asyncio的Python异步HTTP请求"><a href="#使用HTTPX和asyncio的Python异步HTTP请求" class="headerlink" title="使用HTTPX和asyncio的Python异步HTTP请求"></a>使用HTTPX和asyncio的Python异步HTTP请求</h1><p>异步代码已经日益成为Python开发的主流。随着<a href="https://link.juejin.cn/?target=https://docs.python.org/3/library/asyncio.html" title="https://docs.python.org/3/library/asyncio.html">asyncio</a>成为标准库的一部分和许多第三方软件包提供与之兼容的功能，这种模式不会很快消失。</p>
<p>让我们来看看如何使用<a href="https://link.juejin.cn/?target=https://www.python-httpx.org/" title="https://www.python-httpx.org/">HTTPX</a>库来利用它来进行异步的HTTP请求，这是非阻塞代码最常见的用例之一。</p>
<h2 id="什么是非阻塞代码？"><a href="#什么是非阻塞代码？" class="headerlink" title="什么是非阻塞代码？"></a>什么是非阻塞代码？</h2><p>你可能会听到 “异步”、”非阻塞 “或 “并发 “这样的术语，并对它们的含义感到有点困惑。根据这个<a href="https://link.juejin.cn/?target=https://realpython.com/async-io-python/%23where-does-async-io-fit-in" title="https://realpython.com/async-io-python/#where-does-async-io-fit-in">更详细的教程</a>，其中两个主要属性是。</p>
<ul>
<li>  异步程序能够在等待其最终结果时 “暂停”，让其他程序在此期间运行。</li>
<li>  <a href="https://link.juejin.cn/?target=https://realpython.com/python-async-features/" title="https://realpython.com/python-async-features/">异步代码</a>，通过上述机制，促进了并发执行。换句话说，异步代码给人以并发的外观和感觉。</li>
</ul>
<p>因此，异步代码是可以在等待结果时挂起的代码，以便让其他代码在这期间运行。它不会 “阻止 “其他代码的运行，所以我们可以称它为 “非阻塞 “代码。</p>
<p><a href="https://link.juejin.cn/?target=https://docs.python.org/3/library/asyncio.html" title="https://docs.python.org/3/library/asyncio.html">asyncio库为</a>Python开发者提供了各种工具来实现这一点，而aiohttp为HTTP请求提供了更具体的功能。HTTP请求是非常适合异步性的一个典型例子，因为它们涉及到等待服务器的响应，在这期间，让其他代码运行是很方便和有效的。</p>
<h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><p>在我们开始之前，请确保设置好你的Python环境。如果你需要一些帮助，请按照<a href="https://link.juejin.cn/?target=https://www.twilio.com/docs/guides/how-to-set-up-your-python-and-flask-development-environment%23create-a-simple-flask-application" title="https://www.twilio.com/docs/guides/how-to-set-up-your-python-and-flask-development-environment#create-a-simple-flask-application">本指南</a>中的virtualenv部分进行。如果你有多个项目在同一台机器上运行，让一切正常工作，尤其是<a href="https://link.juejin.cn/?target=https://www.twilio.com/docs/guides/how-to-set-up-your-python-and-flask-development-environment%23start-a-new-project-with-virtualenv" title="https://www.twilio.com/docs/guides/how-to-set-up-your-python-and-flask-development-environment#start-a-new-project-with-virtualenv">虚拟环境</a>对于隔离你的依赖关系非常重要。你至少需要Python 3.7或更高的版本，以便运行这篇文章中的代码。</p>
<p>现在你的环境已经设置好了，你将需要安装<a href="https://link.juejin.cn/?target=https://www.python-httpx.org/" title="https://www.python-httpx.org/">HTTPX</a>库，用于发出请求，包括异步和同步请求，我们将对此进行比较。在激活你的虚拟环境后，用下面的命令安装它。</p>
<pre><code>pip install httpx==0.18.2
复制代码
</code></pre>
<p>有了这个，你应该准备好继续写一些代码了。</p>
<h2 id="用HTTPX做一个HTTP请求"><a href="#用HTTPX做一个HTTP请求" class="headerlink" title="用HTTPX做一个HTTP请求"></a>用HTTPX做一个HTTP请求</h2><p>让我们开始使用HTTPX做一个单一的GET请求，以证明关键字<code>async</code> 和<code>await</code> 工作。我们将使用<a href="https://link.juejin.cn/?target=https://pokeapi.co/docs/v2" title="https://pokeapi.co/docs/v2">口袋妖怪API</a>作为一个例子，所以让我们开始尝试获取与传说中的第151个口袋妖怪<a href="https://link.juejin.cn/?target=https://www.youtube.com/watch?v=d--IkSWn7j8" title="https://www.youtube.com/watch?v=d--IkSWn7j8">Mew</a>相关的<a href="https://link.juejin.cn/?target=https://pokeapi.co/api/v2/pokemon/151" title="https://pokeapi.co/api/v2/pokemon/151">数据</a>。</p>
<p>运行下面的Python代码，你应该看到名字 “Mew “被打印到终端。</p>
<pre><code>import asyncio
import httpx
</code></pre>
<p>​<br>    async def main():<br>        pokemon_url = ‘<a target="_blank" rel="noopener" href="https://pokeapi.co/api/v2/pokemon/151&#39;">https://pokeapi.co/api/v2/pokemon/151&#39;</a></p>
<pre><code>    async with httpx.AsyncClient() as client:

        resp = await client.get(pokemon_url)

        pokemon = resp.json()
        print(pokemon[&#39;name&#39;])

asyncio.run(main())
复制代码
</code></pre>
<p>在这段代码中，我们正在创建一个叫做main的程序，我们用<a href="https://link.juejin.cn/?target=https://realpython.com/async-io-python/%23the-event-loop-and-asynciorun" title="https://realpython.com/async-io-python/#the-event-loop-and-asynciorun">asyncio事件循环来</a>运行它。在这里，我们正在向Pokemon API发出请求，然后等待响应。</p>
<p>这个<code>async</code> 关键字基本上告诉 Python 解释器，我们定义的 coroutine 应该用一个事件循环异步运行。<code>await</code> 关键字将控制权传回给事件循环，暂停周围的 coroutine 的执行，让事件循环运行其他的东西，直到被 “等待 “的结果被返回。</p>
<h2 id="提出大量的请求"><a href="#提出大量的请求" class="headerlink" title="提出大量的请求"></a>提出大量的请求</h2><p>提出一个单一的异步HTTP请求是很好的，因为我们可以让事件循环在其他任务上工作，而不是在等待响应时阻塞整个线程。这个功能在尝试进行大量请求时才真正发挥了作用。让我们通过执行与之前相同的请求来证明这一点，不过是为了<a href="https://link.juejin.cn/?target=https://www.youtube.com/watch?v=xMk8wuw7nek" title="https://www.youtube.com/watch?v=xMk8wuw7nek">所有150个原始小精灵</a>。</p>
<p>让我们把之前的请求代码放在一个循环中，更新哪个小精灵的数据正在被请求，并对每个请求使用<code>await</code> 。</p>
<pre><code>import asyncio
import httpx
import time

start_time = time.time()
</code></pre>
<p>​<br>    async def main():</p>
<pre><code>    async with httpx.AsyncClient() as client:

        for number in range(1, 151):
            pokemon_url = f&#39;https://pokeapi.co/api/v2/pokemon/&#123;number&#125;&#39;

            resp = await client.get(pokemon_url)
            pokemon = resp.json()
            print(pokemon[&#39;name&#39;])

asyncio.run(main())
print(&quot;--- %s seconds ---&quot; % (time.time() - start_time))
复制代码
</code></pre>
<p>这一次，我们也要测量整个过程需要多少时间。如果你在你的Python shell中运行这段代码，你应该看到类似下面的东西打印到你的终端。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95ca9d5244284571bf641cf18a8bc842~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp"></p>
<p>对于150个请求来说，8.6秒似乎很不错，但我们并没有什么可以比较的。让我们试着用同步方式完成同样的事情。</p>
<h2 id="比较同步请求的速度"><a href="#比较同步请求的速度" class="headerlink" title="比较同步请求的速度"></a>比较同步请求的速度</h2><p>要像以前一样打印前150个小精灵，但没有async/await，运行以下代码。</p>
<pre><code>import httpx
import time

start_time = time.time()
client = httpx.Client()

for number in range(1, 151):
    url = f&#39;https://pokeapi.co/api/v2/pokemon/&#123;number&#125;&#39;
    resp = client.get(url)
    pokemon = resp.json()
    print(pokemon[&#39;name&#39;])

print(&quot;--- %s seconds ---&quot; % (time.time() - start_time))
复制代码
</code></pre>
<p>你应该看到相同的输出，但运行时间不同。</p>
<p><img src="https://twilio-cms-prod.s3.amazonaws.com/images/tgB7FXmp5hTizg2kWabrersfXc28plHdKdNCPAp1CBwaEc.width-500.png"></p>
<p>尽管它看起来并没有比以前慢多少。这很可能是因为HTTPX<code>Client</code> 所做的连接池正在做大部分的重活。然而，我们可以利用更多的<code>asyncio</code> 功能来获得比这更好的性能。</p>
<h2 id="利用asyncio来提高性能"><a href="#利用asyncio来提高性能" class="headerlink" title="利用asyncio来提高性能"></a>利用asyncio来提高性能</h2><p><code>asyncio</code> 提供了更多的工具，可以大大改善我们的整体性能。在原来的例子中，我们在每个单独的HTTP请求后使用await，这不是很理想。我们可以将所有这些请求作为<code>asyncio</code> 任务 “并发 “运行，然后在最后使用<code>asyncio.ensure_future</code> 和<code>asyncio.gather</code> 检查结果。</p>
<p>如果实际发出请求的代码被分解成自己的coroutine函数，我们可以创建一个任务列表，由每个请求的 <a href="https://link.juejin.cn/?target=https://docs.python.org/3/library/asyncio-future.html" title="https://docs.python.org/3/library/asyncio-future.html">期货</a>组成。然后，我们可以将这个列表解压到一个 <a href="https://link.juejin.cn/?target=https://docs.python.org/3/library/asyncio-task.html%23id6" title="https://docs.python.org/3/library/asyncio-task.html#id6">集合</a>调用，将它们全部运行起来。当我们<code>await</code> 这个调用到<code>asyncio.gather</code> ，我们将得到一个所有被传入的期货的可迭代文件，保持它们在列表中的顺序。这样，我们就只用了一次<code>await</code> 。</p>
<p>为了看看我们实现这个方法后会发生什么，请运行以下代码。</p>
<pre><code>import asyncio
import httpx
import time
</code></pre>
<p>​<br>    start_time = time.time()</p>
<p>​<br>    async def get_pokemon(client, url):<br>            resp = await client.get(url)<br>            pokemon = resp.json()</p>
<pre><code>        return pokemon[&#39;name&#39;]
</code></pre>
<p>​<br>    async def main():</p>
<pre><code>    async with httpx.AsyncClient() as client:

        tasks = []
        for number in range(1, 151):
            url = f&#39;https://pokeapi.co/api/v2/pokemon/&#123;number&#125;&#39;
            tasks.append(asyncio.ensure_future(get_pokemon(client, url)))

        original_pokemon = await asyncio.gather(*tasks)
        for pokemon in original_pokemon:
            print(pokemon)

asyncio.run(main())
print(&quot;--- %s seconds ---&quot; % (time.time() - start_time))
复制代码
</code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d526a952e2a4fc595bbc19eee9e0891~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp"></p>
<p>这使我们的时间降到了150个HTTP请求的1.54秒！这比以前有很大的进步。这比之前的例子有了很大的进步。这是完全无阻塞的，所以运行所有150个请求的总时间将大致等于最长请求的运行时间。确切的数字会因你的互联网连接而有所不同。</p>
<h2 id="结论性的想法"><a href="#结论性的想法" class="headerlink" title="结论性的想法"></a>结论性的想法</h2><p>正如你所看到的，使用像HTTPX这样的库来重新思考你进行HTTP请求的方式，可以为你的代码增加一个巨大的性能提升，并在进行大量的请求时节省大量的时间。</p>
<p>在这个教程中，我们只是触及了用asyncio可以做什么的表面，但我希望这能使你开始进入异步Python世界的旅程更容易一些。如果你对另一个类似的异步 HTTP 请求库感兴趣，可以<a href="https://link.juejin.cn/?target=https://www.twilio.com/blog/asynchronous-http-requests-in-python-with-aiohttp" title="https://www.twilio.com/blog/asynchronous-http-requests-in-python-with-aiohttp">看看我写的关于 aiohttp 的另一篇博文。</a></p>
<ul>
<li>  <a href="https://link.juejin.cn/?target=http://www.twitch.tv/sagnewshreds">https://link.juejin.cn?target=http%3A%2F%2Fwww.twitch.tv%2Fsagnewshreds</a> “<a target="_blank" rel="noopener" href="http://www.twitch.tv/sagnewshreds&quot;">http://www.twitch.tv/sagnewshreds&quot;</a>)</li>
</ul>
<h1 id="RuntimeError：无法从正在运行的事件循环中调用asyncio-run（）"><a href="#RuntimeError：无法从正在运行的事件循环中调用asyncio-run（）" class="headerlink" title="RuntimeError：无法从正在运行的事件循环中调用asyncio.run（）"></a><a href="#">RuntimeError：无法从正在运行的事件循环中调用asyncio.run（）</a></h1><p><a href="/sf/users/552672361/" title="Jav*_*tin">Jav*_*tin</a> 4 <a target="_blank" rel="noopener" href="https://qa.1r1g.com/sf/ask/tagged/python/">python</a> <a target="_blank" rel="noopener" href="https://qa.1r1g.com/sf/ask/tagged/python-asyncio/">python-asyncio</a> <a target="_blank" rel="noopener" href="https://qa.1r1g.com/sf/ask/tagged/python-3.7/">python-3.7</a></p>
<p>我正在尝试为websockets客户端学习异步。我尝试的每一段代码都会出现以下错误：</p>
<blockquote>
<p>RuntimeError：无法从正在运行的事件循环中调用asyncio.run（）</p>
</blockquote>
<p>我尝试了最简单的代码，它始终会给出RuntimeError。我尝试再次安装完整的anaconda发行版，等等，但找不到问题所在。</p>
<p>我正在将Spyder 3.3.3与Python 3.7.3结合使用</p>
<p>可以正常工作的代码示例：</p>
<pre><code>import asyncio

async def main():
    print(&#39;hello&#39;)
    await asyncio.sleep(1)
    print(&#39;world&#39;)

asyncio.run(main())
</code></pre>
<p>错误信息：</p>
<pre><code>File &quot;C:\Users\jmart\Anaconda3\lib\site-packages\spyder_kernels\customize\spydercustomize.py&quot;, line 786, in runfile
  execfile(filename, namespace)
File &quot;C:\Users\jmart\Anaconda3\lib\site-packages\spyder_kernels\customize\spydercustomize.py&quot;, line 110, in execfile
  exec(compile(f.read(), filename, &#39;exec&#39;), namespace)
File &quot;C:/Users/jmart/Documents/asynk2.py&quot;, line 8, in &lt;module&gt;
  asyncio.run(main())
File &quot;C:\Users\jmart\Anaconda3\lib\asyncio\runners.py&quot;, line 34, in run
  &quot;asyncio.run() cannot be called from a running event loop&quot;)
RuntimeError: asyncio.run() cannot be called from a running event loop
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/HTML%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/HTML%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">HTML基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 09:57:57" itemprop="dateCreated datePublished" datetime="2022-08-17T09:57:57+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-30 10:46:06" itemprop="dateModified" datetime="2022-05-30T10:46:06+08:00">2022-05-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HTML/" itemprop="url" rel="index"><span itemprop="name">HTML</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">超文本标记（标签）语言</span></span><br><span class="line"><span class="comment">HTML - Hyper-text Markup Language</span></span><br><span class="line"><span class="comment">1. 标签 - content（内容）- 承载内容</span></span><br><span class="line"><span class="comment">2. 层叠样式表 - display（显示）- 渲染页面</span></span><br><span class="line"><span class="comment">3. JavaScript - behavior（行为）- 交互式行为</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">HTML 5</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">文本标签：</span></span><br><span class="line"><span class="comment">h1~h6 - 标题 - heading</span></span><br><span class="line"><span class="comment">hr - 水平标尺 - horizontal ruler</span></span><br><span class="line"><span class="comment">p - 段落 - paragraph</span></span><br><span class="line"><span class="comment">sub 上标 /sup 下标</span></span><br><span class="line"><span class="comment">em 斜体/ strong 粗体</span></span><br><span class="line"><span class="comment">del 删除线/ins 下划线</span></span><br><span class="line"><span class="comment">br - break ruler</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">列表标签：</span></span><br><span class="line"><span class="comment">有序列表 ol - ordered list</span></span><br><span class="line"><span class="comment">无序列表 ul - unordered list</span></span><br><span class="line"><span class="comment">li - list item</span></span><br><span class="line"><span class="comment">定义列表 dl - definition list</span></span><br><span class="line"><span class="comment">dt - definition title</span></span><br><span class="line"><span class="comment">dd - definition description</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">字符实体/实体替换符</span></span><br><span class="line"><span class="comment">&amp;nbsp; - 空格</span></span><br><span class="line"><span class="comment">&amp;lt; &amp;gt; - 尖括号</span></span><br><span class="line"><span class="comment">&amp;copy; &amp;reg; &amp;trade;</span></span><br><span class="line"><span class="comment">菜鸟教程：https://www.runoob.com/html/html-entities.html</span></span><br><span class="line"><span class="comment">https://www.runoob.com/tags/html-reference.html</span></span><br><span class="line"><span class="comment">MDN web DOC: https://developer.mozilla.org/zh-CN/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">form - 表单</span></span><br><span class="line"><span class="comment">	input - 表单控件</span></span><br><span class="line"><span class="comment">audio - 音频</span></span><br><span class="line"><span class="comment">video - 视频</span></span><br><span class="line"><span class="comment">div 容器，一个逻辑区域，如浮动广告</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">js调试：F12&gt;sources&gt;点击行号打断点&gt;点击单步执行、单步跳过逐行分析</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>技术专栏<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- css - cascading style sheet 层叠样式表--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">2cm</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&quot;宋体&quot;</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1cm</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-letter &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1.5cm</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.b</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: purple;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.功能链接--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--http://shang.qq.com--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--查看你自己的QQ资料，在右下角有个“生成在线状态”点进去，在那个页面就有代码生成功能，选择好之后直接复制即可--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">blank</span> <span class="attr">href</span>=<span class="string">http://wpa.qq.com/msgrd?V</span>=<span class="string">1&amp;Uin</span>=<span class="string">11223344&amp;Site</span>=<span class="string">这个地方填写QQ称呼&amp;Menu</span>=<span class="string">yes</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">SRC</span>=<span class="string">http://wpa.qq.com/pa?p</span>=<span class="string">1:11223344:1</span> <span class="attr">alt</span>=<span class="string">&quot;点击这里给我发消息&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.锚点链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../Linux/Mariadb_Mysql命令行常用命令_weixin_30708329的博客-CSDN博客.html#foo&quot;</span>&gt;</span>查命令<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="symbol">&amp;lt;</span>jackfrued<span class="symbol">&amp;gt;</span>博客 - H<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>0<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>喜欢吃的水果<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span> <span class="comment">&lt;!-- 有序列表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>火龙果<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>喜欢的网站<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span> <span class="comment">&lt;!-- 无序列表 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!---anchor--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--1.页面链接--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--2.锚点链接--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--3.功能链接--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://jd.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span>&gt;</span>京东<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--列表嵌套--&gt;</span></span><br><span class="line">        视频网站</span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://youku.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>优酷<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../Linux/Mariadb_Mysql命令行常用命令_weixin_30708329的博客-CSDN博客.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>爱奇艺<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>腾讯视频<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--img图片标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;image/ingame.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dt</span>&gt;</span>面向对象的编程语言<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span>基本概念：类、对象<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span>三大支柱：封装、继承、多态<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>动态弱类型语言，需要Python解释器才能执行<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="comment">&lt;!--换行标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;a&quot;</span>&gt;</span>七<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>八<span class="tag">&lt;<span class="name">del</span>&gt;</span>颗<span class="symbol">&amp;trade;</span>星<span class="tag">&lt;<span class="name">strong</span>&gt;</span>天<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>外<span class="tag">&lt;/<span class="name">del</span>&gt;</span><span class="tag">&lt;<span class="name">sup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;b&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">ins</span>&gt;</span>两三<span class="tag">&lt;/<span class="name">ins</span>&gt;</span>点雨<span class="tag">&lt;<span class="name">em</span>&gt;</span>山<span class="tag">&lt;/<span class="name">em</span>&gt;</span>前<span class="symbol">&amp;copy;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="comment">&lt;!--段落标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;showWriter()&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;shutdown()&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.锚点链接--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#top&quot;</span>&gt;</span>回顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.功能链接--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:1174185292@qq.com&quot;</span>&gt;</span>联系站长<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2.锚点链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 驼峰命名法 - Camel Notation</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">showWriter</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">alert</span>(<span class="string">&#x27;作者：Unknow&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">shutdown</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;确定要关闭吗？&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">close</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="notes-txt"><a href="#notes-txt" class="headerlink" title="notes.txt"></a>notes.txt</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Internet - TCP/IP模型 - 协议族</span><br><span class="line"></span><br><span class="line">HTML - Hyper-Text Markup Language</span><br><span class="line">HTTP - Hyper-Text Transfer Protocol</span><br><span class="line"></span><br><span class="line">- get - 从服务器获取资源（网页、图片、音视频）</span><br><span class="line">- post - 提交数据给服务器</span><br><span class="line">- delete</span><br><span class="line">- put</span><br><span class="line">- patch</span><br><span class="line"></span><br><span class="line">应用层 - HTTP / SMTP / POP3 / FTP / SSH / ICQ / QQ</span><br><span class="line">传输层 - TCP/UDP - 端到端传输</span><br><span class="line">IP层（网络层）- 寻址和路由</span><br><span class="line">网络接口层 - 接入网络（分帧、校验）</span><br></pre></td></tr></table></figure>

<h1 id="TCP-IP模型-txt"><a href="#TCP-IP模型-txt" class="headerlink" title="TCP+IP模型.txt"></a>TCP+IP模型.txt</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Internet - TCP/IP模型 - 协议族</span><br><span class="line"></span><br><span class="line">HTML - Hyper-text Markup Language</span><br><span class="line">HTTP - Hyper-text Transfer Protocol</span><br><span class="line"></span><br><span class="line">-get- 从服务器获取资源（网页、图片、音视频）</span><br><span class="line">-post- 提交数据给服务器</span><br><span class="line">-delete</span><br><span class="line">-put</span><br><span class="line">-patch</span><br><span class="line"></span><br><span class="line">应用层 - HTTP / SMTP / POP3 / FTP / SSH / ICQ / QQ</span><br><span class="line">传输层 - TCP/UDP - 端到端传输</span><br><span class="line">IP层（网络层）- 寻址和路由</span><br><span class="line">网络接口层 - 接入网络（分帧、校验）</span><br></pre></td></tr></table></figure>

<h1 id="音视频-html"><a href="#音视频-html" class="headerlink" title="音视频.html"></a>音视频.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;../audio/Angel.mp3&quot;</span> <span class="attr">autoplay</span> <span class="attr">controls</span> <span class="attr">loop</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--&lt;source src=&quot;audio/Angel.mp3&quot;&gt;--&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;../video/VID_20180930_161449.mp4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="框架-html"><a href="#框架-html" class="headerlink" title="框架.html"></a>框架.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--行级标签（元素） / 块级标签（元素）--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--h1-h6 / p / div / ul / ol / dl / table / form / hr 块级--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--a / img / iframe / button / span / input 行级--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--internal frame（内部窗口）--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/446213.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/500e42eeab120.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://map.baidu.com&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://www.runoob.com/html/html-iframes.html&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>2<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>京东<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&lt;frameset cols=&quot;30%,*&quot;&gt;</span></span><br><span class="line"><span class="comment">			&lt;frame src=&quot;http://www.baidu.com&quot; /&gt;</span></span><br><span class="line"><span class="comment">			&lt;frameset rows=&quot;20%,*&quot;&gt;</span></span><br><span class="line"><span class="comment">				&lt;frame src=&quot;http://www.youku.com&quot; /&gt;</span></span><br><span class="line"><span class="comment">				&lt;frame src=&quot;http://www.jd.com&quot; /&gt;</span></span><br><span class="line"><span class="comment">			&lt;/frameset&gt;</span></span><br><span class="line"><span class="comment">		&lt;/frameset&gt;--&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="层叠样式表-类选择器-html"><a href="#层叠样式表-类选择器-html" class="headerlink" title="层叠样式表+类选择器.html"></a>层叠样式表+类选择器.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 外部样式表 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--内部样式表--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;a&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;b&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;d&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;e&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;f&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;g&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;c h big&quot;</span>&gt;</span>静夜思 - 李白<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		床前明月光</span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="层叠样式表2-html"><a href="#层叠样式表2-html" class="headerlink" title="层叠样式表2.html"></a>层叠样式表2.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--一般情况下网站的首页会使用内部样式表 - 首页正常渲染--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--其他的页面可以共享一个或多个外部样式表 - 代码复用/减少对带宽和流量的使用--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--不冲突的样式会叠加，有冲突的样式遵循三条原则--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--1.就近原则--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--2.具体性原则--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--3.重要性原则--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#h1</span> &#123; <span class="attribute">color</span>: blue;&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.h1</span> &#123; <span class="attribute">color</span>: green <span class="meta">!important</span>;&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.h1</span> &#123; <span class="attribute">color</span>: pink <span class="meta">!important</span>;&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">h1</span> &#123; <span class="attribute">color</span>: red;&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--内嵌样式表 / 行内样式表 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- rgba(255, 255, 0, 0.5)==#ffff00 rgba透明效果颜色设定--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--hsl()灰度，饱和度，亮度颜色设定--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;c big&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: rgba(255, 255, 0, 0.5); </span></span></span><br><span class="line"><span class="string"><span class="tag">		font-family: &#x27;courier new&#x27;; text-align: center;&quot;</span>&gt;</span>hello world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;h1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;h1&quot;</span>&gt;</span>Goodbye world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="表单-html"><a href="#表单-html" class="headerlink" title="表单.html"></a>表单.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>表单的例子 - 注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 属性选择器input[type=text] */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* form input[type=text]后代选择器 */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* form&gt;input[type=text] 儿子选择器 */</span></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">form</span> <span class="selector-tag">input</span><span class="selector-attr">[type=text]</span>, <span class="selector-tag">form</span> <span class="selector-tag">input</span><span class="selector-attr">[type=password]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none; <span class="comment">/*边框*/</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none; <span class="comment">/*轮廓*/</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted darkgray;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 兄弟选择器 */</span></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">form</span>~<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">1px</span> solid lightgray;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 相邻兄弟选择器 */</span></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">form</span>+<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#00FFFF</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.button</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/163057jyrg229qerdeciod.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>图1：这是一个图片<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">legend</span>&gt;</span>用户基本信息<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					用户名:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">size</span>=<span class="string">&quot;30&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;20&quot;</span> </span></span><br><span class="line"><span class="tag">					<span class="attr">placeholder</span>=<span class="string">&quot;用户名由6-20个字符构成&quot;</span> <span class="attr">required</span>&gt;</span> <span class="comment">&lt;!--placeholder占位符--&gt;</span></span><br><span class="line">					<span class="comment">&lt;!--readonly只读属性--&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					密码:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">required</span>&gt;</span> <span class="comment">&lt;!--required必填属性--&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					确认密码:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;repassword&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					性别:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">checked</span>&gt;</span>男</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>女</span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					爱好:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;阅读&quot;</span> <span class="attr">checked</span>&gt;</span>阅读</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;旅游&quot;</span>&gt;</span>旅游</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;美食&quot;</span> <span class="attr">checked</span>&gt;</span>美食</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fav&quot;</span> <span class="attr">value</span>=<span class="string">&quot;运动&quot;</span>&gt;</span>运动</span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					<span class="comment">&lt;!--下拉列表--&gt;</span></span><br><span class="line">					省份:</span><br><span class="line">					<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;province&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;110000&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;120000&quot;</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;310000&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;500000&quot;</span>&gt;</span>重庆<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;510000&quot;</span> <span class="attr">selected</span>&gt;</span>四川省<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					生日:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">legend</span>&gt;</span>附加信息<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					邮箱:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					头像:</span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;photo&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					自我介绍:</span><br><span class="line">					<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">name</span>=<span class="string">&quot;introduction&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确认注册&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;重置&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="文本和字体属性-html"><a href="#文本和字体属性-html" class="headerlink" title="文本和字体属性.html"></a>文本和字体属性.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--衬线字体，非衬线字体，等宽字体--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="keyword">@font-face</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: <span class="string">&quot;FatDog&quot;</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../fonts/动漫卡通/Dbbrnms.ttf&#x27;</span>);</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.ms</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">letter-spacing</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">320px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">5px</span> dotted grey;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-decoration</span>: underline;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> gray;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: arial;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.one</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-indent</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.two</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-indent</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.three</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-indent</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.four</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-indent</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">h3</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* block / inline-block / none */</span></span></span><br><span class="line"><span class="language-css">				<span class="comment">/* display: inline-block; 为none时隐藏不占空间*/</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">visibility</span>: hidden; <span class="comment">/*为hidden时隐藏保留空间*/</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-transform</span>: uppercase;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font</span>: italic bolder <span class="number">2cm</span>/<span class="number">60px</span> <span class="string">&quot;FatDog&quot;</span>;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/*字体合集属性设定：font:斜体或粗体 加租 大小/行高 &quot;字体名称&quot;*/</span></span></span><br><span class="line"><span class="language-css">				<span class="comment">/* font-size: 2cm;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				font-family: &quot;FatDog&quot;;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				font-stretch: extra-expanded;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				font-style: oblique; </span></span></span><br><span class="line"><span class="comment"><span class="language-css">				</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				font: italic bolder 2cm/60px; */</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">64</span>, <span class="number">128</span>, <span class="number">192</span>);</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">280px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">4px</span> double <span class="number">#00CC33</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-left-color</span>: blue;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-right-color</span>: red;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">40px</span> <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: <span class="number">#749ABE</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">images/443121.jpg</span>);</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.box</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#photo</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">10px</span> solid gold;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-radius</span>: <span class="number">60px</span> <span class="number">60px</span> <span class="number">60px</span> <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#icon</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">images/icons.png</span>) no-repeat no-repeat -<span class="number">530px</span> -<span class="number">280px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: <span class="number">#00FFFF</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#python</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">290px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">82px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">./images/500e42eeab120.jpg</span>);</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: <span class="number">#009966</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;python&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;photo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;images/163057jyrg229qerdeciod.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">		<span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h3</span>&gt;</span>hello, world!<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;ms&quot;</span>&gt;</span>静夜思<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;one&quot;</span>&gt;</span>床前明月光<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;two&quot;</span>&gt;</span>疑是地上霜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;three&quot;</span>&gt;</span>举头望明月<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;four&quot;</span>&gt;</span>低头思故乡<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="表格-html"><a href="#表格-html" class="headerlink" title="表格.html"></a>表格.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-collapse</span>: collapse; <span class="comment">/*合并边框加在表格标签*/</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">td</span>, <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">1px</span> solid black; <span class="comment">/*设定边框加在单元格*/</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--ol&gt;li*5&gt;a tab--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!---table&gt;tr*4&gt;td*5 tab 生成一个四行五列的表格--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span>&gt;</span> <span class="comment">&lt;!--border边框--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">caption</span>&gt;</span>学生考试成绩表<span class="tag">&lt;/<span class="name">caption</span>&gt;</span> <span class="comment">&lt;!--caption标题--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">&quot;120&quot;</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span>体育<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--选中一段文字按&#x27;ctrl+]&#x27;可添加上级标签--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>王大锤<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>70<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>60<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>李二狗<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>55<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>56<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>57<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>58<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>杨广剑<span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="comment">&lt;!--跨行--&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span>55<span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="comment">&lt;!--跨列--&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!--&lt;td&gt;95&lt;/td&gt;</span></span><br><span class="line"><span class="comment">					&lt;td&gt;50&lt;/td&gt; --&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">					</span><br><span class="line">				<span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="css-practice-1-html"><a href="#css-practice-1-html" class="headerlink" title="css_practice_1.html"></a>css_practice_1.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Boxes<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			* &#123;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* border: 1px solid black; */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: <span class="string">&quot;PT Mono&quot;</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#page</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">960px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">4px</span> double black;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span> <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#logo</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#navigation</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">650px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">20px</span> auto;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-top</span>: <span class="number">2px</span> solid black;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#navigation</span>&gt;<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">list-style-type</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">padding-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#navigation</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#navigation</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child&gt;<span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#navigation</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#navigation</span>~<span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">20px</span> auto;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;logo&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/icons/w4.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;The Analog Specialists&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;navigation&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;on&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>For Sale<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Repairs<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Contact<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/icons2.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Fender Rhodes, Hohner Clavinet and Wurlizer EP200&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">				We specialize in the sale and repair of classic keyboards, in particular the Fender Rhodes, Wurlizer EP200 and Hohner Clavinet.</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="布局-html"><a href="#布局-html" class="headerlink" title="布局.html"></a>布局.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#page</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">960px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">header</span>, <span class="selector-tag">footer</span>, <span class="selector-id">#main</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">header</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: lightgoldenrodyellow;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#main</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: lightpink;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">footer</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: lightsalmon;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#logo</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">70%</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">nav</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">30%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: lightgray;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">article</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">74%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-right</span>: <span class="number">1%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: lightgreen;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">aside</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">25%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: lightcyan;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 页眉（logo+导航） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;logo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span> <span class="comment">&lt;!--导航--&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 主体（多栏） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span> <span class="comment">&lt;!--侧边栏--&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 页脚（友情链接+版权信息+ICP备案信息） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="JS语法1-html"><a href="#JS语法1-html" class="headerlink" title="JS语法1.html"></a>JS语法1.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  </span></span><br><span class="line"><span class="comment">parseInt(3 / 2) 整除</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">！非</span></span><br><span class="line"><span class="comment">!!str - 布尔</span></span><br><span class="line"><span class="comment">== 不带类型比较</span></span><br><span class="line"><span class="comment">=== 带类型比较</span></span><br><span class="line"><span class="comment">!== 带类型比较</span></span><br><span class="line"><span class="comment">true == 1 不带类型</span></span><br><span class="line"><span class="comment">false == 0 不带类型</span></span><br><span class="line"><span class="comment">&gt;= 不带类型比较（隐式类型比较）</span></span><br><span class="line"><span class="comment">typeof 变量 - 查看类型</span></span><br><span class="line"><span class="comment">MDN web DOC: https://developer.mozilla.org/zh-CN/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// var / let / const</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// JS中的比较运算符带有隐式的类型转换</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// === / !== / &amp;&amp; / || / ! （a=&#x27;1&#x27;,b=1 a==b成立，a===b严格等于不成立）</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 分支结构 - if...else... / switch...case...default..</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 循环结构 - while / for / do...while</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// JS中的数据类型：</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// - 简单数据类型: string / number / boolean / undefined / symbol / null</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// - 复杂数据类型：object</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 检查变量或常量的数据类型可以使用typeof关键字</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> yearStr = <span class="title function_">prompt</span>(<span class="string">&#x27;请输入年份：&#x27;</span>) <span class="comment">/* var 变量；const 常量 */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> year = <span class="built_in">parseInt</span>(yearStr)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &amp;&amp; - and - 短路与运算</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 一对花括号可以构成一个块级作用域 - let定义的变量就是块级作用域变量</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">if</span> (year == yearStr &amp;&amp; year &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// || - or - 短路或运算</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 逻辑运算（短路运算）会产生一个布尔值要么是true要么是false</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> isLeap = (year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span>) || year % <span class="number">400</span> == <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> yesOrNo = isLeap? <span class="string">&#x27;是&#x27;</span> : <span class="string">&#x27;不是&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// ES6语法中的带占位符的字符串</span></span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">alert</span>(<span class="string">`<span class="subst">$&#123;year&#125;</span>年<span class="subst">$&#123;yesOrNo&#125;</span>闰年`</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">alert</span>(<span class="string">&#x27;请输入有效的年份&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// var answer = parseInt(Math.random() * 100 + 1)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// var counter = 0</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// do &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	counter += 1</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	let yourInput = prompt(&#x27;请输入你猜的数字：&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	if (yourInput &gt; answer) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		alert(&#x27;小一点&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	&#125; else if (yourInput &lt; answer) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 			alert(&#x27;大一点&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	&#125; else &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		alert(&#x27;恭喜你猜对了&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	&#125;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125; while (answer != yourInput)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// if (counter &gt; 7) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	alert(&#x27;智商余额不足&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// switch...case...default...</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// var face = parseInt(Math.random() * 6 + 1)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// switch (face) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	case 1: console.log(&#x27;学狗叫&#x27;); break</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	case 2: console.log(&#x27;真心话&#x27;); break</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	case 3: console.log(&#x27;大冒险&#x27;); break</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	default: console.log(&#x27;喝一杯&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="JS语法2-html"><a href="#JS语法2-html" class="headerlink" title="JS语法2.html"></a>JS语法2.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.red</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>:<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>:<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-radius</span>:<span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background</span>: red;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.blue</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>:<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>:<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-radius</span>:<span class="number">50%</span>; <span class="comment">/* 圆形边框 */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background</span>: blue;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">display</span>: inline-block; <span class="comment">/* 横向排列 */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-left</span>: <span class="number">10px</span>; <span class="comment">/* 元素间距 */</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 浏览器中的JS包含以下三洋内容 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- ECMAScript - ES6 - 核心语法 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- BOM - 浏览器对象模型 - window --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- DOM - 文档对象模型 - document --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 双色球 - 6个红色球+1个蓝色球</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 红色球1-33不重复选出6个号码</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 蓝色球1-16选出1个号码</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">/* var str = `hello, world</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			goodbye world` */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">outputBall</span>(<span class="params">num, color=<span class="string">&#x27;red&#x27;</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">`&lt;p class=&quot;<span class="subst">$&#123;color&#125;</span>&quot;&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (num &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;0&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">document</span>.<span class="title function_">write</span>(num)</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;/p&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 方法一</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// var redBalls = []</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// for (let i = 0; i &lt; 33; i += 1) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	redBalls.push(i + 1) /* 增加元素 */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// var selectedBalls = []</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// for (let i = 1; i &lt;= 6; i += 1) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	// 产生随机的下标</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	let index = parseInt(Math.random() * redBalls.length)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	// 通过下标获取红色球放到数组中</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	selectedBalls.push(redBalls[index])</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	// 删除数组中指定位置的元素</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	redBalls.splice(index, 1)  /*splice(定位, 元素个数, 替换元素) 插入/删除/替换元素 */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125; </span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> selectedBalls = []</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">while</span> (selectedBalls.<span class="property">length</span> &lt; <span class="number">6</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> num = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">33</span> + <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (selectedBalls.<span class="title function_">indexOf</span>(num) == -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					selectedBalls.<span class="title function_">push</span>(num)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 给红色球排序 - 需要传入一个匿名函数给出比较元素的规则</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// ES6开始支持使用箭头函数（Lambda函数 - 匿名函数）</span></span></span><br><span class="line"><span class="language-javascript">			selectedBalls.<span class="title function_">sort</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y) <span class="comment">/* (function (x, y) &#123; return x - y &#125;) */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// for (let i = 0; i &lt; selectedBalls.length; i += 1) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	let num = selectedBalls[i]</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	// document - DOM - 文档对象模型</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	// document.write(`&lt;p class=&quot;red&quot;&gt;$&#123;num&#125;&lt;/p&gt;`) /* ``(~键) 字符串占位符可折行*/</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	outputBall(num)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">			selectedBalls.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="title function_">outputBall</span>(item)) </span></span><br><span class="line"><span class="language-javascript">			<span class="comment">/* function(item) &#123; outputBall(item) &#125; */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">let</span> num = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span> + <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// document.write(`&lt;p class=&quot;blue&quot;&gt;$&#123;num&#125;&lt;/p&gt;`)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">outputBall</span>(num, <span class="string">&#x27;blue&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="prctice1O-html"><a href="#prctice1O-html" class="headerlink" title="prctice1O.html"></a>prctice1O.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>乘法口诀表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">730px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">`&lt;table&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i += <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;tr&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= i; j += <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;td&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">`<span class="subst">$&#123;j&#125;</span>&amp;times;<span class="subst">$&#123;i&#125;</span>=<span class="subst">$&#123;j * i&#125;</span>`</span>) <span class="comment">/*&amp;times表示乘号*/</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;/td&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;/tr&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">`&lt;/table&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="获取页面元素的方法-html"><a href="#获取页面元素的方法-html" class="headerlink" title="获取页面元素的方法.html"></a>获取页面元素的方法.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>轮播广告<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#adv</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/* 居中 */</span></span></span><br><span class="line"><span class="language-css">			&#125; </span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;adv&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/163057jyrg229qerdeciod.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 获取img标签</span></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#adv&gt;img&#x27;</span>) <span class="comment">/* ！！传样式表选择器, 返回HTMLElement */</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> imageNames = [<span class="string">&#x27;53a11f5bc8ae6.jpg&#x27;</span>, <span class="string">&#x27;500e42eeab120.jpg&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">			<span class="string">&#x27;163057jyrg229qerdeciod.jpg&#x27;</span>, <span class="string">&#x27;443121.jpg&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> imageIndex = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">switchImage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				imageIndex += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">				imageIndex %= imageNames.<span class="property">length</span></span></span><br><span class="line"><span class="language-javascript">				img.<span class="property">src</span> = <span class="string">&#x27;../images/&#x27;</span> + imageNames[imageIndex]</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> timerId = <span class="built_in">setInterval</span>(switchImage, <span class="number">2000</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const img = document.querySelectorAll(&#x27;#adv&gt;img&#x27;) --&gt;NodeList返回列表</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			firstChild / lastChild 会获取到文本节点（回车）/ children[i] 不会获取到文本节点，直接取到标签节点 -- 获取子节点</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			parentNode -- 获取父节点</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			previousSibling / nextSibling 会获取到文本节点（回车）/ previousElementSibling / nextElementSibling 不会获取到文本节点，直接取到标签节点  -- 获取相邻兄弟节点</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			const img = document.getElementById(&#x27;adv&#x27;).children[0]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			alert(img.src)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			*/</span></span></span><br><span class="line"><span class="language-javascript">		    <span class="comment">// document.getElementsByClassName(&#x27;类名&#x27;) --&gt;返回列表</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const img = document.getElementsByTag(&#x27;img&#x27;)[0]</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const divList = document.getElementsByTagName(&#x27;div&#x27;) --&gt;传标签名，返回列表</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const advImage = document.getElementById(&#x27;advImage&#x27;) /* ！！标识 */</span></span></span><br><span class="line"><span class="language-javascript">			img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timerId))</span></span><br><span class="line"><span class="language-javascript">			img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> &#123; timerId= <span class="built_in">setInterval</span>(switchImage, <span class="number">2000</span>) &#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="problem-of-float-html"><a href="#problem-of-float-html" class="headerlink" title="problem_of_float.html"></a>problem_of_float.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Parent Float - Problem<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">752px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: Arial, Verdana, sans-serif;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: <span class="number">#665544</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="comment">/* CSS hack */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 问题：因为p标签的浮动边框会变成一条线 */</span></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#665544</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">overflow</span>: auto; <span class="comment">/* 自适应边框*/</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">230px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			半导体产业也是一个高科技的产业，有很高的技术要求，况且在互联网的时代，半导体更是处于缺一不可的存在。在这个领域当中，尹志尧自己自创了60多项的技术专利，也被一致认为是硅谷最成功的中国人之一。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			在尹志尧创办中微半导体公司的时候，在创办前期就需要每年集资5000万美元来研发科学技术的问题，这对于很多人来说是一个天文数字，但半导体产业毕竟是一个高端的行业，如果不进行科研的话，那么就可能被时代所淘汰。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			即使在这么大的资金压力之下，尹志尧并没有害怕，而是选择了找投资方，来加大科研的力度。终于，在尹志尧的坚持下，中微半导体公司成功地研究出了一系列等离子刻蚀设备，并且离建造国际先进水平的半导体产业又更近一步。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;clear&quot;</span>&gt;</span></span><br><span class="line">			但这个时候，美国政府就开始把针对的目光投向了尹志尧的中微半导体公司，还纵容美国各大半导体公司依次对尹志尧的中微半导体公司发起了法律诉讼，想要把中国的半导体产业扼杀在摇篮里。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			面对美国政府的限制，尹志尧的中微半导体公司也做好了一切的准备，尹志尧已经在国内外总共申请了1200多项半导体相关的专利，而且大部分是具有创新意识的发明专利，这一举措有效的保护了他们的知识产权，也让美国人意想不到。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			面对美国政府的限制，尹志尧的中微半导体公司也做好了一切的准备，尹志尧已经在国内外总共申请了1200多项半导体相关的专利，而且大部分是具有创新意识的发明专利，这一举措有效的保护了他们的知识产权，也让美国人意想不到。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			半导体产业也是一个高科技的产业，有很高的技术要求，况且在互联网的时代，半导体更是处于缺一不可的存在。在这个领域当中，尹志尧自己自创了60多项的技术专利，也被一致认为是硅谷最成功的中国人之一。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			在尹志尧创办中微半导体公司的时候，在创办前期就需要每年集资5000万美元来研发科学技术的问题，这对于很多人来说是一个天文数字，但半导体产业毕竟是一个高端的行业，如果不进行科研的话，那么就可能被时代所淘汰。</span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	   <span class="comment">&lt;!-- &lt;div style=&quot;clear: both;&quot;&gt;&lt;/div&gt; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="article-html"><a href="#article-html" class="headerlink" title="article.html"></a>article.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">40px</span> <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#adv</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: yellow;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">right</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="comment">/* position属性的取值 */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 1.static - 静态定位 - 正常的文档流 */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 2.relative - 相对定位 - 相对于原来正常的位置 */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 3.absolute - 绝对定位 - 相对于父元素来设置位置 */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* 4.fixed - 固定定位 - 相对于浏览器窗口来设置位置 */</span></span></span><br><span class="line"><span class="language-css">			<span class="comment">/* .p2 &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				position: fixed;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				left: 50px;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				top: 20px;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">			&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">			*/</span></span></span><br><span class="line"><span class="language-css">		</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;adv&quot;</span>&gt;</span></span><br><span class="line">			此广告位招租</span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;closeBtn&quot;</span> <span class="attr">style</span>=<span class="string">&quot;float: right;&quot;</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		半导体产业也是一个高科技的产业，有很高的技术要求，况且在互联网的时代，半导体更是处于缺一不可的存在。在这个领域当中，尹志尧自己自创了60多项的技术专利，也被一致认为是硅谷最成功的中国人之一。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span></span><br><span class="line">		在尹志尧创办中微半导体公司的时候，在创办前期就需要每年集资5000万美元来研发科学技术的问题，这对于很多人来说是一个天文数字，但半导体产业毕竟是一个高端的行业，如果不进行科研的话，那么就可能被时代所淘汰。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		即使在这么大的资金压力之下，尹志尧并没有害怕，而是选择了找投资方，来加大科研的力度。终于，在尹志尧的坚持下，中微半导体公司成功地研究出了一系列等离子刻蚀设备，并且离建造国际先进水平的半导体产业又更近一步。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		即使在这么大的资金压力之下，尹志尧并没有害怕，而是选择了找投资方，来加大科研的力度。终于，在尹志尧的坚持下，中微半导体公司成功地研究出了一系列等离子刻蚀设备，并且离建造国际先进水平的半导体产业又更近一步。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		即使在这么大的资金压力之下，尹志尧并没有害怕，而是选择了找投资方，来加大科研的力度。终于，在尹志尧的坚持下，中微半导体公司成功地研究出了一系列等离子刻蚀设备，并且离建造国际先进水平的半导体产业又更近一步。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		即使在这么大的资金压力之下，尹志尧并没有害怕，而是选择了找投资方，来加大科研的力度。终于，在尹志尧的坚持下，中微半导体公司成功地研究出了一系列等离子刻蚀设备，并且离建造国际先进水平的半导体产业又更近一步。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		但这个时候，美国政府就开始把针对的目光投向了尹志尧的中微半导体公司，还纵容美国各大半导体公司依次对尹志尧的中微半导体公司发起了法律诉讼，想要把中国的半导体产业扼杀在摇篮里。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		面对美国政府的限制，尹志尧的中微半导体公司也做好了一切的准备，尹志尧已经在国内外总共申请了1200多项半导体相关的专利，而且大部分是具有创新意识的发明专利，这一举措有效的保护了他们的知识产权，也让美国人意想不到。</span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> closeBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;closeBtn&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			closeBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> advDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;adv&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				advDiv.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="practise1-html"><a href="#practise1-html" class="headerlink" title="practise1.html"></a>practise1.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.a1</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* margin-left: 10px; */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">padding-left</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> c = <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">while</span> (c &lt;= <span class="number">9</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			    <span class="keyword">var</span> d = <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">			    <span class="keyword">while</span> (d &lt;= c) &#123;</span></span><br><span class="line"><span class="language-javascript">			        <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">`&lt;p class=&#x27;a1&#x27;&gt;<span class="subst">$&#123;c&#125;</span>x<span class="subst">$&#123;d&#125;</span>=<span class="subst">$&#123;c * d&#125;</span>&lt;/p&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">			        d += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">`&lt;p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">				&lt;/p&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">				c += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="修改标签内容-周期性执行函数-html"><a href="#修改标签内容-周期性执行函数-html" class="headerlink" title="修改标签内容+周期性执行函数.html"></a>修改标签内容+周期性执行函数.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#clock</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">240px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;clock&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> clockDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clock&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> weekdays = [<span class="string">&#x27;日&#x27;</span>, <span class="string">&#x27;一&#x27;</span>, <span class="string">&#x27;二&#x27;</span>, <span class="string">&#x27;三&#x27;</span>, <span class="string">&#x27;四&#x27;</span>, <span class="string">&#x27;五&#x27;</span>, <span class="string">&#x27;六&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">showClock</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> year = now.<span class="title function_">getFullYear</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> month = now.<span class="title function_">getMonth</span>() + <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> date = now.<span class="title function_">getDate</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> hour = now.<span class="title function_">getHours</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> min = now.<span class="title function_">getMinutes</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> sec = now.<span class="title function_">getSeconds</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> day = now.<span class="title function_">getDay</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> fullStr = <span class="string">`<span class="subst">$&#123;year&#125;</span>年<span class="subst">$&#123;month&#125;</span>月<span class="subst">$&#123;date&#125;</span>日 <span class="subst">$&#123;hour&#125;</span>:<span class="subst">$&#123;min&#125;</span>:<span class="subst">$&#123;sec&#125;</span> 星期<span class="subst">$&#123;weekdays[day]&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// alert(fullStr)</span></span></span><br><span class="line"><span class="language-javascript">				clockDiv.<span class="property">textContent</span> = fullStr <span class="comment">//修改文本内容</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">showClock</span>()</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">window</span>.<span class="built_in">setInterval</span>(showClock, <span class="number">1000</span>) <span class="comment">// 计时器，每间隔一秒执行一次</span></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="定义类-创建对象-html"><a href="#定义类-创建对象-html" class="headerlink" title="定义类+创建对象.html"></a>定义类+创建对象.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				    <span class="variable language_">this</span>.<span class="property">name</span> = name</span></span><br><span class="line"><span class="language-javascript">				    <span class="variable language_">this</span>.<span class="property">age</span> = age</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">eat</span>(<span class="params">food</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在吃<span class="subst">$&#123;food&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">watchAv</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">age</span> &lt; <span class="number">18</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;只能看《熊出没》&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;少儿不宜&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 构造器函数</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			function Person(name, age) &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				this.name = name</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				this.age = age</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			Person.prototype.eat = function(food) &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				alert(this.name + &#x27;正在吃&#x27; + food)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			Person.prototype.watchAv = function() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				if (this.age &lt; 18) &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">					alert(this.name + &#x27;只能看《熊出没》&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				&#125; else &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">					alert(this.name + &#x27;少儿不宜&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			*/</span></span></span><br><span class="line"><span class="language-javascript">		   </span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;luo&#x27;</span>, <span class="number">39</span>)</span></span><br><span class="line"><span class="language-javascript">			person.<span class="title function_">eat</span>(<span class="string">&#x27;蛋炒饭&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">let</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;chui&#x27;</span>, <span class="number">15</span>)</span></span><br><span class="line"><span class="language-javascript">			person2.<span class="title function_">watchAv</span>()</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// JSON - JavaScript Object Notation</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// JavaScript对象表达式 - 创建对象的字面量语法</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			const person = &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				name: &#x27;luo&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				age: 39,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				eat: function(food) &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">					alert(this.name + &#x27;正在吃&#x27; + food)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				&#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				watchAv: function() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">					if (this.age &lt; 18) &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">						alert(this.name + &#x27;只能看《熊出没》&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">					&#125; else &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">						alert(this.name + &#x27;少儿不宜&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">					&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">				&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			// person.age = 15</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			person.eat(&#x27;蛋炒饭&#x27;)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			person.watchAv()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">			*/</span></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="通过循环为多个元素绑定事件回调函数-html"><a href="#通过循环为多个元素绑定事件回调函数-html" class="headerlink" title="通过循环为多个元素绑定事件回调函数.html"></a>通过循环为多个元素绑定事件回调函数.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>给多个元素绑定事件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#buttons</span>&gt;<span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font</span>: <span class="number">22px</span>/<span class="number">40px</span> Arial;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;buttons&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>草莓<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>蓝莓<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>榴莲<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>西瓜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>芒果<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">disabled</span>&gt;</span>柠檬<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> allButtons = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#buttons&gt;button&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			allButtons.<span class="title function_">forEach</span>(<span class="function"><span class="params">button</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				button.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> checkbox = button.<span class="property">firstChild</span></span></span><br><span class="line"><span class="language-javascript">					checkbox.<span class="property">checked</span> = !checkbox.<span class="property">checked</span></span></span><br><span class="line"><span class="language-javascript">					button.<span class="property">style</span>.<span class="property">backgroundColor</span> = </span></span><br><span class="line"><span class="language-javascript">						checkbox.<span class="property">checked</span>? <span class="string">&#x27;green&#x27;</span> : <span class="string">&#x27;red&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// textcontent 修改标签文字内容 / innerHTML 修改标签内容</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// image.src / image.title / image.style / checkbox.checked 修改标签属性</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// ES6的做法：</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// for (let i = 0; i &lt; allButtons.length; i += 1) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	// 闭包(closure) - 将一个块级作用域的变量生命周期延长至全局</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	allButtons[i].addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		let checkbox = allButtons[i].firstChild</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		checkbox.checked = !checkbox.checked</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		allButtons[i].style.backgroundColor = </span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 			checkbox.checked? &#x27;green&#x27; : &#x27;red&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	&#125;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// ES5的做法：</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// for (var i = 0; i &lt; allButtons.length; i += 1) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	allButtons[i].addEventListener(&#x27;click&#x27;, function(evt) &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		// 我们知道事件发生时要做什么但我们不知道事件什么时候发生</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		// 在这种情况下就需要放置一个回调函数（callback function）</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		// 绑定事件时传入的函数通常我们称之为回调函数(evt)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		// 当浏览器执行该回调函数时会传入一个代表事件的对象</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		// 通过事件对象的target属性就可以获取到事件源（谁引发了事件）(evt.target)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		var checkbox = evt.target.firstChild</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		checkbox.checked = !checkbox.checked</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		evt.target.style.backgroundColor = </span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 			checkbox.checked? &#x27;green&#x27; : &#x27;red&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	&#125;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="动态列表效果-html"><a href="#动态列表效果-html" class="headerlink" title="动态列表效果.html"></a>动态列表效果.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			* &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>&gt;<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: cadetblue;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">2px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">right</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>~<span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>~<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid darkgray;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>~<span class="selector-tag">input</span><span class="selector-attr">[type=button]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">vertical-align</span>: bottom;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;fruits&quot;</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 将a标签的href属性修改为javascript:void(0)可以阻止a标签默认的行为(如删除标签防止还原) --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>苹果<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>香蕉<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>火龙果<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>西瓜<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;ok&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确定&quot;</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;script src=&quot;../js/动态列表效果.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">addListItem</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> name = input.<span class="property">value</span>.<span class="title function_">trim</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (name) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 创建标签用document对象的createElement方法</span></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 可以通过textContent或innerHTML属性来修改标签的内容</span></span></span><br><span class="line"><span class="language-javascript">					li.<span class="property">innerHTML</span> = name</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					a.<span class="property">innerHTML</span> = <span class="string">&#x27;&amp;times;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">					a.<span class="property">href</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">					a.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, removeListItem)</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 通过父标签的appendChild方法可以将子标签加到父标签最后面</span></span></span><br><span class="line"><span class="language-javascript">					li.<span class="title function_">appendChild</span>(a)</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 通过父标签的insertBefore方法可以将子标签加到指定的位置</span></span></span><br><span class="line"><span class="language-javascript">					ul.<span class="title function_">insertBefore</span>(li, ul.<span class="property">lastChild</span>)</span></span><br><span class="line"><span class="language-javascript">					input.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span> <span class="comment">// 输入完成后输入框清空</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 标签的focus方法可以让标签获得焦点</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 标签的blur方法可以让标签失去焦点</span></span></span><br><span class="line"><span class="language-javascript">					input.<span class="title function_">focus</span>()</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">removeListItem</span>(<span class="params">evt</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// evt.stopPropagation()</span></span></span><br><span class="line"><span class="language-javascript">				evt.<span class="title function_">preventDefault</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 通过元素获取父元素 - parentNode</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 通过元素获取子元素 - children / firstElementChild / lastElementChild</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 通过元素获取兄弟元素 - previousElementSibling / nextElementSibling</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> li = evt.<span class="property">target</span>.<span class="property">parentNode</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 通过父元素的removeChild方法可以删除指定的子元素</span></span></span><br><span class="line"><span class="language-javascript">				ul.<span class="title function_">removeChild</span>(li)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#fruits&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> input = ul.<span class="property">nextElementSibling</span></span></span><br><span class="line"><span class="language-javascript">			input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keypress&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> code = evt.<span class="property">keyCode</span> || evt.<span class="property">which</span> <span class="comment">// 火狐</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (code == <span class="number">13</span>) &#123;  <span class="comment">// 回车键keycode=13</span></span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">addListItem</span>()</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> ok = input.<span class="property">nextElementSibling</span></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const ul = document.querySelector(&#x27;#fruits&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const input = document.querySelector(&#x27;#fruits+input&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// const ok = document.querySelector(&#x27;#ok&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			ok.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">addListItem</span>()</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> anchors = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#fruits&gt;li&gt;a&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; anchors.<span class="property">length</span>; i += <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				anchors[i].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 事件对象的preventDefault方法可以阻止事件的默认行为（如事件触发时页面自动刷新）</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 同 &lt;a href=&quot;javascript:void(0)&quot;&gt;</span></span></span><br><span class="line"><span class="language-javascript">					evt.<span class="title function_">preventDefault</span>()</span></span><br><span class="line"><span class="language-javascript">					ul.<span class="title function_">removeChild</span>(anchors[i].<span class="property">parentNode</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 通过数组的forEach循环为每个a标签绑定点击事件</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// anchors.forEach(delAnchor =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	delAnchor.addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		// 通过父标签的removeChild方法可以删除子标签</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 		ul.removeChild(delAnchor.parentNode)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 	&#125;)</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="引入和使用jQuery-html"><a href="#引入和使用jQuery-html" class="headerlink" title="引入和使用jQuery.html"></a>引入和使用jQuery.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* border: 730px; */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* margin: 0 auto; */</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">td</span>, <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;data&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">caption</span>&gt;</span>数据统计表<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>身高<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>体重<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>Item5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;buttons&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;pretty&quot;</span>&gt;</span>隔行换色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;clear&quot;</span>&gt;</span>清除数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;remove&quot;</span>&gt;</span>删除一行<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;hide&quot;</span>&gt;</span>表格淡出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 引入jQuery --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 在网站点击复制标签，然后复制到本页，使用在线js --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// alert($) 检查jQuery是否导入成功 $ == jQuery</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// $(&#x27;选择器&#x27;) --&gt; jQuery对象 --&gt; 封装了很多方法</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// one点击一次就失效，on绑定事件，off移除事件</span></span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&#x27;#pretty&#x27;</span>).<span class="title function_">one</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#data&gt;tbody&gt;tr:odd&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;background-color&#x27;</span>, <span class="string">&#x27;lightgrey&#x27;</span>) <span class="comment">// 获取奇数行（.css传一个参数表示读取当前样式，传第二个表示修改样式）</span></span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#data&gt;tbody&gt;tr:even&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;background-color&#x27;</span>, <span class="string">&#x27;lightseagreen&#x27;</span>) <span class="comment">// 获取偶数行</span></span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&#x27;#clear&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#data&gt;tbody&gt;tr&gt;td&#x27;</span>).<span class="title function_">empty</span>()</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&#x27;#remove&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#data&gt;tbody&gt;tr:last-child&#x27;</span>).<span class="title function_">remove</span>()</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&#x27;#hide&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> title = $(<span class="string">&#x27;#hide&#x27;</span>).<span class="title function_">text</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (title == <span class="string">&#x27;表格淡出&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;#data&#x27;</span>).<span class="title function_">fadeOut</span>(<span class="number">1000</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						$(<span class="string">&#x27;#hide&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;表格淡入&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">				&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;#data&#x27;</span>).<span class="title function_">fadeIn</span>(<span class="number">2000</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						$(<span class="string">&#x27;#hide&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;表格淡出&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="动态列表效果jQuery-html"><a href="#动态列表效果jQuery-html" class="headerlink" title="动态列表效果jQuery.html"></a>动态列表效果jQuery.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			* &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>&gt;<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: cadetblue;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">2px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">right</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>~<span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>~<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid darkgray;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#fruits</span>~<span class="selector-tag">input</span><span class="selector-attr">[type=button]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">vertical-align</span>: bottom;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;fruits&quot;</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 将a标签的href属性修改为javascript:void(0)可以阻止a标签默认的行为 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>苹果<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>香蕉<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>火龙果<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">li</span>&gt;</span>西瓜<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;ok&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;确定&quot;</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;script src=&quot;../js/动态列表效果.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">removeListItem</span>(<span class="params">evt</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 阻止事件的默认行为</span></span></span><br><span class="line"><span class="language-javascript">				evt.<span class="title function_">preventDefault</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// 阻止事件的传播行为</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// evt.stopPropagation()</span></span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// (4)$函数的参数是一个原生的JS对象，返回与原生JS对象对应的jQuery对象</span></span></span><br><span class="line"><span class="language-javascript">				$(evt.<span class="property">target</span>).<span class="title function_">parent</span>().<span class="title function_">remove</span>()</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// +function() &#123; alert(&#x27;hello&#x27;) &#125;() or (function() &#123; alert(&#x27;hello&#x27;) &#125;)() - 即时调用函数</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// $(document).ready(function() &#123; &#125;) / $(function() &#123;&#125;) / $(() =&gt; &#123;&#125;) - 即时调用函数jQuery写法</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// $函数的四种用法：</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// (1)$函数的参数是一个匿名函数或箭头函数，传入的函数是页面加载完成之后要执行的回调函数</span></span></span><br><span class="line"><span class="language-javascript">			$(() =&gt; &#123; </span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// (2)$函数的参数是一个样式表选择器，获取页面元素得到一个jQuery对象(伪数组 - 数组中装的是原生JS对象)</span></span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#fruits&gt;li&gt;a&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, removeListItem)</span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#ok&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> input = $(<span class="string">&#x27;#ok&#x27;</span>).<span class="title function_">prev</span>();</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> name = input.<span class="title function_">val</span>().<span class="title function_">trim</span>()</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (name) &#123;</span></span><br><span class="line"><span class="language-javascript">						$(<span class="string">&#x27;#fruits&#x27;</span>).<span class="title function_">append</span>(</span></span><br><span class="line"><span class="language-javascript">							<span class="comment">// (3)$函数的参数是一个标签字符串，创建一个新的元素并获得对应的jQuery对象</span></span></span><br><span class="line"><span class="language-javascript">							$(<span class="string">&#x27;&lt;li&gt;&#x27;</span>).<span class="title function_">text</span>(name).<span class="title function_">append</span>(</span></span><br><span class="line"><span class="language-javascript">								$(<span class="string">&#x27;&lt;a href=&quot;&quot;&gt;&#x27;</span>).<span class="title function_">html</span>(<span class="string">&#x27;&amp;times;&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, removeListItem)</span></span><br><span class="line"><span class="language-javascript">							)</span></span><br><span class="line"><span class="language-javascript">						)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">					input.<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">focus</span>()</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="原生Ajax请求-html"><a href="#原生Ajax请求-html" class="headerlink" title="原生Ajax请求.html"></a>原生Ajax请求.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  </span></span><br><span class="line"><span class="comment">Ajax = Asynchronous JavaScript and XML</span></span><br><span class="line"><span class="comment">- 异步加载 - 在后台向服务器发起获取数据的请求(非阻塞，不等待，非同时)</span></span><br><span class="line"><span class="comment">- 局部刷新 - dom操作对页面元素进行改变</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: lightseagreen;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: <span class="string">&quot;arial rounded mt bold&quot;</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;load&quot;</span>&gt;</span>加载更多<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;poetry&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> poetry = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#poetry&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> loadBtn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#load&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> url = <span class="string">&#x27;http://api.tianapi.com/txapi/flmj/index?key=843c2619fa9c643f9bcfe0ee2e66b9da&amp;type=春天&amp;num=5&amp;page=&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> page = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">				loadBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					page += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 创建异步请求对象</span></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// open方法的第一个参数是请求类型，第二个参数是请求的URL，第三个参数必须设置为true(异步请求)</span></span></span><br><span class="line"><span class="language-javascript">					xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>, url + page, <span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 绑定事件回调函数，在收到服务器返回的数据后要对页面进行局部刷新</span></span></span><br><span class="line"><span class="language-javascript">					xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;readystatechange&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">if</span> (xhr.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="comment">// alert(xhr.responseText) 查看请求是否成功</span></span></span><br><span class="line"><span class="language-javascript">							<span class="comment">// 将返回的JSON字符串解析成JS的对象</span></span></span><br><span class="line"><span class="language-javascript">							<span class="keyword">let</span> json = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>)</span></span><br><span class="line"><span class="language-javascript">							json.<span class="property">newslist</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">verbo</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">								<span class="comment">// console.log(verbo.content) 查看是否成功获取内容</span></span></span><br><span class="line"><span class="language-javascript">								<span class="keyword">let</span> para = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">								para.<span class="property">innerHTML</span> = verbo.<span class="property">content</span></span></span><br><span class="line"><span class="language-javascript">								poetry.<span class="title function_">insertBefore</span>(para, poetry.<span class="property">firstElementChild</span>)</span></span><br><span class="line"><span class="language-javascript">							&#125;)</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 发送异步请求</span></span></span><br><span class="line"><span class="language-javascript">					xhr.<span class="title function_">send</span>()</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)()</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="jQuery的Ajax请求-html"><a href="#jQuery的Ajax请求-html" class="headerlink" title="jQuery的Ajax请求.html"></a>jQuery的Ajax请求.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: aquamarine;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: <span class="string">&quot;bodoni mt&quot;</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;load&quot;</span>&gt;</span>加载更多<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;poetry&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			$(() =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> url = <span class="string">&#x27;http://api.tianapi.com/txapi/flmj/index&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> page = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#load&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					page += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> data = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;843c2619fa9c643f9bcfe0ee2e66b9da&quot;</span>, <span class="string">&quot;type&quot;</span>: <span class="string">&quot;春天&quot;</span>, <span class="string">&quot;num&quot;</span>: <span class="string">&quot;5&quot;</span>, <span class="string">&quot;page&quot;</span>: page&#125;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// $对象的getJSON方法可以执行异步请求(get请求)获得服务器返回的JSON格式的数据</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 第一个参数是请求的URL(统一资源定位符)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 第二个参数是要发送给服务器的数据(JSON格式)，如果没有数据发给服务器可以省略不写</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 第三个参数是请求成功服务器返回数据之后要执行的回调函数，其参数为服务器返回的内容处理后的JSON</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// $.getJSON(url, data, (json) =&gt; &#123; </span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 	json.newslist.forEach((verbo) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 		// $(&#x27;#poetry&#x27;).append($(&#x27;&lt;p&gt;&#x27;).text(verbo.content))</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 		// attr(&#x27;src&#x27;, &#x27;xxx&#x27;) 添加属性</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 		$(&#x27;#poetry&#x27;).prepend($(&#x27;&lt;p&gt;&#x27;).text(verbo.content).attr(&#x27;class&#x27;, &#x27;a&#x27;)).attr(&#x27;width&#x27;, &#x27;300&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">//							 $(&#x27;&lt;p&gt;&#x27;)表示创建标签			  attr定义属性</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 	&#125;)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">					</span></span><br><span class="line"><span class="language-javascript">					$.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;url&quot;</span>: url,  <span class="comment">// 请求的地址(统一资源定位符)</span></span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;type&quot;</span>: <span class="string">&quot;get&quot;</span>,  <span class="comment">// 请求的方法(get/post/delete/put/patch)</span></span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;data&quot;</span>: data,  <span class="comment">// 发送给服务器的数据</span></span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;dataType&quot;</span>: <span class="string">&quot;json&quot;</span>,  <span class="comment">// 服务器返回的数据类型</span></span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;headers&quot;</span>: &#123;&#125;,  <span class="comment">// 请求头</span></span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;success&quot;</span>: <span class="function">(<span class="params">json</span>) =&gt;</span> &#123;  <span class="comment">// 请求成功后要执行的回调函数</span></span></span><br><span class="line"><span class="language-javascript">							json.<span class="property">newslist</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">verbo</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">								$(<span class="string">&#x27;#poetry&#x27;</span>).<span class="title function_">prepend</span>($(<span class="string">&#x27;&lt;p&gt;&#x27;</span>).<span class="title function_">text</span>(verbo.<span class="property">content</span>).<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;a&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">							&#125;)</span></span><br><span class="line"><span class="language-javascript">						&#125;,</span></span><br><span class="line"><span class="language-javascript">						<span class="string">&quot;error&quot;</span>: <span class="function">(<span class="params">error</span>) =&gt;</span> &#123; <span class="comment">// 请求失败后要执行的回调函数</span></span></span><br><span class="line"><span class="language-javascript">							</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Vue使用入门-html"><a href="#Vue使用入门-html" class="headerlink" title="Vue使用入门.html"></a>Vue使用入门.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment"> 用DOM操作将数据渲染到页面上是非常麻烦的，所以在商业项目中一般不考虑用这种方式</span></span><br><span class="line"><span class="comment"> 前端模块引擎 ---》前端MVC框架 --》Vue.js</span></span><br><span class="line"><span class="comment">  M - Model - 模型（页面上要展示的数据）</span></span><br><span class="line"><span class="comment">  V - View - 视图（呈现给用户看的东西）</span></span><br><span class="line"><span class="comment">  C - Controller - 控制器 - 负责连接模型和视图</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-css">			tbody &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				border-top: 2px solid black;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				border-bottom: 1px solid black;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">			&#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">			*/</span></span></span><br><span class="line"><span class="language-css">		    <span class="selector-id">#page</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#page</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: darkcyan;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: <span class="number">#909399</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/browse/element-ui@2.15.8/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>员工信息表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- stripe 隔行换色 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">				<span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span></span></span><br><span class="line"><span class="tag">			    <span class="attr">:data</span>=<span class="string">&quot;emps&quot;</span></span></span><br><span class="line"><span class="tag">			    <span class="attr">stripe</span> 				</span></span><br><span class="line"><span class="tag">			    <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">prop</span>=<span class="string">&quot;no&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">label</span>=<span class="string">&quot;编号&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">prop</span>=<span class="string">&quot;job&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">label</span>=<span class="string">&quot;职位&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">				  <span class="attr">prop</span>=<span class="string">&quot;sal&quot;</span></span></span><br><span class="line"><span class="tag">				  <span class="attr">label</span>=<span class="string">&quot;工资&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">				  <span class="attr">prop</span>=<span class="string">&quot;comm&quot;</span></span></span><br><span class="line"><span class="tag">				  <span class="attr">label</span>=<span class="string">&quot;补贴&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">				  <span class="attr">prop</span>=<span class="string">&quot;dept.name&quot;</span></span></span><br><span class="line"><span class="tag">				  <span class="attr">label</span>=<span class="string">&quot;所在部门&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">			  <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			&lt;table id=&quot;emp&quot;&gt;</span></span><br><span class="line"><span class="comment">				&lt;thead&gt;</span></span><br><span class="line"><span class="comment">					&lt;tr&gt;</span></span><br><span class="line"><span class="comment">						&lt;th&gt;编号&lt;/th&gt;</span></span><br><span class="line"><span class="comment">						&lt;th&gt;姓名&lt;/th&gt;</span></span><br><span class="line"><span class="comment">						&lt;th&gt;职位&lt;/th&gt;</span></span><br><span class="line"><span class="comment">						&lt;th&gt;工资&lt;/th&gt;</span></span><br><span class="line"><span class="comment">						&lt;th&gt;补贴&lt;/th&gt;</span></span><br><span class="line"><span class="comment">						&lt;th&gt;所在部门&lt;/th&gt;</span></span><br><span class="line"><span class="comment">					&lt;/tr&gt;</span></span><br><span class="line"><span class="comment">				&lt;/thead&gt;</span></span><br><span class="line"><span class="comment">				&lt;tbody&gt;</span></span><br><span class="line"><span class="comment">					&lt;tr v-for=&quot;emp in emps&quot;&gt;</span></span><br><span class="line"><span class="comment">						&lt;td&gt;&#123;&#123; emp.no &#125;&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">						&lt;td&gt;&#123;&#123; emp.name &#125;&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">						&lt;td&gt;&#123;&#123; emp.job &#125;&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">						&lt;td&gt;&#123;&#123; emp.sal &#125;&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">						&lt;td&gt;&#123;&#123; emp.comm &#125;&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">						&lt;td&gt;&#123;&#123; emp.dept.name &#125;&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">					&lt;/tr&gt;</span></span><br><span class="line"><span class="comment">				&lt;/tbody&gt;</span></span><br><span class="line"><span class="comment">			&lt;/table&gt;</span></span><br><span class="line"><span class="comment">			--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;prev&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;prevPage()&quot;</span> &lt;!<span class="attr">--v-bind:href</span>=<span class="string">prev--</span>&gt;</span>&gt;上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;next&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;nextPage()&quot;</span>  &lt;!<span class="attr">--v-bind:href</span>=<span class="string">next--</span>&gt;</span>&gt;下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="comment">&lt;!--v-bind渲染属性--&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/browse/vue@2.6.10/dist/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/browse/element-ui@2.15.8/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">let</span> pageSize = <span class="number">5</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">emps</span>: [],</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">currentPage</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">totalPage</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">loading</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// prev: &#x27;&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// next: &#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="title function_">getEmpData</span>()</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">getEmpData</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">const</span> url = <span class="string">&#x27;需要传入的JSON的URL:http://xxxx/?page=$&#123;this.currentPage&#125;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">fetch</span>(url, &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="attr">headers</span>: &#123; <span class="string">&quot;token&quot;</span>: <span class="string">&quot;xxxxx...&quot;</span> &#125; <span class="comment">/* 进入该URL所需的令牌 */</span></span></span><br><span class="line"><span class="language-javascript">						&#125;)</span></span><br><span class="line"><span class="language-javascript">							.<span class="title function_">then</span>(<span class="function">(<span class="params">resp</span>) =&gt;</span> resp.<span class="title function_">json</span>()) <span class="comment">/* &#123;return resp.json()&#125; */</span></span></span><br><span class="line"><span class="language-javascript">							.<span class="title function_">then</span>(<span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">								<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">									<span class="variable language_">this</span>.<span class="property">emps</span> = json.<span class="property">results</span></span></span><br><span class="line"><span class="language-javascript">									<span class="variable language_">this</span>.<span class="property">totalPage</span> = <span class="built_in">parseInt</span>((json.<span class="property">count</span> - <span class="number">1</span>) / pageSize) + <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">									<span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">								&#125;, <span class="number">500</span>)</span></span><br><span class="line"><span class="language-javascript">							&#125;)</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">prevPage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentPage</span> &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">this</span>.<span class="property">currentPage</span> -= <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">this</span>.<span class="title function_">getEmpData</span>()</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">nextPage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentPage</span> &lt; <span class="variable language_">this</span>.<span class="property">totalPage</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">this</span>.<span class="property">currentPage</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">this</span>.<span class="title function_">getEmpData</span>()</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Vue-Element-UI框架-html"><a href="#Vue-Element-UI框架-html" class="headerlink" title="Vue_Element_UI框架.html"></a>Vue_Element_UI框架.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">1.引入样式</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;&gt;</span></span><br><span class="line"><span class="comment">2.引入组件库</span></span><br><span class="line"><span class="comment">&lt;script src=&quot;https://unpkg.com/element-ui/lib/index.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">https://element.eleme.cn/#/zh-CN/component/table</span></span><br><span class="line"><span class="comment">https://unpkg.com/browse/vue@2.6.10/dist/vue.min.js</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/browse/element-ui@2.15.8/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">			    <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span></span></span><br><span class="line"><span class="tag">			    <span class="attr">stripe</span></span></span><br><span class="line"><span class="tag">			    <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">prop</span>=<span class="string">&quot;date&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">label</span>=<span class="string">&quot;日期&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span></span></span><br><span class="line"><span class="tag">			      <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">			  <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;unpkg.com/react@16.7.0/umd/react.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/browse/element-ui@2.15.8/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">tableData</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-03&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-02&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-04&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-01&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-08&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-06&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">date</span>: <span class="string">&#x27;2016-05-07&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">name</span>: <span class="string">&#x27;王小虎&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				          <span class="attr">address</span>: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				        &#125;]</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Echarts的使用-html"><a href="#Echarts的使用-html" class="headerlink" title="Echarts的使用.html"></a>Echarts的使用.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">https://echarts.apache.org/zh/tutorial.html#5%20%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%20ECharts</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">https://www.bootcdn.cn/echarts/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">https://echarts.apache.org/handbook/zh/get-started/</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ECharts<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入 echarts.js --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/echarts/5.1.1/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px;height:400px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 基于准备好的dom，初始化echarts实例</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 指定图表的配置项和数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> option = &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">color</span>: [<span class="string">&#x27;#80FFA5&#x27;</span>, <span class="string">&#x27;#00DDFF&#x27;</span>, <span class="string">&#x27;#37A2FF&#x27;</span>, <span class="string">&#x27;#FF0087&#x27;</span>, <span class="string">&#x27;#FFBF00&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">text</span>: <span class="string">&#x27;Gradient Stacked Area Chart&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">axisPointer</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;cross&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">label</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;#6a7985&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: [<span class="string">&#x27;Line 1&#x27;</span>, <span class="string">&#x27;Line 2&#x27;</span>, <span class="string">&#x27;Line 3&#x27;</span>, <span class="string">&#x27;Line 4&#x27;</span>, <span class="string">&#x27;Line 5&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">toolbox</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">feature</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">saveAsImage</span>: &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">grid</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">left</span>: <span class="string">&#x27;3%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">right</span>: <span class="string">&#x27;4%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">bottom</span>: <span class="string">&#x27;3%&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">containLabel</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">xAxis</span>: [</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">boundaryGap</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [<span class="string">&#x27;Mon&#x27;</span>, <span class="string">&#x27;Tue&#x27;</span>, <span class="string">&#x27;Wed&#x27;</span>, <span class="string">&#x27;Thu&#x27;</span>, <span class="string">&#x27;Fri&#x27;</span>, <span class="string">&#x27;Sat&#x27;</span>, <span class="string">&#x27;Sun&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  ],</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">yAxis</span>: [</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  ],</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;Line 1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">stack</span>: <span class="string">&#x27;Total&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">smooth</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">showSymbol</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">areaStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">opacity</span>: <span class="number">0.8</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(128, 255, 165)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(1, 191, 236)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        ])</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: <span class="string">&#x27;series&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [<span class="number">140</span>, <span class="number">232</span>, <span class="number">101</span>, <span class="number">264</span>, <span class="number">90</span>, <span class="number">340</span>, <span class="number">250</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;Line 2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">stack</span>: <span class="string">&#x27;Total&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">smooth</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">showSymbol</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">areaStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">opacity</span>: <span class="number">0.8</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(0, 221, 255)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(77, 119, 255)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        ])</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: <span class="string">&#x27;series&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [<span class="number">120</span>, <span class="number">282</span>, <span class="number">111</span>, <span class="number">234</span>, <span class="number">220</span>, <span class="number">340</span>, <span class="number">310</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;Line 3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">stack</span>: <span class="string">&#x27;Total&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">smooth</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">showSymbol</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">areaStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">opacity</span>: <span class="number">0.8</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(55, 162, 255)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(116, 21, 219)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        ])</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: <span class="string">&#x27;series&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [<span class="number">320</span>, <span class="number">132</span>, <span class="number">201</span>, <span class="number">334</span>, <span class="number">190</span>, <span class="number">130</span>, <span class="number">220</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;Line 4&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">stack</span>: <span class="string">&#x27;Total&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">smooth</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">showSymbol</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">areaStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">opacity</span>: <span class="number">0.8</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(255, 0, 135)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(135, 0, 157)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        ])</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: <span class="string">&#x27;series&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [<span class="number">220</span>, <span class="number">402</span>, <span class="number">231</span>, <span class="number">134</span>, <span class="number">190</span>, <span class="number">230</span>, <span class="number">120</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;Line 5&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">stack</span>: <span class="string">&#x27;Total&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">smooth</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lineStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">showSymbol</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">label</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">position</span>: <span class="string">&#x27;top&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">areaStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">opacity</span>: <span class="number">0.8</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, [</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(255, 191, 0)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">color</span>: <span class="string">&#x27;rgb(224, 62, 76)&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        ])</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: <span class="string">&#x27;series&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: [<span class="number">220</span>, <span class="number">302</span>, <span class="number">181</span>, <span class="number">234</span>, <span class="number">210</span>, <span class="number">290</span>, <span class="number">150</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  ]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">/*option = &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            title: &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                text: &#x27;ECharts 入门示例&#x27;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            tooltip: &#123;&#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            legend: &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                data:[&#x27;销量&#x27;]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            xAxis: &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            yAxis: &#123;&#125;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            series: [&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                name: &#x27;销量&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                type: &#x27;bar&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                data: [5, 20, 36, 10, 10, 20]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            &#125;]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 使用刚指定的配置项和数据显示图表。</span></span></span><br><span class="line"><span class="language-javascript">        myChart.<span class="title function_">setOption</span>(option);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="bootstraptest-html"><a href="#bootstraptest-html" class="headerlink" title="bootstraptest.html"></a>bootstraptest.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-3 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;140x140&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.ibootstrap.cn/lorempixel.com/140/140/default.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;img-circle&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-9 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">						h3. 这是一套可视化布局系统.</span><br><span class="line">					<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-tabs&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown pull-right&quot;</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span>&gt;</span>下拉<span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>设置栏目<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>更多设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>分割线<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel slide&quot;</span> <span class="attr">id</span>=<span class="string">&quot;carousel-449328&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;carousel-indicators&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;0&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-449328&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-449328&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;2&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-449328&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-inner&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.ibootstrap.cn/lorempixel.com/1600/500/sports/1/default.jpg&quot;</span> /&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">										First Thumbnail label</span><br><span class="line">									<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">										Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</span><br><span class="line">									<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.ibootstrap.cn/lorempixel.com/1600/500/sports/2/default.jpg&quot;</span> /&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">										Second Thumbnail label</span><br><span class="line">									<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">										Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</span><br><span class="line">									<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.ibootstrap.cn/lorempixel.com/1600/500/sports/3/default.jpg&quot;</span> /&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">										Third Thumbnail label</span><br><span class="line">									<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">										Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</span><br><span class="line">									<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;left carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-449328&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;prev&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;right carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-449328&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;next&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="bootstrap-html"><a href="#bootstrap-html" class="headerlink" title="bootstrap.html"></a>bootstrap.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">www.bootcss.com</span></span><br><span class="line"><span class="comment">https://www.bootcss.com/p/layoutit/#</span></span><br><span class="line"><span class="comment">http://www.ibootstrap.cn/</span></span><br><span class="line"><span class="comment">https://www.bootcdn.cn/</span></span><br><span class="line"><span class="comment">https://www.bootcdn.cn/twitter-bootstrap/3.0.1/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-3 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;140x140&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../images/163057jyrg229qerdeciod.jpg&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-9 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">						h3. 这是一套可视化布局系统.</span><br><span class="line">					<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-tabs&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown pull-right&quot;</span>&gt;</span></span><br><span class="line">							 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span>&gt;</span>下拉<span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>设置栏目<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>更多设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">									 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>分割线<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel slide&quot;</span> <span class="attr">id</span>=<span class="string">&quot;carousel-570598&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;carousel-indicators&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;0&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-570598&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-570598&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">li</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;2&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#carousel-570598&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-inner&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../images/443121.jpg&quot;</span> /&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">										First Thumbnail label</span><br><span class="line">									<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">										Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</span><br><span class="line">									<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../images/446213.jpg&quot;</span> /&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">										Second Thumbnail label</span><br><span class="line">									<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">										Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</span><br><span class="line">									<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../images/icons2.jpg&quot;</span> /&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-caption&quot;</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><br><span class="line">										Third Thumbnail label</span><br><span class="line">									<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">										Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</span><br><span class="line">									<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;left carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-570598&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;prev&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;right carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#carousel-570598&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;next&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.0.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Practice周公解梦O-html"><a href="#Practice周公解梦O-html" class="headerlink" title="Practice周公解梦O.html"></a>Practice周公解梦O.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/* 内容居中 */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">padding-top</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#container</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#keyword</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid gray;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#search</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">vertical-align</span>: bottom;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#result</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin</span>: <span class="number">10px</span> auto; <span class="comment">/* 内容居中 */</span></span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入关键词&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;search&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;查询&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;#search&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> keyword = $(<span class="string">&quot;#keyword&quot;</span>).<span class="title function_">val</span>().<span class="title function_">trim</span>()</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (keyword.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">var</span> url = <span class="string">&#x27;http://api.tianapi.com/txapi/dream/index&#x27;</span></span></span><br><span class="line"><span class="language-javascript">						$.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;url&quot;</span>: url,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;type&quot;</span>: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;data&quot;</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;key&quot;</span>: <span class="string">&quot;843c2619fa9c643f9bcfe0ee2e66b9da&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;num&quot;</span>: <span class="string">&quot;5&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;word&quot;</span>: keyword,</span></span><br><span class="line"><span class="language-javascript">							&#125;,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;dataType&quot;</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;success&quot;</span>: <span class="keyword">function</span>(<span class="params">jsonObj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">								<span class="keyword">if</span> (jsonObj.<span class="property">code</span> == <span class="number">250</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">									$(<span class="string">&quot;#result&quot;</span>).<span class="title function_">text</span>(jsonObj.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">								&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">									$(<span class="string">&quot;#result&quot;</span>).<span class="title function_">html</span>(jsonObj.<span class="property">newslist</span>[<span class="number">0</span>].<span class="property">result</span>);</span></span><br><span class="line"><span class="language-javascript">								&#125;</span></span><br><span class="line"><span class="language-javascript">							&#125;</span></span><br><span class="line"><span class="language-javascript">						&#125;)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="jQuery的Ajax请求-Practice周公解梦-html"><a href="#jQuery的Ajax请求-Practice周公解梦-html" class="headerlink" title="jQuery的Ajax请求 - Practice周公解梦.html"></a>jQuery的Ajax请求 - Practice周公解梦.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>周公解梦<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.a</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: aquamarine;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-family</span>: <span class="string">&quot;bodoni mt&quot;</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#insert</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-top</span>: <span class="number">12%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-left</span>: <span class="number">38%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* position: absolute;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				top:30%;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				left:50%;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				transform: translate(-50%,-50%); */</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			hr &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-top</span>: <span class="number">1%</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#dream</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-top</span>: <span class="number">1%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">margin-left</span>: <span class="number">35%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="comment">/* height: 20px; */</span></span></span><br><span class="line"><span class="language-css">				<span class="comment">/* position: absolute;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				top:70%;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				left:50%;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				transform: translate(-50%,-50%); */</span></span></span><br><span class="line"><span class="language-css">				<span class="comment">/* width: 500px; */</span></span></span><br><span class="line"><span class="language-css">				<span class="comment">/* text-align:center;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				margin:0 auto;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">				line-height:200px; */</span></span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#insert</span>&gt;<span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#insert</span>&gt;<span class="selector-tag">input</span><span class="selector-attr">[type=text]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid darkgray;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-id">#insert</span>&gt;<span class="selector-tag">input</span><span class="selector-attr">[type=button]</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">vertical-align</span>: bottom;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入关键词&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;ok&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;查询&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">HR</span> <span class="attr">align</span>=<span class="string">center</span> <span class="attr">color</span>=<span class="string">#987cb9</span> <span class="attr">SIZE</span>=<span class="string">1</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dream&quot;</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			$(() =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> url = <span class="string">&#x27;http://api.tianapi.com/txapi/dream/index&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#ok&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;#dream&gt;p&#x27;</span>).<span class="title function_">remove</span>()</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> input = $(<span class="string">&#x27;#ok&#x27;</span>).<span class="title function_">prev</span>();</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> word = input.<span class="title function_">val</span>().<span class="title function_">trim</span>()</span></span><br><span class="line"><span class="language-javascript">					</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">let</span> data = &#123;<span class="string">&quot;key&quot;</span>: <span class="string">&quot;843c2619fa9c643f9bcfe0ee2e66b9da&quot;</span>, <span class="string">&quot;num&quot;</span>: <span class="string">&quot;5&quot;</span>, <span class="string">&quot;word&quot;</span>: word&#125;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// $对象的getJSON方法可以执行异步请求(get请求)获得服务器返回的JSON格式的数据</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 第一个参数是请求的URL(统一资源定位符)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 第二个参数是要发送给服务器的数据(JSON格式)，如果没有数据发给服务器可以省略不写</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 第三个参数是请求成功服务器返回数据之后要执行的回调函数，其参数为服务器返回的内容处理后的JSON</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// $.getJSON(url, data, (json) =&gt; &#123; </span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 	json.newslist.forEach((verbo) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 		// $(&#x27;#poetry&#x27;).append($(&#x27;&lt;p&gt;&#x27;).text(verbo.content))</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 		// attr(&#x27;src&#x27;, &#x27;xxx&#x27;) 添加属性</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 		$(&#x27;#poetry&#x27;).prepend($(&#x27;&lt;p&gt;&#x27;).text(verbo.content).attr(&#x27;class&#x27;, &#x27;a&#x27;))</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 	&#125;)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">					</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (word) &#123;</span></span><br><span class="line"><span class="language-javascript">						$.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;url&quot;</span>: url,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;type&quot;</span>: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;data&quot;</span>: data,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;dataType&quot;</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;headers&quot;</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;success&quot;</span>: <span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">								<span class="keyword">if</span> (json.<span class="property">newslist</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">									json.<span class="property">newslist</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">verbo</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">										$(<span class="string">&#x27;#dream&#x27;</span>).<span class="title function_">prepend</span>($(<span class="string">&#x27;&lt;p&gt;&#x27;</span>).<span class="title function_">html</span>(verbo.<span class="property">result</span>).<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;a&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">									&#125;)</span></span><br><span class="line"><span class="language-javascript">								&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">									$(<span class="string">&#x27;#dream&#x27;</span>).<span class="title function_">prepend</span>($(<span class="string">&#x27;&lt;p&gt;&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;未检索到相关信息&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;a&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">								&#125;</span></span><br><span class="line"><span class="language-javascript">								</span></span><br><span class="line"><span class="language-javascript">							&#125;,</span></span><br><span class="line"><span class="language-javascript">							<span class="string">&quot;error&quot;</span>: <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">						&#125;)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">					input.<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">focus</span>()</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="style-css"><a href="#style-css" class="headerlink" title="style.css"></a>style.css</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 通配符选择器 */</span></span><br><span class="line">* &#123;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标签选择器 */</span></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">5</span> auto; <span class="comment">/* 边距 */</span></span><br><span class="line">	<span class="comment">/* text-align: center;  文本对齐方式: 居中 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 类选择器 */</span></span><br><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.b</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.c</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.d</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.e</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: cyan;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.f</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.g</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: purple;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.h</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: chartreuse;</span><br><span class="line">	<span class="attribute">text-align</span>: center;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">	<span class="attribute">overflow</span>: scroll; <span class="comment">/* hidden */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.big</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.normal</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.small</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ID选择器 */</span> <span class="comment">/*多个标签需使用同一样式属性，ID也应不同且一一对应 */</span></span><br><span class="line"><span class="selector-id">#header</span>, <span class="selector-id">#footer</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">10px</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="动态列表效果-js"><a href="#动态列表效果-js" class="headerlink" title="动态列表效果.js"></a>动态列表效果.js</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#fruits&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> anchors = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#fruits&gt;li&gt;a&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; anchors.<span class="property">length</span>; i += <span class="number">1</span>) &#123;</span><br><span class="line">	anchors[i].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// 事件对象的preventDefault方法可以阻止事件的默认行为</span></span><br><span class="line">		evt.<span class="title function_">preventDefault</span>()</span><br><span class="line">		ul.<span class="title function_">removeChild</span>(anchors[i].<span class="property">parentNode</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// anchors.forEach(delAnchor =&gt; &#123;</span></span><br><span class="line"><span class="comment">// 	delAnchor.addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="comment">// 		// 通过父标签的removeChild方法可以删除子标签</span></span><br><span class="line"><span class="comment">// 		ul.removeChild(delAnchor.parentNode)</span></span><br><span class="line"><span class="comment">// 	&#125;)</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/hello-world/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 09:52:57" itemprop="dateCreated datePublished" datetime="2022-08-17T09:52:57+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-26 15:54:36" itemprop="dateModified" datetime="2022-05-26T15:54:36+08:00">2022-05-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<h2 id="span"><a href="#span" class="headerlink" title="span"></a>span</h2><h1 id="Welcome-to-Hexo-This-is-your-very-first-post-Check-documentation-for-more-info-If-you-get-any-problems-when-using-Hexo-you-can-find-the-answer-in-troubleshooting-or-you-can-ask-me-on-GitHub"><a href="#Welcome-to-Hexo-This-is-your-very-first-post-Check-documentation-for-more-info-If-you-get-any-problems-when-using-Hexo-you-can-find-the-answer-in-troubleshooting-or-you-can-ask-me-on-GitHub" class="headerlink" title="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub."></a>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</h1><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="More-info-Writing"><a href="#More-info-Writing" class="headerlink" title="More info: Writing"></a>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></h1><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<!-- toc -->

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/03/26/python-swiper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/26/python-swiper/" class="post-title-link" itemprop="url">python-swiper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-26 00:00:00" itemprop="dateCreated datePublished" datetime="2019-03-26T00:00:00+08:00">2019-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-17 16:28:04" itemprop="dateModified" datetime="2022-11-17T16:28:04+08:00">2022-11-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="个人模块开发"><a href="#个人模块开发" class="headerlink" title="个人模块开发"></a>个人模块开发</h1><h2 id="一、功能概览"><a href="#一、功能概览" class="headerlink" title="一、功能概览"></a>一、功能概览</h2><ul>
<li>用户数据模型设计</li>
<li>手机注册</li>
<li>短信验证登录</li>
<li>获取个人资料</li>
<li>修改个人资料</li>
<li>头像上传</li>
</ul>
<h2 id="二、用户数据模型设计"><a href="#二、用户数据模型设计" class="headerlink" title="二、用户数据模型设计"></a>二、用户数据模型设计</h2><ol>
<li><p>User（用户自身数据）</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>phonenum</td>
<td>手机号</td>
</tr>
<tr>
<td>nickname</td>
<td>昵称</td>
</tr>
<tr>
<td>sex</td>
<td>性别</td>
</tr>
<tr>
<td>birth_year</td>
<td>出生年</td>
</tr>
<tr>
<td>birth_month</td>
<td>出生月</td>
</tr>
<tr>
<td>birth_day</td>
<td>出生日</td>
</tr>
<tr>
<td>avatar</td>
<td>个人形象</td>
</tr>
<tr>
<td>location</td>
<td>常居地</td>
</tr>
</tbody></table>
</li>
<li><p>Profile（个人配置数据）</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>location</td>
<td>目标城市</td>
</tr>
<tr>
<td>min_distance</td>
<td>最小查找范围</td>
</tr>
<tr>
<td>max_distance</td>
<td>最大查找范围</td>
</tr>
<tr>
<td>min_dating_age</td>
<td>最小交友年龄</td>
</tr>
<tr>
<td>max_dating_age</td>
<td>最大交友年龄</td>
</tr>
<tr>
<td>dating_sex</td>
<td>匹配的性别</td>
</tr>
<tr>
<td>vibration</td>
<td>开启震动</td>
</tr>
<tr>
<td>only_match</td>
<td>不让未匹配的人看我的相册</td>
</tr>
<tr>
<td>auto_play</td>
<td>自动播放视频</td>
</tr>
</tbody></table>
</li>
</ol>
<h2 id="三、关系构建"><a href="#三、关系构建" class="headerlink" title="三、关系构建"></a>三、关系构建</h2><ol>
<li><p>关系分类</p>
<ul>
<li>一对一关系</li>
<li>一对多关系</li>
<li>多对多关系</li>
</ul>
</li>
<li><p>外键的优缺点</p>
<ul>
<li><p>优点</p>
<ul>
<li>由数据库自身保证数据一致性和完整性，数据更可靠</li>
<li>可以增加ER图的可读性</li>
<li>外键可节省开发量</li>
</ul>
</li>
<li><p>缺点</p>
<ul>
<li><p>性能缺陷，有额外开销</p>
</li>
<li><p>主键表被锁定时，会引发外键表也被锁</p>
</li>
<li><p>删除主键表的数据时，需先删除外键表的数据</p>
</li>
<li><p>修改外键表字段时，需重建外键约束</p>
</li>
<li><p>不能用于分布式环境</p>
</li>
<li><p>不容易做到数据解耦</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>应用场景</p>
<ul>
<li>适用场景：内部系统、传统企业级应用可以使用（需要数据量可控，数据库服务器数量可控）</li>
<li>不适用场景：互联网行业不建议使用</li>
</ul>
</li>
<li><p>手动构建关联</p>
<ol>
<li>一对一：主表id与子表id完全一一对应</li>
<li>一对多：在“多”的表内添加“唯一”表id字段</li>
<li>多对多：创建关系表，关系表中一般只存放两个相关联的条目的id</li>
</ol>
</li>
<li><p>方法属性化</p>
<ul>
<li><p>property</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Box</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.l = <span class="number">123</span></span><br><span class="line">        self.w = <span class="number">10</span></span><br><span class="line">        self.h = <span class="number">80</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">v</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.l * self.w * self.h</span><br></pre></td></tr></table></figure></li>
<li><p>cached_property</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.functional <span class="keyword">import</span> cached_property</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(models.Model):</span><br><span class="line">	year = <span class="number">1990</span></span><br><span class="line">    month = <span class="number">10</span></span><br><span class="line">    day = <span class="number">20</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @cached_property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self</span>):</span><br><span class="line">        today = datetime.date.today()</span><br><span class="line">        birth_date = datetime.date(self.year, self.month, self.day)</span><br><span class="line">        times = today - birth_date</span><br><span class="line">        <span class="keyword">return</span> times.days // <span class="number">365</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="django删除migrations文件夹，结果为No-Changes解决方案"><a href="#django删除migrations文件夹，结果为No-Changes解决方案" class="headerlink" title="django删除migrations文件夹，结果为No Changes解决方案"></a>django删除migrations文件夹，结果为No Changes解决方案</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations --empty &lt;app_name&gt;</span><br><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<h2 id="四、第三方短信平台的接入"><a href="#四、第三方短信平台的接入" class="headerlink" title="四、第三方短信平台的接入"></a>四、第三方短信平台的接入</h2><p>云之讯：<a target="_blank" rel="noopener" href="https://www.ucpaas.com/service/experience.html">https://www.ucpaas.com/service/experience.html</a></p>
<p>互亿无线：<a target="_blank" rel="noopener" href="https://www.ihuyi.com/">https://www.ihuyi.com/</a></p>
<ol>
<li><p>注册账号后，将平台分配的APP_ID和APP_SECRET</p>
<ul>
<li>APP_ID：平台分配的ID</li>
<li>APP_SECRET：与平台交互时，用来做安全验证的一段加密用的文本，不能泄漏给其他人</li>
</ul>
</li>
<li><p>注册平台的短信模板</p>
</li>
<li><p>按照平台接口文档开发接口</p>
</li>
</ol>
<h2 id="五、Celery及异步任务的处理"><a href="#五、Celery及异步任务的处理" class="headerlink" title="五、Celery及异步任务的处理"></a>五、Celery及异步任务的处理</h2><p><a target="_blank" rel="noopener" href="https://docs.celeryq.dev/en/stable/">https://docs.celeryq.dev/en/stable/</a></p>
<p><a target="_blank" rel="noopener" href="https://readthedocs.org/projects/celery/">https://readthedocs.org/projects/celery/</a></p>
<ol>
<li><p>模块组成</p>
<p><img src="./img/celery.png" alt="celery"></p>
<ul>
<li><p>任务模块 Task</p>
<p>包含异步任务和定时任务。其中，异步任务通常在业务逻辑中被触发并发往任务队列，而定时任务由 Celery Beat 进程周期性地将任务发往任务队列。</p>
</li>
<li><p>消息中间件 Broker</p>
<p>Broker，即为任务调度队列，接收任务生产者发来的消息（即任务），将任务存入队列。Celery 本身不提供队列服务，官方推荐使用 RabbitMQ 和 Redis 等。</p>
</li>
<li><p>任务执行单元 Worker</p>
<p>Worker 是执行任务的处理单元，它实时监控消息队列，获取队列中调度的任务，并执行它。</p>
</li>
<li><p>任务结果存储 Backend</p>
<p>Backend 用于存储任务的执行结果，以供查询。同消息中间件一样，存储也可使用 RabbitMQ, Redis 和 MongoDB 等。</p>
</li>
</ul>
</li>
<li><p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install &#x27;celery[redis]&#x27;</span><br></pre></td></tr></table></figure></li>
<li><p>创建实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line"></span><br><span class="line">broker = <span class="string">&#x27;redis://127.0.0.1:6379&#x27;</span></span><br><span class="line">backend = <span class="string">&#x27;redis://127.0.0.1:6379/0&#x27;</span></span><br><span class="line">app = Celery(<span class="string">&#x27;my_task&#x27;</span>, broker=broker, backend=backend)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    time.sleep(<span class="number">5</span>)     <span class="comment"># 模拟耗时操作</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br></pre></td></tr></table></figure></li>
<li><p>启动 Worker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">celery -A proj worker -l INFO</span><br><span class="line"># celery worker -A tasks --loglevel=info</span><br></pre></td></tr></table></figure></li>
<li><p>调用任务</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tasks <span class="keyword">import</span> add</span><br><span class="line"></span><br><span class="line">add.delay(<span class="number">2</span>, <span class="number">8</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>常规配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">broker_url = <span class="string">&#x27;redis://127.0.0.1:6379/0&#x27;</span></span><br><span class="line">broker_pool_limit = <span class="number">1000</span>  <span class="comment"># Broker 连接池，默认是10</span></span><br><span class="line"></span><br><span class="line">timezone = <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">accept_content = [<span class="string">&#x27;pickle&#x27;</span>, <span class="string">&#x27;json&#x27;</span>]</span><br><span class="line"></span><br><span class="line">task_serializer = <span class="string">&#x27;pickle&#x27;</span></span><br><span class="line">result_expires = <span class="number">3600</span>  <span class="comment"># 任务过期时间</span></span><br><span class="line"></span><br><span class="line">result_backend = <span class="string">&#x27;redis://127.0.0.1:6379/0&#x27;</span></span><br><span class="line">result_serializer = <span class="string">&#x27;pickle&#x27;</span></span><br><span class="line">result_cache_max = <span class="number">10000</span>  <span class="comment"># 任务结果最大缓存数量</span></span><br><span class="line"></span><br><span class="line">worker_redirect_stdouts_level = <span class="string">&#x27;INFO&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="Win10启动Celery报错解决方案-Task-handler-raised-error-ValueError-not-enough-values-to-unpack"><a href="#Win10启动Celery报错解决方案-Task-handler-raised-error-ValueError-not-enough-values-to-unpack" class="headerlink" title="Win10启动Celery报错解决方案 Task handler raised error: ValueError: not enough values to unpack"></a>Win10启动Celery报错解决方案 Task handler raised error: ValueError: not enough values to unpack</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/py0312/article/details/105538699">https://blog.csdn.net/py0312/article/details/105538699</a></p>
<ul>
<li><strong>安装包 eventlet</strong><br><code>pip install eventlet</code></li>
<li><strong>通过以下命令启动服务</strong><br><code>celery -A celery_task worker -l info -P eventlet</code></li>
</ul>
<h2 id="六、RESTful与前后端分离"><a href="#六、RESTful与前后端分离" class="headerlink" title="六、RESTful与前后端分离"></a>六、RESTful与前后端分离</h2><ol>
<li><p>RESTful</p>
<ul>
<li>RESTful 是一种网络软件架构风格, 而非标准</li>
<li>用 URL 定位一个网络资源</li>
<li>用 HTTP 动词描述对资源的操作<ul>
<li>GET: 用来获取资源</li>
<li>POST: 用来新建资源</li>
<li>PUT: 用来更新资源</li>
<li>DELETE: 用来删除资源</li>
</ul>
</li>
<li>误区<ul>
<li>URL 中使用动词</li>
<li>URL 中出现版本号</li>
<li>参数用 querystring 表示, 而不要拼在 path 部分<ul>
<li>错误示范: GET /user/book/3</li>
<li>正确示范: GET /user/book?id=3</li>
</ul>
</li>
<li>状态码的使用要精确<ul>
<li>2xx：操作成功</li>
<li>3xx：重定向</li>
<li>4xx：客户端错误</li>
<li>5xx：服务器错误</li>
</ul>
</li>
</ul>
</li>
<li>RESTful 与 Django REST framework 的区别</li>
</ul>
</li>
<li><p>前后端分离</p>
<p>传统 Web 开发，view 函数中需要进行墨般渲染，逻辑处理与显示的样式均需要后端开发。</p>
<p>变成前后端分离后，显示效果的处理完全交给前端来做，前端自由度变大。后端只需要传递前端需要的数据即可，将后端人员从繁琐的显示处理中解放出来，专心处理业务逻辑</p>
<ul>
<li><p>优点: 前端负责显示, 后端负责逻辑, 分工更加明确, 彻底解放前、后端开发者</p>
</li>
<li><p>JSON: 完全独立于编程语言的文本格式, 用来存储和表示数据</p>
</li>
<li><p>前后端分离的本质</p>
<p><img src="./img/front-back.jpg" alt="front-back"></p>
</li>
<li><p>前后端分离后的开发流程</p>
<p><img src="./img/fb-dev.jpg" alt="fb-dev"></p>
</li>
</ul>
</li>
<li><p>代码实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> dumps</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">render_json</span>(<span class="params">data=<span class="literal">None</span>, error_code=<span class="number">0</span></span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;将返回值渲染为 JSON 数据&#x27;&#x27;&#x27;</span></span><br><span class="line">    result = &#123;</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span>: data,       <span class="comment"># 返回给前端的数据</span></span><br><span class="line">        <span class="string">&#x27;code&#x27;</span>: error_code  <span class="comment"># 状态码 (status code)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    json_str = dumps(result, ensure_ascii=<span class="literal">False</span>, separators=[<span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;:&#x27;</span>])</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(json_str)</span><br></pre></td></tr></table></figure></li>
<li><p>接口的定义</p>
<ol>
<li><p>定义接口基本格式</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span>   <span class="comment">// 状态码 (status code)</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>    <span class="comment">// 接口数据</span></span><br><span class="line">        <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;uid&quot;</span><span class="punctuation">:</span> <span class="number">123321</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Lion&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Male&quot;</span></span><br><span class="line">         <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;date&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2018-09-12&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>定义 status 状态码</p>
<table>
<thead>
<tr>
<th>code</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>正常</td>
</tr>
<tr>
<td>1000</td>
<td>服务器内部错误</td>
</tr>
<tr>
<td>1001</td>
<td>参数错误</td>
</tr>
<tr>
<td>1002</td>
<td>数据错误</td>
</tr>
</tbody></table>
</li>
<li><p>详细定义每一个接口的各个部分:</p>
<ul>
<li>名称 (Name)</li>
<li>描述 (Description)</li>
<li>方法 (Method)</li>
<li>路径 (Path)</li>
<li>参数 (Params)</li>
<li>返回值 (Returns)</li>
</ul>
</li>
<li><p>接口定义举例：</p>
<blockquote>
<p><strong>接口名称：提交验证码登录</strong></p>
<ul>
<li><p><strong>Description</strong>: 根据上一步的结果提交需要的数据</p>
</li>
<li><p><strong>Method</strong>: POST</p>
</li>
<li><p><strong>Path</strong>: /user/login</p>
</li>
<li><p><strong>Params</strong>:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>required</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>phone</td>
<td>Yes</td>
<td>int</td>
<td>手机号</td>
</tr>
<tr>
<td>code</td>
<td>Yes</td>
<td>int</td>
<td>验证码</td>
</tr>
</tbody></table>
</li>
<li><p><strong>Return</strong>:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>required</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>uid</td>
<td>Yes</td>
<td>int</td>
<td>用户 id</td>
</tr>
<tr>
<td>nickname</td>
<td>Yes</td>
<td>str</td>
<td>用户名</td>
</tr>
<tr>
<td>age</td>
<td>Yes</td>
<td>int</td>
<td>年龄</td>
</tr>
<tr>
<td>sex</td>
<td>Yes</td>
<td>str</td>
<td>性别</td>
</tr>
<tr>
<td>location</td>
<td>Yes</td>
<td>str</td>
<td>常居地</td>
</tr>
<tr>
<td>avatars</td>
<td>Yes</td>
<td>list</td>
<td>头像 URL 列表, 最多为 6 张</td>
</tr>
</tbody></table>
<p>示例:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;uid&quot;</span><span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span>                   <span class="comment">// 用户 id</span></span><br><span class="line">        <span class="attr">&quot;nickname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Miao&quot;</span><span class="punctuation">,</span>           <span class="comment">// 用户名</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span>                    <span class="comment">// 年龄</span></span><br><span class="line">        <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;M&quot;</span><span class="punctuation">,</span>                   <span class="comment">// 性别</span></span><br><span class="line">        <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;China/Beijing&quot;</span><span class="punctuation">,</span>  <span class="comment">// 常居地</span></span><br><span class="line">        <span class="attr">&quot;avatars&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>                  <span class="comment">// 头像 URL 列表, 最多为 6 张</span></span><br><span class="line">            <span class="string">&quot;http://xxx.com/user/avatar/123/1.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;http://xxx.com/user/avatar/123/2.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;http://xxx.com/user/avatar/123/3.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            ...</span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
</li>
</ol>
</li>
</ol>
<h2 id="七、状态码及异常处理"><a href="#七、状态码及异常处理" class="headerlink" title="七、状态码及异常处理"></a>七、状态码及异常处理</h2><ol>
<li><p>为什么要定义错误码</p>
<ul>
<li>使用错误码可以将错误分类，调试时更容易甄别错误</li>
<li>前后端通过错误码识别错误，使接口更简单</li>
<li>前端处理多语言时，可以使用错误码匹配不同语言的提示信息</li>
</ul>
</li>
<li><p>逻辑异常类的实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LogicError</span>(<span class="title class_ inherited__">BaseException</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;程序内部逻辑错误&#x27;&#x27;&#x27;</span></span><br><span class="line">    code = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, data=<span class="literal">None</span></span>):</span><br><span class="line">        self.data = data  <span class="comment"># 发生异常时需要传回前端的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__class__.__name__</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gen_error</span>(<span class="params">name: <span class="built_in">str</span>, err_code: <span class="built_in">int</span></span>) -&gt; LogicError:</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;逻辑异常类的工厂函数&#x27;&#x27;&#x27;</span></span><br><span class="line">    base_cls = (LogicError,)</span><br><span class="line">    cls_attr = &#123;<span class="string">&#x27;code&#x27;</span>: err_code&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">type</span>(name, base_cls, cls_attr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义逻辑异常</span></span><br><span class="line">InternalError = gen_error(<span class="string">&#x27;InternalError&#x27;</span>, <span class="number">1000</span>)  <span class="comment"># 服务器内部错误</span></span><br><span class="line">LoginRequired = gen_error(<span class="string">&#x27;LoginRequired&#x27;</span>, <span class="number">2000</span>)  <span class="comment"># 用户未登录</span></span><br></pre></td></tr></table></figure></li>
<li><p>逻辑异常处理中间件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> errors</span><br><span class="line"><span class="keyword">from</span> lib.http <span class="keyword">import</span> render_json</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorHandlerMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;将结果渲染成 json 数据&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_exception</span>(<span class="params">self, request, exception</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;异常处理&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(exception, errors.LogicError):</span><br><span class="line">            <span class="comment"># 处理逻辑错误</span></span><br><span class="line">            <span class="keyword">return</span> render_json(error=exception)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 处理程序错误</span></span><br><span class="line">            error_info = format_exception(*exc_info())</span><br><span class="line">            err_log.error(<span class="string">&#x27;&#x27;</span>.join(error_info))  <span class="comment"># 将异常信息输出到错误日志</span></span><br><span class="line">            <span class="keyword">return</span> render_json(error=errors.InternalError)  <span class="comment"># 程序错误统一使用 InternalError</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="八、Cookie、Session机制剖析"><a href="#八、Cookie、Session机制剖析" class="headerlink" title="八、Cookie、Session机制剖析"></a>八、Cookie、Session机制剖析</h2><ol>
<li><p>产生过程</p>
<ol>
<li>浏览器：向服务器发送请求</li>
<li>服务器：接手并创建session对象（该对象包含一个session_id）</li>
<li>服务器：执行views函数，并得到一个response对象</li>
<li>服务器：执行response.set_cookie(‘sessionid’, session_id)将session_id写入cookie</li>
<li>服务器：将response传回浏览器</li>
<li>浏览器：读取response报文，从cookies取出session_id并保存</li>
</ol>
</li>
<li><p>后续请求</p>
<ol>
<li>浏览器：向服务器发送请求，session_id随cookies一同发送给server</li>
<li>服务器：从Headers的Cookies中取出session_id</li>
<li>服务器：根据session_id找出对应的数据，确认客户端身份</li>
</ol>
</li>
<li><p>Django中的代码实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SessionMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, get_response=<span class="literal">None</span></span>):</span><br><span class="line">        self.get_response = get_response</span><br><span class="line">        engine = import_module(settings.SESSION_ENGINE)</span><br><span class="line">        self.SessionStore = engine.SessionStore  <span class="comment"># 设置session存储类</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="comment"># 从cookie获取sessionid</span></span><br><span class="line">        session_key = request.COOKIES.get(settings.SESSION_COOKIE_NAME)</span><br><span class="line">        <span class="comment"># 通过session_key获取之前保存的数据</span></span><br><span class="line">        request.session = self.SessionStore(session_key)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_response</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        If request.session was modified, or if the configuration is to save the</span></span><br><span class="line"><span class="string">        session every time, save the changes and set a session cookie or delete</span></span><br><span class="line"><span class="string">        the session cookie if the session has been emptied.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># view函数结束后，获取session状态</span></span><br><span class="line">            accessed = request.session.accessed</span><br><span class="line">            modified = request.session.modified</span><br><span class="line">            empty = request.session.is_empty()</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果cookie中有sessionid，但session为空</span></span><br><span class="line">            <span class="comment"># 说明view中执行过session.flush等操作</span></span><br><span class="line">            <span class="comment"># 直接删除cookie中的session</span></span><br><span class="line">            <span class="keyword">if</span> settings.SESSION_COOKIE_NAME <span class="keyword">in</span> request.COOKIES <span class="keyword">and</span> empty:</span><br><span class="line">                response.delete_cookie(</span><br><span class="line">                    settings.SESSION_COOKIE_NAME,</span><br><span class="line">                    path=settings.SESSION_COOKIE_PATH,</span><br><span class="line">                    domain=settings.SESSION_COOKIE_DOMAIN,</span><br><span class="line">                )</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> accessed:</span><br><span class="line">                    patch_vary_headers(response, (<span class="string">&#x27;Cookie&#x27;</span>,))</span><br><span class="line">                <span class="keyword">if</span> (modified <span class="keyword">or</span> settings.SESSION_SAVE_EVERY_REQUEST) <span class="keyword">and</span> <span class="keyword">not</span> empty:</span><br><span class="line">                    <span class="comment"># 设置过期时间</span></span><br><span class="line">                    <span class="keyword">if</span> request.session.get_expire_at_browser_close():</span><br><span class="line">                        max_age = <span class="literal">None</span></span><br><span class="line">                        expires = <span class="literal">None</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        max_age = request.session.get_expiry_age()</span><br><span class="line">                        expires_time = time.time() + max_age</span><br><span class="line">                        expires = cookie_date(expires_time)</span><br><span class="line">                    <span class="comment"># 保存会话数据，并刷新客户端cookie</span></span><br><span class="line">                    <span class="comment"># Skip session save for 500 responses, refs #3881.</span></span><br><span class="line">                    <span class="keyword">if</span> response.status_code != <span class="number">500</span>:</span><br><span class="line">                        <span class="keyword">try</span>:</span><br><span class="line">                            request.session.save()</span><br><span class="line">                        <span class="keyword">except</span> UpdateError:</span><br><span class="line">                            <span class="keyword">raise</span> SuspiciousOperation(</span><br><span class="line">                                <span class="string">&quot;The request&#x27;s session was deleted before the &quot;</span></span><br><span class="line">                                <span class="string">&quot;request completed. The user may have logged &quot;</span></span><br><span class="line">                                <span class="string">&quot;out in a concurrent request, for example.&quot;</span></span><br><span class="line">                            )</span><br><span class="line">                        <span class="comment"># 让客户端将sessionid添加到cookie中</span></span><br><span class="line">                        response.set_cookie(</span><br><span class="line">                            settings.SESSION_COOKIE_NAME,</span><br><span class="line">                            request.session.session_key, max_age=max_age,</span><br><span class="line">                            expires=expires, domain=settings.SESSION_COOKIE_DOMAIN,</span><br><span class="line">                            path=settings.SESSION_COOKIE_PATH,</span><br><span class="line">                            secure=settings.SESSION_COOKIE_SECURE <span class="keyword">or</span> <span class="literal">None</span>,</span><br><span class="line">                            httponly=settings.SESSION_COOKIE_HTTPONLY <span class="keyword">or</span> <span class="literal">None</span>,</span><br><span class="line">                        )</span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="九、Django中的Form表单验证"><a href="#九、Django中的Form表单验证" class="headerlink" title="九、Django中的Form表单验证"></a>九、Django中的Form表单验证</h2><ul>
<li><p>核心功能：数据验证</p>
</li>
<li><p>form的method只能是POST或GET</p>
</li>
<li><p>method=GET时，表单提交的参数会出现在URL里</p>
</li>
<li><p>属性和方法</p>
<ul>
<li>form.is_valid()</li>
<li>form.has_changed()</li>
<li>form.clean_<field>()</li>
<li>form.cleaned_data[‘fieldname’]</li>
</ul>
</li>
<li><p>Form的定义和使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">from</span> django.forms <span class="keyword">import</span> Form</span><br><span class="line">  <span class="keyword">from</span> django.forms <span class="keyword">import</span> IntegerField, CharField, DateField, ChoiceField</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">TestForm</span>(<span class="title class_ inherited__">Form</span>):</span><br><span class="line">      TAGS = (</span><br><span class="line">          (<span class="string">&#x27;py&#x27;</span>, <span class="string">&#x27;python&#x27;</span>),</span><br><span class="line">          (<span class="string">&#x27;ln&#x27;</span>, <span class="string">&#x27;linux&#x27;</span>),</span><br><span class="line">          (<span class="string">&#x27;dj&#x27;</span>, <span class="string">&#x27;django&#x27;</span>),</span><br><span class="line">      )</span><br><span class="line">      fid = IntegerField()</span><br><span class="line">      name = CharField(max_length=<span class="number">10</span>)</span><br><span class="line">      tag = ChoiceField(choices=TAGS)</span><br><span class="line">      date = DateField()</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  data = &#123;<span class="string">&#x27;fid&#x27;</span>: <span class="string">&#x27;abc123&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;1234567890&#x27;</span>, <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;dj&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;2017-12-17&#x27;</span>&#125;</span><br><span class="line">  form = TestForm(data)</span><br><span class="line">  <span class="built_in">print</span>(form.is_valid())</span><br><span class="line">  <span class="built_in">print</span>(form.cleaned_data)  <span class="comment"># cleaned_data的属性是is_valid函数执行时动态添加的</span></span><br><span class="line">  <span class="built_in">print</span>(form.errors)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 十、企业项目中的静态文件处理</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> Nginx</span><br><span class="line"></span><br><span class="line">   Nginx处理静态资源速度非常快，并且自身还带有缓存</span><br><span class="line"></span><br><span class="line">   但需要注意，分布式部署的多台Nginx服务器上，静态资源需要互相同步</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> CDN</span><br><span class="line"></span><br><span class="line">   CDN的全称是Content Delivery Network即内容分发网络。</span><br><span class="line"></span><br><span class="line">   它依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率，CDN的关键技术主要有内容存储和分发技术。</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 云存储</span><br><span class="line">   - 常见的云存储有：亚马逊S3服务、阿里云的OSS、七牛云等</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> 七牛云接入</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> 注册七牛云账号</span><br><span class="line">   <span class="number">2.</span> 创建存储空间</span><br><span class="line">   <span class="number">3.</span> 获取相关配置</span><br><span class="line">      - AccessKey</span><br><span class="line">      - SecretKey</span><br><span class="line">      - Bucket_name</span><br><span class="line">      - Bucket_URL</span><br><span class="line">   <span class="number">4.</span> 安装qiniu SDK: ```pip install qiniu```</span><br><span class="line">   <span class="number">5.</span> [根据接口文档进行接口封装](https://developer.qiniu.com/kodo/<span class="number">1242</span>/python)</span><br><span class="line">   <span class="number">6.</span> 按照需要将上传、下载接口封装成异步任务</span><br><span class="line">   <span class="number">7.</span> 程序处理流程</span><br><span class="line">      <span class="number">1.</span> 用户图片上传服务器</span><br><span class="line">      <span class="number">2.</span> 服务器将图片上传到七牛云</span><br><span class="line">      <span class="number">3.</span> 将七牛云返回的图片URL存入数据库</span><br><span class="line"></span><br><span class="line"><span class="comment"># 社交、VIP模块开发</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 一、功能概述</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 交友模块</span><br><span class="line">   - 数据模型设计</span><br><span class="line">   - 获取推荐列表</span><br><span class="line">   - 匹配检查</span><br><span class="line">   - 喜欢</span><br><span class="line">   - 超级喜欢</span><br><span class="line">   - 不喜欢</span><br><span class="line">   - 反悔</span><br><span class="line">   - 查看喜欢过我的人</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 好友模块</span><br><span class="line">   - 好友表结构设计</span><br><span class="line">   - 查看好友列表</span><br><span class="line">   - 查看好友信息</span><br><span class="line"></span><br><span class="line"><span class="comment">## 二、模型设计</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> Swiped（划过的记录）</span><br><span class="line"></span><br><span class="line">   | Field | Description    |</span><br><span class="line">   | ----- | -------------- |</span><br><span class="line">   | uid   | 用户自身<span class="built_in">id</span>     |</span><br><span class="line">   | sid   | 被滑的陌生人<span class="built_in">id</span> |</span><br><span class="line">   | mark  | 滑动类型       |</span><br><span class="line">   | time  | 滑动的时间     |</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> Friend（匹配到的好友）</span><br><span class="line"></span><br><span class="line">   | Field | Description |</span><br><span class="line">   | ----- | ----------- |</span><br><span class="line">   | uid1  | 好友ID      |</span><br><span class="line">   | uid2  | 好友ID      |</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> VIP（会员）</span><br><span class="line"></span><br><span class="line">   | Field | Description |</span><br><span class="line">   | ----- | ----------- |</span><br><span class="line">   | name  | 会员名称    |</span><br><span class="line">   | level | 登记        |</span><br><span class="line">   | price | 价格        |</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> Permission（权限）</span><br><span class="line"></span><br><span class="line">   | Field       | Description |</span><br><span class="line">   | ----------- | ----------- |</span><br><span class="line">   | name        | 权限名称    |</span><br><span class="line">   | description | 权限说明    |</span><br><span class="line"></span><br><span class="line"><span class="comment">## 三、关系分析</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 滑动者与被滑动者</span><br><span class="line">   - 一个人可以滑动很多人</span><br><span class="line">   - 一个人可以被多人滑动</span><br><span class="line">   - 结论：同表之内构建起来的逻辑上的多对多关系</span><br><span class="line"><span class="number">2.</span> 用户与好友</span><br><span class="line">   - 一个用户有多个好友</span><br><span class="line">   - 一个用户也可以被多人加为好友</span><br><span class="line">   - 结论：同表之内构建起来的逻辑上的多对多关系，Friend表实际上就是一个关系表</span><br><span class="line"><span class="number">3.</span> User与VIP</span><br><span class="line">   - 一种VIP对应多个User</span><br><span class="line">   - 一个User只会有一种VIP</span><br><span class="line">   - 结论：一对多关系</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> VIP与权限</span><br><span class="line">   - 一种VIP级别对应多种权限</span><br><span class="line">   - 一个权限会属于在多种级别的VIP</span><br><span class="line">   - 结论：多对多关系</span><br><span class="line"></span><br><span class="line"><span class="comment">## 四、类方法与静态方法</span></span><br><span class="line"></span><br><span class="line">- method</span><br><span class="line">  - 通过实例调用</span><br><span class="line">  - 可以引用类内部的任何属性和方法</span><br><span class="line">- <span class="built_in">classmethod</span></span><br><span class="line">  - 无需实例化</span><br><span class="line">  - 可以调用类属性和类方法</span><br><span class="line">  - 无法取到普通成员属性和方法</span><br><span class="line">- <span class="built_in">staticmethod</span></span><br><span class="line">  - 无需实例化</span><br><span class="line">  - 无法取到类内部的任何属性和方法，完全独立的一个方法</span><br><span class="line"></span><br><span class="line"><span class="comment">## 五、利用Q对象进行复杂查询</span></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line"><span class="comment"># AND</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(Q(x-<span class="number">1</span>) &amp; Q(y-<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(Q(x-<span class="number">1</span>) | Q(y-<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOT</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(-Q(name=<span class="string">&#x27;kitty&#x27;</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="日志、缓存、及分布式数据库"><a href="#日志、缓存、及分布式数据库" class="headerlink" title="日志、缓存、及分布式数据库"></a>日志、缓存、及分布式数据库</h1><h2 id="一、日志处理"><a href="#一、日志处理" class="headerlink" title="一、日志处理"></a>一、日志处理</h2><ol>
<li><p>日志的作用</p>
<ol>
<li>记录程序运行状态<ol>
<li>线上环境所有程序以deamon形式运行在后台，无法使用print输出程序状态</li>
<li>线上程序无人值守全天候运行，需要有一种能持续记录程序运行状态的机制，以便遇到问题后分析处理</li>
</ol>
</li>
<li>记录统计数据</li>
<li>开发时进行Debug（调试）</li>
</ol>
</li>
<li><p>基本用法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">import</span> logging</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 设置日志格式</span></span><br><span class="line">   fmt = (<span class="string">&#x27;%(asctime)s %(levelname)7.7s %(funcName)s: %(message)s&#x27;</span>)</span><br><span class="line">   formatter = logging.Formatter(fmt, datefmt=<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 设置 handler</span></span><br><span class="line">   handler = logging.handlers.TimedRotatingFileHandler(<span class="string">&#x27;myapp.log&#x27;</span>, when=<span class="string">&#x27;D&#x27;</span>, backupCount=<span class="number">30</span>)</span><br><span class="line">   handler.setFormatter(formatter)</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 定义 logger 对象</span></span><br><span class="line">   logger = logging.getLogger(<span class="string">&quot;MyApp&quot;</span>)</span><br><span class="line">   logger.addHandler(handler)</span><br><span class="line">   logger.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 日志的等级</span><br><span class="line"></span><br><span class="line">   * DEBUG: 调试信息</span><br><span class="line">   * INFO: 普通信息</span><br><span class="line">   * WARNING: 警告</span><br><span class="line">   * ERROR: 错误</span><br><span class="line">   * FATAL: 致命错误</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> 对应函数</span><br><span class="line"></span><br><span class="line">   * `logger.debug(msg)`</span><br><span class="line">   * `logger.info(msg)`</span><br><span class="line">   * `logger.warning(msg)`</span><br><span class="line">   * `logger.error(msg)`</span><br><span class="line">   * `logger.fatal(msg)`</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> 日志格式允许的字段</span><br><span class="line"></span><br><span class="line">   * `%(name)s` : Logger的名字</span><br><span class="line">   * `%(levelno)s` : 数字形式的日志级别</span><br><span class="line">   * `%(levelname)s` : 文本形式的日志级别</span><br><span class="line">   * `%(pathname)s` : 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class="line">   * `%(filename)s` : 调用日志输出函数的模块的文件名</span><br><span class="line">   * `%(module)s` : 调用日志输出函数的模块名</span><br><span class="line">   * `%(funcName)s` : 调用日志输出函数的函数名</span><br><span class="line">   * `%(lineno)d` : 调用日志输出函数的语句所在的代码行</span><br><span class="line">   * `%(created)f` : 当前时间，用UNIX标准的表示时间的浮点数表示</span><br><span class="line">   * `%(relativeCreated)d` : 输出日志信息时的，自Logger创建以来的毫秒数</span><br><span class="line">   * `%(asctime)s` : 字符串形式的当前时间。默认格式是“<span class="number">2003</span>-07-08 <span class="number">16</span>:<span class="number">49</span>:<span class="number">45</span>,<span class="number">896</span>”。逗号后面的是毫秒</span><br><span class="line">   * `%(thread)d` : 线程ID。可能没有</span><br><span class="line">   * `%(threadName)s` : 线程名。可能没有</span><br><span class="line">   * `%(process)d` : 进程ID。可能没有</span><br><span class="line">   * `%(message)s` : 用户输出的消息</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> Django 中的日志配置</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   LOGGING = &#123;</span><br><span class="line">       <span class="string">&#x27;version&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">       <span class="string">&#x27;disable_existing_loggers&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">       <span class="comment"># 格式配置</span></span><br><span class="line">       <span class="string">&#x27;formatters&#x27;</span>: &#123;</span><br><span class="line">           <span class="string">&#x27;simple&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;format&#x27;</span>: <span class="string">&#x27;%(asctime)s %(module)s.%(funcName)s: %(message)s&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;datefmt&#x27;</span>: <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="string">&#x27;verbose&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;format&#x27;</span>: (<span class="string">&#x27;%(asctime)s %(levelname)s [%(process)d-%(threadName)s] &#x27;</span></span><br><span class="line">                       <span class="string">&#x27;%(module)s.%(funcName)s line %(lineno)d: %(message)s&#x27;</span>),</span><br><span class="line">               <span class="string">&#x27;datefmt&#x27;</span>: <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="comment"># Handler 配置</span></span><br><span class="line">       <span class="string">&#x27;handlers&#x27;</span>: &#123;</span><br><span class="line">           <span class="string">&#x27;console&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.StreamHandler&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span> <span class="keyword">if</span> DEBUG <span class="keyword">else</span> <span class="string">&#x27;WARNING&#x27;</span></span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="string">&#x27;info&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.handlers.TimedRotatingFileHandler&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;filename&#x27;</span>: <span class="string">f&#x27;<span class="subst">&#123;BASE_DIR&#125;</span>/logs/info.log&#x27;</span>,  <span class="comment"># 日志保存路径</span></span><br><span class="line">               <span class="string">&#x27;when&#x27;</span>: <span class="string">&#x27;D&#x27;</span>,        <span class="comment"># 每天切割日志</span></span><br><span class="line">               <span class="string">&#x27;backupCount&#x27;</span>: <span class="number">30</span>,  <span class="comment"># 日志保留 30 天</span></span><br><span class="line">               <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;simple&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;INFO&#x27;</span>,</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="string">&#x27;error&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.handlers.TimedRotatingFileHandler&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;filename&#x27;</span>: <span class="string">f&#x27;<span class="subst">&#123;BASE_DIR&#125;</span>/logs/error.log&#x27;</span>,  <span class="comment"># 日志保存路径</span></span><br><span class="line">               <span class="string">&#x27;when&#x27;</span>: <span class="string">&#x27;W0&#x27;</span>,      <span class="comment"># 每周一切割日志</span></span><br><span class="line">               <span class="string">&#x27;backupCount&#x27;</span>: <span class="number">4</span>,  <span class="comment"># 日志保留 4 周</span></span><br><span class="line">               <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;verbose&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;WARNING&#x27;</span>,</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="comment"># Logger 配置</span></span><br><span class="line">       <span class="string">&#x27;loggers&#x27;</span>: &#123;</span><br><span class="line">           <span class="string">&#x27;django&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;console&#x27;</span>],</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="string">&#x27;inf&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;info&#x27;</span>],</span><br><span class="line">               <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">               <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;INFO&#x27;</span>,</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="string">&#x27;err&#x27;</span>: &#123;</span><br><span class="line">               <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;error&#x27;</span>],</span><br><span class="line">               <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">               <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;WARNING&#x27;</span>,</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>日志查找</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">   grep dislike info.log</span><br><span class="line">   find <span class="string">&quot;dislike&quot;</span> info.log</span><br><span class="line">   </span><br><span class="line">   grep dislike info.log -c <span class="comment"># 仅显示行号</span></span><br><span class="line">   find <span class="string">&quot;dislike&quot;</span> info.log /C </span><br><span class="line">   </span><br><span class="line">   grep dislike info.log | awk <span class="string">&#x27;&#123;print $1,$6&#125;&#x27;</span>  <span class="comment"># 显示指定列的信息</span></span><br><span class="line">   </span><br><span class="line">   grep -rnw &lt;string&gt; ./  <span class="comment"># -rnw 递归查找单词字符并显示行号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 二、缓存处理</span></span><br><span class="line"></span><br><span class="line">1. 缓存一般处理流程</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   data = get_from_cache(key)  <span class="comment"># 首先从缓存中获取数据</span></span><br><span class="line">   <span class="keyword">if</span> data is None:</span><br><span class="line">       data = get_from_db()  <span class="comment"># 缓存中没有，从数据库获取</span></span><br><span class="line">       set_to_cache(key, data)  <span class="comment"># 将数据添加到缓存，方便下次获取</span></span><br><span class="line">   <span class="built_in">return</span> data</span><br><span class="line"></span><br><span class="line">2. Django的默认缓存接口</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   from django.core.cache import cache</span><br><span class="line">   </span><br><span class="line">   cache.set(<span class="string">&#x27;a&#x27;</span>, 123, 10)</span><br><span class="line">   a = cache.get(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">   <span class="built_in">print</span>(a)</span><br><span class="line">   x = cache.incr(a)</span><br><span class="line">   <span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">3. Django中使用Redis缓存</span><br><span class="line"></span><br><span class="line">   - 安装django_redis: ```pip install django_redis```</span><br><span class="line"></span><br><span class="line">   - 配置</span><br><span class="line"></span><br><span class="line">     ```python</span><br><span class="line">     <span class="comment"># settings 添加如下配置</span></span><br><span class="line">     CACHES = &#123;</span><br><span class="line">         <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">             <span class="string">&quot;BACKEND&quot;</span>: <span class="string">&quot;django_redis.cache.RedisCache&quot;</span>,</span><br><span class="line">             <span class="string">&quot;LOCATION&quot;</span>: <span class="string">&quot;redis://192.168.200.116:6379/1&quot;</span>,</span><br><span class="line">             <span class="string">&quot;OPTIONS&quot;</span>: &#123;</span><br><span class="line">                 <span class="string">&quot;CLIENT_CLASS&quot;</span>: <span class="string">&quot;django_redis.client.DefaultClient&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;PICKLE_VERSION&quot;</span>: -1,</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">4. Redis回顾</span><br><span class="line"></span><br><span class="line">   - String类：常用作普通缓存</span><br><span class="line"></span><br><span class="line">     | CMD   | Example                   | Description                    |</span><br><span class="line">     | ----- | ------------------------- | ------------------------------ |</span><br><span class="line">     | <span class="built_in">set</span>   | <span class="built_in">set</span>(<span class="string">&#x27;a&#x27;</span>, 123)             | 设置值                         |</span><br><span class="line">     | get   | get(<span class="string">&#x27;a&#x27;</span>)                  | 获取值                         |</span><br><span class="line">     | incr  | incr(<span class="string">&#x27;a&#x27;</span>)                 | 自增                           |</span><br><span class="line">     | decr  | decr(<span class="string">&#x27;a&#x27;</span>)                 | 自减                           |</span><br><span class="line">     | mset  | mset(a=123, b=456, c=789) | 设置多个值                     |</span><br><span class="line">     | mget  | mget([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])     | 获取多个值                     |</span><br><span class="line">     | setex | setex(<span class="string">&#x27;kk&#x27;</span>, 21, 10)       | 设置值的时候，同时设置过期时间 |</span><br><span class="line">     | setnx | setnx(<span class="string">&#x27;a&#x27;</span>, 999)           | 如果不存在，则创建该值         |</span><br><span class="line"></span><br><span class="line">   - Hash类：常用作对象存储</span><br><span class="line"></span><br><span class="line">     | CMD     | Example                          | Description                           |</span><br><span class="line">     | ------- | -------------------------------- | ------------------------------------- |</span><br><span class="line">     | hset    | hset(<span class="string">&#x27;obj&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)     | 在哈希表obj中添加一个name = hello的值 |</span><br><span class="line">     | hget    | hget(<span class="string">&#x27;obj&#x27;</span>, <span class="string">&#x27;name&#x27;</span>)              | 获取哈希表obj中的值                   |</span><br><span class="line">     | hmset   | hmset(<span class="string">&#x27;obj&#x27;</span>, &#123;<span class="string">&#x27;a&#x27;</span>:1, <span class="string">&#x27;b&#x27;</span>:3&#125;)     | 在哈希表中设置多个值                  |</span><br><span class="line">     | hmget   | hmget(<span class="string">&#x27;obj&#x27;</span>, [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;name&#x27;</span>]) | 获取多个哈希表中的值                  |</span><br><span class="line">     | hgetail | hgetail(<span class="string">&#x27;obj&#x27;</span>)                   | 获取多个哈希表中所有的值              |</span><br><span class="line">     | hincrby | hincrby(<span class="string">&#x27;obj&#x27;</span>, <span class="string">&#x27;count&#x27;</span>)          | 将哈希表中的某个值自增1               |</span><br><span class="line">     | hdecrby | hdecrby(<span class="string">&#x27;obj&#x27;</span>, <span class="string">&#x27;count&#x27;</span>)          | 将哈希表中的某个值自减1               |</span><br><span class="line"></span><br><span class="line">   - List类：常用作队列（消息队列、任务队列等）</span><br><span class="line"></span><br><span class="line">     | CMD   | Example                 | Description                                     |</span><br><span class="line">     | ----- | ----------------------- | ----------------------------------------------- |</span><br><span class="line">     | lpush | lpush(name, *values)    | 向列表左侧添加多个元素                          |</span><br><span class="line">     | rpush | rpush(name, *values)    | 向列表右侧添加多个元素                          |</span><br><span class="line">     | lpop  | lpop(name)              | 从列表左侧弹出一个元素                          |</span><br><span class="line">     | rpop  | rpop(name)              | 从列表右侧弹出一个元素                          |</span><br><span class="line">     | blpop | blpop(keys, <span class="built_in">timeout</span>=0)  | 从列表左侧弹出一个元素，列表为空时阻塞<span class="built_in">timeout</span>秒 |</span><br><span class="line">     | brpop | brpop(keys, <span class="built_in">timeout</span>=0)  | 从列表右侧弹出一个元素，列表为空时阻塞<span class="built_in">timeout</span>秒 |</span><br><span class="line">     | ilen  | ilen(name)              | 获取列表长度                                    |</span><br><span class="line">     | ltrim | ltrim(name, start, end) | 从start到end位置截断列表                        |</span><br><span class="line"></span><br><span class="line">   - Set类：常用作去重</span><br><span class="line"></span><br><span class="line">     | CMD       | Example                | Description                     |</span><br><span class="line">     | --------- | ---------------------- | ------------------------------- |</span><br><span class="line">     | sadd      | sadd(name, *values)    | 向集合中添加元素                |</span><br><span class="line">     | sdiff     | sdiff(keys, *args)     | 多个集合做差集                  |</span><br><span class="line">     | sinter    | sinter(keys, *args)    | 多个集合做交集                  |</span><br><span class="line">     | sunion    | sunion(keys, *args)    | 多个集合做并集                  |</span><br><span class="line">     | sismember | sismember(name, value) | 元素value是否是集合name中的成员 |</span><br><span class="line">     | smembers  | smembers(name)         | 集合name中的全部成员            |</span><br><span class="line">     | spop      | spop(name)             | 随机弹出一个成员                |</span><br><span class="line">     | srem      | srem(name, *values)    | 删除一个或多个成员              |</span><br><span class="line"></span><br><span class="line">   - SortedSet类：常用作排行处理</span><br><span class="line"></span><br><span class="line">     | CMD       | Example                                  | Description                         |</span><br><span class="line">     | --------- | ---------------------------------------- | ----------------------------------- |</span><br><span class="line">     | zadd      | zadd(name, a=12)                         | 添加一个a，值为12                   |</span><br><span class="line">     | zcount    | zcount(name, min, max)                   | 从min到max的元素个数                |</span><br><span class="line">     | zincrby   | zincrby(name, key, 1)                    | key对应的值自增1                    |</span><br><span class="line">     | zrange    | zrange(name, 0, -1, withscores=False)    | 按升序返回排名0到最后一位的全部元素 |</span><br><span class="line">     | zrevrange | zrevrange(name, 0, -1, withscores=False) | 按降序返回排名0到最后一位的全部元素 |</span><br><span class="line">     | zrem      | zrem(name, *value)                       | 删除一个或多个元素                  |</span><br><span class="line"></span><br><span class="line">5. 使用pickle对Redis接口的封装</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   from pickle import dumps, loads</span><br><span class="line">   </span><br><span class="line">   rds = redis.Redis()</span><br><span class="line">   </span><br><span class="line">   def <span class="built_in">set</span>(key, value):</span><br><span class="line">       data = dumps(value)</span><br><span class="line">       <span class="built_in">return</span> rds.set(key, data)</span><br><span class="line">   </span><br><span class="line">   def get(key):</span><br><span class="line">       data = rds.get(key)</span><br><span class="line">       <span class="built_in">return</span> loads(data)</span><br><span class="line"></span><br><span class="line">6. 动态修改Python属性和方法</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   class A:</span><br><span class="line">       m = 128</span><br><span class="line">       def __init__(self):</span><br><span class="line">           self.x = 123</span><br><span class="line">       def add(self, n):</span><br><span class="line">           <span class="built_in">print</span>(self.x + n)</span><br><span class="line">   a = A()</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 动态添加属性（两种方式）</span></span><br><span class="line">   a.y = 456</span><br><span class="line">   setattr(a, <span class="string">&#x27;z&#x27;</span>, 789)</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 动态添加类属性</span></span><br><span class="line">   A.y = 654</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 类属性和实例属性互不影响</span></span><br><span class="line">   <span class="built_in">print</span>(A.y, a.y)</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 动态添加实例方法</span></span><br><span class="line">   def sub(self, n):</span><br><span class="line">       <span class="built_in">print</span>(self.x - n)</span><br><span class="line">   A.sub = sub</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 动态添加类方法</span></span><br><span class="line">   @classmethod</span><br><span class="line">   def mul(cls, n):</span><br><span class="line">       <span class="built_in">print</span>(cls.m * n)</span><br><span class="line">   A.mul = mul</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 动态添加静态方法</span></span><br><span class="line">   @staticmethod</span><br><span class="line">   def div(x, y):</span><br><span class="line">       <span class="built_in">print</span>(x / y)</span><br><span class="line">   A.div = div</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 属性修改的本质原因</span></span><br><span class="line">   <span class="built_in">print</span>(A.__dict__, a.__dict__)</span><br></pre></td></tr></table></figure></li>
<li><p>在Model层插入缓存处理</p>
</li>
</ol>
<h2 id="三、分布式数据库"><a href="#三、分布式数据库" class="headerlink" title="三、分布式数据库"></a>三、分布式数据库</h2><ol>
<li><p>数据分片</p>
<ul>
<li>表单查询能力上限</li>
<li>分库分表<ul>
<li>分表</li>
<li>分库</li>
</ul>
</li>
<li>垂直切割</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">user												 |	ext_info</span><br><span class="line"></span><br><span class="line">id	 name		sex	  	  age  location	  |	 uid    aa	   bb   cc	   dd  ee ff  xx   yy  zz</span><br><span class="line"></span><br><span class="line">------------------------------------------ | --------------------------------------------------</span><br><span class="line"></span><br><span class="line">1	 xxx		f		 11	  beijing	 |	 1	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">2	 xxx		f		 11	  beijing	 |	 2	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">3	 xxx		f		 11	  beijing	 |	 3	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">4	 xxx		f		 11	  beijing	 |	 4	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">5	 xxx		f		 11	  beijing	 |	 5	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">6	 xxx		f		 11	  beijing	 |	 6	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">7	 xxx		f		 11	  beijing	 |	 7	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">8	 xxx		f		 11	  beijing	 |	 8	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">9	 xxx		f		 11	  beijing	 |	 9	   x	  x	   x	  x	  x	 x	 x	  x	  x</span><br></pre></td></tr></table></figure>

<ul>
<li><p>水平切割</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">- user												 </span><br><span class="line"></span><br><span class="line">  id	name	sex	age	location		aa	bb	cc	dd	ee	ff	xx	yy	zz</span><br><span class="line"></span><br><span class="line">  ------------------------------------------------------------------------------------- user_1</span><br><span class="line"></span><br><span class="line">  1	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  2	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  3	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  ------------------------------------------------------------------------------------- user_2</span><br><span class="line"></span><br><span class="line">  4	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  5	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  6	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  ------------------------------------------------------------------------------------- user_3</span><br><span class="line"></span><br><span class="line">  7	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  8	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br><span class="line"></span><br><span class="line">  9	 xxx		f		 11	  beijing	 x	  x	   x	  x	  x	 x	 x	  x	  x</span><br></pre></td></tr></table></figure>

<p>水平拆分原则</p>
</li>
<li><ul>
<li><p>按范围拆分</p>
<ul>
<li><p>优点：构建简单，扩容极其方便</p>
</li>
<li><p>缺点：不能随运营发展均衡分配资源</p>
</li>
<li><p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Database-1		  1 - 500w	&lt;-- uid: 3120482</span><br><span class="line"></span><br><span class="line">Database-1	  500w - 1000w</span><br><span class="line"></span><br><span class="line">Database-1	  1000 - 1500w	 &lt;-- post_id: 20278327</span><br><span class="line"></span><br><span class="line">Database-1   1500w - 2000w</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>按余数拆分</p>
<ul>
<li><p>优点：能够随着运营发展均匀分配负数</p>
</li>
<li><p>缺点：扩容不方便，前期投入大</p>
</li>
<li><p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">uid = 568456</span><br><span class="line"></span><br><span class="line">mod = uid % len(Database) -&gt; 3</span><br><span class="line"></span><br><span class="line">db_name = &#x27;Database-3&#x27;</span><br><span class="line"></span><br><span class="line">Database-0		10	20	30	...	3120480</span><br><span class="line"></span><br><span class="line">Database-1	  1	11	21	31	...	3120481</span><br><span class="line"></span><br><span class="line">Database-2	  2	12	22	32	...	3120482</span><br><span class="line"></span><br><span class="line">Database-3	  3	13	23	33	...	3120483</span><br><span class="line"></span><br><span class="line">Database-4	  4	14	24	34	...	3120484</span><br><span class="line"></span><br><span class="line">Database-5	  5	15	25	35	...	3120485</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>数据库集群</p>
<ul>
<li><p>读写分离</p>
<ul>
<li><p>程序自身实现读写分离</p>
<p><img src="../img/db1.png"></p>
</li>
<li><p>使用第三方代理实现读写分离</p>
<p><img src="../img/db2.png"></p>
</li>
</ul>
</li>
<li><p>服务高可用</p>
<ol>
<li>对软硬件的冗余，以消除单点故障。任何系统都会有一个或多个冗余系统做备份。</li>
<li>对故障的检测和恢复。检测故障以及用备份的结点接管故障点，也就是“故障转移”。</li>
<li>需要很可靠的交汇点（CrossOver），这是一些不容易冗余的结点。比如域名解析，负载均衡器等。</li>
</ol>
</li>
</ul>
</li>
</ol>
<h1 id="服务器性能，及上线部署"><a href="#服务器性能，及上线部署" class="headerlink" title="服务器性能，及上线部署"></a>服务器性能，及上线部署</h1><h2 id="一、并发性能"><a href="#一、并发性能" class="headerlink" title="一、并发性能"></a>一、并发性能</h2><ul>
<li><p>概念</p>
<ul>
<li>理解 I/O 的概念</li>
<li>理解“同步/异步”、“阻塞/非阻塞”</li>
<li>了解“事件驱动” 和 “多路复用”</li>
<li>异步模型并不会消灭阻塞，而是在发生 I/O 阻塞时切换到其他任务，从而达到异步非阻塞</li>
</ul>
</li>
<li><p>计算密集型</p>
<ul>
<li>CPU 长时间满负荷运行，如图像处理、大数据运算、科学运算等</li>
<li>计算密集型：用C语言或Cpython补充</li>
</ul>
</li>
<li><p>I/O密集型</p>
<ul>
<li>网络IO、文件IO、设备IO等</li>
<li>Unix：一切皆文件</li>
</ul>
</li>
<li><p>多任务处理</p>
<ul>
<li><p>进程、线程、协程调度的过程叫做上下文切换</p>
</li>
<li><p>进程、线程、协程对比</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>资源占用</th>
<th>数据通信</th>
<th>上下文切换（Context）</th>
</tr>
</thead>
<tbody><tr>
<td>进程</td>
<td>大</td>
<td>不方便（网络、共享内容、管道等）</td>
<td>操作系统按时间片切换，不灵活、慢</td>
</tr>
<tr>
<td>线程</td>
<td>小</td>
<td>非常方便</td>
<td>按时间片切换，不够灵活，快</td>
</tr>
<tr>
<td>协程</td>
<td>非常小</td>
<td>非常方便</td>
<td>根据I/O事件切换，更加有效的利用CPU</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>全局解释器锁（GIL）</p>
<p><img src="../img/GIL1.png"></p>
<p><img src="../img/GIL2.png"></p>
<ul>
<li>它确保任何时候一个进程中都只有一个Python线程能进入CPU执行</li>
<li>全局解释器锁造成单个进程无法使用多个CPU核心</li>
<li>通过多进程来利用多个CPU核心，一般进程数与CPU核心数相等，或者CPU核心数两倍</li>
</ul>
</li>
<li><p>协程</p>
<ul>
<li><p>Python下协程的发展：</p>
<ul>
<li>stackless / greenlet / gevent</li>
<li>tornado 通过纯Python代码实现了协程处理（底层使用yield）</li>
<li>asyncio: Python官方实现的协程</li>
</ul>
</li>
<li><p>asyncio实现协程</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;wait %s s&#x27;</span> % n)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(n)</span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line">task1 = foo(<span class="number">1</span>)</span><br><span class="line">task2 = foo(<span class="number">1.5</span>)</span><br><span class="line">tasks = [asyncio.ensure_future(task1), asyncio.ensure_future(task2)]</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()  <span class="comment"># 事件循环，协程调度器</span></span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>结论：通常使用多进程 + 多协程达到最大并发性能</p>
<ul>
<li>因为GIL的原因，Python需要通过多进程来利用多个核心</li>
<li>线程切换效率低，而且应对 I/O 不够灵活</li>
<li>协程更轻量级，完全没有协程切换的消耗，而且可以由程序自身统一调度和切换</li>
<li>一般使用协程来处理每一个请求</li>
</ul>
</li>
<li><p>单台服务器最大连接数</p>
<ul>
<li>文件描述符：限制文件打开数量（一切皆文件）</li>
<li>内核限制：<code>net.core.somaxconn</code></li>
<li>内存限制</li>
<li>修改文件描述符：<code>ulimit -n 65535</code></li>
</ul>
</li>
<li><p>使用Gunicorn驱动Django</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://docs.gunicorn.org/en/latest/install.html">http://docs.gunicorn.org/en/latest/install.html</a></p>
</li>
<li><p>Gunicorn扮演HTTPServer的角色</p>
</li>
<li><p>HTTPServer：只负责网络连接（TCP握手、数据收发）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gunicorn -c swiper/gunicorn-config.py swiper.wsgi <span class="comment"># 启动gunicorn</span></span><br><span class="line">watch -n 0.5 <span class="string">&#x27;ps aux | grep -v grep | grep gunicorn&#x27;</span> <span class="comment"># 实时查看gunicorn运行情况</span></span><br><span class="line">watch -n 0.5 <span class="string">&quot;ps aux | grep -v grep | grep gunicorn | awk &#x27;&#123;print \$2&#125;&#x27;&quot;</span> <span class="comment"># 实时查看gunicorn运行的进程ID</span></span><br><span class="line"><span class="built_in">cat</span> logs/gunicorn.pid <span class="comment"># 查看gunicorn主进程（master）</span></span><br><span class="line"><span class="built_in">kill</span> -HUP &lt;master ID&gt; <span class="comment"># nginx不间断重启</span></span><br><span class="line">ps aux | grep -v grep | grep &lt;app&gt; | awk <span class="string">&quot;&#123;print \$2&#125;&quot;</span> | xargs <span class="built_in">kill</span> <span class="comment"># xargs 前面的输出结果作为参数传给后面</span></span><br></pre></td></tr></table></figure>

<p><strong>报错：</strong> <strong>django.core.exceptions.ImproperlyConfigured</strong>: Requested setting REDIS, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.</p>
<p>注意在脚本中添加：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">os.environ.setdefault(<span class="string">&quot;DJANGO_SETTINGS_MODULE&quot;</span>, <span class="string">&quot;swiper.settings&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>分清几个概念</p>
<ul>
<li><p>WSGI：全称是WebServerGatewayInterface，它是Python官方定义的一种描述HTTP服务器（如Nginx）与Web应用程序（如Django、Flask）通信的规范。全文定义在<a target="_blank" rel="noopener" href="https://peps.python.org/pep-0333/">PEP333</a>。</p>
</li>
<li><p>uwsgi：与WSGI类似，是uWSGI服务器自定义的通信协议，用于定义传输信息的类型(type of information)。每一个uwsgi packet前4byte为传输信息类型的描述，与WSGI协议是两种东西，该协议性能远好于早期的Fast-CGI协议。</p>
</li>
<li><p>uWSGI: uWSGI是一个全功能的HTTP服务器。实现了WSGI协议、uwsgi协议、http协议等。它要做的就是把HTTP协议转化成语言支持的网络协议。比如把HTTP协议转化成WSGI协议，让Python可以直接使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">    HTTP Server =&gt; 负责：1. 接受、断开客户端请求；2.接收、发送网络数据</span><br><span class="line">    	∧</span><br><span class="line">    	|</span><br><span class="line">    	∨</span><br><span class="line">       WSGI	    =&gt; 负责：在 HTTPServer 和 webapp 之间进行数据转换</span><br><span class="line">        ∧</span><br><span class="line">        |</span><br><span class="line">        ∨</span><br><span class="line">      web App   =&gt; 负责：web 应用的业务逻辑</span><br><span class="line"></span><br><span class="line">## 二、压力测试</span><br><span class="line"></span><br><span class="line">- 常用工具</span><br><span class="line">  - [ab(apach:benchmark)](https://httpd.apache.org/docs/2.4/programs/ab.html)</span><br><span class="line">  - [siege](https://github.com/loeDog/siege)</span><br><span class="line">  - webbench</span><br><span class="line">  - [wrk](https://github.com/wg/wrk)</span><br><span class="line">- Web系统性能关键指标：RPS（Requests per second）</span><br><span class="line">- 其他</span><br><span class="line">  - QPS（每秒查询数）</span><br><span class="line">  - TPS（每秒事务数，数据库指标）</span><br><span class="line">- Ubuntu下安装ab:```apt-get install apache2-utils```</span><br><span class="line">- 压测：```ab -n 1000 -c 300 http://127.0.0.1:9000/api/user/profile```</span><br><span class="line">- 进程</span><br><span class="line">  - 资源占用大，一般以Mb为单位</span><br><span class="line">  - 通信方式：需要一种媒介来进行通信，如：socket，管道，文件，共享内存，UDS</span><br><span class="line">  - 上下文切换性能：稍慢，不够灵活，由操作系统决定切换方式</span><br><span class="line">- 线程</span><br><span class="line">  - 资源占用很小，一般为2k左右</span><br><span class="line">  - 通信方式：直接通信，非常方便</span><br><span class="line">  - 上下文切换性能：稍快，不够灵活，由python解释器控制切换</span><br><span class="line"></span><br><span class="line">- 协程</span><br><span class="line">  - 资源占用更小，一般不到1K</span><br><span class="line">  - 通信方式：直接通信，非常方便</span><br><span class="line">  - 上下文切换性能：非常好，切换方式由开发者掌控，非常灵活</span><br><span class="line"></span><br><span class="line">- 阻塞：多任务异步处理</span><br><span class="line">- 上下文切换：使用尽可能快的处理单元 -&gt; 协程</span><br><span class="line"></span><br><span class="line">## 三、服务器的登录与维护</span><br><span class="line"></span><br><span class="line">1. SSH登录服务器：```ssh root@xxx.xxx.xxx```</span><br><span class="line"></span><br><span class="line">2. 密钥</span><br><span class="line">   1. 产生：ssh-keygen</span><br><span class="line">   </span><br><span class="line">      ```bash</span><br><span class="line">      ssh-keygen -t ed25519  # 产生ed25519的密钥</span><br><span class="line">   </span><br><span class="line">   2. 公钥：~/.ssh/id_rsa.pub</span><br><span class="line">   </span><br><span class="line">   3. 私钥：~/.ssh/id_rsa</span><br><span class="line">   </span><br><span class="line">   4. 免密登录服务器</span><br><span class="line">      1. 复制公钥内容</span><br><span class="line">      2. 将公钥内容粘贴到服务器的~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">3. 代码上传</span><br><span class="line"></span><br><span class="line">   ```bash</span><br><span class="line">   cat /proc/cpuinfo</span><br><span class="line">   cat /proc/cpuinfo|grep processor -c  # 查看CPU</span><br><span class="line">   free -m  # 查看内存，以MB为单位</span><br><span class="line">   free -k</span><br><span class="line">   free -g</span><br></pre></td></tr></table></figure></li>
</ul>
<ol>
<li><p>rsync</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_27747695/article/details/114098005">https://blog.csdn.net/sinat_27747695/article/details/114098005</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">      B:\swiper&gt;rsync -crvP --exclude=&#123;.git,venv,__pycache__&#125; ./ root@[2a01:4f8:13a:2690:face:daf:68f3:1]:/opt/swiper/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 四、脚本开发</span></span><br><span class="line"></span><br><span class="line">- 系统部署脚本</span><br><span class="line"></span><br><span class="line">- 代码发布脚本</span><br><span class="line">- 程序启动脚本</span><br><span class="line">- 程序停止脚本</span><br><span class="line">- 程序启动脚本</span><br><span class="line">  - 不间断重启：```<span class="built_in">kill</span> -HUP [进程 ID]```</span><br><span class="line"></span><br><span class="line">**shell脚本报错“/bin/bash^M: bad interpreter: No such file or directory” **</span><br><span class="line"></span><br><span class="line">https://www.cnblogs.com/xyztank/articles/16594936.html</span><br><span class="line"></span><br><span class="line">编辑文件，执行“: <span class="built_in">set</span> ff=unix”，将文件设置为unix格式，然后执行“:wq”，保存退出。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>vim filename</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 五、Nginx</span><br><span class="line"></span><br><span class="line">- nginx.conf</span><br><span class="line"></span><br><span class="line">  ```json</span><br><span class="line">  https://www.cnblogs.com/patrick-yeh/p/16407935.html</span><br><span class="line">  </span><br><span class="line">  user root;</span><br><span class="line">  worker_processes  4;</span><br><span class="line">  pid /run/nginx.pid;</span><br><span class="line">  </span><br><span class="line">  events &#123;</span><br><span class="line">      worker_connections  10240;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  http &#123;</span><br><span class="line">      include       mime.types;</span><br><span class="line">      default_type  application/octet-stream;</span><br><span class="line">  </span><br><span class="line">      log_format main &#x27;$time_local $remote_addr $status $request_time &#x27;</span><br><span class="line">                      &#x27;$request [$body_bytes_sent/$bytes_sent]   &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_referer&quot;&#x27;;</span><br><span class="line">  </span><br><span class="line">      sendfile            on;</span><br><span class="line">      tcp_nopush          on;</span><br><span class="line">      keepalive_timeout   65;</span><br><span class="line">      gzip                on;</span><br><span class="line">  </span><br><span class="line">      upstream app_server &#123;</span><br><span class="line">          server 127.0.0.1:8000 weight=10;</span><br><span class="line">          server 127.0.0.1:9000 weight=10;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      upstream app_server_ipv6 &#123;</span><br><span class="line">          server localhost:8000 weight=10;</span><br><span class="line">          server localhost:9000 weight=20;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      server &#123;</span><br><span class="line">          listen       80; ## listen for ipv4</span><br><span class="line">          server_name  localhost;</span><br><span class="line">  </span><br><span class="line">          access_log  /opt/swiper/logs/access.log  main;</span><br><span class="line">          error_log   /opt/swiper/logs/error.log;</span><br><span class="line">  </span><br><span class="line">          location = /favicon.ico  &#123;</span><br><span class="line">              empty_gif;</span><br><span class="line">              access_log off;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          #location /static/ &#123;</span><br><span class="line">          #    root   /opt/swiper/frontend/;</span><br><span class="line">          #    expires 30d;</span><br><span class="line">          #    access_log off;</span><br><span class="line">          #&#125;</span><br><span class="line">  </span><br><span class="line">          location / &#123;</span><br><span class="line">              proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">              proxy_set_header Host $http_host;</span><br><span class="line">              proxy_redirect off;</span><br><span class="line">              proxy_pass http://app_server;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      server &#123;</span><br><span class="line">          listen [::]:80 ipv6only=on; ## listen for ipv6</span><br><span class="line">          server_name  localhost;</span><br><span class="line">  </span><br><span class="line">          access_log  /opt/swiper/logs/access.log  main;</span><br><span class="line">          error_log   /opt/swiper/logs/error.log;</span><br><span class="line">  </span><br><span class="line">          location = /favicon.ico  &#123;</span><br><span class="line">              empty_gif;</span><br><span class="line">              access_log off;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          #location /static/ &#123;</span><br><span class="line">          #    root   /opt/swiper/frontend/;</span><br><span class="line">          #    expires 30d;</span><br><span class="line">          #    access_log off;</span><br><span class="line">          #&#125;</span><br><span class="line">  </span><br><span class="line">          location / &#123;</span><br><span class="line">              proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">              proxy_set_header Host $http_host;</span><br><span class="line">              proxy_redirect off;</span><br><span class="line">              proxy_pass http://app_server_ipv6;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>反向代理    nginx.conf：<code>proxy pass http://app_server</code></p>
</li>
<li><p>负载均衡</p>
<ul>
<li>轮询：rr（默认）</li>
<li>权重：weight</li>
<li>IP哈希：ip_hash</li>
<li>最小连接数：least_conn</li>
</ul>
</li>
<li><p>其他负载均衡</p>
<ul>
<li>LVS</li>
<li>HAProxy</li>
<li>F5</li>
</ul>
</li>
<li><p>可以不使用nginx，直接用gunicorn吗？</p>
<ul>
<li>Nginx相对于Gunicorn来说更安全</li>
<li>Nginx可以用作负载均衡</li>
</ul>
</li>
<li><p>处理静态文件相关配置</p>
<p>```json<br>location /static/ {</p>
<pre><code>        root   /opt/swiper/frontend/;
        expires 30d;
        access_log off;
    &#125;
</code></pre>
<p>location /medias/ {</p>
<pre><code>        root   /opt/swiper/frontend/;
        expires 30d;
        access_log off;
    &#125;
</code></pre>
<h2 id="七、服务器架构"><a href="#七、服务器架构" class="headerlink" title="七、服务器架构"></a>七、服务器架构</h2></li>
</ul>
<h2 id="八、动静分离"><a href="#八、动静分离" class="headerlink" title="八、动静分离"></a>八、动静分离</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/03/26/python-web-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/26/python-web-project/" class="post-title-link" itemprop="url">python-web-project</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-26 00:00:00" itemprop="dateCreated datePublished" datetime="2019-03-26T00:00:00+08:00">2019-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-27 13:39:09" itemprop="dateModified" datetime="2022-08-27T13:39:09+08:00">2022-08-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WEB后端服务第21天-项目第一天"><a href="#WEB后端服务第21天-项目第一天" class="headerlink" title="WEB后端服务第21天-项目第一天"></a>WEB后端服务第21天-项目第一天</h1><h2 id="一、搭建项目团队开发平台"><a href="#一、搭建项目团队开发平台" class="headerlink" title="一、搭建项目团队开发平台"></a>一、搭建项目团队开发平台</h2><p>git强制覆盖文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u --force origin master</span><br></pre></td></tr></table></figure>

<p>git新建分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git remote remove origin</span><br><span class="line">git remote add origin git@github.com:orggittest/OneGouAPI.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;...&quot;</span><br><span class="line">git checkout -b test_city  # 新建分支</span><br><span class="line">git push -u origin test_city</span><br></pre></td></tr></table></figure>

<p>git克隆特定分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b test_city https://github.com/XA1903LastTeam/OneGouAPI.git</span><br></pre></td></tr></table></figure>

<h2 id="二、Docker的基本用法与快速部署项目"><a href="#二、Docker的基本用法与快速部署项目" class="headerlink" title="二、Docker的基本用法与快速部署项目"></a>二、Docker的基本用法与快速部署项目</h2><p>主流的开发模式：DevOps开发即运维</p>
<p>Docker是基于容器技术（虚拟技术），包含Docker仓库、镜像、容器。docker.io安装完成以后，默认存在两个进程，即Client和Server(守护进程 daemon)。一个镜像可以运行多次，每一次都会产生容器子进程。</p>
<p>docker安装参考：<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/debian-docker-install.html">https://www.runoob.com/docker/debian-docker-install.html</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install docker.io</span><br></pre></td></tr></table></figure>

<h3 id="2-1-常用命令"><a href="#2-1-常用命令" class="headerlink" title="2.1 常用命令"></a>2.1 常用命令</h3><ul>
<li>docker version</li>
<li>docker search 镜像名</li>
<li>docker pull 镜像全名</li>
<li>docker images 查看所有本地镜像</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># docker images </span><br><span class="line">REPOSITORY                 TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">redis                      latest    417b52ccc966   2 weeks ago   111MB</span><br><span class="line">rustdesk/rustdesk-server   latest    474877505289   5 weeks ago   101MB</span><br></pre></td></tr></table></figure>

<ul>
<li>docker run 启动镜像</li>
</ul>
<p>​    同步运行镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name redis1 redis</span><br></pre></td></tr></table></figure>

<p>​    ctrl+c退出</p>
<ul>
<li>查看docker容器进程</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps -l</span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@5000890509hax:~# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS                      PORTS                    NAMES</span><br><span class="line">02a19f608650        redis               &quot;docker-entrypoint.s…&quot;   About a minute ago   Up About a minute           0.0.0.0:6377-&gt;6379/tcp   redis2</span><br><span class="line">4e900edf5614        redis               &quot;docker-entrypoint.s…&quot;   13 minutes ago       Exited (0) 12 minutes ago                            redis1</span><br><span class="line">7130868f61b7        redis               &quot;docker-entrypoint.s…&quot;   18 minutes ago       Exited (0) 12 minutes ago                            beautiful_napier</span><br></pre></td></tr></table></figure>

<p>后台运行，且映射端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit --name redis2 -p 6377:6379 redis</span><br><span class="line">02a19f608650b3168b9284a495af5127fc429065268ca1e942a12f3a60b80c4f</span><br></pre></td></tr></table></figure>

<p>删除容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm redis1</span><br></pre></td></tr></table></figure>

<p>停止容器进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop redis1</span><br></pre></td></tr></table></figure>

<p>启动容器进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start redis1</span><br></pre></td></tr></table></figure>

<p>删除镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi 镜像名或IMAGE_ID</span><br></pre></td></tr></table></figure>

<p>Python测试连接的代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;2a01:4f9:6a:49e7:1019:8544:fcdc:1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;port&#x27;</span>: argv[<span class="number">1</span>],</span><br><span class="line">    <span class="string">&#x27;db&#x27;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">client = Redis(**config)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Redis连接成功！%s&#x27;</span> % <span class="built_in">str</span>(config))</span><br></pre></td></tr></table></figure>

<p>以上内容是test_conn.py文件的，运行脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python test_conn.py 6377</span><br></pre></td></tr></table></figure>

<p>练习任务：</p>
<p>docker部署mysql，并写一个mysql的测试程序。</p>
<p>注：运行镜像是通过-e参数指定root的口令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd -p 3306:3306 --name master -e MYSQL_ROOT_PASSWORD=root mysql</span><br><span class="line">docker run --privileged  # privileged参数可以解决iptables error</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ERROR: problem running iptables: iptables v1.6.1: can<span class="string">&#x27;t initialize iptables table `filter&#x27;</span>: Permission denied (you must be root) Perhaps iptables or your kernel needs to be upgraded.</span></span><br><span class="line">iptables -I INPUT -p tcp --dport 8000 -j ACCEPT # 开放端口</span><br><span class="line">iptables -L -n</span><br></pre></td></tr></table></figure>

<p>进入容器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec redis1 ls</span><br></pre></td></tr></table></figure>

<p>以上只执行redis1容器的命令，查看当前容器的工作目录下的文件，可以使用-it进入容器内部。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it redis1 /bin/sh</span><br></pre></td></tr></table></figure>

<p>使用root用户的方式进入docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it --user root &lt;container id&gt; /bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="2-3-Dockerfile的用法"><a href="#2-3-Dockerfile的用法" class="headerlink" title="2.3 Dockerfile的用法"></a>2.3 Dockerfile的用法</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ubuntu-dev:latest</span><br><span class="line"><span class="keyword">MAINTAINER</span> disen <span class="number">2272096201</span>@qq.com</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /usr/src</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt install cron</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/dabaicai233/v2ex.git</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip3 install scrapy</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /usr/src/v2ex/v2ex</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x start_spider.sh</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> crontab crontab.cron</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> python3</span></span><br></pre></td></tr></table></figure>

<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tgridcloudewsp/ubuntui386xenialme:latest</span><br><span class="line"><span class="keyword">USER</span> root <span class="comment"># 指定root用户</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y git</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y python3-pip</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> Private <span class="number">1174185292</span>@qq.com</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /usr/src</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt install cron -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/orggittest/OneGuyAPI.git  <span class="comment"># github仓库设置public</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip3 install -r requirements.txt</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x auto_down.sh</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> crontab auto_down.cron</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> python3 manage.py runserver localhost:80</span></span><br></pre></td></tr></table></figure>

<p>生成镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t onebuy:1.0 .</span><br></pre></td></tr></table></figure>

<p>导入导出镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker save -o ~/project.tar project</span><br><span class="line">docker load --input ~tag.tar</span><br><span class="line">docker load &lt; ~/tag.tar</span><br><span class="line">docker tag &lt;IMAGE ID&gt; onebuy:latest</span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务第22天-Django项目第2天"><a href="#WEB后端服务第22天-Django项目第2天" class="headerlink" title="WEB后端服务第22天-Django项目第2天"></a>WEB后端服务第22天-Django项目第2天</h1><p><a target="_blank" rel="noopener" href="http://m.yiguo.com/">http://m.yiguo.com</a></p>
<h2 id="一、项目页面与数据分析"><a href="#一、项目页面与数据分析" class="headerlink" title="一、项目页面与数据分析"></a>一、项目页面与数据分析</h2><h2 id="二、分类与商品模型"><a href="#二、分类与商品模型" class="headerlink" title="二、分类与商品模型"></a>二、分类与商品模型</h2><h2 id="三、广告、推荐等首页模型"><a href="#三、广告、推荐等首页模型" class="headerlink" title="三、广告、推荐等首页模型"></a>三、广告、推荐等首页模型</h2><h2 id="四、用户相关的模型"><a href="#四、用户相关的模型" class="headerlink" title="四、用户相关的模型"></a>四、用户相关的模型</h2><h2 id="五、缓存相关"><a href="#五、缓存相关" class="headerlink" title="五、缓存相关"></a>五、缓存相关</h2><h2 id="六、订单相关"><a href="#六、订单相关" class="headerlink" title="六、订单相关"></a>六、订单相关</h2><h1 id="WEB后端服务第23天-Django项目第3天"><a href="#WEB后端服务第23天-Django项目第3天" class="headerlink" title="WEB后端服务第23天-Django项目第3天"></a>WEB后端服务第23天-Django项目第3天</h1><h2 id="一、form表单类"><a href="#一、form表单类" class="headerlink" title="一、form表单类"></a>一、form表单类</h2><h2 id="二、自定义小部件widget"><a href="#二、自定义小部件widget" class="headerlink" title="二、自定义小部件widget"></a>二、自定义小部件widget</h2><h2 id="三、django中邮件发送"><a href="#三、django中邮件发送" class="headerlink" title="三、django中邮件发送"></a>三、django中邮件发送</h2><h3 id="3-1-选择邮箱"><a href="#3-1-选择邮箱" class="headerlink" title="3.1 选择邮箱"></a>3.1 选择邮箱</h3><p>在此配置了163邮箱，从设置页面中获取到smtp的服务器相关信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EMAIL_HOST = <span class="string">&#x27;smtp.163.com&#x27;</span></span><br><span class="line">EMAIL_PORT = <span class="number">25</span></span><br><span class="line">EMAIL_HOST_USER = <span class="string">&#x27;z1174....@163.com&#x27;</span></span><br><span class="line">EMAIL_HOST_PASSWORD = <span class="string">&#x27;******&#x27;</span></span><br></pre></td></tr></table></figure>

<p>EMAIL_HOST_PASSWORD使用了授权码。</p>
<h3 id="3-2-django-core-mail-send-mail"><a href="#3-2-django-core-mail-send-mail" class="headerlink" title="3.2 django.core.mail.send_mail()"></a>3.2 django.core.mail.send_mail()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.mail <span class="keyword">import</span> send_mail <span class="keyword">as</span> send_163_email,  get_connection</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_mail</span>(<span class="params">request, email</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;send_mail&#x27;</span>, email)</span><br><span class="line"></span><br><span class="line">    subtitle = <span class="string">&#x27;用户激活通知&#x27;</span></span><br><span class="line">    message = <span class="string">&#x27;&lt;html&gt;注册用户，&lt;a href=&quot;/&quot;&gt;请先激活&lt;/a&gt;&lt;/html&gt;&#x27;</span></span><br><span class="line">    send_163_email(subtitle, <span class="string">&#x27;&#x27;</span>, html_message=message, from_email=<span class="string">&#x27;z1174185292w@163.com&#x27;</span>, recipient_list=[email])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">        <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;发送成功&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;info&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;email&#x27;</span>: email,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-3-Python原生"><a href="#3-3-Python原生" class="headerlink" title="3.3 Python原生"></a>3.3 Python原生</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br></pre></td></tr></table></figure>

<h1 id="WEB服务后端第24天-Django项目第4天"><a href="#WEB服务后端第24天-Django项目第4天" class="headerlink" title="WEB服务后端第24天-Django项目第4天"></a>WEB服务后端第24天-Django项目第4天</h1><h2 id="一、django的接口跨域请求"><a href="#一、django的接口跨域请求" class="headerlink" title="一、django的接口跨域请求"></a>一、django的接口跨域请求</h2><p>请求URL中的同源：协议、域名和端口，任何一种不同都是跨域请求。</p>
<h3 id="1-1-安装库"><a href="#1-1-安装库" class="headerlink" title="1.1 安装库"></a>1.1 安装库</h3><p>使用CORS解决跨域请求问题，django原始方式，在创建响应对象后，增加cors相关的响应头，如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">response[<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>] = <span class="string">&quot;*&quot;</span></span><br><span class="line">response[<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>] = <span class="string">&quot;POST, GET, OPTIONS&quot;</span></span><br><span class="line">response[<span class="string">&quot;Access-Control-Max-Age&quot;</span>] = <span class="string">&quot;1000&quot;</span></span><br><span class="line">response[<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>] = <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果跨域请求的接口较多，也可以使用第三方插件django-cors-headers来快速配置，类似于flask-cors。pip安装命令如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure>

<h3 id="1-2-配置"><a href="#1-2-配置" class="headerlink" title="1.2 配置"></a>1.2 配置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">	...</span><br><span class="line">	<span class="string">&#x27;corsheaders&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">	...</span><br><span class="line">    <span class="string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cors设置-白名单</span></span><br><span class="line">CORS_ORIGIN_WHITELIST = (</span><br><span class="line">	<span class="string">&#x27;http://localhost:9000&#x27;</span>,  <span class="comment"># 允许跨域请求的协议、域名和端口</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># CORS_ORIGIN_ALLOW_ALL = True  # 允许所有的源，与白名单相同。</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span>  <span class="comment"># 启动cookie</span></span><br></pre></td></tr></table></figure>

<p>更多详细配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 跨域允许的请求方式（可选）</span></span><br><span class="line">CORS_ALLOW_METHODS = (</span><br><span class="line">	<span class="string">&#x27;DELETE&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;OPTIONS&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PATCH&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PUT&#x27;</span>,</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 跨域允许的头部参数（可选）</span></span><br><span class="line">CORS_ALLOW_HEADERS = (</span><br><span class="line">	<span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X_FILENAME&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;accept_encoding&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;authorization&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;content-type&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;dnt&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;origin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;user-agent&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;x-csrftoken&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;x-requested-with&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Pragma&#x27;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="1-3-测试跨域请求"><a href="#1-3-测试跨域请求" class="headerlink" title="1.3 测试跨域请求"></a>1.3 测试跨域请求</h3><p>在static静态资源下，创建index.html，内容如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;login()&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        url = <span class="string">&#x27;http://localhost:8000/user/?action=login&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        data = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;disen888666&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">password</span>: <span class="string">&#x27;Disen666&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">fetch</span>(url, &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">body</span>:<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">resp</span> =&gt;</span> resp.<span class="title function_">json</span>())</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;result&#x27;</span>).<span class="property">innerHTML</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">get_info</span>(data.<span class="property">data</span>.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">2000</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">get_info</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;开始查询用户: &#x27;</span>+id)</span></span><br><span class="line"><span class="language-javascript">        url = <span class="string">&#x27;http://localhost:8000/user/?id=&#x27;</span>+id;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">fetch</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">resp</span>=&gt;</span>resp.<span class="title function_">json</span>())</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(data.<span class="property">code</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                     <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;result&#x27;</span>).<span class="property">innerHTML</span> = data.<span class="property">data</span>.<span class="property">phone</span>+<span class="string">&quot;---&gt;&quot;</span>+data.<span class="property">data</span>.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;result&#x27;</span>).<span class="property">innerHTML</span> = data.<span class="property">msg</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在后端的user模块中创建serializers.py，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> AppUser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = AppUser</span><br><span class="line">        fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;phone&#x27;</span>, <span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;img1&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>user模块的urls.py的内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> AppUserView</span><br><span class="line"></span><br><span class="line">app_name = <span class="string">&#x27;user&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, csrf_exempt(AppUserView.as_view())),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>配置总路由：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;user/&#x27;</span>, include(<span class="string">&#x27;user.urls&#x27;</span>)),</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>user模块的views.py内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> UserSerializer</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> AppUser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AppUserView</span>(<span class="title class_ inherited__">APIView</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self,request</span>):</span><br><span class="line">        name = request.data.get(<span class="string">&#x27;name&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">        password = request.data.get(<span class="string">&#x27;password&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">all</span>((name, password)):</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>: <span class="number">100</span>,</span><br><span class="line">                <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;用户名或口令不能为空&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            qs = AppUser.objects.<span class="built_in">filter</span>(name=name)</span><br><span class="line">            <span class="keyword">if</span> qs.exists():</span><br><span class="line">                <span class="comment"># 获取登录的用户信息</span></span><br><span class="line">                login_user = qs.first()</span><br><span class="line">                <span class="keyword">if</span> login_user.auth_key == password:</span><br><span class="line">                    info = UserSerializer(login_user, many=<span class="literal">False</span>).data</span><br><span class="line">                    <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                        <span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">                        <span class="string">&#x27;data&#x27;</span>: &#123;</span><br><span class="line">                            <span class="string">&#x27;id&#x27;</span>: login_user.<span class="built_in">id</span>,</span><br><span class="line">                            <span class="string">&#x27;phone&#x27;</span>: login_user.phone</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                    <span class="string">&#x27;code&#x27;</span>: <span class="number">102</span>,</span><br><span class="line">                    <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;用户名或口令不正确，请重试或联系管理员&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                    <span class="string">&#x27;code&#x27;</span>: <span class="number">101</span>,</span><br><span class="line">                    <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;查无此用户, 可能未激活&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">regist</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,request</span>):</span><br><span class="line">        <span class="comment"># 读取用户信息（读取详情）</span></span><br><span class="line">        <span class="built_in">id</span> = request.GET.get(<span class="string">&#x27;id&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">id</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>: <span class="number">100</span>,</span><br><span class="line">                <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;必须提供id参数&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            login_user = AppUser.objects.get(pk=<span class="built_in">id</span>)</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">                <span class="string">&#x27;data&#x27;</span>: UserSerializer(login_user).data</span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>: <span class="number">101</span>,</span><br><span class="line">                <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;查无此用户&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="comment"># 用户登录或注册</span></span><br><span class="line"></span><br><span class="line">        action = request.GET.get(<span class="string">&#x27;action&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> action == <span class="string">&#x27;login&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.login(request)</span><br><span class="line">        <span class="keyword">elif</span> action == <span class="string">&#x27;regist&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.regist(request)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;</span><br><span class="line">                <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;请求无效， 请确定是否提供action参数&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="comment"># 修改用户信息（头像、口令、激活）</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="comment"># 注销用户</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>【注意】APIView生成的request.data表示上传的json或原始的数据，是一个dict类型。</p>
<p>对于get请求，前端的代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function get_info(id) &#123;</span><br><span class="line">        alert(&#x27;开始查询用户: &#x27;+id)</span><br><span class="line">        url = &#x27;http://localhost:8000/user/?id=&#x27;+id;</span><br><span class="line">        fetch(url).then(resp=&gt;resp.json())</span><br><span class="line">            .then(data=&gt;&#123;</span><br><span class="line">                if(data.code==200)&#123;</span><br><span class="line">                     document.getElementById(&#x27;result&#x27;).innerHTML = data.data.phone+&quot;---&gt;&quot;+data.data.name;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    document.getElementById(&#x27;result&#x27;).innerHTML = data.msg;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>可以在登录成功后，根据响应的id，继续查询用户的详细信息。</p>
<h2 id="二、接口的单元测试（自动化）"><a href="#二、接口的单元测试（自动化）" class="headerlink" title="二、接口的单元测试（自动化）"></a>二、接口的单元测试（自动化）</h2><p>针对unittest的TestCase单元测试类，和它们的每个测试单元函数的执行顺序问题。</p>
<h3 id="2-1-单个测试"><a href="#2-1-单个测试" class="headerlink" title="2.1 单个测试"></a>2.1 单个测试</h3><p>在test模块下，test_user.py中声明单元测试类和测试业务功能方法，详细如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unittest <span class="keyword">import</span> TestCase</span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserTestCase</span>(<span class="title class_ inherited__">TestCase</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;---init--&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_02_get_info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--info---&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_01_login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--login---&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDown</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;---over---&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure>

<p>每一个单元方法执行时，之前会执行setUp()初始化资源，之后会执行tearDown()回收资源。</p>
<p>【注意】多个方法名，默认按ASCII排序，不按声明的先后顺序，所以常以“test序号业务名称()”来声明函数。</p>
<p>以上代码常规的单个测试单元类，也可以使用TestSuite和TextTestRunner两个类来运行。如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unittest <span class="keyword">import</span> TestSuite, TextTestRunner</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">suite</span>():</span><br><span class="line">    suite_ = TestSuite()  <span class="comment"># 创建测试套件类</span></span><br><span class="line"></span><br><span class="line">    suite_.addTest(UserTestCase.test_get_info)  <span class="comment"># 添加套件的测试方法</span></span><br><span class="line">    suite_.addTest(UserTestCase.test_login)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> suite_</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    runner = TextTestRunner()</span><br><span class="line">    runner.run(suite())</span><br></pre></td></tr></table></figure>

<h3 id="2-2-多个套件的单元测试"><a href="#2-2-多个套件的单元测试" class="headerlink" title="2.2 多个套件的单元测试"></a>2.2 多个套件的单元测试</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> unittest <span class="keyword">import</span> TestSuite, TextTestRunner, TestCase</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderTestCase</span>(<span class="title class_ inherited__">TestCase</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_01_add</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--add order--&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_02_pay</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--pay order--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserTestCase</span>(<span class="title class_ inherited__">TestCase</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;---init--&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_02_get_info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--info---&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_01_login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--login---&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDown</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;---over---&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">suite1</span>():</span><br><span class="line">    suite_ = TestSuite()</span><br><span class="line"></span><br><span class="line">    suite_.addTest(UserTestCase.test_01_login)</span><br><span class="line">    suite_.addTest(UserTestCase.test_02_get_info)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> suite_</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">suite2</span>():</span><br><span class="line">    suite_ = TestSuite()</span><br><span class="line"></span><br><span class="line">    suite_.addTest(OrderTestCase.test_01_add)</span><br><span class="line">    suite_.addTest(OrderTestCase.test_02_pay)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> suite_</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    TextTestRunner().run(TestSuite((suite2(), suite1())))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>TestSuite()中可以传入多个元组对象，运行的顺序则从左开始向右进行。</p>
<h2 id="WEB后端第25天-Django项目第5天"><a href="#WEB后端第25天-Django项目第5天" class="headerlink" title="# WEB后端第25天-Django项目第5天"></a># WEB后端第25天-Django项目第5天</h2><h2 id="一、vue-js的vue-cli的应用"><a href="#一、vue-js的vue-cli的应用" class="headerlink" title="一、vue.js的vue cli的应用"></a>一、vue.js的vue cli的应用</h2><h3 id="1-1-安装node-js"><a href="#1-1-安装node-js" class="headerlink" title="1.1 安装node.js"></a>1.1 安装node.js</h3><p>node.js官网：<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></p>
<p>安装完成后，需要配置global和cache缓存的目录<code>（默认在&#123;User_home&#125;/AppData/Roaming/npm）</code>下，可以执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix &quot;E:\nodejs\node_global&quot;</span><br><span class="line">npm config set cache &quot;E:\nodejs\node_cache&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">另外，在环境变量path中，增加node_global的全路径</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">E:\nodejs\node_global\node_modules</span><br></pre></td></tr></table></figure>

<p>验证安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<h3 id="1-2-安装Vue-CLI脚手架"><a href="#1-2-安装Vue-CLI脚手架" class="headerlink" title="1.2 安装Vue CLI脚手架"></a>1.2 安装Vue CLI脚手架</h3><p>文档：<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">https://cli.vuejs.org/zh/</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/quick-start.html">https://cn.vuejs.org/guide/quick-start.html</a></p>
<p>安装@vue/cli的模块，安装之后，vue的相关命令则可以使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<p>创建vue项目</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create project1</span><br></pre></td></tr></table></figure>

<p>注意项目名称必须是小写字母。</p>
<p>创建项目过程中，按以下方式选择：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. Manually select features (自定义)-&gt; 回车后下一步</span><br><span class="line">2. 选择功能模块（空格-选择/取消，回车-确认选择）</span><br><span class="line">	- Babel</span><br><span class="line">	- Progressive Web App (PWA) Support</span><br><span class="line">	- Router</span><br><span class="line">	- Vuex</span><br><span class="line">3. Use history mode for router? (Y/n) y</span><br><span class="line">4. In package.json 配置文件 回车下一步</span><br><span class="line">5. Save this as a preset for future projects? (y/N) n</span><br></pre></td></tr></table></figure>

<p>以上确认后，则会创建项目。等待一分钟左右，创建成功后，会高亮显示</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd oneguoweb</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<p>进入项目目录中，运行npm run serve则启动项目。项目启动成功后：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">onegouapp@0.1.0 serve</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">vue-cli-service serve</span></span><br><span class="line"></span><br><span class="line"> INFO  Starting development server...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> DONE  Compiled successfully in 25347ms                                                                                                                    14:43:46</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  App running at:</span><br><span class="line">  - Local:   http://localhost:8080/</span><br><span class="line">  - Network: http://192.168.200.66:8080/</span><br><span class="line"></span><br><span class="line">  Note that the development build is not optimized.</span><br><span class="line">  To create a production build, run npm run build.</span><br></pre></td></tr></table></figure>

<p>DONE表示完成。Local是本地访问地址，Network是远程访问地址。</p>
<h2 id="二、Vue-js的模块化"><a href="#二、Vue-js的模块化" class="headerlink" title="二、Vue.js的模块化"></a>二、Vue.js的模块化</h2><p>项目代码参考：<code>git@github.com:disenQF/OneGuoWeb.git</code></p>
<p>在components下声明组件，如Swiper.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button class=&quot;btn btn-primary&quot;&gt;我是组件按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Swiper&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="三、Node-js部署Vue-js项目"><a href="#三、Node-js部署Vue-js项目" class="headerlink" title="三、Node.js部署Vue.js项目"></a>三、Node.js部署Vue.js项目</h2><h2 id="四、Nginx部署Django项目"><a href="#四、Nginx部署Django项目" class="headerlink" title="四、Nginx部署Django项目"></a>四、Nginx部署Django项目</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/03/26/python-%E7%88%AC%E8%99%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/26/python-%E7%88%AC%E8%99%AB/" class="post-title-link" itemprop="url">python-爬虫</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-26 00:00:00" itemprop="dateCreated datePublished" datetime="2019-03-26T00:00:00+08:00">2019-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-27 14:31:45" itemprop="dateModified" datetime="2022-09-27T14:31:45+08:00">2022-09-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="一、CURL的使用"><a href="#一、CURL的使用" class="headerlink" title="一、CURL的使用"></a>一、CURL的使用</h1><p>【注意】安装的时候可能会遇到报错，有可能是openssl没装。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install curl</span><br><span class="line">apt install openssl</span><br><span class="line">apt install openssl-dev</span><br></pre></td></tr></table></figure>

<p>请求测试网址：<a target="_blank" rel="noopener" href="http://httpbin.org/">http://httpbin.org</a></p>
<p>本地搭建请求测试网址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull kennethreitz/httpbin</span><br><span class="line">docker run -p 80:80 kennethreitz/httpbin</span><br></pre></td></tr></table></figure>

<p><strong>HTTP PROXY代理安装</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install tinyproxy</span><br><span class="line">vim /etc/tinyproxy/tinyproxy.conf # 修改Port，注释掉Allow 127.0.0.1</span><br><span class="line">tail -f /var/log/tinyproxy/tinyproxy.log # 查看实时日志</span><br></pre></td></tr></table></figure>

<p>一些常用参数的用法</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>-A</td>
<td>设置user-agent</td>
<td>curl -A “Chrome” <a target="_blank" rel="noopener" href="https://www.baidu.com/">https://www.baidu.com</a></td>
</tr>
<tr>
<td>-X</td>
<td>用指定方法请求</td>
<td>curl -X POST <a target="_blank" rel="noopener" href="http://httpbin.org/post">http://httpbin.org/post</a></td>
</tr>
<tr>
<td>-I</td>
<td>只返回请求的头信息</td>
<td>curl -I <a target="_blank" rel="noopener" href="https://baidu.com/">https://baidu.com</a></td>
</tr>
<tr>
<td>-d</td>
<td>以POST方法请求url，并发送相应的参数</td>
<td>-d a=1 -d b=2 -d c=3 -d “a=1&amp;b=2&amp;c=3” -d @filename</td>
</tr>
<tr>
<td>-O</td>
<td>下载文件并以远程的文件名保存</td>
<td>curl -O <a target="_blank" rel="noopener" href="https://lmg.jj20.com/up/allimg/1115/0214221G625/2202141G625-1-lp.jpg">https://lmg.jj20.com/up/allimg/1115/0214221G625/2202141G625-1-lp.jpg</a></td>
</tr>
<tr>
<td>-o</td>
<td>下载文件并以指定的文件名保存</td>
<td>curl -o 1.jpg <a target="_blank" rel="noopener" href="https://lmg.jj20.com/up/allimg/1115/0214221G625/2202141G625-1-lp.jpg">https://lmg.jj20.com/up/allimg/1115/0214221G625/2202141G625-1-lp.jpg</a></td>
</tr>
<tr>
<td>-L</td>
<td>跟随重定向请求</td>
<td>curl -IL <a target="_blank" rel="noopener" href="https://baidu.com/">https://baidu.com</a></td>
</tr>
<tr>
<td>-H</td>
<td>设置头信息</td>
<td>curl -o 1.webp -H “accept:image/webp” <a target="_blank" rel="noopener" href="https://lmg.jj20.com/up/allimg/1115/0214221G625/2202141G625-1-lp.jpg">https://lmg.jj20.com/up/allimg/1115/0214221G625/2202141G625-1-lp.jpg</a></td>
</tr>
<tr>
<td>-k</td>
<td>允许发起不安全的SSL请求</td>
<td></td>
</tr>
<tr>
<td>-b</td>
<td>设置cookies</td>
<td>curl -b a=test <a target="_blank" rel="noopener" href="https://httpbin.org/cookies">https://httpbin.org/cookies</a></td>
</tr>
<tr>
<td>-s</td>
<td>不显示其他无关信息</td>
<td></td>
</tr>
<tr>
<td>-v</td>
<td>显示连接过程中的所有信息</td>
<td></td>
</tr>
</tbody></table>
<p>自定义一个命令，查看本机外网IP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias myip=&quot;curl http://httpbin.org/get|grep -E &#x27;\d+&#x27;|grep -v User-Agent|cut -d &#x27;\&quot;&#x27; -f4&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://www.xiachufang.com/|grep -oP &quot;(?&lt;=src=\&quot;)https://i2\.chuimg\.com/\w+\.jpg&quot;|xargs -i curl --create-dir &#123;&#125; -o ./images/&#123;&#125;</span><br></pre></td></tr></table></figure>



<h2 id="二、wget的使用"><a href="#二、wget的使用" class="headerlink" title="二、wget的使用"></a>二、wget的使用</h2><p>安装：</p>
<p><code>apt install wget</code></p>
<p>参数说明</p>
<table>
<thead>
<tr>
<th>-O</th>
<th>以指定文件名保存下载的文件</th>
<th>wget -O 3.jpg <a target="_blank" rel="noopener" href="http://img.netbian.com/file/2022/0825/115508eowE3.jpg">http://img.netbian.com/file/2022/0825/115508eowE3.jpg</a></th>
</tr>
</thead>
<tbody><tr>
<td>–limit-rate=200k</td>
<td>以指定的速度下载目标文件</td>
<td>wget –limit-rate=200k <a target="_blank" rel="noopener" href="https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4">https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4</a></td>
</tr>
<tr>
<td>-c</td>
<td>断点续传</td>
<td>wget -c –limit-rate=200k <a target="_blank" rel="noopener" href="https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4">https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4</a></td>
</tr>
<tr>
<td>-b</td>
<td>后台下载</td>
<td>wget -bc –limit-rate=200k <a target="_blank" rel="noopener" href="https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4">https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4</a><br /><br />tail -f wget-log</td>
</tr>
<tr>
<td>-U</td>
<td>设置User-Agent</td>
<td>wget -U “Windows IE 10.0” -bc –limit-rate=200k <a target="_blank" rel="noopener" href="https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4">https://ks-xpc19.xpccdn.com/f6061729-e55b-4ac1-8228-e19c1801544e.mp4</a></td>
</tr>
<tr>
<td>–mirror</td>
<td>镜像某个目标网站</td>
<td>wget –mirror -U “Mozilla” -p <a target="_blank" rel="noopener" href="https://requests.readthedocs.io/en/latest/">https://requests.readthedocs.io/en/latest/</a></td>
</tr>
<tr>
<td>-p</td>
<td>下载页面中的所有相关资源</td>
<td>wget –mirror -U “Mozilla” -p <a target="_blank" rel="noopener" href="https://requests.readthedocs.io/en/latest/">https://requests.readthedocs.io/en/latest/</a></td>
</tr>
<tr>
<td>-r</td>
<td>递归下载所有网页中所有的链接</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">镜像下载整个网站并保存到本地</span></span><br><span class="line">wget -c --mirror -U &quot;Mozilla&quot; -p --convert-links https://requests.readthedocs.io/en/latest/</span><br><span class="line">cd requests.readthedocs.io/en/latest/  # index.html目录</span><br><span class="line">python -m http.server  # 启动python的http服务</span><br></pre></td></tr></table></figure>

<p><strong>httpie</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install httpie</span><br><span class="line">pip install httpie</span><br></pre></td></tr></table></figure>

<h1 id="三、scrapy的安装"><a href="#三、scrapy的安装" class="headerlink" title="三、scrapy的安装"></a>三、scrapy的安装</h1><p>scrapy的底层依赖于lxml，twisted，openssl。涉及到系统C库，所以有可能会导致安装失败。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapy</span><br><span class="line">apt install python3-scrapy</span><br></pre></td></tr></table></figure>

<p><strong>scrapy命令</strong></p>
<p>创建项目</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject qianmu</span><br></pre></td></tr></table></figure>

<p><strong>生成spider文件</strong></p>
<p>【注意】爬虫名称不能和项目名称重复</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># scrapy genspider [爬虫名称] [目标网站域名]</span><br><span class="line">scrapy genspider qsrank www.qianmu.org</span><br></pre></td></tr></table></figure>

<p><strong>运行爬虫</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">运行名为qsrank的爬虫</span></span><br><span class="line">scrapy crawl qsrank</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将爬到的数据导出为json文件</span></span><br><span class="line">scrapy crawl qsrank -o qsrank.json</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导出为csv</span></span><br><span class="line">scrapy crawl qsrank -o qsrank.csv -t csv</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">单独运行爬虫文件</span></span><br><span class="line">scrapy runspider qsrank.py</span><br></pre></td></tr></table></figure>

<p><strong>虚拟环境</strong></p>
<p>创建虚拟环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br><span class="line">virtualenv env</span><br><span class="line">virtualenv.exe –p E:\ProgramFiles\Python\Python27\python.exe D:\PythonVirtualenv\27virtualenv </span><br><span class="line">virtualenv.exe –p E:\ProgramFiles\Python\Python37\python.exe D:\PythonVirtualenv\37virtualenv</span><br></pre></td></tr></table></figure>

<p>pip虚拟环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">which</span> pip3</span></span><br><span class="line">/usr/bin/pip3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">cat</span> $(<span class="built_in">which</span> pip)</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/python3</span>  </span><br><span class="line">&quot;&quot;&quot;指定默认解释器, 可修改如#!/home/testscript/xiachufang/env/bin/python&quot;&quot;&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-*- coding: utf-8 -*-</span></span><br><span class="line">import re</span><br><span class="line">import sys</span><br><span class="line">from pip._internal.cli.main import main</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sys.argv[0] = re.sub(r&quot;(-script\.pyw|\.exe)?$&quot;, &quot;&quot;, sys.argv[0])</span><br><span class="line">    sys.exit(main())</span><br><span class="line">    </span><br><span class="line">&quot;&quot;&quot;指定pip环境位置安装模块&quot;&quot;&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt; python3 /home/testscript/xiachufang/env/bin/pip install bottle</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">curl https://sh.rustup.rs -sSf | sh</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">source</span> <span class="string">&quot;<span class="variable">$HOME</span>/.cargo/env&quot;</span></span> </span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">pip3 install cryptography -target=/home/testscript/xiachufang/env/lib/python3.9/site-packages</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">pip3 install scrapy -target=/home/testscript/xiachufang/env/lib/python3.9/site-packages</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">source</span> /home/testscript/xiachufang/env/bin/activate</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">scrapy --version</span>                                   </span><br><span class="line">Scrapy 2.6.2 - no active project</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">deactivate</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$PATH</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">export</span> PATH=<span class="string">&quot;XXX&quot;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>调试爬虫</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入到scrapy控制台，使用的是项目的环境</span></span><br><span class="line">scrapy shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">带一个URL参数，将会自动请求这个url，并在请求成功后进入控制台</span></span><br><span class="line">scrapy shell http://url.com</span><br></pre></td></tr></table></figure>

<p>进入到控制台以后，可以使用以下函数和对象</p>
<table>
<thead>
<tr>
<th>fetch</th>
<th>请求url或者Request对象，注意：请求成功以后会自动将当前作用域内的request和response对象重新赋值</th>
</tr>
</thead>
<tbody><tr>
<td>view</td>
<td>用浏览器打开response对象内的网页</td>
</tr>
<tr>
<td>shelp</td>
<td>打印帮助信息</td>
</tr>
<tr>
<td>spider</td>
<td>相应的spider类的实例</td>
</tr>
<tr>
<td>settings</td>
<td>保存所有配置信息的settings对象</td>
</tr>
<tr>
<td>crawler</td>
<td>当前Crawler对象</td>
</tr>
<tr>
<td>scrapy</td>
<td>scrapy模块</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用项目配置下载网页，然后用浏览器打开网页</span></span><br><span class="line">scrapy view url</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用项目配置下载网页，然后输出至控制台</span></span><br><span class="line">scrapy fetch url</span><br></pre></td></tr></table></figure>

<h2 id="中间件的调用规则"><a href="#中间件的调用规则" class="headerlink" title="中间件的调用规则"></a>中间件的调用规则</h2><p><strong>process_request</strong></p>
<p>在request对象传往downloader的过程中和将下载结果返回给engine过程中调用。当返回不同类型的值得时候，行为也不一样：</p>
<table>
<thead>
<tr>
<th>返回值</th>
<th>行为</th>
</tr>
</thead>
<tbody><tr>
<td>None</td>
<td>一切正常，继续执行其他的中间件链</td>
</tr>
<tr>
<td>Response</td>
<td>停止调用其他process_request和process_exception函数，也不再继续下载该请求，然后走调用process_response的流程</td>
</tr>
<tr>
<td>Request</td>
<td>不再继续调用其他process_request函数，交由调度器重新安排下载</td>
</tr>
<tr>
<td>IgnoreRequest</td>
<td>process_exception函数会被调用，如果没有此方法，则request.errback会被调用，如果errback也没有，则此异常会被忽略，甚至没有日志。</td>
</tr>
</tbody></table>
<p><strong>process_response</strong></p>
<p>在将下载结果返回给engine过程中调用。</p>
<table>
<thead>
<tr>
<th>返回值</th>
<th>行为</th>
</tr>
</thead>
<tbody><tr>
<td>Response</td>
<td>继续调用其他中间件的process_response</td>
</tr>
<tr>
<td>Request</td>
<td>不再继续调用其他process_request函数，交由调度器重新安排下载</td>
</tr>
<tr>
<td>IgnoreRequest</td>
<td>request.errback会被调用，如果errback也没有，则此异常会被忽略，甚至没有日志。</td>
</tr>
</tbody></table>
<p><strong>process_exception</strong></p>
<p>在下载过程中出现异常，或者在process_request中抛出IgnoreResponse异常的时候调用。</p>
<table>
<thead>
<tr>
<th>返回值</th>
<th>行为</th>
</tr>
</thead>
<tbody><tr>
<td>Response</td>
<td>开始中间件链的process_response处理流程</td>
</tr>
<tr>
<td>Request</td>
<td>不再继续调用其他process_request函数，交由调度器重新安排下载</td>
</tr>
<tr>
<td>None</td>
<td>继续调用其他中间件里的process_exception函数</td>
</tr>
</tbody></table>
<p><strong>from_crawler(cls, crawler)</strong></p>
<p>如果存在该函数，则调用该函数创建中间件的实例。如果要写这个函数，一定要返回一个中间件的对象。</p>
<h2 id="内置中间件"><a href="#内置中间件" class="headerlink" title="内置中间件"></a>内置中间件</h2><p>请求robots.txt文件，并解析其中的规则。</p>
<p>‘scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware’,</p>
<p>执行带Basic-auth验证的请求</p>
<p> ‘scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware’,</p>
<p>下载请求超时最大时长</p>
<p> ‘scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware’,</p>
<p>设置默认的请求头信息</p>
<p> ‘scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware’,</p>
<p>设置请求头信息里的User-Agent</p>
<p> ‘scrapy.downloadermiddlewares.useragent.UserAgentMiddleware’,</p>
<p>如果下载失败，是否重试，重试几次</p>
<p> ‘scrapy.downloadermiddlewares.retry.RetryMiddleware’,</p>
<p>实现Meta标签重定向</p>
<p> ‘scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware’,</p>
<p>实现压缩内容的解析（比如gzip）</p>
<p> ‘scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware’,</p>
<p>实现30x的HTTP code的重定向</p>
<p> ‘scrapy.downloadermiddlewares.redirect.RedirectMiddleware’,</p>
<p>实现对cookies的设置管理</p>
<p> ‘scrapy.downloadermiddlewares.cookies.CookiesMiddleware’,</p>
<p>实现IP代理</p>
<p> ‘scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware’,</p>
<p>下载信息的统计</p>
<p> ‘scrapy.downloadermiddlewares.stats.DownloaderStats’,</p>
<p>下载结果的缓存</p>
<p> ‘scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware’]</p>
<p><strong>查看nginx的访问日志</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail -f /var/log/nginx/*.log</span><br><span class="line">tail -f /var/log/nginx/*.log|cut -d &#x27; &#x27; -f1  # 查看访问ip</span><br></pre></td></tr></table></figure>

<p><strong>telnet console</strong></p>
<ul>
<li>settings.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/CatchLight/article/details/<span class="number">119237729</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Scrapy settings for ScrapyDemo project</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动生成的配置，无需关注，不用修改</span></span><br><span class="line">BOT_NAME = <span class="string">&#x27;ScrapyDemo&#x27;</span></span><br><span class="line">SPIDER_MODULES = [<span class="string">&#x27;ScrapyDemo.spiders&#x27;</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">&#x27;ScrapyDemo.spiders&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置UA，但不常用，一般都是在MiddleWare中添加</span></span><br><span class="line">USER_AGENT = <span class="string">&#x27;ScrapyDemo (+http://www.yourdomain.com)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遵循robots.txt中的爬虫规则，很多人喜欢False，当然我也喜欢....</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对网站并发请求总数，默认16</span></span><br><span class="line">CONCURRENT_REQUESTS = <span class="number">32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相同网站两个请求之间的间隔时间，默认是0s。相当于time.sleep()</span></span><br><span class="line">DOWNLOAD_DELAY = <span class="number">3</span></span><br><span class="line"><span class="comment"># 下面两个配置二选一，但其值不能大于CONCURRENT_REQUESTS，默认启用PER_DOMAIN</span></span><br><span class="line"><span class="comment"># 对网站每个域名的最大并发请求，默认8</span></span><br><span class="line">CONCURRENT_REQUESTS_PER_DOMAIN = <span class="number">16</span></span><br><span class="line"><span class="comment"># 默认0，对网站每个IP的最大并发请求，会覆盖上面PER_DOMAIN配置，</span></span><br><span class="line"><span class="comment"># 同时DOWNLOAD_DELAY也成了相同IP两个请求间的间隔了</span></span><br><span class="line">CONCURRENT_REQUESTS_PER_IP = <span class="number">16</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用cookie，默认是True，启用</span></span><br><span class="line">COOKIES_ENABLED = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求头设置，这里基本上不用</span></span><br><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line"><span class="comment">#   &#x27;Accept&#x27;: &#x27;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#x27;,</span></span><br><span class="line"><span class="comment">#   &#x27;Accept-Language&#x27;: &#x27;en&#x27;,</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置启用Spider MiddleWares，Key是class，Value是优先级</span></span><br><span class="line">SPIDER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">&#x27;ScrapyDemo.middlewares.ScrapydemoSpiderMiddleware&#x27;</span>: <span class="number">543</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置启用Downloader MiddleWares</span></span><br><span class="line"></span><br><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">&#x27;ScrapyDemo.middlewares.ScrapydemoDownloaderMiddleware&#x27;</span>: <span class="number">543</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置并启用扩展，主要是一些状态监控</span></span><br><span class="line">EXTENSIONS = &#123;</span><br><span class="line">    <span class="string">&#x27;scrapy.extensions.telnet.TelnetConsole&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置启用Pipeline用来持久化数据</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">&#x27;ScrapyDemo.pipelines.ScrapydemoPipeline&#x27;</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁止控制台使用telnet连接scrapy获取状态，默认是启用。我们使用默认值即可</span></span><br><span class="line">TELNETCONSOLE_ENABLED = <span class="literal">False</span></span><br><span class="line"><span class="comment"># Telnet终端使用的端口范围。默认: [6023, 6073],如果设置为 None 或 0 ， 则使用动态分配的端口</span></span><br><span class="line"><span class="comment"># TELNETCONSOLE_PORT</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># telnet账号，默认：scrapy</span></span><br><span class="line">TELNETCONSOLE_USERNAME = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># telnet密码：默认会自动生成一个密码</span></span><br><span class="line">TELNETCONSOLE_PASSWORD = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Telnet终端监听的接口(interface)。默认: &#x27;127.0.0.1&#x27;</span></span><br><span class="line">TELNETCONSOLE_HOST = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># AutoThrottle是限速节流算法</span></span><br><span class="line"><span class="comment"># 让爬虫程序自适应download_delay和concurrent并发</span></span><br><span class="line">AUTOTHROTTLE_ENABLED = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 爬虫程序启动时，开始对网站发起请求的延迟</span></span><br><span class="line">AUTOTHROTTLE_START_DELAY = <span class="number">5</span></span><br><span class="line"><span class="comment"># 请求到响应的最大允许的延迟时间，必须大于download_delay</span></span><br><span class="line">AUTOTHROTTLE_MAX_DELAY = <span class="number">60</span></span><br><span class="line"><span class="comment"># 并行发送到每个远程服务器的平均请求数，小于CONCURRENT_REQUESTS_PER_DOMAIN和CONCURRENT_REQUESTS_PER_IP</span></span><br><span class="line">AUTOTHROTTLE_TARGET_CONCURRENCY = <span class="number">1.0</span></span><br><span class="line"><span class="comment"># 为每个响应启用显示限制统计信息</span></span><br><span class="line">AUTOTHROTTLE_DEBUG = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HttpCache主要是将每次的请求和响应缓存到本地，可以离线进行处理</span></span><br><span class="line"><span class="comment"># 配置启用HTTP Cache，默认不启用</span></span><br><span class="line">HTTPCACHE_ENABLED = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 缓存的过期时间，0为永不过期</span></span><br><span class="line">HTTPCACHE_EXPIRATION_SECS = <span class="number">0</span></span><br><span class="line"><span class="comment"># 缓存目录名称</span></span><br><span class="line">HTTPCACHE_DIR = <span class="string">&#x27;httpcache&#x27;</span></span><br><span class="line"><span class="comment"># 设置不需要缓存的状态码请求</span></span><br><span class="line">HTTPCACHE_IGNORE_HTTP_CODES = []</span><br><span class="line"><span class="comment"># 此类将缓存保存到本地文件系统，还可以使用其他类保存到数据库</span></span><br><span class="line">HTTPCACHE_STORAGE = <span class="string">&#x27;scrapy.extensions.httpcache.FilesystemCacheStorage&#x27;</span></span><br></pre></td></tr></table></figure>

<p>启动爬虫之后，使用以下命令进入telnet。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># telnet终端监听端口配置为*TELNETCONSOLE_PORT*，默认为6023。</span></span><br><span class="line">telnet localhost 6023</span><br></pre></td></tr></table></figure>

<p>输入账号和密码， 进入交互页面，输入est()，输出引擎状态指标。</p>
<p>For more info see: <a target="_blank" rel="noopener" href="https://docs.scrapy.org/en/latest/topics/telnetconsole.html">https://docs.scrapy.org/en/latest/topics/telnetconsole.html</a></p>
<p><strong>scrapy-redis</strong></p>
<p><a target="_blank" rel="noopener" href="https://scrapy-redis.readthedocs.io/en/stable/">https://scrapy-redis.readthedocs.io/en/stable/</a></p>
<h1 id="四、selenium的使用"><a href="#四、selenium的使用" class="headerlink" title="四、selenium的使用"></a>四、selenium的使用</h1><p><a target="_blank" rel="noopener" href="https://selenium-python-zh.readthedocs.io/en/latest/index.html">https://selenium-python-zh.readthedocs.io/en/latest/index.html</a></p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>selenium是一个自动化测试框架，主要运用其webdriver。</p>
<p><strong>webdriver</strong></p>
<p>支持各大主流浏览器</p>
<p>chromedriver安装:</p>
<p>安装chromedriver，下载压缩包，解压以后，把可执行文件所在的目录放到PATH环境变量里。比如，chromedriver在/home/user/</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:/home/user&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果不设置环境变量，则需要在启动的时候指定chromedriver的路径。</p>
<h2 id="启动浏览器"><a href="#启动浏览器" class="headerlink" title="启动浏览器"></a>启动浏览器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment"># 启动chrome浏览器</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"><span class="comment"># 指定chromedriver的路径并启动chrome</span></span><br><span class="line">driver = webdriver.Chrome(executable_path=<span class="string">&#x27;/home/user/chromedriver&#x27;</span>)</span><br><span class="line"><span class="comment"># 启动chrome-headless</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line">option = Options()</span><br><span class="line">option.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line">driver = webdriver.Chrome(chrome_options=option)</span><br><span class="line"><span class="comment"># 启动phantomjs</span></span><br><span class="line">driver = webdriver.PhantomJs()</span><br></pre></td></tr></table></figure>

<p>chrome-headless是无界面版的chrome，它替代了停止维护的phantomjs。</p>
<h2 id="控制浏览器"><a href="#控制浏览器" class="headerlink" title="控制浏览器"></a>控制浏览器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 访问某个url</span></span><br><span class="line">driver.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line"><span class="comment"># 刷新</span></span><br><span class="line">driver.refresh()</span><br><span class="line"><span class="comment"># 前进</span></span><br><span class="line">driver.forward()</span><br><span class="line"><span class="comment"># 后退</span></span><br><span class="line">driver.back()</span><br><span class="line"><span class="comment"># 退出</span></span><br><span class="line">driver.quit()</span><br><span class="line"><span class="comment"># 当前的url</span></span><br><span class="line">driver.current_url</span><br><span class="line"><span class="comment"># 截图</span></span><br><span class="line">driver.save_screenshot(<span class="string">&#x27;/tmp/test.png&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="元素查找"><a href="#元素查找" class="headerlink" title="元素查找"></a>元素查找</h2><p>find函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="string">&#x27;find_element(By.ID, &#x27;</span><span class="string">&#x27;)&#x27;</span>, <span class="comment"># 查找单个元素，返回单个webElement对象</span></span><br><span class="line"><span class="string">&#x27;find_elements(By.XPATH, &#x27;</span><span class="string">&#x27;)&#x27;</span>, <span class="comment"># 查找多个元素，返回一个列表，包含若干个webElement对象，如果查找不到，则抛出异常</span></span><br></pre></td></tr></table></figure>

<p>by.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">By</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Set of supported locator strategies.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    ID = <span class="string">&quot;id&quot;</span> <span class="comment"># 根据元素的ID查找</span></span><br><span class="line">    XPATH = <span class="string">&quot;xpath&quot;</span> <span class="comment"># 根据xpath表达式查找</span></span><br><span class="line">    LINK_TEXT = <span class="string">&quot;link text&quot;</span> <span class="comment"># 根据链接内的文本查找</span></span><br><span class="line">    PARTIAL_LINK_TEXT = <span class="string">&quot;partial link text&quot;</span> <span class="comment"># 根据链接内的文本是否包含指定的查找文字</span></span><br><span class="line">    NAME = <span class="string">&quot;name&quot;</span> <span class="comment"># 根据元素的name属性查找</span></span><br><span class="line">    TAG_NAME = <span class="string">&quot;tag name&quot;</span> <span class="comment"># 根据标签名查找</span></span><br><span class="line">    CLASS_NAME = <span class="string">&quot;class name&quot;</span> <span class="comment"># 根据元素的class属性</span></span><br><span class="line">    CSS_SELECTOR = <span class="string">&quot;css selector&quot;</span> <span class="comment"># 用css选择器查找</span></span><br></pre></td></tr></table></figure>

<p><strong>page_source</strong></p>
<p>获取整个页面的源码</p>
<p><strong>get_cookie/get_cookies</strong></p>
<p>获取服务器返回的cookie</p>
<p><strong>执行javascript</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将网页滚动到最底部</span></span><br><span class="line">driver.execute(<span class="string">&#x27;window.scrollTo(0, document.body.scrollHeight)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行异步的js函数</span></span><br><span class="line">driver.execute_async_script(<span class="string">&#x27;send_xml_request()&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="等待，wait"><a href="#等待，wait" class="headerlink" title="等待，wait"></a>等待，wait</h2><p>隐式等待</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找某个（某些）元素，如果没有立即查找到，则等待10秒</span></span><br><span class="line">driver.implicityly_wait(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>显式等待</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="comment"># 查找一个按钮</span></span><br><span class="line"><span class="comment"># 最长等待10秒，直到找到查找条件中指定的元素</span></span><br><span class="line">sort_btn = WebDriverWait(driver, <span class="number">10</span>).until(</span><br><span class="line">        EC.presence_of_element_located((</span><br><span class="line">            By.XPATH, <span class="string">&#x27;//div[@class=&quot;f-sort&quot;]/a[2]&#x27;</span>)))</span><br></pre></td></tr></table></figure>

<p>显式等待通常更符合我们的程序逻辑，当我们对页面的加载方式还不太确定的时候，也可以隐式等待。</p>
<h2 id="WebElement"><a href="#WebElement" class="headerlink" title="WebElement"></a>WebElement</h2><p>也有很多的find函数，用法和之前一样。</p>
<p>click</p>
<p>点击某个具体的元素</p>
<p>send_keys</p>
<p>向某个元素（通常是可输入的标签，比如input）发送键盘事件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 向input元素内输入iphone</span></span><br><span class="line"><span class="built_in">input</span>.send_keys(<span class="string">&#x27;iphone&#x27;</span>)</span><br><span class="line"><span class="comment"># 向input发送一个回车键</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"><span class="built_in">input</span>.send_keys(Keys.RETURN)</span><br></pre></td></tr></table></figure>

<p>rect</p>
<p>返回元素的宽和高，以及在屏幕上的坐标</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回结果</span></span><br><span class="line">&#123;<span class="string">u&#x27;height&#x27;</span>: <span class="number">24</span>, <span class="string">u&#x27;width&#x27;</span>: <span class="number">26</span>, <span class="string">u&#x27;x&#x27;</span>:<span class="number">347.1875</span>, <span class="string">u&#x27;y&#x27;</span>: <span class="number">19</span>&#125;</span><br></pre></td></tr></table></figure>

<p>location</p>
<p>返回屏幕上的坐标</p>
<p>text</p>
<p>返回元素内的文本信息。</p>
<p>注意：在selenium内查找元素时，不可以直接查找它的文本，比如写xpath表达式的时候，不可以用text()函数，要先取到节点，然后再用它的text属性取出文本。</p>
<p>get_attribute</p>
<p>get_property</p>
<p>获取元素的属性值，同上，它不可以在选择器里直接写，需要先取到节点，然后再调用这两种方法获取属性值。</p>
<p>value_of_css_property</p>
<p>获取节点的CSS样式属性</p>
<h2 id="报错信息："><a href="#报错信息：" class="headerlink" title="报错信息："></a>报错信息：</h2><p>[8360:2692:0918/111205.897:ERROR:ssl_client_socket_impl.cc(983)] handshake failed; returned -1, SSL error code 1, net_error -101<br>[8360:2692:0918/111206.123:ERROR:ssl_client_socket_impl.cc(983)] handshake failed; returned -1, SSL error code 1, net_error -101</p>
<ol>
<li>Chrome浏览器解决方案：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    options=webdriver.ChromeOptions()</span><br><span class="line">    <span class="comment"># 处理SSL证书错误问题</span></span><br><span class="line">    options.add_argument(<span class="string">&#x27;--ignore-certificate-errors&#x27;</span>)</span><br><span class="line">    options.add_argument(<span class="string">&#x27;-ignore -ssl-errors&#x27;</span>)</span><br><span class="line">    <span class="comment"># 忽略无用的日志</span></span><br><span class="line">    options.add_experimental_option(<span class="string">&quot;excludeSwitches&quot;</span>, [<span class="string">&#x27;enable-automation&#x27;</span>, <span class="string">&#x27;enable-logging&#x27;</span>])</span><br><span class="line">    driver=webdriver.Chrome(chrome_options=options)</span><br><span class="line">    driver.get(<span class="string">u&#x27;https://python.org/&#x27;</span>)</span><br><span class="line">    driver.close()</span><br></pre></td></tr></table></figure>

<p>另外一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--disable-extensions&#x27;</span>)</span><br><span class="line">chrome_options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>,[<span class="string">&#x27;ignore-certificate-errors&#x27;</span>])</span><br><span class="line">chrome_options.add_argument(<span class="string">&#x27;--start-maximized&#x27;</span>)</span><br><span class="line">self.driver = webdriver.Chrome(chrome_options = chrome_options)</span><br><span class="line">size_Dict = driver.get_window_size()</span><br><span class="line">driver.set_window_rect(x=<span class="number">1300</span>, y=<span class="number">100</span>, width=<span class="number">1250</span>, height=<span class="number">1300</span>)  <span class="comment"># 设置浏览器的大小和位置</span></span><br><span class="line"><span class="comment"># driver.maximize_window()    # 最大化浏览器窗口</span></span><br><span class="line">driver.implicitly_wait(<span class="number">20</span>)   <span class="comment"># 隐式等待。网页加载数据需要时间，智能化等待。</span></span><br><span class="line">driver.get(<span class="string">&quot;https://www.amazon.co.jp&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">driver.close</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>对于Firefox，您需要将 accept_untrusted_certs 设置为True：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">profile = webdriver.FirefoxProfile（）</span><br><span class="line">profile.accept_untrusted_certs = <span class="literal">True</span> </span><br><span class="line">driver = webdriver.Firefox（firefox_profile = profile）</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>对于Internet Explorer，您需要设置 acceptSslCerts 所需的功能：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">caps = webdriver.DesiredCapabilities.INTERNETEXPLORER</span><br><span class="line">caps[<span class="string">&#x27;acceptInsecureCerts&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">caps[<span class="string">&#x27;acceptSslCerts&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">driver = webdriver.Ie（capabilities = capabilities）</span><br></pre></td></tr></table></figure>

<h2 id="‘WebDriver’-object-has-no-attribute-‘find-element-by-xpath’"><a href="#‘WebDriver’-object-has-no-attribute-‘find-element-by-xpath’" class="headerlink" title="‘WebDriver’ object has no attribute ‘find_element_by_xpath’"></a>‘WebDriver’ object has no attribute ‘find_element_by_xpath’</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="comment"># driver.find_element_by_xpath(&#x27;//div[@id=&quot;s-top-left&quot;]/a[1]&#x27; # 旧版</span></span><br><span class="line">test_poet1 = driver.find_element(By.XPATH, <span class="string">r&#x27;//*[@id=&quot;new&quot;]/div[1]/div[2]&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="splash"><a href="#splash" class="headerlink" title="splash"></a>splash</h1><p>doc：<a target="_blank" rel="noopener" href="https://splash.readthedocs.io/en/stable/">https://splash.readthedocs.io/en/stable/</a></p>
<ol>
<li><p>Install <a target="_blank" rel="noopener" href="http://docker.io/">Docker</a>. Make sure Docker version &gt;= 17 is installed.</p>
</li>
<li><p>Pull the image:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker pull scrapinghub/splash</span><br></pre></td></tr></table></figure></li>
<li><p>Start the container:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run --name splash -p 8050:8050 --rm scrapinghub/splash</span><br></pre></td></tr></table></figure></li>
<li><p>Splash is now available at 0.0.0.0 at port 8050 (http).</p>
</li>
</ol>
<h2 id="scrapy-splash"><a href="#scrapy-splash" class="headerlink" title="scrapy-splash"></a>scrapy-splash</h2><p><a target="_blank" rel="noopener" href="https://github.com/scrapy-plugins/scrapy-splash">https://github.com/scrapy-plugins/scrapy-splash</a></p>
<h1 id="反爬虫方式"><a href="#反爬虫方式" class="headerlink" title="反爬虫方式"></a>反爬虫方式</h1><h2 id="User-Agent识别"><a href="#User-Agent识别" class="headerlink" title="User-Agent识别"></a>User-Agent识别</h2><p>修改请求头信息里的User-Agent</p>
<h2 id="请求头信息识别"><a href="#请求头信息识别" class="headerlink" title="请求头信息识别"></a>请求头信息识别</h2><p>比如说referer，content-type，请求方法（POST, GET）</p>
<p>构造相应的请求头信息。比如referer。在提取URL的时候，要把URL所在页面的URL也存储起来，并放到request.headers。</p>
<h2 id="异步加载"><a href="#异步加载" class="headerlink" title="异步加载"></a>异步加载</h2><p>需要分析页面的网络请求，从中找出和我们想要的数据相关的请求，并分析它的请求头信息、参数、cookie，然后根据这些信息构造请求。通常都是ajax请求，也有图片请求，比如图片的lazy load，通过js在页面加载后修改图片的src属性。一般都会有其他的自定义属性存在，比如”_src”。总之，可以找到一些ID或者链接。注意观察相关dom节点树上的特殊属性。</p>
<h2 id="请求参数加密"><a href="#请求参数加密" class="headerlink" title="请求参数加密"></a>请求参数加密</h2><p>一般是在前端通过一定的计算，构造出一个哈希值。需要分析前端的代码，找出具体计算的代码逻辑，并用python再实现。如果前端的代码经过混淆，并且代码量十分巨大，可以使用selenium或者splash等引擎去请求。但是，如果爬取的数据需求量比较大，还是要通过直接调用对方的接口的形式去获取数据。</p>
<h2 id="请求结果加密"><a href="#请求结果加密" class="headerlink" title="请求结果加密"></a>请求结果加密</h2><ol>
<li><p>json数据加密</p>
<p>比如携程酒店房型列表接口，用它自己的js解密，或者分析它的js前端逻辑，用python代码实现出来。</p>
</li>
<li><p>CSS加密</p>
<p>比如大众点评，通过CSS样式去代替某个字符。需要同时爬取CSS文件，并且分析CSS文件内的样式，最后定位到svg文件，并分析提取svg内的内容，完成替换。</p>
</li>
<li><p>字体加密</p>
<p>比如猫眼电影，每次随机返回一个字体文件，并且字符也是随机的。需要每次下载对应的字体文件，并解析字体文件和字符之间的对应关系。</p>
</li>
</ol>
<h2 id="Cookie限制"><a href="#Cookie限制" class="headerlink" title="Cookie限制"></a>Cookie限制</h2><p>​    登录、session限制，比如新片场，拿到登录以后的cookie，然后set到头信息里面，这样请求的时候就相当于登录了。</p>
<h2 id="IP频率限制"><a href="#IP频率限制" class="headerlink" title="IP频率限制"></a>IP频率限制</h2><p>​    需要准备大量的IP代理，获得IP代理的方式有：</p>
<pre><code>    1. 自己搭建代理服务器（tinyproxy, squid+动态拨号，DDNS）
    1. 付费购买
    1. 爬取公开网络的代理（可用性比较低）
</code></pre>
<p>控制爬取频率，保持不被封的情况下的最合适的并发数量。</p>
<h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><ol>
<li>尝试可否绕过前端验证，直接请求具体的接口，以绕开验证码。</li>
<li>可以用图片识别库去识别某些比较简单的验证码。</li>
<li>接入云打码平台。</li>
<li>机器学习训练验证码图片库。</li>
</ol>
<p><strong>tesseract-ocr</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt install tesseract-ocr</span><br><span class="line">pip3 install pytesseract</span><br><span class="line">tesseract -v</span><br><span class="line">tesseract test.png output_1 -l eng</span><br><span class="line">python3 tesseract_sample.py test.png</span><br></pre></td></tr></table></figure>

<p>批量获取验证码图片</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq 1 100 | xargs -i curl https://so.gushiwen.cn/RandCode.ashx -o &#123;&#125;.png</span><br></pre></td></tr></table></figure>

<p>将全部图片整合到一个html文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq 1 100 | xargs -i echo &#x27;&lt;img src=&quot;&#123;&#125;.png&quot;/&gt;   &#123;&#125;.png&lt;br/&gt;&#x27;&gt;&gt;test.html</span><br></pre></td></tr></table></figure>

<p>批量识别验证码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq 1 100 | xargs -i python3 tesseract_sample.py &#123;&#125;.png</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Private</p>
  <div class="site-description" itemprop="description">程序语言记录</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Private</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
