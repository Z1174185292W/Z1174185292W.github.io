<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="程序语言记录">
<meta property="og:type" content="website">
<meta property="og:title" content="PeacefulRace">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="PeacefulRace">
<meta property="og:description" content="程序语言记录">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Private">
<meta property="article:tag" content="python, 前端, 后端 ...">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>PeacefulRace</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">PeacefulRace</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">21</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python-web-flask-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python-web-flask-3/" class="post-title-link" itemprop="url">python-web-django</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-17 10:53:05 / 修改时间：11:33:12" itemprop="dateCreated datePublished" datetime="2022-08-17T10:53:05+08:00">2022-08-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WEB后端服务第11天"><a href="#WEB后端服务第11天" class="headerlink" title="WEB后端服务第11天"></a>WEB后端服务第11天</h1><p>【注意】在使用pycharm工具编写Django等框架时，首先在Settings&gt;Languages &amp; Frameworks&gt;下配置Django或其他框架的支持，以便在使用Python Console时更加兼容。常用的配置还有Template Languages，其他按需配置。</p>
<h2 id="一、Django入门"><a href="#一、Django入门" class="headerlink" title="一、Django入门"></a>一、Django入门</h2><h3 id="1-1-基本概念"><a href="#1-1-基本概念" class="headerlink" title="1.1 基本概念"></a>1.1 基本概念</h3><h3 id="1-2-创建环境与app项目"><a href="#1-2-创建环境与app项目" class="headerlink" title="1.2 创建环境与app项目"></a>1.2 创建环境与app项目</h3><p>安装依赖包</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django==<span class="number">2.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure>

<p>进入““终端”CMD命令，通过django-admin命令创建django项目。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject helloDjango</span><br></pre></td></tr></table></figure>

<p>通过django-admin命令创建app应用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startapp mainapp</span><br></pre></td></tr></table></figure>

<p>在一个Django项目中，存在很多的app应用（模块），创建好的app需要注册到主工程中（settings.py）</p>
<h3 id="1-3-django项目结构"><a href="#1-3-django项目结构" class="headerlink" title="1.3 django项目结构"></a>1.3 django项目结构</h3><p>项目结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">helloDjango</span><br><span class="line">	|--- helloDjango 主工程目录</span><br><span class="line">		|--- settings.py	设置文件，数据库连接，app注册，中间件及模板配置</span><br><span class="line">		|--- urls.py	总路由</span><br><span class="line">		|--- wsgi.py	Django实现wsgi的脚本</span><br><span class="line">		|--- __init__.py</span><br><span class="line">	|--- mainapp	应用模块（主）</span><br><span class="line">		|--- __init__.py</span><br><span class="line">		|--- admin.py	# 后台管理配置脚本</span><br><span class="line">		|--- models.py	# 数据模型类声明所在脚本</span><br><span class="line">		|--- views.py	# 声明当前应用的视图处理函数或类</span><br><span class="line">		|--- urls.py	# 自己增加的当前应用模块的子路由</span><br><span class="line">		|--- tests.py	# 当前应用模块的单元测试类</span><br><span class="line">		|--- apps.py	# 声明当前应用的基本信息</span><br><span class="line">	|--- manage.py	 WEB应用的启动脚本，项目工程的入口</span><br></pre></td></tr></table></figure>

<h3 id="1-4-Django请求流程"><a href="#1-4-Django请求流程" class="headerlink" title="1.4 Django请求流程"></a>1.4 Django请求流程</h3><ol>
<li>到urls分发器</li>
<li>urls分发器根据路由规则（正则）分发到views</li>
<li>views去调用Model，交互数据</li>
<li>views将数据渲染到模板中</li>
<li>模板呈现给用户</li>
</ol>
<h2 id="二、数据库连接与ORM模型"><a href="#二、数据库连接与ORM模型" class="headerlink" title="二、数据库连接与ORM模型"></a>二、数据库连接与ORM模型</h2><h3 id="2-1-数据库连接配置"><a href="#2-1-数据库连接配置" class="headerlink" title="2.1 数据库连接配置"></a>2.1 数据库连接配置</h3><p>默认是sqlite3数据库，在使用ORM模型之前，需要先生成迁移文件，再执行迁移命令，在数据库中生成这些模型对应的表。</p>
<ul>
<li>先生成迁移文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br></pre></td></tr></table></figure>

<ul>
<li>开始迁移（生成表、修改表、删除表）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>注意：一旦生成了迁移文件并且迁移成功之后，不要删除迁移文件。</p>
<h3 id="2-2-初步使用ORM模型"><a href="#2-2-初步使用ORM模型" class="headerlink" title="2.2 初步使用ORM模型"></a>2.2 初步使用ORM模型</h3><p>在app模块中的models.py定义一个用户（客户）模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserEntity</span>(models.Model):</span><br><span class="line">    <span class="comment"># 默认情况下会自动创建id主键</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">20</span>)</span><br><span class="line">    age = models.IntegerField(default=<span class="number">0</span>)</span><br><span class="line">    phone = models.CharField(max_length=<span class="number">11</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        <span class="comment"># 指定当前模型类映射成哪一个表</span></span><br><span class="line">        db_table = <span class="string">&#x27;app_user&#x27;</span></span><br></pre></td></tr></table></figure>

<p>模型创建完成后，先后执行生成迁移文件和迁移。</p>
<h3 id="2-3-CURD"><a href="#2-3-CURD" class="headerlink" title="2.3 CURD"></a>2.3 CURD</h3><p>查询</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UserEntity.objects.<span class="built_in">all</span>()	<span class="comment"># 查询所有</span></span><br><span class="line">UserEntity.objects.get(pk=<span class="built_in">id</span>)	<span class="comment"># 根据主键值查询一个实体对象</span></span><br></pre></td></tr></table></figure>

<p>增加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">u = UserEntity()</span><br><span class="line">u.name = <span class="string">&#x27;disen&#x27;</span></span><br><span class="line">u.age = <span class="number">20</span></span><br><span class="line">u.phone = <span class="string">&#x27;177&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存模型对象</span></span><br><span class="line">u.save()</span><br></pre></td></tr></table></figure>

<p>删除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">u = UserEntity.objects.get(<span class="number">1</span>)</span><br><span class="line">u.delete() <span class="comment"># 删除</span></span><br></pre></td></tr></table></figure>

<p>更新</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">u = UserEntity.objects.get(<span class="number">3</span>)</span><br><span class="line">u.name = <span class="string">&#x27;cheng&#x27;</span></span><br><span class="line">u.save()</span><br></pre></td></tr></table></figure>

<h2 id="三、Admin的site站点配置"><a href="#三、Admin的site站点配置" class="headerlink" title="三、Admin的site站点配置"></a>三、Admin的site站点配置</h2><h2 id="四、综合案例-水果管理"><a href="#四、综合案例-水果管理" class="headerlink" title="四、综合案例-水果管理"></a>四、综合案例-水果管理</h2><h3 id="3-1-模型设计"><a href="#3-1-模型设计" class="headerlink" title="3.1 模型设计"></a>3.1 模型设计</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Fruit 水果模型类（name, price, source, cate_type_id）</span><br><span class="line"># FruitImage 水果图片模型类(fruit_id, url, width, height, name)</span><br><span class="line"># CateType 水果分类(name, order_num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Store 水果商店(name, name, boss_name, phone, address, city, lat, lon)</span><br><span class="line"># StoreDetail 水果商店的详情</span><br></pre></td></tr></table></figure>

<h3 id="3-2-模板的基本使用"><a href="#3-2-模板的基本使用" class="headerlink" title="3.2 模板的基本使用"></a>3.2 模板的基本使用</h3><p>循环语句块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for item in items %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>

<p>分支循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if 条件表达式 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; 变量名 &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>在views.py视图函数中，渲染模板</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> render(request, <span class="string">&#x27;fruit/list.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<h3 id="3-3-页面设计"><a href="#3-3-页面设计" class="headerlink" title="3.3 页面设计"></a>3.3 页面设计</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block name %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &quot;base.html&quot; %&#125;</span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务第12天-Django第二天"><a href="#WEB后端服务第12天-Django第二天" class="headerlink" title="WEB后端服务第12天-Django第二天"></a>WEB后端服务第12天-Django第二天</h1><h2 id="一、ORM模型之字段类型和约束"><a href="#一、ORM模型之字段类型和约束" class="headerlink" title="一、ORM模型之字段类型和约束"></a>一、ORM模型之字段类型和约束</h2><h3 id="1-1-字段类型"><a href="#1-1-字段类型" class="headerlink" title="1.1 字段类型"></a>1.1 字段类型</h3><h3 id="1-2-约束"><a href="#1-2-约束" class="headerlink" title="1.2 约束"></a>1.2 约束</h3><h3 id="1-3-FileField和ImageField"><a href="#1-3-FileField和ImageField" class="headerlink" title="1.3 FileField和ImageField"></a>1.3 FileField和ImageField</h3><p>文件字段和图片字段都属于MEDIA的多媒体类型的文件，需要在settings.py设置脚本中指定MEDIA_ROOT、MEDIA_URL、STATIC_URL、STATICFILES_DIRS</p>
<p>注意：使用ImageField时，必须安装Pillow库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pillow</span><br></pre></td></tr></table></figure>

<p>扩展：github: <a target="_blank" rel="noopener" href="https://github.com/disenQF/StoreOA.git">https://github.com/disenQF/StoreOA.git</a></p>
<h2 id="二、模型的Meta元信息"><a href="#二、模型的Meta元信息" class="headerlink" title="二、模型的Meta元信息"></a>二、模型的Meta元信息</h2><p>在模型类中，声明内部类Meta，类成员可以如下的变量：</p>
<ul>
<li>db_table</li>
<li>ordering</li>
<li>verbose_name</li>
<li>verbose_name_plural</li>
<li>unique_together</li>
<li>abstract 布尔类型，表示当前的模型类是否为抽象类，如果是抽象类，则不会创建表。</li>
</ul>
<h3 id="3-渲染模板的render-方法有哪些参数，分别代表什么含义"><a href="#3-渲染模板的render-方法有哪些参数，分别代表什么含义" class="headerlink" title="3. 渲染模板的render()方法有哪些参数，分别代表什么含义"></a>3. 渲染模板的render()方法有哪些参数，分别代表什么含义</h3><ul>
<li>request请求对象，是django.http.HttpRequest类的对象</li>
<li>模板的html文件，是字符串类型，文件位置相对于templates目录的。</li>
<li>context上下文，是dict字典类型，可以使用locals()将本地的变量转成字典对象。</li>
</ul>
<h2 id="三、CURD深度使用"><a href="#三、CURD深度使用" class="headerlink" title="三、CURD深度使用"></a>三、CURD深度使用</h2><h3 id="3-1-了解模型类中的objects是什么？"><a href="#3-1-了解模型类中的objects是什么？" class="headerlink" title="3.1 了解模型类中的objects是什么？"></a>3.1 了解模型类中的objects是什么？</h3><p>默认情况下，由创建模型类的元类在模型类中创建django.db.models.Manager类的对象，并赋给objects。Manager类实际是QuerySet类的子类。</p>
<p>可以在模型类中，创建objects，但是必须为Manager类对象。不能是普通的字段。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CateTypeEntity</span>(models.Model):</span><br><span class="line">	name = models.CharField(max_length)</span><br><span class="line">	<span class="comment"># objects = models.IntegerField(default=0)  # 错误的写法</span></span><br><span class="line">	objects = models.Manager()  <span class="comment"># 正确的写法</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-filter和exclude查询"><a href="#3-2-filter和exclude查询" class="headerlink" title="3.2 filter和exclude查询"></a>3.2 filter和exclude查询</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">模型类.objects.<span class="built_in">filter</span>(属性名__条件=条件值)</span><br><span class="line">模型类.objects.<span class="built_in">filter</span>(属性名=条件值)</span><br><span class="line">模型类.objects.<span class="built_in">filter</span>(属性名__时间标签__条件=条件值)</span><br></pre></td></tr></table></figure>

<p><strong>条件</strong>包含</p>
<ul>
<li>大于gt、小于lt、大于等于gte、小于等于lte</li>
<li>字符串相关：contains包含（区分大小写），icontains，(i)startswith、(i)endswith</li>
<li>null相关：isnull()、isnotnull()</li>
<li>范围：in</li>
</ul>
<p><strong>时间属性</strong>包含</p>
<ul>
<li>year, month, day</li>
<li>hour, minute, second</li>
</ul>
<h3 id="3-3-QuerySet对象的方法"><a href="#3-3-QuerySet对象的方法" class="headerlink" title="3.3 QuerySet对象的方法"></a>3.3 QuerySet对象的方法</h3><p>QuerySet对象的本身是可以被迭代的。</p>
<p>返回QuerySet对象的方法有：</p>
<ul>
<li>filter()</li>
<li>exclude()</li>
<li>all()</li>
<li>value()</li>
<li>values_list()</li>
<li>order_by(‘name’, ‘-city’)</li>
</ul>
<p>统计方法和判断是否存在数据方法</p>
<ul>
<li>count()</li>
<li>exists()</li>
</ul>
<h1 id="WEB后端服务第13天-Django第三天"><a href="#WEB后端服务第13天-Django第三天" class="headerlink" title="WEB后端服务第13天-Django第三天"></a>WEB后端服务第13天-Django第三天</h1><p>官方文档：<a target="_blank" rel="noopener" href="http://docs.djangoproject.com/zh-hans/2.1/">http://docs.djangoproject.com/zh-hans/2.1/</a></p>
<h2 id="一、F和Q的用法"><a href="#一、F和Q的用法" class="headerlink" title="一、F和Q的用法"></a>一、F和Q的用法</h2><p>1.1 F的选择字段值</p>
<p>django.db.models.F用于获取字段的值并参与计算或作业更新条件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FruitEntity.objects.update(price=F(<span class="string">&#x27;price&#x27;</span>) * <span class="number">0.88</span>)  <span class="comment"># 全场8.8折</span></span><br></pre></td></tr></table></figure>

<p>1.2 Q的多条件</p>
<p>Q是用来指定多个查询条件的逻辑关系：与 &amp;，或 |，非 -</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询价格低于1的，或高于200的水果, 或原产地是xian且名字中包含“果”</span></span><br><span class="line">    fruits2 = FruitEntity.objects.<span class="built_in">filter</span>(</span><br><span class="line">        Q(price__lte=<span class="number">1</span>) | Q(price__gte=<span class="number">200</span>) | Q(Q(source=<span class="string">&#x27;xian&#x27;</span>) &amp; Q(name__contains=<span class="string">&quot;果&quot;</span>))).values()</span><br></pre></td></tr></table></figure>



<h2 id="二、原生的SQL语句查询"><a href="#二、原生的SQL语句查询" class="headerlink" title="二、原生的SQL语句查询"></a>二、原生的SQL语句查询</h2><p>针对复杂查询来说，通过QuerySet查询不是特别方便，则使用原生的SQL查询。</p>
<ul>
<li><p>QuerySet提供两种原生SQL查询：</p>
<ol>
<li><p>QuerySet.raw()</p>
<p>要求：查询的字段必须是模型类中声明的字段，且必须存在主键列。查询的结果是RawQuerySet类对象，可以迭代，元素类型是模型类对象。</p>
<p>另外，查询sql语句中可以使用”%s”或”%(name)s”占位符，在其后可以使用元组或字典参数传值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">raw_queryset = FruitEntity.objects.raw(<span class="string">&#x27;select id, name, price from t_fruit where price &lt; %s order by price DESC LIMIT %s, 5&#x27;</span>, (<span class="number">10</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> fruit <span class="keyword">in</span> raw_queryset:</span><br><span class="line">    <span class="built_in">print</span>(fruit)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raw_queryset = FruitEntity.objects.raw(<span class="string">&#x27;select id, name, price from t_fruit where price &lt; %(price)s order by price DESC LIMIT %(page)s, 5&#x27;</span>, &#123;<span class="string">&#x27;price&#x27;</span>:<span class="number">10</span>, <span class="string">&#x27;page&#x27;</span>:<span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>QuerySet.extra()</p>
<p>extra()扩展查询，针对QuerySet查询结果集中，额外增加查询条件或排序等相关操作。返回结果还是<strong>QuerySet</strong>对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">qs1 = FruitEntity.objects.extra(where=[<span class="string">&#x27;price&lt;%s&#x27;</span>], params=[<span class="string">&#x27;10&#x27;</span>])</span><br><span class="line"></span><br><span class="line">qs2 = FruitEntity.objects.extra(where=[<span class="string">&#x27;price&lt;%s or name like %s&#x27;</span>], params=[<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;果&#x27;</span>])</span><br><span class="line"></span><br><span class="line">qs3 = FruitEntity.objects.extra(where=[<span class="string">&#x27;price&lt;%s or name like %s&#x27;</span>, <span class="string">&#x27;source=%s&#x27;</span>], params=[<span class="string">&#x27;100&#x27;</span>, <span class="string">&#x27;果&#x27;</span>, <span class="string">&#x27;xian&#x27;</span>])</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>使用django.db.connection数据库连接对象进行原生SQL查询。</p>
<p>connection对象表示与数据库连接的对象，可以通过connection连接对象获取游标cursor对象，再通过cursor的execute()/fetchall()/rowcount相关方法或函数来执行原生的SQL和执行结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cursor = connection.cursor()</span><br><span class="line">cursor.execute(<span class="string">&#x27;select * from t_fruit&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor.fetchall():</span><br><span class="line">	<span class="built_in">print</span>(row)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cursor.execute(<span class="string">&#x27;update t_fruit set price=2 where id=1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(cursor.rowcount)</span><br><span class="line">connection.commit()  <span class="comment"># 提交更新</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="三、模型类之间的关系"><a href="#三、模型类之间的关系" class="headerlink" title="三、模型类之间的关系"></a>三、模型类之间的关系</h2><h3 id="3-1-扩展：显性方式创建objects"><a href="#3-1-扩展：显性方式创建objects" class="headerlink" title="3.1 扩展：显性方式创建objects"></a>3.1 扩展：显性方式创建objects</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">OrderManager</span>(models.Manager):</span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">get_queryset</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().get_queryset().<span class="built_in">filter</span>(~models.Q(pay_status=<span class="number">5</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计2018年全年销售总额</span></span><br><span class="line">OrderModel.objects.<span class="built_in">filter</span>(create_time__year=<span class="number">2018</span>).aggregate(total_price=Sum(<span class="string">&#x27;price&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="3-2-一对一关系"><a href="#3-2-一对一关系" class="headerlink" title="3.2 一对一关系"></a>3.2 一对一关系</h3><p>一对一的关系可以通过models.OneToOneField(关联模型类, on_delete=models.CASCADE)建立，on_delete除了CASCADE级联删除之外，还有models.SET_NULL级联设置为null。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RealProfile</span>(models.Model):</span><br><span class="line">    <span class="comment"># 声明一对一的关联关系</span></span><br><span class="line">    user = models.OneToOneField(UserEntity, verbose_name=<span class="string">&#x27;账号&#x27;</span>, on_delete=models.CASCADE)</span><br><span class="line">    real_name = models.CharField(max_length=<span class="number">20</span>, verbose_name=<span class="string">&#x27;真实姓名&#x27;</span>)</span><br><span class="line">    number = models.CharField(max_length=<span class="number">30</span>, verbose_name=<span class="string">&#x27;证件号&#x27;</span>)</span><br><span class="line">    real_type = models.IntegerField(verbose_name=<span class="string">&#x27;证件类型&#x27;</span>, choices=((<span class="number">0</span>, <span class="string">&#x27;身份证&#x27;</span>), (<span class="number">1</span>, <span class="string">&#x27;护照&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;驾驶证&#x27;</span>)))</span><br><span class="line">    image1 = models.ImageField(upload_to=<span class="string">&#x27;user/real&#x27;</span>, verbose_name=<span class="string">&#x27;正面照&#x27;</span>)</span><br><span class="line">    image2 = models.ImageField(upload_to=<span class="string">&#x27;user/real&#x27;</span>, verbose_name=<span class="string">&#x27;反面照&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>主表：用户表，从表：实名认证表</p>
<p>从表对象获取主表的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">u1 = RealProfile.objects.<span class="built_in">filter</span>(real_name=<span class="string">&#x27;狄青&#x27;</span>).first()</span><br><span class="line">u1.user.phone  <span class="comment"># 直接访问主表对象的数据</span></span><br></pre></td></tr></table></figure>

<p>主表中获取从表的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">login_u1 = UserEntity.objects.get(pk=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 以隐性方式 读取从表的数据：对象.关联模型类全小写名称.属性</span></span><br><span class="line">login_u1.realprofile.number  <span class="comment"># realprofile 一对一的关系模型类的名称（全小写）</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-一对多或多对一的关系"><a href="#3-3-一对多或多对一的关系" class="headerlink" title="3.3 一对多或多对一的关系"></a>3.3 一对多或多对一的关系</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明水果商品与购物车的关系表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FruitCartEntity</span>(models.Model):</span><br><span class="line">    cart = models.ForeignKey(CartEntity, on_delete=models.CASCADE, verbose_name=<span class="string">&#x27;购物车&#x27;</span>)</span><br><span class="line">    fruit = models.ForeignKey(FruitEntity, on_delete=models.CASCADE, verbose_name=<span class="string">&#x27;水果名&#x27;</span>)</span><br><span class="line">    cnt = models.IntegerField(verbose_name=<span class="string">&#x27;数量&#x27;</span>, default=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.fruit.name + <span class="string">&#x27;:&#x27;</span> + self.cart.no</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">price1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.fruit.price  <span class="comment"># 从获取主的对象属性</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">price</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 属性方法在后台显示时没有verbose_name，如何解决？</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">round</span>(self.fruit.price * self.cnt, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&#x27;t_fruit_cart&#x27;</span></span><br><span class="line">        verbose_name = <span class="string">&#x27;购物车详情表&#x27;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主读取多个从对象的信息</span></span><br><span class="line">login_u = UserEntity.objects.get(pk=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 查询当前用户的购物车中的所有商品及数量相关的信息</span></span><br><span class="line">cart_fruit = login_u.cartentity.fruitcartentity_set.<span class="built_in">all</span>()</span><br><span class="line"><span class="keyword">for</span> fruit_cart <span class="keyword">in</span> cart_fruits:</span><br><span class="line">    <span class="built_in">print</span>(fruit_cart.fruit.name, fruit_cart.fruit.price, fruit_cart.cnt)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-4-多对多"><a href="#3-4-多对多" class="headerlink" title="3.4 多对多"></a>3.4 多对多</h3><p>models.ManyToManyField()</p>
<h1 id="WEB后端服务第14天-Django第四天"><a href="#WEB后端服务第14天-Django第四天" class="headerlink" title="WEB后端服务第14天-Django第四天"></a>WEB后端服务第14天-Django第四天</h1><h2 id="一、模型关系的深入应用"><a href="#一、模型关系的深入应用" class="headerlink" title="一、模型关系的深入应用"></a>一、模型关系的深入应用</h2><h3 id="1-1-多对多的应用"><a href="#1-1-多对多的应用" class="headerlink" title="1.1 多对多的应用"></a>1.1 多对多的应用</h3><p>需求：用户收藏商品，需要建立第三方表，完成用户收藏多个商品，或一个商品被多位用户收藏。</p>
<p>在FruitEntity模型类中，增加users属性，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认情况下，反向引用的名称是当前类的名称（小写）_set，可以通过related_name来指定</span></span><br><span class="line">    <span class="comment"># db_table=&#x27;t_collect&#x27; 使用第三张表建立fruit和user的多对多关系</span></span><br><span class="line">    users = models.ManyToManyField(UserEntity, db_table=<span class="string">&#x27;t_collect&#x27;</span>, related_name=<span class="string">&#x27;fruits&#x27;</span>, verbose_name=<span class="string">&#x27;收藏用户列表&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>当迁移完成后，模拟用户收藏商品：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">u1 = UserEntity.objects.get(pk=<span class="number">1</span>)</span><br><span class="line">u1.fruits.add(FruitEntity.objects.get(pk=<span class="number">1</span>))</span><br><span class="line">u1.fruits.add(FruitEntity.objects.get(pk=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">u2 = UserEntity.objects.get(pk=<span class="number">2</span>)</span><br><span class="line">u2.fruits.add(FruitEntity.objects.get(pk=<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<p>查看某一件商品，被哪些用户收藏</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fruit1 = FruitEntity.objects.get(pk=<span class="number">2</span>)</span><br><span class="line">fruit1.users.<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<p>用户取消收藏商品</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">u1.fruits.remove(FruitEntity.objects.get(pk=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<p>任务：增加标签模型类（id, name, order_num）并且和商品建立多对多的关系</p>
<p>问题：模型类自关联</p>
<h2 id="二、模板语法"><a href="#二、模板语法" class="headerlink" title="二、模板语法"></a>二、模板语法</h2><h3 id="2-1-MTV设计中TV的关系"><a href="#2-1-MTV设计中TV的关系" class="headerlink" title="2.1 MTV设计中TV的关系"></a>2.1 MTV设计中TV的关系</h3><ul>
<li>V视图处理函数可以渲染（使用）多个模板</li>
<li>一个模板T可以被任意的V视图函数使用</li>
</ul>
<h3 id="2-2-模板的加载过程"><a href="#2-2-模板的加载过程" class="headerlink" title="2.2 模板的加载过程"></a>2.2 模板的加载过程</h3><p>模板加载对象：django.template.loader</p>
<ul>
<li><p>加载</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">template = loader.get_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>渲染</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html = template.render(context)  <span class="comment"># context是一个dict类型对象</span></span><br></pre></td></tr></table></figure></li>
<li><p>加载+渲染</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html = loader.render_to_string(<span class="string">&quot;index.html&quot;</span>, context)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-3-模板中使用“-”点语法"><a href="#2-3-模板中使用“-”点语法" class="headerlink" title="2.3 模板中使用“.”点语法"></a>2.3 模板中使用“.”点语法</h3><p>使用“.”访问变量Variable的属性，系统尝试以下顺序查询：</p>
<ul>
<li><p>字典</p>
</li>
<li><p>属性或方法</p>
</li>
<li><p>列表的数值索引</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: green&quot;</span>&gt;</span></span><br><span class="line">        第三个用户名：&#123;&#123; users.2.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: red;&quot;</span>&gt;</span></span><br><span class="line">        请客的人：&#123;&#123; error_index &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: white; background-color: blue;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>VIP:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; vip.name.upper &#125;&#125;-&#123;&#123; vip.money &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &#123;% for key, value in vip.items %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; key &#125;&#125; = &#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_list3</span>(<span class="params">request</span>):</span><br><span class="line">    users = UserEntity.objects.<span class="built_in">all</span>()</span><br><span class="line">    msg = <span class="string">&#x27;the best&#x27;</span></span><br><span class="line"></span><br><span class="line">    error_index = random.randint(<span class="number">0</span>, users.count()-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    vip = &#123;</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;disen&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;money&#x27;</span>: <span class="number">20000</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># # 加载模板</span></span><br><span class="line">    <span class="comment"># template = loader.get_template(&#x27;user/list.html&#x27;)</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># # 渲染模板</span></span><br><span class="line">    <span class="comment"># html = template.render(context=&#123;</span></span><br><span class="line">    <span class="comment">#     &#x27;msg&#x27;: msg,</span></span><br><span class="line">    <span class="comment">#     &#x27;users&#x27;: users,</span></span><br><span class="line">    <span class="comment"># &#125;)</span></span><br><span class="line"></span><br><span class="line">    html = loader.render_to_string(<span class="string">&#x27;user/list.html&#x27;</span>, <span class="built_in">locals</span>())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(html, status=<span class="number">200</span>)  <span class="comment"># 增加响应头？？</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-4-表达式标签"><a href="#2-4-表达式标签" class="headerlink" title="2.4 表达式标签"></a>2.4 表达式标签</h3><ul>
<li><p><code>&#123;% if 条件 %&#125; &#123;% endif %&#125;</code></p>
<ul>
<li>条件表达式支持关系运算符<ul>
<li>or</li>
<li>and</li>
<li>not</li>
<li>in</li>
<li>==、!=、&gt;、&lt;、&gt;=、&lt;=</li>
</ul>
</li>
</ul>
</li>
<li><p><code>&#123;% ifequal 值1 值2 %&#125; &#123;% endifequal %&#125;</code></p>
</li>
<li><p><code>&#123;% ifnotequal 值1 值2 %&#125; &#123;% endifnotequal %&#125;</code></p>
<p>The <code>&#123;% ifequal %&#125; and &#123;% ifnotequal %&#125;</code>template tags are removed in django4.0.</p>
</li>
<li><p><code>&#123;% for 变量 in 可迭代对象 %&#125;  &#123;% endfor %&#125;</code></p>
<ul>
<li><code>&#123;% empty %&#125;</code>当可迭代对象为空（非None），显示empty标签下面的内容</li>
<li><code>&#123;% cycle  值1 值2 值3 值4 %&#125;</code></li>
<li><code>&#123;&#123; forloop.counter &#125;&#125;</code> 循环计数器，从1开始</li>
</ul>
</li>
<li><p>注释：渲染模板之后不会存在</p>
<ul>
<li><code>&#123;# 单行注释 #&#125;</code></li>
<li><code>&#123;% comment %&#125; 多行注释的文本 &#123;% endcomment %&#125;</code></li>
</ul>
</li>
<li><p>escape 安全标签</p>
<ul>
<li><code>&#123;% autoescape on|off %&#125;</code> 开启escape时，会将变量的 大于号、小于号、单引号、双引号及&amp;等转成escape的表示，如大于号为 &amp;gt;</li>
<li><code>&#123;&#123; info|escape &#125;&#125;</code> escape也可以换成safe表示不转换escape.</li>
</ul>
</li>
</ul>
<h3 id="2-5-模板的过滤器"><a href="#2-5-模板的过滤器" class="headerlink" title="2.5 模板的过滤器"></a>2.5 模板的过滤器</h3><ul>
<li><p>数值运算</p>
<ul>
<li>| add:5</li>
<li>| add:-5</li>
<li>| divisibleby:2</li>
<li>| <code>&#123;% widthratio 变量 分母 分子 %&#125;</code></li>
</ul>
</li>
<li><p>字符串</p>
</li>
<li><p>格式化</p>
<ul>
<li><p>日期格式化</p>
<p><code>now|date:&quot;Y-m-d H:i:s&quot;</code></p>
</li>
<li><p>文件大小格式化</p>
<p><code>file_size|filesizeformat</code></p>
</li>
<li><p>小数值格式化</p>
<figure class="highlight plaintext"><figcaption><span>默认n是1位小数</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 列表</span><br><span class="line"></span><br><span class="line">- HTML转义</span><br><span class="line"></span><br></pre></td></tr></table></figure>
 不转义
 转义，显示html源码标签
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 默认值</span><br><span class="line"></span><br><span class="line">### 2.6 自定义过滤器</span><br><span class="line"></span><br><span class="line">在app的init.py脚本编写</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">from django.template.defaultfilters import register</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">@register.filter(&#x27;ellipse&#x27;)</span><br><span class="line">def ellipse(value):</span><br><span class="line">    return os.path.split(value)[-1]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-7-扩展：os-stat-获取文件大小"><a href="#2-7-扩展：os-stat-获取文件大小" class="headerlink" title="2.7 扩展：os.stat()获取文件大小"></a>2.7 扩展：os.stat()获取文件大小</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file_dir = os.path.join(settings.BASE_DIR, <span class="string">&#x27;mainapp/&#x27;</span>)</span><br><span class="line">    files = &#123; file_name:os.stat(</span><br><span class="line">        file_dir+file_name) <span class="keyword">for</span> file_name <span class="keyword">in</span> os.listdir(file_dir) <span class="keyword">if</span> os.path.isfile(file_dir+file_name) &#125;</span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务第15天-Django第五天"><a href="#WEB后端服务第15天-Django第五天" class="headerlink" title="WEB后端服务第15天-Django第五天"></a>WEB后端服务第15天-Django第五天</h1><h2 id="一、csrf（防止跨站请求伪造）"><a href="#一、csrf（防止跨站请求伪造）" class="headerlink" title="一、csrf（防止跨站请求伪造）"></a>一、csrf（防止跨站请求伪造）</h2><h3 id="1-1-csrf-token标签"><a href="#1-1-csrf-token标签" class="headerlink" title="1.1 csrf_token标签"></a>1.1 csrf_token标签</h3><p>在模板的<code>&lt;form&gt;</code>内部使用即可，会生成隐藏字段，名称为csrfmiddlewaretoken，它的值是在渲染模板时产生的，并存储在session，当表单提交到后端时，通过csrfMiddleWare中间件验证。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">            &#123;% csrf_token %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：只针对post请求</p>
<p>扩展1：make_password和check_password</p>
<p>扩展2：request.session</p>
<h3 id="1-2-取消csrf"><a href="#1-2-取消csrf" class="headerlink" title="1.2 取消csrf"></a>1.2 取消csrf</h3><ul>
<li>在settings.py的中间件的配置中，将CsrfViewMiddleware删除</li>
<li><code>@csrf_exempt</code>装饰view处理函数</li>
</ul>
<h2 id="二、模板布局标签"><a href="#二、模板布局标签" class="headerlink" title="二、模板布局标签"></a>二、模板布局标签</h2><h3 id="2-1-block-extends-include"><a href="#2-1-block-extends-include" class="headerlink" title="2.1 block/extends/include"></a>2.1 block/extends/include</h3><h3 id="2-2-显示父模板的内容"><a href="#2-2-显示父模板的内容" class="headerlink" title="2.2 显示父模板的内容"></a>2.2 显示父模板的内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; block.super &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、app模块内部模板"><a href="#三、app模块内部模板" class="headerlink" title="三、app模块内部模板"></a>三、app模块内部模板</h2><ul>
<li>每个app下都可以增加templates目录，存放它自己的模板文件</li>
<li>内部的模板templates目录，不需要在settings.py中设置</li>
<li>如果app模块之外存在templates目录，且在settings.py中已设置，则加载模板时，则优先从此目录中加载模板文件。</li>
</ul>
<h2 id="四、URL路由配置"><a href="#四、URL路由配置" class="headerlink" title="四、URL路由配置"></a>四、URL路由配置</h2><h3 id="4-1-URL分二级（总路由和子路由（app模块的路由））"><a href="#4-1-URL分二级（总路由和子路由（app模块的路由））" class="headerlink" title="4.1 URL分二级（总路由和子路由（app模块的路由））"></a>4.1 URL分二级（总路由和子路由（app模块的路由））</h3><ul>
<li><p>主工程目录下urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	path(<span class="string">&#x27;url&#x27;</span>, 视图函数, name=<span class="literal">None</span>),</span><br><span class="line">    path(<span class="string">&#x27;url/&#x27;</span>, include(<span class="string">&#x27;app_label.urls&#x27;</span>, namespace=<span class="literal">None</span>))  <span class="comment"># 包含子路由</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
<li><p>app目录下的urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	path(<span class="string">&#x27;url&#x27;</span>, 视图函数, name=<span class="literal">None</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<p>include的namespace和path的name都在反向解析中使用，即反向获取url路径：<code>namespace.name</code></p>
<h3 id="4-2-url和path两种路由的配置"><a href="#4-2-url和path两种路由的配置" class="headerlink" title="4.2 url和path两种路由的配置"></a>4.2 url和path两种路由的配置</h3><p>url()配置兼容Django1.x的老版本</p>
<p>path()，re_path()是Django2之后的路由函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> re_path</span><br><span class="line"><span class="comment"># from django.conf.urls import url</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> orderapp <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;list&#x27;</span>, views.order_list),</span><br><span class="line">    re_path(<span class="string">r&#x27;^list2$&#x27;</span>, views.order_list),</span><br><span class="line">    <span class="comment"># url(r&#x27;^list2$&#x27;, views.order_list),</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>url()支持正则，通过正则在url路径中向处理函数传参：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^list2/(?P&lt;city_code&gt;\w+)/(?P&lt;order_num&gt;\d+)$&#x27;</span>, views.order_list),</span><br><span class="line"><span class="comment"># re_path(r&#x27;^list2/(?P&lt;city_code&gt;\w+)/(?P&lt;order_num&gt;\d+)$&#x27;, views.order_list),</span></span><br></pre></td></tr></table></figure>

<p>以上是按关键传参方式。也可以按位置传参(从左到右)，如下所示</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r&#x27;^list2/(\w+)/(\d+)$&#x27;</span>, views.order_list),</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">order_list</span>(<span class="params">request, order_num, city_code</span>):</span><br><span class="line">    <span class="built_in">print</span>(order_num, city_code)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;list_order.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<p>以上的url路由传参可以使用path()的<code>&lt;name&gt;</code>实现，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;list/&lt;city_code&gt;/&lt;order_num&gt;&#x27;</span>, views.order_list),</span><br></pre></td></tr></table></figure>

<p>如果路由中的参数是uuid类型，则使用参数转换器进行匹配，如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;cancel/&lt;uuid:order_num&gt;&#x27;</span>, views.cancel_order),</span><br></pre></td></tr></table></figure>

<p>除了uuid转换器之外，还有str, int, slug。如果路由中参数的规则比较复杂时，建议使用re_path()配置路由中的参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re_path(<span class="string">r&#x27;^search/(?P&lt;phone&gt;1[3-57-9][\d]&#123;9&#125;)$&#x27;</span>, views.search),</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">request, phone</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;hi, phone: %s&#x27;</span> % phone)</span><br></pre></td></tr></table></figure>

<h2 id="五、反向解析"><a href="#五、反向解析" class="headerlink" title="五、反向解析"></a>五、反向解析</h2><h3 id="5-1-使用include的namespace和path的name属性"><a href="#5-1-使用include的namespace和path的name属性" class="headerlink" title="5.1 使用include的namespace和path的name属性"></a>5.1 使用include的namespace和path的name属性</h3><p>主路由：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">&#x27;order/&#x27;</span>, include(<span class="string">&#x27;orderapp.urls&#x27;</span>, namespace=<span class="string">&#x27;order&#x27;</span>)),</span><br></pre></td></tr></table></figure>

<p>子路由：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app_name = <span class="string">&#x27;orderapp&#x27;</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;list/&lt;city_code&gt;/&lt;order_num&gt;&#x27;</span>, views.order_list, name=<span class="string">&#x27;list&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;cancel/&lt;uuid:order_num&gt;&#x27;</span>, views.cancel_order, name=<span class="string">&#x27;cancel&#x27;</span>),</span><br><span class="line">    re_path(<span class="string">r&#x27;^search/(?P&lt;phone&gt;1[3-57-9][\d]&#123;9&#125;)$&#x27;</span>, views.search, name=<span class="string">&#x27;search&#x27;</span>),</span><br><span class="line">    <span class="comment"># url(r&#x27;^list2/(?P&lt;city_code&gt;\w+)/(?P&lt;order_num&gt;\d+)$&#x27;, views.order_list),</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>【注意】如果子路由指定了namespace命名空间，则子路由的脚本中必须声明<code>app_name</code>属性，属性一般是app模块名称。</p>
<h3 id="5-2-在网页中获取路径"><a href="#5-2-在网页中获取路径" class="headerlink" title="5.2 在网页中获取路径"></a>5.2 在网页中获取路径</h3><p>在网页中使用<code>&#123;% url 'namespace或app_name:name' 参数 %&#125;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;orderapp:list&#x27; &#x27;xa&#x27; 1001 %&#125;&quot;</span>&gt;</span>订单<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>参数可以是多个，每个参数之间使用空格分隔。</p>
<p>参数默认使用位置传参，也可以使用关键参数传参。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% url &#x27;orderapp:list&#x27; order_num=1002 city_code=&#x27;xa&#x27; %&#125;&quot;</span>&gt;</span>订单<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-在视图函数中获取路径"><a href="#5-3-在视图函数中获取路径" class="headerlink" title="5.3 在视图函数中获取路径"></a>5.3 在视图函数中获取路径</h3><p>在视图函数中，使用reverse()函数来反向获取url请求路径。再通过redirect或HttpResponseRedirect()来重定向。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url = reverse(<span class="string">&#x27;order:search&#x27;</span>, args=(<span class="string">&#x27;13888888888&#x27;</span>,))</span><br><span class="line">    <span class="keyword">return</span> redirect(url)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url = reverse(<span class="string">&#x27;order:list&#x27;</span>, kwargs=<span class="built_in">dict</span>(city_code=<span class="string">&#x27;ShanxiXA&#x27;</span>, order_num=<span class="number">11009</span>))</span><br><span class="line">    <span class="keyword">return</span> HttpResponseRedirect(url)</span><br></pre></td></tr></table></figure>

<ul>
<li>reverse()可以使用kwargs字典类型传参，也可以使用args以位置方式传参。</li>
<li>HttpResponseRedirect()和redirect()是一样的，即redirect()返回就是HttpResponseRedirect类对象。</li>
</ul>
<h2 id="六、自定义error视图模板"><a href="#六、自定义error视图模板" class="headerlink" title="六、自定义error视图模板"></a>六、自定义error视图模板</h2><p>常见的错误响应状态码：403，400，404，405(请求方法不允许)，500 (服务器异常)</p>
<p>在templates模板中定义404.html或500.html，要求将settings.py的DEBUG设置为false.</p>
<p>404.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#x27;base.html&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">        Sorry, 您请求的资源&#123;&#123; request_path &#125;&#125;不存在。</span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>不存在。</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        3秒后自动跳转到<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&gt;。</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七、模型类扩展知识点"><a href="#七、模型类扩展知识点" class="headerlink" title="七、模型类扩展知识点"></a>七、模型类扩展知识点</h2><h3 id="7-1-validators验证"><a href="#7-1-validators验证" class="headerlink" title="7.1 validators验证"></a>7.1 validators验证</h3><p>如果验证不通过，可以抛出ValidationError信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.exceptions <span class="keyword">import</span> ValidationError</span><br></pre></td></tr></table></figure>

<p>自定义验证器类(用于模型类字段的)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserValidator</span>:</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">valid_phone</span>(<span class="params">cls, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> re.<span class="keyword">match</span>(<span class="string">r&#x27;1[1-57-9]\d&#123;9&#125;&#x27;</span>, value):</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&#x27;手机号格式不正确&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserEntity</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">20</span>, verbose_name=<span class="string">&#x27;账号&#x27;</span>)</span><br><span class="line">    age = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">&#x27;年龄&#x27;</span>)</span><br><span class="line">    phone = models.CharField(max_length=<span class="number">11</span>,</span><br><span class="line">                             verbose_name=<span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">                             validators=[UserValidator.valid_phone],</span><br><span class="line">                             blank=<span class="literal">True</span>,  <span class="comment"># 站点的表单字段值可以为空</span></span><br><span class="line">                             null=<span class="literal">True</span>)  <span class="comment"># 数据表的字段可以是null值</span></span><br></pre></td></tr></table></figure>

<p>在models.CharField(validators=[])指定哪些验证方法。</p>
<h3 id="7-2-QuerySet的bulk-create-批量创建"><a href="#7-2-QuerySet的bulk-create-批量创建" class="headerlink" title="7.2 QuerySet的bulk_create([])批量创建"></a>7.2 QuerySet的bulk_create([])批量创建</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">c1 = CateTypeEntity()</span><br><span class="line">c1.name = <span class="string">&#x27;水果1&#x27;</span></span><br><span class="line">c1.order_num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">c2 = CateTypeEntity()</span><br><span class="line">c2.name = <span class="string">&#x27;水果2&#x27;</span></span><br><span class="line">c2.order_num = <span class="number">11</span></span><br><span class="line"></span><br><span class="line">CateTypeEntity.objects.bulk_create([c1, c2])</span><br></pre></td></tr></table></figure>

<h3 id="7-3-QuerySet-values-或values-list-返回指定字段"><a href="#7-3-QuerySet-values-或values-list-返回指定字段" class="headerlink" title="7.3 QuerySet.values()或values_list()返回指定字段"></a>7.3 QuerySet.values()或values_list()返回指定字段</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UserEntity.objects.values(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>)  <span class="comment"># 只查看id和name两个字段</span></span><br><span class="line">&lt;QuerySet [&#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;disen&#x27;</span>&#125;, &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jack&#x27;</span>&#125;, &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ping&#x27;</span>&#125;, &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;wong&#x27;</span>&#125;, &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;xi&#x27;</span>&#125;]&gt;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-request请求对象的属性"><a href="#7-4-request请求对象的属性" class="headerlink" title="7.4 request请求对象的属性"></a>7.4 request请求对象的属性</h3><p>GET/POST/COOKIES/FILES都是QueryDict类，QueryDict自动进行url的中文编码处理。</p>
<p><code>method, path, content_type, encoding, session</code></p>
<h1 id="WEB后端服务第16天-Django第6天"><a href="#WEB后端服务第16天-Django第6天" class="headerlink" title="WEB后端服务第16天-Django第6天"></a>WEB后端服务第16天-Django第6天</h1><h2 id="一、请求与响应详解"><a href="#一、请求与响应详解" class="headerlink" title="一、请求与响应详解"></a>一、请求与响应详解</h2><h3 id="1-1-request对象"><a href="#1-1-request对象" class="headerlink" title="1.1 request对象"></a>1.1 request对象</h3><h4 id="1-1-1-扩展：mysql连接配置"><a href="#1-1-1-扩展：mysql连接配置" class="headerlink" title="1.1.1 扩展：mysql连接配置"></a>1.1.1 扩展：mysql连接配置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;advance1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;192.168.200.116&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;CHARSET&#x27;</span>: <span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>默认情况下，需要安装mysqlclient，我们也可以安装pymysql，但需要在主目录下进行初始化安装。主工程目录下的__init__.py脚本中的内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>

<h4 id="1-1-2-请求对象中的QueryDict属性"><a href="#1-1-2-请求对象中的QueryDict属性" class="headerlink" title="1.1.2 请求对象中的QueryDict属性"></a>1.1.2 请求对象中的QueryDict属性</h4><ul>
<li>GET    查询参数</li>
<li>POST  表单参数，包含post两个请求方法的参数</li>
<li>COOKIES  客户端中的当前domain的所有的Cookie信息</li>
<li>META  wsgi中请求的元信息（服务器环境信息，客户端请求信息）== environ<ul>
<li>REMOTE_ADDR  客户端IP</li>
<li>PATH_INFO  请求路径</li>
<li>REQUEST_METHOD 请求方法</li>
<li>QUERY_STRING  查询参数</li>
<li>CONTENT_TYPE  </li>
</ul>
</li>
<li>FILES  上传的表单参数中所有的文件对象，MultiValueDict类对象，文件对象的类型是InMemoryUploadedFile</li>
<li>SESSION  会话中存储的数据（可以跨多个请求）</li>
</ul>
<p>GET请求的案例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Regist2<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            爱好：</span><br><span class="line">            &#123;% for love in loves %&#125;</span><br><span class="line">                &#123;# 默认选择第一项和最后一项的爱好 #&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">                       &#123;% <span class="attr">if</span> <span class="attr">forloop.first</span> <span class="attr">or</span> <span class="attr">forloop.last</span> %&#125;</span></span><br><span class="line"><span class="tag">                            <span class="attr">checked</span></span></span><br><span class="line"><span class="tag">                       &#123;% <span class="attr">endif</span> %&#125;</span></span><br><span class="line"><span class="tag">                       <span class="attr">name</span>=<span class="string">&quot;love&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; love &#125;&#125;&quot;</span>&gt;</span> &#123;&#123; love &#125;&#125;</span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        GET请求的查询参数<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            &#123;% for key, value in request.GET.items %&#125;</span><br><span class="line">                &#123;% if key != &#x27;love&#x27; %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                爱好：</span><br><span class="line">                &#123;% for item in select_loves %&#125;</span><br><span class="line">                    &#123;&#123; item &#125;&#125;,</span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regist_2</span>(<span class="params">request, user_id=<span class="literal">None</span></span>):</span><br><span class="line">    loves = [<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Django&#x27;</span>, <span class="string">&#x27;Flask&#x27;</span>, <span class="string">&#x27;Django REST Framework&#x27;</span>, <span class="string">&#x27;Linux&#x27;</span>, <span class="string">&#x27;H5&#x27;</span>]</span><br><span class="line">    <span class="comment"># 获取参数名相同的多个参数值</span></span><br><span class="line">    select_loves = request.GET.getlist(<span class="string">&#x27;love&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;regist2.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<p>POST/PUT-ajax请求案例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Regist3<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;up_ajax()&quot;</span>&gt;</span>ajax发起put请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">up_ajax</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                data = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">phone</span>: <span class="string">&#x27;123456789&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">loves</span>: [<span class="string">&#x27;唱&#x27;</span>, <span class="string">&#x27;跳&#x27;</span>, <span class="string">&#x27;RAP&#x27;</span>, <span class="string">&#x27;篮球&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetch</span>(<span class="string">&#x27;&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">method</span>: <span class="string">&#x27;PUT&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">body</span>: <span class="variable language_">document</span>.<span class="property">forms</span>[<span class="number">0</span>].<span class="property">serialize</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">text</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">html</span>=&gt;</span> &#123;<span class="variable language_">document</span>.<span class="title function_">write</span>(html)&#125;)</span></span><br><span class="line"><span class="language-javascript">             &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">P</span>&gt;</span></span><br><span class="line">        POST请求参数：</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            &#123;% for key, value in request.POST.items %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        PUT的参数（body）：&#123;&#123; request.body &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        content-type: &#123;&#123; request.content_type &#125;&#125;;&#123;&#123; request.encoding &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regist</span>(<span class="params">request, user_id=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(request.POST)  <span class="comment"># 只接收post请求方法上传的form表单数据</span></span><br><span class="line">    <span class="built_in">print</span>(request.method)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;regist3.html&#x27;</span>, <span class="built_in">locals</span>())</span><br></pre></td></tr></table></figure>

<p>POST实现文件上传案例</p>
<h4 id="1-1-3-请求对象中的普通信息"><a href="#1-1-3-请求对象中的普通信息" class="headerlink" title="1.1.3 请求对象中的普通信息"></a>1.1.3 请求对象中的普通信息</h4><ul>
<li>path 请求路径</li>
<li>method  请求方法， GET/POST/PUT/DELETE</li>
<li>content_type  数据类型，如 请求头的Content-Type:text/html;charset=utf-8，content_type只接收数据类型text/html。charset=utf-8的部分编码则由encoding存储。</li>
<li>encoding  数据编码</li>
<li>body  字节码数据，一般接收上传的json数据，put上传的数据可以使用body来获取。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Regist<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;phone&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;生日&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;up_ajax()&quot;</span>&gt;</span>ajax上传json数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">up_ajax</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                data = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>: <span class="variable language_">document</span>.<span class="property">forms</span>[<span class="number">0</span>].<span class="property">name</span>.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">phone</span>: <span class="variable language_">document</span>.<span class="property">forms</span>[<span class="number">0</span>].<span class="property">phone</span>.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetch</span>(<span class="string">&#x27;&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data),</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">text</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">write</span>(text)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        请求路径-path：&#123;&#123; request.path &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        请求的URI(统一资源标识符): http://&#123;&#123; request.get_host &#125;&#125;:&#123;&#123; request.get_port &#125;&#125;&#123;&#123; request.get_full_path &#125;&#125;</span><br><span class="line">&#123;#                             &#123;&#123; request.get_raw_uri &#125;&#125;#&#125;</span><br><span class="line">&#123;#        The undocumented HttpRequest.get_raw_uri() method is removed.#&#125;</span><br><span class="line">&#123;#        The HttpRequest.build_absolute_uri() method may be a suitable alternative.#&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">            URL: 统一资源定位符，资源的网络地址</span><br><span class="line">            URI: 统一资源标识符，用于RESTful规范中，可以理解为URL</span><br><span class="line">        <span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        请求方法：&#123;&#123; request.method &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        content_type: &#123;&#123; request.content_type &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        encoding: &#123;&#123; request.encoding &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        content_params: &#123;&#123; request.content_params &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        body: &#123;&#123; request.body &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>github仓库：<a href="mailto:&#x67;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#104;&#x75;&#x62;&#46;&#99;&#111;&#109;">&#x67;&#x69;&#x74;&#x40;&#103;&#x69;&#x74;&#104;&#x75;&#x62;&#46;&#99;&#111;&#109;</a>:disenQF/advanceDjango1.git</p>
<h3 id="1-2-response对象"><a href="#1-2-response对象" class="headerlink" title="1.2 response对象"></a>1.2 response对象</h3><p>响应对象是视图函数返回的对象。由我们自己创建，当然，django有很多快捷方法，如render()/redirect()快速生成response响应对象。</p>
<p>常用的响应类：</p>
<ul>
<li>HttpResponse</li>
<li>HttpResponseRedirect</li>
<li>JsonResponse</li>
</ul>
<p>响应对象中包含的属性：</p>
<ul>
<li><p>content响应的内容</p>
<ul>
<li><p>如果HttpResponse对象，则content可以是字节码也可以是字符串</p>
</li>
<li><p>JsonResponse，则content可以是dict字典</p>
</li>
</ul>
</li>
<li><p>status 响应的状态码</p>
</li>
<li><p>content_type 响应的数据类型</p>
</li>
</ul>
<h2 id="二、会话技术详解"><a href="#二、会话技术详解" class="headerlink" title="二、会话技术详解"></a>二、会话技术详解</h2><p>一次会话(session)或连接从浏览器的一个Request开始，到服务器返回Response结束。可以在多个页面需要传递部分数据。</p>
<p>Django的session的数据默认存储在django_session表中。但session依赖于cookie技术。客户端如果禁用了cookie，则session也会失效。</p>
<h3 id="2-1-cookie"><a href="#2-1-cookie" class="headerlink" title="2.1 cookie"></a>2.1 cookie</h3><h3 id="2-2-session"><a href="#2-2-session" class="headerlink" title="2.2 session"></a>2.2 session</h3><h3 id="2-3-Token"><a href="#2-3-Token" class="headerlink" title="2.3 Token"></a>2.3 Token</h3><h1 id="WEB后端服务第17天-Django第7天"><a href="#WEB后端服务第17天-Django第7天" class="headerlink" title="WEB后端服务第17天-Django第7天"></a>WEB后端服务第17天-Django第7天</h1><h2 id="一、验证码"><a href="#一、验证码" class="headerlink" title="一、验证码"></a>一、验证码</h2><h3 id="1-1-验证码方式"><a href="#1-1-验证码方式" class="headerlink" title="1.1 验证码方式"></a>1.1 验证码方式</h3><ul>
<li>图片验证码</li>
<li>滑动验证码</li>
<li>短信验证码</li>
<li>邮箱验证码</li>
</ul>
<h3 id="1-2-验证码使用场景"><a href="#1-2-验证码使用场景" class="headerlink" title="1.2 验证码使用场景"></a>1.2 验证码使用场景</h3><ul>
<li>防止爬虫程序</li>
<li>防止非人为操作</li>
</ul>
<h3 id="1-3-基于PIL库实现图片验证码"><a href="#1-3-基于PIL库实现图片验证码" class="headerlink" title="1.3 基于PIL库实现图片验证码"></a>1.3 基于PIL库实现图片验证码</h3><h4 id="1-3-1-PIL初步使用"><a href="#1-3-1-PIL初步使用" class="headerlink" title="1.3.1 PIL初步使用"></a>1.3.1 PIL初步使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">new_img_code</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 创建画布</span></span><br><span class="line">    img = Image.new(<span class="string">&#x27;RGB&#x27;</span>, (<span class="number">80</span>, <span class="number">40</span>), (<span class="number">100</span>, <span class="number">100</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从画布中获取画笔</span></span><br><span class="line">    draw = ImageDraw.Draw(img, <span class="string">&#x27;RGB&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建字体对象和字体颜色</span></span><br><span class="line">    font_color = (<span class="number">0</span>, <span class="number">20</span>, <span class="number">100</span>)</span><br><span class="line">    font = ImageFont.truetype(font=<span class="string">&#x27;static/fonts/arial.ttf&#x27;</span>, size=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 开始画内容</span></span><br><span class="line">    draw.text((<span class="number">5</span>, <span class="number">5</span>), <span class="string">&#x27;wf&#x27;</span>, font=font, fill=font_color)</span><br><span class="line">    <span class="comment"># draw.line((0, 0), (255, 0, 0), 20)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        x = random.randint(<span class="number">0</span>, <span class="number">80</span>)</span><br><span class="line">        y = random.randint(<span class="number">0</span>, <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">        r = random.randint(<span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line">        g = random.randint(<span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line">        b = random.randint(<span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line"></span><br><span class="line">        draw.point((x, y), (r, g, b))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将画布写入内存字节数组中</span></span><br><span class="line">    <span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line">    buffer = BytesIO()</span><br><span class="line">    img.save(buffer, <span class="string">&#x27;png&#x27;</span>)  <span class="comment"># 写入</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(content=buffer.getvalue(), content_type=<span class="string">&#x27;image/png&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-随机验证码"><a href="#1-3-2-随机验证码" class="headerlink" title="1.3.2 随机验证码"></a>1.3.2 随机验证码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_random_str</span>(<span class="params">start, end</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">chr</span>(random.randint(start, end))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">new_code_str</span>(<span class="params"><span class="built_in">len</span></span>):</span><br><span class="line">    code_str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>):</span><br><span class="line">        flag = random.randint(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">        start, end = (<span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>), <span class="built_in">ord</span>(<span class="string">&#x27;z&#x27;</span>)) <span class="keyword">if</span> flag == <span class="number">1</span> \</span><br><span class="line">            <span class="keyword">else</span> (<span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>), <span class="built_in">ord</span>(<span class="string">&#x27;Z&#x27;</span>)) <span class="keyword">if</span> flag == <span class="number">2</span> \</span><br><span class="line">            <span class="keyword">else</span> (<span class="built_in">ord</span>(<span class="string">&#x27;0&#x27;</span>), <span class="built_in">ord</span>(<span class="string">&#x27;9&#x27;</span>))</span><br><span class="line">        code_str += _random_str(start, end)</span><br><span class="line">    <span class="keyword">return</span> code_str</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(new_code_str(<span class="number">6</span>))</span><br></pre></td></tr></table></figure>

<h2 id="二、分页器Paginator"><a href="#二、分页器Paginator" class="headerlink" title="二、分页器Paginator"></a>二、分页器Paginator</h2><h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><h3 id="2-response-set-cookie-方法的参数有哪些"><a href="#2-response-set-cookie-方法的参数有哪些" class="headerlink" title="2. response.set_cookie()方法的参数有哪些"></a>2. response.set_cookie()方法的参数有哪些</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_cookie(key, value, path=<span class="string">&#x27;/&#x27;</span>, domain=<span class="literal">None</span>, max_age=<span class="literal">None</span>, expires=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-清除所有session的方法是什么"><a href="#3-清除所有session的方法是什么" class="headerlink" title="3. 清除所有session的方法是什么"></a>3. 清除所有session的方法是什么</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.session.clear()</span><br></pre></td></tr></table></figure>

<h2 id="三、类视图CBV"><a href="#三、类视图CBV" class="headerlink" title="三、类视图CBV"></a>三、类视图CBV</h2><h3 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1 概念"></a>3.1 概念</h3><p>Django中视图(View)写法有两种：</p>
<ul>
<li>FBV(Function-based View)基于函数的视图，之前都是使用FBV模式。</li>
<li>CBV(Class-bases View)基于类的视图，应用面向对象（OOB）设计思想，通过继承、重写等相关特性实现业务功能。</li>
</ul>
<h3 id="3-2-Django提供很多的View"><a href="#3-2-Django提供很多的View" class="headerlink" title="3.2 Django提供很多的View"></a>3.2 Django提供很多的View</h3><ul>
<li><p>View</p>
</li>
<li><p>TemplateView</p>
</li>
<li><p>RedirectView</p>
</li>
<li><p>ListView</p>
</li>
<li><p>EditView</p>
</li>
<li><p>FormView</p>
</li>
<li><p>DetailView</p>
</li>
<li><p>DeleteView</p>
</li>
</ul>
<h3 id="3-3-使用的过程"><a href="#3-3-使用的过程" class="headerlink" title="3.3 使用的过程"></a>3.3 使用的过程</h3><ul>
<li><p>在views.py中定义View的子类，并初始关键属性或重写方法</p>
<p>在View中处理的流程如下：</p>
<ul>
<li>dispatch(request, *args, **kwargs)分发请求到get/post/put/delete/等方法处理函数中</li>
<li>http_method_not_allowed()请求方法不允许的响应</li>
<li>options()探测请求方法的Allow信息</li>
</ul>
</li>
<li><p>在路由的视图函数位置上使用View.as_view()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> stockapp <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app_name = <span class="string">&#x27;stockapp&#x27;</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;stocks/&lt;stock_id&gt;/&#x27;</span>, csrf_exempt(views.StockView.as_view()), name=<span class="string">&#x27;stocks&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;goods/&lt;wd&gt;/&#x27;</span>, views.GoodsView.as_view(), name=<span class="string">&#x27;goods&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;query/&lt;wd&gt;/&#x27;</span>, views.QueryView.as_view(), name=<span class="string">&#x27;query&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StockView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="comment"># @csrf_exempt</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dispatch</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().dispatch(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request, **kwargs</span>):</span><br><span class="line">        stock_id = kwargs.get(<span class="string">&#x27;stock_id&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;stock/list.html&#x27;</span>, <span class="built_in">locals</span>())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;post请求&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="四、中间件Middleware"><a href="#四、中间件Middleware" class="headerlink" title="四、中间件Middleware"></a>四、中间件Middleware</h2><h3 id="4-1-概念"><a href="#4-1-概念" class="headerlink" title="4.1 概念"></a>4.1 概念</h3><p>中间件基于AOP(面向切面编程)设计思想，目的是扩展业务功能，即不修改原业务基础上，增加新的功能，类似于装饰器。中间件有很多使用场景：验证权限、限制ip(黑名单)、限制请求次数、跨域请求、访问日志/统计、记录错误信息。</p>
<p>Django的中间件有五个勾子函数【重要】：</p>
<ul>
<li><strong>process_request()</strong> 从django框架到urls路由过程</li>
<li><strong>process_view(request, callback, callback_args, callback_kwargs)</strong> 从urls路由到view视图函数的过程</li>
<li><strong>process_template_response()</strong> 在view视图函数中渲染模板的过程【不常用】</li>
<li><strong>process_exception(request, exception)</strong> 从请求到响应的整个过程，如果发生了异常，则会被此函数处理</li>
<li><strong>process_response(request, response)</strong> 从视图函数中向Django响应数据时，即返回HttpResponse()对象后</li>
</ul>
<h3 id="4-2-自定义中间件"><a href="#4-2-自定义中间件" class="headerlink" title="4.2 自定义中间件"></a>4.2 自定义中间件</h3><p>中间件的基本类：django.utils.deprecation.MiddlewareMixin</p>
<p>在项目的目录下，创建middleware包和check_login.py脚本，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CheckLoginMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="comment"># 从请求到路由urls过程，触发此函数</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----------CheckLoginMiddleware-------------&#x27;</span>, <span class="string">&#x27;process_request&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(request.path, request.COOKIES)</span><br><span class="line">        dontfilters = [<span class="string">&#x27;/user/login/&#x27;</span>, <span class="string">&#x27;/user/code/&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> request.path <span class="keyword">not</span> <span class="keyword">in</span> dontfilters:</span><br><span class="line">            <span class="comment"># 验证用户是否登录</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> request.COOKIES.get(<span class="string">&#x27;token&#x27;</span>):</span><br><span class="line">                <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;&lt;h3&gt;Login&lt;/h3&gt;&lt;form&gt;&lt;input&gt;&lt;button&gt;Login&lt;/button&gt;&lt;/form&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_view</span>(<span class="params">self, request, callback, callback_args, callback_kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----------CheckLoginMiddleware-------------&#x27;</span>, <span class="string">&#x27;process_view&#x27;</span>)</span><br><span class="line">        <span class="comment"># callback 是调用的view函数</span></span><br><span class="line">        <span class="comment"># 新增一个关键参数，类似于匹配路由 stock/&lt;stock_id&gt;/&lt;page&gt;/</span></span><br><span class="line">        callback_kwargs[<span class="string">&#x27;page&#x27;</span>] = request.GET.get(<span class="string">&#x27;page&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(callback, callback_args, callback_kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_response</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----------CheckLoginMiddleware-------------&#x27;</span>, <span class="string">&#x27;process_response&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

<p>在settings.py的注册中间件类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;middleware.check_login.CheckLoginMiddleware&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="五、Django日志"><a href="#五、Django日志" class="headerlink" title="五、Django日志"></a>五、Django日志</h2><h3 id="5-1-Django日志LOGGING的组成部分"><a href="#5-1-Django日志LOGGING的组成部分" class="headerlink" title="5.1 Django日志LOGGING的组成部分"></a>5.1 Django日志LOGGING的组成部分</h3><ul>
<li>日志的版本号 version</li>
<li>日志的格式化 formatters</li>
<li>日志的处理器 handlers</li>
<li>日志的记录器 loggers，默认存在“django.server”，”django.request”</li>
<li>日志的过滤器 filters</li>
</ul>
<h3 id="5-2-配置日志"><a href="#5-2-配置日志" class="headerlink" title="5.2 配置日志"></a>5.2 配置日志</h3><p>在settings.py脚本中配置，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 配置Django的日志</span></span><br><span class="line">LOGGING = &#123;</span><br><span class="line">    <span class="string">&#x27;version&#x27;</span>: <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">&#x27;formatters&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;base&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: <span class="string">&#x27;[%(asctime)s  %(name)s ] %(message)s&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;datefmt&#x27;</span>: <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;handlers&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;out&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.StreamHandler&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;INFO&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;base&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;file&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.FileHandler&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;WARNING&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;base&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;filename&#x27;</span>: <span class="string">f&#x27;<span class="subst">&#123;BASE_DIR&#125;</span>/warn.log&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;loggers&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment"># 日志记录器名称 django.server</span></span><br><span class="line">        <span class="string">&#x27;django.server&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;out&#x27;</span>, <span class="string">&#x27;file&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;CRITICAL&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;mylogger&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;out&#x27;</span>, <span class="string">&#x27;file&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;INFO&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-使用日志"><a href="#5-3-使用日志" class="headerlink" title="5.3 使用日志"></a>5.3 使用日志</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logging.getLogger(<span class="string">&#x27;mylogger&#x27;</span>).error(<span class="string">&#x27;请求发生错误&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="六、缓存Cache"><a href="#六、缓存Cache" class="headerlink" title="六、缓存Cache"></a>六、缓存Cache</h2><h3 id="6-1-配置缓存"><a href="#6-1-配置缓存" class="headerlink" title="6.1 配置缓存"></a>6.1 配置缓存</h3><h4 id="6-1-1-文件缓存"><a href="#6-1-1-文件缓存" class="headerlink" title="6.1.1 文件缓存"></a>6.1.1 文件缓存</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置缓存Cache</span></span><br><span class="line">CACHES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.core.cache.backends.filebased.FileBasedCache&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;LOCATION&#x27;</span>: <span class="string">f&#x27;<span class="subst">&#123;BASE_DIR&#125;</span>/mycache&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;TIMEOUT&#x27;</span>: <span class="number">300</span>,</span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;MAX_ENTRIES&#x27;</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="string">&#x27;CULL_FREQUENCY&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-使用缓存"><a href="#6-2-使用缓存" class="headerlink" title="6.2 使用缓存"></a>6.2 使用缓存</h3><h4 id="6-2-1-文件缓存的使用"><a href="#6-2-1-文件缓存的使用" class="headerlink" title="6.2.1 文件缓存的使用"></a>6.2.1 文件缓存的使用</h4><p>导包</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.cache <span class="keyword">import</span> cache</span><br></pre></td></tr></table></figure>

<p>增加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cache.<span class="built_in">set</span>(key, value, timeout)</span><br><span class="line">cache.add(key, value, timeout, version)</span><br></pre></td></tr></table></figure>

<p>读取</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cache.has_key(key)</span><br><span class="line">value = cache.get(key)</span><br></pre></td></tr></table></figure>

<p>删除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache.delete(key)</span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务第18天-Django第8天"><a href="#WEB后端服务第18天-Django第8天" class="headerlink" title="WEB后端服务第18天-Django第8天"></a>WEB后端服务第18天-Django第8天</h1><h2 id="一、Django缓存进阶"><a href="#一、Django缓存进阶" class="headerlink" title="一、Django缓存进阶"></a>一、Django缓存进阶</h2><p>Django中提供了六种常见缓存策略：</p>
<ul>
<li>开发调试</li>
<li>内存</li>
<li>文件</li>
<li>数据库</li>
<li>Memcache缓存（python-memcached模块）</li>
<li>Memcache缓存（pylibmc模块）</li>
</ul>
<h3 id="1-1-cache-page页面缓存"><a href="#1-1-cache-page页面缓存" class="headerlink" title="1.1 cache_page页面缓存"></a>1.1 cache_page页面缓存</h3><ul>
<li><p>@cache_page方案</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@cache_page(<span class="params">timeout=<span class="number">10</span>, cache=<span class="string">&#x27;html&#x27;</span>, key_prefix=<span class="string">&#x27;page&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 验证是否登录</span></span><br><span class="line">    chrs = string.ascii_letters</span><br><span class="line">    char = random.choice(chrs)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;用户列表页面：&lt;br&gt; %s&#x27;</span> % char)</span><br></pre></td></tr></table></figure></li>
<li><p>cache.set/add() 保存html</p>
<p>在中间件的process_request和process_response()两个勾子函数中实现页面缓存。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CachePageMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">    <span class="comment"># 配置缓存的页面路径</span></span><br><span class="line">    cache_page_paths = [</span><br><span class="line">        <span class="string">&#x27;/user/list/&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="comment"># 判断当前的请求是否支持缓存</span></span><br><span class="line">        <span class="keyword">if</span> request.path <span class="keyword">in</span> self.cache_page_paths:</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 判断页面是否已经缓存</span></span><br><span class="line">            <span class="keyword">if</span> cache.has_key(request.path):</span><br><span class="line">                <span class="keyword">return</span> HttpResponse(cache.get(request.path))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_response</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="comment"># 判断当前的请求路径是否要被缓存</span></span><br><span class="line">        <span class="keyword">if</span> request.path <span class="keyword">in</span> self.cache_page_paths:</span><br><span class="line">            <span class="comment"># 缓存页面</span></span><br><span class="line">            cache.<span class="built_in">set</span>(request.path, response.content, timeout=<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-2-Redis缓存配置"><a href="#1-2-Redis缓存配置" class="headerlink" title="1.2 Redis缓存配置"></a>1.2 Redis缓存配置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CACHES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django_redis.cache.RedisCache&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;LOCATION&#x27;</span>: <span class="string">&#x27;redis://192.168.200.116:6379/10&#x27;</span>,  <span class="comment"># redis://username:password@host:port/db</span></span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;CLIENT_CLASS&#x27;</span>: <span class="string">&#x27;django_redis.client.DefaultClient&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;SOCKET_CONNECT_TIMEOUT&#x27;</span>: <span class="number">10</span>,  <span class="comment"># 300秒</span></span><br><span class="line">            <span class="string">&#x27;SOCKET_TIMEOUT&#x27;</span>: <span class="number">10</span>,  <span class="comment"># 300秒</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-Session缓存"><a href="#1-3-Session缓存" class="headerlink" title="1.3 Session缓存"></a>1.3 Session缓存</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置session</span></span><br><span class="line">SESSION_ENGINE = <span class="string">&#x27;django.contrib.sessions.backends.cache&#x27;</span></span><br><span class="line">SESSION_COOKIE_NAME = <span class="string">&#x27;SESSION_ID&#x27;</span>  <span class="comment"># sessionid</span></span><br><span class="line">SESSION_COOKIE_PATH = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">SESSION_CACHE_ALIAS = <span class="string">&#x27;default&#x27;</span></span><br><span class="line">SESSION_COOKIE_AGE = <span class="number">1209600</span>  <span class="comment"># 2周有效时间</span></span><br></pre></td></tr></table></figure>

<h2 id="二、Django信号机制"><a href="#二、Django信号机制" class="headerlink" title="二、Django信号机制"></a>二、Django信号机制</h2><h3 id="2-1-信号的优点"><a href="#2-1-信号的优点" class="headerlink" title="2.1 信号的优点"></a>2.1 信号的优点</h3><ul>
<li>监控Django的内部事件</li>
<li>复杂业务之间解耦</li>
</ul>
<h3 id="2-2-接收内置的信号"><a href="#2-2-接收内置的信号" class="headerlink" title="2.2 接收内置的信号"></a>2.2 接收内置的信号</h3><ul>
<li>普通的接收信号，使用信号对象的connect()函数，如：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_delete</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明信号处理的函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">model_delete_pre</span>(<span class="params">sender, **kwargs</span>):</span><br><span class="line">    <span class="keyword">from</span> user.models <span class="keyword">import</span> Order</span><br><span class="line">    <span class="keyword">if</span> sender == Order:</span><br><span class="line">    	<span class="built_in">print</span>(info % (<span class="string">&#x27;订单模型&#x27;</span>, kwargs.get(<span class="string">&#x27;instance&#x27;</span>).<span class="built_in">id</span>, kwargs.get(<span class="string">&#x27;instance&#x27;</span>).title))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收信号</span></span><br><span class="line">pre_delete.connect(model_delete_pre)</span><br></pre></td></tr></table></figure>

<p>【注意】信号处理函数的参数声明一般是固定的，**kwargs是一种简单的写法，也可以写成关键参数形式，但不灵活。</p>
<ul>
<li>支持装饰器的方式接收信号与连接信息处理函数，如：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_delete, post_delete</span><br><span class="line"><span class="keyword">from</span> django.dispatch <span class="keyword">import</span> receiver</span><br><span class="line"></span><br><span class="line"><span class="meta">@receiver(<span class="params">post_delete</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete_model_post</span>(<span class="params">sender, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(sender, <span class="string">&#x27;删除成功&#x27;</span>, kwargs)</span><br><span class="line"></span><br><span class="line">pre_delete.connect(model_delete_pre)</span><br></pre></td></tr></table></figure>

<h3 id="2-3-自定义信号"><a href="#2-3-自定义信号" class="headerlink" title="2.3 自定义信号"></a>2.3 自定义信号</h3><ul>
<li>创建信号</li>
</ul>
<p>在项目下创建signals包，并在init.py脚本中声明信号</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> dispatch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义信号，providing_args-声明发送信号的参数列表</span></span><br><span class="line"><span class="comment"># codeSignal = dispatch.Signal(providing_args=[&#x27;path&#x27;, &#x27;phone&#x27;, &#x27;code&#x27;])</span></span><br><span class="line"><span class="comment"># The providing_args argument for django.dispatch.Signal is removed.</span></span><br><span class="line">codeSignal = dispatch.Signal()</span><br></pre></td></tr></table></figure>

<ul>
<li><p>发送信号</p>
<p>根据业务的需求，在适当位置发送信号</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">new_code</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 生成手机验证码</span></span><br><span class="line">    <span class="comment"># 随机产生验证码：大小写字母+数字</span></span><br><span class="line">    code_text = code.new_code_str(<span class="number">4</span>)</span><br><span class="line">    <span class="built_in">print</span>(code_text)</span><br><span class="line"></span><br><span class="line">    phone = request.GET.get(<span class="string">&#x27;phone&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(phone)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 发送信号，sender 名称可以根据需求设定，关键参数列表，根据信号定义的参数表传值</span></span><br><span class="line">    signals.codeSignal.send(<span class="string">&#x27;new_code&#x27;</span>, path=request.path, phone=phone, code=code_text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;发送验证码到%s成功&#x27;</span> % phone)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>接收信号</p>
<p>可以在app模块的init.py脚本中接收特定的信号。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> signals <span class="keyword">import</span> codeSignal</span><br><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> dispatch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收信号</span></span><br><span class="line"><span class="meta">@dispatch.receiver(<span class="params">codeSignal</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cache_code</span>(<span class="params">sender, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;dispatch.receiver&lt;codeSignal&gt;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(sender, kwargs)</span><br></pre></td></tr></table></figure>

<h2 id="三、高并发解决方案Celery-Redis队列"><a href="#三、高并发解决方案Celery-Redis队列" class="headerlink" title="三、高并发解决方案Celery+Redis队列"></a>三、高并发解决方案Celery+Redis队列</h2><h3 id="3-1-概念-1"><a href="#3-1-概念-1" class="headerlink" title="3.1 概念"></a>3.1 概念</h3><p>Celery解决C10K问题，通过消息中间件和后台的任务执行单元解决高并发问题。</p>
<p>Celery的组成部分：</p>
<ul>
<li>消息中间件Broker，Celery本身并没有实现功能，知识一种接口或规范，在使用Celery时，必须指定消息中间件实现方案（Redis发布、订阅，RabbitMQ）</li>
<li>任务执行单元Worker，后台进程</li>
<li>任务执行单元的结果存储Result。</li>
</ul>
<h3 id="3-2-配置"><a href="#3-2-配置" class="headerlink" title="3.2 配置"></a>3.2 配置</h3><p>文档：<a target="_blank" rel="noopener" href="http://docs.celeryproject.org/en/latest/django/index.html">http://docs.celeryproject.org/en/latest/django/index.html</a></p>
<p>注意：Windows在Celery4.0之后，不支持多进程方式，更换成协程方式(eventlet, gevent)</p>
<p>安装库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install celery==<span class="number">4.4</span><span class="number">.0</span>rc3 eventlet</span><br></pre></td></tr></table></figure>

<p>在主项目的目录下，创建celery.py，内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import, unicode_literals</span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line"></span><br><span class="line">os.environ.setdefault(<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>, <span class="string">&#x27;advanceDjango.settings&#x27;</span>)</span><br><span class="line"></span><br><span class="line">app = celery(<span class="string">&#x27;advanceDjango&#x27;</span>, broker=<span class="string">&#x27;redis://127.0.0.1:6379/8&#x27;</span>)</span><br><span class="line">app.config_from_object(<span class="string">&#x27;django.conf:settings&#x27;</span>)  <span class="comment"># 配置Celery，加载settings.py</span></span><br><span class="line"></span><br><span class="line">app.autodiscover_tasks()  <span class="comment"># 自动发现task任务</span></span><br></pre></td></tr></table></figure>

<p>在主项目的init.py脚本中，增加<strong>all</strong>属性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import, unicode_literals</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .celery <span class="keyword">import</span> app <span class="keyword">as</span> celery_app</span><br><span class="line"></span><br><span class="line"><span class="comment"># 向项目模块中增加celery_app对象</span></span><br><span class="line">__all__ = (<span class="string">&#x27;celery_app&#x27;</span>,)</span><br></pre></td></tr></table></figure>

<p>在app应用模块中，创建tasks.py文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> shared_task</span><br><span class="line"></span><br><span class="line"><span class="meta">@shared_task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">qbuy</span>(<span class="params">goods_id, user_id</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;goods_id: %s -&gt; user_id: %s&#x27;</span> % (goods_id, user_id))</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&#x27;goods_id: %s -&gt; user_id: %s&#x27;</span> % (goods_id, user_id)</span><br></pre></td></tr></table></figure>

<p>在主项目的settings.py文件，配置Celery的选项</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CELERY_IMPORTS = (<span class="string">&#x27;stockapp.tasks&#x27;</span>, )</span><br></pre></td></tr></table></figure>

<p>启动Celery</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; celery -A advanceDjango worker -P eventlet -l info</span><br></pre></td></tr></table></figure>

<p>-P指定执行单元的实现方式，指定eventlet表示以协程方式实现后台执行单元的异步操作。</p>
<p>调用异步任务，@shared_task修改的任务函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qbuy.delay(<span class="string">&#x27;10009&#x27;</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>如果Celery服务接收任务，并执行，可以看到执行的结果。但是结果发出的警告，表示没有处理执行单元完成任务的结果。</p>
<p><strong>存储任务结果</strong></p>
<ul>
<li>存储到redis</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app = Celery(<span class="string">&#x27;advanceDjango&#x27;</span>, broker=<span class="string">&#x27;redis://192.168.200.116:6379/8&#x27;</span>, 			  			                    backend=<span class="string">&#x27;redis://192.168.200.116:6379/7&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在创建时，指定Celery()的backend参数，指定results存储到redis中。</p>
<ul>
<li>django-celery-results</li>
</ul>
<p>安装存储任务执行结果库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-celery-results</span><br></pre></td></tr></table></figure>

<p>在settings.py文件中，配置result存储方案</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">	....</span><br><span class="line">	<span class="string">&#x27;django_celery_results&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">CELERY_RESULT_BACKEND = <span class="string">&#x27;django-db&#x27;</span></span><br><span class="line"><span class="comment"># CELERY_CACHE_BACKEND = &#x27;django-cache&#x27;  # 缓存信息</span></span><br></pre></td></tr></table></figure>

<p>迁移Celery结果相关的库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate django_celery_results</span><br></pre></td></tr></table></figure>

<p>迁移成功之后，重新启动Celery。</p>
<p>调试任务</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">async_result = qbuy.delay(<span class="string">&#x27;10009&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">async_result.ready()  <span class="comment"># 返回False或True，True表示结果已就绪</span></span><br><span class="line">async_result.result  <span class="comment"># 查看任务结果</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-抢购的实现"><a href="#3-3-抢购的实现" class="headerlink" title="3.3 抢购的实现"></a>3.3 抢购的实现</h3><p>涉及的技术点：ajax请求，redis的hash，cache使用</p>
<h3 id="3-4-Celery其他配置"><a href="#3-4-Celery其他配置" class="headerlink" title="3.4 Celery其他配置"></a>3.4 Celery其他配置</h3><p>格式化：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>时区：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>scheduler计划任务</p>
<p>文档：<a target="_blank" rel="noopener" href="http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html">http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-celery-beat</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;django_celery_results&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django_celery_beat&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">python manage.py migrate django_celery_beat</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CELERY_TIMEZONE = TIME_ZONE</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置计划任务调度类</span></span><br><span class="line">CELERY_BEAT_SCHEDULE = <span class="string">&#x27;django_celery_beat.schedulers.DatabaseScheduler&#x27;</span></span><br><span class="line"></span><br><span class="line">CELERY_BEAT_SCHEDULE = &#123;</span><br><span class="line">    <span class="string">U&#x27;定时同步数据2&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;stockapp.tasks.con_data&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;schedule&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;args&#x27;</span>: (<span class="string">&#x27;同步oracle&#x27;</span>, )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@shared_task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">con_data</span>(<span class="params">content</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;开始同步数据：%s&#x27;</span> % content)</span><br><span class="line">	logging.getLogger(<span class="string">&#x27;&#x27;</span>).info(<span class="string">&#x27;开始同步数据：%s&#x27;</span> % content)</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&#x27;同步完成&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">celery -A advanceDjango worker -B -l info -f celery.log</span></span><br></pre></td></tr></table></figure>

<h1 id="WEB后端服务第19天-Django第9天"><a href="#WEB后端服务第19天-Django第9天" class="headerlink" title="WEB后端服务第19天-Django第9天"></a>WEB后端服务第19天-Django第9天</h1><h2 id="一、基于Celery-Redis实现抢购方案"><a href="#一、基于Celery-Redis实现抢购方案" class="headerlink" title="一、基于Celery+Redis实现抢购方案"></a>一、基于Celery+Redis实现抢购方案</h2><p>项目：<a href="mailto:&#x67;&#105;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#98;&#46;&#x63;&#x6f;&#109;">&#x67;&#105;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#98;&#46;&#x63;&#x6f;&#109;</a>:disenQF/QBuyPro.git</p>
<h3 id="1-1-业务描述"><a href="#1-1-业务描述" class="headerlink" title="1.1 业务描述"></a>1.1 业务描述</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">实现抢购活动开始后，每位用户每天只限抢购一件商品。</span><br><span class="line">活动信息：图片、标题、商品、价格折扣、开始时间、结束时间</span><br><span class="line"></span><br><span class="line">另外：每天限量 5</span><br></pre></td></tr></table></figure>

<h3 id="1-2-设计模型类"><a href="#1-2-设计模型类" class="headerlink" title="1.2 设计模型类"></a>1.2 设计模型类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Goods</span>(models.Model):</span><br><span class="line">    <span class="comment"># 名称</span></span><br><span class="line">    <span class="comment"># 单价</span></span><br><span class="line">    <span class="comment"># 描述</span></span><br><span class="line">    <span class="comment"># 图片</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginUser</span>(models.Model):</span><br><span class="line">    <span class="comment"># 登录名</span></span><br><span class="line">    <span class="comment"># 登录口令</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ActiveModel</span>(models.Model):</span><br><span class="line">    <span class="comment"># 名称</span></span><br><span class="line">    <span class="comment"># 图片</span></span><br><span class="line">    <span class="comment"># 开始时间</span></span><br><span class="line">    <span class="comment"># 结束时间</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ActiveGoodsModel</span>(model.Model):</span><br><span class="line">    <span class="comment"># 活动ID - ForiegnKey(ActiveModel=)</span></span><br><span class="line">    <span class="comment"># 商品ID - ForeignKey(Goods, related_name=)</span></span><br><span class="line">    <span class="comment"># 折扣 rate  小数</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 增加订单和订单详情模型</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="二、Django中引入富文本方案"><a href="#二、Django中引入富文本方案" class="headerlink" title="二、Django中引入富文本方案"></a>二、Django中引入富文本方案</h2><h3 id="2-1-tinymce方案"><a href="#2-1-tinymce方案" class="headerlink" title="2.1 tinymce方案"></a>2.1 tinymce方案</h3><h3 id="2-2-mdeditor方案"><a href="#2-2-mdeditor方案" class="headerlink" title="2.2 mdeditor方案"></a>2.2 mdeditor方案</h3><h3 id="2-3-ueditor方案"><a href="#2-3-ueditor方案" class="headerlink" title="2.3 ueditor方案"></a>2.3 ueditor方案</h3><p>参考文档：<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/d236a33a8c01">http://www.jianshu.com/p/d236a33a8c01</a></p>
<h1 id="WEB后端服务第20天-Django第10天"><a href="#WEB后端服务第20天-Django第10天" class="headerlink" title="WEB后端服务第20天-Django第10天"></a>WEB后端服务第20天-Django第10天</h1><h2 id="一、Django-RESTful框架入门"><a href="#一、Django-RESTful框架入门" class="headerlink" title="一、Django-RESTful框架入门"></a>一、Django-RESTful框架入门</h2><p>文档：<a target="_blank" rel="noopener" href="https://www.django-rest-framework.org/">https://www.django-rest-framework.org/</a></p>
<h3 id="1-1-REST概要"><a href="#1-1-REST概要" class="headerlink" title="1.1  REST概要"></a>1.1  REST概要</h3><p><strong>概念</strong></p>
<p>​    REST即表述性状态传递（英文：Representational State Transfer，简称REST）是Roy Fielding博士在2000年他的博士论文中提出来的一种软件架构风格。它是一种针对网络应用的设计和开发方式，可以降低开发的复杂性，提高系统的可伸缩性。</p>
<p>​    REST通常基于使用HTTP，URI，和XML（标准通用标记语言下的一个子集）以及HTML（标准通用标记语言下的一个应用）这些现有的广泛流行的协议和标准。RESTful API设计规范：<a target="_blank" rel="noopener" href="http://wangwei.info/about-rest-api/">http://wangwei.info/about-rest-api/</a></p>
<p><strong>RESTful API四大基本原则：</strong></p>
<ul>
<li>为每个资源设置URI</li>
<li>通过XML / JSON进行数据传递</li>
<li>无状态连接，服务器端不应保存过多上下文状态，即每个请求都是独立的</li>
<li>使用HTTP动词：GET POST PUT DELETE</li>
</ul>
<h3 id="1-2-安装包"><a href="#1-2-安装包" class="headerlink" title="1.2 安装包"></a>1.2 安装包</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install djangorestframework markdown django-<span class="built_in">filter</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-开始使用"><a href="#1-3-开始使用" class="headerlink" title="1.3 开始使用"></a>1.3 开始使用</h3><h4 id="1-3-1-创建api包，并在init-py中声明api-router对象"><a href="#1-3-1-创建api包，并在init-py中声明api-router对象" class="headerlink" title="1.3.1 创建api包，并在init.py中声明api_router对象"></a>1.3.1 创建api包，并在init.py中声明api_router对象</h4><h4 id="1-3-2-在api包下创建user-py脚本，并在脚本中声明序列化类和视图"><a href="#1-3-2-在api包下创建user-py脚本，并在脚本中声明序列化类和视图" class="headerlink" title="1.3.2 在api包下创建user.py脚本，并在脚本中声明序列化类和视图"></a>1.3.2 在api包下创建user.py脚本，并在脚本中声明序列化类和视图</h4><h4 id="1-3-3-在init-py脚本中，注册视图"><a href="#1-3-3-在init-py脚本中，注册视图" class="headerlink" title="1.3.3 在init.py脚本中，注册视图"></a>1.3.3 在init.py脚本中，注册视图</h4><h4 id="1-3-4-主urls-py配置和settings-py配置"><a href="#1-3-4-主urls-py配置和settings-py配置" class="headerlink" title="1.3.4 主urls.py配置和settings.py配置"></a>1.3.4 主urls.py配置和settings.py配置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">	<span class="string">&#x27;DEFAULT_PAGINATION_CLASS&#x27;</span>: <span class="string">&#x27;rest_framework.pagination.PageNumberPagination&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PAGE_SIZE&#x27;</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5-访问并尝试CURD操作"><a href="#1-3-5-访问并尝试CURD操作" class="headerlink" title="1.3.5 访问并尝试CURD操作"></a>1.3.5 访问并尝试CURD操作</h4><h2 id="二、数据序列化"><a href="#二、数据序列化" class="headerlink" title="二、数据序列化"></a>二、数据序列化</h2><p>序列化：将模型类对象转成json格式字符串的数据，并返回给前端。可以序列化一个模型类对象，也可以序列化多个模型类对象queryset(many=True)</p>
<p>反序列化：将json数据转换成模型类对象，反序列化还可以用来进一步验证信息和保存数据，但验证的时候不一定保存数据入库，但是保存数据入库的时候一定要验证数据。</p>
<p>序列化和反序列化的功能本质上都属于序列化器的功能。</p>
<h3 id="2-1-三种序列化类"><a href="#2-1-三种序列化类" class="headerlink" title="2.1 三种序列化类"></a>2.1 三种序列化类</h3><ul>
<li><p>Serializer</p>
<ul>
<li>声明相关的字段</li>
<li>实现create(**validate_data)和update(instance, **validate_data)两个函数</li>
</ul>
</li>
<li><p>ModelSerializer</p>
<p>声明class的Meta类，并指定相关属性</p>
<ul>
<li>model</li>
<li>fields字段列表</li>
</ul>
</li>
<li><p>HyperlinkedModelSerializer</p>
</li>
</ul>
<h3 id="2-2-序列化与反序列化"><a href="#2-2-序列化与反序列化" class="headerlink" title="2.2 序列化与反序列化"></a>2.2 序列化与反序列化</h3><ul>
<li>查询模型类的数据：对象，queryset+many=True</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> api.user <span class="keyword">import</span> UserSerializer</span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> UserModel</span><br><span class="line"></span><br><span class="line">s1 = UserSerializer(UserModel.objects.get(pk=<span class="number">1</span>))</span><br><span class="line">s2 = UserSerializer(UserModel.objects.<span class="built_in">all</span>(), many=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将模型的对象转成dict或list</span></span><br><span class="line">s1.data</span><br><span class="line">s2.data</span><br></pre></td></tr></table></figure>

<ul>
<li><p>content =JSONReader().reader(serializer.data) 渲染成json数据的字符串</p>
</li>
<li><p>JSONParser().parse(io.BytesIO(content))对已渲染的json字符串进行反序列化</p>
<p>可以在views视图处理函数中使用，对于POST请求对象，可以直接使用JSONParser()对象对request请求对象进行反向解析。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = JSONParser().parse(request)</span><br><span class="line"></span><br><span class="line">serializer = UserSerializer(data=data)</span><br><span class="line">serializer.save()  <span class="comment"># 将数据保存到数据库中</span></span><br></pre></td></tr></table></figure>

<p>【注意】序列化类创建时常用的参数：instance、data、context、partial、many</p>
<h3 id="2-3-关联关系的序列化"><a href="#2-3-关联关系的序列化" class="headerlink" title="2.3 关联关系的序列化"></a>2.3 关联关系的序列化</h3><ul>
<li>serializers.StringRelatedField 获取关联模型类对象的str()返回的字符串</li>
<li>serializers.PrimarykeyRelatedField 获取关联模型对象的pk主键id值</li>
<li>serializers.SlugRelatedField(slug_field=’关联模型的字段’)</li>
<li>serializers.HyperlinkedRelatedField</li>
</ul>
<p>如果关联的模型存在序列化类，则内嵌关联模型的序列化类。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ActiveGoodsSerializer</span>(serializers.HyperlinkedModelSerializer):</span><br><span class="line">    goods = GoodsSerializer()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = ActiveGoodsModel</span><br><span class="line">        fields = (<span class="string">&#x27;goods&#x27;</span>, <span class="string">&#x27;rate&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ActiveSerializer</span>(serializers.HyperlinkedModelSerializer):</span><br><span class="line">    <span class="comment"># activies = serializers.StringRelatedField(many=True)</span></span><br><span class="line">    activies = ActiveGoodsSerializer(many=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = ActiveModel</span><br><span class="line">        fields = (<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;start_time&#x27;</span>, <span class="string">&#x27;end_time&#x27;</span>, <span class="string">&#x27;img1&#x27;</span>, <span class="string">&#x27;activies&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="三、请求与响应"><a href="#三、请求与响应" class="headerlink" title="三、请求与响应"></a>三、请求与响应</h2><h3 id="3-1-请求对象Request"><a href="#3-1-请求对象Request" class="headerlink" title="3.1 请求对象Request"></a>3.1 请求对象Request</h3><p>继承HttpRequest，扩展了一部分功能，增加data属性，可以处理PUT/PATCH/POST方法的参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.data  <span class="comment"># request.POST</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-响应对象Response"><a href="#3-2-响应对象Response" class="headerlink" title="3.2 响应对象Response"></a>3.2 响应对象Response</h3><p>继承TemplateResponse，在创建响应对象时，提供data属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Response(data)</span><br></pre></td></tr></table></figure>

<p>rest_framework框架提供status模块，提供响应的信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">HTTP_100_CONTINUE = <span class="number">100</span></span><br><span class="line">HTTP_101_SWITCHING_PROTOCOLS = <span class="number">101</span></span><br><span class="line">HTTP_200_OK = <span class="number">200</span></span><br><span class="line">HTTP_201_CREATED = <span class="number">201</span></span><br><span class="line">HTTP_202_ACCEPTED = <span class="number">202</span></span><br><span class="line">HTTP_203_NON_AUTHORITATIVE_INFORMATION = <span class="number">203</span></span><br><span class="line">HTTP_204_NO_CONTENT = <span class="number">204</span></span><br><span class="line">HTTP_205_RESET_CONTENT = <span class="number">205</span></span><br><span class="line">HTTP_206_PARTIAL_CONTENT = <span class="number">206</span></span><br><span class="line">HTTP_207_MULTI_STATUS = <span class="number">207</span></span><br><span class="line">HTTP_208_ALREADY_REPORTED = <span class="number">208</span></span><br><span class="line">HTTP_226_IM_USED = <span class="number">226</span></span><br><span class="line">HTTP_300_MULTIPLE_CHOICES = <span class="number">300</span></span><br><span class="line">HTTP_301_MOVED_PERMANENTLY = <span class="number">301</span></span><br><span class="line">HTTP_302_FOUND = <span class="number">302</span></span><br><span class="line">HTTP_303_SEE_OTHER = <span class="number">303</span></span><br><span class="line">HTTP_304_NOT_MODIFIED = <span class="number">304</span></span><br><span class="line">HTTP_305_USE_PROXY = <span class="number">305</span></span><br><span class="line">HTTP_306_RESERVED = <span class="number">306</span></span><br><span class="line">HTTP_307_TEMPORARY_REDIRECT = <span class="number">307</span></span><br><span class="line">HTTP_308_PERMANENT_REDIRECT = <span class="number">308</span></span><br><span class="line">HTTP_400_BAD_REQUEST = <span class="number">400</span></span><br><span class="line">HTTP_401_UNAUTHORIZED = <span class="number">401</span></span><br><span class="line">HTTP_402_PAYMENT_REQUIRED = <span class="number">402</span></span><br><span class="line">HTTP_403_FORBIDDEN = <span class="number">403</span></span><br><span class="line">HTTP_404_NOT_FOUND = <span class="number">404</span></span><br><span class="line">HTTP_405_METHOD_NOT_ALLOWED = <span class="number">405</span></span><br><span class="line">HTTP_406_NOT_ACCEPTABLE = <span class="number">406</span></span><br><span class="line">HTTP_407_PROXY_AUTHENTICATION_REQUIRED = <span class="number">407</span></span><br><span class="line">HTTP_408_REQUEST_TIMEOUT = <span class="number">408</span></span><br><span class="line">HTTP_409_CONFLICT = <span class="number">409</span></span><br><span class="line">HTTP_410_GONE = <span class="number">410</span></span><br><span class="line">HTTP_411_LENGTH_REQUIRED = <span class="number">411</span></span><br><span class="line">HTTP_412_PRECONDITION_FAILED = <span class="number">412</span></span><br><span class="line">HTTP_413_REQUEST_ENTITY_TOO_LARGE = <span class="number">413</span></span><br><span class="line">HTTP_414_REQUEST_URI_TOO_LONG = <span class="number">414</span></span><br><span class="line">HTTP_415_UNSUPPORTED_MEDIA_TYPE = <span class="number">415</span></span><br><span class="line">HTTP_416_REQUESTED_RANGE_NOT_SATISFIABLE = <span class="number">416</span></span><br><span class="line">HTTP_417_EXPECTATION_FAILED = <span class="number">417</span></span><br><span class="line">HTTP_418_IM_A_TEAPOT = <span class="number">418</span></span><br><span class="line">HTTP_422_UNPROCESSABLE_ENTITY = <span class="number">422</span></span><br><span class="line">HTTP_423_LOCKED = <span class="number">423</span></span><br><span class="line">HTTP_424_FAILED_DEPENDENCY = <span class="number">424</span></span><br><span class="line">HTTP_426_UPGRADE_REQUIRED = <span class="number">426</span></span><br><span class="line">HTTP_428_PRECONDITION_REQUIRED = <span class="number">428</span></span><br><span class="line">HTTP_429_TOO_MANY_REQUESTS = <span class="number">429</span></span><br><span class="line">HTTP_431_REQUEST_HEADER_FIELDS_TOO_LARGE = <span class="number">431</span></span><br><span class="line">HTTP_451_UNAVAILABLE_FOR_LEGAL_REASONS = <span class="number">451</span></span><br><span class="line">HTTP_500_INTERNAL_SERVER_ERROR = <span class="number">500</span></span><br><span class="line">HTTP_501_NOT_IMPLEMENTED = <span class="number">501</span></span><br><span class="line">HTTP_502_BAD_GATEWAY = <span class="number">502</span></span><br><span class="line">HTTP_503_SERVICE_UNAVAILABLE = <span class="number">503</span></span><br><span class="line">HTTP_504_GATEWAY_TIMEOUT = <span class="number">504</span></span><br><span class="line">HTTP_505_HTTP_VERSION_NOT_SUPPORTED = <span class="number">505</span></span><br><span class="line">HTTP_506_VARIANT_ALSO_NEGOTIATES = <span class="number">506</span></span><br><span class="line">HTTP_507_INSUFFICIENT_STORAGE = <span class="number">507</span></span><br><span class="line">HTTP_508_LOOP_DETECTED = <span class="number">508</span></span><br><span class="line">HTTP_509_BANDWIDTH_LIMIT_EXCEEDED = <span class="number">509</span></span><br><span class="line">HTTP_510_NOT_EXTENDED = <span class="number">510</span></span><br><span class="line">HTTP_511_NETWORK_AUTHENTICATION_REQUIRED = <span class="number">511</span></span><br></pre></td></tr></table></figure>

<h2 id="四、API授权"><a href="#四、API授权" class="headerlink" title="四、API授权"></a>四、API授权</h2><h3 id="4-1-默认授权认证"><a href="#4-1-默认授权认证" class="headerlink" title="4.1 默认授权认证"></a>4.1 默认授权认证</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">	<span class="string">&#x27;DEFAULT_AUTHENTICATION_CLASSES&#x27;</span>: [</span><br><span class="line">		<span class="string">&#x27;rest_framework.authentication.BasicAuthentication&#x27;</span>,</span><br><span class="line">		<span class="string">&#x27;rest_framework.authentication.SessionAuthentication&#x27;</span>,</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>默认情况下，APIView中的相关接口方法是不验证权限（授权）的，对资源来说不是很安全。可以通过以下的方式增加验证。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ExampleView</span>(<span class="title class_ inherited__">APIView</span>):</span><br><span class="line">    authentication_classes = (SessionAuthentication, BasicAuthentication)</span><br><span class="line">    permission_classes = (IsAuthenticated,)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request, <span class="built_in">format</span>=<span class="literal">None</span></span>):</span><br><span class="line">        content = &#123;</span><br><span class="line">            <span class="string">&#x27;user&#x27;</span>: unicode(request.user),  <span class="comment"># `django.contrib.auth.User` 实例。</span></span><br><span class="line">            <span class="string">&#x27;auth&#x27;</span>: unicode(request.auth),  <span class="comment"># None</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Response(content)</span><br></pre></td></tr></table></figure>

<p>可以指定TokenAuthentication</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TokenAuthentication</span>(<span class="title class_ inherited__">BaseAuthentication</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Simple token based authentication.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Clients should authenticate by passing the token key in the &quot;Authorization&quot;</span></span><br><span class="line"><span class="string">    HTTP header, prepended with the string &quot;Token &quot;.  For example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Authorization: Token 401f7ac837da42b97f613d789819ff93537bee6a</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    keyword = <span class="string">&#x27;Token&#x27;</span></span><br><span class="line">    model = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_model</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.model <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> self.model</span><br><span class="line">        <span class="keyword">from</span> rest_framework.authtoken.models <span class="keyword">import</span> Token</span><br><span class="line">        <span class="keyword">return</span> Token</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    A custom token model may be used, but must have the following properties.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    * key -- The string identifying the token</span></span><br><span class="line"><span class="string">    * user -- The user to which the token belongs</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">authenticate</span>(<span class="params">self, request</span>):</span><br><span class="line">        auth = get_authorization_header(request).split()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> auth <span class="keyword">or</span> auth[<span class="number">0</span>].lower() != self.keyword.lower().encode():</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(auth) == <span class="number">1</span>:</span><br><span class="line">            msg = _(<span class="string">&#x27;Invalid token header. No credentials provided.&#x27;</span>)</span><br><span class="line">            <span class="keyword">raise</span> exceptions.AuthenticationFailed(msg)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">len</span>(auth) &gt; <span class="number">2</span>:</span><br><span class="line">            msg = _(<span class="string">&#x27;Invalid token header. Token string should not contain spaces.&#x27;</span>)</span><br><span class="line">            <span class="keyword">raise</span> exceptions.AuthenticationFailed(msg)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            token = auth[<span class="number">1</span>].decode()</span><br><span class="line">        <span class="keyword">except</span> UnicodeError:</span><br><span class="line">            msg = _(<span class="string">&#x27;Invalid token header. Token string should not contain invalid characters.&#x27;</span>)</span><br><span class="line">            <span class="keyword">raise</span> exceptions.AuthenticationFailed(msg)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self.authenticate_credentials(token)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">authenticate_credentials</span>(<span class="params">self, key</span>):</span><br><span class="line">        model = self.get_model()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            token = model.objects.select_related(<span class="string">&#x27;user&#x27;</span>).get(key=key)</span><br><span class="line">        <span class="keyword">except</span> model.DoesNotExist:</span><br><span class="line">            <span class="keyword">raise</span> exceptions.AuthenticationFailed(_(<span class="string">&#x27;Invalid token.&#x27;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> token.user.is_active:</span><br><span class="line">            <span class="keyword">raise</span> exceptions.AuthenticationFailed(_(<span class="string">&#x27;User inactive or deleted.&#x27;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (token.user, token)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">authenticate_header</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="keyword">return</span> self.keyword</span><br></pre></td></tr></table></figure>

<h3 id="4-2-自定义Token身份认证"><a href="#4-2-自定义Token身份认证" class="headerlink" title="4.2 自定义Token身份认证"></a>4.2 自定义Token身份认证</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.translation <span class="keyword">import</span> ugettext_lazy <span class="keyword">as</span> _</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework.authentication <span class="keyword">import</span> BaseAuthentication</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> exceptions</span><br><span class="line"><span class="keyword">from</span> rest_framework.authtoken.models <span class="keyword">import</span> Token</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> HTTP_HEADER_ENCODING</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取请求头里的token信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_authorization_header</span>(<span class="params">request</span>):</span><br><span class="line">    auth = request.META.get(<span class="string">&#x27;HTTP_AUTHORIZATION&#x27;</span>, <span class="string">b&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(auth, <span class="built_in">str</span>):</span><br><span class="line">        <span class="comment"># Work around django test client oddness</span></span><br><span class="line">        auth = auth.encode(HTTP_HEADER_ENCODING)</span><br><span class="line">    <span class="keyword">return</span> auth</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义的ExpiringTokenAuthentication认证方式</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExpiringTokenAuthentication</span>(<span class="title class_ inherited__">BaseAuthentication</span>):</span><br><span class="line">    </span><br><span class="line">    model = Token</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">authenticate</span>(<span class="params">self, request</span>):</span><br><span class="line">        auth = get_authorization_header(request):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> auth:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                token = auth.decode()</span><br><span class="line">            <span class="keyword">except</span> UnicodeError:</span><br><span class="line">                msg = _(<span class="string">&#x27;验证token无效&#x27;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">raise</span> exceptions.AuthenticationFailed(msg)</span><br><span class="line">            <span class="keyword">return</span> self.authenticate_credentials(token)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python%E7%BB%84%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python%E7%BB%84%E4%BB%B6/" class="post-title-link" itemprop="url">python组件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:18:53" itemprop="dateCreated datePublished" datetime="2022-08-17T10:18:53+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-16 15:19:37" itemprop="dateModified" datetime="2022-08-16T15:19:37+08:00">2022-08-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python组件"><a href="#python组件" class="headerlink" title="python组件"></a>python组件</h1><h2 id="1-生成6位数字随机验证码"><a href="#1-生成6位数字随机验证码" class="headerlink" title="1. 生成6位数字随机验证码"></a>1. 生成6位数字随机验证码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">num_code</span>(<span class="params">length=<span class="number">6</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    生成长度为length的数字随机验证码</span></span><br><span class="line"><span class="string">    :param length: 验证码长度</span></span><br><span class="line"><span class="string">    :return: 验证码</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(random.choice(string.digits) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, length))</span><br></pre></td></tr></table></figure>

<h2 id="2-md5加密"><a href="#2-md5加密" class="headerlink" title="2.md5加密"></a>2.md5加密</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  hashlib</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># md5加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">md5_encrypt</span>(<span class="params">en_str</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    使用md5二次加密生成32位的字符串</span></span><br><span class="line"><span class="string">    :param en_str: 需要加密的字符串</span></span><br><span class="line"><span class="string">    :return: 加密后的字符串</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">   </span><br><span class="line">    md5 = hashlib.md5()  <span class="comment"># 使用MD5加密模式</span></span><br><span class="line">    md5.update(en_str.encode(<span class="string">&#x27;utf-8&#x27;</span>))  <span class="comment"># 将参数字符串传入</span></span><br><span class="line">    md5.update(md5.hexdigest().encode(<span class="string">&#x27;utf-8&#x27;</span>))  <span class="comment"># md5二次加密</span></span><br><span class="line">    <span class="keyword">return</span> md5.hexdigest()</span><br></pre></td></tr></table></figure>

<h2 id="3-生成唯一token"><a href="#3-生成唯一token" class="headerlink" title="3. 生成唯一token"></a>3. 生成唯一token</h2><pre><code>import uuid
import  hashlib

def only_token():
    &quot;&quot;&quot;
    使用md5加密uuid生成唯一的32位token
    :return: 加密后的字符串
    &quot;&quot;&quot;
md5 = hashlib.md5()  # 使用MD5加密模式
md5.update(str(uuid.uuid1()).encode(&#39;utf-8&#39;))  
return md5.hexdigest()
</code></pre>
<h2 id="4、发送手机验证码"><a href="#4、发送手机验证码" class="headerlink" title="4、发送手机验证码"></a>4、发送手机验证码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#验证码管理表</span><br><span class="line">class AuthCode(models.Model):</span><br><span class="line">    name = models.CharField(max_length=10,default=None, null=True, blank=True,verbose_name=&#x27;姓名&#x27;)</span><br><span class="line">    phone = models.CharField(max_length=11, unique=True, verbose_name=&#x27;手机号&#x27;)</span><br><span class="line">    code = models.CharField(max_length=6,verbose_name=&#x27;验证码&#x27;)</span><br><span class="line">    purpose = models.IntegerField(default=0,verbose_name=&#x27;用途:0-&gt;注册验证 1-&gt;找回密码 2-&gt;其它&#x27;)</span><br><span class="line">    sendNum = models.IntegerField(default=0,verbose_name=&#x27;发送次数&#x27;)</span><br><span class="line">    isCanGet = models.BooleanField(default=0,verbose_name=&#x27;0-&gt;可以获取,1-&gt;不可以获取&#x27;)</span><br><span class="line">    recentlySendTime = models.DateTimeField(auto_now_add=True,verbose_name=&#x27;最近一次发送时间&#x27;)</span><br><span class="line">    creation_time = models.DateTimeField(auto_now=True, verbose_name=&#x27;创建时间&#x27;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        verbose_name = &#x27;手机验证码&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="实现逻辑"><a href="#实现逻辑" class="headerlink" title="实现逻辑"></a>实现逻辑</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import http.client</span><br><span class="line">import urllib</span><br><span class="line"># 使用互亿无线</span><br><span class="line">host = &quot;106.ihuyi.com&quot;</span><br><span class="line">sms_send_uri = &quot;/webservice/sms.php?method=Submit&quot;</span><br><span class="line"></span><br><span class="line"># 查看用户名 登录用户中心-&gt;验证码通知短信&gt;产品总览-&gt;API接口信息-&gt;APIID</span><br><span class="line">account = &quot;你的用户名&quot;</span><br><span class="line"># 查看密码 登录用户中心-&gt;验证码通知短信&gt;产品总览-&gt;API接口信息-&gt;APIKEY</span><br><span class="line">password = &quot;你的密码&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def send_sms(text, mobile):</span><br><span class="line">    text = f&quot;您的验证码是：&#123;text&#125;。请不要把验证码泄露给其他人。&quot;</span><br><span class="line">    params = urllib.parse.urlencode(</span><br><span class="line">        &#123;&#x27;account&#x27;: account, &#x27;password&#x27;: password, &#x27;content&#x27;: text, &#x27;mobile&#x27;: mobile, &#x27;format&#x27;: &#x27;json&#x27;&#125;)</span><br><span class="line">    headers = &#123;&quot;Content-type&quot;: &quot;application/x-www-form-urlencoded&quot;, &quot;Accept&quot;: &quot;text/plain&quot;&#125;</span><br><span class="line">    conn = http.client.HTTPConnection(host, port=80, timeout=30)</span><br><span class="line">    conn.request(&quot;POST&quot;, sms_send_uri, params, headers)</span><br><span class="line">    response = conn.getresponse()</span><br><span class="line">    response_str = response.read()</span><br><span class="line">    conn.close()</span><br><span class="line">    return response_str</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    mobile = &quot;手机号&quot;</span><br><span class="line">    text = &#x27;123122&#x27;</span><br><span class="line"></span><br><span class="line">    print(json.loads(send_sms(text, mobile).decode(&#x27;utf-8&#x27;)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5、生成二维码"><a href="#5、生成二维码" class="headerlink" title="5、生成二维码"></a>5、生成二维码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import qrcode</span><br><span class="line">import io</span><br><span class="line"></span><br><span class="line">def maker_qrcode(url):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    生成二维码</span><br><span class="line">    :param url: 需要生成二维码的url</span><br><span class="line">    :return: 返回图片字节流</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    image = qrcode.make(url)  # 创建二维码片</span><br><span class="line"></span><br><span class="line">    buffer = io.BytesIO()</span><br><span class="line">    # 将图片内容丢入容器</span><br><span class="line">    image.save(buffer, &#x27;png&#x27;)</span><br><span class="line">    # 返回容器内的字节</span><br><span class="line">    return buffer.getvalue()</span><br><span class="line">    </span><br><span class="line">或者</span><br><span class="line">from .settings import BASE_DIR</span><br><span class="line"></span><br><span class="line">def create_qrcode(name, url):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    生成机器扫码支付二维码</span><br><span class="line">    :param name: 图片名称</span><br><span class="line">    :param url: 支付路由</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    img = qrcode.make(url, border=0)  # 创建二维码片</span><br><span class="line">    save_path = BASE_DIR + &#x27;/&#x27; + name + &#x27;.png&#x27;</span><br><span class="line">    print(save_path)</span><br><span class="line">    img.save(save_path)</span><br><span class="line">    return img</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-微信群发"><a href="#6-微信群发" class="headerlink" title="6.微信群发"></a>6.微信群发</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line">import itchat, time</span><br><span class="line"></span><br><span class="line">itchat.auto_login(True)</span><br><span class="line"></span><br><span class="line">SINCERE_WISH = u&#x27;祝%s新年快乐！&#x27;</span><br><span class="line"></span><br><span class="line">friendList = itchat.get_friends(update=True)[35:]</span><br><span class="line">count = 0</span><br><span class="line"></span><br><span class="line">for  index,friend in enumerate(friendList):</span><br><span class="line">    print(index,friend[&#x27;DisplayName&#x27;],friend[&#x27;NickName&#x27;])</span><br><span class="line">    itchat.send(SINCERE_WISH % (friend[&#x27;DisplayName&#x27;]</span><br><span class="line">                                or friend[&#x27;NickName&#x27;]), friend[&#x27;UserName&#x27;])</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    print(&#x27;备注名称&#x27;,friend[&#x27;DisplayName&#x27;],&#x27;昵称&#x27;,friend[&#x27;NickName&#x27;],&#x27;用户名&#x27;,friend[&#x27;UserName&#x27;])</span><br><span class="line"></span><br><span class="line">print(&quot;----end----&quot;)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 发送文本</span><br><span class="line">itchat.send(&#x27;Hello, WeChat!&#x27;)</span><br><span class="line"># 发送图片</span><br><span class="line">itchat.send_image(&#x27;my_picture.png&#x27;)</span><br><span class="line"># 发送视频</span><br><span class="line">itchat.send_video(&#x27;my_video.mov&#x27;)</span><br><span class="line"># 发送文件</span><br><span class="line">itchat.send_file(&#x27;my_file.zip&#x27;)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="7、微信自动回复"><a href="#7、微信自动回复" class="headerlink" title="7、微信自动回复"></a>7、微信自动回复</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding=utf-8 -*-</span><br><span class="line">import requests</span><br><span class="line">import itchat</span><br><span class="line">import random</span><br><span class="line">#图灵机器人</span><br><span class="line">#http://www.tuling123.com/member/robot/1380138/center/frame.jhtml?page=0&amp;child=0获取apikey</span><br><span class="line">KEY = &#x27;你的KEY&#x27;</span><br><span class="line"></span><br><span class="line">def get_response(msg):</span><br><span class="line">    apiUrl = &#x27;http://www.tuling123.com/openapi/api&#x27;</span><br><span class="line">    data = &#123;</span><br><span class="line">        &#x27;key&#x27;    : KEY,</span><br><span class="line">        &#x27;info&#x27;   : msg,</span><br><span class="line">        &#x27;userid&#x27; : &#x27;wechat-robot&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">    try:</span><br><span class="line">        r = requests.post(apiUrl, data=data).json()</span><br><span class="line">        return r.get(&#x27;text&#x27;)</span><br><span class="line">    except:</span><br><span class="line">        return</span><br><span class="line"></span><br><span class="line">@itchat.msg_register(itchat.content.TEXT)</span><br><span class="line">def tuling_reply(msg):</span><br><span class="line">    defaultReply = &#x27;I received: &#x27; + msg[&#x27;Text&#x27;]</span><br><span class="line">    robots=[&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;]</span><br><span class="line">    reply = get_response(msg[&#x27;Text&#x27;])+random.choice(robots)</span><br><span class="line">    return reply or defaultReply</span><br><span class="line"></span><br><span class="line">itchat.auto_login(enableCmdQR=False)</span><br><span class="line">itchat.run()</span><br></pre></td></tr></table></figure>

<h2 id="8、提取Django中model中的字段名变成字典、列表"><a href="#8、提取Django中model中的字段名变成字典、列表" class="headerlink" title="8、提取Django中model中的字段名变成字典、列表"></a>8、提取Django中model中的字段名变成字典、列表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">t = &quot;&quot;&quot;</span><br><span class="line">    goods_id = models.IntegerField(verbose_name=&#x27;商品编号&#x27;)</span><br><span class="line">    label_code = models.CharField(max_length=20, verbose_name=&#x27;商品标签&#x27;)</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 字典</span><br><span class="line">print(&#123;k:None for k in re.findall(&#x27;([a-z_A-Z]+)\s=\s&#x27;,t)&#125;)</span><br><span class="line"># 列表</span><br><span class="line"># print([k for k in re.findall(&#x27;([a-z_A-Z]+)\s=\s&#x27;,t)])</span><br><span class="line"></span><br><span class="line">输出</span><br><span class="line">&#123;&#x27;goods_id&#x27;: None, &#x27;lable_code&#x27;: None&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、数据库中给表创建数据"><a href="#9、数据库中给表创建数据" class="headerlink" title="9、数据库中给表创建数据"></a>9、数据库中给表创建数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line">def createData(dataDict,tableName):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    给数据表创建数据</span><br><span class="line">    :param dataDict: 字典</span><br><span class="line">    :param tableName: 表名</span><br><span class="line">    :return: </span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    #连接数据库</span><br><span class="line">    conn = pymysql.connect(</span><br><span class="line">        host=&#x27;192.168.0.188&#x27;, #数据库所在地址URL</span><br><span class="line">        user=&#x27;root&#x27;, #用户名</span><br><span class="line">        password=&#x27;123456&#x27;, #密码</span><br><span class="line">        database=&#x27;名称&#x27;, #数据库名称</span><br><span class="line">        port=3306,  #端口号</span><br><span class="line">        charset=&#x27;utf8&#x27;</span><br><span class="line">    )</span><br><span class="line">    #拿到查询游标</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    clos,value = zip(*dataDict.items())</span><br><span class="line">    sql = &quot;INSERT INTO `%s`(%s) VALUES (%s)&quot; % (tableName,</span><br><span class="line">                                                &#x27;,&#x27;.join(clos),</span><br><span class="line">                                                &#x27;,&#x27;.join([&#x27;%s&#x27;] * len(value))</span><br><span class="line">                                                )</span><br><span class="line">    print(sql)</span><br><span class="line">    cursor.execute(sql, value)</span><br><span class="line">    conn.commit()</span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line">    print(&#x27;Done&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="10-捕捉异常"><a href="#10-捕捉异常" class="headerlink" title="10.捕捉异常"></a>10.捕捉异常</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    pass</span><br><span class="line">except 异常类型 as e:</span><br><span class="line">    pass</span><br><span class="line">finally:</span><br><span class="line">    pass</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">异常类型</span><br><span class="line">Exception  全部异常</span><br><span class="line">AttributeError 试图访问一个对象没有的属性，比如foo.x，但是foo没有属性x</span><br><span class="line">IOError 输入/输出异常；基本上是无法打开文件</span><br><span class="line">ImportError 无法引入模块或包；基本上是路径问题或名称错误</span><br><span class="line">IndentationError 语法错误（的子类） ；代码没有正确对齐</span><br><span class="line">IndexError 下标索引超出序列边界，比如当x只有三个元素，却试图访问x[5]</span><br><span class="line">KeyError 试图访问字典里不存在的键</span><br><span class="line">KeyboardInterrupt Ctrl+C被按下</span><br><span class="line">NameError 使用一个还未被赋予对象的变量</span><br><span class="line">SyntaxError Python代码非法，代码不能编译(个人认为这是语法错误，写错了）</span><br><span class="line">TypeError 传入对象类型与要求的不符合</span><br><span class="line">UnboundLocalError 试图访问一个还未被设置的局部变量，基本上是由于另有一个同名的全局变量，导致你以为正在访问它</span><br><span class="line">ValueError 传入一个调用者不期望的值，即使值的类型是正确的</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="11、获取当前时间"><a href="#11、获取当前时间" class="headerlink" title="11、获取当前时间"></a>11、获取当前时间</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">current_time = str(datetime.datetime.now())[:19]</span><br><span class="line">print(current_time)</span><br><span class="line"></span><br><span class="line">输出格式如：2018-10-20 10:01:43</span><br><span class="line">local_time = time.strftime(&#x27;%Y%m%d%H%M%S&#x27;, time.localtime(time.time()))</span><br><span class="line">print(local_time)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="12、订单编号"><a href="#12、订单编号" class="headerlink" title="12、订单编号"></a>12、订单编号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from random import Random</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def random_str(randomlength=8):</span><br><span class="line">    str = &#x27;&#x27;</span><br><span class="line">    chars = &#x27;AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789&#x27;</span><br><span class="line">    length = len(chars) - 1</span><br><span class="line">    random = Random()</span><br><span class="line">    for i in range(randomlength):</span><br><span class="line">        str+=chars[random.randint(0, length)]</span><br><span class="line">    return str</span><br><span class="line"></span><br><span class="line">def order_num():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    生成付款订单号</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    local_time = time.strftime(&#x27;%Y%m%d%H%M%S&#x27;, time.localtime(time.time()))</span><br><span class="line">    result = local_time + random_str(5)</span><br><span class="line">    return result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(order_num())</span><br></pre></td></tr></table></figure>

<h2 id="13、mysql自动填写当前时间"><a href="#13、mysql自动填写当前时间" class="headerlink" title="13、mysql自动填写当前时间"></a>13、mysql自动填写当前时间</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CURRENT_TIMESTAMP</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190312172747658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">为表添加索引</span><br><span class="line"></span><br><span class="line">ALTER table tableName ADD INDEX indexName(columnName)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="14、drf动态过滤查询"><a href="#14、drf动态过滤查询" class="headerlink" title="14、drf动态过滤查询"></a>14、drf动态过滤查询</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"># page.py</span><br><span class="line"></span><br><span class="line">from rest_framework.pagination import PageNumberPagination</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class UserPagination(PageNumberPagination):</span><br><span class="line">    &quot;&quot;&quot;用户分页器&quot;&quot;&quot;</span><br><span class="line">    page_size = 10  # 默认的页面数据数量</span><br><span class="line">    page_query_param = &#x27;page&#x27;  # 定制取数据页码key </span><br><span class="line">    page_size_query_param = &#x27;page_size&#x27;  # 默认取数据页码key </span><br><span class="line">    max_page_size = 15   # 数据每页取值的最大上限</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># serializers.py</span><br><span class="line"></span><br><span class="line">from rest_framework import serializers</span><br><span class="line"></span><br><span class="line">from user.models import UserInfo</span><br><span class="line"></span><br><span class="line">class UserSerializers(serializers.ModelSerializer):</span><br><span class="line">    &quot;&quot;&quot;用户收货地址&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        model = UserInfo</span><br><span class="line">	    # 所有字段</span><br><span class="line">        #fields = &#x27;__all__&#x27;</span><br><span class="line">        fields = [&#x27;name&#x27;, &#x27;code&#x27;, &#x27;title&#x27;,  &#x27;province&#x27;, &#x27;city&#x27;,</span><br><span class="line">                    &#x27;quxian&#x27;, &#x27;address&#x27;, &#x27;code__gte&#x27;, &#x27;code__lte&#x27;]</span><br><span class="line">        # 显示外键</span><br><span class="line">        depth = 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># views.py</span><br><span class="line">class MachineViews(APIView):</span><br><span class="line">    def get(self, request, *args, **kwargs):</span><br><span class="line">        # 从前端获取出来的过滤参数，解析成字典传进filter()函数中</span><br><span class="line">        # 动态过滤，</span><br><span class="line">        kwargs = &#123;&#125;</span><br><span class="line">        # 表中的字段名</span><br><span class="line">        columns = [&#x27;name&#x27;, &#x27;code&#x27;, &#x27;title&#x27;,  &#x27;province&#x27;, &#x27;city&#x27;,</span><br><span class="line">                    &#x27;quxian&#x27;, &#x27;address&#x27;, &#x27;code__gte&#x27;, &#x27;code__lte&#x27;]</span><br><span class="line">        for k, v in request.query_params.items():</span><br><span class="line">            if k not in columns:</span><br><span class="line">                return Response(&#x27;参数不对&#x27;, status=status.HTTP_400_BAD_REQUEST)</span><br><span class="line">			if v:</span><br><span class="line">            	kwargs[k] = v</span><br><span class="line"></span><br><span class="line">        users = UserInfo.objects.filter(**kwargs)</span><br><span class="line">        page = UserPagination()</span><br><span class="line">        page_goods_list = page.paginate_queryset(users, self.request, self)</span><br><span class="line">        ser = UserSerializers(page_goods_list, many=True)</span><br><span class="line">        return page.get_paginated_response(ser.data)</span><br><span class="line">        </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="15、linux后台运行python程序"><a href="#15、linux后台运行python程序" class="headerlink" title="15、linux后台运行python程序"></a>15、linux后台运行python程序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup /home/project_venv/user/bin/python3 -u /home/user/user_server.py &gt;&gt; /home/user/user.log 2&gt;&amp;1 &amp;   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="16、追加外键"><a href="#16、追加外键" class="headerlink" title="16、追加外键"></a>16、追加外键</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tb_commentPhoto ADD CONSTRAINT FK_comment_phone</span><br><span class="line">FOREIGN KEY tb_goodsComment(id) REFERENCES tb_commentPhoto(comment_id);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="17、写-读CSV文件，查看是否存在，若存在就从csv中删除"><a href="#17、写-读CSV文件，查看是否存在，若存在就从csv中删除" class="headerlink" title="17、写/读CSV文件，查看是否存在，若存在就从csv中删除"></a>17、写/读CSV文件，查看是否存在，若存在就从csv中删除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">import csv</span><br><span class="line">import random</span><br><span class="line">import string</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def create_invite_code(random_code_pool=None, length=6, num=10, is_append=False):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    创建随机邀请码,并写入txt文件</span><br><span class="line">    :param: random_code_pool 随机邀请码</span><br><span class="line">    :param: length 邀请码长度</span><br><span class="line">    :param: num 邀请码个数</span><br><span class="line">    :param: is_append True追加,False 覆盖</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if not random_code_pool:</span><br><span class="line">        code_pool = string.ascii_uppercase + string.digits</span><br><span class="line">        random_code_pool = []</span><br><span class="line">        for i in range(num):</span><br><span class="line">            s = &#x27;&#x27;</span><br><span class="line">            for _ in range(length):</span><br><span class="line">                s += random.choice(code_pool)</span><br><span class="line">            if s and s not in random_code_pool:</span><br><span class="line">                random_code_pool.append(s)</span><br><span class="line"></span><br><span class="line">    # 写入方法。是追加还是覆盖</span><br><span class="line">    write_method = &#x27;a+&#x27; if is_append else &#x27;w&#x27;</span><br><span class="line">    # 写入文件</span><br><span class="line">    with open(&#x27;./invite_code.csv&#x27;, write_method, newline=&#x27;&#x27;) as f:</span><br><span class="line">        writer = csv.writer(f)</span><br><span class="line">        for rowData in random_code_pool:</span><br><span class="line">            # 按行写入</span><br><span class="line">            writer.writerow((rowData,))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def check_invite_code(code):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    查看邀请码是否存在txt文件中，</span><br><span class="line">    若存在就返回True，并在txt文件中删除</span><br><span class="line">    若不存在就返回False</span><br><span class="line">    :param code:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    code_pool = []</span><br><span class="line">    with open(&#x27;./invite_code.csv&#x27;, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;,errors=&#x27;ignore&#x27;) as f:</span><br><span class="line">        allFileInfo = csv.reader(f)</span><br><span class="line">        for row in allFileInfo:</span><br><span class="line">            code_pool.append(row[0])</span><br><span class="line"></span><br><span class="line">    if code in code_pool:</span><br><span class="line">        # 删除查询的code</span><br><span class="line">        code_pool.pop(code_pool.index(code))</span><br><span class="line"></span><br><span class="line">        # 重新写入文件</span><br><span class="line">        create_invite_code(code_pool,is_append=False)</span><br><span class="line">        return True</span><br><span class="line">    return False</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    # create_invite_code(length=9,num=100)</span><br><span class="line">    print(check_invite_code(&#x27;WJ4PSTJG2&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="18、django中从request获取访问路径"><a href="#18、django中从request获取访问路径" class="headerlink" title="18、django中从request获取访问路径"></a>18、django中从request获取访问路径</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;获取相对路径&#x27;, request.get_full_path())</span><br><span class="line">print(&#x27;获取绝对路径&#x27;, request.build_absolute_uri())</span><br><span class="line">print(request.build_absolute_uri(&#x27;?&#x27;))</span><br><span class="line">print(request.build_absolute_uri(&#x27;/&#x27;)[:-1].strip(&quot;/&quot;))</span><br><span class="line">print(request.build_absolute_uri(&#x27;/&#x27;).strip(&quot;/&quot;))</span><br><span class="line">print(request.build_absolute_uri(&#x27;/&#x27;))</span><br><span class="line">print(&#x27;----------&#x27;)</span><br><span class="line">print(request.META[&#x27;HTTP_HOST&#x27;])</span><br><span class="line">print(request.META[&#x27;PATH_INFO&#x27;])</span><br><span class="line">print(request.META[&#x27;QUERY_STRING&#x27;])</span><br><span class="line">iphost = request.META.get(&#x27;REMOTE_ADDR&#x27;, &#x27;&#x27;)  # 获取访问来源IP</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如：</span><br><span class="line">获取相对路径 /QRcode/?d=1</span><br><span class="line">获取绝对路径 http://127.0.0.1:8000/QRcode/?d=1</span><br><span class="line">http://127.0.0.1:8000/QRcode/</span><br><span class="line">http://127.0.0.1:8000</span><br><span class="line">http://127.0.0.1:8000</span><br><span class="line">http://127.0.0.1:8000/</span><br><span class="line">----------</span><br><span class="line">127.0.0.1:8000</span><br><span class="line">/QRcode/</span><br><span class="line">d=1</span><br></pre></td></tr></table></figure>

<h2 id="19、Django收集静态文件"><a href="#19、Django收集静态文件" class="headerlink" title="19、Django收集静态文件"></a>19、Django收集静态文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">先在项目根目录下创建一个static文件夹</span><br><span class="line">然后在settings.py中设置</span><br><span class="line">STATIC_ROOT = os.path.join(BASE_DIR, &#x27;static&#x27;)</span><br><span class="line">最后执行下面的命令：</span><br><span class="line">python manage.py collectstatic</span><br></pre></td></tr></table></figure>

<h2 id="20、xadmin插件"><a href="#20、xadmin插件" class="headerlink" title="20、xadmin插件"></a>20、xadmin插件</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lanqie/p/8340215.html">https://www.cnblogs.com/lanqie/p/8340215.html</a></p>
<h2 id="21、uwsgi自动重启"><a href="#21、uwsgi自动重启" class="headerlink" title="21、uwsgi自动重启"></a>21、uwsgi自动重启</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line"># 使用nginx连接时 使用</span><br><span class="line">socket=0.0.0.0:2019</span><br><span class="line"># 直接作为web服务器使用</span><br><span class="line">#http=0.0.0.1:8000</span><br><span class="line"># 配置工程目录</span><br><span class="line">chdir=/home/user</span><br><span class="line"># 配置项目的wsgi目录。相对于工程目录</span><br><span class="line">wsgi-file=user/wsgi.py</span><br><span class="line">virtualenv=/home/project_venv/user</span><br><span class="line">#配置进程，线程信息</span><br><span class="line">processes=1</span><br><span class="line">threads=1</span><br><span class="line">enable-threads=True</span><br><span class="line">master=True</span><br><span class="line">pidfile=uwsgi.pid</span><br><span class="line">daemonize=uwsgi.log</span><br><span class="line">#启动uwsgi的用户名和用户组</span><br><span class="line">uid=root</span><br><span class="line">gid=root</span><br><span class="line">#uwsgi自动重启</span><br><span class="line">py-autoreload=1</span><br></pre></td></tr></table></figure>

<h2 id="22、谷歌浏览器快捷键"><a href="#22、谷歌浏览器快捷键" class="headerlink" title="22、谷歌浏览器快捷键"></a>22、谷歌浏览器快捷键</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">浏览器缓存</span><br><span class="line"></span><br><span class="line">Ctrl+Shift+Del  清除Google浏览器缓存的快捷键</span><br><span class="line"></span><br><span class="line">Ctrl+Shift+R  重新加载当前网页而不使用缓存内容</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="23、git克隆分支"><a href="#23、git克隆分支" class="headerlink" title="23、git克隆分支"></a>23、git克隆分支</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b dev 地址 </span><br></pre></td></tr></table></figure>

<h2 id="24、mysql更新语句、新增列、删除列"><a href="#24、mysql更新语句、新增列、删除列" class="headerlink" title="24、mysql更新语句、新增列、删除列"></a>24、mysql更新语句、新增列、删除列</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">update user set name=&#x27;张三&#x27; where id=111</span><br><span class="line"># 删除</span><br><span class="line">DELETE FROM table_name [WHERE Clause]</span><br><span class="line"></span><br><span class="line"># 增加字段</span><br><span class="line">alter table 表名 add column 列名 类型;</span><br><span class="line"># 删除字段</span><br><span class="line">alter table 表名 dropcolumn 列名 ;</span><br></pre></td></tr></table></figure>

<h2 id="25、删除指定格式的文件"><a href="#25、删除指定格式的文件" class="headerlink" title="25、删除指定格式的文件"></a>25、删除指定格式的文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def remove_specified_format_file(file_dir, format_name):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    删除指定格式的文件</span><br><span class="line">    :param file_dir: 文件根目录</span><br><span class="line">    :param format_name: 格式</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    for root, dirs, files in os.walk(file_dir):</span><br><span class="line">        # print(root) #当前目录路径</span><br><span class="line">        # print(dirs) #当前路径下所有子目录</span><br><span class="line">        # print(files) #当前路径下所有非目录子文件</span><br><span class="line">        for file in files:</span><br><span class="line">            if re.match(format_name, file):</span><br><span class="line">                print(os.path.join(root, file))</span><br><span class="line">                os.remove(os.path.join(root, file))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">remove_specified_format_file(r&#x27;D:\学习\LDC\java&#x27;, r&#x27;\._*&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="26、计算文件总数"><a href="#26、计算文件总数" class="headerlink" title="26、计算文件总数"></a>26、计算文件总数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def file_count(file_dir):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    :param file_dir: 文件根目录</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    count = 0</span><br><span class="line">    for root, dirs, files in os.walk(file_dir):</span><br><span class="line">        # print(root) #当前目录路径</span><br><span class="line">        # print(dirs) #当前路径下所有子目录</span><br><span class="line">        # print(files) #当前路径下所有非目录子文件</span><br><span class="line">        count += len(files)</span><br><span class="line">    return count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(file_count(r&#x27;D:\学习\LDC\java\Java学习\newEstore\estore\js&#x27;))</span><br></pre></td></tr></table></figure>

<h2 id="27、计算文件夹大小"><a href="#27、计算文件夹大小" class="headerlink" title="27、计算文件夹大小"></a>27、计算文件夹大小</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line">def file_size(file_dir):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    删除指定格式的文件</span><br><span class="line">    :param file_dir: 文件根目录</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    size = 0</span><br><span class="line">    for root, dirs, files in os.walk(file_dir):</span><br><span class="line">        # print(root) #当前目录路径</span><br><span class="line">        # print(dirs) #当前路径下所有子目录</span><br><span class="line">        # print(files) #当前路径下所有非目录子文件</span><br><span class="line">        for file in files:</span><br><span class="line">            size += os.path.getsize(os.path.join(root, file))</span><br><span class="line">	# M为单位</span><br><span class="line">    return size / 1024 / 1024</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">file_name = r&#x27;D:\学习&#x27;</span><br><span class="line">print(file_size(file_name))</span><br></pre></td></tr></table></figure>

<h2 id="28、Django实现jsonp跨域"><a href="#28、Django实现jsonp跨域" class="headerlink" title="28、Django实现jsonp跨域"></a>28、Django实现jsonp跨域</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># html</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">                    url: &#x27;请求路由&#x27;,</span><br><span class="line">                    type: &#x27;GET&#x27;,</span><br><span class="line">                    dataType: &#x27;JSONP&#x27;,</span><br><span class="line">                    data:&#123;</span><br><span class="line">                      code: &#x27;yes&#x27;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    jsonp: &#x27;callback&#x27;,</span><br><span class="line">                    success: function(res) &#123;</span><br><span class="line">                       var selectData = $.parseJSON(res);</span><br><span class="line">                       alert(selectData);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    error: function(err) &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line"># views.py</span><br><span class="line">def get(self, request, *args, **kwargs):</span><br><span class="line">        code = request.GET.get(&#x27;code&#x27;, &#x27;&#x27;)</span><br><span class="line">        # 跨域请求</span><br><span class="line">        callback = request.GET.get(&#x27;callback&#x27;, &#x27;&#x27;)</span><br><span class="line">        return HttpResponse(&quot;%s(&#x27;%s&#x27;)&quot; % (callback, json.dumps(&#123;&#x27;code&#x27;: code&#125;)), status=status.HTTP_200_OK)</span><br><span class="line">                    </span><br><span class="line">cors解决跨域</span><br><span class="line"></span><br><span class="line">https://www.cnblogs.com/wxiaoyu/p/9578848.html</span><br></pre></td></tr></table></figure>

<h2 id="29、微信获取用户信息"><a href="#29、微信获取用户信息" class="headerlink" title="29、微信获取用户信息"></a>29、微信获取用户信息</h2><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39735923/article/details/79202563">https://blog.csdn.net/weixin_39735923/article/details/79202563</a></p>
<h2 id="30、uwsgi初始配置问题"><a href="#30、uwsgi初始配置问题" class="headerlink" title="30、uwsgi初始配置问题"></a>30、uwsgi初始配置问题</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39735923/article/details/79202563">https://blog.csdn.net/weixin_39735923/article/details/79202563</a></p>
<h2 id="31、django中drf序列化"><a href="#31、django中drf序列化" class="headerlink" title="31、django中drf序列化"></a>31、django中drf序列化</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 序列化器</span><br><span class="line">class MsgSerializers(serializers.ModelSerializer):</span><br><span class="line">    addtime = serializers.DateTimeField(read_only=True, format=&quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">    hasread = serializers.CharField(source=&#x27;get_hasread_display&#x27;)</span><br><span class="line">    msgtype = serializers.CharField(source=&#x27;get_msgtype_display&#x27;)</span><br><span class="line">    class Meta:</span><br><span class="line">        model = MallMsg</span><br><span class="line">        # 可以混合使用</span><br><span class="line">        fields = &#x27;__all__&#x27;  # &#x27;__all__&#x27; 所有字段</span><br><span class="line">        # 数据库层级控制（序列化链表操作）</span><br><span class="line">        # depth = 1  # 外键层级</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#分页器</span><br><span class="line">from rest_framework.pagination import PageNumberPagination</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyLimitOffsetPagination(PageNumberPagination):</span><br><span class="line"></span><br><span class="line">    page_size = 3  # 默认的页面数据数量</span><br><span class="line">    page_query_param = &#x27;page&#x27;  # 定制取数据页码key ？</span><br><span class="line">    page_size_query_param = &#x27;page_size&#x27;  # 默认取数据页码key &amp;</span><br><span class="line">    max_page_size = 15  # 数据每页取值的最大上限</span><br></pre></td></tr></table></figure>

<h2 id="32、第三方库"><a href="#32、第三方库" class="headerlink" title="32、第三方库"></a>32、第三方库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">安装openssl</span><br><span class="line"> pip3 install pyOpenSSL</span><br></pre></td></tr></table></figure>

<h2 id="33、requests请求https携带CA证书"><a href="#33、requests请求https携带CA证书" class="headerlink" title="33、requests请求https携带CA证书"></a>33、requests请求https携带CA证书</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import OpenSSL</span><br><span class="line">import requests</span><br><span class="line">import urllib3.contrib.pyopenssl</span><br><span class="line"></span><br><span class="line">urllib3.contrib.pyopenssl.inject_into_urllib3()</span><br><span class="line"></span><br><span class="line">def p12_to_pem(certname, pwd):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    从.p12文件中提取pem</span><br><span class="line">    :param certname:</span><br><span class="line">    :param pwd:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    pem_name = certname + &quot;.pem&quot;</span><br><span class="line">    f_pem = open(pem_name, &#x27;wb&#x27;)</span><br><span class="line">    p12file = certname + &quot;.p12&quot;</span><br><span class="line">    p12 = OpenSSL.crypto.load_pkcs12(open(p12file, &#x27;rb&#x27;).read(), pwd)</span><br><span class="line">    f_pem.write(OpenSSL.crypto.dump_privatekey(OpenSSL.crypto.FILETYPE_PEM, p12.get_privatekey()))</span><br><span class="line">    f_pem.write(OpenSSL.crypto.dump_certificate(OpenSSL.crypto.FILETYPE_PEM, p12.get_certificate()))</span><br><span class="line">    ca = p12.get_ca_certificates()</span><br><span class="line">    if ca is not None:</span><br><span class="line">        for cert in ca:</span><br><span class="line">            f_pem.write(OpenSSL.crypto.dump_certificate(OpenSSL.crypto.FILETYPE_PEM, cert))</span><br><span class="line">    f_pem.close()</span><br><span class="line">    return pem_name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def post_cert_request(url, data,header, certname, pwd):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    使用证书发起https请求</span><br><span class="line">    :param url:</span><br><span class="line">    :param data:</span><br><span class="line">    :param certname:</span><br><span class="line">    :param pwd:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if (certname != &quot;&quot;):</span><br><span class="line">        cert = p12_to_pem(certname, pwd)</span><br><span class="line">    else:</span><br><span class="line">        cert = None</span><br><span class="line">    r = requests.post(url, header=header, data=data, cert=cert)</span><br><span class="line">    return r</span><br></pre></td></tr></table></figure>

<h2 id="34、django创建缓存命令"><a href="#34、django创建缓存命令" class="headerlink" title="34、django创建缓存命令"></a>34、django创建缓存命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py createcachetable 缓存表名</span><br></pre></td></tr></table></figure>

<h2 id="35、Django-更改超级用户密码"><a href="#35、Django-更改超级用户密码" class="headerlink" title="35、Django 更改超级用户密码"></a>35、Django 更改超级用户密码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在工程文件目录下敲入：</span><br><span class="line">python manage.py shell</span><br><span class="line"></span><br><span class="line">再在python交互界面输入：</span><br><span class="line">from django.contrib.auth.models import User</span><br><span class="line">user = User.objects.get(username = &#x27;用户名&#x27;)</span><br><span class="line">user.set_password(&#x27;密码&#x27;)</span><br><span class="line">user.save()</span><br></pre></td></tr></table></figure>

<h2 id="36、restframe使用缓存"><a href="#36、restframe使用缓存" class="headerlink" title="36、restframe使用缓存"></a>36、restframe使用缓存</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Odyssues_lee/article/details/80872586">https://blog.csdn.net/Odyssues_lee/article/details/80872586</a></p>
<h2 id="37、数据库"><a href="#37、数据库" class="headerlink" title="37、数据库"></a>37、数据库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from user  where ISNULL(code)</span><br><span class="line">update user set code=&#x27;111&#x27;,info=&#x27;微信&#x27; where ISNULL(code)</span><br></pre></td></tr></table></figure>

<h2 id="38、linux常用命令"><a href="#38、linux常用命令" class="headerlink" title="38、linux常用命令"></a>38、linux常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">tail -f 日志名  实时监控日志</span><br><span class="line">tail -f 80_v10.log</span><br><span class="line"></span><br><span class="line">netstat -na|grep 80  查看端口tcp连接数</span><br><span class="line">netstat -na|grep 80 | wc -l 计算端口tcp连接数</span><br><span class="line"></span><br><span class="line">ps -ef|grep python  查看有多少python程序在运行</span><br><span class="line"></span><br><span class="line">gunzip 2015.csv.gz   # 解压</span><br><span class="line">unzip 19.zip # 解压zip</span><br><span class="line">wc -l 2015.csv   # 查看行数</span><br><span class="line">apt install lrzsz  # 安装</span><br><span class="line">sz 文件名  # 下载文件</span><br><span class="line"></span><br><span class="line">查找文件</span><br><span class="line">find / -name 文件名</span><br><span class="line"></span><br><span class="line">匹配执行过的以find为开头的命令</span><br><span class="line">history | grep find</span><br></pre></td></tr></table></figure>

<h2 id="39、xadmin禁止增加、删除"><a href="#39、xadmin禁止增加、删除" class="headerlink" title="39、xadmin禁止增加、删除"></a>39、xadmin禁止增加、删除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># models.py</span><br><span class="line"># 用户管理</span><br><span class="line">class UserManage(models.Model):</span><br><span class="line">    name = models.CharField(max_length=20, verbose_name=&#x27;用户名&#x27;)</span><br><span class="line">    phone = models.CharField(max_length=11, unique=True, verbose_name=&#x27;手机号&#x27;)</span><br><span class="line">    code = models.CharField(max_length=11, unique=True, verbose_name=&#x27;编号&#x27;)</span><br><span class="line">    </span><br><span class="line">    user = models.ForeignKey(User, on_delete=models.CASCADE, editable=False, null=True, verbose_name=&#x27;管理员&#x27;)</span><br><span class="line"></span><br><span class="line"># adminx.py</span><br><span class="line"># 用户列表</span><br><span class="line">class UserAdmin(object):</span><br><span class="line">    list_display = [ &#x27;code&#x27;, &#x27;phone&#x27;, &#x27;name&#x27;,]</span><br><span class="line">    search_fields = [&#x27;code&#x27;, &#x27;phone&#x27;]</span><br><span class="line">    list_filter = [&#x27;code&#x27;, &#x27;phone&#x27;]</span><br><span class="line">    list_editable = [&#x27;name&#x27;]  # 数据即时编辑</span><br><span class="line">    readonly_fields = [&#x27;code&#x27;, &#x27;phone&#x27;, &#x27;name&#x27;]  # 只读字段，不能编辑</span><br><span class="line">    model_icon = &#x27;fa fa-square&#x27;</span><br><span class="line">    model = UserInfo</span><br><span class="line">    </span><br><span class="line">    def has_delete_permission(self, *args, **kwargs):</span><br><span class="line">    	# 禁止删除</span><br><span class="line">        if args:</span><br><span class="line">            return True</span><br><span class="line">        return False</span><br><span class="line">    </span><br><span class="line">	def has_add_permission(self,*args,**kwargs):</span><br><span class="line">		# 禁止增加</span><br><span class="line">        return False</span><br><span class="line">        </span><br><span class="line">    def save_models(self):</span><br><span class="line">    	# 用户级别设置</span><br><span class="line">        self.new_obj.user = self.request.user</span><br><span class="line">        flag = self.org_obj is None and &#x27;create&#x27; or &#x27;change&#x27;</span><br><span class="line">        if flag == &#x27;create&#x27;:</span><br><span class="line">        	# 对密码字段进行加密</span><br><span class="line">            self.new_obj.password = encrypt_oracle(self.new_obj.password)</span><br><span class="line">        elif flag == &#x27;change&#x27;:</span><br><span class="line">            if &#x27;password&#x27; in self.change_message():</span><br><span class="line">                self.new_obj.password = encrypt_oracle(self.new_obj.password)</span><br><span class="line">        else:</span><br><span class="line">        	pass</span><br><span class="line">        super().save_models()</span><br><span class="line"></span><br><span class="line">xadmin.site.register(UserInfo, UserAdmin)</span><br></pre></td></tr></table></figure>

<h2 id="40、时间格式字符串相减"><a href="#40、时间格式字符串相减" class="headerlink" title="40、时间格式字符串相减"></a>40、时间格式字符串相减</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">start = str(datetime.datetime.now())[:19]</span><br><span class="line">time.sleep(60)</span><br><span class="line">end = str(datetime.datetime.now())[:19]</span><br><span class="line">print(start,end)</span><br><span class="line">link_start = datetime.datetime.strptime(start, &#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">link_end = datetime.datetime.strptime(end, &#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">link_min = round((link_end - link_start).seconds / 60, 2)</span><br><span class="line">print(link_min,&#x27;分钟&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="41、显示循环进度条"><a href="#41、显示循环进度条" class="headerlink" title="41、显示循环进度条"></a>41、显示循环进度条</h2><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zejianli/article/details/77915751">https://blog.csdn.net/zejianli/article/details/77915751</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">from tqdm import tqdm,trange</span><br><span class="line">from time import sleep</span><br><span class="line">text = &quot;&quot;</span><br><span class="line">for char in tqdm([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]):</span><br><span class="line">    text = text + char</span><br><span class="line">    sleep(1)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"># 方式二</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def process_bar(percent, index, total,start_time, start_str=&#x27;&#x27;, end_str=&#x27;&#x27;, total_length=100):</span><br><span class="line">    # 进度条</span><br><span class="line">    percent_length = int(percent)</span><br><span class="line">    bar = &#x27;\r&#x27; + start_str + (&#x27;\033[1;31;41m \033[0m&#x27; * percent_length + &#x27;\033[1;37;47m \033[0m&#x27; * (</span><br><span class="line">                total_length - percent_length)) + f&#x27;  &#123;round(index / total * 100, 2)&#125;%  &#x27; + f&#x27; &#123;index&#125;|&#123;end_str&#125;&#x27;+ f&#x27;   |已进行时间: &#123;round(time.time() - start_time, 2)&#125;秒&#x27;</span><br><span class="line"></span><br><span class="line">    print(bar, end=&#x27;&#x27;, flush=True)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    data_set = [i for i in range(23)]</span><br><span class="line">    i = 0</span><br><span class="line">    start_time = time.time()</span><br><span class="line">    total = len(data_set)</span><br><span class="line">    end_str = &#x27;&#123;&#125;&#x27;.format(total)</span><br><span class="line">    for data in data_set:</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        i += 1</span><br><span class="line">        process_bar(i * 100 / total, i, total, start_time, start_str=&#x27;&#x27;, end_str=end_str, total_length=100)</span><br><span class="line"></span><br><span class="line"># 方式三</span><br><span class="line">import sys</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">d = [i for i in range(100)]</span><br><span class="line">for i in range(len(d)):</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    sys.stdout.write(&#x27;\r&gt;&gt; Downloading  %.2f%%&#x27; % (float(i) / float(len(d)) * 100.0))</span><br><span class="line">sys.stdout.flush()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="42、把列表中的字典转成csv文件"><a href="#42、把列表中的字典转成csv文件" class="headerlink" title="42、把列表中的字典转成csv文件"></a>42、把列表中的字典转成csv文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">lists = [&#123;&#x27;a&#x27;:1,&#x27;b&#x27;:2&#125;,&#123;&#x27;a&#x27;:2,&#x27;b&#x27;:3&#125;]</span><br><span class="line">df = pd.DataFrame(lists)</span><br><span class="line">print(df)</span><br><span class="line">df.to_csv(&#x27;result2.csv&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="43、windows添加右键新建MarkDown文件"><a href="#43、windows添加右键新建MarkDown文件" class="headerlink" title="43、windows添加右键新建MarkDown文件"></a>43、windows添加右键新建MarkDown文件</h2><p>在网上下载Typora软件安装后<br>1、在桌面上新建一个txt文件，输入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line">[HKEY_CLASSES_ROOT\.md\ShellNew]</span><br><span class="line">&quot;NullFile&quot;=&quot;&quot;</span><br><span class="line">&quot;FileName&quot;=&quot;template.md&quot;</span><br></pre></td></tr></table></figure>

<p>2、另存为，改后缀为.reg，保存类型为.txt，编码为Unicode</p>
<p><img src="https://img-blog.csdnimg.cn/20200526232015169.png" alt="在这里插入图片描述"></p>
<p>3、双击运行，确定，重启电脑，此时在桌面右键就有了新建md文件</p>
<h2 id="44、redis设置值定时过期"><a href="#44、redis设置值定时过期" class="headerlink" title="44、redis设置值定时过期"></a>44、redis设置值定时过期</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import redis</span><br><span class="line"></span><br><span class="line">redis_client = redis.Redis(</span><br><span class="line">    host=&#x27;127.0.0.1&#x27;,</span><br><span class="line">    port=6379,</span><br><span class="line">    db=0,</span><br><span class="line">    password=&#x27;123456&#x27;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">def redis_set():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    redis设置值定时过期</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    global redis_client</span><br><span class="line"></span><br><span class="line">    redis_client.set(&#x27;name&#x27;,&#x27;ldc&#x27;)</span><br><span class="line">    now = datetime.datetime.now()</span><br><span class="line">    # 设置‘name’50秒过期</span><br><span class="line">    expire_time = now + datetime.timedelta(hours=0, minutes=0, seconds=50)</span><br><span class="line">    redis_client.expireat(&#x27;name&#x27;, expire_time)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    redis_set()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="45、linux根据端口杀进程"><a href="#45、linux根据端口杀进程" class="headerlink" title="45、linux根据端口杀进程"></a>45、linux根据端口杀进程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def killport(port):</span><br><span class="line">    command = &#x27;&#x27;&#x27;kill -9 $(netstat -nlp | grep :&#x27;&#x27;&#x27; + str(port) + &#x27;&#x27;&#x27; | awk &#x27;&#123;print $7&#125;&#x27; | awk -F&quot;/&quot; &#x27;&#123; print $1 &#125;&#x27;)&#x27;&#x27;&#x27;</span><br><span class="line">    os.system(command)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 开始执行</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    port = 4237</span><br><span class="line">    killport(port)</span><br></pre></td></tr></table></figure>

<h2 id="46、监控linux网络流量"><a href="#46、监控linux网络流量" class="headerlink" title="46、监控linux网络流量"></a>46、监控linux网络流量</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">iftop -n -N -i eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">nethogs eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim +/字符串 文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="47、win10添加右键打开cmd"><a href="#47、win10添加右键打开cmd" class="headerlink" title="47、win10添加右键打开cmd"></a>47、win10添加右键打开cmd</h2><p>通过添加注册表项实现</p>
<p>win + r 输入 regedit</p>
<p>找到注册表位置：HKEY_CLASSES_ROOT\Directory\Background\shell\</p>
<p>右键“shel”l,新建“项”，命名为“以管理员身份打开cmd”，</p>
<p>右键“以管理员身份打开cmd”，新建“DWORD(32位)值”，命名为”ShowBasedOnVelocityId”,值为“639bc8”</p>
<p>右键“以管理员身份打开cmd”，新建“项”，命名为“command”</p>
<p>右键“command”，点击“默认”，点击“修改”，填写数值为 cmd.exe /s /k pushd “%V”</p>
<h2 id="48、xadmin后台无法显示下拉框完整内容"><a href="#48、xadmin后台无法显示下拉框完整内容" class="headerlink" title="48、xadmin后台无法显示下拉框完整内容"></a>48、xadmin后台无法显示下拉框完整内容</h2><p>解决方案 在根目录中找到/static/xadmin/vendor/selectize/selectize.bootstrap3.css<br>在331行后加入 position: static;</p>
<p><img src="https://img-blog.csdnimg.cn/20190704184201572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="49、xadmin单点登录"><a href="#49、xadmin单点登录" class="headerlink" title="49、xadmin单点登录"></a>49、xadmin单点登录</h2><p>使用中间件实现。</p>
<p>新建一个utils.py文件，存放以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib.sessions.models import Session</span><br><span class="line">from django.db.models import Q</span><br><span class="line">from django.utils import timezone</span><br><span class="line">from django.utils.deprecation import MiddlewareMixin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class XadminMiddleware(MiddlewareMixin):</span><br><span class="line">    def process_request(self, request):</span><br><span class="line">        &quot;&quot;&quot;xadmin后台单点登录&quot;&quot;&quot;</span><br><span class="line">        PATH_INFO = request.META.get(&#x27;PATH_INFO&#x27;, &#x27;&#x27;)</span><br><span class="line">        if PATH_INFO and &#x27;xadmin&#x27; in PATH_INFO:</span><br><span class="line">            request.session.clear_expired()   # 清除过期的key</span><br><span class="line">            session_key = request.session.session_key</span><br><span class="line">            for session in Session.objects.filter(~Q(session_key=session_key), expire_date__gte=timezone.now()):</span><br><span class="line">                data = session.get_decoded()</span><br><span class="line">                if data.get(&#x27;_auth_user_id&#x27;, None) == str(request.user.id):</span><br><span class="line">                    session.delete()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后在urls.py中设置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">...</span><br><span class="line">re_path(&#x27;^xadmin/&#x27;, xadmin.site.urls),</span><br><span class="line">...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>然后在settings.py中注册中间件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   MIDDLEWARE = [</span><br><span class="line">   ...</span><br><span class="line">   </span><br><span class="line">   &#x27;utils.xadminauth.XadminMiddleware&#x27;,</span><br><span class="line">   ...</span><br><span class="line">   ]</span><br><span class="line">SESSION_COOKIE_AGE = 1209600  # 设置过期时间</span><br><span class="line">   SESSION_SAVE_EVERY_REQUEST = Ture  # 每次请求都更新</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>【参考】 <a target="_blank" rel="noopener" href="https://blog.csdn.net/Python_anning">https://blog.csdn.net/Python_anning</a></p>
<h2 id="50、Django-restful-多个models数据表序列化合并返回（一次请求返回多个序列化器数据）"><a href="#50、Django-restful-多个models数据表序列化合并返回（一次请求返回多个序列化器数据）" class="headerlink" title="50、Django restful 多个models数据表序列化合并返回（一次请求返回多个序列化器数据）"></a>50、Django restful 多个models数据表序列化合并返回（一次请求返回多个序列化器数据）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"># 导入第三方包</span><br><span class="line">pip install django-crispy-forms==1.7.2</span><br><span class="line"></span><br><span class="line"># 在settings.py中添加应用</span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">...</span><br><span class="line">&#x27;drf_multiple_model&#x27;,</span><br><span class="line">&#x27;rest_framework&#x27;,</span><br><span class="line">...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># 在views.py中使用</span><br><span class="line">    from drf_multiple_model.pagination import MultipleModelLimitOffsetPagination</span><br><span class="line">    from drf_multiple_model.views import ObjectMultipleModelAPIView</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    class LimitPagination(MultipleModelLimitOffsetPagination):</span><br><span class="line">        # 多个models数据表联合查询，分页，每页限制数据10条</span><br><span class="line">        default_limit = 10</span><br><span class="line">        </span><br><span class="line">    class StudentSerializers(serializers.ModelSerializer):</span><br><span class="line">        &quot;&quot;&quot;学生表序列化器&quot;&quot;&quot;</span><br><span class="line">        # merchant = MerchantSerializers()</span><br><span class="line">        </span><br><span class="line">        register_time = serializers.DateTimeField(read_only=True, format=&quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">       </span><br><span class="line">        class Meta:</span><br><span class="line">            model = Student</span><br><span class="line">            fields = &#x27;__all__&#x27;</span><br><span class="line">    class ClassesSerializers(serializers.ModelSerializer):</span><br><span class="line">        &quot;&quot;&quot;班级表序列化器&quot;&quot;&quot;</span><br><span class="line">        # merchant = MerchantSerializers()</span><br><span class="line">        </span><br><span class="line">        add_time = serializers.DateTimeField(read_only=True, format=&quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">       </span><br><span class="line">        class Meta:</span><br><span class="line">            model = Classes</span><br><span class="line">            fields = &#x27;__all__&#x27;</span><br><span class="line">    </span><br><span class="line">    class SchoolSerializers(serializers.ModelSerializer):</span><br><span class="line">        &quot;&quot;&quot;学校表序列化器&quot;&quot;&quot;</span><br><span class="line">        # merchant = MerchantSerializers()</span><br><span class="line">        </span><br><span class="line">        add_time = serializers.DateTimeField(read_only=True, format=&quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">       </span><br><span class="line">        class Meta:</span><br><span class="line">            model = School</span><br><span class="line">            fields = &#x27;__all__&#x27;      </span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line">    class StudentInfo(ObjectMultipleModelAPIView):</span><br><span class="line">        # 获取学生信息，班级信息，学校信息</span><br><span class="line">    </span><br><span class="line">        def get(self, request, *args, **kwargs):</span><br><span class="line">            uid = request.GET.get(&#x27;uid&#x27;, &#x27;&#x27;)  # 学生id</span><br><span class="line">            cid = request.GET.get(&#x27;cid&#x27;, &#x27;&#x27;)  # 班级id</span><br><span class="line">            sid = request.GET.get(&#x27;sid&#x27;, &#x27;&#x27;)  # 学校id</span><br><span class="line">            </span><br><span class="line">            self.querylist = [</span><br><span class="line">                &#123;&#x27;queryset&#x27;: Student.objects.filter(id=uid).order_by(&#x27;-id&#x27;),</span><br><span class="line">                    &#x27;serializer_class&#x27;:  StudentSerializers, &#x27;label&#x27;: &#x27;student&#x27;, &#125;,</span><br><span class="line">                &#123;&#x27;queryset&#x27;: Classes.objects.filter(id=cid).order_by(&#x27;-id&#x27;),</span><br><span class="line">                    &#x27;serializer_class&#x27;:  ClassesSerializers, &#x27;label&#x27;: &#x27;classes&#x27;, &#125;,</span><br><span class="line">                &#123;&#x27;queryset&#x27;: School.objects.filter(id=sid).order_by(&#x27;-id&#x27;),</span><br><span class="line">                    &#x27;serializer_class&#x27;:  SchoolSerializers, &#x27;label&#x27;: &#x27;school&#x27;, &#125;,</span><br><span class="line">            ]</span><br><span class="line">    </span><br><span class="line">            return self.list(request, *args, **kwargs)</span><br><span class="line">    </span><br><span class="line">        pagination_class = LimitPagination</span><br></pre></td></tr></table></figure>

<h2 id="51、-Django序列化器返回外键关联数据"><a href="#51、-Django序列化器返回外键关联数据" class="headerlink" title="51、 Django序列化器返回外键关联数据"></a>51、 Django序列化器返回外键关联数据</h2><p>通过 related_name=’goods_price’把两个表关联起来，当返回Goods的信息时也会返回相应的GoodsPrice信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">class GoodsPriceSerializers(serializers.ModelSerializer):</span><br><span class="line">    &quot;&quot;&quot;商品价格表序列化器&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    class Meta:</span><br><span class="line">        model = GoodsPrice</span><br><span class="line">        fields = [&#x27;price&#x27;]</span><br><span class="line"></span><br><span class="line">class GoodsSerializers(serializers.ModelSerializer):</span><br><span class="line">    &quot;&quot;&quot;商品表序列化器&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    goods_price = GoodsPriceSerializers(many=True, read_only=True)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        model = Goods</span><br><span class="line">        fields = [&#x27;title&#x27;,&#x27;goods_price&#x27;]</span><br><span class="line">        depth = 2</span><br><span class="line"></span><br><span class="line">class Goods(models.Model):</span><br><span class="line">    &quot;&quot;&quot;商品表&quot;&quot;&quot;</span><br><span class="line">    title = models.CharField(max_length=50, verbose_name=&#x27;商品名称&#x27;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;goods&#x27;</span><br><span class="line">        verbose_name = &#x27;商品信息表&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.title</span><br><span class="line"></span><br><span class="line">class GoodsPrice(models.Model):</span><br><span class="line">    &quot;&quot;&quot;商品价格表,通过外键关联商品信息表&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    price = models.DecimalField(max_digits=10, decimal_places=2, default=0, verbose_name=&#x27;售价&#x27;)</span><br><span class="line">    goods = models.ForeignKey(to=&#x27;Goods&#x27;, related_name=&#x27;goods_price&#x27;, on_delete=models.SET_NULL, blank=True, null=True,verbose_name=&#x27;商品&#x27;)</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return str(self.price)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        managed = True</span><br><span class="line">        db_table = &#x27;goodsPrice&#x27;</span><br><span class="line">        verbose_name = &#x27;商品售价&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br></pre></td></tr></table></figure>

<h2 id="52、python-Django通过User-Agent判断请求来源是微信扫一扫或者是支付宝扫一扫"><a href="#52、python-Django通过User-Agent判断请求来源是微信扫一扫或者是支付宝扫一扫" class="headerlink" title="52、python Django通过User Agent判断请求来源是微信扫一扫或者是支付宝扫一扫"></a>52、python Django通过User Agent判断请求来源是微信扫一扫或者是支付宝扫一扫</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Footest(APIView):</span><br><span class="line"> def get(self, request, *args, **kwargs):</span><br><span class="line">     # print(request.META)</span><br><span class="line">     if &#x27;MicroMessenger&#x27; in request.META[&#x27;HTTP_USER_AGENT&#x27;]:</span><br><span class="line">         return Response(data=&#123;&#x27;msg&#x27;: &#x27;访问来源是微信&#x27;&#125;)</span><br><span class="line">     elif &#x27;AlipayClient&#x27; in request.META[&#x27;HTTP_USER_AGENT&#x27;]:</span><br><span class="line">         return Response(data=&#123;&#x27;msg&#x27;: &#x27;访问来源是支付宝&#x27;&#125;)</span><br><span class="line">     else:</span><br><span class="line">         return Response(data=&#123;&#x27;msg&#x27;: &#x27;访问来源是其他&#x27;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>User Agent中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等。</p>
<p>浏览器的 UA 字串</p>
<p>标准格式为： 浏览器标识 (操作系统标识; 加密等级标识; 浏览器语言) 渲染引擎标识 版本信息</p>
<p>获取user-Agent 之后，<br>通过识别MicroMessenger或者AlipayClient这样的关键字应该就可以判断是微信还是支付宝<br>【参考文章】 <a target="_blank" rel="noopener" href="https://blog.csdn.net/fly910905/article/details/82498813?utm_source=blogxgwz4">https://blog.csdn.net/fly910905/article/details/82498813?utm_source=blogxgwz4</a></p>
<h2 id="53、xadmin后台集成’导入‘插件，导入excel文件"><a href="#53、xadmin后台集成’导入‘插件，导入excel文件" class="headerlink" title="53、xadmin后台集成’导入‘插件，导入excel文件"></a>53、xadmin后台集成’导入‘插件，导入excel文件</h2><p>效果图：</p>
<p><img src="https://img-blog.csdnimg.cn/20190426190357134.png" alt="在这里插入图片描述"></p>
<p>1、添加</p>
<p>在虚拟环境根目录\Lib\site-packages\xadmin\plugins中添加excel.py文件</p>
<p><img src="https://img-blog.csdnimg.cn/20190426190440451.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre><code>from xadmin.views import BaseAdminPlugin, ListAdminView
from django.template import loader
import xadmin

class ListExcelImportPlugin(BaseAdminPlugin):
    # 重写init_request
    import_excel = False
    def init_request(self, *args, **kwargs):
        return self.import_excel

    def block_top_toolbar(self, context, nodes):
        # 这里 xadmin/excel/model_list.top_toolbar.import.html 是自己写的html文件
      nodes.append(loader.render_to_string(&quot;xadmin/excel/model_list.top_toolbar.import.html&quot;))

xadmin.site.register_plugin(ListExcelImportPlugin, ListAdminView)
</code></pre>
<p>在虚拟环境根目录\Lib\site-packages\xadmin\plugins__init__.py中</p>
<pre><code>PLUGINS = (
...
    &#39;excel&#39;,
...
)
</code></pre>
<p>2、添加html文件</p>
<p><img src="https://img-blog.csdnimg.cn/20190426190455263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>在虚拟环境根目录\Lib\site-packages\xadmin\templates\xadmin\中增加文件夹excel,在文件夹中添加model_list.top_toolbar.import.html文件</p>
<pre><code>    &#123;% load i18n %&#125;
&lt;div class=&quot;btn-group export&quot;&gt;
    &lt;a class=&quot;dropdown-toggle btn btn-default btn-sm&quot; data-toggle=&quot;dropdown&quot; href=&quot;#&quot;&gt;
        &lt;i class=&quot;icon-share&quot;&gt;&lt;/i&gt; 导入数据 &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;
    &lt;/a&gt;
    &lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot; aria-labelledby=&quot;dLabel&quot;&gt;
        &lt;li&gt;&lt;a data-toggle=&quot;modal&quot; data-target=&quot;#export-modal-import-excel&quot;&gt;&lt;i class=&quot;icon-circle-arrow-down&quot;&gt;&lt;/i&gt; 导入
            Excel&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div id=&quot;export-modal-import-excel&quot; class=&quot;modal fade&quot;&gt;
        &lt;div class=&quot;modal-dialog&quot;&gt;
            &lt;div class=&quot;modal-content&quot;&gt;
                &lt;form method=&quot;post&quot; action=&quot;&quot; enctype=&quot;multipart/form-data&quot;&gt;
                    &lt;!--&#123;% csrf_token %&#125;--&gt;
                    &lt;div class=&quot;modal-header&quot;&gt;
                        &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-hidden=&quot;true&quot;&gt;×&lt;/button&gt;
                        &lt;h4 class=&quot;modal-title&quot;&gt;导入 Excel&lt;/h4&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;modal-body&quot;&gt;
                        &lt;input type=&quot;file&quot; onchange=&quot;fileChange(this)&quot; name=&quot;excel&quot; id=&quot;submit_upload&quot;&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;modal-footer&quot;&gt;
                        &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;&#123;% trans "Close" %&#125;&lt;/button&gt;
                        &lt;button class=&quot;btn btn-success&quot; type=&quot;button&quot; id=&quot;submit_upload_b&quot;&gt;&lt;i class=&quot;icon-share&quot;&gt;&lt;/i&gt; 导入
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/div&gt;&lt;!-- /.modal-content --&gt;
        &lt;/div&gt;&lt;!-- /.modal-dalog --&gt;
    &lt;/div&gt;&lt;!-- /.modal --&gt;

&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
    function fileChange(target) &#123;
        //检测上传文件的类型
        var imgName = document.all.submit_upload.value;
        var ext, idx;
        if (imgName == &#39;&#39;) &#123;
            document.all.submit_upload_b.disabled = true;
            alert(&quot;请选择需要上传的 xls 文件!&quot;);
            return;
        &#125; else &#123;
            idx = imgName.lastIndexOf(&quot;.&quot;);
            if (idx != -1) &#123;
                ext = imgName.substr(idx + 1).toUpperCase();
                ext = ext.toLowerCase();

                if (ext != &#39;xls&#39; &amp;&amp; ext != &#39;xlsx&#39;) &#123;
                    document.all.submit_upload_b.disabled = true;
                    alert(&quot;只能上传 .xls 类型的文件!&quot;);
                    return;
                &#125;
            &#125; else &#123;
                document.all.submit_upload_b.disabled = true;
                alert(&quot;只能上传 .xls 类型的文件!&quot;);
                return;
            &#125;
        &#125;
    &#125;

    $(document).ready(function () &#123;

        $(&#39;#submit_upload_b&#39;).click(function () &#123;
            var form_data = new FormData();
            var file_info = $(&#39;#submit_upload&#39;)[0].files[0];
            form_data.append(&#39;file&#39;, file_info);
            form_data.append(&#39;file_source&#39;, $(&#39;.breadcrumb li&#39;).eq(1).text().trim());
            var url = window.location.protocol + &#39;//&#39; + window.location.host + &#39;/importkdorderno/&#39;
            $.ajax(&#123;
                url: url,
                type: &#39;POST&#39;,
                data: form_data,
                dataType: &quot;json&quot;,
                beforeSend: function (xhr) &#123;
                    xhr.setRequestHeader(&quot;X-CSRFToken&quot;, $.getCookie(&quot;csrftoken&quot;))
                &#125;,
                processData: false,  // tell jquery not to process the data
                contentType: false, // tell jquery not to set contentType
                success: function (res) &#123;

                    alert(res.msg);
                    window.location.reload();
                &#125;,
                error: function (err) &#123;
                &#125;
            &#125;);
        &#125;);
    &#125;)
&lt;/script&gt;
</code></pre>
<p>​<br>3、在views.py处理上传的excel文件</p>
<pre><code>import pandas as pd
from rest_framework.views import APIView

class ImportKDOrderNo(APIView):

    def post(self, request, *args, **kwargs):
        file = request.FILES.get(&#39;file&#39;)
        # read = InMemoryUploadedFile().open()
        data = pd.read_excel(file)  # 使用pandas处理excel文件
        file_source = request.POST.get(&#39;file_source&#39;, &#39;&#39;)  # 文件来源
        
        if &#39;订单号&#39; and &#39;物流单号&#39; not in data:
            return Response(data=&#123;&#39;msg&#39;: &#39;文件格式有误，第一行第一列应该为【订单号】，第一行第二列应该为【物流单号】&#39;&#125;)
        ordernos = data[&#39;订单号&#39;]
        logistics = data[&#39;物流单号&#39;]
        for i in range(len(ordernos)):
            print(&#39;订单号&#39;, ordernos[i], &#39;物流单号&#39;, logistics[i])
          
        return Response(data=&#123;&#39;msg&#39;: &#39;上传成功&#39;&#125;)
</code></pre>
<p>4、在urls.py中添加访问路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line">from 你的应用名称 import views</span><br><span class="line"></span><br><span class="line">app_name = &#x27;你的应用名称&#x27;</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    # 其他路由</span><br><span class="line">    ...</span><br><span class="line">    # 导入物流单号</span><br><span class="line">    path(&#x27;importkdorderno/&#x27;, views.ImportKDOrderNo.as_view(), name=&#x27;importkdorderno&#x27;),</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="54、Django中查找今天进账金额"><a href="#54、Django中查找今天进账金额" class="headerlink" title="54、Django中查找今天进账金额"></a>54、Django中查找今天进账金额</h2><p>views.py</p>
<pre><code>from datetime import datetime
class CountFee(APIView):
    def get(self, request, *args, **kwargs):
        # 获取当前时间的年月日，然后使用聚合函数添加fee字段的值
        year = datetime.now().year
        month = datetime.now().month
        day = datetime.now().day
        count_fees = FeeDetail.objects.filter(addtime__year=year, addtime__month=month, addtime__day=day).aggregate(Sum(&#39;fee&#39;))
        all_fee = count_fees[&#39;fee__sum&#39;] if count_fees[&#39;fee__sum&#39;] else 0
        print(all_fee)
        return Response(&#123;&#39;code&#39;: 1, &#39;msg&#39;: &#39;success&#39;, &#39;data&#39;: &#123;&#39;all_fee&#39;: all_fee&#125;&#125;)
</code></pre>
<h2 id="55、判断是什么系统"><a href="#55、判断是什么系统" class="headerlink" title="55、判断是什么系统"></a>55、判断是什么系统</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import platform</span><br><span class="line">PlATFORM = platform.system()</span><br><span class="line">if PlATFORM == &quot;Linux&quot;:</span><br><span class="line">    print(&#x27;linux&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;其他&#x27;) </span><br></pre></td></tr></table></figure>

<h2 id="56、sql查询"><a href="#56、sql查询" class="headerlink" title="56、sql查询"></a>56、sql查询</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 联合更新</span><br><span class="line">update malluser set master_master_id=3 where master_id in (select a.id from (select id from  malluser where id like &#x27;15%&#x27;)a) </span><br><span class="line"># 统计某字段重复数据</span><br><span class="line">SELECT phone, COUNT(*) AS sumCount FROM malluser GROUP BY phone HAVING sumCount &gt; 1;</span><br></pre></td></tr></table></figure>

<h2 id="57、-xadmin后台删除数据出现错误"><a href="#57、-xadmin后台删除数据出现错误" class="headerlink" title="57、 xadmin后台删除数据出现错误"></a>57、 xadmin后台删除数据出现错误</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`get_deleted_objects() takes 3 positional arguments but 5 were given`</span><br></pre></td></tr></table></figure>

<p>这是由于Django2.1版本和xadmin不兼容导致的</p>
<p>知道虚拟环境\Lib\site-packages\xadmin\plugins\actions.py</p>
<p>修改93行，</p>
<p>把</p>
<pre><code>deletable_objects, model_count, perms_needed, protected = get_deleted_objects(
            queryset, self.opts, self.user, self.admin_site, using)
</code></pre>
<p>改为</p>
<pre><code>deletable_objects, model_count, perms_needed, protected = get_deleted_objects(
            queryset, self.user, self.admin_site)
</code></pre>
<p>然后在adminx.py文件中对应的模型类中允许删除</p>
<pre><code>class MaterialAdmin(object):
    &quot;&quot;&quot;素材库分类&quot;&quot;&quot;
    list_display = [&#39;id&#39;, &#39;name&#39;, &#39;class_id&#39;, &#39;is_delete&#39;, &#39;addtime&#39;]
  
    def has_delete_permission(self, *args, **kwargs):
        return True
</code></pre>
<h2 id="58、xdamin限制用户点击"><a href="#58、xdamin限制用户点击" class="headerlink" title="58、xdamin限制用户点击"></a>58、xdamin限制用户点击</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//如果登录z=xadmin后台的账号不是【root】的就不能点击更新操作</span><br><span class="line">    var master_name = $(&#x27;#top-nav&#x27;).find(&#x27;strong&#x27;).text();</span><br><span class="line">        master_name =  master_name.substring(4);</span><br><span class="line">    if(master_name != &#x27;root&#x27;)&#123;</span><br><span class="line">            $(&quot;.grid-item a&quot;).each(function(index, element) &#123;</span><br><span class="line">                $(this).attr(&#x27;href&#x27;,&#x27;#&#x27;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h2 id="59、获取公众号关注url"><a href="#59、获取公众号关注url" class="headerlink" title="59、获取公众号关注url"></a>59、获取公众号关注url</h2><p>在微信网页版，打开公众号，点击右上角“…”，在弹框中选择右下角中间的“查看历史记录”，然后在弹框中选择左上角倒数第一个，“用默认浏览器打开”，就可以在打开的浏览器中获取该公众号的关注url，当把这个url发给好友时，好友点开的就是去关注公众号的页面。</p>
<h2 id="60、xadmin后台用户操作表权限"><a href="#60、xadmin后台用户操作表权限" class="headerlink" title="60、xadmin后台用户操作表权限"></a>60、xadmin后台用户操作表权限</h2><p>虚拟环境根目录\Lib\site-packages\xadmin\views\base.py</p>
<p>可以找到：</p>
<p><img src="https://img-blog.csdnimg.cn/20190627140512311.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>在项目子应用下的adminx.py中使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import xadmin</span><br><span class="line"></span><br><span class="line">from machine.models import Machine</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MachineAdmin(object):</span><br><span class="line">    list_display = [&#x27;code&#x27;,]  # 显示的字段</span><br><span class="line"></span><br><span class="line">    search_fields = [&#x27;code&#x27;]  # 搜索的字段</span><br><span class="line">    list_filter = [&#x27;code&#x27;, &#x27;is_delete&#x27;] # 过滤的字段</span><br><span class="line">    ordering = (&#x27;-id&#x27;,) # 按id降序排序</span><br><span class="line">    list_editable = [&#x27;is_delete&#x27;, ]  # 数据即时编辑</span><br><span class="line">    list_per_page = 30  # 每页显示数据数量</span><br><span class="line">    model_icon = &#x27;fa fa-cog fa-spin&#x27;  # 左侧显示的小图标</span><br><span class="line"></span><br><span class="line">    def has_delete_permission(self, *args, **kwargs): </span><br><span class="line">        # 删除权限</span><br><span class="line">        if self.request.user.is_superuser:  # 管理员才能增加</span><br><span class="line">            return True</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">    def has_add_permission(self, *args, **kwargs):</span><br><span class="line">        if self.request.user.is_superuser:  # 管理员才能增加</span><br><span class="line">            return True</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">    def has_change_permission(self, *args, **kwargs):</span><br><span class="line">        if self.request.user.is_superuser: # 管理员才能修改</span><br><span class="line">            return True</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">    def queryset(self):</span><br><span class="line">        qs = super(MachineAdmin, self).queryset()</span><br><span class="line">        if self.request.user.is_superuser:  # 管理员可以查看所有</span><br><span class="line">            return qs</span><br><span class="line">        else:</span><br><span class="line">            # 登录用户只能看到自己修改的数据</span><br><span class="line">            return qs.filter(master_id=self.request.user.last_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xadmin.site.register(MallMachine, MallMachineAdmin)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="61、使用nginx部署项目"><a href="#61、使用nginx部署项目" class="headerlink" title="61、使用nginx部署项目"></a>61、使用nginx部署项目</h2><p>先在/etc/nginx/sites-available中创建一个配置文件，文件名为test(注意没有后缀):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#设定虚拟主机配置</span><br><span class="line">    server &#123;</span><br><span class="line">        #侦听80端口</span><br><span class="line">        listen 80;</span><br><span class="line">        listen 443 ssl;</span><br><span class="line">        #定义使用 www.nginx.cn访问</span><br><span class="line">		#ssl on;</span><br><span class="line">        server_name  xxx.xxx.com;</span><br><span class="line">        #定义服务器的默认网站根目录位置</span><br><span class="line">        root /root/项目名称;</span><br><span class="line">		ssl_session_timeout 5m; </span><br><span class="line">        ssl_certificate   /etc/nginx/cert/xxx.pem;</span><br><span class="line">        ssl_certificate_key  /etc/nginx/cert/xxx.key;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        #设定本虚拟主机的访问日志</span><br><span class="line">        #access_log  logs/nginx.access.log  main;</span><br><span class="line"> </span><br><span class="line">        #默认请求</span><br><span class="line">        location / &#123;</span><br><span class="line">            #倒入了uwsgi的配置</span><br><span class="line">            include uwsgi_params; </span><br><span class="line">		    client_max_body_size	50m;</span><br><span class="line">            #连接uwsgi的超时时间</span><br><span class="line">           # uwsgi_connect_timeout 30; </span><br><span class="line"> 	    #设定了uwsig服务器位置</span><br><span class="line"> 	    	uwsgi_pass 127.0.0.1:8002;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        location /static&#123;</span><br><span class="line">      	alias /root/项目名称/static;</span><br><span class="line">        &#125;</span><br><span class="line">	location /media &#123;</span><br><span class="line">	alias /root/项目名称/media;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其中xxx.xxx.com表示域名.如果没有https，就使用#把ssl注释掉就可以了。</p>
<p>然后把test映射到/etc/nginx/sites-enabled</p>
<p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /etc/nginx/sites-available/test /etc/nginx/sites-enabled/test</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>即可<br>注意：<br>uwsgi中配置listen=1024时，启动uwsgi时可能会报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django + uwsgi + nginx 日志Listen queue size is greater than the system max net.core.somaxconn (128).</span><br></pre></td></tr></table></figure>

<p>解决方法:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修改系统参数</span><br><span class="line"></span><br><span class="line">/proc/sys/net/ipv4/tcp_max_syn_backlog  原来2048    改为8192</span><br><span class="line">/proc/sys/net/core/somaxconn	原来128     改为262144</span><br></pre></td></tr></table></figure>

<p>重启nginx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<h2 id="62、xadmin后台发送邮件找回密码"><a href="#62、xadmin后台发送邮件找回密码" class="headerlink" title="62、xadmin后台发送邮件找回密码"></a>62、xadmin后台发送邮件找回密码</h2><p><img src="https://img-blog.csdnimg.cn/20190710230444358.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>输入你用户绑定的邮箱</p>
<p><img src="https://img-blog.csdnimg.cn/20190710230454725.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>想要发送邮件，需要在settings.py中设置邮件发送器</p>
<p>settings.py最下面增加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># ------------------------邮箱配置-----------------------------------------</span><br><span class="line">EMAIL_BACKEND = &#x27;django.core.mail.backends.smtp.EmailBackend&#x27; #把要发送的邮件显示再控制台上，方便调试</span><br><span class="line">EMAIL_USE_SSL = True</span><br><span class="line">EMAIL_HOST = &#x27;smtp.qq.com&#x27;  # 如果是 163 改成 smtp.163.com</span><br><span class="line">EMAIL_PORT = 465</span><br><span class="line">EMAIL_HOST_USER = &#x27;邮箱账号&#x27; # 帐号</span><br><span class="line">EMAIL_HOST_PASSWORD = &#x27;授权码&#x27;  # 到邮箱里开通</span><br><span class="line">DEFAULT_FROM_EMAIL = EMAIL_HOST_USER</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于django2与xadmin有些地方不兼容，需要修改源码：</p>
<p>找到虚拟环境根目录\Lib\site-packages\xadmin\plugins\passwords.py</p>
<p>在passwords.py文件中大概79行，修改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">return password_reset_confirm(request=request, uidb36=uidb36, token=token,</span><br><span class="line">                                      template_name=self.password_reset_confirm_template,</span><br><span class="line">                                      token_generator=self.password_reset_token_generator,</span><br><span class="line">                                      set_password_form=self.password_reset_set_form,</span><br><span class="line">                                      post_reset_redirect=self.get_admin_url(&#x27;xadmin_password_reset_complete&#x27;),</span><br><span class="line">                                      current_app=self.admin_site.name, extra_context=context).dispatch(request=request,</span><br><span class="line">                                                                                                        uidb64=uidb36,token=token)</span><br><span class="line">             </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>找到虚拟环境根目录Lib\site-packages\django\contrib\auth\views.py</p>
<p>在views.py文件中大概258行，增加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 成功后跳转路由,根据自己实际来定</span><br><span class="line">self.success_url = self.request.build_absolute_uri(&#x27;/&#x27;) + &#x27;xadmin/&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/2020052620533440.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="63、xadmin外键下拉框添加过滤"><a href="#63、xadmin外键下拉框添加过滤" class="headerlink" title="63、xadmin外键下拉框添加过滤"></a>63、xadmin外键下拉框添加过滤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class MallGoodsAdmin(object):</span><br><span class="line">    &quot;&quot;&quot;商品管理&quot;&quot;&quot;</span><br><span class="line">    list_display = [&#x27;id&#x27;, &#x27;show_photo&#x27;, &#x27;nickname&#x27;, &#x27;merchant&#x27;, &#x27;goods_class&#x27;, &#x27;label&#x27;,]</span><br><span class="line">    search_fields = [&#x27;nickname&#x27;]</span><br><span class="line">    list_filter = [&#x27;goods_class&#x27;, &#x27;label&#x27;,]</span><br><span class="line">    model_icon = &#x27;fa fa-bars&#x27;</span><br><span class="line">    list_editable = [&#x27;goods_class&#x27;, ]</span><br><span class="line">    #,重写虚拟环境根目录下\Lib\site-packages\xadmin\views\edit.py中的formfield_for_dbfield</span><br><span class="line">    def formfield_for_dbfield(self, db_field, **kwargs):</span><br><span class="line">        # 对MallGoodsClass这个表项的下拉框选择进行过滤</span><br><span class="line">        # MallGoods中有一个goods_class商品分类外键MallGoodsClass，过滤掉外键MallGoodsClass中 </span><br><span class="line">        # master_class为空的值</span><br><span class="line">        if db_field.name == &quot;goods_class&quot;:</span><br><span class="line">            kwargs[&quot;queryset&quot;] = MallGoodsClass.objects.filter(master_class__isnull=False)</span><br><span class="line">            # 对assigned_recipient这个表项的下拉选择进行过滤</span><br><span class="line">        	return db_field.formfield(**dict(**kwargs))</span><br><span class="line">        return super().formfield_for_dbfield(db_field, **kwargs)</span><br><span class="line"></span><br><span class="line">xadmin.site.register(models.MallGoods, MallGoodsAdmin)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="64、xadmin即时编辑器去掉空标签"><a href="#64、xadmin即时编辑器去掉空标签" class="headerlink" title="64、xadmin即时编辑器去掉空标签"></a>64、xadmin即时编辑器去掉空标签</h2><p><img src="https://img-blog.csdnimg.cn/20190716151440115.png" alt="在这里插入图片描述"></p>
<p>虚拟环境根目录下\Lib\site-packages\xadmin\plugins\editable.py，在大概</p>
<p>129行增加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">form.fields[fields[0]].empty_label = None</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190716151459680.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="65、用户增加的小组件，让其他用户可见"><a href="#65、用户增加的小组件，让其他用户可见" class="headerlink" title="65、用户增加的小组件，让其他用户可见"></a>65、用户增加的小组件，让其他用户可见</h2><p>找到虚拟环境根目录\Lib\site-packages\xadmin\views\dashboard.py</p>
<p>在548行、554行</p>
<p><img src="https://img-blog.csdnimg.cn/20190723175537371.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@filter_hook</span><br><span class="line">    def get_widgets(self):</span><br><span class="line"></span><br><span class="line">        if self.widget_customiz:</span><br><span class="line">            portal_pos = UserSettings.objects.filter(</span><br><span class="line">               key=self.get_portal_key())</span><br><span class="line">            if len(portal_pos):</span><br><span class="line">                portal_pos = portal_pos[0].value</span><br><span class="line">                widgets = []</span><br><span class="line"></span><br><span class="line">                if portal_pos:</span><br><span class="line">                    user_widgets = dict([(uw.id, uw) for uw in UserWidget.objects.filter(page_id=self.get_page_id())])</span><br><span class="line">                    for col in portal_pos.split(&#x27;|&#x27;):</span><br><span class="line">                        ws = []</span><br><span class="line">                        for wid in col.split(&#x27;,&#x27;):</span><br><span class="line">                            try:</span><br><span class="line">                                widget = user_widgets.get(int(wid))</span><br><span class="line">                                if widget:</span><br><span class="line">                                    ws.append(self.get_widget(widget))</span><br><span class="line">                            except Exception as e:</span><br><span class="line">                                import logging</span><br><span class="line">                                logging.error(e, exc_info=True)</span><br><span class="line">                        widgets.append(ws)</span><br><span class="line"></span><br><span class="line">                return widgets</span><br><span class="line"></span><br><span class="line">        return self.get_init_widget()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="66、pip-install-uwsgi出错"><a href="#66、pip-install-uwsgi出错" class="headerlink" title="66、pip install uwsgi出错"></a>66、pip install uwsgi出错</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugins/python/uwsgi_python.h:2:20: fatal error: Python.h: No such file or directory</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>首先安装python3环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install python3-dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后再虚拟环境中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uwsgi</span><br></pre></td></tr></table></figure>

<h2 id="66、xadmin后台加载数据慢，解决方案"><a href="#66、xadmin后台加载数据慢，解决方案" class="headerlink" title="66、xadmin后台加载数据慢，解决方案"></a>66、xadmin后台加载数据慢，解决方案</h2><p>list_filter: 过滤器要慎用，不要使用类似id这些数据量大的字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class MallUserAdmin(object):</span><br><span class="line">    &quot;&quot;&quot;用户管理&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    list_display = [&#x27;id&#x27;, &#x27;tp_icon&#x27;, &#x27;nickname&#x27;, &#x27;phone&#x27;, &#x27;level&#x27;, &#x27;balance&#x27;, &#x27;province&#x27;, &#x27;city&#x27;, &#x27;quxian&#x27;]  # 显示字段</span><br><span class="line">    search_fields = [&#x27;id&#x27;, &#x27;nickname&#x27;, &#x27;phone&#x27;]  # 搜索</span><br><span class="line">    list_filter = [&#x27;level&#x27;, &#x27;province&#x27;, &#x27;city&#x27;, &#x27;quxian&#x27;]  # 过滤器</span><br><span class="line">    # list_filter = [&#x27;id&#x27;, &#x27;level&#x27;, &#x27;province&#x27;, &#x27;city&#x27;, &#x27;quxian&#x27;]  # 如果加id，xadmin加载回来的数据就会很慢，所以不要在过滤器上使用id</span><br><span class="line">    list_per_page = 30  # 默认每页数量</span><br><span class="line">    model_icon = &#x27;fa fa-users&#x27;  # 左侧图标</span><br><span class="line">    ordering = [&#x27;-id&#x27;]  # 排序</span><br><span class="line">    readonly_fields = [&#x27;subscribe&#x27;, &#x27;wx_openid&#x27;, &#x27;phone&#x27;]  # 只读字段</span><br><span class="line">    is_addbalance = True   # 加载自定义的插件</span><br><span class="line">    relfield_style = &#x27;fk-ajax&#x27;  # 其他表如果外键到用户表就做ajax搜索查询，不一次性加载数据</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="67-、xadmin导出插件处理，增加导出勾选数据项"><a href="#67-、xadmin导出插件处理，增加导出勾选数据项" class="headerlink" title="67 、xadmin导出插件处理，增加导出勾选数据项"></a>67 、xadmin导出插件处理，增加导出勾选数据项</h2><p>常规的导出只有两个选择【导出表头】、【导出全部数据】</p>
<p><img src="https://img-blog.csdnimg.cn/20190917141511283.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>现在想要做的是增加一个选择，即【导出表头】、【导出全部数据】、【导出勾选数据】，如下图：</p>
<p><img src="https://img-blog.csdnimg.cn/20190917141839822.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>需要修改xadmin源代码，具体如下</p>
<h4 id="1、加载js文件"><a href="#1、加载js文件" class="headerlink" title="1、加载js文件"></a>1、加载js文件</h4><p>找到虚拟环境\Lib\site-packages\xadmin\views\list.py，在607行增加’xadmin.plugin.importexport.js’，如下图所示</p>
<p><img src="https://img-blog.csdnimg.cn/20190917141853832.png" alt="在这里插入图片描述"></p>
<h4 id="2、修改export-py，后端处理下载文件"><a href="#2、修改export-py，后端处理下载文件" class="headerlink" title="2、修改export.py，后端处理下载文件"></a>2、修改export.py，后端处理下载文件</h4><p>找到虚拟环境\Lib\site-packages\xadmin\plugins\export.py</p>
<p>在84行把rows = context[‘results’]修改成如下函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 新增导出所选数据</span><br><span class="line"># rows = context[&#x27;results&#x27;]  </span><br><span class="line">rows = []</span><br><span class="line">select_across = self.request.GET.get(&#x27;_select_across&#x27;, False) == &#x27;1&#x27;</span><br><span class="line">selected = self.request.GET.get(&#x27;_selected_actions&#x27;, &#x27;&#x27;)</span><br><span class="line">if self.request.GET.get(&#x27;selected&#x27;, &#x27;off&#x27;) == &#x27;on&#x27;:</span><br><span class="line">    if not select_across:</span><br><span class="line">        selected_pk = selected.split(&#x27;,&#x27;)</span><br><span class="line">        for i in context[&#x27;results&#x27;]:</span><br><span class="line">            if str(i[&#x27;object&#x27;].id) in selected_pk:</span><br><span class="line">                rows.append(i)</span><br><span class="line">    else:</span><br><span class="line">        rows = context[&#x27;results&#x27;]</span><br><span class="line">else:</span><br><span class="line">    rows = context[&#x27;results&#x27;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/2019091714200418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>3、 修改model_list.top_toolbar.exports.html<br>找到虚拟环境\Lib\site-packages\xadmin\templates\xadmin\blocks\model_list.top_toolbar.exports.html</p>
<p>使用以下代码覆盖原文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load i18n %&#125;</span><br><span class="line">&lt;div class=&quot;btn-group export&quot;&gt;</span><br><span class="line">    &lt;a id=&quot;export-menu&quot; class=&quot;dropdown-toggle btn btn-default btn-sm&quot; data-toggle=&quot;dropdown&quot; href=&quot;#&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;fa fa-share&quot;&gt;&lt;/i&gt; &#123;% trans &quot;Export&quot; %&#125; &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot; aria-labelledby=&quot;dLabel&quot;&gt;</span><br><span class="line">        &#123;% for et in export_types %&#125;</span><br><span class="line">        &lt;li&gt;&lt;a data-toggle=&quot;modal&quot; data-target=&quot;#export-modal-&#123;&#123;et.type&#125;&#125;&quot;&gt;&lt;i class=&quot;fa fa-arrow-circle-down&quot;&gt;</span><br><span class="line">        &lt;/i&gt; &#123;% trans &quot;Export&quot; %&#125; &#123;&#123;et.name&#125;&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &#123;% for et in export_types %&#125;</span><br><span class="line">    &lt;div id=&quot;export-modal-&#123;&#123;et.type&#125;&#125;&quot; class=&quot;modal fade&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;modal-dialog&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">                &lt;form method=&quot;get&quot; action=&quot;&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div class=&quot;modal-header&quot;&gt;</span><br><span class="line">                        &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/button&gt;</span><br><span class="line">                        &lt;h4 class=&quot;modal-title&quot;&gt;&#123;% trans &quot;Export&quot; %&#125; &#123;&#123;et.name&#125;&#125;&lt;/h4&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">                        &#123;&#123; form_params|safe &#125;&#125;</span><br><span class="line">                        &lt;input type=&quot;hidden&quot; name=&quot;export_type&quot; value=&quot;&#123;&#123;et.type&#125;&#125;&quot;&gt;</span><br><span class="line">                        &lt;!-- 增加 导出所选数据 一栏 --&gt;</span><br><span class="line">                        &lt;input type=&quot;hidden&quot; name=&quot;_selected_actions&quot; value=&quot;&quot;/&gt;</span><br><span class="line">                        &lt;input type=&quot;hidden&quot; name=&quot;_select_across&quot; value=&quot;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;label class=&quot;checkbox&quot;&gt;</span><br><span class="line">                            &#123;% if et.type == &quot;xlsx&quot; %&#125;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;export_xlsx_header&quot; checked=&quot;checked&quot; value=&quot;on&quot;&gt;</span><br><span class="line">                            &#123;% trans &quot;Export with table header.&quot; %&#125;</span><br><span class="line">                            &#123;% endif %&#125;</span><br><span class="line">                            &#123;% if et.type == &quot;xls&quot; %&#125;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;export_xls_header&quot; checked=&quot;checked&quot; value=&quot;on&quot;&gt;</span><br><span class="line">                            &#123;% trans &quot;Export with table header.&quot; %&#125;</span><br><span class="line">                            &#123;% endif %&#125;</span><br><span class="line">                            &#123;% if et.type == &quot;csv&quot; %&#125;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;export_csv_header&quot; checked=&quot;checked&quot; value=&quot;on&quot;&gt;</span><br><span class="line">                            &#123;% trans &quot;Export with table header.&quot; %&#125;</span><br><span class="line">                            &#123;% endif %&#125;</span><br><span class="line">                            &#123;% if et.type == &quot;xml&quot; %&#125;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;export_xml_format&quot; checked=&quot;checked&quot; value=&quot;on&quot;&gt;</span><br><span class="line">                            &#123;% trans &quot;Export with format.&quot; %&#125;</span><br><span class="line">                            &#123;% endif %&#125;</span><br><span class="line">                            &#123;% if et.type == &quot;json&quot; %&#125;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;export_json_format&quot; checked=&quot;checked&quot; value=&quot;on&quot;&gt;</span><br><span class="line">                            &#123;% trans &quot;Export with format.&quot; %&#125;</span><br><span class="line">                            &#123;% endif %&#125;</span><br><span class="line">                        &lt;/label&gt;</span><br><span class="line">                        &lt;label class=&quot;checkbox&quot;&gt;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;all&quot; value=&quot;on&quot;&gt; &#123;% trans &quot;Export all data.&quot; %&#125;</span><br><span class="line">                        &lt;/label&gt;</span><br><span class="line">                        &lt;!-- 增加 导出所选数据 一栏 --&gt;</span><br><span class="line">                        &lt;label class=&quot;checkbox&quot;&gt;</span><br><span class="line">                            &lt;input type=&quot;checkbox&quot; name=&quot;selected&quot; value=&quot;on&quot;&gt; 导出勾选数据</span><br><span class="line">                        &lt;/label&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-footer&quot;&gt;</span><br><span class="line">                        &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;&#123;% trans &quot;Close&quot; %&#125;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;button class=&quot;btn btn-success myexport  glyphicon glyphicon-export &quot; type=&quot;submit&quot;&gt;&lt;i</span><br><span class="line">                                class=&quot;fa fa-share&quot;&gt;&lt;/i&gt; &#123;% trans &quot;Export&quot; %&#125;</span><br><span class="line">                        &lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br><span class="line">        &lt;/div&gt;&lt;!-- /.modal-dalog --&gt;</span><br><span class="line">    &lt;/div&gt;&lt;!-- /.modal --&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    // 如果是订单导出，把待出货订单设置成待收货订单</span><br><span class="line">    $(document).ready(function () &#123;</span><br><span class="line">        $(&#x27;.myexport&#x27;).click(function () &#123;</span><br><span class="line">            // 当把订单导出时，需要修改订单状态为待收货状态</span><br><span class="line">            var url = window.location.protocol + &#x27;//&#x27; + window.location.host + &quot;/exportorder/&quot;;</span><br><span class="line">            $(&quot;input[name=&#x27;_select_across&#x27;]&quot;).val($(&quot;input[name=&#x27;select_across&#x27;]&quot;).val());</span><br><span class="line">            if ($(&quot;input[name=&#x27;selected&#x27;]&quot;).is(&#x27;:checked&#x27;)) &#123;</span><br><span class="line">                var arr = [];</span><br><span class="line">                $.each($(&#x27;.action-select&#x27;), function () &#123;</span><br><span class="line">                    if (true == $(this).prop(&#x27;checked&#x27;)) &#123;</span><br><span class="line">                        arr.push($(this).val());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                if(arr.length == 0)&#123;</span><br><span class="line">                    alert(&#x27;请先勾选导出数据&#x27;)</span><br><span class="line">                    return false</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                var arr = []</span><br><span class="line">                var order_type = $(&#x27;.breadcrumb li&#x27;).eq(1).text().trim()</span><br><span class="line">                $(&#x27;.grid-item&#x27;).each(function (index, el) &#123;</span><br><span class="line"></span><br><span class="line">                    arr.push($(el).find(&#x27;td&#x27;).eq(1).text().trim())</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            if (($(&#x27;.breadcrumb &gt; li&#x27;).eq(1).text()).indexOf(&#x27;订单&#x27;) != -1) &#123;</span><br><span class="line">                // 5秒后执行</span><br><span class="line">                setTimeout(function () &#123;</span><br><span class="line">                    $.ajax(&#123;</span><br><span class="line">                        type: &quot;POST&quot;,</span><br><span class="line">                        url: url,</span><br><span class="line">                        data: &#123;&#x27;orderlist&#x27;: JSON.stringify(arr), &#x27;order_type&#x27;: order_type,&#125;,</span><br><span class="line">                        beforeSend: function (xhr) &#123;</span><br><span class="line">                            xhr.setRequestHeader(&quot;X-CSRFToken&quot;, $.getCookie(&quot;csrftoken&quot;))</span><br><span class="line">                        &#125;,</span><br><span class="line">                        success: function (data) &#123;</span><br><span class="line">                            window.location.reload();</span><br><span class="line">                        &#125;,</span><br><span class="line">                        error: function (xhr) &#123;</span><br><span class="line">                            alert(&quot;出现未知错误&quot;);</span><br><span class="line">                            window.location.reload();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;, 5000);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="68、使用F查询更新用户重要数据"><a href="#68、使用F查询更新用户重要数据" class="headerlink" title="68、使用F查询更新用户重要数据"></a>68、使用F查询更新用户重要数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from django.db.models import F</span><br><span class="line"># 使用F查询更新用户余额</span><br><span class="line">balance = 5  </span><br><span class="line">MallUser.objects.filter(id=1).update(balance=F(&#x27;balance&#x27;) + balance)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>相当于sql的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update Malluser set balance=balance + 5 where id=1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="69、日志输出模块"><a href="#69、日志输出模块" class="headerlink" title="69、日志输出模块"></a>69、日志输出模块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line">import platform</span><br><span class="line"># 全局函数</span><br><span class="line">PlATFORM = platform.system()</span><br><span class="line">if (PlATFORM == &quot;Linux&quot;):</span><br><span class="line">    # linux系统,文件保存在var下</span><br><span class="line">    SERVER_LOG_PATH = &#x27;/var/mylog.log&#x27;</span><br><span class="line">else:</span><br><span class="line">    # windows系统,文件保存在D盘下</span><br><span class="line">    SERVER_LOG_PATH = &#x27;D:\mylog.log&#x27;</span><br><span class="line"># 定义一个logging的对象，命名为mylog</span><br><span class="line">LOGGER = logging.getLogger(&#x27;mylog&#x27;)</span><br><span class="line"># 设置级别为WARNING</span><br><span class="line">LOGGER.setLevel(logging.WARNING)</span><br><span class="line"># 创建一个handler，用于写入日志文件</span><br><span class="line">fh = logging.FileHandler(SERVER_LOG_PATH, encoding=&#x27;utf-8&#x27;)</span><br><span class="line">fh.setLevel(logging.WARNING)</span><br><span class="line"># 定义handler的输出格式</span><br><span class="line">formatter = logging.Formatter(&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;, datefmt=&#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">fh.setFormatter(formatter)</span><br><span class="line"># 给Logger添加handler</span><br><span class="line">LOGGER.addHandler(fh)</span><br><span class="line"># 不在控制台显示</span><br><span class="line">LOGGER.propagate = False</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="70、字典排序"><a href="#70、字典排序" class="headerlink" title="70、字典排序"></a>70、字典排序</h2><p>字典在内存中发布是无序的，当想对键值或者键名进行排序时可以先把字典转成元组，这可以达到排序的目的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">score = &#123;&#x27;小明&#x27;: &#123;&#x27;avg_score&#x27;: 90, &#x27;English&#x27;: 90, &#x27;Math&#x27;: 90, &#x27;Chniese&#x27;: 90, &#125;,</span><br><span class="line">     &#x27;小红&#x27;: &#123;&#x27;avg_score&#x27;: 60, &#x27;English&#x27;: 60, &#x27;Math&#x27;: 61, &#x27;Chniese&#x27;: 59, &#125;,</span><br><span class="line">     &#x27;小黑&#x27;: &#123;&#x27;avg_score&#x27;: 70, &#x27;English&#x27;: 75, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 70, &#125;,</span><br><span class="line">     &#x27;小白&#x27;: &#123;&#x27;avg_score&#x27;: 80, &#x27;English&#x27;: 95, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 80, &#125;,</span><br><span class="line">     &#125;</span><br><span class="line"># 对姓名进行排序，即对键名进行排序</span><br><span class="line">b = sorted(score.items(), key=lambda x: x[0], reverse=True)</span><br><span class="line">show_str = &#x27;&#x27;</span><br><span class="line">for info in b:</span><br><span class="line">    # print(info)</span><br><span class="line">    key, value = info[0], info[1]</span><br><span class="line">    show_str += &#x27;姓名：&#123;&#125;,平均分：&#123;&#125;，成绩：&#123;&#125;&#x27;.format(key,value[&#x27;avg_score&#x27;], value) + &#x27;\r\n&#x27;</span><br><span class="line">print(&#x27;对姓名进行排序&#x27;)</span><br><span class="line">print(show_str)</span><br><span class="line"># 对平均分进行排序</span><br><span class="line">b = sorted(score.items(), key=lambda x: x[1][&#x27;avg_score&#x27;], reverse=True)</span><br><span class="line">show_str = &#x27;&#x27;</span><br><span class="line">for info in b:</span><br><span class="line">    # print(info)</span><br><span class="line">    key, value = info[0], info[1]</span><br><span class="line">    show_str += &#x27;姓名：&#123;&#125;,平均分：&#123;&#125;，成绩：&#123;&#125;&#x27;.format(key,value[&#x27;avg_score&#x27;], value) + &#x27;\r\n&#x27;</span><br><span class="line">print(&#x27;对平均分进行排序&#x27;)</span><br><span class="line">print(show_str)</span><br><span class="line"></span><br><span class="line"># 对英语成绩进行排序</span><br><span class="line">b = sorted(score.items(), key=lambda x: x[1][&#x27;English&#x27;], reverse=True)</span><br><span class="line">show_str = &#x27;&#x27;</span><br><span class="line">for info in b:</span><br><span class="line">    # print(info)</span><br><span class="line">    key, value = info[0], info[1]</span><br><span class="line">    show_str += &#x27;姓名：&#123;&#125;,平均分：&#123;&#125;，成绩：&#123;&#125;&#x27;.format(key,value[&#x27;avg_score&#x27;], value) + &#x27;\r\n&#x27;</span><br><span class="line">print(&#x27;对英语成绩进行排序&#x27;)</span><br><span class="line">print(show_str)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">对姓名进行排序</span><br><span class="line">姓名：小黑,平均分：70，成绩：&#123;&#x27;avg_score&#x27;: 70, &#x27;English&#x27;: 75, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 70&#125;</span><br><span class="line">姓名：小红,平均分：60，成绩：&#123;&#x27;avg_score&#x27;: 60, &#x27;English&#x27;: 60, &#x27;Math&#x27;: 61, &#x27;Chniese&#x27;: 59&#125;</span><br><span class="line">姓名：小白,平均分：80，成绩：&#123;&#x27;avg_score&#x27;: 80, &#x27;English&#x27;: 95, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 80&#125;</span><br><span class="line">姓名：小明,平均分：90，成绩：&#123;&#x27;avg_score&#x27;: 90, &#x27;English&#x27;: 90, &#x27;Math&#x27;: 90, &#x27;Chniese&#x27;: 90&#125;</span><br><span class="line"></span><br><span class="line">对平均分进行排序</span><br><span class="line">姓名：小明,平均分：90，成绩：&#123;&#x27;avg_score&#x27;: 90, &#x27;English&#x27;: 90, &#x27;Math&#x27;: 90, &#x27;Chniese&#x27;: 90&#125;</span><br><span class="line">姓名：小白,平均分：80，成绩：&#123;&#x27;avg_score&#x27;: 80, &#x27;English&#x27;: 95, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 80&#125;</span><br><span class="line">姓名：小黑,平均分：70，成绩：&#123;&#x27;avg_score&#x27;: 70, &#x27;English&#x27;: 75, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 70&#125;</span><br><span class="line">姓名：小红,平均分：60，成绩：&#123;&#x27;avg_score&#x27;: 60, &#x27;English&#x27;: 60, &#x27;Math&#x27;: 61, &#x27;Chniese&#x27;: 59&#125;</span><br><span class="line"></span><br><span class="line">对英语成绩进行排序</span><br><span class="line">姓名：小白,平均分：80，成绩：&#123;&#x27;avg_score&#x27;: 80, &#x27;English&#x27;: 95, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 80&#125;</span><br><span class="line">姓名：小明,平均分：90，成绩：&#123;&#x27;avg_score&#x27;: 90, &#x27;English&#x27;: 90, &#x27;Math&#x27;: 90, &#x27;Chniese&#x27;: 90&#125;</span><br><span class="line">姓名：小黑,平均分：70，成绩：&#123;&#x27;avg_score&#x27;: 70, &#x27;English&#x27;: 75, &#x27;Math&#x27;: 65, &#x27;Chniese&#x27;: 70&#125;</span><br><span class="line">姓名：小红,平均分：60，成绩：&#123;&#x27;avg_score&#x27;: 60, &#x27;English&#x27;: 60, &#x27;Math&#x27;: 61, &#x27;Chniese&#x27;: 59&#125;</span><br></pre></td></tr></table></figure>

<h3 id="对列表中字典按多个键值排序"><a href="#对列表中字典按多个键值排序" class="headerlink" title="对列表中字典按多个键值排序"></a>对列表中字典按多个键值排序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from operator import itemgetter</span><br><span class="line">data = [</span><br><span class="line">    &#123;&#x27;code&#x27;: 1, &#x27;position&#x27;: 300, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">    &#123;&#x27;code&#x27;: 2, &#x27;position&#x27;: 255, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">    &#123;&#x27;code&#x27;: 3, &#x27;position&#x27;: 256, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">    &#123;&#x27;code&#x27;: 1, &#x27;position&#x27;: 500, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">    &#123;&#x27;code&#x27;: 5, &#x27;position&#x27;: 455, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">    &#123;&#x27;code&#x27;: 1, &#x27;position&#x27;: 322, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">    &#123;&#x27;code&#x27;: 6, &#x27;position&#x27;: 676, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;,</span><br><span class="line">]</span><br><span class="line">data = sorted(data, key=itemgetter(&#x27;code&#x27;, &#x27;position&#x27;))</span><br><span class="line"></span><br><span class="line">print(data)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;&#x27;code&#x27;: 1, &#x27;position&#x27;: 300, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;, </span><br><span class="line">&#123;&#x27;code&#x27;: 1, &#x27;position&#x27;: 322, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;, </span><br><span class="line">&#123;&#x27;code&#x27;: 1, &#x27;position&#x27;: 500, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;, </span><br><span class="line">&#123;&#x27;code&#x27;: 2, &#x27;position&#x27;: 255, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;, </span><br><span class="line">&#123;&#x27;code&#x27;: 3, &#x27;position&#x27;: 256, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;, </span><br><span class="line">&#123;&#x27;code&#x27;: 5, &#x27;position&#x27;: 455, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;, </span><br><span class="line">&#123;&#x27;code&#x27;: 6, &#x27;position&#x27;: 676, &#x27;time&#x27;: &#x27;1620442242&#x27;&#125;]</span><br></pre></td></tr></table></figure>

<h2 id="71、时间格式与字符串互转、比较大小"><a href="#71、时间格式与字符串互转、比较大小" class="headerlink" title="71、时间格式与字符串互转、比较大小"></a>71、时间格式与字符串互转、比较大小</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line"></span><br><span class="line"># 当前时间转字符串</span><br><span class="line">now = datetime.datetime.strftime(datetime.datetime.now(), &#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line"># 字符串转时间格式</span><br><span class="line">now = datetime.datetime.strptime(now, &#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">a = now + datetime.timedelta(minutes=-15)</span><br><span class="line"># 时间比较大小</span><br><span class="line">if a &lt; now:</span><br><span class="line">    print(&#x27;yes&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="72、python把’-u’开头的字符串转中文"><a href="#72、python把’-u’开头的字符串转中文" class="headerlink" title="72、python把’\u’开头的字符串转中文"></a>72、python把’\u’开头的字符串转中文</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str_data = &#x27;\\u7528\\u6237 ID \\u6216\\u5bc6\\u7801\\u9519\\u8bef&#x27;</span><br><span class="line"># 字符串.encode(&#x27;utf-8&#x27;).decode(&#x27;unicode_escape&#x27;)</span><br><span class="line">str_data_to_zh = str_data.encode(&#x27;utf-8&#x27;).decode(&#x27;unicode_escape&#x27;)</span><br><span class="line">print(str_data_to_zh)</span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">用户 ID 或密码错误</span><br></pre></td></tr></table></figure>

<h2 id="73、django进行数据迁移时出现No-changes-detected解决方案"><a href="#73、django进行数据迁移时出现No-changes-detected解决方案" class="headerlink" title="73、django进行数据迁移时出现No changes detected解决方案"></a>73、django进行数据迁移时出现No changes detected解决方案</h2><p>原因：可能是由于app下面没有migrations文件夹<br>所以需要创建这个文件夹，命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations --empty 你的app名称</span><br></pre></td></tr></table></figure>

<h2 id="74、ubuntu下载文件到windows桌面"><a href="#74、ubuntu下载文件到windows桌面" class="headerlink" title="74、ubuntu下载文件到windows桌面"></a>74、ubuntu下载文件到windows桌面</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install lrzsz</span><br><span class="line">sz 123.txt</span><br></pre></td></tr></table></figure>

<h2 id="75、git查看提交日志"><a href="#75、git查看提交日志" class="headerlink" title="75、git查看提交日志"></a>75、git查看提交日志</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --author=&quot;ldc&quot;</span><br></pre></td></tr></table></figure>

<h2 id="76、python翻译模块"><a href="#76、python翻译模块" class="headerlink" title="76、python翻译模块"></a>76、python翻译模块</h2><p>可以把英文翻译成中文，也可以把中文翻译成英文</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pip install  translate</span><br><span class="line"></span><br><span class="line">from translate import Translator</span><br><span class="line"></span><br><span class="line">name = &#x27;giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca&#x27;</span><br><span class="line">translator = Translator(to_lang=&quot;chinese&quot;)</span><br><span class="line">translation = translator.translate(name)</span><br><span class="line">print(translation)</span><br><span class="line"></span><br><span class="line">translator= Translator(from_lang=&quot;chinese&quot;,to_lang=&quot;english&quot;)</span><br><span class="line">translation = translator.translate(&quot;我想你&quot;)</span><br><span class="line">print(translation)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">大熊猫，熊猫，熊猫熊，浣熊，大熊猫</span><br><span class="line">I missed you.</span><br></pre></td></tr></table></figure>

<h2 id="77、python实现字符串转字典"><a href="#77、python实现字符串转字典" class="headerlink" title="77、python实现字符串转字典"></a>77、python实现字符串转字典</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import ast</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">target_str = &#x27;&#123;&quot;h&quot;: 1, &quot;e&quot;: 2, &quot;l&quot;: 3, &quot;l&quot;: 4, &quot;o&quot;: 5&#125;&#x27;</span><br><span class="line">target_str2 = &quot;&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 2, &#x27;l&#x27;: 3, &#x27;l&#x27;: 4, &#x27;o&#x27;: 5&#125;&quot;</span><br><span class="line"></span><br><span class="line"># 方式1：使用json，缺点，字符串中不能出现单引号</span><br><span class="line"># 由于 json 语法规定 数组或对象之中的字符串必须使用双引号，不能使用单引号</span><br><span class="line"># 官网https://www.json.org/json-en.html上有一段描述是</span><br><span class="line"># A string is a sequence of zero or more Unicode characters, wrapped in double quotes, using backslash escapes</span><br><span class="line">print(json.loads(target_str))</span><br><span class="line"># print(json.loads(target_str2))   # 使用json转这个字符串会报错 Expecting property name enclosed in double quotes</span><br><span class="line"></span><br><span class="line"># 方式2：使用eval函数，缺点，不安全</span><br><span class="line">print(eval(target_str))</span><br><span class="line">print(eval(target_str2))</span><br><span class="line"># print(eval(&quot;__import__(&#x27;os&#x27;).system(&#x27;dir&#x27;)&quot;))  # 会列出当前的目录文件，如果字符串是一些删除命令，则可以把整个目录清空！</span><br><span class="line"></span><br><span class="line"># 方式3，使用ast.literal_eval，没有json与eval的缺点，推荐使用这个</span><br><span class="line">print(ast.literal_eval(target_str))</span><br><span class="line">print(ast.literal_eval(target_str2))</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 2, &#x27;l&#x27;: 4, &#x27;o&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 2, &#x27;l&#x27;: 4, &#x27;o&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 2, &#x27;l&#x27;: 4, &#x27;o&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 2, &#x27;l&#x27;: 4, &#x27;o&#x27;: 5&#125;</span><br><span class="line">&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 2, &#x27;l&#x27;: 4, &#x27;o&#x27;: 5&#125;</span><br></pre></td></tr></table></figure>

<h2 id="78、django-app-如何在后台显示中文名"><a href="#78、django-app-如何在后台显示中文名" class="headerlink" title="78、django app 如何在后台显示中文名"></a>78、django app 如何在后台显示中文名</h2><p>1.在app (这里以user为例)下面的__init__.py文件中</p>
<p>添加:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default_app_config = &#x27;user.apps.UserConfig&#x27;</span><br></pre></td></tr></table></figure>

<p>2.在apps.py中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from django.apps import AppConfig</span><br><span class="line"></span><br><span class="line">class UserConfig(AppConfig):</span><br><span class="line">    name = &#x27;user&#x27;</span><br><span class="line">    verbose_name = &#x27;用户&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="79、使用python给Excel指定行添加数据"><a href="#79、使用python给Excel指定行添加数据" class="headerlink" title="79、使用python给Excel指定行添加数据"></a>79、使用python给Excel指定行添加数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import openpyxl, sys</span><br><span class="line"></span><br><span class="line">wb = openpyxl.load_workbook(&#x27;b.xlsx&#x27;)</span><br><span class="line">sheet = wb[&#x27;Sheet1&#x27;]</span><br><span class="line"></span><br><span class="line"># 在excel表格第二行添加新数据</span><br><span class="line">addrow = 1   # 增加一行</span><br><span class="line">row = 2  # 在第二行新增一行</span><br><span class="line">name = &#x27;b-back.xlsx&#x27; # 新的表名</span><br><span class="line"></span><br><span class="line">wb1 = openpyxl.Workbook()</span><br><span class="line">sheet1 = wb1[&#x27;Sheet&#x27;]</span><br><span class="line"></span><br><span class="line"># 复制前row行</span><br><span class="line">for i in range(1, row):</span><br><span class="line">    for j in range(1, sheet.max_column + 1):</span><br><span class="line">        sheet1.cell(row=i, column=j).value = sheet.cell(row=i, column=j).value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 复制后row行</span><br><span class="line">for i in range(row, sheet.max_row + 1):</span><br><span class="line">    for j in range(1, sheet.max_column + 1):</span><br><span class="line">        if i == row:</span><br><span class="line">            # 给第row行添加新的数据</span><br><span class="line">            sheet1.cell(row=row, column=j).value = &#x27;新增&#x27;</span><br><span class="line">        sheet1.cell(row=i + addrow, column=j).value = sheet.cell(row=i, column=j).value</span><br><span class="line"></span><br><span class="line">wb1.save(name)</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200526120005871.png" alt="在这里插入图片描述"></p>
<h2 id="80、python中的format格式拼接字符串"><a href="#80、python中的format格式拼接字符串" class="headerlink" title="80、python中的format格式拼接字符串"></a>80、python中的format格式拼接字符串</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3, &#x27;d&#x27;: 5&#125;</span><br><span class="line"></span><br><span class="line">print(&#x27;&#123;a&#125;,&#123;b&#125;&#x27;.format(**d))</span><br><span class="line">print(&#x27;&#123;0&#125;,&#123;1&#125;,&#123;0&#125;&#x27;.format(&#x27;a&#x27;, &#x27;b&#x27;))</span><br><span class="line">print(f&quot;&#123;d[&#x27;a&#x27;]&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1,2</span><br><span class="line">a,b,a</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h2 id="81、数据库inner-join、full-join、left-join、union、union-all区别"><a href="#81、数据库inner-join、full-join、left-join、union、union-all区别" class="headerlink" title="81、数据库inner join、full join、left join、union、union all区别"></a>81、数据库inner join、full join、left join、union、union all区别</h2><p>表a_test</p>
<p><img src="https://img-blog.csdnimg.cn/20200529102527295.png#pic_center" alt="在这里插入图片描述"></p>
<p>表b_test</p>
<p><img src="https://img-blog.csdnimg.cn/20200529102549669.png#pic_center" alt="在这里插入图片描述"></p>
<p>INNER JOIN</p>
<p>是A和B的交集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM a_test INNER JOIN b_test ON a_test.name = b_test.namesa</span><br><span class="line"></span><br><span class="line">Inner join 产生的结果集中，是A和B的交集。</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102631494.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>FULL OUTER JOIN</p>
<p>产生A和B的并集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM a_test FULL OUTER JOIN b_test ON a_test.name = b_test.name </span><br><span class="line"></span><br><span class="line">Full outer join 产生A和B的并集。</span><br><span class="line">但是需要注意的是，对于没有匹配的记录，则会以null做为值。</span><br><span class="line">可以使用IF NULL判断。</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102702865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM a_test FULL OUTER JOIN b_test ON a_test.name = b_test.name</span><br><span class="line">WHERE a_test.id IS null OR b_test.id IS null</span><br><span class="line"></span><br><span class="line">产生A表和B表没有交集的数据集。</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102724731.png#pic_center" alt="在这里插入图片描述"></p>
<p>LEFT [OUTER] JOIN</p>
<p>产生表A的完全集，而B表中匹配的则有值，没有匹配的则以null值取代</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM a_test LEFT OUTER JOIN b_test ON a_test.name = b_test.name</span><br><span class="line">有些数据库可以不要OUTER</span><br><span class="line">SELECT * FROM a_test LEFT  JOIN b_test ON a_test.name = b_test.name</span><br><span class="line">Left outer join 产生表A的完全集，而B表中匹配的则有值，没有匹配的则以null值取代。</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102808618.png#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM a_test LEFT OUTER JOIN b_test ON a_test.name = b_test.name </span><br><span class="line">WHERE b_test.id IS null</span><br><span class="line"></span><br><span class="line">产生在A表中有而在B表中没有的集合。</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102828846.png#pic_center" alt="在这里插入图片描述"></p>
<p>RIGHT [OUTER] JOIN</p>
<p>RIGHT OUTER JOIN 是后面的表为基础，与LEFT OUTER JOIN用法类似。</p>
<p>UNION 与 UNION ALL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UNION 操作符用于合并两个或多个 SELECT 语句的结果集。</span><br><span class="line">请注意，UNION 内部的 SELECT 语句必须拥有相同数量的列。</span><br><span class="line">列也必须拥有相似的数据类型。</span><br><span class="line">同时，每条 SELECT 语句中的列的顺序必须相同。</span><br><span class="line">UNION 只选取记录，而UNION ALL会列出所有记录。</span><br><span class="line"></span><br><span class="line">SELECT name FROM a_test UNION SELECT name FROM b_test</span><br><span class="line"></span><br><span class="line">选取不同值</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102855430.png#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT a_test.id,a_test.name  FROM a_test </span><br><span class="line">UNION </span><br><span class="line">SELECT b_test.id,b_test.name FROM b_test</span><br><span class="line"></span><br><span class="line">由于 id 51 xh   与 id 4 xh 并不相同，不合并</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102917488.png#pic_center" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT name FROM a_test UNION ALL SELECT name FROM b_test</span><br><span class="line"></span><br><span class="line">全部列出来</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200529102937801.png#pic_center" alt="在这里插入图片描述"></p>
<p>还需要注意的是我们还有一个是“交差集” cross join, 这种Join没有办法用文式图表示，因为其就是把表A和表B的数据进行一个N*M的组合，即笛卡尔积。</p>
<p>表达式如下：SELECT * FROM a_test CROSS JOIN b_test</p>
<p>这个笛卡尔乘积会产生 4 x 4 = 16 条记录，一般来说，我们很少用到这个语法。但是我们得小心，如果不是使用嵌套的select语句，一般系统都会产生笛卡尔乘积然再做过滤。这是对于性能来说是非常危险的，尤其是表很大的时候。</p>
<h2 id="82、windows电脑查看端口使用情况"><a href="#82、windows电脑查看端口使用情况" class="headerlink" title="82、windows电脑查看端口使用情况"></a>82、windows电脑查看端口使用情况</h2><p>找出8000端口对应的PID进程，命令为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano|findstr 8000</span><br></pre></td></tr></table></figure>

<p>进程信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TCP    0.0.0.0:8000           0.0.0.0:0              LISTENING       1620</span><br><span class="line">UDP    0.0.0.0:8000           *:*                                    1620</span><br></pre></td></tr></table></figure>

<p>找出进程对应的详细信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tasklist |findstr 1620</span><br><span class="line"></span><br><span class="line">KGService.exe                 1620 Console                    1     18,696 K</span><br></pre></td></tr></table></figure>

<p>关进程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /pid 1620 /F</span><br></pre></td></tr></table></figure>

<p>查看程序占用内存<br>比如查看python占用运行内存</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist  /fi &quot;imagename eq python.exe&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/a61afd069e964e6f9d755c5c1884ca6f.png" alt="在这里插入图片描述"></p>
<h2 id="83、Django生成表和反向生成Model"><a href="#83、Django生成表和反向生成Model" class="headerlink" title="83、Django生成表和反向生成Model"></a>83、Django生成表和反向生成Model</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正向生成：</span><br><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br><span class="line"></span><br><span class="line">反向：</span><br><span class="line">会根据设置的数据库中的表在自动生成对应的Model代码，并打印出来</span><br><span class="line">python manage.py inspectdb</span><br><span class="line"></span><br><span class="line">以直接将打印的代码直接导入到指定的Model文件中</span><br><span class="line">python manage.py inspectdb &gt; models.py</span><br></pre></td></tr></table></figure>

<h2 id="84、windows的hosts文件位置"><a href="#84、windows的hosts文件位置" class="headerlink" title="84、windows的hosts文件位置"></a>84、windows的hosts文件位置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\drivers\etc\hosts</span><br></pre></td></tr></table></figure>

<h2 id="85、postgresql数据库"><a href="#85、postgresql数据库" class="headerlink" title="85、postgresql数据库"></a>85、postgresql数据库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"># 如果表存在就先删除</span><br><span class="line">drop table if exists student;</span><br><span class="line"># 创建学生表</span><br><span class="line"># id      serial not null  表示id自增</span><br><span class="line"># id      integer not null  表示id不自增</span><br><span class="line">create table student</span><br><span class="line">(</span><br><span class="line">    id                    serial not null</span><br><span class="line">        constraint student_pk</span><br><span class="line">            primary key,</span><br><span class="line">    name                  varchar,</span><br><span class="line">    class_id              integer,</span><br><span class="line">    height                numeric,</span><br><span class="line">    weight                numeric,</span><br><span class="line">    write_date            timestamp</span><br><span class="line">    </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">comment on table student is &#x27;学生表&#x27;;</span><br><span class="line"></span><br><span class="line">comment on column student.name is &#x27;名称&#x27;;</span><br><span class="line"></span><br><span class="line">comment on column student.class_id is &#x27;班级ID&#x27;;</span><br><span class="line"></span><br><span class="line">comment on column student.height is &#x27;身高&#x27;;</span><br><span class="line"></span><br><span class="line">comment on column student.weight is &#x27;体重&#x27;;</span><br><span class="line"></span><br><span class="line">comment on column student.write_date is &#x27;修改时间&#x27;;</span><br><span class="line"></span><br><span class="line">alter table student</span><br><span class="line">    owner to odoo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 更新</span><br><span class="line">update user set name=&#x27;张三&#x27; where id=111</span><br><span class="line"></span><br><span class="line"># 更新表a的字段为表b的值</span><br><span class="line">update account_invoice </span><br><span class="line">set sale_order_id=so.id </span><br><span class="line">from sale_order so </span><br><span class="line">where account_invoice.origin=so.name</span><br><span class="line"></span><br><span class="line"># 新增</span><br><span class="line">insert into &quot;user&quot; (name,sex) values (&#x27;小明&#x27;,1),(&#x27;小红&#x27;, 0)</span><br><span class="line"># 新增或更新</span><br><span class="line">如果id冲突就更新</span><br><span class="line">INSERT INTO  student(id, name)</span><br><span class="line">   VALUES(12, &#x27;小明&#x27;),(13, &#x27;小红&#x27;)</span><br><span class="line">   ON conflict(id) DO UPDATE</span><br><span class="line">   SET name =&#x27;未知&#x27;;</span><br><span class="line">如果id冲突就什么也不做</span><br><span class="line">INSERT INTO  student(id, name)</span><br><span class="line">   VALUES(12, &#x27;小明&#x27;),(13, &#x27;小红&#x27;)</span><br><span class="line">   ON conflict(id) DO NOTHING;</span><br><span class="line"></span><br><span class="line"># 把一个表中的数据插入到另一个表中</span><br><span class="line">insert into 目标表名 (column1,column2,columnn) select value1,value2,valuen from  源表名</span><br><span class="line">比如：</span><br><span class="line">insert into student (name, classs_name,create_date) select  student_name as name, class_name, now() from class_table;</span><br><span class="line"></span><br><span class="line"># 获取当前时间</span><br><span class="line">now()</span><br><span class="line">select now()</span><br><span class="line"></span><br><span class="line"># 删除</span><br><span class="line">DELETE FROM table_name [WHERE Clause]</span><br><span class="line"></span><br><span class="line"># 增加字段</span><br><span class="line">alter table 表名 add column 列名 类型;</span><br><span class="line"># 删除字段</span><br><span class="line">alter table 表名 dropcolumn 列名 ;</span><br><span class="line"></span><br><span class="line"># postgresql数据库查看表所有字段</span><br><span class="line">select * from information_schema.columns where table_schema=&#x27;public&#x27; and table_name=&#x27;表名&#x27;;</span><br><span class="line"></span><br><span class="line"># postgresql获取所有表名</span><br><span class="line">select tablename from pg_tables where schemaname=&#x27;public&#x27;</span><br><span class="line"></span><br><span class="line"># 对查询结果按id降序显示</span><br><span class="line">select * from table_name order by id desc</span><br><span class="line"></span><br><span class="line"># 对查询结果按id升序显示</span><br><span class="line">select * from table_name order by id asc</span><br><span class="line"></span><br><span class="line"># 转义字符, 查找name中包含单引号的记录</span><br><span class="line">select * from student where name like  E&#x27;%\&#x27;%&#x27;;</span><br><span class="line"></span><br><span class="line"># 查看表记录总数</span><br><span class="line">select relname as TABLE_NAME, reltuples as rowCounts from pg_class where relkind = &#x27;r&#x27; and relnamespace = (select oid from pg_namespace where nspname=&#x27;public&#x27;) order by rowCounts desc;</span><br><span class="line"></span><br><span class="line"># 将结果转换为数组</span><br><span class="line">SELECT array(SELECT &quot;name&quot; FROM sale_order);</span><br><span class="line"></span><br><span class="line"># 将数组合并为字符串</span><br><span class="line">select array_to_string(array[1,2,3], &#x27;,&#x27;)</span><br><span class="line"></span><br><span class="line"># 联合子集更新，把sale_order_line的name连接换行符，然后按id更新到表a_test中对应的name</span><br><span class="line">update a_test set name=array_to_string(array(select name from sale_order_line where order_id=a_test.id),&#x27;&lt;br/&gt;&#x27;);</span><br><span class="line"></span><br><span class="line"># PostgreSQL合并查询同一列的多条记录，针对一对多，多对多字段</span><br><span class="line">比如表：</span><br><span class="line"></span><br><span class="line">id   name                  </span><br><span class="line">1    小明                   </span><br><span class="line">1    小红                     id   name</span><br><span class="line">1    小亮        --&gt;          1    小明，小亮，小红</span><br><span class="line">2    小强                     2    小强，小王</span><br><span class="line">2    小王</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">    id, array_to_string(ARRAY(SELECT unnest(array_agg(name order by name desc))),&#x27;,&#x27;) AS all_name</span><br><span class="line">FROM  </span><br><span class="line">    student</span><br><span class="line">GROUP BY id;</span><br><span class="line"></span><br><span class="line"># case语句</span><br><span class="line">case var</span><br><span class="line">	when condition1 then statement1</span><br><span class="line">	when condition2 then statement2</span><br><span class="line">else statementn</span><br><span class="line">end as new_name</span><br><span class="line"></span><br><span class="line">比如：</span><br><span class="line">select case name</span><br><span class="line">	when &#x27;小明&#x27; then &#x27;xm&#x27;</span><br><span class="line">	when &#x27;小红&#x27; then &#x27;xh&#x27;</span><br><span class="line">	when &#x27;小刚&#x27; then &#x27;xg&#x27;</span><br><span class="line">else &#x27;xw&#x27;</span><br><span class="line">end as short_name</span><br><span class="line">from student</span><br><span class="line"></span><br><span class="line"># 临时表、字符串合并、类型转换、时间格式转换、当前时间</span><br><span class="line">WITH TEMP AS ( </span><br><span class="line">	SELECT CAST ( concat ( bam.account_period_code, &#x27;-01&#x27; ) AS TIMESTAMP ) </span><br><span class="line">	   AS account_period_time </span><br><span class="line">		 FROM bi_account_move AS bam ) </span><br><span class="line">SELECT</span><br><span class="line">	account_period_time,</span><br><span class="line">	to_char(CURRENT_DATE,&#x27;yyyy-MM-dd hh24:MI:ss&#x27;) as current_date,</span><br><span class="line">	to_char( account_period_time, &#x27;yyyy&#x27; ) as year,</span><br><span class="line">	to_char( account_period_time, &#x27;MM&#x27; ) as month,</span><br><span class="line">	to_char( account_period_time, &#x27;dd&#x27; ) as day </span><br><span class="line">FROM TEMP</span><br><span class="line"></span><br><span class="line">比如：</span><br><span class="line">account_period_time	current_date	    year	month	day</span><br><span class="line">2019-06-01 0:00:00	2020-06-24 00:00:00	2019	 06	     01</span><br><span class="line">2019-06-01 0:00:00	2020-06-24 00:00:00	2019	 06	     01</span><br><span class="line"></span><br><span class="line"># 多个字符串拼接</span><br><span class="line">select </span><br><span class="line">concat(&#x27;payment_&#x27;, CAST(ap.id as varchar)) as line_key</span><br><span class="line">from ap</span><br><span class="line"></span><br><span class="line"># 将查询所得结果集的某一字段拼接成字符串，默认的是逗号</span><br><span class="line">select GROUP_CONCAT(id) from test where id&gt;5;</span><br><span class="line">结果为：</span><br><span class="line">1,2,3,4,5,6,7</span><br><span class="line"># 使用其他分隔符拼接</span><br><span class="line">select GROUP_CONCAT(id separator &#x27;-&#x27;) from test where id&gt;5;</span><br><span class="line">结果为：</span><br><span class="line">1-2-3-4-5-6-7</span><br><span class="line"># 多个临时表</span><br><span class="line">WITH temp_student AS ( SELECT ID, NAME, sex FROM student WHERE sex = TRUE ),</span><br><span class="line">temp_class AS (</span><br><span class="line">	SELECT</span><br><span class="line">		ID,</span><br><span class="line">		NAME,</span><br><span class="line">		student_id,</span><br><span class="line">		teacher_id</span><br><span class="line">	FROM</span><br><span class="line">		the_class </span><br><span class="line">	),</span><br><span class="line">	temp_teacher AS (</span><br><span class="line">	SELECT </span><br><span class="line">	  ID,</span><br><span class="line">		NAME,</span><br><span class="line">		age </span><br><span class="line">	FROM</span><br><span class="line">		teacher </span><br><span class="line">	) </span><br><span class="line">	SELECT</span><br><span class="line">	ts.NAME AS student_name,</span><br><span class="line">	tc.NAME AS class_name,</span><br><span class="line">	te.NAME AS teacher_name</span><br><span class="line">	from temp_student as ts</span><br><span class="line">	LEFT JOIN temp_class AS tc ON tc.student_id = ts.ID  </span><br><span class="line">	LEFT JOIN teacher AS te ON te.id = tc.teacher_id  </span><br><span class="line"></span><br><span class="line"># null转成有意义的值</span><br><span class="line">select COALESCE(name, &#x27;&#x27;) as name from a_test</span><br><span class="line">意思就是如果name为null，就转为空字符串</span><br><span class="line"></span><br><span class="line"># 字符串截取</span><br><span class="line">select SUBSTRING(&#x27;abcd&#x27;,1,2); -- result:ab 表示从下标从1开始,截取2个字符</span><br><span class="line"></span><br><span class="line"># 使用 interval 时间相加减(+/-)</span><br><span class="line">当前时间 + 10秒，</span><br><span class="line">select to_char(now() + interval &#x27;10 second&#x27;, &#x27;yyyy-mm-dd hh24:mi:ss&#x27;)  as reqDate from account_period;</span><br><span class="line">当前时间 - 10秒</span><br><span class="line">select to_char(now() + interval &#x27;-10 second&#x27;, &#x27;yyyy-mm-dd hh24:mi:ss&#x27;)  as reqDate from account_period;</span><br><span class="line"> </span><br><span class="line">当前时间 + 10分，</span><br><span class="line">select to_char(now() + interval &#x27;10 minute&#x27;, &#x27;yyyy-mm-dd hh24:mi:ss&#x27;)  as reqDate  from account_period;</span><br><span class="line"> </span><br><span class="line">当前时间 + 10时，</span><br><span class="line">select to_char(now() + interval &#x27;10 hour&#x27;, &#x27;yyyy-mm-dd hh24:mi:ss&#x27;)  as reqDate from account_period;</span><br><span class="line"> </span><br><span class="line">当前时间 + 10天，</span><br><span class="line">select to_char(now() + interval &#x27;10 day&#x27;, &#x27;yyyy-mm-dd hh24:mi:ss&#x27;)  as reqDate from account_period;</span><br><span class="line"></span><br><span class="line">当前时间 + 10年，</span><br><span class="line">select to_char(now() + interval &#x27;10 year&#x27;, &#x27;yyyy-mm-dd hh24:mi:ss&#x27;)  as reqDate from account_period;</span><br><span class="line"></span><br><span class="line"># UNION types numeric and text cannot be matched</span><br><span class="line">NULL::NUMERIC</span><br><span class="line"> 这个问题，是因为几个sql组合在一起时，同一个字段的值，遇到null时，需要进行类型转换。</span><br><span class="line"></span><br><span class="line"># 对行记录定义行编号，使用函数ROW_NUMBER()</span><br><span class="line"># 按分数进行降序，然后给行记录标记行编号，可以作为排名来使用</span><br><span class="line">select           </span><br><span class="line">	ROW_NUMBER() OVER (ORDER BY score desc) AS sequence_number,</span><br><span class="line">	name,score</span><br><span class="line">from</span><br><span class="line">	b_test</span><br><span class="line"></span><br><span class="line"># 数字转字符串  </span><br><span class="line">select cast(123 as VARCHAR); </span><br><span class="line"></span><br><span class="line"># 字符串转数字  </span><br><span class="line">select cast(&#x27;123&#x27; as INTEGER);</span><br></pre></td></tr></table></figure>

<h2 id="86、python控制台输出带颜色的文字方法"><a href="#86、python控制台输出带颜色的文字方法" class="headerlink" title="86、python控制台输出带颜色的文字方法"></a>86、python控制台输出带颜色的文字方法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#格式：　　设置颜色开始 ：\033[显示方式;前景色;背景色m</span><br><span class="line">#说明：</span><br><span class="line">前景色            背景色           颜色</span><br><span class="line">---------------------------------------</span><br><span class="line">30                40              黑色</span><br><span class="line">31                41              红色</span><br><span class="line">32                42              绿色</span><br><span class="line">33                43              黃色</span><br><span class="line">34                44              蓝色</span><br><span class="line">35                45              紫红色</span><br><span class="line">36                46              青蓝色</span><br><span class="line">37                47              白色</span><br><span class="line">显示方式           意义</span><br><span class="line">-------------------------</span><br><span class="line">0                终端默认设置</span><br><span class="line">1                高亮显示</span><br><span class="line">4                使用下划线</span><br><span class="line">5                闪烁</span><br><span class="line">7                反白显示</span><br><span class="line">8                不可见</span><br><span class="line"> </span><br><span class="line">#例子：</span><br><span class="line">\033[1;31;40m    &lt;!--1-高亮显示 31-前景色红色  40-背景色黑色--&gt;</span><br><span class="line">\033[0m          &lt;!--采用终端默认设置，即取消颜色设置--&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例子</span><br><span class="line">print(&#x27;紫红字体 \033[1;35m hello world \033[0m!&#x27;)</span><br><span class="line">print(&#x27;褐色背景绿色字体 \033[1;32;43m hello world \033[0m!&#x27;)</span><br><span class="line">print(&#x27;\033[1;33;44mhello world\033[0m&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200615143709116.png" alt="在这里插入图片描述"></p>
<h2 id="87、控制台输出白色方框"><a href="#87、控制台输出白色方框" class="headerlink" title="87、控制台输出白色方框"></a>87、控制台输出白色方框</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;█&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="88、xadmin后台编辑多对多字段"><a href="#88、xadmin后台编辑多对多字段" class="headerlink" title="88、xadmin后台编辑多对多字段"></a>88、xadmin后台编辑多对多字段</h2><p>在models.py定义了多对多字段，想要在编辑时可以灵活使用这个字段的话，可以按以下方法设置：<br>modes.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Book(models.Model):</span><br><span class="line">    title = models.CharField(verbose_name=&quot;书名&quot;, max_length=32)</span><br><span class="line">    second_title = models.CharField(verbose_name=&quot;副标题&quot;, max_length=32, blank=True, null=True)</span><br><span class="line">    author = models.CharField(verbose_name=&quot;作者&quot;, max_length=32)</span><br><span class="line">    translator = models.CharField(verbose_name=&quot;译者&quot;, max_length=32, blank=True, null=True)</span><br><span class="line">    intro = models.TextField(verbose_name=&quot;描述&quot;)</span><br><span class="line">    pic = models.FileField(verbose_name=&quot;封面图片&quot;, max_length=64, upload_to=&#x27;book_cover&#x27;, null=True, blank=True)</span><br><span class="line">    tags = models.ManyToManyField(Tags, verbose_name=&#x27;书籍标签&#x27;, blank=True)</span><br><span class="line">    prizes = models.ManyToManyField(Prizes, verbose_name=&#x27;获奖详情&#x27;, blank=True)</span><br><span class="line">    sump = models.IntegerField(verbose_name=&quot;收藏人数&quot;, default=0)</span><br><span class="line">    rate_num = models.IntegerField(verbose_name=&quot;评分人数&quot;, default=0)</span><br><span class="line">    num = models.IntegerField(verbose_name=&quot;浏览量&quot;, default=0)</span><br><span class="line">    published_time = models.DateField(blank=True, null=True, verbose_name=&#x27;出版时间&#x27;)</span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=True, verbose_name=&#x27;创建时间&#x27;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;book&#x27;</span><br><span class="line">        verbose_name = &quot;图书&quot;</span><br><span class="line">        verbose_name_plural = &quot;图书&quot;</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.title</span><br></pre></td></tr></table></figure>

<p>adminx.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 书籍管理</span><br><span class="line">class BookAdmin(object):</span><br><span class="line">    search_fields = [&#x27;title&#x27;, &#x27;author&#x27;, &#x27;intro&#x27;]  # 检索字段</span><br><span class="line">    list_display = [&#x27;id&#x27;, &#x27;show_pic&#x27;, &#x27;title&#x27;, &#x27;second_title&#x27;, &#x27;author&#x27;, &#x27;translator&#x27;, &#x27;published_time&#x27;, &#x27;intro&#x27;,</span><br><span class="line">                    &#x27;tags&#x27;, &#x27;prizes&#x27;, &#x27;num&#x27;, &#x27;sump&#x27;, &#x27;rate_num&#x27;]  # 要显示的字段</span><br><span class="line">    list_filter = [&#x27;published_time&#x27;, &#x27;tags&#x27;, &#x27;prizes&#x27;]  # 分组过滤的字段</span><br><span class="line">    ordering = (&#x27;id&#x27;,)  # 设置默认排序字段，负号表示降序排序</span><br><span class="line">    list_per_page = 30  # 默认每页显示多少条记录，默认是100条</span><br><span class="line">    model_icon = &#x27;fa fa-book&#x27;  # 左侧小图标</span><br><span class="line">    list_editable = [&#x27;title&#x27;, &#x27;author&#x27;, &#x27;intro&#x27;, &#x27;published_time&#x27;]  # 可编辑字段</span><br><span class="line">    style_fields = &#123;&#x27;tags&#x27;: &#x27;m2m_transfer&#x27;, &#x27;prizes&#x27;: &#x27;m2m_transfer&#x27;&#125;  # 控制字段的显示样式</span><br><span class="line">    filter_horizontal = (&#x27;tags&#x27;, &#x27;prizes&#x27;)  # 水平选择编辑多对多字段</span><br></pre></td></tr></table></figure>

<p>重点是设置style_fields 和filter_horizontal ，效果：</p>
<p><img src="https://img-blog.csdnimg.cn/20200621214122315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="89、Django后台通过按钮显示TextField字段内容"><a href="#89、Django后台通过按钮显示TextField字段内容" class="headerlink" title="89、Django后台通过按钮显示TextField字段内容"></a>89、Django后台通过按钮显示TextField字段内容</h2><p>由于TextField字段类型内容可能很长，在后台显示时很占屏幕位置，可以通过按钮来控制显示，代码如下：<br>models.py中定义了一个TextField字段类型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Prizes(models.Model):</span><br><span class="line">    name = models.CharField(max_length=32, verbose_name=&quot;奖项&quot;)</span><br><span class="line">    intro = models.TextField(blank=True, null=True, verbose_name=&#x27;简介&#x27;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;prizes&#x27;</span><br><span class="line">        verbose_name = &quot;奖项&quot;</span><br><span class="line">        verbose_name_plural = &quot;奖项&quot;</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br></pre></td></tr></table></figure>

<p>这里使用xadmin作为后台管理框架，在adminx.py中代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">import xadmin</span><br><span class="line">from django.utils.safestring import mark_safe</span><br><span class="line">from xadmin import views</span><br><span class="line"></span><br><span class="line">from .models import *</span><br><span class="line"></span><br><span class="line"># 奖项管理</span><br><span class="line">class PrizesAdmin(object):</span><br><span class="line">    search_fields = [&#x27;name&#x27;]  # 检索字段</span><br><span class="line">    list_display = [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;show_intro&#x27;]</span><br><span class="line">    list_filter = [&#x27;name&#x27;]</span><br><span class="line">    ordering = (&#x27;id&#x27;,)</span><br><span class="line"></span><br><span class="line">    def show_intro(self, obj):</span><br><span class="line">        # 显示简介</span><br><span class="line">        if not obj.intro:</span><br><span class="line">            return mark_safe(&#x27;&#x27;)</span><br><span class="line">        if len(obj.intro) &lt; 20:</span><br><span class="line">            return mark_safe(obj.intro)</span><br><span class="line"></span><br><span class="line">        short_id = f&#x27;&#123;obj._meta.db_table&#125;_short_text_&#123;obj.id&#125;&#x27;</span><br><span class="line">        short_text_len = len(obj.intro) // 4</span><br><span class="line">        short_text = obj.intro[:short_text_len] + &#x27;......&#x27;</span><br><span class="line">        detail_id = f&#x27;&#123;obj._meta.db_table&#125;_detail_text_&#123;obj.id&#125;&#x27;</span><br><span class="line">        detail_text = obj.intro</span><br><span class="line"></span><br><span class="line">        text = &quot;&quot;&quot;&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">                        #%s,%s &#123;padding:10px;border:1px solid green;&#125; </span><br><span class="line">                  &lt;/style&gt;</span><br><span class="line">                    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    function openShutManager(oSourceObj,oTargetObj,shutAble,oOpenTip,oShutTip,oShortObj)&#123;</span><br><span class="line">                        var sourceObj = typeof oSourceObj == &quot;string&quot; ? document.getElementById(oSourceObj) : oSourceObj;</span><br><span class="line">                        var targetObj = typeof oTargetObj == &quot;string&quot; ? document.getElementById(oTargetObj) : oTargetObj;</span><br><span class="line">                        var shortObj = typeof oShortObj == &quot;string&quot; ? document.getElementById(oShortObj) : oShortObj;</span><br><span class="line">                        var openTip = oOpenTip || &quot;&quot;;</span><br><span class="line">                        var shutTip = oShutTip || &quot;&quot;;</span><br><span class="line">                        if(targetObj.style.display!=&quot;none&quot;)&#123;</span><br><span class="line">                           if(shutAble) return;</span><br><span class="line">                           targetObj.style.display=&quot;none&quot;;</span><br><span class="line">                           shortObj.style.display=&quot;block&quot;;</span><br><span class="line">                           if(openTip  &amp;&amp;  shutTip)&#123;</span><br><span class="line">                            sourceObj.innerHTML = shutTip; </span><br><span class="line">                           &#125;</span><br><span class="line">                        &#125; else &#123;</span><br><span class="line">                           targetObj.style.display=&quot;block&quot;;</span><br><span class="line">                           shortObj.style.display=&quot;none&quot;;</span><br><span class="line">                           if(openTip  &amp;&amp;  shutTip)&#123;</span><br><span class="line">                            sourceObj.innerHTML = openTip; </span><br><span class="line">                           &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &lt;/script&gt;</span><br><span class="line">                    &lt;p id=&quot;%s&quot;&gt;%s&lt;/p&gt;</span><br><span class="line">                    &lt;p&gt;&lt;a href=&quot;###&quot; οnclick=&quot;openShutManager(this,&#x27;%s&#x27;,false,&#x27;点击关闭&#x27;,&#x27;点击展开&#x27;,&#x27;%s&#x27;)&quot;&gt;点击展开&lt;/a&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;p id=&quot;%s&quot; style=&quot;display:none&quot;&gt;</span><br><span class="line">                       %s</span><br><span class="line">                    &lt;/p&gt;</span><br><span class="line">                    &quot;&quot;&quot; % (short_id, detail_id, short_id, short_text, detail_id, short_id, detail_id, detail_text)</span><br><span class="line">        return mark_safe(text)</span><br><span class="line"></span><br><span class="line">    show_intro.short_description = &#x27;描述&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：复制代码后需要做如下修改：</p>
<p><img src="https://img-blog.csdnimg.cn/20200815204246956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>一开始效果</p>
<p><img src="https://img-blog.csdnimg.cn/20200621230038819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>点击展开效果：<img src="https://img-blog.csdnimg.cn/20200621230120177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="90、前端判断上传的文件是否为图片且限制大小为300kB"><a href="#90、前端判断上传的文件是否为图片且限制大小为300kB" class="headerlink" title="90、前端判断上传的文件是否为图片且限制大小为300kB"></a>90、前端判断上传的文件是否为图片且限制大小为300kB</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en-us&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;body class=&quot;login&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;input class=&quot;form-control input-lg&quot; id=&quot;id_icon&quot; name=&quot;icon&quot; type=&quot;file&quot; onchange=&quot;imgTypeSize(&#x27;id_icon&#x27;,300)&quot;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    //判断是否为图片，若为图片，判断其大小是否大于0.3M</span><br><span class="line">    function imgTypeSize(FileId, maxsize) &#123;</span><br><span class="line">        /*获取图片内容对象*/</span><br><span class="line">        var imgFile = document.getElementById(FileId).files[0];</span><br><span class="line">        if (imgFile.name == &quot;&quot;) &#123;</span><br><span class="line">            alert(&quot;请上传头像哦&quot;);</span><br><span class="line">            return false;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            /*图片类型正则验证*/</span><br><span class="line">            var imgStr = /\.(jpg|jpeg|png|bmp|BMP|JPG|PNG|JPEG)$/;</span><br><span class="line">            if (!imgStr.test(imgFile.name)) &#123;</span><br><span class="line">                alert(&quot;文件不是图片类型&quot;);</span><br><span class="line">                return false;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                /*图片大小*/</span><br><span class="line">                var imagSize = imgFile.size;</span><br><span class="line">                if (imagSize &lt; (1024 * maxsize)) &#123;</span><br><span class="line">                    return true;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    alert(imgFile.name + &quot;大小不能超过&quot; + maxsize + &quot;kB&quot;);</span><br><span class="line">                    document.getElementById(FileId).value = &quot;&quot;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="91、form表单提交前验证"><a href="#91、form表单提交前验证" class="headerlink" title="91、form表单提交前验证"></a>91、form表单提交前验证</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;&quot; method=&quot;post&quot; id=&quot;login-form&quot; onsubmit=&quot;return toVaild()&quot;&gt;</span><br><span class="line">	&lt;input class=&quot;form-control&quot; id=&quot;id_account&quot; name=&quot;account&quot; type=&quot;text&quot; placeholder=&quot;账号&quot;/&gt;</span><br><span class="line">	&lt;input class=&quot;form-control&quot; id=&quot;id_password&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;密码&quot;&gt;</span><br><span class="line">&lt;form&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    document.getElementById(&#x27;id_username&#x27;).focus()</span><br><span class="line"></span><br><span class="line">    function toVaild() &#123;</span><br><span class="line">        var account = document.getElementById(&quot;id_account&quot;).value;</span><br><span class="line">        var password = document.getElementById(&quot;id_password&quot;).value;</span><br><span class="line">        if (account == &quot;&quot; || password == &quot;&quot;) &#123;</span><br><span class="line">            alert(&quot;请输入账号和密码&quot;);</span><br><span class="line">            return false;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="92、有序字典"><a href="#92、有序字典" class="headerlink" title="92、有序字典"></a>92、有序字典</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import collections</span><br><span class="line"></span><br><span class="line">d1 = collections.OrderedDict()  # 创建一个有序字典</span><br><span class="line">d1[&#x27;a&#x27;] = &#x27;A&#x27;</span><br><span class="line">d1[&#x27;b&#x27;] = &#x27;B&#x27;</span><br><span class="line">d1[&#x27;c&#x27;] = &#x27;C&#x27;</span><br><span class="line">d1[&#x27;d&#x27;] = &#x27;D&#x27;</span><br><span class="line">for k, v in d1.items():</span><br><span class="line">    print(k, v)</span><br></pre></td></tr></table></figure>

<h2 id="93、Python在Windows系统下实现TTS（文字转语音）"><a href="#93、Python在Windows系统下实现TTS（文字转语音）" class="headerlink" title="93、Python在Windows系统下实现TTS（文字转语音）"></a>93、Python在Windows系统下实现TTS（文字转语音）</h2><p>导入包：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip install pypiwin32</span><br><span class="line"></span><br><span class="line">import win32com.client</span><br><span class="line">spk = win32com.client.Dispatch(&quot;SAPI.SpVoice&quot;)</span><br><span class="line">spk.Speak(u&quot;my name is ldc,what is your name&quot;)</span><br><span class="line">spk.Speak(u&quot;大家好&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="94、定义一个简单闹钟"><a href="#94、定义一个简单闹钟" class="headerlink" title="94、定义一个简单闹钟"></a>94、定义一个简单闹钟</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># pip install pypiwin32 -i https://pypi.python.org/simple</span><br><span class="line">import win32com.client</span><br><span class="line">import time </span><br><span class="line">import winsound</span><br><span class="line"></span><br><span class="line">spk = win32com.client.Dispatch(&quot;SAPI.SpVoice&quot;)</span><br><span class="line"># 定义闹钟时间</span><br><span class="line">clocktime = [[19, 19], [11, 10], [12, 10], [18, 47]]  </span><br><span class="line">runinghour = 1  # 定义运行时间</span><br><span class="line">times = runinghour * 3600  # 次数</span><br><span class="line">print(times)</span><br><span class="line">for i in range(1, times):</span><br><span class="line">    time_now = [time.localtime(time.time()).tm_hour, time.localtime(time.time()).tm_min]</span><br><span class="line">    if time_now in clocktime:</span><br><span class="line">        print(time_now)</span><br><span class="line">        winsound.Beep(1000, 1000)</span><br><span class="line">        spk.Speak(u&quot;快去看下饭好了没有？&quot;)</span><br><span class="line">    time.sleep(60)  # 每分钟对比一次时间</span><br></pre></td></tr></table></figure>

<h2 id="95、根据年月获取当月天数"><a href="#95、根据年月获取当月天数" class="headerlink" title="95、根据年月获取当月天数"></a>95、根据年月获取当月天数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">def get_month_days(year, month):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    根据年份，月份信息显示此月份天数</span><br><span class="line">    :param year: 年份：</span><br><span class="line">    :param month: 月份（1～12）：</span><br><span class="line">    :return: 当月天数</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if month &gt;12 or month &lt;= 0:</span><br><span class="line">        return -1</span><br><span class="line">    if month == 2:</span><br><span class="line">        return 29 if year % 4 == 0 and year % 100 != 0 or year % 400 == 0 else 28</span><br><span class="line"></span><br><span class="line">    if month in (4, 6, 9, 11):</span><br><span class="line">        return 30</span><br><span class="line">    else:</span><br><span class="line">        return 31</span><br><span class="line"></span><br><span class="line">a = &#x27;2020-04&#x27;.split(&#x27;-&#x27;)</span><br><span class="line">year = int(a[0])</span><br><span class="line">month = int(a[1])</span><br><span class="line">print(get_month_days(year,month))</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<h2 id="96、Django获取favicon-ico图标"><a href="#96、Django获取favicon-ico图标" class="headerlink" title="96、Django获取favicon.ico图标"></a>96、Django获取favicon.ico图标</h2><p>制作一个ico文件，使用PS或者某些在线生成ico的网站</p>
<p>将此文件命名为“favicon.ico”后放在static/下</p>
<p><img src="https://img-blog.csdnimg.cn/20200805104730363.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>在urls.py中定义路由：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line">from django.views.generic import RedirectView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">	# 访问favicon.ico 网站图标</span><br><span class="line">    path(&quot;favicon.ico&quot;,RedirectView.as_view(url=&#x27;static/favicon.ico&#x27;)),</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="97、django-静态文件配置"><a href="#97、django-静态文件配置" class="headerlink" title="97、django 静态文件配置"></a>97、django 静态文件配置</h2><p>settings.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &#x27;/static/&#x27;</span><br><span class="line"># 添加静态资源路由地址</span><br><span class="line">STATICFILES_DIRS = [</span><br><span class="line">    os.path.join(BASE_DIR, &#x27;static&#x27;),</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"># 使用python manage.py collectstatic收集静态文件时时使用STATIC_ROOT</span><br><span class="line"># STATIC_ROOT = os.path.join(BASE_DIR, &#x27;static&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>urls.py</p>
<pre><code>from django.urls import path, re_path
from django.views.generic import RedirectView
from django.views.static import serve

from &#39;你的项目名称&#39; import settings
urlpatterns = [
   
    path(&quot;favicon.ico&quot;,RedirectView.as_view(url=&#39;static/favicon.ico&#39;)),
    re_path(&#39;static/(?P&lt;path&gt;.*)$&#39;, serve, &#123;&#39;document_root&#39;: settings.STATICFILES_DIRS[0]&#125;),
    
]
</code></pre>
<h2 id="98、django-JsonResponse返回中文时显示unicode编码（-u67e5-u8be2）"><a href="#98、django-JsonResponse返回中文时显示unicode编码（-u67e5-u8be2）" class="headerlink" title="98、django JsonResponse返回中文时显示unicode编码（\u67e5\u8be2）"></a>98、django JsonResponse返回中文时显示unicode编码（\u67e5\u8be2）</h2><p>原因<br>这个unicode编码，是python3默认返回的编码。</p>
<p>解决方案<br>JsonResponse里面有个参数json_dumps_params，设置为json_dumps_params={‘ensure_ascii’:False}即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;&#x27;msg&#x27;: &#x27;创建成功&#x27;,&#125;</span><br><span class="line">return JsonResponse(data=data, json_dumps_params=&#123;&#x27;ensure_ascii&#x27;: False&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="99、获取当前时间月份的首日与最后一天"><a href="#99、获取当前时间月份的首日与最后一天" class="headerlink" title="99、获取当前时间月份的首日与最后一天"></a>99、获取当前时间月份的首日与最后一天</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import calendar</span><br><span class="line"></span><br><span class="line">def get_month_start_and_end(date=datetime.datetime.now()):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    获取当前时间的月份首日与最后一天</span><br><span class="line">    :param date:</span><br><span class="line">    :return: (首日，最后一天)</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    year, month = str(date).split(&#x27;-&#x27;)[0], str(date).split(&#x27;-&#x27;)[1]</span><br><span class="line">    end = calendar.monthrange(int(year), int(month))[1]</span><br><span class="line">    return f&#x27;&#123;year&#125;-&#123;month&#125;-01&#x27;, f&#x27;&#123;year&#125;-&#123;month&#125;-&#123;end&#125;&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="100、xadmin后台批量操作"><a href="#100、xadmin后台批量操作" class="headerlink" title="100、xadmin后台批量操作"></a>100、xadmin后台批量操作</h2><p>adminx.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import xadmin</span><br><span class="line">from django.db.models import  Sum</span><br><span class="line">from xadmin.plugins.actions import BaseActionView</span><br><span class="line"></span><br><span class="line">class MyCountFeeAction(BaseActionView):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">        用户余额统计</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">    action_name = &quot;countuserfee&quot;  #: 相当于这个 Action 的唯一标示, 尽量用比较针对性的名字</span><br><span class="line">    description = u&#x27;统计用户总余额&#x27;  #: 描述, 出现在 Action 菜单中, 可以使用 ``%(verbose_name_plural)s`` 代替 Model 的名字.</span><br><span class="line">    model_perm = &#x27;view&#x27;  # 权限</span><br><span class="line"></span><br><span class="line">    def do_action(self, queryset):</span><br><span class="line">        all_balance = MallUser.objects.all().aggregate(Sum(&#x27;balance&#x27;))</span><br><span class="line">        return HttpResponse(f&#x27;用户总余额&#123;all_balance&#125;&#x27;)</span><br><span class="line">class UserAdmin(object):</span><br><span class="line">    &quot;&quot;&quot;用户信息管理&quot;&quot;&quot;</span><br><span class="line">    list_display = [&#x27;username&#x27;, &#x27;balance&#x27;, &#x27;status&#x27;, &#x27;addtime&#x27;]</span><br><span class="line">    search_fields = [&#x27;username&#x27;, ]</span><br><span class="line">    list_filter = [&#x27;status&#x27;, &#x27;addtime&#x27;]</span><br><span class="line">    list_per_page = 30  # 默认每页数量</span><br><span class="line">    model_icon = &#x27;fa fa-user&#x27;</span><br><span class="line">    list_editable = [&#x27;status&#x27;]</span><br><span class="line">    ordering = [&#x27;-addtime&#x27;]</span><br><span class="line">    actions = [ MyCountFeeAction]  # 添加批量选择操作</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200812233442373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="101、xadmin过滤器外键显示特定值（比如只能过滤自己与超级管理员定义的数据）"><a href="#101、xadmin过滤器外键显示特定值（比如只能过滤自己与超级管理员定义的数据）" class="headerlink" title="101、xadmin过滤器外键显示特定值（比如只能过滤自己与超级管理员定义的数据）"></a>101、xadmin过滤器外键显示特定值（比如只能过滤自己与超级管理员定义的数据）</h2><p>首先，修改xadmin源码，修改xadmin/filters.py,在401行，做如下修改，</p>
<pre><code>把self.lookup_choices = field.get_choices(include_blank=False)
改为：

# 调用自定义的方法
if hasattr(model_admin, &#39;&#123;field&#125;_choices&#39;.format(field=field.name)):
        self.lookup_choices = getattr(model_admin, &#39;&#123;field&#125;_choices&#39;.format(field=field.name))(field, request,params, model,model_admin,field_path)
    else:
        self.lookup_choices = field.get_choices(include_blank=False)
</code></pre>
<p>如图:</p>
<p><img src="https://img-blog.csdnimg.cn/20200812234011656.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>然后，在adminx.py中定义过滤的方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import xadmin</span><br><span class="line">from django.db.models import  Q, Sum</span><br><span class="line">from xadmin.plugins.actions import BaseActionView</span><br><span class="line"></span><br><span class="line">class MeasurePointAdmin(object):</span><br><span class="line">    # search_fields = [&#x27;user__name&#x27;, &#x27;user__account&#x27;]  # 检索字段</span><br><span class="line">    list_display = [&#x27;num&#x27;, &#x27;elevation&#x27;, &#x27;correct_num&#x27;, &#x27;cumulative_amount&#x27;]</span><br><span class="line">    list_filter = [&#x27;user&#x27;, &#x27;is_default&#x27;, &#x27;create_time&#x27;]  # 分组过滤的字段</span><br><span class="line">    list_editable = [&#x27;num&#x27;, &#x27;elevation&#x27;, &#x27;correct_num&#x27;, &#x27;cumulative_amount&#x27;]</span><br><span class="line">    ordering = (&#x27;id&#x27;,)  # 设置默认排序字段，负号表示降序排序</span><br><span class="line">    list_per_page = 30  # 默认每页显示多少条记录，默认是100条</span><br><span class="line">    model_icon = &#x27;fa fa-users&#x27;  # 左侧小图标</span><br><span class="line">    readonly_fields = [&#x27;user&#x27;, &#x27;is_default&#x27;]</span><br><span class="line">    import_excel = True</span><br><span class="line">    actions = [MyCountFeeAction]</span><br><span class="line">	</span><br><span class="line">	# 定义的函数名必须是  字段名_choices</span><br><span class="line">    def user_choices(self, field, request, params, model, model_admin, field_path):</span><br><span class="line">        # 超级用户不做控制</span><br><span class="line">        if self.request.user.is_superuser:</span><br><span class="line">            return field.get_choices(include_blank=False)</span><br><span class="line"></span><br><span class="line">        # 过滤器只显示自己与超级管理员</span><br><span class="line">        user_lst = field.related_model._default_manager.filter(Q(id=self.request.user.id) | Q(is_superuser=True))</span><br><span class="line">        # 返回格式 [(&#x27;pk&#x27;,&#x27;标题&#x27;),]</span><br><span class="line">        return [(user.id, user.username) for user in user_lst]</span><br></pre></td></tr></table></figure>

<p>效果:</p>
<p><img src="https://img-blog.csdnimg.cn/2020081223440761.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xtX2lzX2Rj,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h2 id="102、Django中的CSRF局部禁用"><a href="#102、Django中的CSRF局部禁用" class="headerlink" title="102、Django中的CSRF局部禁用"></a>102、Django中的CSRF局部禁用</h2><p>为了避免没有csrf token而产生的403的forbidden错误，可以使用csrf_exempt装饰器来处理POST、GET请求的View, 这种方式是CSRF局部禁用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from django.utils.decorators import method_decorator</span><br><span class="line">from django.views.decorators.csrf import csrf_exempt</span><br><span class="line"></span><br><span class="line">@method_decorator(csrf_exempt)</span><br><span class="line">def update_data(request):</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">    	pass</span><br><span class="line">	elif request.method == &#x27;GET&#x27;:</span><br><span class="line">    	pass</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="103、使用python命令创建django项目"><a href="#103、使用python命令创建django项目" class="headerlink" title="103、使用python命令创建django项目"></a>103、使用python命令创建django项目</h2><p>创建django项目<br>方式一：直接打开pycharm创建，选择file-&gt;new project-&gt;django<br>方式二：通过命令创建<br>先创建虚拟环境：python -m venv django_venv<br>然后导入django库：pip install django -i <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a><br>最后使用命令创建：django-admin startproject my_django_project</p>
<h2 id="104、-二维列表、二维数组行求和与列求和"><a href="#104、-二维列表、二维数组行求和与列求和" class="headerlink" title="104、 二维列表、二维数组行求和与列求和"></a>104、 二维列表、二维数组行求和与列求和</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from functools import reduce</span><br><span class="line"></span><br><span class="line"># 二维数组，对列和行求和</span><br><span class="line">a = [</span><br><span class="line">    [&#x27;&#x27;, 0, &#x27;&#x27;, 1, 4.1],</span><br><span class="line">    [&#x27;&#x27;, 0, &#x27;&#x27;, &#x27;&#x27;, 4],</span><br><span class="line">    [&#x27;123&#x27;, 0, &#x27;&#x27;, 3, 4, 6,7],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def aa(x, y):</span><br><span class="line">    x = 0 if isinstance(x, str) else x</span><br><span class="line">    y = 0 if isinstance(y, str) else y</span><br><span class="line">    return x + y</span><br><span class="line"></span><br><span class="line"># 对行求和</span><br><span class="line">row_sum = [reduce(aa, i) for i in a]</span><br><span class="line"># 对列求和，只能处理相同长度的子元素</span><br><span class="line">column_sum_1 = [reduce(aa, i) for i in zip(*a)]</span><br><span class="line"># 对列求和，可以处理不同长度的子元素</span><br><span class="line">column_sum_2 = list(dict(pd.DataFrame(a).fillna(0).apply(lambda x: &#x27;&#x27; if any(isinstance(d, str) for d in x) else round(x.sum(), 2))).values())</span><br><span class="line">print(&#x27;行求和：&#123;&#125;\r\n列求和(相同长度)：&#123;&#125;\r\n列求和：&#123;&#125;&#x27;.format(row_sum, column_sum_1, column_sum_2))</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">行求和：[5.1, 4, 20]</span><br><span class="line">列求和(相同长度)：[0, 0, 0, 4, 12.1]</span><br><span class="line">列求和：[&#x27;&#x27;, 0, &#x27;&#x27;, &#x27;&#x27;, 12.1, 6.0, 7.0]</span><br></pre></td></tr></table></figure>

<h2 id="105、获取时间字符串的月份数"><a href="#105、获取时间字符串的月份数" class="headerlink" title="105、获取时间字符串的月份数"></a>105、获取时间字符串的月份数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime</span><br><span class="line">    </span><br><span class="line">def get_months(start_month_str, end_month_str):</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    # 获取时间字符串中的月份数</span><br><span class="line">    :param start_month_str: 开始字符串</span><br><span class="line">    :param end_month_str: 结束字符串</span><br><span class="line">    :return: 月份数</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">    end_month_date = datetime.strptime(end_month_str, &#x27;%Y-%m&#x27;)</span><br><span class="line">    start_month_date = datetime.strptime(start_month_str, &#x27;%Y-%m&#x27;)</span><br><span class="line">    end_year, end_month = end_month_date.year, end_month_date.month</span><br><span class="line">    start_year, start_month = start_month_date.year, start_month_date.month</span><br><span class="line"></span><br><span class="line">    return (end_year - start_year) *12 + (end_month - start_month) + 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">end_month_str = &#x27;2021-02&#x27;</span><br><span class="line">start_month_str = &#x27;2020-07&#x27;</span><br><span class="line">print(get_months(start_month_str, end_month_str))</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">8</span><br></pre></td></tr></table></figure>

<h2 id="106、字符串不足补零"><a href="#106、字符串不足补零" class="headerlink" title="106、字符串不足补零"></a>106、字符串不足补零</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;hello world&#x27;.zfill(15)) # 补0</span><br><span class="line">print(&#x27;hello world&#x27;.rjust(15)) # 右对齐，补空格</span><br><span class="line">print(&#x27;hello world&#x27;.ljust(15)) # 左对齐，补空格</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">0000hello world</span><br><span class="line">    hello world</span><br><span class="line">hello world  </span><br></pre></td></tr></table></figure>

<h2 id="107、时间戳转字符串日期"><a href="#107、时间戳转字符串日期" class="headerlink" title="107、时间戳转字符串日期"></a>107、时间戳转字符串日期</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">t1 = time.time()</span><br><span class="line"><span class="built_in">print</span>(t1)</span><br><span class="line"><span class="built_in">print</span>(time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime(t1)))</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"><span class="number">1621741567.082192</span></span><br><span class="line"><span class="number">2021</span>-05-<span class="number">23</span> <span class="number">11</span>:<span class="number">46</span>:07</span><br></pre></td></tr></table></figure>

<p>使用函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># !/usr/bin/python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@contact: 微信 1257309054</span><br><span class="line">@file: 时间戳转日期.py</span><br><span class="line">@time: 2022/6/27 17:16</span><br><span class="line">@author: LDC</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import time</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 正确10位长度的时间戳可精确到秒，11-14位长度则是包含了毫秒</span><br><span class="line">def int_to_datetime(intValue):</span><br><span class="line">    if len(str(intValue)) == 10:</span><br><span class="line">        # 精确到秒</span><br><span class="line">        timeValue = time.localtime(intValue)</span><br><span class="line">        tempDate = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, timeValue)</span><br><span class="line">        datetimeValue = datetime.datetime.strptime(tempDate, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">    elif 10 &lt; len(str(intValue)) and len(str(intValue)) &lt; 15:</span><br><span class="line">        # 精确到毫秒</span><br><span class="line">        k = len(str(intValue)) - 10</span><br><span class="line">        timetamp = datetime.datetime.fromtimestamp(intValue / (1 * 10 ** k))</span><br><span class="line">        datetimeValue = timetamp.strftime(&quot;%Y-%m-%d %H:%M:%S.%f&quot;)</span><br><span class="line">    else:</span><br><span class="line">        return -1</span><br><span class="line">    return datetimeValue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">time1 = 1656321420</span><br><span class="line">time2 = 1656321086560</span><br><span class="line">print(int_to_datetime(time1))</span><br><span class="line">print(int_to_datetime(time2))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">输出：</span><br><span class="line">2022-06-27 17:17:00</span><br><span class="line">2022-06-27 17:11:26.560000</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="108、列表转字符串"><a href="#108、列表转字符串" class="headerlink" title="108、列表转字符串"></a>108、列表转字符串</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;,&#x27;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>,a)))</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">`<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>`</span><br></pre></td></tr></table></figure>

<h2 id="109、pip国内镜像源"><a href="#109、pip国内镜像源" class="headerlink" title="109、pip国内镜像源"></a>109、pip国内镜像源</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pip install 库名 -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">清华：-i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">阿里云：-i http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"></span><br><span class="line">中国科技大学 -i https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line"></span><br><span class="line">华中理工大学：-i http://pypi.hustunique.com/</span><br><span class="line"></span><br><span class="line">山东理工大学：-i http://pypi.sdutlinux.org/ </span><br><span class="line"></span><br><span class="line">豆瓣：-i http://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure>

<h2 id="110、python把时间字符串转换成刚刚、1天前、3个月前、1年前"><a href="#110、python把时间字符串转换成刚刚、1天前、3个月前、1年前" class="headerlink" title="110、python把时间字符串转换成刚刚、1天前、3个月前、1年前"></a>110、python把时间字符串转换成刚刚、1天前、3个月前、1年前</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def date_interval(date_str):</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    获取时间间隔</span><br><span class="line">    1分钟前，2分钟前，10分钟前，1小时前，2小时前，1天前，2天前，3天前，1个月前，3个月前，1年前，3年前</span><br><span class="line">    :param date_str: 时间字符串</span><br><span class="line">    :return: 字符串</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    date_str = time.strptime(date_str, &#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">    # 将时间元组转换为时间戳</span><br><span class="line">    t = time.mktime(date_str)</span><br><span class="line"></span><br><span class="line">    # 当前时间</span><br><span class="line">    seconds = time.time() - t</span><br><span class="line"></span><br><span class="line">    years = int(seconds // (60 * 60 * 24 * 365))</span><br><span class="line">    if years:</span><br><span class="line">        return &#x27;&#123;&#125;年前&#x27;.format(years)</span><br><span class="line">    months = int(seconds // (60 * 60 * 24 * 30))</span><br><span class="line">    if months:</span><br><span class="line">        return &#x27;&#123;&#125;月前&#x27;.format(months)</span><br><span class="line">    days = int(seconds // (60 * 60 * 24))</span><br><span class="line">    if days:</span><br><span class="line">        return &#x27;&#123;&#125;天前&#x27;.format(days)</span><br><span class="line">    hours = int(seconds // (60 * 60))</span><br><span class="line">    if hours:</span><br><span class="line">        return &#x27;&#123;&#125;小时前&#x27;.format(hours)</span><br><span class="line">    minutes = int(seconds // (60))</span><br><span class="line">    if minutes:</span><br><span class="line">        return &#x27;&#123;&#125;分钟前&#x27;.format(minutes)</span><br><span class="line">    return &#x27;刚刚&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    date1 = &#x27;2019-07-10 15:27:51&#x27;</span><br><span class="line">    date2 = &#x27;2021-07-10 15:27:51&#x27;</span><br><span class="line">    date3 = &#x27;2021-08-10 15:27:51&#x27;</span><br><span class="line">    date4 = &#x27;2021-08-12 11:01:51&#x27;</span><br><span class="line">    date5 = datetime.datetime.now() + datetime.timedelta(seconds=-3)</span><br><span class="line">    date5 = date5.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">    print(date_interval(date1))</span><br><span class="line">    print(date_interval(date2))</span><br><span class="line">    print(date_interval(date3))</span><br><span class="line">    print(date_interval(date4))</span><br><span class="line">    print(date_interval(date5))</span><br></pre></td></tr></table></figure>

<h2 id="111、Django使用ORM执行sql语句"><a href="#111、Django使用ORM执行sql语句" class="headerlink" title="111、Django使用ORM执行sql语句"></a>111、Django使用ORM执行sql语句</h2><p>通过raw函数执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">alarm_datas = gsm.AlertMessage.objects.raw(&#x27;&#x27;&#x27;</span><br><span class="line">                select am_all.id, am_all.sensor_number</span><br><span class="line">                    FROM alert_message as am_all</span><br><span class="line">                    where </span><br><span class="line">                        am_all.real=&#x27;1&#x27;</span><br><span class="line">                        and am_all.is_show=1</span><br><span class="line">                    order by am_all.alarm_level desc</span><br><span class="line">                &#x27;&#x27;&#x27;)</span><br><span class="line">for ad in alarm_datas:</span><br><span class="line">	print(ad.sensor_number)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="112、Django通过变量字段获取数据"><a href="#112、Django通过变量字段获取数据" class="headerlink" title="112、Django通过变量字段获取数据"></a>112、Django通过变量字段获取数据</h2><p>通过方法<code>__getattribute__</code>来获取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">alert_messages = AlertMessage.objects.filter(real=0)</span><br><span class="line">am_fields = [&#x27;id&#x27;, &#x27;real&#x27;, &#x27;name&#x27;]</span><br><span class="line">for am in alert_messages:</span><br><span class="line">	for i in range(len(am_fields)):</span><br><span class="line">		print(am_fields[i], am.__getattribute__(am_fields[i]))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="113、Django查询变量字段、更新变量字段"><a href="#113、Django查询变量字段、更新变量字段" class="headerlink" title="113、Django查询变量字段、更新变量字段"></a>113、Django查询变量字段、更新变量字段</h2><p>通过<code>**&#123;变量名:值&#125;</code>来操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">field = &#x27;device_code&#x27;</span><br><span class="line"># 查询</span><br><span class="line">device_infos = gsm.DeviceInfo.objects.filter(**&#123;field: &#x27;012&#x27;&#125;)</span><br><span class="line"># 更新</span><br><span class="line">gsm.DeviceInfo.objects.filter(device_code=&#x27;012&#x27;).update(**&#123;field : &#x27;0&#x27;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="114、vue生成dist文件"><a href="#114、vue生成dist文件" class="headerlink" title="114、vue生成dist文件"></a>114、vue生成dist文件</h2><p>安装npm，到<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">官网下载</a><br>在vue项目下打开cmd，输入命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>如果报错，npm ERR! missing script: build，<br>则使用以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build:prod</span><br></pre></td></tr></table></figure>

<p>具体看package.json</p>
<p><img src="https://img-blog.csdnimg.cn/eff15dcd4c1d499f9641d0ac25c09bc0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5Lic5pyo5pyI,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="115、python获取电脑磁盘、CPU、内存使用情况"><a href="#115、python获取电脑磁盘、CPU、内存使用情况" class="headerlink" title="115、python获取电脑磁盘、CPU、内存使用情况"></a>115、python获取电脑磁盘、CPU、内存使用情况</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import psutil</span><br><span class="line">#  pip install psutil</span><br><span class="line"></span><br><span class="line"># 获取本机磁盘使用率和剩余空间G信息</span><br><span class="line">def get_disk_info():</span><br><span class="line">    # 循环磁盘分区</span><br><span class="line">    content = &quot;&quot;</span><br><span class="line">    for disk in psutil.disk_partitions():</span><br><span class="line">        # 读写方式 光盘 or 有效磁盘类型</span><br><span class="line">        if &#x27;cdrom&#x27; in disk.opts or disk.fstype == &#x27;&#x27;:</span><br><span class="line">            continue</span><br><span class="line">        disk_name_arr = disk.device.split(&#x27;:&#x27;)</span><br><span class="line">        disk_name = disk_name_arr[0]</span><br><span class="line">        disk_info = psutil.disk_usage(disk.device)</span><br><span class="line">        # 磁盘剩余空间，单位G</span><br><span class="line">        free_disk_size = disk_info.free//1024//1024//1024</span><br><span class="line">        # 当前磁盘使用率和剩余空间G信息</span><br><span class="line">        info = &quot;&#123;&#125;盘使用率：&#123;&#125;%%， 剩余空间：&#123;&#125;G &quot;.format(disk_name, str(disk_info.percent), free_disk_size)</span><br><span class="line">        # 拼接多个磁盘的信息</span><br><span class="line">        content = content + info</span><br><span class="line">    print(content)</span><br><span class="line"></span><br><span class="line"># cpu信息</span><br><span class="line">def get_cpu_info():</span><br><span class="line">    cpu_percent = psutil.cpu_percent(interval=1)</span><br><span class="line">    cpu_info = &quot;CPU使用率：%i%%&quot; % cpu_percent</span><br><span class="line">    print(cpu_info)</span><br><span class="line"></span><br><span class="line"># 内存信息</span><br><span class="line">def get_memory_info():</span><br><span class="line">    virtual_memory = psutil.virtual_memory()</span><br><span class="line">    used_memory = virtual_memory.used/1024/1024/1024</span><br><span class="line">    free_memory = virtual_memory.free/1024/1024/1024</span><br><span class="line">    memory_percent = virtual_memory.percent</span><br><span class="line">    memory_info = &quot;内存使用：%0.2fG，使用率%0.1f%%，剩余内存：%0.2fG&quot; % (used_memory, memory_percent, free_memory)</span><br><span class="line">    print(memory_info)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    get_disk_info()</span><br><span class="line">    get_cpu_info()</span><br><span class="line">    get_memory_info()</span><br></pre></td></tr></table></figure>

<h2 id="116、max比较字典列表"><a href="#116、max比较字典列表" class="headerlink" title="116、max比较字典列表"></a>116、max比较字典列表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">使用max函数比较字典列表对象</span><br><span class="line">需求：找出用户组最大id的字典</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">def com_id(f):</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    比较用用户ids列表</span><br><span class="line">    :param f: 字典</span><br><span class="line">    :return: 返回最大的用户id</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    return max(f[&#x27;user_ids&#x27;])</span><br><span class="line"></span><br><span class="line">friends_added = [</span><br><span class="line">        &#123;&#x27;user_ids&#x27;: [1, 2], &#x27;create_at&#x27;: &#x27;2020-01-01&#x27;&#125;,</span><br><span class="line">        &#123;&#x27;user_ids&#x27;: [3, 6], &#x27;create_at&#x27;: &#x27;2020-01-02&#x27;&#125;,</span><br><span class="line">        &#123;&#x27;user_ids&#x27;: [2, 1], &#x27;create_at&#x27;: &#x27;2020-02-02&#x27;&#125;,</span><br><span class="line">        &#123;&#x27;user_ids&#x27;: [4, 1], &#x27;create_at&#x27;: &#x27;2020-02-02&#x27;&#125;,</span><br><span class="line">    ]</span><br><span class="line"># max函数中使用key参数，指定自定义函数来比较</span><br><span class="line">item = max(friends_added, key=com_id)</span><br><span class="line">item_1 = max(friends_added, key=lambda f: max(f[&#x27;user_ids&#x27;])) # com_id可以转成lambda函数</span><br><span class="line">print(item)</span><br><span class="line">print(item_1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">&#123;&#x27;user_ids&#x27;: [3, 6], &#x27;create_at&#x27;: &#x27;2020-01-02&#x27;&#125;</span><br><span class="line">&#123;&#x27;user_ids&#x27;: [3, 6], &#x27;create_at&#x27;: &#x27;2020-01-02&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="117、django查询表的具体字段"><a href="#117、django查询表的具体字段" class="headerlink" title="117、django查询表的具体字段"></a>117、django查询表的具体字段</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ExampleModel.objects.values(&#x27;id&#x27;, &#x27;username&#x27;)</span><br><span class="line"># 返回的结果是QuerySet， 里面的元素是dict格式</span><br><span class="line"># [&#123;&#x27;id&#x27;:1, &#x27;username&#x27;: &#x27;Austin&#x27;&#125;, &#123;&#x27;id&#x27;:2, &#x27;username&#x27;:&#x27;Sam&#x27;&#125;, ...]</span><br><span class="line"># 相当于SQL中的SELECT id, username FROM ......, </span><br><span class="line"># 只返回对应属性（字段）的值</span><br></pre></td></tr></table></figure>

<h2 id="118、MySQL查询数据添加自增序号"><a href="#118、MySQL查询数据添加自增序号" class="headerlink" title="118、MySQL查询数据添加自增序号"></a>118、MySQL查询数据添加自增序号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set @i = 0;</span><br><span class="line">select waveform, &#x27;沿桥风吹&#x27; as label ,(@i:=@i+1) xh from alert_message where is_real=1 and node_id=138</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="119、MySQL-时间截取年月日"><a href="#119、MySQL-时间截取年月日" class="headerlink" title="119、MySQL 时间截取年月日"></a>119、MySQL 时间截取年月日</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select id,</span><br><span class="line">			addtime, </span><br><span class="line">			date_format(addtime,&#x27;%Y-%m-%d&#x27;) as short_time </span><br><span class="line">	from alert_message </span><br><span class="line">	where date_format(addtime,&#x27;%Y-%m-%d&#x27;) = &#x27;2022-03-13&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/37cec67fa1e1458f9aba1b745600a493.png" alt="在这里插入图片描述"></p>
<h2 id="120、-列表取奇数下标值"><a href="#120、-列表取奇数下标值" class="headerlink" title="120、 列表取奇数下标值"></a>120、 列表取奇数下标值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list1=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;奇数下标值&#x27;</span>,list1[<span class="number">1</span>::<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">奇数下标值 [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="121、列表取偶数下标值"><a href="#121、列表取偶数下标值" class="headerlink" title="121、列表取偶数下标值"></a>121、列表取偶数下标值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list1=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;偶数下标值&#x27;</span>,list1[::<span class="number">2</span>])</span><br><span class="line">偶数下标值 [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="122、列表相同元素分类、分组"><a href="#122、列表相同元素分类、分组" class="headerlink" title="122、列表相同元素分类、分组"></a>122、列表相同元素分类、分组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line">data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br><span class="line">a =[<span class="built_in">list</span>(group) <span class="keyword">for</span> key, group <span class="keyword">in</span> itertools.groupby(data)]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">[[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>], [<span class="number">1</span>], [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]]</span><br></pre></td></tr></table></figure>

<h2 id="123、ubuntu切换用户"><a href="#123、ubuntu切换用户" class="headerlink" title="123、ubuntu切换用户"></a>123、ubuntu切换用户</h2><p>1）从user用户切换到root用户<br>sudo su<br>2）从root用户切回user用户<br>su user (user是你自己安装时候的用户名)，或是直接输入exit，也可Ctrl+D组合键推出</p>
<h2 id="124、numpy二维数组获取某一列"><a href="#124、numpy二维数组获取某一列" class="headerlink" title="124、numpy二维数组获取某一列"></a>124、numpy二维数组获取某一列</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = [</span><br><span class="line">    [1, 2, 3, 4, 5, 6],</span><br><span class="line">    [7, 8, 9, 10, 11, 12],</span><br><span class="line">    [13.2, 14.8, 15.9, 16.10, 16.11, 17.12],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">a_np = np.array(a)  # 把二维列表转成numpy数组</span><br><span class="line">print(&#x27;第一行&#x27;, a_np[0].tolist())  # 获取第一行</span><br><span class="line">print(&#x27;第一列&#x27;, a_np[:, 0].tolist())  # 获取第一列</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">第一行 [1.0, 2.0, 3.0, 4.0, 5.0, 6.0]</span><br><span class="line">第一列 [1.0, 7.0, 13.2]</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python/" class="post-title-link" itemprop="url">python基础一</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-19 10:32:24" itemprop="dateModified" datetime="2022-05-19T10:32:24+08:00">2022-05-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python基础一"><a href="#python基础一" class="headerlink" title="python基础一"></a>python基础一</h1><ol>
<li>面向对象：<br>类别：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class Water:</span><br><span class="line">	Pass</span><br></pre></td></tr></table></figure>
对象：<br>农夫山泉：具体</li>
<li>解释型：<br>解释型和编译型：<br>编译型如C：只在编译的平台上运行<br>解释型如Python：跨平台<br>Windows —–&gt;&gt; Linux(运行)<br>开发                部署</li>
</ol>
<p>解释器：<br>Windows —–&gt;&gt; 软件：Python3.6，python3.7….<br>Linux —–&gt;&gt; 软件：Python3.6，python3.7….<br>Python 3.6.5 （解释器 + lib(内置库) + pip(包管理器：pip.exe)）<br>可扩展性：<br>Pip管理：增加，删除</p>
<h2 id="DOS命令："><a href="#DOS命令：" class="headerlink" title="DOS命令："></a>DOS命令：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;python</span><br><span class="line">进入python环境，写python的程序</span><br><span class="line">&gt;&gt;exit() 退出环境</span><br><span class="line"></span><br><span class="line">&gt;pip list 列出匹配管理的包有哪些</span><br><span class="line">&gt;pip install 包名 （pip install redis）默认安装在python目录的site-packages文件夹下</span><br><span class="line">&gt;pip uninstall 包名 卸载包</span><br><span class="line">&gt;pip -V 查看版本</span><br><span class="line">&gt;pip freeze &gt; requirements.txt 将项目依赖的包输出到指定的requirements.txt</span><br><span class="line">&gt;pip install -r requirements.txt 使用pip安装requirements.txt中依赖的文件</span><br></pre></td></tr></table></figure>
<h2 id="安装问题："><a href="#安装问题：" class="headerlink" title="安装问题："></a>安装问题：</h2><ol>
<li>Runtime error 缺失程序 python — windows少了补丁</li>
<li>python不是内部或外部命令 —<br>(1)    配置环境变量，把python.exe和pip.exe的文件路径添加到系统变量里的PATH，用分号隔开。<br>(2)    卸载重装，删除安装目录<br>(3)    升级pip:  python -m pip install –upgrade pip</li>
</ol>
<p>输入代码：<br>（1）进入环境：（cmd交互式）<br>终端输入：<br>Python: 写python代码<br>优点：所见即所得<br>缺点：无法保存，代码长则无法维护<br>（2）python源文件：（sublime, pycharm）<br>xxx.py 扩展名是py<br>优点：可以长期保存源程序，便于维护代码<br>如果代码长且多，则可以快速格式化<br>代码的执行顺序：从左到右，从上到下</p>
<p>需求：输出以下内容：<br>Xxx你好：<br>请点击此链接用于激活用户：激活用户<br>单词：<br>Print() 打印<br>Defined(define) 定义<br>SyntaxError 语法错误<br>NameError 名字错误<br>    Invalid character 无效字符<br>Identifier 标识符<br>Directory 文件夹/目录<br>Built-in/ builtins 内置的<br>Raise 抛出<br>Operator 运算符<br>Identity 特点，特征<br>Sequence 序列</p>
<p>弱类型（python）：声明的变量赋什么值就是什么类型<br>Money = 100<br>Money = 9.9<br>Money = ‘9.9元’<br>强类型（java）：<br>int money = 100<br>float money = 9.9</p>
<h2 id="变量命名规则："><a href="#变量命名规则：" class="headerlink" title="变量命名规则："></a>变量命名规则：</h2><p>标识符（age=18）<br>由字母，数字，下划线组成，不能以数字开头<br>严格区分大小写<br>不能包含python的关键字<br>查看python有哪些关键字？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import keyword</span><br><span class="line">&gt;&gt;&gt; print(keyword.kwlist)</span><br><span class="line">[&#x27;False&#x27;, &#x27;None&#x27;, &#x27;True&#x27;, &#x27;and&#x27;, &#x27;as&#x27;, &#x27;assert&#x27;, &#x27;async&#x27;, &#x27;await&#x27;, &#x27;break&#x27;, &#x27;class&#x27;, &#x27;continue&#x27;, &#x27;def&#x27;, &#x27;del&#x27;, &#x27;elif&#x27;, &#x27;else&#x27;, &#x27;except&#x27;, &#x27;finally&#x27;, &#x27;for&#x27;, &#x27;from&#x27;, &#x27;global&#x27;, &#x27;if&#x27;, &#x27;import&#x27;, &#x27;in&#x27;, &#x27;is&#x27;, &#x27;lambda&#x27;, &#x27;nonlocal&#x27;, &#x27;not&#x27;, &#x27;or&#x27;, &#x27;pass&#x27;, &#x27;raise&#x27;, &#x27;return&#x27;, &#x27;try&#x27;, &#x27;while&#x27;, &#x27;with&#x27;, &#x27;yield&#x27;]</span><br></pre></td></tr></table></figure>
<p>建议：见名知意<br>驼峰式：getName，payMoney<br>如果一个名字由多个单词组成，则除第一个单词之外以后的每个单词的首字母大写<br>类：GetName，如果定义类名，每个单词首字母大写<br>下划线式：<br>Python中变量，函数的命名<br>get_name，pay_money</p>
<p>Python3支持UTF-8字符集，其标识符可以使用UTF-8所能表示的多种语言的字符。<br>Python2.x 对中文支持较差，如果使用中文字符或中文变量，则需要在源程序中第一行添加“#coding:utf-8”，并将源文件保存为UTF-8字符集<br><img src="/utf8.jpg"></p>
<h2 id="Operator-运算符："><a href="#Operator-运算符：" class="headerlink" title="Operator 运算符："></a>Operator 运算符：</h2><p>赋值运算符：<br>算术运算符<br>关系运算符<br>逻辑运算符<br>位运算符</p>
<p>单词：</p>
<p>Built-in/ builtins 内置的<br>Raise 抛出<br>Operator 运算符<br>Identity 特点，特征</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"># print函数</span><br><span class="line"># 1.用法</span><br><span class="line">print(&#x27;hello world!&#x27;)</span><br><span class="line">name = &#x27;小白&#x27;</span><br><span class="line">print(name)</span><br><span class="line"></span><br><span class="line"># 2.用法：print(name,age,gender)</span><br><span class="line">age = 18</span><br><span class="line">gender = &#x27;boy&#x27;</span><br><span class="line"></span><br><span class="line">print(name,age,gender) # sep默认的分割是空格</span><br><span class="line"></span><br><span class="line"># 3.用法： print(value, value, value,..., sep=&#x27; &#x27;,end=&#x27;\n&#x27;)</span><br><span class="line">print(name,age,gender,sep=&#x27;_&#x27;) # sep=&#x27;*&#x27; sep=&#x27;$&#x27; sep=&#x27;-&#x27;</span><br><span class="line"></span><br><span class="line"># 转义字符： \n 换行； \t 制表符； \r 回车； \&#x27;； \&quot;； \\</span><br><span class="line">print(&#x27;hello\nkitty&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;AAA&#x27;,end=&#x27;&#x27;)</span><br><span class="line">print(&#x27;BBB&#x27;,end=&#x27;&#x27;)</span><br><span class="line">print(&#x27;CCC&#x27;,end=&#x27;\n&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;Dear customer:\n\tplease click the hyperlinks to activate your account: Activate!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;Dear customer:\n&#x27;, &#x27;\tplease click the hyperlinks to activate your account: Activate!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;George says: \&#x27; I want to eat ice cream! \&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;George says: &quot;I want to play dinosaur!&quot;&#x27;)</span><br><span class="line"></span><br><span class="line">print(&quot;George says: &#x27;I want to sleep!&#x27;&quot;)</span><br><span class="line"></span><br><span class="line">print(&#x27;hello\py\thon&#x27;)</span><br><span class="line"></span><br><span class="line">print(r&#x27;hello\py\thon&#x27;) # r&#x27;&#x27; raw 原样输出字符串的内容，即使有转义字符也不会转义</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">补充：\r是Carriage return，“打印头\光标”回到首行，如果不加\n直接写\r那么这行代码就会被覆盖打印。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">字符串：</span><br><span class="line"></span><br><span class="line"># 定义常量</span><br><span class="line"># java: final</span><br><span class="line"># pyrhon:命名的时候，名字是大写</span><br><span class="line"></span><br><span class="line">NAME = &#x27;Jack&#x27;</span><br><span class="line">print(NAME)</span><br><span class="line">print(&#x27;hello&#x27;)</span><br><span class="line"></span><br><span class="line">value = &#x27;hello&#x27;</span><br><span class="line">print(value)</span><br><span class="line"></span><br><span class="line">value = &#x27;python&#x27;</span><br><span class="line">print(value)</span><br><span class="line"></span><br><span class="line">value = &quot;hello python&quot;</span><br><span class="line">print(value)</span><br><span class="line"></span><br><span class="line"># 字符串表示： &#x27;&#x27;;  &quot;&quot;;  &#x27;&#x27;&#x27; &#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">message = &#x27;[taobao] You are trying using verification code to login, \nthe code is: 8906,&#x27; \</span><br><span class="line">		  &#x27;\nit involves personal account security, so Please keep it confidential.&#x27;</span><br><span class="line">print(message)</span><br><span class="line"></span><br><span class="line">message1 = &#x27;&#x27;&#x27;</span><br><span class="line">[taobao] </span><br><span class="line">You are trying using verification code to login,</span><br><span class="line">the code is: 8906,</span><br><span class="line">it involves personal account security, so Please keep it confidential.</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(message1)</span><br><span class="line"></span><br><span class="line">email_message = &#x27;&#x27;&#x27;</span><br><span class="line">Dear Zhaofei:</span><br><span class="line">	The TiktoK account you just registrated has not yet been activated, </span><br><span class="line">please click below links to activate it!</span><br><span class="line">	Click this: Activate!!!</span><br><span class="line">	Once the account is activated, you can watch all the videos online!</span><br><span class="line"></span><br><span class="line">from: Tiktok team</span><br><span class="line">	 </span><br><span class="line">	 date: 2019/05/29</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(email_message)</span><br><span class="line"></span><br><span class="line"># 三引号的作用：1.定义一个变量并赋值字符串时，需要保留字符串的格式的时候使用</span><br><span class="line">#				  2.作为多行注释的时候使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">字符串与变量使用：</span><br><span class="line"></span><br><span class="line"># 格式化输出</span><br><span class="line"></span><br><span class="line">person = &#x27;The Great Sage&#x27;</span><br><span class="line">address = &#x27;4 / F, Zhicheng Science and Technology Building, &#x27; \</span><br><span class="line">		  &#x27;\nZhongguancun, Haidian District, Beijing&#x27;</span><br><span class="line">phone = &#x27;15858588888&#x27;</span><br><span class="line">num = 5</span><br><span class="line"></span><br><span class="line"># 用&#x27;+&#x27;符号拼接，字符串 + 字符串 --&gt; OK ； 字符串 + 整型 --&gt; TypeError</span><br><span class="line">print(&#x27;The order is addressed to:&#x27;+person+ \</span><br><span class="line">	&#x27;\nReceiver address is:&#x27;+address+ \</span><br><span class="line">	&#x27;\nContacte:&#x27;+phone+&#x27;\nQuantity of Goods:&#x27;+str(num))</span><br><span class="line"></span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line"># 用%s占位符，后面依序添加对应变量%()</span><br><span class="line">print(&#x27;The order is addressed to:%s, \</span><br><span class="line">	\nReceiver address is:%s, \nContacte:%s, \</span><br><span class="line">	\nQuantity of Goods:%s&#x27; %(person, address, phone, num))</span><br><span class="line"></span><br><span class="line"># 格式化输出：%s  %d  %f</span><br><span class="line"></span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line"># 用f&#x27;...&#123;变量&#125;...&#x27; 格式化输出</span><br><span class="line"></span><br><span class="line">print(f&#x27;The order is addressed to:&#123;person&#125;, \</span><br><span class="line">	\nReceiver address is:&#123;address&#125;, \nContacte:&#123;phone&#125;, \</span><br><span class="line">	\nQuantity of Goods:&#123;num&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求：打印个人信息</span><br><span class="line"></span><br><span class="line">name = &#x27;admin&#x27;</span><br><span class="line">age = 18</span><br><span class="line">clazz = &#x27;python&#x27;</span><br><span class="line"></span><br><span class="line">msg = &#x27;&#x27;&#x27;</span><br><span class="line">Profile:</span><br><span class="line">My name is %s,</span><br><span class="line">I&#x27;m %s years old,</span><br><span class="line">and studying in class %s</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27; %(name, age, clazz)</span><br><span class="line"></span><br><span class="line">print(msg)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">age = 19</span><br><span class="line"># str(int) ---&gt; (int -&gt; str)  强制类型转换</span><br><span class="line">print(&#x27;age is:&#x27;+str(age))</span><br><span class="line">print(&#x27;age is:%s&#x27; % age) # %s --&gt; str简写  底层：str(age)</span><br><span class="line">isMarry=False # 布尔类型  </span><br><span class="line">print(&#x27;Marry or not? Answer:%s&#x27; %isMarry) # str(False) ---&gt; &#x27;False&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># %d  digit  数字</span><br><span class="line">print(&#x27;age is:%d&#x27; % age)</span><br><span class="line"></span><br><span class="line">age = &#x27;18&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;age is:%d&#x27; % int(age))</span><br><span class="line"></span><br><span class="line">age = 18.5 # int(18.5) ---&gt; 取整数</span><br><span class="line">print(&#x27;age is:%d&#x27; % age)</span><br><span class="line"></span><br><span class="line">year = 2019</span><br><span class="line">print(&#x27;The year is:%06d&#x27; % year)</span><br><span class="line"></span><br><span class="line"># %f  float 小数点后面的位数， 而且是四舍五入</span><br><span class="line">salary=8899.99</span><br><span class="line">print(&#x27;my salary is:%.2f&#x27; % salary)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串的格式化输出</span><br><span class="line"># 方式：1.使用占位符；2.format()函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># format是一个字符串中的函数 &#x27;&#x27;.format()  此处的‘ . ’表示调用</span><br><span class="line">age = 2</span><br><span class="line">s=&#x27;already&#x27;</span><br><span class="line">message = &#x27;George says:I\&#x27;m &#123;&#125; years old now，&#123;&#125; in kindergarten!&#x27;.format(age,s)</span><br><span class="line">print(message)</span><br><span class="line"></span><br><span class="line">name = &#x27;George&#x27;</span><br><span class="line">age = 3</span><br><span class="line">hobby = &#x27;play dinosaur!&#x27;</span><br><span class="line">money = 5.89</span><br><span class="line"></span><br><span class="line">message = &#x27;&#123;&#125; is &#123;&#125; years old, he likes to &#123;&#125;, \</span><br><span class="line">\nand he has &#123;&#125; yuan pocket money&#x27;.format(name,age,hobby,money)</span><br><span class="line"></span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<h2 id="Operator-运算符：-1"><a href="#Operator-运算符：-1" class="headerlink" title="Operator 运算符："></a>Operator 运算符：</h2><p>赋值运算符：<br>算术运算符<br>关系运算符<br>逻辑运算符<br>位运算符</p>
<h3 id="一，-赋值运算符"><a href="#一，-赋值运算符" class="headerlink" title="一， 赋值运算符"></a>一， 赋值运算符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 1. = </span><br><span class="line">name = &#x27;admin&#x27;</span><br><span class="line"></span><br><span class="line">name1 = name</span><br><span class="line"></span><br><span class="line">print(id(name),name)</span><br><span class="line">print(id(name1),name1)</span><br><span class="line"></span><br><span class="line"># id() 返回内存地址</span><br><span class="line"></span><br><span class="line"># 扩展后的赋值符号： +=  -=  *=  /=  ....</span><br><span class="line"></span><br><span class="line">num = 8</span><br><span class="line">num += 5  # num = num + 5  此时的+表示数学加号</span><br><span class="line">print(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a=&#x27;abc&#x27;</span><br><span class="line">a +=&#x27;ff&#x27;  # a = a + &#x27;ff&#x27;  此时的+表示连接符</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line"># -=, *=, /= 只应用在数值，字符串不支持</span><br></pre></td></tr></table></figure>
<h3 id="二，-算术运算符"><a href="#二，-算术运算符" class="headerlink" title="二，+ - * / 算术运算符"></a>二，+ - * / 算术运算符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 扩展的算术运算符: **  //  %</span><br><span class="line"></span><br><span class="line">print(&#x27;*&#x27; * 10) # 输出成倍字符串</span><br><span class="line"></span><br><span class="line">a=8</span><br><span class="line">b=2</span><br><span class="line"></span><br><span class="line">result = a ** b  # 次方/幂计算</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">result = a // b # 整除</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<h3 id="三，关系运算符-gt-lt-gt-lt"><a href="#三，关系运算符-gt-lt-gt-lt" class="headerlink" title="三，关系运算符 &gt;  &lt;  &gt;= &lt;=  ==  !="></a>三，关系运算符 &gt;  &lt;  &gt;= &lt;=  ==  !=</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">m1=&#x27;hello&#x27;</span><br><span class="line">m2=&#x27;hello&#x27;</span><br><span class="line"></span><br><span class="line">result= m1==m2</span><br><span class="line">print(&#x27;m1==m2&#x27;, result)</span><br><span class="line"></span><br><span class="line">result= m1 != m2</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># is  用于对象/内存地址的比较</span><br><span class="line"></span><br><span class="line">age=20</span><br><span class="line"></span><br><span class="line">age1=20</span><br><span class="line"></span><br><span class="line">print(id(age))</span><br><span class="line">print(id(age1))</span><br><span class="line"></span><br><span class="line">print(age is age1)</span><br><span class="line"></span><br><span class="line">money=2000000</span><br><span class="line">salary=600000</span><br><span class="line"></span><br><span class="line">print(id(money))</span><br><span class="line">print(id(salary))</span><br><span class="line"></span><br><span class="line">print(money is salary)</span><br><span class="line"></span><br><span class="line">大整数对象池。说明：终端是每次执行一次，所以每次的大整数都重新创建，而在pycharm中，每次运行是所有代码都加载都内存中，属于一个整体，所以</span><br><span class="line"> 这个时候会有一个大整数对象池，即处于一个代码块的大整数是同一个对象。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; money=2000000</span><br><span class="line">&gt;&gt;&gt; id(money)</span><br><span class="line">12271392</span><br><span class="line">&gt;&gt;&gt; salary=2000000</span><br><span class="line">&gt;&gt;&gt; id(salary)</span><br><span class="line">12271456</span><br><span class="line">&gt;&gt;&gt; money is salary</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; age=8</span><br><span class="line">&gt;&gt;&gt; id(age)</span><br><span class="line">1446815776</span><br><span class="line">&gt;&gt;&gt; age1=8</span><br><span class="line">&gt;&gt;&gt; id(age1)</span><br><span class="line">1446815776</span><br><span class="line">&gt;&gt;&gt; age is age1</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">Python 对小整数的定义是 [-5, 256] 这些整数对象是提前建立好的，不会被垃圾回收。</span><br></pre></td></tr></table></figure>
<h3 id="四，逻辑运算符-and-or-not"><a href="#四，逻辑运算符-and-or-not" class="headerlink" title="四，逻辑运算符 and   or   not"></a>四，逻辑运算符 and   or   not</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#逻辑与</span><br><span class="line">#逻辑或</span><br><span class="line">#逻辑非</span><br><span class="line"></span><br><span class="line"># 逻辑运算符的运算结果也是返回True  False</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"># 二进制： 0  1</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">      1   1</span><br><span class="line"></span><br><span class="line">8  4  2   1</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">a=3</span><br><span class="line">print(bin(a)) #输出 0b 11</span><br><span class="line"></span><br><span class="line">a=13</span><br><span class="line">print(bin(a)) # 0b 1101</span><br><span class="line"></span><br><span class="line">b=0b10111  # 0b 表示二进制</span><br><span class="line">print(int(b)) # int()转十进制</span><br><span class="line"></span><br><span class="line">c=-8</span><br><span class="line">print(bin(c)) # -0b1000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">-5</span><br><span class="line">5: 0000   0  1  0  1</span><br><span class="line">取反（反码）： 1111  1  0  1  0</span><br><span class="line">加1： 1111  1 0 1 1</span><br><span class="line">字节byte:</span><br><span class="line">0000 0101</span><br><span class="line">一个字节(byte)表示8个二进制位(bit)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">c= 0o6430  # 0o 开头的都是八进制</span><br><span class="line">print(int(c))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">n= 0o6430</span><br><span class="line"></span><br><span class="line">6       4       3       0</span><br><span class="line"></span><br><span class="line">8^3     8^2     8^1     8^0   转十进制： 6*512+4*64+3*8+0=3352</span><br><span class="line"></span><br><span class="line">110     100     011     000   转二进制： 110100011000</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 0x开头表示十六进制  0-9  a-f</span><br><span class="line">d= 0x9ab16</span><br><span class="line">print(int(d))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">n=0x9ab16</span><br><span class="line"></span><br><span class="line">9        a        b        1         6</span><br><span class="line"></span><br><span class="line">1001    1010     1011     0001     0110  # 十六进制转二进制</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&amp;</span><br><span class="line">|</span><br><span class="line">!(~)</span><br><span class="line">^</span><br><span class="line">&lt;&lt;</span><br><span class="line">&gt;&gt;</span><br><span class="line">位运算符</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(3 &amp; 2)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&amp; 与运算  类似 and</span><br><span class="line">1:True   0:False</span><br><span class="line">  </span><br><span class="line">  0000 0011</span><br><span class="line">&amp; 0000 0010</span><br><span class="line">------------</span><br><span class="line">  0000 0010</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> | 或运算  类似 or</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(5 | 3)</span><br><span class="line"></span><br><span class="line">print(~5) # 取反 将十进制的数字对应的二进制进行取反操作</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">  0000 0101</span><br><span class="line"> 取反：</span><br><span class="line">  1111 1010</span><br><span class="line"> 看第一位（第一位是符号位，只要第一位是1就是负数，第一位是0就是正数）</span><br><span class="line"></span><br><span class="line">  1111 1001 # 减一</span><br><span class="line"></span><br><span class="line">  0000 0110 # 取反</span><br><span class="line">      4+2=6 # 转换十进制</span><br><span class="line">      结合前面得出的是负数，结果为-6</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 异或 ^   相同的是0，不同的是1</span><br><span class="line"></span><br><span class="line">print(3 ^ 5)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">3   0000 0011</span><br><span class="line">5   0000 0101</span><br><span class="line">--------------</span><br><span class="line">	0000 0110 = 6</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 左移 &lt;&lt;</span><br><span class="line"></span><br><span class="line">print(2&lt;&lt;1)</span><br><span class="line"></span><br><span class="line">print(2&gt;&gt;1)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">2  0000 0010</span><br><span class="line">   0000 0100 左移一位，右侧补0：4</span><br><span class="line">   左移： m&lt;&lt;n --&gt; m*(2的n次方)</span><br><span class="line"></span><br><span class="line">   0000 0010</span><br><span class="line">   0000 0001 右移一位，左侧符号位补0：1</span><br><span class="line">   右移： m&gt;&gt;n --&gt; m//(2的n次方)取整</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(-0b1000000) # -64</span><br></pre></td></tr></table></figure>

<h2 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># 格式:结果 if 表达式 else 结果</span><br><span class="line">a=6</span><br><span class="line">b=5</span><br><span class="line">result=(a+b) if a&lt;b else (b-a) # 表达式为True取if前面的结果，否则取else后面的结果</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 运算符的优先级</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"> 排序：</span><br><span class="line">**</span><br><span class="line">~</span><br><span class="line">+ - （符号运算符）</span><br><span class="line">* / // %</span><br><span class="line">+ - 加减</span><br><span class="line">&lt;&lt; &gt;&gt;</span><br><span class="line">&amp;</span><br><span class="line">^</span><br><span class="line">|</span><br><span class="line">== != &gt; &gt;= &lt; &lt;=</span><br><span class="line">is  is not</span><br><span class="line">not</span><br><span class="line">and</span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输入: input()函数</span><br><span class="line"># 所输入的都是字符串类型</span><br><span class="line">name = input(&#x27;please input the name: &#x27;) # 阻塞式</span><br><span class="line"></span><br><span class="line">print(name)</span><br></pre></td></tr></table></figure>


<p>变量<br>运算符<br>语句：<br>条件判断语句<br>for循环语句<br>跳转语句</p>
<h2 id="条件语句："><a href="#条件语句：" class="headerlink" title="条件语句："></a>条件语句：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">应用场景： </span><br><span class="line">1. 用户名和密码登录</span><br><span class="line">2. 用户登录验证（看影院信息，判断用户是否登录，没登录则弹出窗口，已登录则看到信息）</span><br><span class="line"></span><br><span class="line">if 条件：</span><br><span class="line">	条件成立执行的语句</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">username=&#x27;admin&#x27; # 没有登录</span><br><span class="line"># python：判断的变量是：&#x27;&#x27;，0，None 默认是False，否则为True</span><br><span class="line"></span><br><span class="line">if username!=&#x27;&#x27;:</span><br><span class="line">	print(&#x27;login success&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;-&#x27; *20)</span><br><span class="line"></span><br><span class="line">num=9</span><br><span class="line"></span><br><span class="line">if num: # 等效if num!=0:</span><br><span class="line">	print(&#x27;--&#x27; *20, &#x27;&gt;&#x27;, num, sep=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 需求：判断年龄是否大于18，并且判断是否输入了用户名，</span><br><span class="line"># 条件满足则打印xxx今年xxx岁</span><br><span class="line"></span><br><span class="line">age= int(input(&#x27;please input your age: &#x27;))</span><br><span class="line">username= input(&#x27;please input your username: &#x27;)</span><br><span class="line"></span><br><span class="line">if age&gt;19 and username:</span><br><span class="line">	print(&#x27;&#123;&#125; is &#123;&#125; years old&#x27;.format(username,age))</span><br><span class="line"></span><br><span class="line">print(&#x27;---game over---&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># if...else...</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">消消乐：</span><br><span class="line">	lv1</span><br><span class="line">	lv2</span><br><span class="line">	....</span><br><span class="line"></span><br><span class="line">  lv1: 免费玩，随便玩</span><br><span class="line">  lv2: 充值  买道具  随便玩</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;*&#x27; *10, &#x27;welcome to game &quot;Eliminate all&quot;&#x27;, &#x27;*&#x27; *10)</span><br><span class="line">level = input(&#x27;please input your level(lv1, lv2): &#x27;)</span><br><span class="line">if level == &#x27;lv1&#x27;:</span><br><span class="line">	print(&#x27;play for free and play to your hearts content&#x27;)</span><br><span class="line">else:</span><br><span class="line">	print(&#x27;Pay-per-view level, please pay to continue&#x27;)</span><br><span class="line">	money = int(input(&#x27;click here to pay(In multiples of 100): &#x27;))</span><br><span class="line">	# if嵌套</span><br><span class="line">	if money%100==0 and money&gt;0:</span><br><span class="line">		print(&#x27;Recharge success, Recharge amount is&#x27;, money)</span><br><span class="line">	else:</span><br><span class="line">		print(&#x27;Recharge fail, recharge amount has to be multiples of 100!&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 随机数</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">print(random.randint(1,10))</span><br><span class="line"></span><br><span class="line"># 需求：猜大小</span><br><span class="line"></span><br><span class="line">ran = random.randint(1,10)</span><br><span class="line">num = int(input(&#x27;please input a number: &#x27;))</span><br><span class="line">if ran == num:</span><br><span class="line">	print(&#x27;Good guess! You are right!&#x27;)</span><br><span class="line"></span><br><span class="line">else:</span><br><span class="line">	print(&#x27;Guess wrong! Next time!&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 多层条件判断：if...elif...else</span><br><span class="line">age = 30</span><br><span class="line">if age &lt;=18 and age &gt; 0:</span><br><span class="line">	print(&#x27;Bingo, good instinct!&#x27;)</span><br><span class="line">elif age &gt; 18 and age &lt;=30:</span><br><span class="line">	print(&#x27;I\&#x27;m still a baby!&#x27;)</span><br><span class="line">elif age &gt; 30 and age &lt;= 40:</span><br><span class="line">	print(&#x27;What a young man you are!&#x27;)</span><br><span class="line">else:</span><br><span class="line">	print(&#x27;System wrong!&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">for 变量名 in 集合：</span><br><span class="line">	语句</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 使用range(start, end, step)函数完成范围指定</span><br><span class="line"># 默认从0开始，不包含结尾数字，步长为1</span><br><span class="line"></span><br><span class="line">for i in range(4):</span><br><span class="line">	if i == 2:</span><br><span class="line">		print(&#x27;a&#x27;)</span><br><span class="line">		break</span><br><span class="line">	else:</span><br><span class="line">		print(i)</span><br><span class="line">print(&#x27;finish&#x27;)</span><br></pre></td></tr></table></figure>
<h2 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2><h3 id="需求：打印1-30之间的数字，并且是3和5的倍数"><a href="#需求：打印1-30之间的数字，并且是3和5的倍数" class="headerlink" title="需求：打印1-30之间的数字，并且是3和5的倍数"></a>需求：打印1-30之间的数字，并且是3和5的倍数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">n=3</span><br><span class="line">while n&lt;=30:</span><br><span class="line">	if n%3==0 and n%5==0:</span><br><span class="line">		print(&#x27;********&gt;&#x27;,n)</span><br><span class="line">	n+=1</span><br></pre></td></tr></table></figure>

<h3 id="需求：赌场游戏"><a href="#需求：赌场游戏" class="headerlink" title="需求：赌场游戏"></a>需求：赌场游戏</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">username = input(&#x27;please input your name: &#x27;)</span><br><span class="line">money = 0</span><br><span class="line">answer = input(&#x27;Are you sure to play the game(y/n)? &#x27;)</span><br><span class="line"></span><br><span class="line">if answer == &#x27;y&#x27;:</span><br><span class="line">	# 反复充值</span><br><span class="line">	while money&lt;2:</span><br><span class="line">		n = int(input(&#x27;Insufficient balance, please recharge\</span><br><span class="line">(100 yuan equals 30 tokens, and recharge amount has to be multiples of 100): &#x27;))</span><br><span class="line">		if n%100==0 and n&gt;0:</span><br><span class="line">			money=(n//100)*30</span><br><span class="line">		print(&#x27;Your current balance is &#123;&#125; tokens,\</span><br><span class="line">each game will cost you 2 tokens&#x27;.format(money))</span><br><span class="line"></span><br><span class="line">		print(&#x27;welcome to game, have fun!&#x27;)</span><br><span class="line"></span><br><span class="line">		while True:</span><br><span class="line">			# 模拟骰子，产生骰子的值</span><br><span class="line">			t1 = random.randint(1,6)</span><br><span class="line">			t2 = random.randint(1,6)</span><br><span class="line">			# 两个骰子的值大于6即为大，否则为小</span><br><span class="line">			money-=2 # 扣除金币</span><br><span class="line">			print(&#x27;system shuffle complete, please guess big or small!&#x27;)</span><br><span class="line">			guess = input(&#x27;please input big or small: &#x27;)</span><br><span class="line"></span><br><span class="line">			if ((t1+t2&gt;6) and guess==&#x27;big&#x27;) or ((t1+t2&lt;=6) and guess==&#x27;small&#x27;):</span><br><span class="line">				print(&#x27;Congratuations &#123;&#125;!\</span><br><span class="line">You earned one coin in this game!&#x27;.format(username))</span><br><span class="line">				money+=1</span><br><span class="line">			else:</span><br><span class="line">				print(&#x27;Pity! You lose in this game!&#x27;)</span><br><span class="line"></span><br><span class="line">			answer = input(&#x27;Do you want to continue? It will cost you 2 tokens if yes!(y/n)&#x27;)</span><br><span class="line">			if answer!=&#x27;y&#x27; or money &lt; 2:</span><br><span class="line">				print(&#x27;Exit the game, next time!&#x27;)</span><br><span class="line">				break</span><br><span class="line"></span><br><span class="line"># 注意：在python中，在for，while循环中没有变量的作用域，在其循环结构的内层或外层都可以获取变量的值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串</span><br><span class="line"></span><br><span class="line"># s1 = &#x27;abc&#x27;</span><br><span class="line"># s2 = &quot;abc&quot;</span><br><span class="line"># s3 = &#x27;&#x27;&#x27;</span><br><span class="line"># abc</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line"># print(id(s1),id(s2),id(s3)) # 三引号占用的内存空间与单双引号不同</span><br><span class="line"># 							# (前提：三引号里面的内容不在同一行，保留一种其他格式的时候)</span><br><span class="line"></span><br><span class="line"># print(s1 == s2) # 比较的是内容</span><br><span class="line"># print(s1 is s2) # 比较的是地址</span><br><span class="line"></span><br><span class="line"># print(s2 == s3)</span><br><span class="line"># print(s2 is s3)</span><br><span class="line"></span><br><span class="line"># print(s2)</span><br><span class="line"># print(s3)</span><br><span class="line"></span><br><span class="line"># s1 = input(&#x27;input: &#x27;)</span><br><span class="line"># s2 = input(&#x27;input: &#x27;)</span><br><span class="line"></span><br><span class="line"># print(s1 == s2) # True</span><br><span class="line"># print(s1 is s2) # False </span><br><span class="line"># 注意：普通变量/常量直接赋值相同内容用is判断是True，</span><br><span class="line"># 用input输入来赋值，底层会做处理，即使输入相同内容，地址也会不同，用is判断是False.</span><br><span class="line"></span><br><span class="line"># 字符串的运算符</span><br><span class="line"></span><br><span class="line"># s3 = s1 + s2  # 相当于拼接符</span><br><span class="line"></span><br><span class="line"># s4 = s1 * 5</span><br><span class="line"></span><br><span class="line"># print(s3)</span><br><span class="line"># print(s4)</span><br><span class="line"></span><br><span class="line"># in 在字符串内</span><br><span class="line"></span><br><span class="line">name = &#x27;steven&#x27;</span><br><span class="line"></span><br><span class="line">result = &#x27;ste&#x27; in name # in的返回值是布尔类型</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># not in 没在字符串内</span><br><span class="line"></span><br><span class="line">result = &#x27;tv&#x27; not in name</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># % 字符串的格式化</span><br><span class="line">print(&#x27;%s says: %s&#x27; % (name, &#x27;Everybody should study hard!&#x27;))</span><br><span class="line"></span><br><span class="line"># r 保留原格式</span><br><span class="line">print(r&#x27;%s says: \&#x27;hahaha!\&#x27; &#x27; % name) # 用r则有转义字符不进行转义</span><br><span class="line">print(&#x27;%s says: \&#x27;hahaha!\&#x27; &#x27; % name)</span><br><span class="line"></span><br><span class="line"># [] [start:end] 切片</span><br><span class="line">filename = &#x27;picture.png&#x27;</span><br><span class="line"></span><br><span class="line"># 位置都是从0开始，位置称作下标或索引</span><br><span class="line">print(filename[5]) # 通过[]可以结合位置 获取字母  特点：只能获取一个字母</span><br><span class="line"></span><br><span class="line"># range(1,10) ---&gt; [1:10]</span><br><span class="line"></span><br><span class="line">print(filename[0:7]) # 包括前面不包括后面</span><br><span class="line"></span><br><span class="line">print(filename[3:7]) # 截取字符串</span><br><span class="line"></span><br><span class="line"># 省略</span><br><span class="line">print(filename[3:]) # 省略后面表示取到结尾</span><br><span class="line">print(filename[:7]) # 省略前面表示从0开始取值</span><br><span class="line"></span><br><span class="line"># 负数</span><br><span class="line">print(filename[8:-1])</span><br><span class="line">print(filename[:-2])</span><br><span class="line">print(filename[-1:])</span><br><span class="line">print(filename[-5:-1])</span><br><span class="line">print(filename[10:0])</span><br><span class="line"></span><br><span class="line"># [start:end:step]</span><br><span class="line">print(filename[::-1]) # 倒叙</span><br><span class="line"></span><br><span class="line">str1 = &#x27;abcdefg&#x27;</span><br><span class="line"></span><br><span class="line">print(str1[-1:-5:-1])</span><br><span class="line">print(str1[5:0:-1]) # 取值方向需与取值方向一致</span><br><span class="line">print(&#x27;----&gt;&#x27;,str1[5:0:1])</span><br><span class="line"></span><br><span class="line"># 指定步长取值</span><br><span class="line">print(str1[6:0:-2])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串的内建函数：声明一个字符串，默认可以调用内建函数</span><br><span class="line"></span><br><span class="line"># 第一部分：大小写相关</span><br><span class="line"># capitalize()第一个单词首字母大写, title()每个单词首字母大写, istitle()判断是否是title格式, </span><br><span class="line"># upper()所有字母大写, isupper(), lower()所有字母小写, islower()</span><br><span class="line"></span><br><span class="line">message = &#x27;zhaorui is a beautiful girl!&#x27;</span><br><span class="line"></span><br><span class="line">msg = message.capitalize()</span><br><span class="line">print(msg)</span><br></pre></td></tr></table></figure>

<h3 id="案例：生成验证码"><a href="#案例：生成验证码" class="headerlink" title="案例：生成验证码"></a>案例：生成验证码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">s=&#x27;QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm0987654321&#x27;</span><br><span class="line">print(len(s))</span><br><span class="line"># 四个随机数</span><br><span class="line">code = &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line"># IndexError: string index out of range  ex:print(s[62])</span><br><span class="line"># index: 0~len(s)-1  0-61</span><br><span class="line">	</span><br><span class="line">for i in range(4):		</span><br><span class="line">	ran = random.randint(0,len(s)-1)</span><br><span class="line"></span><br><span class="line">	code += s[ran] </span><br><span class="line"></span><br><span class="line">print(&#x27;Verification Code:&#x27;+code)</span><br><span class="line"></span><br><span class="line"># 提示用户输入验证码</span><br><span class="line">user_input = input(&#x27;please input your verification code: &#x27;)</span><br><span class="line">if user_input.lower() == code.lower():</span><br><span class="line">	print(&#x27;Verification code is correct!&#x27;)</span><br><span class="line">else:</span><br><span class="line">	print(&#x27;Verification code is incorrect!&#x27;)</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/Python%E5%9F%BA%E7%A1%80%E4%BA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/Python%E5%9F%BA%E7%A1%80%E4%BA%8C/" class="post-title-link" itemprop="url">python基础二</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-22 13:27:58" itemprop="dateModified" datetime="2022-05-22T13:27:58+08:00">2022-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="myfirstpython"><a href="#myfirstpython" class="headerlink" title="myfirstpython"></a>myfirstpython</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 注释1</span><br><span class="line">print(&quot;Hello world&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;Hello python&quot;)  #</span><br><span class="line"></span><br><span class="line"># 注释2</span><br><span class="line"></span><br><span class="line">myName = &#x27;Tom&#x27;</span><br><span class="line">print(myName)</span><br><span class="line">SchoolName = &#x27;饿啊谔谔我的是&#x27;</span><br><span class="line">print(SchoolName)</span><br></pre></td></tr></table></figure>

<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># int -- 整型</span><br><span class="line">num1 = 1</span><br><span class="line"># float -- 浮点型</span><br><span class="line">num2 = 1.1</span><br><span class="line">print(type(num1))</span><br><span class="line">print(type(num2))</span><br><span class="line"># str -- 字符串，带引号</span><br><span class="line">a = &quot;Hello world&quot;</span><br><span class="line">print(type(a))</span><br><span class="line"># bool -- 布尔型，通常判断使用，两个取值True, false</span><br><span class="line">b = True</span><br><span class="line">print(type(b))</span><br><span class="line"># list -- 列表</span><br><span class="line">c = [10, 20, 30]</span><br><span class="line">print(type(c))</span><br><span class="line"># tuple -- 元组</span><br><span class="line">d = (10, 20, 30)</span><br><span class="line">print(type(d))</span><br><span class="line"># set -- 集合</span><br><span class="line">e = &#123;10, 20, 30&#125;</span><br><span class="line">print(type(e))</span><br><span class="line"># dict -- 字典 -- 键值对</span><br><span class="line">f = &#123;&#x27;name&#x27;: &#x27;Tom&#x27;, &#x27;age&#x27;: &#x27;18&#x27;&#125;</span><br><span class="line">print(type(f))</span><br></pre></td></tr></table></figure>

<h1 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 准备数据</span><br><span class="line">2. 格式化符号输出数据</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">age = 18</span><br><span class="line">name = &#x27;Tom&#x27;</span><br><span class="line">weight = 75.5</span><br><span class="line">stu_id = 1</span><br><span class="line">stu_id2 = 1000</span><br><span class="line"># 1. 今年我的年龄是x岁 -- 整数 %d</span><br><span class="line">print(&#x27;age is %d years old&#x27; % age)</span><br><span class="line"></span><br><span class="line"># 2. 我的名字是x -- 字符串 %s</span><br><span class="line">print(&#x27;my name is %s&#x27; % name)</span><br><span class="line"># 3. 我的体重是x公斤 -- 浮点数 %f</span><br><span class="line">print(&#x27;my weight is %.2f kilogram&#x27; % weight)</span><br><span class="line"># 4. 我的学号是x -- %d</span><br><span class="line">print(&#x27;my student ID is %d&#x27; % stu_id)</span><br><span class="line"># 4.1. 我的学号是001</span><br><span class="line">print(&#x27;my student ID is %03d&#x27; % stu_id)</span><br><span class="line">print(&#x27;my student ID is %03d&#x27; % stu_id2)</span><br><span class="line"># 5. 我的名字是x，今年x岁了</span><br><span class="line">print(&#x27;my name is %s, age is %d years old&#x27; % (name, age))</span><br><span class="line"># 5.1. 我的名字是x，明年x岁了</span><br><span class="line">print(&#x27;my name is %s, next year, I am %d years old&#x27; % (name, age+1))</span><br><span class="line"># 6. 我的名字是x，今年x岁了，体重x公斤，学号是x</span><br><span class="line">print(&#x27;my name is %s, age is %d years old, weight is %.2f kilogram, student ID is %06d&#x27; % (name, age, weight, stu_id))</span><br></pre></td></tr></table></figure>

<h1 id="格式化字符串拓展"><a href="#格式化字符串拓展" class="headerlink" title="格式化字符串拓展"></a>格式化字符串拓展</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = &#x27;Tom&#x27;</span><br><span class="line">age = 18</span><br><span class="line">weight = 75.5</span><br><span class="line"></span><br><span class="line"># 我的名字是x, 今年x岁了， 体重x公斤</span><br><span class="line">print(&#x27;my name is %s, age is %s years old, weight is %s kilogram&#x27; % (name, age, weight))</span><br><span class="line"></span><br><span class="line"># 格式化字符串 -- 语法 f&#x27;&#123;表达式&#125;&#x27;</span><br><span class="line">print(f&#x27;my name is &#123;name&#125;, age is &#123;age+1&#125; years old&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;hello&#x27;)</span><br><span class="line">print(&#x27;world&#x27;)</span><br><span class="line"># \n -- 换行</span><br><span class="line">print(&#x27;hello\npython&#x27;)</span><br><span class="line"># \t -- 制表符，tab四个空格距离</span><br><span class="line">print(&#x27;\tabcd&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="print的结束符"><a href="#print的结束符" class="headerlink" title="print的结束符"></a>print的结束符</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># print默认自带\n结束符</span><br><span class="line">print(&#x27;hello&#x27;, end=&quot;\n&quot;)</span><br><span class="line">print(&#x27;world&#x27;, end=&quot;\t&quot;)</span><br><span class="line">print(&#x27;hello&#x27;, end=&quot;...&quot;)</span><br><span class="line">print(&#x27;python&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 书写input</span><br><span class="line">    input(&#x27;提示信息&#x27;)</span><br><span class="line">2. 观察特点</span><br><span class="line">    2.1. 遇到input，等待用户输入</span><br><span class="line">    2.2. 接收input存变量</span><br><span class="line">    2.3. input接收到的数据类型都是字符串</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">password = input(&#x27;please input your password: &#x27;)</span><br><span class="line">print(f&#x27;The password you just inputted is &#123;password&#125;&#x27;)</span><br><span class="line">print(type(password))</span><br></pre></td></tr></table></figure>

<h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. input</span><br><span class="line">2. 检测input数据类型str</span><br><span class="line">3. int() 转换数据类型</span><br><span class="line">4. 检测是否转换成功</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">num = input(&#x27;please input number: &#x27;)</span><br><span class="line">print(num)</span><br><span class="line">print(type(num)) # str</span><br><span class="line">print(type(int(num)))</span><br><span class="line">num1= int(num)</span><br><span class="line">print(type(num1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 1. float() -- 将数据转换成浮点数</span><br><span class="line">num = 1</span><br><span class="line">str1 = &#x27;10&#x27;</span><br><span class="line">print(type(float(num1)))</span><br><span class="line"></span><br><span class="line"># 2. str() -- 将数据转换成字符串</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. tuple() -- 将一个序列转换成元组</span><br><span class="line"></span><br><span class="line"># 4. list() -- 将一个序列转换成列表</span><br><span class="line"></span><br><span class="line"># 5. eval() -- 计算在字符串中的有效python表达式， 并返回一个对象</span><br><span class="line">str2 = &#x27;1&#x27;</span><br><span class="line">str3 = &#x27;1.1&#x27;</span><br><span class="line">str4 = &#x27;(1000, 2000, 300)&#x27;</span><br><span class="line">str5 = &#x27;[1000, 2000, 3000]&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="数据类型转换进阶"><a href="#数据类型转换进阶" class="headerlink" title="数据类型转换进阶"></a>数据类型转换进阶</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 1. float() -- 将数据转换成浮点数</span><br><span class="line">num1 = 1</span><br><span class="line">str1 = &#x27;10&#x27;</span><br><span class="line">print(type(float(num1)))</span><br><span class="line">print(float(num1))</span><br><span class="line"></span><br><span class="line">print(float(str1))</span><br><span class="line"></span><br><span class="line"># 2. str() -- 将数据转换成字符串</span><br><span class="line">print(type(str(num1)))</span><br><span class="line"></span><br><span class="line"># 3. tuple() -- 将一个序列转换成元组</span><br><span class="line">list1 = [10, 20, 30]</span><br><span class="line">print(tuple(list1))</span><br><span class="line"></span><br><span class="line"># 4. list() -- 将一个序列转换成列表</span><br><span class="line">t1 = (100, 200, 300)</span><br><span class="line">print(list(t1))</span><br><span class="line"></span><br><span class="line"># 5. eval() -- 计算在字符串中的有效python表达式， 并返回一个对象</span><br><span class="line">str2 = &#x27;1&#x27;  # -- 对应整型</span><br><span class="line">str3 = &#x27;1.1&#x27;   # -- 对应浮点型</span><br><span class="line">str4 = &#x27;(1000, 2000, 300)&#x27;  # -- 对应元组</span><br><span class="line">str5 = &#x27;[1000, 2000, 3000]&#x27;  # -- 对应列表</span><br><span class="line">print(type(eval(str2)))</span><br><span class="line">print(type(eval(str3)))</span><br><span class="line">print(type(eval(str4)))</span><br><span class="line">print(type(eval(str5)))</span><br></pre></td></tr></table></figure>

<h1 id="复合赋值运算符"><a href="#复合赋值运算符" class="headerlink" title="复合赋值运算符"></a>复合赋值运算符</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">a = b = c = d = e = f = g = 10</span><br><span class="line">a += 1  # a = a + 1</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">b -= 1  # b = b - 1</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line">c *= 2  # c = c * 2</span><br><span class="line">print(c)</span><br><span class="line"></span><br><span class="line">d /= 2  # d = d / 2</span><br><span class="line">print(d)</span><br><span class="line"></span><br><span class="line">e //= 3  # e = e // 3 整除赋值</span><br><span class="line">print(e)</span><br><span class="line"></span><br><span class="line">f %= 3  # f = f % 3 取余赋值</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line">g **= 2  # g = g ** 2 幂赋值</span><br><span class="line">print(g)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 注意： 先算复合赋值运算符右面的表达式， 再算复合赋值运算</span><br><span class="line">h = 10</span><br><span class="line">h += 1 + 2</span><br><span class="line">print(h)</span><br><span class="line"></span><br><span class="line">h1 = 10</span><br><span class="line">h1 *= 1 + 2</span><br><span class="line">print(h1)</span><br></pre></td></tr></table></figure>

<h1 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">a = 0</span><br><span class="line">b = 1</span><br><span class="line">c = 2</span><br><span class="line"></span><br><span class="line"># 1. and: 与： 都真才真</span><br><span class="line">print((a &lt; b) and (c &gt; b)) # 加小括号避免歧义</span><br><span class="line">print(a &gt; b and c &gt; b)</span><br><span class="line"></span><br><span class="line"># 2. or: 或： 一真则真，都假才假</span><br><span class="line">print(a &lt; b or c &gt; b)</span><br><span class="line">print(a &gt; b or c &gt; b)</span><br><span class="line">print(a &gt; b or c &lt; b)</span><br><span class="line"></span><br><span class="line"># 3. not: 非： 取反</span><br><span class="line">print(not False)</span><br><span class="line">print(not c &gt; b)</span><br><span class="line"></span><br><span class="line"># 数字之间的逻辑运算</span><br><span class="line"></span><br><span class="line"># 1） and运算符，只要有一个值为0，则结果为0，否则结果为最后一个非0数字</span><br><span class="line">print(a and b) # 0</span><br><span class="line">print(b and c, end=&#x27;\t&#x27;) # 2</span><br><span class="line">print(c and b, end=&#x27;...&#x27;) # 1</span><br><span class="line"></span><br><span class="line"># 2) or运算符，只有所有值都为0结果才为0，否则结果为第一个非0数字</span><br><span class="line">print(a or b) # 1</span><br><span class="line">print(f&#x27;a或c的结果为：&#123;a or c&#125;&#x27;, end=&quot;,,,&quot;) # 2</span><br><span class="line">print(b or c) # 1</span><br></pre></td></tr></table></figure>

<h1 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 系统可以用户输入年龄，用这个年龄做条件判断</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 用户输入</span><br><span class="line">2. 保存用户输入的年龄</span><br><span class="line">3. if</span><br><span class="line">注意： input接收到的数据是str, 不能和18做判断 -- int转换类型</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">age = int(input(&#x27;please input your age: &#x27;))</span><br><span class="line"></span><br><span class="line">if age &gt;=18:</span><br><span class="line">    print(f&#x27;your age is &#123;age&#125;, you are an edult&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(f&#x27;your age is &#123;age&#125;, you are a child&#x27;)</span><br><span class="line"></span><br><span class="line">#注意： 在这个下方的没有加缩进的代码，不属于if语句块，即和条件成立与否无关</span><br><span class="line">print(&#x27;this code always execute&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="多重判断"><a href="#多重判断" class="headerlink" title="多重判断"></a>多重判断</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">age = int(input(&#x27;please input your age: &#x27;))</span><br><span class="line"></span><br><span class="line">if age &lt; 18:</span><br><span class="line">    print(f&#x27;your age is &#123;age&#125;, child&#x27;)</span><br><span class="line">elif (age &gt;= 18) and (age &lt;= 60):  # 也可写成18 &lt;= age &lt;= 60</span><br><span class="line">    print(f&#x27;your age is &#123;age&#125;, legal&#x27;)</span><br><span class="line"></span><br><span class="line">elif age &gt; 60:</span><br><span class="line">    print(f&#x27;your age is &#123;age&#125;, retire&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># if嵌套</span><br><span class="line"></span><br><span class="line">money = 0</span><br><span class="line">seat = 1</span><br><span class="line"></span><br><span class="line">if money == 1:</span><br><span class="line">    print(&#x27;you can get in&#x27;)</span><br><span class="line">    if seat == 1:</span><br><span class="line">        print(&#x27;you can sit down&#x27;)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;no seat, please wait&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;please stay out&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="综合案例-猜拳游戏"><a href="#综合案例-猜拳游戏" class="headerlink" title="综合案例-猜拳游戏"></a>综合案例-猜拳游戏</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 出拳</span><br><span class="line">    玩家： 手动输入</span><br><span class="line">    电脑：1. 固定：剪刀 2. 随机</span><br><span class="line">2. 判断输赢</span><br><span class="line">    2.1 玩家获胜</span><br><span class="line">    2.2 平局</span><br><span class="line">    2.3 电脑获胜</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">import random # 导入模块</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">player = int(input(&#x27;please throw a punch: 0 -- rock, 1 -- paper, 2 -- scissors: &#x27;))</span><br><span class="line"></span><br><span class="line">computer = random.randint(0, 2) # 使用模块</span><br><span class="line">print(f&#x27;computer is &#123;computer&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"># 玩家获胜</span><br><span class="line">if ((player == 0) and (computer == 2)) or ((player == 1) and (computer == 0)) or ((player == 2) and (computer == 1)):</span><br><span class="line">    print(&#x27;player win&#x27;)</span><br><span class="line"># 平局</span><br><span class="line">elif player == computer:</span><br><span class="line">    print(&#x27;draw&#x27;)</span><br><span class="line"># 电脑获胜</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;computer win&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">语法</span><br><span class="line">条件成立的表达式if条件else条件不成立执行的表达式</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">a = 10</span><br><span class="line">b = 6</span><br><span class="line"></span><br><span class="line">c = a - b if a &gt; b else b - a</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>

<h1 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">while 条件：</span><br><span class="line">    条件成立要重复执行的代码</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">i = 0 # 初始值一般设置0</span><br><span class="line">while i &lt; 5: # 循环上限一般写 &lt;</span><br><span class="line">    print(&#x27;This is while loop&#x27;)</span><br><span class="line">    i += 1</span><br><span class="line">print(&#x27;This is end&#x27;)</span><br><span class="line"></span><br><span class="line"># 计算1 - 100的累加和</span><br><span class="line"></span><br><span class="line">a = 0</span><br><span class="line">b = 0</span><br><span class="line">while a &lt;= 100:</span><br><span class="line">    b += a</span><br><span class="line">    a += 1</span><br><span class="line">print(&#x27;The sum from 1 to 100 is&#x27;, b)</span><br><span class="line"></span><br><span class="line"># 计算1 - 100偶数的累加和</span><br><span class="line"></span><br><span class="line">c = 1</span><br><span class="line">d = 0</span><br><span class="line">while c &lt;= 100:</span><br><span class="line">    if c % 2 == 0:</span><br><span class="line">        d += c</span><br><span class="line">    c += 1</span><br><span class="line">print(&#x27;Sum of even Numbers up to 100 is&#x27;, d)</span><br></pre></td></tr></table></figure>

<h1 id="break-continue语句"><a href="#break-continue语句" class="headerlink" title="break, continue语句"></a>break, continue语句</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># break: 当某些条件成立，退出整个循环</span><br><span class="line"></span><br><span class="line">i = 1</span><br><span class="line">while i &lt;= 5:</span><br><span class="line">    if i == 4:</span><br><span class="line">        print(&#x27;I am full&#x27;)</span><br><span class="line">        break</span><br><span class="line">    print(f&#x27;Already ate &#123;i&#125; apples&#x27;)</span><br><span class="line">    i += 1</span><br><span class="line"></span><br><span class="line"># continue: 当条件成立，退出当前一次循环，继而执行下一次循环</span><br><span class="line"></span><br><span class="line">a = 1</span><br><span class="line"></span><br><span class="line">while a &lt;= 5:</span><br><span class="line">    if a == 3:</span><br><span class="line">        print(&#x27;There is a worm in the apple&#x27;)</span><br><span class="line">        # 如果使用continue， 在continue之前，一定要修改计数器，否则进入死循环</span><br><span class="line">        a += 1</span><br><span class="line">        continue</span><br><span class="line">    print(f&#x27;Already ate &#123;a&#125; apples&#x27;)</span><br><span class="line">    a += 1</span><br></pre></td></tr></table></figure>

<h1 id="while循环嵌套"><a href="#while循环嵌套" class="headerlink" title="while循环嵌套"></a>while循环嵌套</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">j = 0</span><br><span class="line">while j &lt; 5:</span><br><span class="line">    i = 0</span><br><span class="line">    while i &lt; 5:</span><br><span class="line">        # 一行星星在同一行显示</span><br><span class="line">        print(&#x27;*&#x27;, end=&#x27;&#x27;)</span><br><span class="line">        i += 1</span><br><span class="line">        # 重复5行星星，换行输出</span><br><span class="line">    print(end=&#x27;\n&#x27;) # 或 print()</span><br><span class="line">    j += 1</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 三角形：每行星星的个数和行号相等</span><br><span class="line"></span><br><span class="line">a = 0</span><br><span class="line">while a &lt; 5:</span><br><span class="line">    b = 0</span><br><span class="line">    # 星星个数i要与行号j联动</span><br><span class="line">    while b &lt;= a:</span><br><span class="line">        print(&#x27;*&#x27;, end=&#x27;&#x27;)</span><br><span class="line">        b += 1</span><br><span class="line">    print(end=&#x27;\n&#x27;) # 或 print()</span><br><span class="line">    a += 1</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 打印9x9乘法表</span><br><span class="line"></span><br><span class="line">c = 1</span><br><span class="line">while c &lt; 9:</span><br><span class="line">    d = 1</span><br><span class="line">    # 星星个数i要与行号j联动</span><br><span class="line">    while d &lt;= c:</span><br><span class="line">        print(f&#x27;&#123;c&#125;x&#123;d&#125;=&#123;c * d&#125;&#x27;, end=&#x27;\t&#x27;) # \t制表符可对齐</span><br><span class="line">        d += 1</span><br><span class="line">    print(end=&#x27;\n&#x27;) # 或 print()</span><br><span class="line">    c += 1</span><br></pre></td></tr></table></figure>

<h1 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">for循环用法：</span><br><span class="line">    for 临时变量 in 序列：</span><br><span class="line">    重复执行的代码</span><br><span class="line">    .......</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 准备一个数据序列(一个数据内部由多个数据组成，比如列表list，字符串)</span><br><span class="line">2. for</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">str1 = &#x27;forloop&#x27;</span><br><span class="line">for i in str1:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line"># break 退出循环</span><br><span class="line"></span><br><span class="line">str2 = &#x27;forloop&#x27;</span><br><span class="line">for j in str2:</span><br><span class="line">    if j == &#x27;l&#x27;:</span><br><span class="line">        break</span><br><span class="line">    print(j)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line"># continue 退出循环</span><br><span class="line"></span><br><span class="line">str3 = &#x27;forloop&#x27;</span><br><span class="line">for h in str3:</span><br><span class="line">    if h == &#x27;l&#x27;:</span><br><span class="line">        continue</span><br><span class="line">    print(h)</span><br></pre></td></tr></table></figure>

<h1 id="while…else用法"><a href="#while…else用法" class="headerlink" title="while…else用法"></a>while…else用法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># while循环完成之后才执行else之后的代码</span><br><span class="line"></span><br><span class="line">i = 1</span><br><span class="line">while i &lt;= 5:</span><br><span class="line">    print(f&#x27;Already ate &#123;i&#125; apples&#x27;)</span><br><span class="line">    i += 1</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;I am full just when i eat the 5th apple&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line"># break退出循环对else的影响</span><br><span class="line"></span><br><span class="line">j = 1</span><br><span class="line">while j &lt;= 5:</span><br><span class="line">    if j == 3:</span><br><span class="line">        print(&#x27;There is a worm in this apple&#x27;)</span><br><span class="line">        break</span><br><span class="line">    print(f&#x27;Already ate &#123;j&#125; apples&#x27;)</span><br><span class="line">    j += 1</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;I am full just when i eat the 5th apple&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line"># continue退出循环对else的影响</span><br><span class="line"></span><br><span class="line">h = 1</span><br><span class="line">while h &lt;= 5:</span><br><span class="line">    if h == 3:</span><br><span class="line">        print(&#x27;There is a worm in this apple&#x27;)</span><br><span class="line">        h += 1</span><br><span class="line">        continue</span><br><span class="line">    print(f&#x27;Already ate &#123;h&#125; apples&#x27;)</span><br><span class="line">    h += 1</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;I am full just when i eat the 5th apple&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="for…else用法"><a href="#for…else用法" class="headerlink" title="for…else用法"></a>for…else用法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># for循环完成之后才执行else之后的代码, break退出循环不会执行else之后的代码</span><br><span class="line"></span><br><span class="line">str1 = &#x27;forloop&#x27;</span><br><span class="line">for i in str1:</span><br><span class="line">    print(i)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;This code will not appear until for loop is complete&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line">str2 = &#x27;forloop&#x27;</span><br><span class="line">for j in str2:</span><br><span class="line">    if j == &#x27;l&#x27;:</span><br><span class="line">        break</span><br><span class="line">    print(j)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;This code will not appear until for loop is complete&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------cutting line----------------&#x27;)</span><br><span class="line"></span><br><span class="line">str3 = &#x27;forloop&#x27;</span><br><span class="line">for h in str3:</span><br><span class="line">    if h == &#x27;l&#x27;:</span><br><span class="line">        continue</span><br><span class="line">    print(h)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;This code will not appear until for loop is complete&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="认识字符串"><a href="#认识字符串" class="headerlink" title="认识字符串"></a>认识字符串</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 单引号换行，输出不换行，默认加反斜杠</span><br><span class="line">a = &#x27;Hello &#x27; \</span><br><span class="line">    &#x27;world&#x27;</span><br><span class="line">print(a)</span><br><span class="line">print(type(a))</span><br><span class="line"></span><br><span class="line">b = &quot;TOM&quot;</span><br><span class="line">print(type(b))</span><br><span class="line"></span><br><span class="line"># 三引号</span><br><span class="line">e = &#x27;&#x27;&#x27;i am Tom&#x27;&#x27;&#x27;</span><br><span class="line">print(type(e))</span><br><span class="line"></span><br><span class="line"># 三引号换行，输出也换行</span><br><span class="line">f = &quot;&quot;&quot;I </span><br><span class="line">am Tom&quot;&quot;&quot;</span><br><span class="line">print(type(f))</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line"># 双引号内可加引号</span><br><span class="line">c = &quot;I&#x27;m Tom&quot;</span><br><span class="line">print(c)</span><br><span class="line">print(type(c))</span><br><span class="line"></span><br><span class="line"># 单引号内加引号需用转义符\</span><br><span class="line">d = &#x27;I\&#x27;m TOM&#x27;</span><br><span class="line">print(d)</span><br><span class="line">print(type(d))</span><br></pre></td></tr></table></figure>

<h1 id="下标-索引"><a href="#下标-索引" class="headerlink" title="下标-索引"></a>下标-索引</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">str1 = &#x27;abcdefg&#x27;</span><br><span class="line">print(str1)</span><br><span class="line"></span><br><span class="line"># 数据在程序运行过程中存储在内存</span><br><span class="line"># 得到数据a字符，得到数据b字符 --- 如何使用字符串中某个特定的数据？</span><br><span class="line"># 这些字符数据从0开始顺序分配一个编号 -- 使用这个编号精确找到某个字符数据 --下标或索引或索引值</span><br><span class="line"></span><br><span class="line"># str1[下标]</span><br><span class="line">print(str1[0]) # 输出第一个字符数据</span><br><span class="line">print(str1[1]) # 输出第二个字符数据</span><br></pre></td></tr></table></figure>

<h1 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">str1 = &#x27;abcdefg&#x27;</span><br><span class="line"># 得到整个字符串数据</span><br><span class="line">print(str1)</span><br><span class="line"></span><br><span class="line"># 下标得到的是下标为某个数字的数据</span><br><span class="line">print(str1[2])</span><br><span class="line"></span><br><span class="line"># 得到abc，截取其中某一部分的数据，用切片。字符串、列表、元组支持切片操作</span><br><span class="line"># 语法： 序列名[开始位置的下标:结束位置的下标:步长]</span><br><span class="line"></span><br><span class="line">print(str1[2:5:1]) # 不包含结束位置数据</span><br><span class="line">print(str1[2:5:2])</span><br><span class="line">print(str1[2:5])  # 步长默认为1</span><br><span class="line">print(str1[:5]) # 如果不写开始位置下标，默认为0</span><br><span class="line">print(str1[2:]) # 如果不写结束位置下标，默认选取到最后</span><br><span class="line">print(str1[:]) # 如果不写开始和结束位置下标，默认选取所有</span><br><span class="line"></span><br><span class="line"># 负数测试</span><br><span class="line">print(str1[::-1]) # 步长为负数， 表示倒数选取</span><br><span class="line">print(str1[-4:-1]) # 下标-1表示最后一个数据，依次向前类推</span><br><span class="line"></span><br><span class="line"># 选取方向不能冲突</span><br><span class="line">print(str1[-4:-1:1])</span><br><span class="line">print(str1[-4:-1:-1]) # 不能选取到数据：从-4到-1.选取方向为从左到右，但是步长-1表示从右到左选取</span><br><span class="line"># 如果选取方向（下标开始到结束的方向）和步长的方向冲突，则无法选取数据</span><br><span class="line">print(str1[-1:-4:-1]) # 选取方向一致</span><br></pre></td></tr></table></figure>

<h1 id="字符串的查找"><a href="#字符串的查找" class="headerlink" title="字符串的查找"></a>字符串的查找</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mystr = &quot;hello world and itcast and strings and python&quot;</span><br><span class="line"></span><br><span class="line"># 1. find()</span><br><span class="line">print(mystr.find(&#x27;and&#x27;)) # 查找的子串存在，返回该子串首次出现的开始位置下标</span><br><span class="line">print(mystr.find(&#x27;and&#x27;, 15, 30)) #选定范围查找</span><br><span class="line">print(mystr.find(&#x27;ands&#x27;)) # 查找的子串不存在返回-1</span><br><span class="line"></span><br><span class="line"># 2. index()</span><br><span class="line">print(mystr.index(&#x27;and&#x27;, 15, 30)) # 查找的子串存在，返回该子串首次出现的开始位置下标</span><br><span class="line"># print(mystr.index(&#x27;ands&#x27;)) # index查找的子串不存在则报错</span><br><span class="line"></span><br><span class="line"># 3. count()</span><br><span class="line">print(mystr.count(&#x27;and&#x27;, 15, 30)) # 查找的子串存在，返回该子串出现的次数</span><br><span class="line">print(mystr.count(&#x27;and&#x27;))</span><br><span class="line">print(mystr.count(&#x27;ands&#x27;)) # # 查找的子串不存在，返回0</span><br><span class="line"></span><br><span class="line"># 4. rfind()</span><br><span class="line">print(mystr.rfind(&#x27;and&#x27;)) # rfind() -- 从右往左查找</span><br><span class="line"></span><br><span class="line"># 5. rindex()</span><br><span class="line">print(mystr.rindex(&#x27;and&#x27;)) # rindex() -- 从右往左查找</span><br></pre></td></tr></table></figure>

<h1 id="字符串的修改"><a href="#字符串的修改" class="headerlink" title="字符串的修改"></a>字符串的修改</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">mystr = &quot;hello world and itcast and strings and python&quot;</span><br><span class="line"></span><br><span class="line"># 1. replace() 把and替换成hen</span><br><span class="line">newstr = mystr.replace(&#x27;and&#x27;, &#x27;he&#x27;)</span><br><span class="line">print(mystr)</span><br><span class="line">print(newstr) # replace函数有返回值，返回值是修改后的字符串</span><br><span class="line"># 调用了replace函数后，原字符串不会修改。修改后的数据作为replace函数的返回值</span><br><span class="line"># 字符串是不可变数据类型</span><br><span class="line"># 数据是否可以改变划分为 可变类型 和 不可变类型</span><br><span class="line"></span><br><span class="line">newstr = mystr.replace(&#x27;and&#x27;, &#x27;he&#x27;, 1) # 加替换次数</span><br><span class="line">print(newstr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">newstr = mystr.replace(&#x27;and&#x27;, &#x27;he&#x27;, 10) # 替换次数超出子串出现的次数则替换所有该子串</span><br><span class="line">print(newstr)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"># split() -- 分割， 返回一个列表, 丢失分割字符</span><br><span class="line">list1 = mystr.split(&#x27;and&#x27;)</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line">list2 = mystr.split(&#x27;and&#x27;, 2)</span><br><span class="line">print(list2)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 3. join() -- 合并列表里面的字符串数据为一个大字符串</span><br><span class="line"># 语法： 连接用的字符或子串.join(多字符串组成的序列)</span><br><span class="line">mylist = [&#x27;aa&#x27;, &#x27;bb&#x27;, &#x27;cc&#x27;]</span><br><span class="line">newstr1 = &#x27;...&#x27;.join(mylist)</span><br><span class="line">print(newstr1)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 4. capitalize() -- 字符串首字母大写，其余转换成小写</span><br><span class="line">new_str = mystr.capitalize()</span><br><span class="line">print(new_str)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 5. title(): 字符串中每个单词首字母大写</span><br><span class="line">new_str1 = mystr.title()</span><br><span class="line">print(new_str1)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 6. upper(): 字符串中每个字母都小写转大写</span><br><span class="line">new_str2 = mystr.upper()</span><br><span class="line">print(new_str2)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 7. lower(): 字符串中每个字母都大写转小写</span><br><span class="line">new_str3 = mystr.lower()</span><br><span class="line">print(new_str3)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 8. lstrip(): 删除字符串中左侧空白字符</span><br><span class="line">mystr1 = &quot;  hello world and itcast and strings and python   &quot;</span><br><span class="line">print(mystr1)</span><br><span class="line">new_strA = mystr1.lstrip()</span><br><span class="line">print(new_strA)</span><br><span class="line"></span><br><span class="line"># 9. rstrip(): 删除字符串中右侧空白字符</span><br><span class="line">new_strB = mystr1.rstrip()</span><br><span class="line">print(new_strB)</span><br><span class="line"></span><br><span class="line"># 10. strip(): 删除字符串中左右两侧空白字符</span><br><span class="line"></span><br><span class="line">new_strC = mystr1.strip()</span><br><span class="line">print(new_strC)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 11. ljust(): 返回一个原字符串左对齐，并使用指定字符（默认空格）填充至对应长度的新字符串</span><br><span class="line"># 语法： 字符串序列.ljust(长度，填充字符)</span><br><span class="line"></span><br><span class="line">mystr2 = &quot;hello&quot;</span><br><span class="line">print(mystr2.ljust(10))</span><br><span class="line">print(mystr2.ljust(10, &#x27;.&#x27;))</span><br><span class="line">print(mystr2.rjust(10, &#x27;.&#x27;)) # 右对齐 rjust()</span><br><span class="line">print(mystr2.center(10, &#x27;.&#x27;)) # 居中 center()</span><br></pre></td></tr></table></figure>

<h1 id="字符串的判断"><a href="#字符串的判断" class="headerlink" title="字符串的判断"></a>字符串的判断</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># 1. startswith(): 检查字符串是否是以指定字串开头，是则返回True，否则返回False。</span><br><span class="line"># 如果设置开始和结束位置下标，则在指定范围内检查</span><br><span class="line"># 语法： 字符串序列.startswith(子串，开始位置下标，结束位置下标)</span><br><span class="line"></span><br><span class="line">mystr = &quot;hello world and itcast and strings and python&quot;</span><br><span class="line">print(mystr.startswith(&#x27;hello&#x27;))</span><br><span class="line">print(mystr.startswith(&#x27;hel&#x27;))</span><br><span class="line">print(mystr.startswith(&#x27;hels&#x27;))</span><br><span class="line"></span><br><span class="line"># 2. endswith(): 检查字符串是否是以指定字串结尾，是则返回True，否则返回False。</span><br><span class="line">print(mystr.endswith(&#x27;python&#x27;))</span><br><span class="line">print(mystr.endswith(&#x27;pythons&#x27;))</span><br><span class="line"></span><br><span class="line"># 3. isalpha(): 如果字符串至少有一个字符并且所有字符都是字母则返回True，否则返回False。</span><br><span class="line">print(mystr.isalpha())</span><br><span class="line"></span><br><span class="line"># 4. isdigit(): 如果字符串只包含数字则返回True，否则返回False。</span><br><span class="line">print(mystr.isdigit())</span><br><span class="line">mystr1 = &#x27;12345&#x27;</span><br><span class="line">print(mystr1.isdigit())</span><br><span class="line"></span><br><span class="line"># 5. isalnum(): 如果字符串至少有一个字符并且所有字符都是字母或数字则返回True，否则返回False。</span><br><span class="line">print(mystr1.isalnum())</span><br><span class="line">print(mystr.isalnum())</span><br><span class="line">mystr2 = &#x27;abc123&#x27;</span><br><span class="line">print(mystr2.isalnum())</span><br><span class="line"></span><br><span class="line"># 6. issapce(): 如果字符串只包含空白则返回True，否则返回False。</span><br><span class="line">print(mystr.isspace())</span><br><span class="line">mystr3 = &#x27;   &#x27;</span><br><span class="line">print(mystr3.isspace())</span><br></pre></td></tr></table></figure>

<h1 id="列表的常用操作"><a href="#列表的常用操作" class="headerlink" title="列表的常用操作"></a>列表的常用操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">name_list = [&#x27;Tom&#x27;, &#x27;Lily&#x27;, &#x27;Rose&#x27;]</span><br><span class="line"></span><br><span class="line"># 1. 列表中的查找 -- 下标</span><br><span class="line">print(name_list)</span><br><span class="line">print(name_list[1])</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 列表中的查找 -- 函数</span><br><span class="line"># （1）index()</span><br><span class="line">print(name_list.index(&#x27;Tom&#x27;))</span><br><span class="line"># print(name_list.index(&#x27;Toms&#x27;)) # 报错</span><br><span class="line"></span><br><span class="line"># （2）count()</span><br><span class="line">print(name_list.count(&#x27;Tom&#x27;))</span><br><span class="line">print(name_list.count(&#x27;Toms&#x27;))</span><br><span class="line"></span><br><span class="line"># （3）len() : 访问列表长度，即列表中数据的个数</span><br><span class="line">print(len(name_list))</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 3. 列表中的判断</span><br><span class="line"># （1）in: 判断指定数据在某个列表序列，如果在返回True,否则返回False.</span><br><span class="line">print(&#x27;Tom&#x27; in name_list)</span><br><span class="line">print(&#x27;Toms&#x27; in name_list)</span><br><span class="line"></span><br><span class="line"># （2）not in: 判断指定数据不在某个列表序列，如果不在返回True,否则返回False。</span><br><span class="line">print(&#x27;Tom&#x27; not in name_list)</span><br><span class="line">print(&#x27;Toms&#x27; not in name_list)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">name = input(&#x27;please input your name: &#x27;)</span><br><span class="line">if name in name_list:</span><br><span class="line">    print(&#x27;your name is already exist, please input again&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;congratulations!you can sign up!&#x27;)</span><br><span class="line">    </span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 4. 列表中的增加</span><br><span class="line"># （1）append(): 列表结尾追加数据</span><br><span class="line"># 语法：列表序列.append(数据)</span><br><span class="line"># name_list.append(&#x27;xiaoming&#x27;)</span><br><span class="line">print(name_list) # 列表数据是可改变的 -- 列表是可变类型</span><br><span class="line"># name_list.append([11,22])</span><br><span class="line">print(name_list) # 如果append()追加的数据是一个序列，则追加整个序列到列表</span><br><span class="line"></span><br><span class="line"># （2）extend(): 列表结尾追加数据，如果数据是一个序列，则将这个序列的数据逐一添加到列表。</span><br><span class="line"># name_list.extend(&#x27;xiaoming&#x27;)</span><br><span class="line"># name_list.extend([&#x27;xiaoming&#x27;, &#x27;xiaohong&#x27;])</span><br><span class="line"># print(name_list)</span><br><span class="line"></span><br><span class="line"># （3）inset(): 指定任意位置追加数据</span><br><span class="line"># 语法：列表序列.inset(位置下标，数据)</span><br><span class="line">name_list.insert(1, &#x27;aaa&#x27;)</span><br><span class="line">print(name_list)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 5. 列表中的删除</span><br><span class="line"># （1）del 目标</span><br><span class="line"># 删除列表</span><br><span class="line"># del name_list</span><br><span class="line"># rint(name_list)</span><br><span class="line"></span><br><span class="line"># 删除指定下标数据</span><br><span class="line"># del name_list[0]</span><br><span class="line"># print(name_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># （2）pop(): 删除指定下标的数据（默认为最后一个），并返回该数据</span><br><span class="line"># 语法：列表序列.pop(下标)</span><br><span class="line"># del_name = name_list.pop()</span><br><span class="line">del_name = name_list.pop(1)</span><br><span class="line">print(del_name)</span><br><span class="line">print(name_list)</span><br><span class="line"></span><br><span class="line"># （3）remove(): 移除列表中某个数据的第一个匹配项</span><br><span class="line"># 语法：列表序列.remove(数据)</span><br><span class="line"># name_list.remove(&#x27;Rose&#x27;)</span><br><span class="line"># print(name_list)</span><br><span class="line"></span><br><span class="line"># （4）clear(): 清空列表</span><br><span class="line">name_list.clear()</span><br><span class="line">print(name_list)</span><br></pre></td></tr></table></figure>

<h1 id="列表修改数据"><a href="#列表修改数据" class="headerlink" title="列表修改数据"></a>列表修改数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">name_list = [&#x27;Tom&#x27;, &#x27;Lily&#x27;, &#x27;Rose&#x27;]</span><br><span class="line"></span><br><span class="line"># 1. 修改指定下标的数据</span><br><span class="line"># name_list[0] = &#x27;aaa&#x27;</span><br><span class="line">print(name_list)</span><br><span class="line"></span><br><span class="line"># 2. 逆序 reverse()</span><br><span class="line">list1 = [1, 3, 2, 5, 4, 6]</span><br><span class="line">list1.reverse()</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line"># 3. sort(): 排序： 升序(默认)和降序</span><br><span class="line"># 语法： 列表序列.sort(key=None, reverse=False) reverse=True降序，reverse=False升序</span><br><span class="line">list1.sort()</span><br><span class="line">print(list1)</span><br><span class="line">list1.sort(reverse=True)</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------cutting line----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 列表的复制，函数：copy()</span><br><span class="line"></span><br><span class="line">list2 = name_list.copy()</span><br><span class="line">print(list2)</span><br><span class="line">print(name_list)</span><br></pre></td></tr></table></figure>

<h1 id="列表的循环遍历"><a href="#列表的循环遍历" class="headerlink" title="列表的循环遍历"></a>列表的循环遍历</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name_list = [&#x27;Tom&#x27;, &#x27;Lily&#x27;, &#x27;Rose&#x27;]</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------while loop----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">i = 0</span><br><span class="line">while i &lt; len(name_list):</span><br><span class="line">    print(name_list[i])</span><br><span class="line">    i += 1</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------for loop----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">for j in name_list:</span><br><span class="line">    print(j)</span><br></pre></td></tr></table></figure>

<h1 id="列表嵌套"><a href="#列表嵌套" class="headerlink" title="列表嵌套"></a>列表嵌套</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name_list = [[&#x27;xiaoming&#x27;, &#x27;xiaohong&#x27;, &#x27;xiaolv&#x27;],</span><br><span class="line">             [&#x27;TOM&#x27;, &#x27;LILY&#x27;, &#x27;ROSE&#x27;], [&#x27;ZHANGSAN&#x27;, &#x27;LISI&#x27;, &#x27;WANGER&#x27;]]</span><br><span class="line">print(name_list)</span><br><span class="line"></span><br><span class="line"># 列表嵌套时候的数据查询</span><br><span class="line">print(name_list[0])</span><br><span class="line">print(name_list[0][1])</span><br></pre></td></tr></table></figure>

<h1 id="综合应用-随机分配办公室"><a href="#综合应用-随机分配办公室" class="headerlink" title="综合应用-随机分配办公室"></a>综合应用-随机分配办公室</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># 需求： 8位老师， 3个办公室，将8位老师随机分配到3个办公室</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line"># 1. 准备数据</span><br><span class="line">teachers = [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;, &#x27;E&#x27;, &#x27;F&#x27;, &#x27;G&#x27;, &#x27;H&#x27;]</span><br><span class="line">offics = [[], [], []]</span><br><span class="line"></span><br><span class="line"># 2. 分配老师到办公室 -- 取到每个老师放到办公室列表 -- 遍历老师列表数据</span><br><span class="line">for name in teachers:</span><br><span class="line">    # 列表追加数据 -- append(选中), extend, insert</span><br><span class="line">    num = random.randint(0, 2)</span><br><span class="line">    offics[num].append(name)</span><br><span class="line"></span><br><span class="line">print(offics)</span><br><span class="line"></span><br><span class="line"># 给办公室编号</span><br><span class="line">i = 1</span><br><span class="line"># 3. 验证是否分配成功</span><br><span class="line">for offic in offics:</span><br><span class="line">    # 打印办公室人数 -- 子列表数据的个数， len()</span><br><span class="line">    print(f&#x27;The number of office&#123;i&#125; is &#123;len(offic)&#125;, 老师分别是： &#x27;)</span><br><span class="line">    # 打印老师的名字</span><br><span class="line">    # print() -- 每个子列表里面的名字个数不一定 -- 遍历 --子列表</span><br><span class="line">    for name in offic:</span><br><span class="line">        print(name)</span><br><span class="line">    i += 1</span><br></pre></td></tr></table></figure>

<h1 id="定义元组"><a href="#定义元组" class="headerlink" title="定义元组"></a>定义元组</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 元组是不可变类型，列表是可变类型</span><br><span class="line"># 1. 多个数据元组</span><br><span class="line">t1 = (10, 20, 30)</span><br><span class="line">print(type(t1))</span><br><span class="line"></span><br><span class="line"># 2. 单个数据元组</span><br><span class="line">t2 = (10,)</span><br><span class="line">print(type(t2))</span><br><span class="line"></span><br><span class="line"># 3. 如果单个数据的元组不加逗号</span><br><span class="line">t3 = (10)</span><br><span class="line">print(type(t3))</span><br><span class="line"></span><br><span class="line">t4 = (&#x27;aaa&#x27;)</span><br><span class="line">print(type(t4))</span><br><span class="line"></span><br><span class="line">t5 = (&#x27;aaa&#x27;,)</span><br><span class="line">print(type(t5))</span><br></pre></td></tr></table></figure>

<h1 id="元组的常见操作"><a href="#元组的常见操作" class="headerlink" title="元组的常见操作"></a>元组的常见操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">t1 = (&#x27;aa&#x27;, &#x27;bb&#x27;, &#x27;cc&#x27;, &#x27;dd&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------元组的查找----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 下标</span><br><span class="line">print(t1[0])</span><br><span class="line"></span><br><span class="line"># 2. index()</span><br><span class="line">print(t1.index(&#x27;bb&#x27;))</span><br><span class="line">#print(t1.index(&#x27;bbb&#x27;))</span><br><span class="line"></span><br><span class="line"># 3. count()</span><br><span class="line">print(t1.count(&#x27;aa&#x27;))</span><br><span class="line">print(t1.count(&#x27;aaa&#x27;))</span><br><span class="line"></span><br><span class="line"># 4. len()</span><br><span class="line">print(len(t1))</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------元组的修改----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 元组内的直接数据修改则立即报错</span><br><span class="line"># t1[0] = &#x27;aaa&#x27;</span><br><span class="line"></span><br><span class="line"># 元组里面的列表支持修改</span><br><span class="line">t2 = (&#x27;aa&#x27;, &#x27;bb&#x27;, [&#x27;cc&#x27;, &#x27;dd&#x27;])</span><br><span class="line">print(t2[2])</span><br><span class="line">print(t2[2][0])</span><br><span class="line">t2[2][0] = &#x27;TOM&#x27;</span><br><span class="line">print(t2)</span><br></pre></td></tr></table></figure>

<h1 id="创建字典的语法"><a href="#创建字典的语法" class="headerlink" title="创建字典的语法"></a>创建字典的语法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"> 字典的特点：</span><br><span class="line"> (1) 符号为大括号</span><br><span class="line"> (2) 数据为键值对形式出现</span><br><span class="line"> (3) 各个键值对之间用逗号隔开</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 1. 有数据字典，name的值TOM，age的值是20，gender的值是男</span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 20, &#x27;gender&#x27;: &#x27;male&#x27;&#125;</span><br><span class="line">print(type(dict1))</span><br><span class="line"></span><br><span class="line"># 2. 创建空字典</span><br><span class="line">dict2 = &#123;&#125;</span><br><span class="line">print(type(dict2))</span><br><span class="line"></span><br><span class="line">dict3 = dict()  # dict()函数创建</span><br><span class="line">print(type(dict3))</span><br></pre></td></tr></table></figure>

<h1 id="字典常见操作"><a href="#字典常见操作" class="headerlink" title="字典常见操作"></a>字典常见操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;--------------------字典的增加与修改----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">写法：字典序列[key]=值</span><br><span class="line">注意：如果key存在则修改这个key对应的值，如果key不存在则新增此键值对</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 20, &#x27;gender&#x27;: &#x27;male&#x27;&#125;</span><br><span class="line"># 字典序列[key] = 值</span><br><span class="line"># id的值是110</span><br><span class="line">dict1[&#x27;id&#x27;] = 110</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line">dict1[&#x27;name&#x27;] = &#x27;Rose&#x27;</span><br><span class="line">print(dict1) # 字典是可变类型</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------字典的删除----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># del 删除字典或指定的键值对</span><br><span class="line"># del(dict1)</span><br><span class="line"># print(dict1)</span><br><span class="line"></span><br><span class="line">del dict1[&#x27;name&#x27;]</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"># clear() 清空字典</span><br><span class="line">dict1.clear()</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------字典的查找----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">dict2 = &#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 20, &#x27;gender&#x27;: &#x27;male&#x27;&#125;</span><br><span class="line"># 1. Key值查找</span><br><span class="line">print(dict2[&#x27;name&#x27;]) # 返回对应的值（Key存在）</span><br><span class="line"># print(dict1[&#x27;names&#x27;]) # key不存在，报错</span><br><span class="line"></span><br><span class="line"># 2. 函数</span><br><span class="line"># 2.1 get()</span><br><span class="line">print(dict2.get(&#x27;name&#x27;))</span><br><span class="line">print(dict2.get(&#x27;names&#x27;)) # 如果key不存在，返回None</span><br><span class="line">print(dict2.get(&#x27;names&#x27;, &#x27;Lily&#x27;))</span><br><span class="line"></span><br><span class="line"># 2.2 keys() -- 查找字典中所有的key，返回可迭代对象</span><br><span class="line">print(dict2.keys())</span><br><span class="line"></span><br><span class="line"># 2.3 values() -- 查找字典中所有值，返回可迭代对象</span><br><span class="line">print(dict2.values())</span><br><span class="line"></span><br><span class="line"># 2.4 items() -- 查找字典中所有的键值对，返回可迭代对象，里面的数据是元组，</span><br><span class="line"># 元组数据1是字典的key，元组数据2是字典key所对应的值</span><br><span class="line">print(dict2.items())</span><br></pre></td></tr></table></figure>

<h1 id="字典的循环遍历"><a href="#字典的循环遍历" class="headerlink" title="字典的循环遍历"></a>字典的循环遍历</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 20, &#x27;gender&#x27;: &#x27;male&#x27;&#125;</span><br><span class="line"></span><br><span class="line"># 1. 遍历字典的key</span><br><span class="line">for key in dict1.keys():</span><br><span class="line">    print(key)</span><br><span class="line"></span><br><span class="line"># 2. 遍历字典的value</span><br><span class="line">for value in dict1.values():</span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line"># 3. 遍历字典的元素</span><br><span class="line">for item in dict1.items():</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line"># 4. 遍历字典的键值对（拆包）</span><br><span class="line"># items() -- 查找字典中所有的键值对，返回可迭代对象，里面的数据是元组，</span><br><span class="line"># 元组数据1是字典的key，元组数据2是字典key所对应的值</span><br><span class="line">for key, value in dict1.items():</span><br><span class="line">    print(key)</span><br><span class="line">    print(value)</span><br><span class="line">    print(f&#x27;&#123;key&#125; = &#123;value&#125;&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 1. 创建有数据的集合</span><br><span class="line">s1 = &#123;10, 20, 30, 40, 50&#125;</span><br><span class="line">print(s1)</span><br><span class="line"></span><br><span class="line">s2 = &#123;10, 30, 20, 40, 30, 20&#125;</span><br><span class="line">print(s2)</span><br><span class="line"></span><br><span class="line">s3 = set(&#x27;abcdefg&#x27;)</span><br><span class="line">print(s3)</span><br><span class="line"></span><br><span class="line"># 2. 创建空集合</span><br><span class="line">s4 = set()</span><br><span class="line">print(s4)</span><br><span class="line">print(type(s4))</span><br><span class="line"></span><br><span class="line">s5 = &#123;&#125; # &#123;&#125;创建空字典</span><br><span class="line">print(type(s5))</span><br></pre></td></tr></table></figure>

<h1 id="集合的常见操作"><a href="#集合的常见操作" class="headerlink" title="集合的常见操作"></a>集合的常见操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;--------------------数据的增加----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">s1 = &#123;10, 20&#125;</span><br><span class="line"># 1. add() -- 增加</span><br><span class="line">s1.add(100)</span><br><span class="line">print(s1) # 集合是可变类型</span><br><span class="line"># 集合有去重功能，如果增加的数据是集合中已有数据，则无效</span><br><span class="line">s1.add(100)</span><br><span class="line">print(s1)</span><br><span class="line">#s1.add([10, 20, 30]) # 不能增加数据序列，报错</span><br><span class="line"># print(s1)</span><br><span class="line"></span><br><span class="line"># 2. update() -- 增加数据序列</span><br><span class="line">s2 = &#123;10, 20&#125;</span><br><span class="line">s2.update([10, 20, 30, 40, 50])</span><br><span class="line">print(s2)</span><br><span class="line"># s2.update(100) # update不能增加单一数据，报错</span><br><span class="line"># print(s2)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------数据的删除----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">s3 = &#123;10, 20, 30, 40, 50&#125;</span><br><span class="line"></span><br><span class="line"># （1）remove()：删除指定数据，如果数据不存在则报错</span><br><span class="line"># s3.remove(10)</span><br><span class="line"># print(s3)</span><br><span class="line"></span><br><span class="line"># s3.remove(10) # 报错</span><br><span class="line"># print(s3)</span><br><span class="line"></span><br><span class="line"># （2）discard(): 删除指定数据，如果数据不存在不报错</span><br><span class="line"># s3.discard(10)</span><br><span class="line"># print(s3)</span><br><span class="line"></span><br><span class="line"># s3.discard(10) # 不存在也不报错</span><br><span class="line"># print(s3)</span><br><span class="line"></span><br><span class="line"># （3）pop(): 随机删除某个数据，并返回这个数据</span><br><span class="line">del_num = s3.pop()</span><br><span class="line">print(del_num)</span><br><span class="line">print(s3)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------集合的查找----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">s4 = &#123;10, 20, 30, 40, 50&#125;</span><br><span class="line"># in 或 not in 判断数据是否存在</span><br><span class="line">print(10 in s4)</span><br><span class="line"></span><br><span class="line">print(10 not in s4)</span><br></pre></td></tr></table></figure>

<h1 id="公共操作之运算符"><a href="#公共操作之运算符" class="headerlink" title="公共操作之运算符"></a>公共操作之运算符</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">str1 = &#x27;aa&#x27;</span><br><span class="line">str2 = &#x27;bb&#x27;</span><br><span class="line"></span><br><span class="line">list1 = [1, 2]</span><br><span class="line">list2 = [10, 20]</span><br><span class="line"></span><br><span class="line">t1 = (1, 2)</span><br><span class="line">t2 = (10, 20)</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;python&#x27;&#125;</span><br><span class="line">dict2 = &#123;&#x27;age&#x27;: 30&#125;</span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------- +: 合并----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">print(str1 + str2)</span><br><span class="line">print(list1 + list2)</span><br><span class="line">print(t1 + t2)</span><br><span class="line"># print(dict1 + dict2) # 报错：字典不支持合并运算</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------- *: 复制----------------------&#x27;)</span><br><span class="line"># 不支持字典操作</span><br><span class="line">str1 = &#x27;a&#x27;</span><br><span class="line">list1 = [&#x27;hello&#x27;]</span><br><span class="line">t1 = (&#x27;world&#x27;,)</span><br><span class="line"></span><br><span class="line">print(str1 * 5)</span><br><span class="line"></span><br><span class="line"># 打印10个-：</span><br><span class="line">print(&#x27;-&#x27; * 10)</span><br><span class="line">print(list1 * 5)</span><br><span class="line">print(t1 * 5)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------- in, not in: 判断数据是否存在------------------&#x27;)</span><br><span class="line"># 支持字典操作</span><br><span class="line">str1 = &#x27;abcd&#x27;</span><br><span class="line">list1 = [10, 20, 30, 40]</span><br><span class="line">t1 = (100, 200, 300, 400)</span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;python&#x27;, &#x27;age&#x27;: 30&#125;</span><br><span class="line">print(&#x27;a&#x27; in str1)</span><br><span class="line">print(&#x27;a&#x27; not in str1)</span><br><span class="line"></span><br><span class="line">print(10 in list1)</span><br><span class="line">print(10 not in list1)</span><br><span class="line"></span><br><span class="line">print(100 in t1)</span><br><span class="line">print(100 not in t1)</span><br><span class="line"></span><br><span class="line">print(&#x27;name&#x27; in dict1)</span><br><span class="line">print(&#x27;name&#x27; not in dict1)</span><br><span class="line">print(&#x27;name&#x27; in dict1.keys())</span><br><span class="line">print(&#x27;name&#x27; in dict1.values())</span><br></pre></td></tr></table></figure>

<h1 id="公共方法之len-del-max-min-range-enumerate"><a href="#公共方法之len-del-max-min-range-enumerate" class="headerlink" title="公共方法之len, del,  max-min, range, enumerate"></a>公共方法之len, del,  max-min, range, enumerate</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">str1 = &#x27;abcdefg&#x27;</span><br><span class="line">list1 = [10, 20, 30, 40 ,50]</span><br><span class="line">t1 = (10, 20, 30, 40, 50)</span><br><span class="line">s1 = &#123;10, 20, 30, 40, 50&#125;</span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 18&#125;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------len: 计算容器中元素的个数--------------&#x27;)</span><br><span class="line"></span><br><span class="line">print(len(str1))</span><br><span class="line">print(len(list1))</span><br><span class="line">print(len(t1))</span><br><span class="line">print(len(t1))</span><br><span class="line">print(len(dict1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------del: 删除--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># del 目标 或 del(目标)</span><br><span class="line"># del str1</span><br><span class="line"># print(str1)</span><br><span class="line"></span><br><span class="line"># del(list1)</span><br><span class="line"># print(list1)</span><br><span class="line"></span><br><span class="line"># del(list1[0])</span><br><span class="line"># print(list1)</span><br><span class="line"></span><br><span class="line">del dict1[&#x27;name&#x27;]</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-------------max and min: 返回容器中的最大值和最小值--------------&#x27;)</span><br><span class="line"></span><br><span class="line">print(max(str1))</span><br><span class="line">print(max(list1))</span><br><span class="line">print(min(s1))</span><br><span class="line">print(min(t1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-------------range(start, end, step)--------------&#x27;)</span><br><span class="line"># 生成从start到end的数字，步长为step，供for循环使用</span><br><span class="line"># 不包含end数字，规则与切片类似，默认从0开始，默认步长为1</span><br><span class="line">print(range(1, 10, 1))</span><br><span class="line">for i in range(1, 10, 1):</span><br><span class="line">    print(i)</span><br><span class="line">print(&#x27;-&#x27; * 10)</span><br><span class="line"></span><br><span class="line">for j in range(1, 10):</span><br><span class="line">    print(j)</span><br><span class="line">print(&#x27;-&#x27; * 10)</span><br><span class="line">for h in range(1, 10, 2):</span><br><span class="line">    print(h)</span><br><span class="line">print(&#x27;-&#x27; * 10)</span><br><span class="line">for k in range(10):</span><br><span class="line">    print(k)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-------------enumerate()--------------&#x27;)</span><br><span class="line"># 函数用于将一个可遍历的数据对象（列表，元组，字符串）组合为一个索引序列，</span><br><span class="line"># 同时列出数据和数据下标，一般用在for循环当中</span><br><span class="line"># 语法： enumerate(可遍历对象， start=0)</span><br><span class="line"># start参数用来设置遍历数据的下标的起始值，默认为0</span><br><span class="line"># 返回数据是元组，元组的第一个数据是原迭代对象的数据对应的下标，</span><br><span class="line"># 第二个则是原迭代对象的数据</span><br><span class="line">for i in enumerate(list1):</span><br><span class="line">    print(i)</span><br><span class="line">print(&#x27;-&#x27; * 10)</span><br><span class="line">for j in enumerate(list1, start=1):</span><br><span class="line">    print(j)</span><br></pre></td></tr></table></figure>

<h1 id="容器类型转换"><a href="#容器类型转换" class="headerlink" title="容器类型转换"></a>容器类型转换</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">list1 = [10, 20, 30, 20, 40, 50]</span><br><span class="line">s1 = &#123;100, 300, 200, 500&#125;</span><br><span class="line">t1 = (&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. tuple()：转换成元组</span><br><span class="line">print(type(tuple(list1)))</span><br><span class="line">print(tuple(list1))</span><br><span class="line">print(tuple(s1))</span><br><span class="line"></span><br><span class="line"># 2. list()：转换成列表</span><br><span class="line">print(list(s1))</span><br><span class="line">print(list(t1))</span><br><span class="line"></span><br><span class="line"># 3. set(): 转换成集合（去重，不支持下标）</span><br><span class="line">print(set(list1))</span><br><span class="line">print(set(t1))</span><br></pre></td></tr></table></figure>

<h1 id="推导式"><a href="#推导式" class="headerlink" title="推导式"></a>推导式</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"># 列表、字典、集合支持推导式</span><br><span class="line"># 作用：用一个表达式创建一个有规律的列表或控制一个有规律的列表（又叫列表生成式，简化代码）</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------while循环创建有规律的列表--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 创建一个0-10的列表</span><br><span class="line"># 1. 准备一个空列表</span><br><span class="line">list1 = []</span><br><span class="line"># 2. 循环将有规律的数据写入列表</span><br><span class="line">i = 0</span><br><span class="line">while i &lt; 10:</span><br><span class="line">    list1.append(i)</span><br><span class="line">    i += 1</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------for循环创建有规律的列表--------------&#x27;)</span><br><span class="line">list1 = []</span><br><span class="line">for j in range(10):</span><br><span class="line">    list1.append(j)</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------列表推导式创建有规律的列表--------------&#x27;)</span><br><span class="line"></span><br><span class="line">list1 = [i for i in range(10)]</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line">print([i for i in range(10)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------带if的列表推导式--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 创建0-10的偶数列表</span><br><span class="line"># 1. range()步长实现</span><br><span class="line">list1 = [i for i in range(0, 10, 2)]</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line"># 2. if实现</span><br><span class="line">list2 = []</span><br><span class="line">for i in range(10):</span><br><span class="line">    if i % 2 == 0:</span><br><span class="line">        list2.append(i)</span><br><span class="line">print(list2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. 把for循环配合if的代码，改写成带if的列表推导式</span><br><span class="line">list3 = [i for i in range(10) if i % 2 == 0]</span><br><span class="line">print(list3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------多个for循环实现列表推导式--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 创建列表如下：[(1, 0),(1, 1),(1, 2),(2, 0),(2, 1),(2, 2)]</span><br><span class="line"># 数据1: 1,2 range(1,3)</span><br><span class="line"># 数据2：0，1，2 range(3)</span><br><span class="line">list1 = []</span><br><span class="line">for i in range(1, 3):</span><br><span class="line">    for j in range(3):</span><br><span class="line">        # 列表里面追加元组：循环前准备一个空列表，然后追加元组数据到列表</span><br><span class="line">        list1.append((i, j))</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line"># 多个for实现列表推导式</span><br><span class="line">list2 = [(i, j) for i in range(1, 3) for j in range(3)]</span><br><span class="line">print(list2)</span><br><span class="line"></span><br><span class="line">print([(i, j) for i in range(1, 3) for j in range(3)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------字典推导式--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 字典推导式作用：快速合并列表为字典或提取字典中目标数据</span><br><span class="line"># 1. 创建一个字典：字典key是1-5的数字，value是这个数字的2次方</span><br><span class="line">dict1 = &#123;i: i**2 for i in range(1, 5)&#125;</span><br><span class="line">print(dict1)</span><br><span class="line">print(type(dict1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 将两个列表合并为一个字典</span><br><span class="line">list1 = [&#x27;name&#x27;, &#x27;age&#x27;, &#x27;gender&#x27;, &#x27;id&#x27;]</span><br><span class="line">list2 = [&#x27;TOM&#x27;, 20, &#x27;male&#x27;]</span><br><span class="line"></span><br><span class="line">dict1 = &#123;list1[i]: list2[i] for i in range(len(list2))&#125;</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"># (1). 如果两个列表数据个数相同，len统计任何一个列表的长度都可以</span><br><span class="line"># (2). 如果两个列表数据个数不同，len统计数据多的列表会报错，统计数据少的列表则不会报错</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. 提取字典中目标数据</span><br><span class="line">counts = &#123;&#x27;MBP&#x27;: 268, &#x27;HP&#x27;: 125, &#x27;DELL&#x27;: 201, &#x27;Lenovo&#x27;: 199, &#x27;acer&#x27;: 99&#125;</span><br><span class="line"></span><br><span class="line"># 1. 提取上述电脑数量大于等于200的字典数据</span><br><span class="line"># 获取所有键值对数据，判断value大于等于200，返回 字典</span><br><span class="line">count1 = &#123;key: value for key, value in counts.items() if value &gt; 200&#125;</span><br><span class="line">print(count1)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------集合推导式--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 创建一个集合，数据为下方列表的2次方</span><br><span class="line">list1 = [1, 1, 2]</span><br><span class="line">set1 = &#123;i ** 2 for i in list1&#125;</span><br><span class="line">print(set1) # &#123;1, 1, 4&#125;去重则为&#123;1, 4&#125;</span><br></pre></td></tr></table></figure>

<h1 id="局部变量和全局变量"><a href="#局部变量和全局变量" class="headerlink" title="局部变量和全局变量"></a>局部变量和全局变量</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 局部变量：定义在函数体内部，只在函数体内部生效</span><br><span class="line"># 作用：在函数体内部，临时保存数据，当函数调用完成后，则销毁局部变量</span><br><span class="line"></span><br><span class="line"># 全局变量：在函数体内，外都能生效的变量</span><br><span class="line"></span><br><span class="line"># 修改全局变量</span><br><span class="line"></span><br><span class="line">a = 100</span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">def testA():</span><br><span class="line">    print(a)</span><br><span class="line"></span><br><span class="line">def testB():</span><br><span class="line">    a = 200 # 修改的a是局部变量，没有修改到全局变量的a</span><br><span class="line">    print(a)</span><br><span class="line"></span><br><span class="line">def testC():</span><br><span class="line">    # 声明a为全局变量用global</span><br><span class="line">    global a</span><br><span class="line">    a = 200 # 此时修改的是全局变量a</span><br><span class="line">    print(a)</span><br><span class="line"></span><br><span class="line">testA()</span><br><span class="line">testB()</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">testC()</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"># 作用：可以更高效的实现代码重用</span><br><span class="line"></span><br><span class="line"># 步骤：1. 定义函数 def 函数名(参数)：2.调用函数 函数名(参数) -- 参数按需求可写可不写</span><br><span class="line"># 注意：1. 函数先定义后调用，如果先调用会报错；2. 如果不调用函数，函数里面的代码不会执行</span><br><span class="line"># 3. 函数执行流程：当调用函数的时候，解释器回到定义函数的地方去执行下方缩进的代码，当这些代码执行完，</span><br><span class="line"># 回到调用函数的地方继续向下执行</span><br><span class="line"># 定义函数的时候，函数体内部缩进的代码并没有执行</span><br><span class="line"></span><br><span class="line"># 实例：ATM机功能展示</span><br><span class="line"></span><br><span class="line"># 因为函数需要先定义再调用，所以步骤2、3需要在步骤1上面书写</span><br><span class="line"># 2. 确定选择功能界面 # 3. 封装函数</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">def sel_func():</span><br><span class="line">    print(&#x27;TouchBalance&#x27;)</span><br><span class="line">    print(&#x27;deposit&#x27;)</span><br><span class="line">    print(&#x27;withdrawal&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 搭建整体框架</span><br><span class="line">print(&#x27;login success&#x27;)</span><br><span class="line">sel_func() # 4. 调用函数</span><br><span class="line"></span><br><span class="line">print(&#x27;Your balance is 100 dollars&#x27;)</span><br><span class="line">sel_func() # 4. 调用函数</span><br><span class="line"></span><br><span class="line">print(&#x27;You\&#x27;ve just withdrawn a hundred dollars&#x27;)</span><br><span class="line">sel_func() # 4. 调用函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数的参数作用--------------&#x27;)</span><br><span class="line">def add_num(num1, num2): # 定义函数时接收数据，形参</span><br><span class="line">    result = num1 + num2</span><br><span class="line">    print(result)</span><br><span class="line"></span><br><span class="line">num1 = int(input(&#x27;please input number:  &#x27;))</span><br><span class="line"></span><br><span class="line">num2 = int(input(&#x27;please input number:  &#x27;))</span><br><span class="line"></span><br><span class="line">add_num(num1, num2) # 调用函数时传入真实数据，实参</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数的返回值作用--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 定义一个函数，返回 烟</span><br><span class="line">def buy():</span><br><span class="line">    return &#x27;smoke&#x27;</span><br><span class="line">    print(&#x27;ok&#x27;)</span><br><span class="line"># 使用变量保存返回值</span><br><span class="line">goods = buy()</span><br><span class="line">print(goods)</span><br><span class="line"></span><br><span class="line"># return的作用：1. 负责函数返回值， 2. 退出当前函数，导致return下方的所有代码（函数体内部）不执行</span><br><span class="line"></span><br><span class="line"># 实例：制作加法计算器</span><br><span class="line"></span><br><span class="line">def add_num(a, b):</span><br><span class="line">    result = a + b</span><br><span class="line">    return result</span><br><span class="line"></span><br><span class="line">sum = add_num(1, 2)</span><br><span class="line">print(sum)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数的说明文档--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># help(len) # help函数作用：查看函数的说明文档</span><br><span class="line"># 语法：</span><br><span class="line">def 函数名(参数):</span><br><span class="line">    &quot;&quot;&quot;说明文档位置&quot;&quot;&quot;</span><br><span class="line">    代码</span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">查看说明文档：help(函数名)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sum(a, b):</span><br><span class="line">    &quot;&quot;&quot;The sum function&quot;&quot;&quot;</span><br><span class="line">    return a + b</span><br><span class="line">help(sum)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 函数说明文档的高级使用--&quot;&quot;&quot;回车&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">def sum1(a, b):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    The sum function</span><br><span class="line">    :param a: parameter参数1</span><br><span class="line">    :param b: 参数2</span><br><span class="line">    :return: 返回值</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    return a + b</span><br><span class="line">help(sum1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数的嵌套调用--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 指一个函数里面又调用另一个函数</span><br><span class="line"></span><br><span class="line"># 打印一条横线</span><br><span class="line">def print_line():</span><br><span class="line">    print(&#x27;-&#x27; * 20)</span><br><span class="line"># print_line()</span><br><span class="line"></span><br><span class="line"># 打印多条横线</span><br><span class="line"></span><br><span class="line">def print_lines(num):</span><br><span class="line">    i = 0</span><br><span class="line">    while i &lt; num:</span><br><span class="line">        print_line()</span><br><span class="line">        i += 1</span><br><span class="line">print_lines(5)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 任意三个数之和</span><br><span class="line">def sum_num(a, b, c):</span><br><span class="line">    return a + b + c</span><br><span class="line"></span><br><span class="line">result = sum_num(1, 2, 3)</span><br><span class="line"># print(result)</span><br><span class="line"></span><br><span class="line"># 任意三个数求平均值</span><br><span class="line">def average_num(a, b, c):</span><br><span class="line">    sumresult = sum_num(a, b, c)</span><br><span class="line">    return sumresult / 3</span><br><span class="line"></span><br><span class="line">averageresult = average_num(1, 2, 3)</span><br><span class="line">print(averageresult)</span><br></pre></td></tr></table></figure>

<h1 id="函数的常见操作"><a href="#函数的常见操作" class="headerlink" title="函数的常见操作"></a>函数的常见操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------返回值作为参数传递--------------&#x27;)</span><br><span class="line"></span><br><span class="line">def test1():</span><br><span class="line">    return 50</span><br><span class="line"></span><br><span class="line">def test2(num):</span><br><span class="line">    print(num)</span><br><span class="line"># 把函数一的返回值作为参数传入函数二</span><br><span class="line">result = test1()</span><br><span class="line">test2(result)</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数的返回值--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1.有多个return的函数的执行流程</span><br><span class="line">def return_num():</span><br><span class="line">    return 1  # 只执行第一个return，这种形式无法做到一个函数多个返回值</span><br><span class="line">    return 2</span><br><span class="line">result = return_num()</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 多个返回值的正确写法</span><br><span class="line"></span><br><span class="line">def return_num():</span><br><span class="line">    # return 1, 2 # 返回的默认是元组，还可以是列表，字典</span><br><span class="line">    # return (10, 20)</span><br><span class="line">    # return [100, 200]</span><br><span class="line">    return &#123;&#x27;name&#x27;: &#x27;python&#x27;, &#x27;age&#x27;: 30&#125;</span><br><span class="line"></span><br><span class="line">result = return_num()</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数参数之位置参数--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 位置参数：调用函数时根据函数定义的参数位置来传递参数</span><br><span class="line"># 传递和定义参数的顺序及个数必须一致</span><br><span class="line"></span><br><span class="line">def user_info(name, age, gender):</span><br><span class="line">    print(f&#x27;your name is &#123;name&#125;, age is &#123;age&#125;, gender is &#123;gender&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"># user_info(&#x27;TOM&#x27;, 20, &#x27;male&#x27;)</span><br><span class="line"># user_info(&#x27;TOM&#x27;, 20) # 个数不一致会报错</span><br><span class="line">user_info(20, &#x27;TOM&#x27;, &#x27;male&#x27;) # 顺序必须一致，否则无意义</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数参数之关键字参数--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 关键字参数通过“键=值”加以指定</span><br><span class="line"># 如果有位置参数时，位置参数必须在关键字参数的前面，但关键字参数之间不存在先后顺序</span><br><span class="line"></span><br><span class="line">def user_info(name, age, gender):</span><br><span class="line">    print(f&#x27;your name is &#123;name&#125;, age is &#123;age&#125;, gender is &#123;gender&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">user_info(&#x27;rose&#x27;, age=20, gender=&#x27;female&#x27;)</span><br><span class="line">user_info(&#x27;xiaoming&#x27;, gender=&#x27;male&#x27;, age=18)</span><br><span class="line"># user_info(age=20, gender=&#x27;male&#x27;, &#x27;TOM&#x27;) # 位置参数在关键字参数之后会报错</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数参数之缺省参数--------------&#x27;)</span><br><span class="line"># 即默认参数，用于定义函数，为参数提供默认值，调用函数时可不传该默认参数的值</span><br><span class="line"># 所有位置参数必须在默认参数前，包括函数定义和调用</span><br><span class="line"></span><br><span class="line">def user_info(name, age, gender=&#x27;male&#x27;):</span><br><span class="line">    print(f&#x27;your name is &#123;name&#125;, age is &#123;age&#125;, gender is &#123;gender&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">user_info(&#x27;TOM&#x27;, 20) # 没有为缺省参数传值，使用默认参数的值</span><br><span class="line">user_info(&#x27;rose&#x27;, 18, &#x27;female&#x27;) # 如果为缺省参数传值，则修改该默认参数的值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------函数参数之不定长参数--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 用于不确定传递多少个参数的场景，可用包裹位置参数，或者包裹关键字参数</span><br><span class="line"></span><br><span class="line"># 1. 包裹位置传递</span><br><span class="line"># 接收所有位置参数，返回一个元组</span><br><span class="line">def user_info(*args):</span><br><span class="line">    print(args)</span><br><span class="line"></span><br><span class="line">user_info(&#x27;TOM&#x27;)</span><br><span class="line">user_info(&#x27;TOM&#x27;, 20)</span><br><span class="line">user_info(&#x27;TOM&#x27;, 20, &#x27;man&#x27;)</span><br><span class="line">user_info()</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 2. 包裹关键字传递</span><br><span class="line"># 接收所有关键字参数，返回一个字典</span><br><span class="line">def user_info(**kwargs):</span><br><span class="line">    print(kwargs)</span><br><span class="line"></span><br><span class="line">user_info()</span><br><span class="line">user_info(name=&#x27;TOM&#x27;)</span><br><span class="line">user_info(name=&#x27;TOM&#x27;, age=20)</span><br></pre></td></tr></table></figure>

<h1 id="拆包和交换变量值"><a href="#拆包和交换变量值" class="headerlink" title="拆包和交换变量值"></a>拆包和交换变量值</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------拆包--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 拆包元组数据</span><br><span class="line">def return_num():</span><br><span class="line">    return 100, 200</span><br><span class="line"></span><br><span class="line">result = return_num()</span><br><span class="line">print(result)</span><br><span class="line">num1, num2 = return_num() # 用多个变量接收元组数据</span><br><span class="line">print(num1)</span><br><span class="line">print(num2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 拆包字典数据</span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 20&#125;</span><br><span class="line"></span><br><span class="line">a, b = dict1 # 变量存储的数据是key值</span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">print(dict1[a])</span><br><span class="line">print(dict1[b])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------交换变量值--------------&#x27;)</span><br><span class="line"></span><br><span class="line">a = 10</span><br><span class="line">b = 20</span><br><span class="line"></span><br><span class="line"># 1. 方法一：借助第三变量存储数据</span><br><span class="line">c = 0</span><br><span class="line">c = a</span><br><span class="line">a = b</span><br><span class="line">b = c</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 2. 方法二：</span><br><span class="line">a, b = 1, 2</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line">a, b = b, a</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>

<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"># 在python中，值是靠引用来传递的</span><br><span class="line"># 可以用id()来判断两个变量是否为同一个值的引用，可以将id值理解为那块内存的地址标识</span><br><span class="line"></span><br><span class="line"># 可变与不可变</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 1. 不可变：int:  1.1 声明变量保存整型数据，把这个数据赋值到另一个变量，</span><br><span class="line"># id()检测两个变量的id值（内存的十进制值）</span><br><span class="line">a = 1</span><br><span class="line">b = a</span><br><span class="line">print(b)</span><br><span class="line">print(id(a))</span><br><span class="line">print(id(b)) # a和b的id值相同</span><br><span class="line"># 修改a的数据测试id值</span><br><span class="line">a = 2</span><br><span class="line"></span><br><span class="line">print(b)</span><br><span class="line">print(id(a)) # 修改了a的值，则内存地址也改变</span><br><span class="line">print(id(b))</span><br><span class="line"></span><br><span class="line"># 2. 可变类型：列表</span><br><span class="line">aa = [10, 20]</span><br><span class="line">bb = aa</span><br><span class="line"></span><br><span class="line">print(bb)</span><br><span class="line">print(id(aa))</span><br><span class="line">print(id(bb))</span><br><span class="line"></span><br><span class="line">aa.append(30)</span><br><span class="line">print(aa)</span><br><span class="line">print(bb) # 列表是可变类型，aa改变则bb也同样改变，修改aa是修改的列表原数据</span><br><span class="line"></span><br><span class="line">print(id(aa))</span><br><span class="line">print(id(bb)) # 值改变，而内存地址不变</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------引用当作实参--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求： 验证引用是否可以当作实参</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">1. 定义函数：有形参</span><br><span class="line">    1.1 访问打印形参看是否有数据</span><br><span class="line">    1.2 访问形参的id</span><br><span class="line">    1.3 改变形参的数据，查看这个形参并打印id，看id值是否相同</span><br><span class="line">2. 调用函数 -- 把可变与不可变两种类型依次当作实参传入</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">def test1(a):</span><br><span class="line">    print(a)</span><br><span class="line">    print(id(a))</span><br><span class="line"></span><br><span class="line">    a += a</span><br><span class="line">    print(a)</span><br><span class="line">    print(id(a))</span><br><span class="line"></span><br><span class="line">b = 100</span><br><span class="line">test1(b) # id值改变，不可变类型</span><br><span class="line"></span><br><span class="line">c = [11, 22]</span><br><span class="line">test1(c) # id值不改变，可变类型</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------可变与不可变类型--------------&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 可变类型：原数据能够直接进行修改</span><br><span class="line">包括列表，字典，集合</span><br><span class="line"></span><br><span class="line"># 不可变类型：原数据不能够直接进行修改</span><br><span class="line">包括整型，浮点型，字符串，元组</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 递归是一种编程思想，通常用在遍历一个文件夹下面的所有文件，或快速排序算法等等</span><br><span class="line"># 特点：1. 函数内部自己调用自己。 2. 必须有出口</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------递归之回顾函数返回值--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># return 返回的位置: 函数调用的位置</span><br><span class="line"></span><br><span class="line"># 应用：3 以内数字累加和</span><br><span class="line"></span><br><span class="line">def sum_numbers(num):</span><br><span class="line">    # 2. 出口 -- 如果没有出口则报错：超出最大递归深度</span><br><span class="line">    if num == 1:</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line">    # 1. 当前数字 + 当前数字-1的累加和(函数内部自己调用自己)</span><br><span class="line">    return num + sum_numbers(num-1)</span><br><span class="line"></span><br><span class="line">result = sum_numbers(3)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<h1 id="函数加强之应用：学员管理系统"><a href="#函数加强之应用：学员管理系统" class="headerlink" title="函数加强之应用：学员管理系统"></a>函数加强之应用：学员管理系统</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"># 定义显示界面函数</span><br><span class="line">def info_print():</span><br><span class="line">    print(&#x27;please choose items-------&#x27;)</span><br><span class="line">    print(&#x27;1. add student&#x27;)</span><br><span class="line">    print(&#x27;2. delete student&#x27;)</span><br><span class="line">    print(&#x27;3. modify student&#x27;)</span><br><span class="line">    print(&#x27;4. query student&#x27;)</span><br><span class="line">    print(&#x27;5. display all students&#x27;)</span><br><span class="line">    print(&#x27;6. exit&#x27;)</span><br><span class="line">    print(&#x27;-&#x27; *20)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 声明一个空列表存储所有学员的信息</span><br><span class="line">info = []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 添加学员信息的函数</span><br><span class="line">def add_info():</span><br><span class="line">    &quot;&quot;&quot;添加学员函数&quot;&quot;&quot;</span><br><span class="line">    # 1. 用户输入：学号，姓名，手机号</span><br><span class="line">    new_id = input(&#x27;please input student id:  &#x27;)</span><br><span class="line">    new_name = input(&#x27;please input student name:  &#x27;)</span><br><span class="line">    new_tel = input(&#x27;please input student tel:  &#x27;)</span><br><span class="line">    # 2. 判断是否添加这个学员：若存在则提示报错，否则添加这个学员</span><br><span class="line">    global info</span><br><span class="line">    # 2.1 不允许姓名重复：判断用户输入的姓名 和 列表里面字典的name对应的值 相等 提示</span><br><span class="line">    for i in info:</span><br><span class="line">        if new_name == i[&#x27;name&#x27;]:</span><br><span class="line">            print(&#x27;The student is already exist&#x27;)</span><br><span class="line">            return # 退出当前函数，不执行后面添加学员的代码</span><br><span class="line"></span><br><span class="line">    # 2.2 如果输入的姓名不存在，添加数据：准备空字典，字典新增数据，列表追加字典</span><br><span class="line">    info_dict = &#123;&#125;</span><br><span class="line">    # 字典新增数据</span><br><span class="line">    info_dict[&#x27;id&#x27;] = new_id</span><br><span class="line">    info_dict[&#x27;name&#x27;] = new_name</span><br><span class="line">    info_dict[&#x27;tel&#x27;] = new_tel</span><br><span class="line">    # print(info_dict)</span><br><span class="line"></span><br><span class="line">    # 列表追加字典</span><br><span class="line">    info.append(info_dict)</span><br><span class="line">    print(info)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 删除学员的函数</span><br><span class="line">def del_info():</span><br><span class="line">    &quot;&quot;&quot;删除学员函数&quot;&quot;&quot;</span><br><span class="line">    # 1. 用户输入要删除的学员的姓名</span><br><span class="line">    del_name = input(&#x27;please input the name you want to delete: &#x27;)</span><br><span class="line"></span><br><span class="line">    # 2. 判断学员是否存在，存在则删除，否则提示</span><br><span class="line">    # 2.1 声明info为全局变量</span><br><span class="line">    global info</span><br><span class="line">    # 2.2 遍历列表</span><br><span class="line">    for i in info:</span><br><span class="line">    # 2.3 判断学员是否存在：存在执行删除（列表里面的字典），不存在提示</span><br><span class="line">    #     存在该学员时，用break退出循环，因为该系统不允许重名</span><br><span class="line">        if del_name == i[&#x27;name&#x27;]:</span><br><span class="line">            # 列表删除数据 -- 按数据删除remove</span><br><span class="line">            info.remove(i)</span><br><span class="line">            break</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;The name you input is not exist&#x27;)</span><br><span class="line"></span><br><span class="line">    print(info)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 修改学员的函数</span><br><span class="line">def mod_info():</span><br><span class="line">    &quot;&quot;&quot;修改学员函数&quot;&quot;&quot;</span><br><span class="line">    mod_name = input(&#x27;please input the name you want to modify: &#x27;)</span><br><span class="line">    global info</span><br><span class="line">    for i in info:</span><br><span class="line">        if mod_name == i[&#x27;name&#x27;]:</span><br><span class="line">            i[&#x27;name&#x27;] = input(&#x27;please input a new name: &#x27;)</span><br><span class="line">            i[&#x27;id&#x27;] = input(&#x27;please input a new id: &#x27;)</span><br><span class="line">            i[&#x27;tel&#x27;] = input(&#x27;please input a new tel: &#x27;)</span><br><span class="line">            break</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;The name you input is not exist&#x27;)</span><br><span class="line"></span><br><span class="line">    print(info)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查询学员函数</span><br><span class="line">def query_info():</span><br><span class="line">    &quot;&quot;&quot;查询学员函数&quot;&quot;&quot;</span><br><span class="line">    query_name = input(&#x27;please input the name you want to query: &#x27;)</span><br><span class="line">    global info</span><br><span class="line">    for i in info:</span><br><span class="line">        if query_name == i[&#x27;name&#x27;]:</span><br><span class="line">            print(f&quot;the student you query has a name &#123;i[&#x27;name&#x27;]&#125;, an id &#123;i[&#x27;id&#x27;]&#125;, &quot;</span><br><span class="line">                  f&quot;and a tel &#123;i[&#x27;tel&#x27;]&#125;&quot;) # 注意引号不能冲突（外部双引号，内部单引号）</span><br><span class="line">            break</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;The name you input is not exist&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 显示所有学员函数</span><br><span class="line">def display_info():</span><br><span class="line">    &quot;&quot;&quot;显示所有学员函数&quot;&quot;&quot;</span><br><span class="line">    print(&#x27;id\tname\ttel&#x27;) # \t制表符对齐</span><br><span class="line">    for i in info:</span><br><span class="line">        print(f&quot;&#123;i[&#x27;id&#x27;]&#125;\t&#123;i[&#x27;name&#x27;]&#125;\t&#123;i[&#x27;tel&#x27;]&#125;&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 系统功能需要循环使用，直到用户输入6，才退出系统</span><br><span class="line">while True:</span><br><span class="line">    # 1. 显示功能界面</span><br><span class="line">    info_print()</span><br><span class="line"></span><br><span class="line">    # 2. 用户输入功能序号</span><br><span class="line">    user_num = int(input(&#x27;please input item number: &#x27;))</span><br><span class="line"></span><br><span class="line">    # 3. 按照用户输入的功能序号，执行不同的功能（函数）</span><br><span class="line">    if user_num == 1:</span><br><span class="line">        # print(&#x27;add&#x27;) -- 添加学员</span><br><span class="line">        add_info()</span><br><span class="line">    elif user_num == 2:</span><br><span class="line">        # print(&#x27;delete&#x27;) -- 删除学员</span><br><span class="line">        del_info()</span><br><span class="line">    elif user_num == 3:</span><br><span class="line">        # print(&#x27;modify&#x27;) -- 修改学员</span><br><span class="line">        mod_info()</span><br><span class="line">    elif user_num == 4:</span><br><span class="line">        # print(&#x27;query&#x27;) -- 查询学员</span><br><span class="line">        query_info()</span><br><span class="line">    elif user_num == 5:</span><br><span class="line">        # print(&#x27;display all&#x27;) -- 显示所有学员</span><br><span class="line">        display_info()</span><br><span class="line">    elif user_num == 6:</span><br><span class="line">        # print(&#x27;exit&#x27;) -- 退出系统</span><br><span class="line">        # 退出系统，终止while True循环用break</span><br><span class="line">        exit_flag = input(&#x27;Are you sure exit system? Y or N: &#x27;)</span><br><span class="line">        if ((exit_flag == &#x27;Y&#x27;) or (exit_flag == &#x27;y&#x27;)):</span><br><span class="line">        # if exit_flag == (&#x27;Y&#x27; or &#x27;y&#x27;) -- 逻辑或无效表达式</span><br><span class="line">            break</span><br><span class="line">        else:</span><br><span class="line">            continue</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;you\&#x27;ve input a wrong number&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"># 应用场景：一个函数有一个返回值，并且只有一句代码，可以使用lambda简化</span><br><span class="line"># 语法：lambda 参数列表：表达式</span><br><span class="line"># 注意：lambda表达式的参数可有可无，函数的参数在lambda表达式中完全适用。</span><br><span class="line">#      lambda表达式能接收任何数量的参数但只能返回一个表达式的值</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------lambda体验--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求：函数 返回值100</span><br><span class="line"></span><br><span class="line"># 1.函数</span><br><span class="line">def fn1():</span><br><span class="line">    return 100</span><br><span class="line"></span><br><span class="line">result = fn1()</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. lambda 匿名函数</span><br><span class="line">fn2 = lambda: 100</span><br><span class="line">print(fn2) # 打印的是lambda的内存地址</span><br><span class="line">print(fn2()) # 调用函数，返回值100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------lambda实例之计算两个数的和--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 函数实现</span><br><span class="line">def add(a, b):</span><br><span class="line">    return a + b</span><br><span class="line"></span><br><span class="line">result = add(1, 8)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># lambda实现</span><br><span class="line">fn1 = lambda a, b: a + b</span><br><span class="line">print(fn1(1, 8))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------lambda的参数形式--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 无参数</span><br><span class="line">fn1 = lambda: 100</span><br><span class="line">print(fn1())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 一个参数</span><br><span class="line">fn1 = lambda a: a  # 前面的a是形参，后面的a是return的返回值</span><br><span class="line">print(fn1(&#x27;hello world&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. 默认参数(缺省参数)</span><br><span class="line">fn1 = lambda a, b, c=100: a + b + c</span><br><span class="line">print(fn1(10, 20))</span><br><span class="line">print(fn1(10, 20, 200))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 4. 可变参数：*args -- 接收不定长位置参数，返回元组</span><br><span class="line">fn1 = lambda *args: args</span><br><span class="line">print(fn1(10, 20, 30))</span><br><span class="line">print(fn1(10))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 5. 可变参数：**kwargs -- 接收不定长关键字参数, 返回字典</span><br><span class="line">fn1 = lambda **kwargs: kwargs</span><br><span class="line">print(fn1(name=&#x27;python&#x27;))</span><br><span class="line">print(fn1(age=30))</span><br><span class="line">print(fn1(name=&#x27;python&#x27;, age=30))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------lambda的应用--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 带判断的lambda</span><br><span class="line">fn1 = lambda a, b: a if a &gt; b else b</span><br><span class="line">print(fn1(100, 200))</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 2. 列表数据按字典key的值排序</span><br><span class="line">students = [&#123;&#x27;name&#x27;: &#x27;TOM&#x27;, &#x27;age&#x27;: 20&#125;,</span><br><span class="line">            &#123;&#x27;name&#x27;: &#x27;ROSE&#x27;, &#x27;age&#x27;: 19&#125;,</span><br><span class="line">            &#123;&#x27;name&#x27;: &#x27;JACK&#x27;, &#x27;age&#x27;: 22&#125;,]</span><br><span class="line"></span><br><span class="line"># sort(key=lambda...., reverse=bool数据)</span><br><span class="line"># （1） name key对应的值进行升序排序</span><br><span class="line">students.sort(key=lambda x: x[&#x27;name&#x27;])</span><br><span class="line">print(students)</span><br><span class="line"></span><br><span class="line"># （2） name key对应的值进行降序排序</span><br><span class="line">students.sort(key=lambda x: x[&#x27;name&#x27;], reverse=True)</span><br><span class="line">print(students)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># （3） age key对应的值进行降序排序</span><br><span class="line">students.sort(key=lambda x: x[&#x27;age&#x27;], reverse=True)</span><br><span class="line">print(students)</span><br></pre></td></tr></table></figure>

<h1 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"># 高阶函数：把函数作为参数传入</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------abs和round--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># abs()函数可以完成对数字求绝对值计算</span><br><span class="line">print(abs(-10))</span><br><span class="line"></span><br><span class="line"># round()函数可以完成对数字的四舍五入计算</span><br><span class="line">print(round(1.2))</span><br><span class="line">print(round(1.9))</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------体验高阶函数--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求：任意两个数字，先进行数字处理（绝对值或四舍五入）再求和计算</span><br><span class="line"># 1. 写法一</span><br><span class="line">def add_num(a, b):</span><br><span class="line">    # 绝对值</span><br><span class="line">    return abs(a) + abs(b)</span><br><span class="line"></span><br><span class="line">print(add_num(-1.1, 1.9))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 写法二：高阶函数</span><br><span class="line">def sum_num(a ,b ,f):  # f是第三个参数，用来接收将来传入的函数</span><br><span class="line">    return f(a) + f(b)</span><br><span class="line"></span><br><span class="line">print(sum_num(-1, 5, abs))</span><br><span class="line">print(sum_num(1.2, 1.9, round))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------内置高阶函数之map()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># map(func, lst), 将传入的函数变量func作用到lst变量的每个元素中，</span><br><span class="line"># 并将结果组成新的列表返回一个列表（python2）或 返回一个迭代器（python3）</span><br><span class="line"></span><br><span class="line"># 需求：计算list1序列中各个数字的2次方</span><br><span class="line">list1 = [1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">def func(x):</span><br><span class="line">    return x ** 2</span><br><span class="line"></span><br><span class="line">result = map(func, list1)</span><br><span class="line">print(result) # 打印的是迭代器result的地址</span><br><span class="line">print(list(result)) # 用list()把迭代器result转换成列表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------内置高阶函数之reduce()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># reduce(func, lst)，其中func必须有两个参数，每次func计算的结果继续和序列的下一个元素做累积计算</span><br><span class="line"># 注意：reduce()传入的参数func必须接收2个参数</span><br><span class="line"># 需求：计算list1序列中各个数字的累加和</span><br><span class="line"></span><br><span class="line">list1 = [1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">import functools # 导入模块</span><br><span class="line"></span><br><span class="line">def func(a, b):</span><br><span class="line">    return a + b</span><br><span class="line"></span><br><span class="line">result = functools.reduce(func, list1)</span><br><span class="line">print(result)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------内置高阶函数之filter()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># filter(func, lst)函数用于过滤序列，过滤掉不符合条件的元素，返回一个filter对象。</span><br><span class="line"># 如果要转换为列表，可以使用list()来转换。</span><br><span class="line"></span><br><span class="line">list1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br><span class="line"></span><br><span class="line">def func(x):</span><br><span class="line">    return x % 2 == 0</span><br><span class="line"></span><br><span class="line">result = filter(func, list1)</span><br><span class="line">print(result) # 打印filter对象内存地址</span><br><span class="line">print(list(result)) #list转换成列表打印</span><br></pre></td></tr></table></figure>

<h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"># 文件操作的作用：把一些内容（数据）存储起来，可以让程序下一次执行的时候直接使用，</span><br><span class="line"># 而不必重新制作一份，省时省力</span><br><span class="line"># 步骤： 1. 打开文件，2. 读写等操作，3. 关闭文件。可以只打开和关闭文件，不进行任何读写操作</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------体验文件操作--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 打开用open()函数</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line"># 读写操作 write() read()</span><br><span class="line">f.write(&#x27;aaa&#x27;)</span><br><span class="line"># 关闭 close()</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------访问模式特点01--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># r: 如果文件不存在，报错: 不支持写入操作，表示只读</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;r&#x27;)</span><br><span class="line">f.close()</span><br><span class="line">f.write(&#x27;aa&#x27;)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># w: 只写，如果文件不存在，新建文件：执行写入，会覆盖原有内容</span><br><span class="line">f = open(&#x27;1.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">f.write(&#x27;bbb&#x27;)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># a: 追加, 如果文件不存在，新建文件：在原有内容基础上，追加新内容</span><br><span class="line">f = open(&#x27;2.txt&#x27;, &#x27;a&#x27;)</span><br><span class="line">f.write(&#x27;xyz&#x27;)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 访问模式参数可以省略，如果省略表示访问模式为r</span><br><span class="line">f = open(&#x27;1.txt&#x27;)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------读取函数之read--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># read()语法：文件对象.read(num)</span><br><span class="line"></span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;r&#x27;)</span><br><span class="line"></span><br><span class="line"># 文件内容如果换行，底层有\n。会有字节占位，导致实际读取数据个数与参数不一致</span><br><span class="line"># read()不写参数表示读取所有</span><br><span class="line"># print(f.read())</span><br><span class="line">print(f.read(10))</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------读取函数之readlines()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># readlines()可以按照行的方式把整个文件中的内容进行一次性读取，</span><br><span class="line"># 并且返回的是一个列表，其中每一行的数据为一个元素</span><br><span class="line"></span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;r&#x27;)</span><br><span class="line"></span><br><span class="line">con = f.readlines()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------读取函数之readline()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># readline()一次读取一行内容</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;r&#x27;)</span><br><span class="line"></span><br><span class="line">con = f.readline()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">con = f.readline()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">con = f.readline()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------访问模式特点02--------------&#x27;)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">测试目标</span><br><span class="line">1. r+ 和 w+ a+ 区别：r没有该文件则报错</span><br><span class="line">2. 文件指针对数据读取的影响</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 1. r+: 没有该文件则报错，文件指针在开头</span><br><span class="line"># f = open(&#x27;test1.txt&#x27;, &#x27;r+&#x27;)</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;r+&#x27;)</span><br><span class="line">con = f.read()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. w+：没有该文件则新建文件，文件指针在开头，用新内容覆盖原内容</span><br><span class="line"></span><br><span class="line">f = open(&#x27;test1.txt&#x27;, &#x27;w+&#x27;)</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;w+&#x27;)</span><br><span class="line">con = f.read()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. a+：没有该文件则新建文件，文件指针在结尾，无法读取数据（文件指针后面没有数据）</span><br><span class="line"></span><br><span class="line"># f = open(&#x27;test100.txt&#x27;, &#x27;a+&#x27;)</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;a+&#x27;)</span><br><span class="line">con = f.read()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------seek函数--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 作用：用来移动文件指针</span><br><span class="line"># 语法：文件对象.seek(偏移量，起始位置)</span><br><span class="line"># 起始位置：0：文件开头；1：当前位置；2：文件结尾</span><br><span class="line"># 目标：1. r 改变文件指针位置：改变读取数据开始位置或把文件指针放结尾（无法读取数据）</span><br><span class="line">#      2. a 改变文件指针位置，做到可以读取出数据</span><br><span class="line"></span><br><span class="line"># f = open(&#x27;test.txt&#x27;, &#x27;r+&#x27;)</span><br><span class="line">f = open(&#x27;test.txt&#x27;, &#x27;a+&#x27;)</span><br><span class="line"></span><br><span class="line"># 1.1 改变读取数据开始位置</span><br><span class="line"># f.seek(2, 0)</span><br><span class="line"></span><br><span class="line"># 1.2 把文件指针放结尾（无法读取数据）</span><br><span class="line"># f.seek(0, 2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. a 改变文件指针位置，做到可以读取出数据</span><br><span class="line"># f.seek(0, 0)</span><br><span class="line">f.seek(0) # 省略偏移量，默认不偏移</span><br><span class="line"></span><br><span class="line">con = f.read()</span><br><span class="line">print(con)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------文件备份--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 用户输入目标文件  sound.txt.mp3</span><br><span class="line">old_name = input(&#x27;please input the file name you backup: &#x27;)</span><br><span class="line"># print(old_name)</span><br><span class="line"># print(type(old_name))</span><br><span class="line"></span><br><span class="line"># 2. 规划备份文件的名字</span><br><span class="line"># 2.1 提取后缀 -- 找到名字中的点 -- 名字和后缀分离 --</span><br><span class="line"># 最右侧的点才是后缀的点 -- 字符串查找某个字串rfind</span><br><span class="line">index = old_name.rfind(&#x27;.&#x27;)</span><br><span class="line"># print(index)</span><br><span class="line"></span><br><span class="line"># 2.2 组织新名字 = 原名字 + [备份] + 后缀</span><br><span class="line"># 原名字就是字符串中的一部分子串 -- 切片[开始:结束:步长]</span><br><span class="line"># print(old_name[:index])</span><br><span class="line"># print(old_name[index:])</span><br><span class="line">new_name = old_name[:index] + &#x27;[backup]&#x27; + old_name[index:]</span><br><span class="line">print(new_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. 备份文件写入数据（数据和原文件一样）</span><br><span class="line"># 3.1 打开原文件和备份文件</span><br><span class="line">old_f = open(old_name, &#x27;rb&#x27;)</span><br><span class="line">new_f = open(new_name, &#x27;wb&#x27;)</span><br><span class="line"></span><br><span class="line"># 3.2 原文件读取，备份文件写入</span><br><span class="line"># 如果不确定目标文件大小，循环读取写入，当读取出来的数据没有了则终止循环</span><br><span class="line">while True:</span><br><span class="line">    con = old_f.read(1024)</span><br><span class="line">    if len(con) == 0:</span><br><span class="line">        # 读取完成</span><br><span class="line">        break</span><br><span class="line">    new_f.write(con)</span><br><span class="line"></span><br><span class="line"># 3.3 关闭文件</span><br><span class="line">old_f.close()</span><br><span class="line">new_f.close()</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------文件备份之限制有效文件名备份--------------&#x27;)</span><br><span class="line"></span><br><span class="line">old_name = input(&#x27;please input the file name you backup: &#x27;)</span><br><span class="line"></span><br><span class="line">index = old_name.rfind(&#x27;.&#x27;)</span><br><span class="line"></span><br><span class="line">if index &gt; 0:  # 判断文件是否有效</span><br><span class="line">    postfix = old_name[index:]</span><br><span class="line"></span><br><span class="line">new_name = old_name[:index] + &#x27;[backup]&#x27; + postfix</span><br><span class="line"></span><br><span class="line">old_f = open(old_name, &#x27;rb&#x27;)</span><br><span class="line">new_f = open(new_name, &#x27;wb&#x27;)</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    con = old_f.read(1024)</span><br><span class="line">    if len(con) == 0:</span><br><span class="line">        break</span><br><span class="line">    new_f.write(con)</span><br><span class="line"></span><br><span class="line">old_f.close()</span><br><span class="line">new_f.close()</span><br></pre></td></tr></table></figure>

<h1 id="文件与文件夹操作函数"><a href="#文件与文件夹操作函数" class="headerlink" title="文件与文件夹操作函数"></a>文件与文件夹操作函数</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print(&#x27;-----------------文件操作函数--------------&#x27;)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 导入模块os</span><br><span class="line">2. 使用模块内功能</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 1. rename(): 重命名</span><br><span class="line"># os.rename(&#x27;文件操作函数.py&#x27;, &#x27;文件与文件夹操作函数.py&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. remove(): 删除文件</span><br><span class="line">os.remove(&#x27;文件夹操作函数之创建和删除.py&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------文件夹操作函数之创建和删除--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. mkdir(): 创建文件夹</span><br><span class="line"># os.mkdir(&#x27;aa&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. rmdir(): 删除文件夹</span><br><span class="line"># os.rmdir(&#x27;aa&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------文件夹操作函数之路径相关函数--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. getcwd(): 返回当前文件所在目录路径</span><br><span class="line"># print(os.getcwd())</span><br><span class="line"></span><br><span class="line"># 2. chdir(): 改变目录路径</span><br><span class="line"># os.mkdir(&#x27;aa&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求： 在aa里面创建bb文件夹：1. 切换目录到aa. 2. 创建bb</span><br><span class="line"># os.chdir(&#x27;aa&#x27;)</span><br><span class="line"># os.mkdir(&#x27;bb&#x27;)</span><br><span class="line"></span><br><span class="line"># 3. listdir(): 获取某个文件夹下所有文件，返回一个列表</span><br><span class="line">print(os.listdir())</span><br><span class="line">print(os.listdir(&#x27;aa&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------文件夹操作函数之rename()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># os.rename() -- 重命名文件夹，bb重命名为bbbb</span><br><span class="line">os.chdir(&#x27;aa&#x27;)</span><br><span class="line">os.rename(&#x27;bb&#x27;, &#x27;bbbb&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------批量重命名之添加字符串-------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求1：把&quot;code\4\aa&quot;文件夹下的所有文件重命名 python xxxx</span><br><span class="line"># 1. 找到所有文件：获取该文件夹的目录列表 -- listdir()</span><br><span class="line">os.chdir(&#x27;aa&#x27;)</span><br><span class="line">file_list = os.listdir()</span><br><span class="line">print(file_list)</span><br><span class="line"></span><br><span class="line"># 2. 构造名字</span><br><span class="line">for i in file_list:</span><br><span class="line">    new_name = &#x27;python_&#x27; + i</span><br><span class="line"></span><br><span class="line"># 3. 重命名</span><br><span class="line">    os.rename(i, new_name)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------批量重命名之添加和删除字符串-------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求2： 删除pyton_重命名：1. 构造条件的数据 2. 书写if</span><br><span class="line"></span><br><span class="line"># 构造条件的数据</span><br><span class="line">flag = 2</span><br><span class="line"></span><br><span class="line">os.chdir(&#x27;aa&#x27;)</span><br><span class="line">file_list = os.listdir()</span><br><span class="line">print(file_list)</span><br><span class="line"></span><br><span class="line">for i in file_list:</span><br><span class="line">    if flag == 1:</span><br><span class="line">        new_name = &#x27;python_&#x27; + i</span><br><span class="line"></span><br><span class="line">    elif flag == 2:</span><br><span class="line">        num = len(&#x27;python_&#x27;)</span><br><span class="line">        new_name = i[num:]</span><br><span class="line">    os.rename(i, new_name)</span><br></pre></td></tr></table></figure>

<h1 id="体验面向对象"><a href="#体验面向对象" class="headerlink" title="体验面向对象"></a>体验面向对象</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 需求：洗衣机，功能：洗衣服</span><br><span class="line"></span><br><span class="line"># 1. 定义洗衣机类</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">class 类名():</span><br><span class="line">    代码</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">class washer():</span><br><span class="line">    def wash(self):</span><br><span class="line">        print(&#x27;wash clothes&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 创建对象</span><br><span class="line"># 对象名 = 类名（）</span><br><span class="line">haier = washer()</span><br><span class="line"></span><br><span class="line"># 3. 验证成果</span><br><span class="line"># 打印haier对象</span><br><span class="line">print(haier)</span><br><span class="line"></span><br><span class="line"># 使用wash功能 -- 实例方法/对象方法 -- 对象名.wash()</span><br><span class="line">haier.wash()</span><br></pre></td></tr></table></figure>

<h1 id="类里面的self"><a href="#类里面的self" class="headerlink" title="类里面的self"></a>类里面的self</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 类：洗衣机 功能：洗衣服</span><br><span class="line">class washer():</span><br><span class="line">    def wash(self):</span><br><span class="line">        print(&#x27;wash clothes&#x27;)</span><br><span class="line">        print(self)</span><br><span class="line"></span><br><span class="line">haier = washer()</span><br><span class="line">print(haier)</span><br><span class="line">haier.wash()</span><br><span class="line"></span><br><span class="line"># 由于打印对象和打印self得到的内存地址相同，因此self指的是调用该函数的对象</span><br></pre></td></tr></table></figure>

<h1 id="一个类创建多个对象"><a href="#一个类创建多个对象" class="headerlink" title="一个类创建多个对象"></a>一个类创建多个对象</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 1. 一个类可以创建多个对象；2. 多个对象都调用函数的时候，self地址不相同</span><br><span class="line">class washer():</span><br><span class="line">    def wash(self):</span><br><span class="line">        print(&#x27;wash clothes&#x27;)</span><br><span class="line">        print(self)</span><br><span class="line"></span><br><span class="line">haier1 = washer()</span><br><span class="line">haier1.wash()</span><br><span class="line"></span><br><span class="line">haier2 = washer()</span><br><span class="line">haier2.wash()</span><br></pre></td></tr></table></figure>

<h1 id="添加和获取对象属性"><a href="#添加和获取对象属性" class="headerlink" title="添加和获取对象属性"></a>添加和获取对象属性</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------类外面添加和获取对象属性--------------&#x27;)</span><br><span class="line"># 属性既是特征，例如洗衣机的宽度，高度等</span><br><span class="line"></span><br><span class="line">class washer():</span><br><span class="line">    def wash(self):</span><br><span class="line">        print(&#x27;wash clothes&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">haier1 = washer()</span><br><span class="line"></span><br><span class="line"># 添加对象属性 -- 对象名.属性名 = 值</span><br><span class="line">haier1.width = 400</span><br><span class="line">haier1.height = 500</span><br><span class="line"></span><br><span class="line"># 获取对象属性 -- 对象名.属性名</span><br><span class="line">print(f&#x27;the width of the washer is &#123;haier1.width&#125;&#x27;)</span><br><span class="line">print(f&#x27;the height of the washer is &#123;haier1.height&#125;&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------类里面获取对象属性--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 语法：self.属性名</span><br><span class="line"></span><br><span class="line">class washer():</span><br><span class="line">    def wash(self):</span><br><span class="line">        print(&#x27;wash clothes&#x27;)</span><br><span class="line"></span><br><span class="line">    # 获取对象属性</span><br><span class="line">    def print_info(self):</span><br><span class="line">        # self.属性名</span><br><span class="line">        print(f&#x27;the width of the washer is &#123;self.width&#125;&#x27;)</span><br><span class="line">        print(f&#x27;the height of the washer is &#123;self.height&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">haier1 = washer()</span><br><span class="line"></span><br><span class="line"># 添加对象属性 -- 对象名.属性名 = 值</span><br><span class="line">haier1.width = 400</span><br><span class="line">haier1.height = 500</span><br><span class="line"></span><br><span class="line"># 对象调用方法</span><br><span class="line">haier1.print_info()</span><br></pre></td></tr></table></figure>

<h1 id="魔法方法"><a href="#魔法方法" class="headerlink" title="魔法方法"></a>魔法方法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 在python中， _xx_()的函数叫做魔法方法，指的是具有特殊功能的函数</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------魔法方法之__init__()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># _init_()方法的作用：初始化对象</span><br><span class="line"></span><br><span class="line"># 目标：定义init魔法方法设置初始化属性，并访问调用</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 定义类</span><br><span class="line">    init魔法方法: width 和 height</span><br><span class="line">    添加实例方法：访问实例属性</span><br><span class="line">    </span><br><span class="line">2. 创建对象</span><br><span class="line">3. 验证成果</span><br><span class="line">    调用实例方法</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">class washer():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 添加实例属性</span><br><span class="line">        self.width = 500</span><br><span class="line">        self.height = 800</span><br><span class="line"></span><br><span class="line">    def print_info(self):</span><br><span class="line">        print(f&#x27;&#123;self.width&#125;&#x27;)</span><br><span class="line">        print(f&#x27;&#123;self.height&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">haier = washer()</span><br><span class="line">haier.print_info()</span><br><span class="line"></span><br><span class="line"># 注意：1. init_()方法，在创建一个对象是默认被调用，不需要手动调用，</span><br><span class="line">#      2. init_(self)的self参数，不需要开发者传递，python解释器会自动把当前的对象引用传递过去</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------魔法方法之带参数的__init__()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 定义类：带参数的init：宽度和高度：实例方法：调用实例属性</span><br><span class="line">class washer():</span><br><span class="line">    def __init__(self, width, height):</span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line"></span><br><span class="line">    def print_info(self):</span><br><span class="line">        print(f&#x27;&#123;self.width&#125;&#x27;)</span><br><span class="line">        print(f&#x27;&#123;self.height&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 创建对象: 创建多个对象且属性值不同：调用实例方法</span><br><span class="line">haier1 = washer(10, 20)</span><br><span class="line">haier1.print_info()</span><br><span class="line"></span><br><span class="line">haier2 = washer(100, 200)</span><br><span class="line">haier2.print_info()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------魔法方法之__str__()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># _str_()方法的作用：当使用print输出对象的时候，默认打印对象的内存地址。</span><br><span class="line"># 如果类定义了__str__方法，那么就会打印从这个方法中return的数据</span><br><span class="line"></span><br><span class="line">class washer():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.width = 300</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;解释说明：类的说明或对象状态的说明&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">haier = washer()</span><br><span class="line">print(haier)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------魔法方法之__del__()--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 当删除对象时，python解释器也会默认调用__del__方法</span><br><span class="line"></span><br><span class="line">class washer():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.width = 300</span><br><span class="line"></span><br><span class="line">    def __del__(self):</span><br><span class="line">        print(&#x27;the object was deleted&#x27;)</span><br><span class="line"></span><br><span class="line">haier = washer()</span><br></pre></td></tr></table></figure>

<h1 id="综合案例之烤地瓜"><a href="#综合案例之烤地瓜" class="headerlink" title="综合案例之烤地瓜"></a>综合案例之烤地瓜</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># 1. 定义类：初始化属性、被烤和添加调料的方法、显示对象信息的str</span><br><span class="line">class SweetPotato():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 被烤的时间</span><br><span class="line">        self.cooktime = 0</span><br><span class="line">        # 烤的状态</span><br><span class="line">        self.cookstate = &#x27;raw&#x27;</span><br><span class="line">        # 调料列表</span><br><span class="line">        self.condiments = []</span><br><span class="line"></span><br><span class="line">    def cook(self, time):</span><br><span class="line">        &quot;&quot;&quot;烤地瓜方法&quot;&quot;&quot;</span><br><span class="line">        # 1. 先计算地瓜整体烤过的时间</span><br><span class="line">        self.cooktime += time</span><br><span class="line">        # 2. 用整体烤过的时间再判断地瓜的状态</span><br><span class="line">        if 0 &lt;= self.cooktime &lt; 3:</span><br><span class="line">            # 生的</span><br><span class="line">            self.cookstate = &#x27;raw&#x27;</span><br><span class="line">        elif 3 &lt;= self.cooktime &lt; 5:</span><br><span class="line">            # 半生不熟</span><br><span class="line">            self.cookstate = &#x27;half-cooked&#x27;</span><br><span class="line">        elif 5 &lt;= self.cooktime &lt; 8:</span><br><span class="line">            # 熟了</span><br><span class="line">            self.cookstate = &#x27;cooked&#x27;</span><br><span class="line">        elif self.cooktime &gt;= 8:</span><br><span class="line">            # 烤糊了</span><br><span class="line">            self.cookstate = &#x27;overcooked&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def add_condiments(self, condiment):</span><br><span class="line">        &quot;&quot;&quot;添加调料方法&quot;&quot;&quot;</span><br><span class="line">        # 用户意愿的调料追加到调料列表</span><br><span class="line">        self.condiments.append(condiment)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return f&#x27;this sweet potato has been cooked for &#123;self.cooktime&#125; minutes, &#x27; \</span><br><span class="line">               f&#x27;\nand it\&#x27;s cook state is &#123;self.cookstate&#125;, &#x27; \</span><br><span class="line">               f&#x27;\ncondiments contains &#123;self.condiments&#125;\n&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 创建对象并调用对应的实例方法</span><br><span class="line"></span><br><span class="line">digua1 = SweetPotato()</span><br><span class="line">print(digua1)</span><br><span class="line"></span><br><span class="line">digua1.cook(2)</span><br><span class="line">digua1.add_condiments(&#x27;chili power&#x27;)</span><br><span class="line">print(digua1)</span><br><span class="line"></span><br><span class="line">digua1.cook(2)</span><br><span class="line">digua1.add_condiments(&#x27;soy sauce&#x27;)</span><br><span class="line">print(digua1)</span><br></pre></td></tr></table></figure>

<h1 id="综合案例之搬家具"><a href="#综合案例之搬家具" class="headerlink" title="综合案例之搬家具"></a>综合案例之搬家具</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># 定义家具类</span><br><span class="line">class Furniture():</span><br><span class="line">    def __init__(self, name, area):</span><br><span class="line">        # 家具名字</span><br><span class="line">        self.name = name</span><br><span class="line">        # 家具占地面积</span><br><span class="line">        self.area = area</span><br><span class="line"></span><br><span class="line"># 定义房屋类</span><br><span class="line">class Home():</span><br><span class="line">    def __init__(self, address, area):</span><br><span class="line">        # 地理位置</span><br><span class="line">        self.address = address</span><br><span class="line">        # 房屋面积</span><br><span class="line">        self.area = area</span><br><span class="line">        # 剩余面积</span><br><span class="line">        self.free_area = area</span><br><span class="line">        # 家具列表</span><br><span class="line">        self.furniture = []</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return f&#x27;the house\&#x27;s position is &#123;self.address&#125;, its area is &#123;self.area&#125;, &#x27; \</span><br><span class="line">               f&#x27;\nits free area is &#123;self.free_area&#125;, &#x27; \</span><br><span class="line">               f&#x27;\nthe furniture includes &#123;self.furniture&#125;\n&#x27;</span><br><span class="line"></span><br><span class="line">    def add_furniture(self, item):</span><br><span class="line">        &quot;&quot;&quot;容纳家具&quot;&quot;&quot;</span><br><span class="line">        # 如果 家具占地面积 &lt;= 房子剩余面积：可以搬入（家具列表添加家具名字数据并更新房子剩余面积</span><br><span class="line">        # 房屋剩余面积 - 该家具的占地面积</span><br><span class="line">        # 否则：提示用户家具太大，剩余面积不足，无法容纳）</span><br><span class="line">        if item.area &lt;= self.free_area:</span><br><span class="line">            self.furniture.append(item.name)</span><br><span class="line">            self.free_area -= item.area</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;the furniture is too big to place, free area is not enough&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 双人床， 6</span><br><span class="line">bed = Furniture(&#x27;double bed&#x27;, 6)</span><br><span class="line"># 沙发，10</span><br><span class="line">sofa = Furniture(&#x27;sofa&#x27;, 10)</span><br><span class="line"></span><br><span class="line"># 房子1：北京，1000</span><br><span class="line">jia1 = Home(&#x27;Peking&#x27;, 1000)</span><br><span class="line">print(jia1)</span><br><span class="line"></span><br><span class="line">jia1.add_furniture(bed)</span><br><span class="line">print(jia1)</span><br><span class="line"></span><br><span class="line">ball = Furniture(&#x27;basketball court&#x27;, 2000)</span><br><span class="line">jia1.add_furniture(ball)</span><br><span class="line">print(jia1)</span><br></pre></td></tr></table></figure>

<h1 id="面向对象之继承"><a href="#面向对象之继承" class="headerlink" title="面向对象之继承"></a>面向对象之继承</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;-----------------体验继承--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 继承：子类默认继承父类的所有属性和方法</span><br><span class="line"># 1. 定义父类</span><br><span class="line">class A(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.num = 1</span><br><span class="line"></span><br><span class="line">    def print_info(self):</span><br><span class="line">        print(self.num)</span><br><span class="line"></span><br><span class="line"># 2. 定义子类，继承父类</span><br><span class="line">class B(A):</span><br><span class="line">    pass  # 不新增代码，用pass带过，防止报错</span><br><span class="line"></span><br><span class="line"># 3. 创建对象，验证结论</span><br><span class="line">result = B()</span><br><span class="line">result.print_info()</span><br><span class="line"></span><br><span class="line"># 注意：在python中，所有类默认继承object类，object类时顶级类或基类，其他子类叫派生类</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------单继承-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 师父类，属性和方法</span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 徒弟类，继承师父类</span><br><span class="line">class Prentice(Master):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"># 3. 用徒弟类创建对象，调用实例属性和方法</span><br><span class="line">daqiu = Prentice()</span><br><span class="line">print(daqiu.kongfu)</span><br><span class="line">daqiu.make_cake()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------多继承-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 师父类，属性和方法</span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 学校类，属性和方法</span><br><span class="line">class School(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Black horse formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 3. 定义徒弟类，继承师父类 和 学校类</span><br><span class="line">class Prentice(Master, School):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class Prentice1(School, Master):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">daqiu = Prentice()</span><br><span class="line">print(daqiu.kongfu)</span><br><span class="line">daqiu.make_cake()</span><br><span class="line"></span><br><span class="line">daqiu1 = Prentice1()</span><br><span class="line">print(daqiu1.kongfu)</span><br><span class="line">daqiu1.make_cake()</span><br><span class="line"></span><br><span class="line"># 结论：如果一个类继承多个父类，优先继承第一个父类的同名属性和方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------子类重写父类同名属性和方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 1. 师父类，属性和方法</span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 学校类，属性和方法</span><br><span class="line">class School(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Black horse formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 3. 定义徒弟类，继承师父类 和 学校类</span><br><span class="line">class Prentice(Master, School):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Original technology of Chinese hamburger]&#x27;</span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">daqiu = Prentice()</span><br><span class="line">print(daqiu.kongfu)</span><br><span class="line">daqiu.make_cake()</span><br><span class="line"></span><br><span class="line"># __mro__用来查看继承顺序</span><br><span class="line">print(Prentice.__mro__)</span><br><span class="line"></span><br><span class="line"># 结论：如果子类拥有和父类同名的属性和方法，用子类创建对象调用属性和方法的时候，</span><br><span class="line"># 调用到的是子类内部的同名属性和方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------子类调用父类同名属性和方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 师父类，属性和方法</span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 学校类，属性和方法</span><br><span class="line">class School(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Black horse formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line"># 3. 定义徒弟类，继承师父类 和 学校类</span><br><span class="line">class Prentice(Master, School):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Original technology of Chinese hamburger]&#x27;</span><br><span class="line">    def make_cake(self):</span><br><span class="line">        # 添加自己的初始化原因：如果不加这个自己的初始化，</span><br><span class="line">        # kongfu的属性值是上一次调用init内的kongfu属性值</span><br><span class="line">        self.__init__()</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">    # 子类调用父类的同名属性和方法：把父类的同名属性和方法再次封装</span><br><span class="line">    def make_master_cake(self):</span><br><span class="line">        # 父类类名.函数()</span><br><span class="line">        # 再次调用初始化的原因：这里想要调用父类的同名属性和方法，属性在init初始化位置，</span><br><span class="line">        # 所以需要再次调用init</span><br><span class="line">        Master.__init__(self)</span><br><span class="line">        Master.make_cake(self)</span><br><span class="line"></span><br><span class="line">    def make_school_cake(self):</span><br><span class="line">        School.__init__(self)</span><br><span class="line">        School.make_cake(self)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">daqiu = Prentice()</span><br><span class="line">print(daqiu.kongfu)</span><br><span class="line">daqiu.make_cake()</span><br><span class="line">daqiu.make_master_cake()</span><br><span class="line">daqiu.make_school_cake()</span><br><span class="line">daqiu.make_cake()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------多层继承-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">class School(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Black horse formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">class Prentice(Master, School):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Original technology of Chinese hamburger]&#x27;</span><br><span class="line">    def make_cake(self):</span><br><span class="line">        self.__init__()</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">    def make_master_cake(self):</span><br><span class="line">        Master.__init__(self)</span><br><span class="line">        Master.make_cake(self)</span><br><span class="line"></span><br><span class="line">    def make_school_cake(self):</span><br><span class="line">        School.__init__(self)</span><br><span class="line">        School.make_cake(self)</span><br><span class="line"></span><br><span class="line"># 步骤：1. 创建类Tusun，用这个类创建对象；2. 用这个对象调用父类的属性和方法看能否成功</span><br><span class="line">class Tusun(Prentice):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">xiaoqiu = Tusun()</span><br><span class="line">xiaoqiu.make_cake()</span><br><span class="line">xiaoqiu.make_master_cake()</span><br><span class="line">xiaoqiu.make_school_cake()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------super()方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 使用super()可以自动查找父类，调用顺序遵循__mro__类属性的顺序，比较适合单继承使用</span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">class School(Master):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Black horse formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">        # 2.1 super()带参数写法</span><br><span class="line">        # super(School, self).__init__()</span><br><span class="line">        # super(School, self).make_cake()</span><br><span class="line"></span><br><span class="line">        # 2.2 无参数super</span><br><span class="line">        super().__init__()</span><br><span class="line">        super().make_cake()</span><br><span class="line"></span><br><span class="line">class Prentice(School):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Original technology of Chinese hamburger]&#x27;</span><br><span class="line">    def make_cake(self):</span><br><span class="line">        self.__init__()</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">    def make_master_cake(self):</span><br><span class="line">        Master.__init__(self)</span><br><span class="line">        Master.make_cake(self)</span><br><span class="line"></span><br><span class="line">    def make_school_cake(self):</span><br><span class="line">        School.__init__(self)</span><br><span class="line">        School.make_cake(self)</span><br><span class="line"></span><br><span class="line">    # 需求：一次性调用父类Master，School的方法</span><br><span class="line">    def make_old_cake(self):</span><br><span class="line">        # 方法一：如果定义的类名修改，这里也有修改，代码量大，冗余</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        School.__init__(self)</span><br><span class="line">        School.make_cake(self)</span><br><span class="line">        Master.__init__(self)</span><br><span class="line">        Master.make_cake(self)</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        # 方法二：super()</span><br><span class="line">        # 2.1 super(当前类名, self).函数()</span><br><span class="line">        # super(Prentice, self).__init__()</span><br><span class="line">        # super(Prentice, self).make_cake()</span><br><span class="line"></span><br><span class="line">        # 2.2 无参数super</span><br><span class="line">        super().__init__()</span><br><span class="line">        super().make_cake()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">daqiu = Prentice()</span><br><span class="line">daqiu.make_old_cake()</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------私有属性和方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 定义语法：在属性名和方法名前面加上两个下划线__</span><br><span class="line"># 作用：设置某个实例属性或实例方法不继承给子类</span><br><span class="line">#</span><br><span class="line"># 获取私有属性：get_xx()</span><br><span class="line"># 修改私有属性：set_xx()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Master(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Ancient formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">class School(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Black horse formula for Chinese hamburger]&#x27;</span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">class Prentice(Master, School):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.kongfu = &#x27;[Original technology of Chinese hamburger]&#x27;</span><br><span class="line">        self.__money = 200 # 定义私有属性</span><br><span class="line"></span><br><span class="line">    # 定义函数，获取私有属性值：get_xx</span><br><span class="line">    def get_money(self):</span><br><span class="line">        return self.__money</span><br><span class="line">    # 定义函数，修改私有属性值：set_xx</span><br><span class="line">    def set_money(self):</span><br><span class="line">        self.__money = 500</span><br><span class="line"></span><br><span class="line">    # 定义私有方法</span><br><span class="line">    def __info_print(self):</span><br><span class="line">        print(&#x27;This is private func&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def make_cake(self):</span><br><span class="line">        self.__init__()</span><br><span class="line">        print(f&#x27;Apply &#123;self.kongfu&#125; to make a piece of Chinese hamburger&#x27;)</span><br><span class="line"></span><br><span class="line">    def make_master_cake(self):</span><br><span class="line">        Master.__init__(self)</span><br><span class="line">        Master.make_cake(self)</span><br><span class="line"></span><br><span class="line">    def make_school_cake(self):</span><br><span class="line">        School.__init__(self)</span><br><span class="line">        School.make_cake(self)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Tusun(Prentice):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">xiaoqiu = Tusun()</span><br><span class="line"></span><br><span class="line"># print(xiaoqiu.money)</span><br><span class="line"># print(xiaoqiu.__money)</span><br><span class="line"># xiaoqiu.__info_print() # 私有属性和方法调用则报错</span><br><span class="line"></span><br><span class="line">print(xiaoqiu.get_money()) # 调用获取私有属性的方法</span><br><span class="line"></span><br><span class="line">xiaoqiu.set_money() # 调用修改私有属性的方法</span><br><span class="line"></span><br><span class="line">print(xiaoqiu.get_money())</span><br></pre></td></tr></table></figure>

<h1 id="面向对象之多态"><a href="#面向对象之多态" class="headerlink" title="面向对象之多态"></a>面向对象之多态</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># 面向对象三大特性：封装，继承，多态</span><br><span class="line"># 多态：传入不同的对象，产生不同的结果</span><br><span class="line"></span><br><span class="line">#需求：警务人员和警犬一起工作，警犬分两种：追击敌人和追查毒品，携带不同的警犬，执行不同的工作</span><br><span class="line"></span><br><span class="line"># 1. 定义父类，提供公共方法 警犬 和 人</span><br><span class="line">class Dog(object):</span><br><span class="line">    def work(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line"># 2. 定义子类，子类重写父类方法</span><br><span class="line">class ArmyDog(Dog):</span><br><span class="line">    def work(self):</span><br><span class="line">        print(&#x27;chase enemy&#x27;)</span><br><span class="line"></span><br><span class="line">class DrugDog(Dog):</span><br><span class="line">    def work(self):</span><br><span class="line">        print(&#x27;chase drug&#x27;)</span><br><span class="line"></span><br><span class="line"># 定义警务人员类</span><br><span class="line">class Person(object):</span><br><span class="line">    def work_with_dog(self, dog): # 接收对象的形参</span><br><span class="line">        dog.work()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3. 创建对象，调用不同的功能，传入不同的对象，观察执行的结果</span><br><span class="line"></span><br><span class="line">ad = ArmyDog()</span><br><span class="line">dd = DrugDog()</span><br><span class="line"></span><br><span class="line">daqiu = Person()</span><br><span class="line">daqiu.work_with_dog(ad) # 把对象作为实参传入</span><br><span class="line">daqiu.work_with_dog(dd)</span><br></pre></td></tr></table></figure>

<h1 id="类属性和实例属性"><a href="#类属性和实例属性" class="headerlink" title="类属性和实例属性"></a>类属性和实例属性</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;------------------------设置和访问类属性-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 定义类，定义类属性</span><br><span class="line">class Dog(object):</span><br><span class="line">    tooth = 10</span><br><span class="line"></span><br><span class="line"># 2. 创建对象</span><br><span class="line">wangcai = Dog()</span><br><span class="line">xiaohei = Dog()</span><br><span class="line"></span><br><span class="line"># 3. 访问类属性：类和对象</span><br><span class="line">print(Dog.tooth) # 类访问</span><br><span class="line">print(wangcai.tooth) # 对象访问</span><br><span class="line">print(xiaohei.tooth)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------修改类属性-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">class Dog(object):</span><br><span class="line">    tooth = 10</span><br><span class="line"></span><br><span class="line">wangcai = Dog()</span><br><span class="line">xiaohei = Dog()</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 1. 通过类修改类属性：类.类属性 = 值</span><br><span class="line">Dog.tooth = 20</span><br><span class="line">print(Dog.tooth)</span><br><span class="line">print(wangcai.tooth)</span><br><span class="line">print(xiaohei.tooth)</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 2. 通过对象修改类属性：实际不能修改类属性，而是创建了一个实例属性</span><br><span class="line">wangcai.tooth = 200</span><br><span class="line"></span><br><span class="line">print(Dog.tooth) # 10</span><br><span class="line">print(wangcai.tooth) # 200</span><br><span class="line">print(xiaohei.tooth) # 10</span><br><span class="line"></span><br><span class="line"># 注意：类属性只能通过类修改，不能通过实例对象修改，如果通过实例对象修改类属性，</span><br><span class="line"># 表示的是创建了一个实例属性</span><br></pre></td></tr></table></figure>

<h1 id="类方法和静态方法"><a href="#类方法和静态方法" class="headerlink" title="类方法和静态方法"></a>类方法和静态方法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------类方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需要用装饰器 @classmethod 来标识其为类方法，对于类方法，第一个参数必须是类对象，</span><br><span class="line"># 一般以cls作为第一个参数</span><br><span class="line"></span><br><span class="line"># 1. 定义类：私有类属性，类方法获取这个私有属性</span><br><span class="line">class Dog(object):</span><br><span class="line">    __tooth = 10 # 定义私有属性用__</span><br><span class="line"></span><br><span class="line">    # 定义类方法</span><br><span class="line">    @classmethod</span><br><span class="line">    def get_tooth(cls): # 获取私有属性值get_xx</span><br><span class="line">        return cls.__tooth</span><br><span class="line"></span><br><span class="line"># 2. 创建对象，调用类方法</span><br><span class="line">wangcai = Dog()</span><br><span class="line">result = wangcai.get_tooth()</span><br><span class="line">print(result)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------静态方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 静态方法不需要传递类对象也不需要传递实例对象（形参没有self/cls）,</span><br><span class="line"># 需要用装饰器 @staticmethod 来标识其为静态方法</span><br><span class="line"></span><br><span class="line"># 1. 定义类：定义静态方法</span><br><span class="line">class Dog(object):</span><br><span class="line">    @staticmethod</span><br><span class="line">    def info_print():</span><br><span class="line">        print(&#x27;This is static func&#x27;)</span><br><span class="line"></span><br><span class="line"># 2. 创建对象</span><br><span class="line">wangcai = Dog()</span><br><span class="line"></span><br><span class="line"># 3. 调用静态方法：类 和 对象</span><br><span class="line">wangcai.info_print()</span><br><span class="line">Dog.info_print()</span><br></pre></td></tr></table></figure>

<h1 id="拓展——综合"><a href="#拓展——综合" class="headerlink" title="拓展——综合"></a>拓展——综合</h1><h2 id="拓展-dict"><a href="#拓展-dict" class="headerlink" title="拓展__dict__"></a>拓展__dict__</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 1.定义类</span><br><span class="line">class A(object):</span><br><span class="line">    a = 0</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.b = 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2.创建对象</span><br><span class="line">aa = A()</span><br><span class="line"></span><br><span class="line"># 3.调用__dict__</span><br><span class="line"></span><br><span class="line">print(A.__dict__) # 返回类内部所有属性和方法对应的字典</span><br><span class="line"></span><br><span class="line">print(aa.__dict__) # 返回实例属性和值组成的字典</span><br></pre></td></tr></table></figure>

<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------体验异常-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求：尝试打开test.txt(r)，如果文件不存在，用只写方式打开（w）</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">语法：</span><br><span class="line">try:</span><br><span class="line">    可能发生错误的代码</span><br><span class="line">except</span><br><span class="line">    发生错误的时候执行的代码</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    f = open(&#x27;test.txt&#x27;, &#x27;r&#x27;)</span><br><span class="line">except:</span><br><span class="line">    f = open(&#x27;test.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------异常类型-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 异常类型：NameError</span><br><span class="line"># print(num)</span><br><span class="line"></span><br><span class="line"># ZeroDivisionError</span><br><span class="line">print(1/0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------捕获指定异常类型-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求：尝试执行打印num，捕获异常类型NameError，如果捕获到这个异常类型，执行打印：有错误</span><br><span class="line"># 注意：1. 如果尝试执行的代码的异常类型和要捕获的异常类型不一致，则无法捕获异常。</span><br><span class="line">#      2. 一般try下方只放一行尝试执行的代码</span><br><span class="line">try:</span><br><span class="line">    # print(num)</span><br><span class="line">    print(1/0)</span><br><span class="line">except NameError:</span><br><span class="line">    print(&#x27;Something Wrong&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------捕获指定异常类型-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    print(1/0)</span><br><span class="line">except (NameError, ZeroDivisionError):</span><br><span class="line">    print(&#x27;Something Wrong&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------捕获异常描述信息-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    print(num)</span><br><span class="line">except (NameError, ZeroDivisionError) as result:</span><br><span class="line">    print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------捕获所有异常以及异常的else-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># Exception是所有程序异常类的父类</span><br><span class="line"></span><br><span class="line"># 尝试执行打印num，捕获Exception 打印异常描述信息</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    print(num)</span><br><span class="line">except Exception as result:</span><br><span class="line">    print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------异常的else-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># else表示的是如果没有异常要执行的代码</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    print(1)</span><br><span class="line">except Exception as result:</span><br><span class="line">    print(result)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;This is the code will run when no exception found&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------异常的finally-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># finally表示的是无论是否异常都要执行的代码，例如关闭文件</span><br><span class="line"></span><br><span class="line"># 需求：尝试以r打开文件，如果有异常以w打开这个文件，最终关闭文件</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    f = open(&#x27;test.txt&#x27;, &#x27;r&#x27;)</span><br><span class="line">except Exception as result:</span><br><span class="line">    f = open(&#x27;test.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">finally:</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------异常的传递-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求1：尝试只读打开test.txt 文件存在读取内容，不存在提示用户</span><br><span class="line"># 需求2：读取内容：循环读取，当无内容的时候退出循环，如果用户意外终止，提示用户已经被意外终止</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line">try:</span><br><span class="line">    f = open(&#x27;test.txt&#x27;)</span><br><span class="line">    # 尝试循环读取内容</span><br><span class="line">    try:</span><br><span class="line">        while True:</span><br><span class="line">            con = f.readline()</span><br><span class="line">            # 如果读取完成退出循环</span><br><span class="line">            if len(con) == 0:</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">            time.sleep(3)</span><br><span class="line">            print(con)</span><br><span class="line">    except:</span><br><span class="line">        # 在命令提示符中如果按下ctrl+c结束终止的键</span><br><span class="line">        print(&#x27;Program was interrupted unexpectedly&#x27;)</span><br><span class="line"></span><br><span class="line">except:</span><br><span class="line">    print(&#x27;The file is not exist&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------自定义异常-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 语法：raise 异常类对象</span><br><span class="line"></span><br><span class="line"># 1。自定义异常类，继承Exception，魔法方法有init和str(设置异常描述信息)</span><br><span class="line">class ShortInputError(Exception): # 继承Exception父类</span><br><span class="line">    def __init__(self, length, min_len):</span><br><span class="line">    # 用户输入的密码长度</span><br><span class="line">        self.length = length</span><br><span class="line">    # 系统要求的最小密码长度</span><br><span class="line">        self.min_len = min_len</span><br><span class="line"></span><br><span class="line">    # 设置异常描述信息</span><br><span class="line">    def __str__(self):</span><br><span class="line">        return f&#x27;The length of your password is &#123;self.length&#125;, &#x27; \</span><br><span class="line">               f&#x27;it should be &#123;self.min_len&#125; at minimum&#x27;</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line"># 2. 抛出异常: 尝试执行：用户输入密码，如果长度小于3，抛出异常</span><br><span class="line">    try:</span><br><span class="line">        password = input(&#x27;please input your password: &#x27;)</span><br><span class="line">        if len(password) &lt; 3:</span><br><span class="line">            # 抛出异常类创建的对象</span><br><span class="line">            raise ShortInputError(len(password), 3) # raise 异常类名()</span><br><span class="line"></span><br><span class="line">    # 3. 捕获该异常</span><br><span class="line">    except Exception as result:</span><br><span class="line">        print(result)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;No exception, password input complete&#x27;)</span><br><span class="line"></span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;------------------------模块的使用方法-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 需求：math模块下sqrt()开平方计算</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1. 导入模块</span><br><span class="line">2. 测试是否导入成功，调用该模块内的sqrt功能</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 方法一： import 模块名; 模块名.功能</span><br><span class="line"></span><br><span class="line">import math</span><br><span class="line">print(math.sqrt(9))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 方法二：from 模块名 import 功能1，功能2....; 功能调用（不需要写模块名.功能）</span><br><span class="line"></span><br><span class="line">from math import sqrt</span><br><span class="line">print(sqrt(9))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 方法三：from 模块名 import *; 功能调用（不需要写模块名.功能）</span><br><span class="line"></span><br><span class="line">from math import *</span><br><span class="line">print(sqrt(9))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------as定义别名-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 语法：1.模块定义别名：import 模块名 as 别名。</span><br><span class="line">#      2.功能定义别名：from 模块名 import 功能 as 别名</span><br><span class="line"></span><br><span class="line"># 需求：运行后暂定2秒打印hello</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1.导入time模块或导入time模块的sleep功能</span><br><span class="line">2.调用功能</span><br><span class="line">3.打印hello</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 1.模块别名</span><br><span class="line">import time as tt</span><br><span class="line">tt.sleep(2)</span><br><span class="line"># time.sleep(2)</span><br><span class="line">print(&#x27;hello&#x27;)</span><br><span class="line"></span><br><span class="line"># 2.功能别名</span><br><span class="line">from time import sleep as s1</span><br><span class="line">s1(2)</span><br><span class="line">print(&#x27;hello&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------制作模块之定义和测试模块-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 每个python文件都可以作为一个模块，模块的名字就是文件的名字，自定义模块名必须要符合标识符命名规则</span><br><span class="line"># 请参考my_module1.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------制作模块之调用模块-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1.导入模块</span><br><span class="line">import my_module1</span><br><span class="line"></span><br><span class="line"># 调用功能</span><br><span class="line">my_module1.testA(2, 2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------模块定位顺序之注意点-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 1. 自己新建的模块名不能和已有的模块名重复，否则就会导致模块无法使用 -- 例如random</span><br><span class="line">import random</span><br><span class="line">num = random.randint(1, 5)</span><br><span class="line">print(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2. 当使用from xx import 功能 导入模块功能的时候，如果功能名字重复，</span><br><span class="line">#    调用到的是最后定义的功能(又名函数)或是最后导入的功能</span><br><span class="line"></span><br><span class="line"># 场景：time.sleep()</span><br><span class="line">def sleep():</span><br><span class="line">    print(&#x27;This is a user-defined func&#x27;)</span><br><span class="line"></span><br><span class="line">from time import sleep</span><br><span class="line"></span><br><span class="line"># 定义函数 sleep</span><br><span class="line"># def sleep():</span><br><span class="line">#    print(&#x27;This is a user-defined func&#x27;)</span><br><span class="line"></span><br><span class="line">sleep(2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 拓展：模块名重复</span><br><span class="line"># 问题：import 模块名 -- 不需要介意功能名字重复的问题</span><br><span class="line">import time</span><br><span class="line">print(time)</span><br><span class="line"></span><br><span class="line">time = 1</span><br><span class="line">print(time)</span><br><span class="line"></span><br><span class="line"># 问题：为什么变量也能覆盖模块？ -- 在python语言中，数据是通过 引用 传递的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------—__all__列表-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 如果一个模块文件中有__all__变量，当使用from xx import * 导入时，只能导入all列表中的元素</span><br><span class="line"></span><br><span class="line">from my_module2 import *</span><br><span class="line"></span><br><span class="line">testA()</span><br><span class="line"></span><br><span class="line"># 因为testB函数没有添加到all列表，只有all列表里面的功能才能导入</span><br><span class="line"># testB()</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------—制作包-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 包将有联系的模块组织在一起，即放到同一个文件夹下，</span><br><span class="line"># 并且在这个文件夹创建一个名字为__init__.py文件，那么这个文件夹就称之为包</span><br><span class="line"></span><br><span class="line"># [Mew]-[Python Package]-输入名称-[OK]-新建功能模块(有联系的模块)</span><br><span class="line"># 注意：新建包后，包内部会自动创建__init__.py文件，这个文件控制着包的导入行为</span><br><span class="line"></span><br><span class="line"># 请参考mypackage包下my_module1.py与my_module2.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------—导入包-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 方法一：</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">1.导入</span><br><span class="line">import 包名.模块名</span><br><span class="line">2.调用功能</span><br><span class="line">包名.模块名.功能()</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 导入mypackage包下的模块1：使用这个模块内的info_print1函数</span><br><span class="line">import mypackage.my_module1</span><br><span class="line"></span><br><span class="line">mypackage.my_module1.info_print1()</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 方法二：</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">注意：必须在__init__.py文件中添加__all__ = []，控制允许导入的模块列表</span><br><span class="line">from 包名 import *</span><br><span class="line">模块名.功能()</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">from mypackage import *</span><br><span class="line">my_module1.info_print1()</span><br></pre></td></tr></table></figure>

<h2 id="test-txt"><a href="#test-txt" class="headerlink" title="test.txt"></a>test.txt</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aaaaa</span><br><span class="line">bbbbb</span><br><span class="line">ccccc</span><br><span class="line">ddddd</span><br><span class="line">eeeee</span><br></pre></td></tr></table></figure>

<h2 id="my-module1"><a href="#my-module1" class="headerlink" title="my_module1"></a>my_module1</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 需求：一个函数完成任意两个数字加法运算</span><br><span class="line">def testA(a, b):</span><br><span class="line">    print(a + b)</span><br><span class="line"></span><br><span class="line"># 测试信息</span><br><span class="line"># testA(1, 1)</span><br><span class="line"></span><br><span class="line"># print(__name__)</span><br><span class="line"></span><br><span class="line"># __name__是系统变量，是模块的标识符，其值为：</span><br><span class="line"># 如果在自身模块中运行则值是__main__，否则是当前模块的名字</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    testA(1, 1)</span><br></pre></td></tr></table></figure>

<h2 id="my-module2"><a href="#my-module2" class="headerlink" title="my_module2"></a>my_module2</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 定义多个功能，把某个功能添加到__all__</span><br><span class="line">__all__ = [&#x27;testA&#x27;]</span><br><span class="line"></span><br><span class="line">def testA():</span><br><span class="line">    print(&#x27;testA&#x27;)</span><br><span class="line"></span><br><span class="line">def testB():</span><br><span class="line">    print(&#x27;testB&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="StudentManagerSystem"><a href="#StudentManagerSystem" class="headerlink" title="StudentManagerSystem"></a>StudentManagerSystem</h2><h3 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 1.导入管理系统函数</span><br><span class="line">from managerSystem import *</span><br><span class="line"># 2.启动管理系统</span><br><span class="line"># 保证是当前文件运行才启动管理系统 if --创建对象并调用main方法</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    student_manager = StudentManager()</span><br><span class="line">    student_manager.run()</span><br></pre></td></tr></table></figure>

<h3 id="managerSystem-py"><a href="#managerSystem-py" class="headerlink" title="managerSystem.py"></a>managerSystem.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">from student import *</span><br><span class="line"></span><br><span class="line">class StudentManager(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 存储学员数据 -- 列表</span><br><span class="line">        self.student_list = []</span><br><span class="line"></span><br><span class="line">    # 一，程序入口函数</span><br><span class="line">    def run(self):</span><br><span class="line">        # 1.加载文件里面的学员数据</span><br><span class="line">        self.load_student()</span><br><span class="line"></span><br><span class="line">        while True:</span><br><span class="line">            # 2.显示功能菜单</span><br><span class="line">            self.show_menu()</span><br><span class="line">            # 3.用户输入目标功能序号</span><br><span class="line">            menu_num = int(input(&#x27;please input the func number: &#x27;))</span><br><span class="line"></span><br><span class="line">            # 4.根据用户输入的序号执行不同的功能</span><br><span class="line">            if menu_num == 1:</span><br><span class="line">                # 添加学员</span><br><span class="line">                self.add_student()</span><br><span class="line">            elif menu_num == 2:</span><br><span class="line">                # 删除学员</span><br><span class="line">                self.del_student()</span><br><span class="line">            elif menu_num == 3:</span><br><span class="line">                # 修改学员</span><br><span class="line">                self.modify_student()</span><br><span class="line">            elif menu_num == 4:</span><br><span class="line">                # 查询学员</span><br><span class="line">                self.query_student()</span><br><span class="line">            elif menu_num == 5:</span><br><span class="line">                # 显示所有学员信息</span><br><span class="line">                self.show_student()</span><br><span class="line">            elif menu_num == 6:</span><br><span class="line">                # 保存学员信息</span><br><span class="line">                self.save_student()</span><br><span class="line">            elif menu_num == 7:</span><br><span class="line">                # 退出系统 -- 退出循环</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # 二，系统功能函数</span><br><span class="line">    # 2.1 显示功能菜单 -- 静态方法</span><br><span class="line">    @staticmethod</span><br><span class="line">    def show_menu():</span><br><span class="line">        print(&#x27;please select following item: &#x27;)</span><br><span class="line">        print(&#x27;1: add student&#x27;)</span><br><span class="line">        print(&#x27;2: delete student&#x27;)</span><br><span class="line">        print(&#x27;3: modify student&#x27;)</span><br><span class="line">        print(&#x27;4: query student&#x27;)</span><br><span class="line">        print(&#x27;5: display all students\&#x27; info&#x27;)</span><br><span class="line">        print(&#x27;6: save student\&#x27;s info&#x27;)</span><br><span class="line">        print(&#x27;7: exit&#x27;)</span><br><span class="line"></span><br><span class="line">    # 2.2 添加学员</span><br><span class="line">    def add_student(self):</span><br><span class="line">        # 1. 用户输入姓名，性别，手机号</span><br><span class="line">        name = input(&#x27;please input your name: &#x27;)</span><br><span class="line">        gender = input(&#x27;please input your gender: &#x27;)</span><br><span class="line">        tel = input(&#x27;please input your phone number: &#x27;)</span><br><span class="line"></span><br><span class="line">        # 2. 创建学员对象 -- 类在student文件里面，先导入student模块，再创建对象</span><br><span class="line">        student = Student(name, gender, tel)</span><br><span class="line"></span><br><span class="line">        # 3. 将该对象添加到学员列表</span><br><span class="line">        self.student_list.append(student)</span><br><span class="line">        print(self.student_list)</span><br><span class="line">        print(student)</span><br><span class="line"></span><br><span class="line">    # 2.3 删除学员</span><br><span class="line">    def del_student(self):</span><br><span class="line">        # 1.用户输入目标学员姓名</span><br><span class="line">        del_name = input(&#x27;please input the student\&#x27;s name you want to delete: &#x27;)</span><br><span class="line">        # 2.遍历学员列表，如果用户输入的学员存在则删除学员对象，否则提示学员不存在</span><br><span class="line">        for i in self.student_list:</span><br><span class="line">            if del_name == i.name:</span><br><span class="line">                # 删除该学员对象</span><br><span class="line">                self.student_list.remove(i)</span><br><span class="line">                break</span><br><span class="line">        else:</span><br><span class="line">            print(f&#x27;There is no student has a name &#123;del_name&#125;\n&#x27;)</span><br><span class="line"></span><br><span class="line">        print(self.student_list)</span><br><span class="line"></span><br><span class="line">    # 2.4 修改学员</span><br><span class="line">    def modify_student(self):</span><br><span class="line">        modify_name = input(&#x27;please input the student\&#x27;s name you want to modify: &#x27;)</span><br><span class="line">        for i in self.student_list:</span><br><span class="line">            if modify_name == i.name:</span><br><span class="line">                i.name = input(&#x27;please input a new name: &#x27;)</span><br><span class="line">                i.gender = input(&#x27;please input a new gender: &#x27;)</span><br><span class="line">                i.tel = input(&#x27;please input a new phone number: &#x27;)</span><br><span class="line">                print(f&#x27;modify student\&#x27;s info success, &#x27;</span><br><span class="line">                      f&#x27;new name &#123;i.name&#125;, new gender &#123;i.gender&#125;, new tel &#123;i.tel&#125;\n&#x27;)</span><br><span class="line">                break</span><br><span class="line">        else:</span><br><span class="line">            print(f&#x27;There is no student has a name &#123;modify_name&#125;\n&#x27;)</span><br><span class="line"></span><br><span class="line">    # 2.5 查询学员</span><br><span class="line">    def query_student(self):</span><br><span class="line">        query_name = input(&#x27;please input the student\&#x27;s name you want to query: &#x27;)</span><br><span class="line">        for i in self.student_list:</span><br><span class="line">            if query_name == i.name:</span><br><span class="line">                print(f&#x27;The student you want to query has a name &#123;i.name&#125;, &#x27;</span><br><span class="line">                      f&#x27;a gender &#123;i.gender&#125;, a phone number &#123;i.tel&#125;\n&#x27;)</span><br><span class="line">                break</span><br><span class="line">        else:</span><br><span class="line">            print(f&#x27;There is no student has a name &#123;query_name&#125;\n&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # 2.6 显示所有学员信息</span><br><span class="line">    def show_student(self):</span><br><span class="line">        print(&#x27;name\tgender\ttel&#x27;)</span><br><span class="line">        for i in self.student_list:</span><br><span class="line">            print(f&#x27;&#123;i.name&#125;\t&#123;i.gender&#125;\t&#123;i.tel&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # 2.7 保存学员信息</span><br><span class="line">    def save_student(self):</span><br><span class="line">        f = open(&#x27;student.data&#x27;, &#x27;w&#x27;)</span><br><span class="line">        # [学员对象] 转换成 [字典]</span><br><span class="line">        new_list = [i.__dict__ for i in self.student_list]</span><br><span class="line">        # 写入字符串数据 -- 列表转换成字符串</span><br><span class="line">        f.write(str(new_list))</span><br><span class="line"></span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line">    # 2.8 加载学员信息</span><br><span class="line">    def load_student(self):</span><br><span class="line">        # 尝试以r打开，有异常再用w</span><br><span class="line">        try:</span><br><span class="line">            f = open(&#x27;student.data&#x27;, &#x27;r&#x27;)</span><br><span class="line">        except:</span><br><span class="line">            f = open(&#x27;student.data&#x27;, &#x27;w&#x27;)</span><br><span class="line">        else:</span><br><span class="line">            # 文件读取出的数据是字符串还原成列表类型：[字典] 转换成 [学员对象]</span><br><span class="line">            data = f.read() # 字符串</span><br><span class="line">            new_list = eval(data)</span><br><span class="line">            self.student_list = [Student(i[&#x27;name&#x27;], i[&#x27;gender&#x27;], i[&#x27;tel&#x27;]) for i in new_list]</span><br><span class="line"></span><br><span class="line">        finally:</span><br><span class="line">            f.close()</span><br></pre></td></tr></table></figure>

<h3 id="student-data"><a href="#student-data" class="headerlink" title="student.data"></a>student.data</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;&#x27;name&#x27;: &#x27;aaa&#x27;, &#x27;gender&#x27;: &#x27;male&#x27;, &#x27;tel&#x27;: &#x27;1111&#x27;&#125;]</span><br></pre></td></tr></table></figure>

<h3 id="student-py"><a href="#student-py" class="headerlink" title="student.py"></a>student.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Student(object):</span><br><span class="line">    def __init__(self, name, gender, tel):</span><br><span class="line">        # 姓名，性别，手机号</span><br><span class="line">        self.name = name</span><br><span class="line">        self.gender = gender</span><br><span class="line">        self.tel = tel</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return f&#x27;&#123;self.name&#125;, &#123;self.gender&#125;, &#123;self.tel&#125;&#x27;</span><br><span class="line"></span><br><span class="line"># aa = Student(&#x27;aa&#x27;, &#x27;male&#x27;, 111)</span><br><span class="line"># print(aa)</span><br></pre></td></tr></table></figure>

<h2 id="mypackage"><a href="#mypackage" class="headerlink" title="mypackage"></a>mypackage</h2><h3 id="my-module1-py"><a href="#my-module1-py" class="headerlink" title="my_module1.py"></a>my_module1.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(1)</span><br><span class="line"></span><br><span class="line">def info_print1():</span><br><span class="line">    print(&#x27;my_module1&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="my-module2-py"><a href="#my-module2-py" class="headerlink" title="my_module2.py"></a>my_module2.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(2)</span><br><span class="line"></span><br><span class="line">def info_print2():</span><br><span class="line">    print(&#x27;my_module2&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="init-py"><a href="#init-py" class="headerlink" title="init.py"></a><strong>init</strong>.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(2)</span><br><span class="line"></span><br><span class="line">def info_print2():</span><br><span class="line">    print(&#x27;my_module2&#x27;)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/Python%E5%9F%BA%E7%A1%80%E5%89%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/Python%E5%9F%BA%E7%A1%80%E5%89%AF/" class="post-title-link" itemprop="url">python基础副</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-26 13:44:29" itemprop="dateModified" datetime="2022-05-26T13:44:29+08:00">2022-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Demo01-py"><a href="#Demo01-py" class="headerlink" title="Demo01.py"></a>Demo01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;hello world!!!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;hello kitty!!!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;hello baby!!!&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Demo02-py"><a href="#Demo02-py" class="headerlink" title="Demo02.py"></a>Demo02.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;Dear customer:&#x27;)</span><br><span class="line">print(&#x27;    please click the hyperlinks to activate your account: Activate !&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="hello-py"><a href="#hello-py" class="headerlink" title="hello.py"></a>hello.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#coding:utf-8</span><br><span class="line">print(&#x27;hello world!&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="print-demo-py"><a href="#print-demo-py" class="headerlink" title="print_demo.py"></a>print_demo.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># print函数</span><br><span class="line"># 1.用法</span><br><span class="line">print(&#x27;hello world!&#x27;)</span><br><span class="line">name = &#x27;小白&#x27;</span><br><span class="line">print(name)</span><br><span class="line"></span><br><span class="line"># 2.用法：print(name,age,gender)</span><br><span class="line">age = 18</span><br><span class="line">gender = &#x27;boy&#x27;</span><br><span class="line"></span><br><span class="line">print(name,age,gender) # sep默认的分割是空格</span><br><span class="line"></span><br><span class="line"># 3.用法： print(value, value, value,..., sep=&#x27; &#x27;,end=&#x27;\n&#x27;)</span><br><span class="line">print(name,age,gender,sep=&#x27;_&#x27;) # sep=&#x27;*&#x27; sep=&#x27;$&#x27; sep=&#x27;-&#x27;</span><br><span class="line"></span><br><span class="line"># 转义字符： \n 换行； \t 制表符； \r 回车； \&#x27;； \&quot;； \\</span><br><span class="line">print(&#x27;hello\nkitty&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;AAA&#x27;,end=&#x27;&#x27;)</span><br><span class="line">print(&#x27;BBB&#x27;,end=&#x27;&#x27;)</span><br><span class="line">print(&#x27;CCC&#x27;,end=&#x27;\n&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;Dear customer:\n\tplease click the hyperlinks to activate your account: Activate!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;Dear customer:\n&#x27;, &#x27;\tplease click the hyperlinks to activate your account: Activate!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;George says: \&#x27; I want to eat ice cream! \&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;George says: &quot;I want to play dinosaur!&quot;&#x27;)</span><br><span class="line"></span><br><span class="line">print(&quot;George says: &#x27;I want to sleep!&#x27;&quot;)</span><br><span class="line"></span><br><span class="line">print(&#x27;hello\py\thon&#x27;)</span><br><span class="line"></span><br><span class="line">print(r&#x27;hello\py\thon&#x27;) # r&#x27;&#x27; raw 原样输出字符串的内容，即使有转义字符也不会转义</span><br></pre></td></tr></table></figure>

<h1 id="string-demo-py"><a href="#string-demo-py" class="headerlink" title="string_demo.py"></a>string_demo.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 字符串</span><br><span class="line"></span><br><span class="line"># s1 = &#x27;abc&#x27;</span><br><span class="line"># s2 = &quot;abc&quot;</span><br><span class="line"># s3 = &#x27;&#x27;&#x27;</span><br><span class="line"># abc</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line"># print(id(s1),id(s2),id(s3)) # 三引号占用的内存空间与单双引号不同</span><br><span class="line"># 							# (前提：三引号里面的内容不在同一行，保留一种其他格式的时候)</span><br><span class="line"></span><br><span class="line"># print(s1 == s2) # 比较的是内容</span><br><span class="line"># print(s1 is s2) # 比较的是地址</span><br><span class="line"></span><br><span class="line"># print(s2 == s3)</span><br><span class="line"># print(s2 is s3)</span><br><span class="line"></span><br><span class="line"># print(s2)</span><br><span class="line"># print(s3)</span><br><span class="line"></span><br><span class="line"># s1 = input(&#x27;input: &#x27;)</span><br><span class="line"># s2 = input(&#x27;input: &#x27;)</span><br><span class="line"></span><br><span class="line"># print(s1 == s2) # True</span><br><span class="line"># print(s1 is s2) # False </span><br><span class="line"># 注意：普通变量/常量直接赋值相同内容用is判断是True，</span><br><span class="line"># 用input输入来赋值，底层会做处理，即使输入相同内容，地址也会不同，用is判断是False.</span><br><span class="line"></span><br><span class="line"># 字符串的运算符</span><br><span class="line"></span><br><span class="line"># s3 = s1 + s2  # 相当于拼接符</span><br><span class="line"></span><br><span class="line"># s4 = s1 * 5</span><br><span class="line"></span><br><span class="line"># print(s3)</span><br><span class="line"># print(s4)</span><br><span class="line"></span><br><span class="line"># in 在字符串内</span><br><span class="line"></span><br><span class="line">name = &#x27;steven&#x27;</span><br><span class="line"></span><br><span class="line">result = &#x27;ste&#x27; in name # in的返回值是布尔类型</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># not in 没在字符串内</span><br><span class="line"></span><br><span class="line">result = &#x27;tv&#x27; not in name</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># % 字符串的格式化</span><br><span class="line">print(&#x27;%s says: %s&#x27; % (name, &#x27;Everybody should study hard!&#x27;))</span><br><span class="line"></span><br><span class="line"># r 保留原格式</span><br><span class="line">print(r&#x27;%s says: \&#x27;hahaha!\&#x27; &#x27; % name) # 用r则有转义字符不进行转义</span><br><span class="line">print(&#x27;%s says: \&#x27;hahaha!\&#x27; &#x27; % name)</span><br><span class="line"></span><br><span class="line"># [] [start:end] 切片</span><br><span class="line">filename = &#x27;picture.png&#x27;</span><br><span class="line"></span><br><span class="line"># 位置都是从0开始，位置称作下标或索引</span><br><span class="line">print(filename[5]) # 通过[]可以结合位置 获取字母  特点：只能获取一个字母</span><br><span class="line"></span><br><span class="line"># range(1,10) ---&gt; [1:10]</span><br><span class="line"></span><br><span class="line">print(filename[0:7]) # 包括前面不包括后面</span><br><span class="line"></span><br><span class="line">print(filename[3:7]) # 截取字符串</span><br><span class="line"></span><br><span class="line"># 省略</span><br><span class="line">print(filename[3:]) # 省略后面表示取到结尾</span><br><span class="line">print(filename[:7]) # 省略前面表示从0开始取值</span><br><span class="line"></span><br><span class="line"># 负数</span><br><span class="line">print(filename[8:-1])</span><br><span class="line">print(filename[:-2])</span><br><span class="line">print(filename[-1:])</span><br><span class="line">print(filename[-5:-1])</span><br><span class="line">print(filename[10:0])</span><br><span class="line"></span><br><span class="line"># [start:end:step]</span><br><span class="line">print(filename[::-1]) # 倒叙</span><br><span class="line"></span><br><span class="line">str1 = &#x27;abcdefg&#x27;</span><br><span class="line"></span><br><span class="line">print(str1[-1:-5:-1])</span><br><span class="line">print(str1[5:0:-1]) # 取值方向需与取值方向一致</span><br><span class="line">print(&#x27;----&gt;&#x27;,str1[5:0:1])</span><br><span class="line"></span><br><span class="line"># 指定步长取值</span><br><span class="line">print(str1[6:0:-2])</span><br></pre></td></tr></table></figure>

<h1 id="str-demo-py"><a href="#str-demo-py" class="headerlink" title="str_demo.py"></a>str_demo.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># 定义常量</span><br><span class="line"># java: final</span><br><span class="line"># python:命名的时候，名字是大写</span><br><span class="line"></span><br><span class="line">NAME = &#x27;Jack&#x27;</span><br><span class="line">print(NAME)</span><br><span class="line">print(&#x27;hello&#x27;)</span><br><span class="line"></span><br><span class="line">value = &#x27;hello&#x27;</span><br><span class="line">print(value)</span><br><span class="line"></span><br><span class="line">value = &#x27;python&#x27;</span><br><span class="line">print(value)</span><br><span class="line"></span><br><span class="line">value = &quot;hello python&quot;</span><br><span class="line">print(value)</span><br><span class="line"></span><br><span class="line"># 字符串表示： &#x27;&#x27;;  &quot;&quot;;  &#x27;&#x27;&#x27; &#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">message = &#x27;[taobao] You are trying using verification code to login, \nthe code is: 8906,&#x27; \</span><br><span class="line">		  &#x27;\nit involves personal account security, so Please keep it confidential.&#x27;</span><br><span class="line">print(message)</span><br><span class="line"></span><br><span class="line">message1 = &#x27;&#x27;&#x27;</span><br><span class="line">[taobao] </span><br><span class="line">You are trying using verification code to login,</span><br><span class="line">the code is: 8906,</span><br><span class="line">it involves personal account security, so Please keep it confidential.</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(message1)</span><br><span class="line"></span><br><span class="line">email_message = &#x27;&#x27;&#x27;</span><br><span class="line">Dear Zhaofei:</span><br><span class="line">	The TiktoK account you just registrated has not yet been activated, </span><br><span class="line">please click below links to activate it!</span><br><span class="line">	Click this: Activate!!!</span><br><span class="line">	Once the account is activated, you can watch all the videos online!</span><br><span class="line"></span><br><span class="line">from: Tiktok team</span><br><span class="line">	 </span><br><span class="line">	 date: 2019/05/29</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(email_message)</span><br><span class="line"></span><br><span class="line"># 三引号的作用： 1.定义一个变量并赋值字符串时，需要保留字符串的格式的时候使用</span><br><span class="line">#				2.作为多行注释的时候使用</span><br></pre></td></tr></table></figure>

<h1 id="str-var-py"><a href="#str-var-py" class="headerlink" title="str_var.py"></a>str_var.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"># 格式化输出</span><br><span class="line"></span><br><span class="line">person = &#x27;The Great Sage&#x27;</span><br><span class="line">address = &#x27;4 / F, Zhicheng Science and Technology Building, &#x27; \</span><br><span class="line">		  &#x27;\nZhongguancun, Haidian District, Beijing&#x27;</span><br><span class="line">phone = &#x27;15858588888&#x27;</span><br><span class="line">num = 5</span><br><span class="line"></span><br><span class="line"># 用&#x27;+&#x27;符号拼接，字符串 + 字符串 --&gt; OK ； 字符串 + 整型 --&gt; TypeError</span><br><span class="line">print(&#x27;The order is addressed to:&#x27;+person+ \</span><br><span class="line">	&#x27;\nReceiver address is:&#x27;+address+ \</span><br><span class="line">	&#x27;\nContacte:&#x27;+phone+&#x27;\nQuantity of Goods:&#x27;+str(num))</span><br><span class="line"></span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line"># 用%s占位符，后面依序添加对应变量%()</span><br><span class="line">print(&#x27;The order is addressed to:%s, \</span><br><span class="line">	\nReceiver address is:%s, \nContacte:%s, \</span><br><span class="line">	\nQuantity of Goods:%s&#x27; %(person, address, phone, num))</span><br><span class="line"></span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line"># 用f&#x27;...&#123;变量&#125;...&#x27; 格式化输出</span><br><span class="line"></span><br><span class="line">print(f&#x27;The order is addressed to:&#123;person&#125;, \</span><br><span class="line">	\nReceiver address is:&#123;address&#125;, \nContacte:&#123;phone&#125;, \</span><br><span class="line">	\nQuantity of Goods:&#123;num&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 需求：打印个人信息</span><br><span class="line"></span><br><span class="line">name = &#x27;admin&#x27;</span><br><span class="line">age = 18</span><br><span class="line">clazz = &#x27;python&#x27;</span><br><span class="line"></span><br><span class="line">msg = &#x27;&#x27;&#x27;</span><br><span class="line">Profile:</span><br><span class="line">My name is %s,</span><br><span class="line">I&#x27;m %s years old,</span><br><span class="line">and studying in class %s</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27; %(name, age, clazz)</span><br><span class="line"></span><br><span class="line">print(msg)</span><br></pre></td></tr></table></figure>

<h1 id="str-format-py"><a href="#str-format-py" class="headerlink" title="str_format.py"></a>str_format.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">age = 19</span><br><span class="line"># str(int) ---&gt; (int -&gt; str)  强制类型转换</span><br><span class="line">print(&#x27;age is:&#x27;+str(age))</span><br><span class="line">print(&#x27;age is:%s&#x27; % age) # %s --&gt; str简写  底层：str(age)</span><br><span class="line">isMarry=False # 布尔类型  </span><br><span class="line">print(&#x27;Marry or not? Answer:%s&#x27; %isMarry) # str(False) ---&gt; &#x27;False&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># %d  digit  数字</span><br><span class="line">print(&#x27;age is:%d&#x27; % age)</span><br><span class="line"></span><br><span class="line">age = &#x27;18&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;age is:%d&#x27; % int(age))</span><br><span class="line"></span><br><span class="line">age = 18.5 # int(18.5) ---&gt; 取整数</span><br><span class="line">print(&#x27;age is:%d&#x27; % age)</span><br><span class="line"></span><br><span class="line">year = 2019</span><br><span class="line">print(&#x27;The year is:%06d&#x27; % year)</span><br><span class="line"></span><br><span class="line"># %f  float 小数点后面的位数， 而且是四舍五入</span><br><span class="line">salary=8899.99</span><br><span class="line">print(&#x27;my salary is:%.2f&#x27; % salary)</span><br></pre></td></tr></table></figure>

<h1 id="str-format02-py"><a href="#str-format02-py" class="headerlink" title="str_format02.py"></a>str_format02.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 字符串的格式化输出</span><br><span class="line"># 方式：1.使用占位符；2.format()函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># format是一个字符串中的函数 &#x27;&#x27;.format()  此处的‘ . ’表示调用</span><br><span class="line">age = 2</span><br><span class="line">s=&#x27;already&#x27;</span><br><span class="line">message = &#x27;George says:I\&#x27;m &#123;&#125; years old now，&#123;&#125; in kindergarten!&#x27;.format(age,s)</span><br><span class="line">print(message)</span><br><span class="line"></span><br><span class="line">name = &#x27;George&#x27;</span><br><span class="line">age = 3</span><br><span class="line">hobby = &#x27;play dinosaur!&#x27;</span><br><span class="line">money = 5.89</span><br><span class="line"></span><br><span class="line">message = &#x27;&#123;&#125; is &#123;&#125; years old, he likes to &#123;&#125;, \</span><br><span class="line">\nand he has &#123;&#125; yuan pocket money&#x27;.format(name,age,hobby,money)</span><br><span class="line"></span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<h1 id="input-demo-py"><a href="#input-demo-py" class="headerlink" title="input_demo.py"></a>input_demo.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 输入: input()函数</span><br><span class="line"># 所输入的都是字符串类型</span><br><span class="line">name = input(&#x27;please input the name: &#x27;) # 阻塞式</span><br><span class="line"></span><br><span class="line">print(name)</span><br></pre></td></tr></table></figure>

<h1 id="operator-01-py"><a href="#operator-01-py" class="headerlink" title="operator_01.py"></a>operator_01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"># 一， 赋值运算符</span><br><span class="line"></span><br><span class="line"># 1. = </span><br><span class="line">name = &#x27;admin&#x27;</span><br><span class="line"></span><br><span class="line">name1 = name</span><br><span class="line"></span><br><span class="line">print(id(name),name)</span><br><span class="line">print(id(name1),name1)</span><br><span class="line"></span><br><span class="line"># id() 返回内存地址</span><br><span class="line"></span><br><span class="line"># 扩展后的赋值符号： +=  -=  *=  /=  ....</span><br><span class="line"></span><br><span class="line">num = 8</span><br><span class="line">num += 5  # num = num + 5  此时的+表示数学加号</span><br><span class="line">print(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a=&#x27;abc&#x27;</span><br><span class="line">a +=&#x27;ff&#x27;  # a = a + &#x27;ff&#x27;  此时的+表示连接符</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line"># -=, *=, /= 只应用在数值，字符串不支持</span><br><span class="line"></span><br><span class="line"># 二，+ - * / 算术运算符</span><br><span class="line"># 扩展的算术运算符: **  //  %</span><br><span class="line"></span><br><span class="line">print(&#x27;*&#x27; * 10) # 输出成倍字符串</span><br><span class="line"></span><br><span class="line">a=8</span><br><span class="line">b=2</span><br><span class="line"></span><br><span class="line">result = a ** b  # 次方/幂计算</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">result = a // b # 整除</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 三，关系运算符 &gt;  &lt;  &gt;= &lt;=  ==  !=</span><br><span class="line">m1=&#x27;hello&#x27;</span><br><span class="line">m2=&#x27;hello&#x27;</span><br><span class="line"></span><br><span class="line">result= m1==m2</span><br><span class="line">print(&#x27;m1==m2&#x27;, result)</span><br><span class="line"></span><br><span class="line">result= m1 != m2</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># is  用于对象/内存地址的比较</span><br><span class="line"></span><br><span class="line">age=20</span><br><span class="line"></span><br><span class="line">age1=20</span><br><span class="line"></span><br><span class="line">print(id(age))</span><br><span class="line">print(id(age1))</span><br><span class="line"></span><br><span class="line">print(age is age1)</span><br><span class="line"></span><br><span class="line">money=2000000</span><br><span class="line">salary=600000</span><br><span class="line"></span><br><span class="line">print(id(money))</span><br><span class="line">print(id(salary))</span><br><span class="line"></span><br><span class="line">print(money is salary)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 四，逻辑运算符 and   or   not</span><br><span class="line">#逻辑与</span><br><span class="line">#逻辑或</span><br><span class="line">#逻辑非</span><br><span class="line"></span><br><span class="line"># 逻辑运算符的运算结果也是返回True  False</span><br></pre></td></tr></table></figure>

<h1 id="operator-binary-py"><a href="#operator-binary-py" class="headerlink" title="operator_binary.py"></a>operator_binary.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"># 位运算</span><br><span class="line"></span><br><span class="line"># 二进制： 0  1</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">      1   1</span><br><span class="line"></span><br><span class="line">8  4  2   1</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">a=3</span><br><span class="line">print(bin(a)) #输出 0b 11</span><br><span class="line"></span><br><span class="line">a=13</span><br><span class="line">print(bin(a)) # 0b 1101</span><br><span class="line"></span><br><span class="line">b=0b10111  # 0b 表示二进制</span><br><span class="line">print(int(b)) # int()转十进制</span><br><span class="line"></span><br><span class="line">c=-8</span><br><span class="line">print(bin(c)) # -0b1000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">-5</span><br><span class="line">5: 0000   0  1  0  1</span><br><span class="line">取反（反码）： 1111  1  0  1  0</span><br><span class="line">加1： 1111  1 0 1 1</span><br><span class="line">字节byte:</span><br><span class="line">0000 0101</span><br><span class="line">一个字节(byte)表示8个二进制位(bit)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">c= 0o6430  # 0o 开头的都是八进制</span><br><span class="line">print(int(c))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">n= 0o6430</span><br><span class="line"></span><br><span class="line">6       4       3       0</span><br><span class="line"></span><br><span class="line">8^3     8^2     8^1     8^0   转十进制： 6*512+4*64+3*8+0=3352</span><br><span class="line"></span><br><span class="line">110     100     011     000   转二进制： 110100011000</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 0x开头表示十六进制  0-9  a-f</span><br><span class="line">d= 0x9ab16</span><br><span class="line">print(int(d))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">n=0x9ab16</span><br><span class="line"></span><br><span class="line">9        a        b        1         6</span><br><span class="line"></span><br><span class="line">1001    1010     1011     0001     0110  # 十六进制转二进制</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&amp;</span><br><span class="line">|</span><br><span class="line">!(~)</span><br><span class="line">^</span><br><span class="line">&lt;&lt;</span><br><span class="line">&gt;&gt;</span><br><span class="line">位运算符</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(3 &amp; 2)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&amp; 与运算  类似 and</span><br><span class="line">1:True   0:False</span><br><span class="line">  </span><br><span class="line">  0000 0011</span><br><span class="line">&amp; 0000 0010</span><br><span class="line">------------</span><br><span class="line">  0000 0010</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> | 或运算  类似 or</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(5 | 3)</span><br><span class="line"></span><br><span class="line">print(~5) # 取反 将十进制的数字对应的二进制进行取反操作</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">  0000 0101</span><br><span class="line"> 取反：</span><br><span class="line">  1111 1010</span><br><span class="line"> 看第一位（第一位是符号位，只要第一位是1就是负数，第一位是0就是正数）</span><br><span class="line"></span><br><span class="line">  1111 1001 # 减一</span><br><span class="line"></span><br><span class="line">  0000 0110 # 取反</span><br><span class="line">      4+2=6 # 转换十进制</span><br><span class="line">      结合前面得出的是负数，结果为-6</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 异或 ^   相同的是0，不同的是1</span><br><span class="line"></span><br><span class="line">print(3 ^ 5)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">3   0000 0011</span><br><span class="line">5   0000 0101</span><br><span class="line">--------------</span><br><span class="line">	0000 0110 = 6</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 左移 &lt;&lt;</span><br><span class="line"></span><br><span class="line">print(2&lt;&lt;1)</span><br><span class="line"></span><br><span class="line">print(2&gt;&gt;1)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">2  0000 0010</span><br><span class="line">   0000 0100 左移一位，右侧补0：4</span><br><span class="line">   左移： m&lt;&lt;n --&gt; m*(2的n次方)</span><br><span class="line"></span><br><span class="line">   0000 0010</span><br><span class="line">   0000 0001 右移一位，左侧符号位补0：1</span><br><span class="line">   右移： m&gt;&gt;n --&gt; m//(2的n次方)取整</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(-0b1000000) # -64</span><br></pre></td></tr></table></figure>

<h1 id="operator-sanmu-py"><a href="#operator-sanmu-py" class="headerlink" title="operator_sanmu.py"></a>operator_sanmu.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 三目运算符</span><br><span class="line"></span><br><span class="line"># 格式:结果 if 表达式 else 结果</span><br><span class="line">a=6</span><br><span class="line">b=5</span><br><span class="line">result=(a+b) if a&lt;b else (b-a) # 表达式为True取if前面的结果，否则取else后面的结果</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 运算符的优先级</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"> 排序：</span><br><span class="line">**</span><br><span class="line">~</span><br><span class="line">+ - （符号运算符）</span><br><span class="line">* / // %</span><br><span class="line">+ - 加减</span><br><span class="line">&lt;&lt; &gt;&gt;</span><br><span class="line">&amp;</span><br><span class="line">^</span><br><span class="line">|</span><br><span class="line">== != &gt; &gt;= &lt; &lt;=</span><br><span class="line">is  is not</span><br><span class="line">not</span><br><span class="line">and</span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="statement-py"><a href="#statement-py" class="headerlink" title="statement.py"></a>statement.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">变量</span><br><span class="line">运算符</span><br><span class="line">语句：</span><br><span class="line">条件判断语句</span><br><span class="line">for循环语句</span><br><span class="line">跳转语句</span><br><span class="line"></span><br><span class="line">条件语句：</span><br><span class="line">应用场景： </span><br><span class="line">1. 用户名和密码登录</span><br><span class="line">2. 用户登录验证（看影院信息，判断用户是否登录，没登录则弹出窗口，已登录则看到信息）</span><br><span class="line"></span><br><span class="line">if 条件：</span><br><span class="line">	条件成立执行的语句</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">username=&#x27;admin&#x27; # 没有登录</span><br><span class="line"># python：判断的变量是：&#x27;&#x27;，0，None 默认是False，否则为True</span><br><span class="line"></span><br><span class="line">if username!=&#x27;&#x27;:</span><br><span class="line">	print(&#x27;login success&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;-&#x27; *20)</span><br><span class="line"></span><br><span class="line">num=9</span><br><span class="line"></span><br><span class="line">if num: # 等效if num!=0:</span><br><span class="line">	print(&#x27;--&#x27; *20, &#x27;&gt;&#x27;, num, sep=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 需求：判断年龄是否大于18，并且判断是否输入了用户名，</span><br><span class="line"># 条件满足则打印xxx今年xxx岁</span><br><span class="line"></span><br><span class="line">age= int(input(&#x27;please input your age: &#x27;))</span><br><span class="line">username= input(&#x27;please input your username: &#x27;)</span><br><span class="line"></span><br><span class="line">if age&gt;19 and username:</span><br><span class="line">	print(&#x27;&#123;&#125; is &#123;&#125; years old&#x27;.format(username,age))</span><br><span class="line"></span><br><span class="line">print(&#x27;---game over---&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># if...else...</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">消消乐：</span><br><span class="line">	lv1</span><br><span class="line">	lv2</span><br><span class="line">	....</span><br><span class="line"></span><br><span class="line">  lv1: 免费玩，随便玩</span><br><span class="line">  lv2: 充值  买道具  随便玩</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">print(&#x27;*&#x27; *10, &#x27;welcome to game &quot;Eliminate all&quot;&#x27;, &#x27;*&#x27; *10)</span><br><span class="line">level = input(&#x27;please input your level(lv1, lv2): &#x27;)</span><br><span class="line">if level == &#x27;lv1&#x27;:</span><br><span class="line">	print(&#x27;play for free and play to your hearts content&#x27;)</span><br><span class="line">else:</span><br><span class="line">	print(&#x27;Pay-per-view level, please pay to continue&#x27;)</span><br><span class="line">	money = int(input(&#x27;click here to pay(In multiples of 100): &#x27;))</span><br><span class="line">	# if嵌套</span><br><span class="line">	if money%100==0 and money&gt;0:</span><br><span class="line">		print(&#x27;Recharge success, Recharge amount is&#x27;, money)</span><br><span class="line">	else:</span><br><span class="line">		print(&#x27;Recharge fail, recharge amount has to be multiples of 100!&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 随机数</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">print(random.randint(1,10))</span><br><span class="line"></span><br><span class="line"># 需求：猜大小</span><br><span class="line"></span><br><span class="line">ran = random.randint(1,10)</span><br><span class="line">num = int(input(&#x27;please input a number: &#x27;))</span><br><span class="line">if ran == num:</span><br><span class="line">	print(&#x27;Good guess! You are right!&#x27;)</span><br><span class="line"></span><br><span class="line">else:</span><br><span class="line">	print(&#x27;Guess wrong! Next time!&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 多层条件判断：if...elif...else</span><br><span class="line">age = 30</span><br><span class="line">if age &lt;=18 and age &gt; 0:</span><br><span class="line">	print(&#x27;Bingo, good instinct!&#x27;)</span><br><span class="line">elif age &gt; 18 and age &lt;=30:</span><br><span class="line">	print(&#x27;I\&#x27;m still a baby!&#x27;)</span><br><span class="line">elif age &gt; 30 and age &lt;= 40:</span><br><span class="line">	print(&#x27;What a young man you are!&#x27;)</span><br><span class="line">else:</span><br><span class="line">	print(&#x27;System wrong!&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="while-demo-py"><a href="#while-demo-py" class="headerlink" title="while_demo.py"></a>while_demo.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 需求：打印1-30之间的数字，并且是3和5的倍数</span><br><span class="line">n=3</span><br><span class="line">while n&lt;=30:</span><br><span class="line">	if n%3==0 and n%5==0:</span><br><span class="line">		print(&#x27;********&gt;&#x27;,n)</span><br><span class="line">	n+=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 需求：赌场游戏</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">username = input(&#x27;please input your name: &#x27;)</span><br><span class="line">money = 0</span><br><span class="line">answer = input(&#x27;Are you sure to play the game(y/n)? &#x27;)</span><br><span class="line"></span><br><span class="line">if answer == &#x27;y&#x27;:</span><br><span class="line">	# 反复充值</span><br><span class="line">	while money&lt;2:</span><br><span class="line">		n = int(input(&#x27;Insufficient balance, please recharge\</span><br><span class="line">(100 yuan equals 30 tokens, and recharge amount has to be multiples of 100): &#x27;))</span><br><span class="line">		if n%100==0 and n&gt;0:</span><br><span class="line">			money=(n//100)*30</span><br><span class="line">		print(&#x27;Your current balance is &#123;&#125; tokens,\</span><br><span class="line">each game will cost you 2 tokens&#x27;.format(money))</span><br><span class="line"></span><br><span class="line">		print(&#x27;welcome to game, have fun!&#x27;)</span><br><span class="line"></span><br><span class="line">		while True:</span><br><span class="line">			# 模拟骰子，产生骰子的值</span><br><span class="line">			t1 = random.randint(1,6)</span><br><span class="line">			t2 = random.randint(1,6)</span><br><span class="line">			# 两个骰子的值大于6即为大，否则为小</span><br><span class="line">			money-=2 # 扣除金币</span><br><span class="line">			print(&#x27;system shuffle complete, please guess big or small!&#x27;)</span><br><span class="line">			guess = input(&#x27;please input big or small: &#x27;)</span><br><span class="line"></span><br><span class="line">			if ((t1+t2&gt;6) and guess==&#x27;big&#x27;) or ((t1+t2&lt;=6) and guess==&#x27;small&#x27;):</span><br><span class="line">				print(&#x27;Congratuations &#123;&#125;!\</span><br><span class="line">You earned one coin in this game!&#x27;.format(username))</span><br><span class="line">				money+=1</span><br><span class="line">			else:</span><br><span class="line">				print(&#x27;Pity! You lose in this game!&#x27;)</span><br><span class="line"></span><br><span class="line">			answer = input(&#x27;Do you want to continue? It will cost you 2 tokens if yes!(y/n)&#x27;)</span><br><span class="line">			if answer!=&#x27;y&#x27; or money &lt; 2:</span><br><span class="line">				print(&#x27;Exit the game, next time!&#x27;)</span><br><span class="line">				break</span><br></pre></td></tr></table></figure>

<h1 id="for-demo-py"><a href="#for-demo-py" class="headerlink" title="for_demo.py"></a>for_demo.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">for 变量名 in 集合：</span><br><span class="line">	语句</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 使用range(start, end, step)函数完成范围指定</span><br><span class="line"># 默认从0开始，不包含结尾数字，步长为1</span><br><span class="line"></span><br><span class="line">for i in range(4):</span><br><span class="line">	if i == 2:</span><br><span class="line">		print(&#x27;a&#x27;)</span><br><span class="line">		break</span><br><span class="line">	else:</span><br><span class="line">		print(i)</span><br><span class="line">print(&#x27;finish&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 注意：在python中，在for，while循环中没有变量的作用域，在其循环结构的内层或外层都可以获取变量的值</span><br></pre></td></tr></table></figure>

<h1 id="practice01-py"><a href="#practice01-py" class="headerlink" title="practice01.py"></a>practice01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># # 1.name 变量对应的值前三个字符逆序输出</span><br><span class="line"></span><br><span class="line"># name = &#x27;variable reverse print&#x27;</span><br><span class="line"></span><br><span class="line"># print(name[-20::-1])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># # 2. 敏感词过滤</span><br><span class="line"></span><br><span class="line"># input_string1 = input(&#x27;please input: &#x27;)</span><br><span class="line"># input_string = input_string1.lower()</span><br><span class="line"></span><br><span class="line"># if input_string.find(&#x27;teacher cang&#x27;) != -1 or input_string.find(&#x27;tokyo hot&#x27;) != -1:</span><br><span class="line"># 	s1 = input_string.replace(&#x27;teacher cang&#x27;,&#x27;***&#x27;)</span><br><span class="line"># 	print(s1)</span><br><span class="line"># 	if s1.find(&#x27;tokyo hot&#x27;) != -1:</span><br><span class="line"># 		print(s1.replace(&#x27;tokyo hot&#x27;, &#x27;***&#x27;))</span><br><span class="line"># else:</span><br><span class="line"># 	print(input_string1.capitalize())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># # 3. 循环输入用户信息</span><br><span class="line"># 方法一</span><br><span class="line"># list1 = []</span><br><span class="line"># dict1 = &#123;&#125;</span><br><span class="line"># while True:</span><br><span class="line"># 	user_name = input(&#x27;please input user_name(maximun length is 20): &#x27;)</span><br><span class="line"># 	password = input(&#x27;please input password(maximun length is 20): &#x27;)</span><br><span class="line"># 	email_account = input(&#x27;please input email_account(maximun length is 20): &#x27;)</span><br><span class="line"># 	user_name1 = user_name.capitalize()</span><br><span class="line"># 	email_account1 = email_account.lower()</span><br><span class="line"># 	dict1[&#x27;user_name&#x27;] = user_name1[:20] # </span><br><span class="line"># 	dict1[&#x27;password&#x27;] = password[:20]</span><br><span class="line"># 	dict1[&#x27;email_account&#x27;] = email_account1[:20]</span><br><span class="line"># 	print(dict1)</span><br><span class="line"># 	list1.append(dict1)</span><br><span class="line"># 	print(list1)</span><br><span class="line"># 	if user_name.lower() == &#x27;q&#x27; or password.lower() == &#x27;q&#x27; or email_account.lower() == &#x27;q&#x27;:</span><br><span class="line"># 		break</span><br><span class="line"># 	print(&#x27;user_name\tpassword\temail_account&#x27;)</span><br><span class="line"># 	for i in list1:</span><br><span class="line">		</span><br><span class="line"># 		for value in i.values():</span><br><span class="line"># 			print(&#x27;  &#x27;,value, end=&#x27;\t&#x27;)</span><br><span class="line"># 		print(&#x27;&#x27;)</span><br><span class="line"># 	print(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line">s=&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">	user_name = input(&#x27;please input user_name(maximun length is 20): &#x27;)</span><br><span class="line">	password = input(&#x27;please input password(maximun length is 20): &#x27;)</span><br><span class="line">	email_account = input(&#x27;please input email_account(maximun length is 20): &#x27;)</span><br><span class="line">	</span><br><span class="line">	user_name = user_name[:20]	</span><br><span class="line">	password = password[:20]</span><br><span class="line">	email = email_account[:20]</span><br><span class="line"></span><br><span class="line">	msg = &#x27;&#123;&#125;\t&#123;&#125;\t&#123;&#125;\n&#x27;.format(user_name,password,email)</span><br><span class="line"></span><br><span class="line">	msg = msg.expandtabs(20)</span><br><span class="line"></span><br><span class="line">	s+=msg</span><br><span class="line"></span><br><span class="line">	if user_name==&#x27;q&#x27; or user_name==&#x27;Q&#x27; or \</span><br><span class="line">	password==&#x27;q&#x27; or password==&#x27;Q&#x27; or email==&#x27;q&#x27; or email==&#x27;Q&#x27;:</span><br><span class="line">		break</span><br><span class="line"></span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 4. 验证码验证</span><br><span class="line"></span><br><span class="line"># import random</span><br><span class="line"></span><br><span class="line"># string = &#x27;QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890&#x27;</span><br><span class="line"></span><br><span class="line"># while True:</span><br><span class="line"># 	i=0</span><br><span class="line"># 	s1 = &#x27;&#x27;</span><br><span class="line"># 	while i &lt; 4:</span><br><span class="line"># 		num = random.randint(0, len(string)-1)</span><br><span class="line"># 		s1 += string[num]</span><br><span class="line"># 		i += 1</span><br><span class="line"># 	print(&#x27;verification code is:%s&#x27; %s1)</span><br><span class="line"># 	user = input(&#x27;please input user_name: &#x27;)</span><br><span class="line"># 	passwordN = input(&#x27;please input password: &#x27;)</span><br><span class="line"># 	code = input(&#x27;please input verification code: &#x27;)</span><br><span class="line"></span><br><span class="line"># 	if user == &#x27;xiaoming&#x27; and passwordN == &#x27;1234&#x27; and code.lower() == s1.lower():</span><br><span class="line"># 		print(&#x27;Login success!&#x27;)</span><br><span class="line"># 		break</span><br><span class="line"># 	print(&#x27;Your info is incorrect, please input again!&#x27;)</span><br><span class="line"></span><br><span class="line"># 5. 输入两个字符串，从第一个字符串中删除第二个字符串包含的所有字符</span><br><span class="line"></span><br><span class="line"># str1 = input(&#x27;please input string1: &#x27;)</span><br><span class="line"># str2 = input(&#x27;please input string2: &#x27;)</span><br><span class="line"># str3 = &#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 方法一</span><br><span class="line"># for i in str1:</span><br><span class="line"># 	if i not in str2:</span><br><span class="line"># 		str3 += i</span><br><span class="line">	</span><br><span class="line"># print(str3)</span><br><span class="line"># str1 = str3</span><br><span class="line"># print(str1)</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line"># for i in str2:</span><br><span class="line"># 	str1 = str1.replace(i, &#x27;&#x27;)</span><br><span class="line"># print(str1)</span><br><span class="line"></span><br><span class="line"># 方法三</span><br><span class="line"># for i in str2:</span><br><span class="line"># 	if i not in str3:</span><br><span class="line"># 		str3+=i</span><br><span class="line"># print(str3)  # 去除重复项</span><br><span class="line"></span><br><span class="line"># for i in str3:</span><br><span class="line"># 	str1 = str1.replace(i, &#x27;&#x27;)</span><br><span class="line"># print(str1)</span><br><span class="line"></span><br><span class="line"># 6. 输入一行字符，统计单词的个数，每两个单词以空格隔开</span><br><span class="line"></span><br><span class="line"># str1 = input(&#x27;please input a string: &#x27;)</span><br><span class="line"></span><br><span class="line"># count = 0</span><br><span class="line"># for i in str1:</span><br><span class="line"># 	if i == &#x27; &#x27;:</span><br><span class="line"># 		count += 1</span><br><span class="line"># print(f&#x27;There are &#123;count+1&#125; words in str1&#x27;)</span><br><span class="line"></span><br><span class="line"># 7. 输入一个单词，单词特性：每个字母都大写且没有连续相同的字母，如果该特性不满足则重新输入</span><br><span class="line"></span><br><span class="line"># 方法一</span><br><span class="line"># while True:</span><br><span class="line"># 	str1 = input(&#x27;please input a word: &#x27;)</span><br><span class="line"># 	if not str1.isupper():</span><br><span class="line"># 		print(&#x27;please input again&#x27;)</span><br><span class="line"># 		continue</span><br><span class="line"># 	i = 0</span><br><span class="line"># 	while i &lt; len(str1)-1:</span><br><span class="line"># 		if str1[i] != str1[i+1]:</span><br><span class="line"># 			i += 1</span><br><span class="line"># 			continue</span><br><span class="line"># 		else:</span><br><span class="line"># 			print(&#x27;please input again&#x27;)</span><br><span class="line"># 			break</span><br><span class="line"># 	else:</span><br><span class="line"># 		print(&#x27;The word is ok&#x27;)</span><br><span class="line"># 		break</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line"># while True:</span><br><span class="line"># 	word = input(&#x27;please input a word: &#x27;)</span><br><span class="line"></span><br><span class="line"># 	for i in range(len(word)):</span><br><span class="line"># 		if word[i]&lt;&#x27;A&#x27; or word[i]&gt;&#x27;Z&#x27;:</span><br><span class="line"># 			print(&#x27;please input again&#x27;)</span><br><span class="line"># 			break</span><br><span class="line"># 		else:</span><br><span class="line"># 			if i&lt;len(word)-1 and word[i]==word[i+1]:</span><br><span class="line"># 				print(&#x27;please input again&#x27;)</span><br><span class="line"># 				break</span><br><span class="line"># 	else:</span><br><span class="line"># 		print(&#x27;The word is ok&#x27;)</span><br><span class="line"># 		break</span><br></pre></td></tr></table></figure>

<h1 id="string-method-py"><a href="#string-method-py" class="headerlink" title="string_method.py"></a>string_method.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"># 字符串的内建函数：声明一个字符串，默认可以调用内建函数</span><br><span class="line"></span><br><span class="line"># 第一部分：大小写相关</span><br><span class="line"># capitalize()第一个单词首字母大写, title()每个单词首字母大写, istitle()判断是否是title格式, </span><br><span class="line"># upper()所有字母大写, isupper(), lower()所有字母小写, islower()</span><br><span class="line"></span><br><span class="line">message = &#x27;zhaorui is a beautiful girl!&#x27;</span><br><span class="line"></span><br><span class="line">msg = message.capitalize()</span><br><span class="line">print(msg)</span><br><span class="line"></span><br><span class="line"># 案例：生成验证码</span><br><span class="line"></span><br><span class="line"># s=&#x27;QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm0987654321&#x27;</span><br><span class="line"># print(len(s))</span><br><span class="line"># # 四个随机数</span><br><span class="line"># code = &#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># import random</span><br><span class="line"></span><br><span class="line"># # IndexError: string index out of range  ex:print(s[62])</span><br><span class="line"># # index: 0~len(s)-1  0-61</span><br><span class="line">	</span><br><span class="line"># for i in range(4):		</span><br><span class="line"># 	ran = random.randint(0,len(s)-1)</span><br><span class="line"></span><br><span class="line"># 	code += s[ran] </span><br><span class="line"></span><br><span class="line"># print(&#x27;Verification Code:&#x27;+code)</span><br><span class="line"></span><br><span class="line"># # 提示用户输入验证码</span><br><span class="line"># user_input = input(&#x27;please input your verification code: &#x27;)</span><br><span class="line"># if user_input.lower() == code.lower():</span><br><span class="line"># 	print(&#x27;Verification code is correct!&#x27;)</span><br><span class="line"># else:</span><br><span class="line"># 	print(&#x27;Verification code is incorrect!&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串查找，替换</span><br><span class="line"># find(), rfind(), lfind(), index(), rindex(), lindex(), replace()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串内建函数： encode 编码, decode 解码</span><br><span class="line"></span><br><span class="line"># 编码：  网络应用 （中文一般涉及编码问题）</span><br><span class="line"></span><br><span class="line">msg = &#x27;上课了！请认真听课！&#x27; # 中文的</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">https://www.baidu.com/s?wd=%E4%BB%8A%E6%97%A5%E6%96%B0%E9%B2%9C%E4%BA%8B&amp;tn=SE_Pclogo_6ysd4c7a&amp;sa=ire_dl_gh_logo&amp;rsv_dl=igh_logo_pc</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># gbk 中文  gb2312 简体中文   unicode 统一编码 升级到 utf-8</span><br><span class="line">result = msg.encode(&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 解码</span><br><span class="line">m = result.decode(&#x27;utf-8&#x27;)</span><br><span class="line">print(m)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符串内建函数： startswith()  endswith()  返回值都是布尔类型True False</span><br><span class="line"></span><br><span class="line"># startswith判断是否是以xxx开头，或者endswith判断是否是以xxx结尾的</span><br><span class="line"></span><br><span class="line"># 应用：文件上传: 只能上传图片（jpg,png,bmp,gif）</span><br><span class="line"></span><br><span class="line">filename = &#x27;note.doc&#x27;</span><br><span class="line"></span><br><span class="line">result = filename.endswith(&#x27;doc&#x27;) # 文件是否是以txt结尾</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">s = &#x27;hello&#x27;</span><br><span class="line"></span><br><span class="line">result = s.startswith(&#x27;he&#x27;)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 文件上传: 只能上传图片（jpg,png,bmp,gif）</span><br><span class="line"></span><br><span class="line">path = input(&#x27;please select files: &#x27;) # 输入路径和文件名</span><br><span class="line"></span><br><span class="line"># 分析： 通过文件路径 ---&gt;文件名---&gt;判断是否是图片类型</span><br><span class="line">p = path.rfind(&#x27;\\&#x27;)</span><br><span class="line"></span><br><span class="line">filename = path[p+1:]</span><br><span class="line"></span><br><span class="line"># 判断是否是图片类型</span><br><span class="line"></span><br><span class="line">if filename.endswith(&#x27;jpg&#x27;) \</span><br><span class="line"> or filename.endswith(&#x27;png&#x27;) or filename.endswith(&#x27;bmp&#x27;) or filename.endswith(&#x27;gif&#x27;):</span><br><span class="line"> 	print(&#x27;The file is picture, upload is granted&#x27;)</span><br><span class="line">else:</span><br><span class="line">	print(&#x27;The file is not picture, only picture is granted&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="list01-py"><a href="#list01-py" class="headerlink" title="list01.py"></a>list01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"># brands = [&#x27;hp&#x27;, &#x27;dell&#x27;, &#x27;thinkpad&#x27;, &#x27;支持华为&#x27;, &#x27;lenovo&#x27;, &#x27;mac&#x27;, &#x27;神州&#x27;]</span><br><span class="line"></span><br><span class="line"># # 修改</span><br><span class="line"># brands[6]=&#x27;Hasee&#x27;</span><br><span class="line"># print(brands)</span><br><span class="line"></span><br><span class="line"># for i in range(len(brands)):</span><br><span class="line"># 	if &#x27;华为&#x27; in brands[i]:</span><br><span class="line"># 		brands[i]=&#x27;HUAWEI&#x27;</span><br><span class="line"># 		break</span><br><span class="line"></span><br><span class="line"># print(brands)</span><br><span class="line"></span><br><span class="line"># # 删除</span><br><span class="line"># del brands[2]</span><br><span class="line"># print(brands)</span><br><span class="line"></span><br><span class="line"># l=len(brands)</span><br><span class="line"># i=0</span><br><span class="line"># while i&lt;l:</span><br><span class="line"># 	if &#x27;hp&#x27; in brands[i] or &#x27;mac&#x27; in brands[i]:</span><br><span class="line"># 		del brands[i]</span><br><span class="line"># 		l-=1</span><br><span class="line"></span><br><span class="line"># 	i+=1</span><br><span class="line"># print(brands)</span><br><span class="line"></span><br><span class="line"># 根据输入的内容删除列表内的元素</span><br><span class="line"></span><br><span class="line"># words = [&#x27;hello&#x27;,&#x27;good&#x27;,&#x27;apple&#x27;,&#x27;world&#x27;,&#x27;digit&#x27;,&#x27;alpha&#x27;]</span><br><span class="line"></span><br><span class="line"># w = input(&#x27;please input a word: &#x27;)</span><br><span class="line"></span><br><span class="line"># for i in range(len(words)-1):</span><br><span class="line"># 	if w in words[i]:</span><br><span class="line"># 		del words[i]</span><br><span class="line"># print(words)</span><br><span class="line"></span><br><span class="line"># 添加</span><br><span class="line"># 产生10个随机数保存到列表</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">random_list = []</span><br><span class="line"></span><br><span class="line"># for i in range(10):</span><br><span class="line"># 	ran = random.randint(1,20)</span><br><span class="line"></span><br><span class="line"># 	random_list.append(ran)</span><br><span class="line"># print(random_list)</span><br><span class="line"></span><br><span class="line"># 产生10个不同的随机数保存到列表</span><br><span class="line"></span><br><span class="line">i=0</span><br><span class="line"></span><br><span class="line">while i&lt;10:</span><br><span class="line">	ran = random.randint(1,20)</span><br><span class="line"></span><br><span class="line">	if ran not in random_list:</span><br><span class="line">		random_list.append(ran)</span><br><span class="line">		i+=1</span><br><span class="line">print(random_list)</span><br><span class="line"></span><br><span class="line"># 找最大值</span><br><span class="line">max_value = max(random_list)</span><br><span class="line">print(max_value)</span><br><span class="line"># 找最小值</span><br><span class="line">min_value = min(random_list)</span><br><span class="line">print(min_value)</span><br><span class="line"># 求和</span><br><span class="line">sum1 = sum(random_list)</span><br><span class="line">print(sum1)</span><br><span class="line"></span><br><span class="line">print(&#x27;------------get max and min value and sum by self define------------&#x27;)</span><br><span class="line"></span><br><span class="line">mvalue = random_list[0]</span><br><span class="line">minvalue = random_list[0]</span><br><span class="line">sum2 = 0</span><br><span class="line"></span><br><span class="line">for value in random_list:</span><br><span class="line">	sum2+=value</span><br><span class="line">	if mvalue &lt; value:</span><br><span class="line">		mvalue=value</span><br><span class="line">	if minvalue &gt; value:</span><br><span class="line">		minvalue=value</span><br><span class="line"></span><br><span class="line">print(mvalue) </span><br><span class="line">print(minvalue)</span><br><span class="line">print(sum2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 排序： sorted() 默认升序</span><br><span class="line"># sorted(list) / list.sort() 升序</span><br><span class="line"># sorted(list, reverse=True) / list.sort(reverse=True) 降序</span><br><span class="line"></span><br><span class="line">random_list.sort()</span><br><span class="line">print(random_list)</span><br><span class="line"></span><br><span class="line">new_list2 = sorted(random_list,reverse=True)</span><br><span class="line">print(new_list2)</span><br><span class="line"></span><br><span class="line"># 自己写： 冒泡排序</span><br><span class="line"></span><br><span class="line"># for i in range(len(random_list)-1):</span><br><span class="line"># 	for j in range(len(random_list)-1-i):</span><br><span class="line"># 		if random_list[j] &gt; random_list[j+1]:</span><br><span class="line"># 			num1 = random_list[j]</span><br><span class="line"># 			random_list[j] = random_list[j+1]</span><br><span class="line"># 			random_list[j+1] = num1</span><br><span class="line"># print(random_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for i in range(len(random_list)-1):</span><br><span class="line">	for j in range(len(random_list)-1-i):</span><br><span class="line">		if random_list[j] &gt; random_list[j+1]:</span><br><span class="line">	</span><br><span class="line">			random_list[j],random_list[j+1] = random_list[j+1],random_list[j]</span><br><span class="line">			</span><br><span class="line">print(random_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># enumerate(list) 枚举 返回 index value</span><br></pre></td></tr></table></figure>

<h1 id="list02-py"><a href="#list02-py" class="headerlink" title="list02.py"></a>list02.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">列表支持的符号</span><br><span class="line">+</span><br><span class="line">*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">l1=[1,2,3]</span><br><span class="line">l2=[5,6,7]</span><br><span class="line"></span><br><span class="line">l3=l1+l2 # 拼接</span><br><span class="line">print(l3)</span><br><span class="line"></span><br><span class="line">l4=[5,8]*3 # 原列表内的元素复制3次</span><br><span class="line">print(l4)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = [3,2] in [1,2,[3,2,1],4,5]</span><br><span class="line">print(result) # False</span><br><span class="line"></span><br><span class="line"># print(int[4,5]) # 列表不能转整型</span><br><span class="line">print(int(&#x27;45&#x27;)) # 字符串可转整型</span><br><span class="line"></span><br><span class="line"># 队列： 先进先出  FIFO -- first in first out</span><br><span class="line"></span><br><span class="line"># 栈：  先进后出 list.pop() -- 弹栈  默认移除列表最后一个元素，可指定下标</span><br></pre></td></tr></table></figure>

<h1 id="game-py"><a href="#game-py" class="headerlink" title="game.py"></a>game.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"># 游戏：</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">	1.选择人物</span><br><span class="line">	2.购买武器 金币</span><br><span class="line">	3.打仗 赢得金币</span><br><span class="line">	4.选择删除武器</span><br><span class="line">	5.查看武器</span><br><span class="line">	6.退出游戏</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">print(&#x27;*&#x27;*40)</span><br><span class="line">print(&#x27;\twelcom to King and Honor&#x27;)</span><br><span class="line">print(&#x27;*&#x27;*40)</span><br><span class="line"></span><br><span class="line">role = input(&#x27;please input a role:(1.LuBan 2.HouYi 3.LiBai 4.SunShangxiang 5.DiaoChan 6.ZhuGeliang)&#x27;)</span><br><span class="line"></span><br><span class="line">coins = 1000</span><br><span class="line"></span><br><span class="line">weapon_list = []</span><br><span class="line"></span><br><span class="line">print(&#x27;&#123;1&#125;, welcome to King and Honor, your current coins is:&#123;0&#125;&#x27;.format(coins,role)) # 指定参数位置</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">	choice = int(input(&#x27;\nplease select:\n 1.Buy a weapon\n \</span><br><span class="line">2.Fight\n 3.Delete a weapon\n 4.Check weapon\n 5.Exit\n&#x27;))</span><br><span class="line">	if choice==1:</span><br><span class="line">		print(&#x27;welcome to weapons inventory:&#x27;)</span><br><span class="line">		weapons = [[&#x27;Vorpal Blade&#x27;,500],[&#x27;Sakura gun&#x27;,400], \</span><br><span class="line">[&#x27;98k&#x27;,1000],[&#x27;Grenade&#x27;,800],[&#x27;Crimson Sabre&#x27;,700],[&#x27;Feather fan&#x27;,800]]</span><br><span class="line">		for weapon in weapons:</span><br><span class="line">			print(weapon[0],weapon[1],sep=&#x27;\t&#x27;)</span><br><span class="line">		weaponname = input(&#x27;please input the weapon\&#x27;s name you want to buy: &#x27;)</span><br><span class="line">		# 1.原来是否购买过该武器</span><br><span class="line">		if weaponname not in weapon_list:</span><br><span class="line">		# 2.输入的武器是否在武器库</span><br><span class="line">			for weapon in weapons:</span><br><span class="line">				if weaponname == weapon[0]:</span><br><span class="line">					if coins &gt;= weapon[1]:</span><br><span class="line">						coins-=weapon[1]</span><br><span class="line">						weapon_list.append(weapon[0])</span><br><span class="line">						print(&#x27;&#123;&#125; purchase &#123;&#125; success!&#x27;.format(role,weaponname))</span><br><span class="line">						break</span><br><span class="line">					else:</span><br><span class="line">						print(&#x27;Insufficient coins, please earn some by fight first&#x27;)</span><br><span class="line">						break</span><br><span class="line">			else:</span><br><span class="line">				print(&#x27;weaponname is wrong&#x27;)</span><br><span class="line">		else:</span><br><span class="line">			print(&#x27;You have this weapon already!&#x27;)</span><br><span class="line"></span><br><span class="line">	elif choice==2:</span><br><span class="line">		print(&#x27;enter battle field......&#x27;)</span><br><span class="line">		if len(weapon_list)&gt;0:</span><br><span class="line">			print(&#x27;&#123;&#125; has following weapons:&#x27;.format(role))</span><br><span class="line">			for weapon in weapon_list:</span><br><span class="line">				print(weapon)</span><br><span class="line">			while True:</span><br><span class="line">				weaponname = input(&#x27;please select: &#x27;)</span><br><span class="line">				if weaponname in weapon_list:</span><br><span class="line"></span><br><span class="line">					ran1 = random.randint(1,20)</span><br><span class="line">					ran2 = random.randint(1,20)</span><br><span class="line">					if ran1&gt;ran2:</span><br><span class="line">						print(&#x27;In this fight: Zhangfei win!!!&#x27;)</span><br><span class="line">					elif ran1&lt;ran2:</span><br><span class="line">						coins+=200</span><br><span class="line">						print(&#x27;In this fight: &#123;&#125; win! Coins:&#123;&#125;&#x27;.format(role,coins))</span><br><span class="line">					else:</span><br><span class="line">						print(&#x27;In this fight, deuce, you can fight again!&#x27;)</span><br><span class="line"></span><br><span class="line">					break</span><br><span class="line">				else:</span><br><span class="line">					print(&#x27;The weapon you select is not exist, please select again!&#x27;)</span><br><span class="line"></span><br><span class="line">		else:</span><br><span class="line">			print(&#x27;You has not brought a weapon yet, please buy a weapon first!&#x27;)</span><br><span class="line"></span><br><span class="line">	elif choice==3:</span><br><span class="line">		print(&#x27;Too many weapons, too heavy, discard some.....&#x27;)</span><br><span class="line">		if len(weapon_list)&gt;0:</span><br><span class="line">			print(&#x27;&#123;&#125; has following weapons:&#x27;.format(role))</span><br><span class="line">			for weapon in weapon_list:</span><br><span class="line">				print(weapon)</span><br><span class="line"></span><br><span class="line">			while True:</span><br><span class="line">				weaponname = input(&#x27;please input the weapon\&#x27;s name you want to delete:&#x27;)</span><br><span class="line">				if weaponname in weapon_list:</span><br><span class="line">					# delete weapon: remove(obj), pop(index), clear, del weapon_list[index]</span><br><span class="line">					weapon_list.remove(weaponname)</span><br><span class="line">					# Refund coins</span><br><span class="line">					# print(weaponname)</span><br><span class="line">					for weapon in weapons:</span><br><span class="line">						if weaponname == weapon[0]:</span><br><span class="line">							coins += weapon[1]</span><br><span class="line">							break</span><br><span class="line"></span><br><span class="line">					break</span><br><span class="line">				else:</span><br><span class="line">					print(&#x27;weaponname input error!&#x27;)</span><br><span class="line"></span><br><span class="line">		else:</span><br><span class="line">			print(&#x27;It doesn\&#x27;t make any sense to say heavy if you don\&#x27;t have a weapon!\</span><br><span class="line">Please hurry to buy a weapon!&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	elif choice==4:</span><br><span class="line">		print(&#x27;&#123;&#125; has following weapons:&#x27;.format(role))</span><br><span class="line">		for weapon in weapon_list:</span><br><span class="line">			print(weapon)</span><br><span class="line">		# check coins</span><br><span class="line">		print(&#x27;Total coins:&#x27;,coins)</span><br><span class="line"></span><br><span class="line">	elif choice==5:</span><br><span class="line">		answer = input(&#x27;Are you sure exiting the game? Y/N: &#x27;)</span><br><span class="line">		if answer==&#x27;Y&#x27;:</span><br><span class="line">			print(&#x27;Game over!!!&#x27;)</span><br><span class="line">			break</span><br><span class="line">	else:</span><br><span class="line">		print(&#x27;input error, please input again&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="contactmanagesystem-py"><a href="#contactmanagesystem-py" class="headerlink" title="contactmanagesystem.py"></a>contactmanagesystem.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;#&#x27;*50)</span><br><span class="line">print(&#x27;welcome to contact manage system!&#x27;)</span><br><span class="line">print(&#x27;#&#x27;*50)</span><br><span class="line"></span><br><span class="line">list1 = []</span><br><span class="line">list2 = []</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">	print(&#x27;&#x27;)</span><br><span class="line">	print(&#x27;=&#x27;*10,&#x27;contact manage system&#x27;,&#x27;=&#x27;*10)</span><br><span class="line">	print(&#x27;1.add name and phone number\n2.delete name\n\</span><br><span class="line">3.modify phone number\n4.query all users\n5.find a phone number by name\n6.exit&#x27;)</span><br><span class="line">	print(&#x27;=&#x27;*10,&#x27;contact manage system&#x27;,&#x27;=&#x27;*10)</span><br><span class="line">	num1 = int(input(&#x27;please select a func: &#x27;))</span><br><span class="line"></span><br><span class="line">	if num1 == 1:</span><br><span class="line">		name = input(&#x27;please input a name: &#x27;)</span><br><span class="line">		number = input(&#x27;please input a phone number: &#x27;)</span><br><span class="line">		if len(list1) == 0:</span><br><span class="line">			list1.append([name,number])</span><br><span class="line">			print(list1)</span><br><span class="line">		else:</span><br><span class="line">			for user in list1:</span><br><span class="line">				if name in user:</span><br><span class="line">					answer1 = input(&#x27;The user is already exist, \</span><br><span class="line">do you want to add a new phone number for him/her?(Y/N): &#x27;)</span><br><span class="line">					if answer1 == &#x27;Y&#x27;:</span><br><span class="line">						user.append(number)</span><br><span class="line">						print(list1)</span><br><span class="line">						break</span><br><span class="line">					else:</span><br><span class="line">						print(list1)</span><br><span class="line">						break</span><br><span class="line">			else:</span><br><span class="line">				list1.append([name,number])</span><br><span class="line">				print(list1)</span><br><span class="line"></span><br><span class="line">	if num1 == 2:</span><br><span class="line">		name = input(&#x27;please input the name you want to delete: &#x27;)</span><br><span class="line">		for user in list1:</span><br><span class="line">			if name in user:</span><br><span class="line">				list1.remove(user)</span><br><span class="line">				print(list1)</span><br><span class="line">				break</span><br><span class="line"></span><br><span class="line">		else:</span><br><span class="line">			print(&#x27;the name you input is not exist&#x27;)</span><br><span class="line">			print(list1)</span><br><span class="line"></span><br><span class="line">	if num1 == 3:</span><br><span class="line">		name = input(&#x27;please input the name you want to modify: &#x27;)</span><br><span class="line">		for user in list1:</span><br><span class="line">			if name in user:</span><br><span class="line">				print(&#x27;This user has following phone numbers: &#x27;)</span><br><span class="line">				for i in range(len(user)-1):</span><br><span class="line">					print(&#x27;NO.&#123;&#125;:&#123;&#125;&#x27;.format(i+1,user[i+1]))</span><br><span class="line">				while True:</span><br><span class="line">					index = int(input(&#x27;please input the NO. you want to modify: &#x27;))</span><br><span class="line">					if index &lt;= len(user):</span><br><span class="line">						user[index] = input(&#x27;please input a new number: &#x27;)</span><br><span class="line">						print(list1)</span><br><span class="line">						break</span><br><span class="line">					else:</span><br><span class="line">						print(&#x27;The NO. you input is wrong, please input again&#x27;)</span><br><span class="line"></span><br><span class="line">				break</span><br><span class="line"></span><br><span class="line">		else:</span><br><span class="line">			print(&#x27;the name you input is not exist&#x27;)</span><br><span class="line">			print(list1)</span><br><span class="line"></span><br><span class="line">	if num1 == 4:</span><br><span class="line">		print(&#x27;name\tmunber1\tnumber2\t........&#x27;)</span><br><span class="line">		for user in list1:</span><br><span class="line">			for i in user:</span><br><span class="line">				print(i,end=&#x27;\t&#x27;)</span><br><span class="line"></span><br><span class="line">			print(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">	if num1 == 5:</span><br><span class="line">		name = input(&#x27;please input the name you want to query: &#x27;)</span><br><span class="line">		for user in list1:</span><br><span class="line">			if name in user:</span><br><span class="line">				print(user)</span><br><span class="line">				break</span><br><span class="line"></span><br><span class="line">		else:</span><br><span class="line">			print(&#x27;the name you input is not exist&#x27;)</span><br><span class="line"></span><br><span class="line">	if num1 == 6:</span><br><span class="line">		print(&#x27;you are exiting the system...&#x27;)</span><br><span class="line">		break</span><br></pre></td></tr></table></figure>

<h1 id="tuple01-py"><a href="#tuple01-py" class="headerlink" title="tuple01.py"></a>tuple01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">元组：</span><br><span class="line"></span><br><span class="line">类似列表（当成容器）</span><br><span class="line">特点：</span><br><span class="line">1.定义符号：（）</span><br><span class="line">2.元组中的内容不可修改</span><br><span class="line">3.关键字：tuple</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">list1 = []</span><br><span class="line">for i in range(10):</span><br><span class="line">	ran  = random.randint(1,20)</span><br><span class="line">	list1.append(ran)</span><br><span class="line"></span><br><span class="line">t1 = tuple(list1)</span><br><span class="line">print(t1)</span><br><span class="line"></span><br><span class="line">print(t1[::-1])</span><br><span class="line"></span><br><span class="line"># 运算函数：max(), min(), sum(), len(),  sorted(t1)--返回列表类型</span><br><span class="line"></span><br><span class="line"># 元组中的函数: t1.index(), t1.count()</span><br><span class="line"></span><br><span class="line"># 拆包</span><br><span class="line"></span><br><span class="line">t2 = (4,7,3)</span><br><span class="line"></span><br><span class="line">a,b,c = t2</span><br><span class="line">print(a,b,c)</span><br><span class="line"></span><br><span class="line">a = t2</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line"># 变量个数与元组中元素个数不一致</span><br><span class="line"></span><br><span class="line">t1 = (2,5,8,9,7)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 装包： *变量=t1  装进列表</span><br><span class="line">a,*_,c = t1</span><br><span class="line">print(a,c,_)</span><br><span class="line"></span><br><span class="line">a,c,*_ = t1</span><br><span class="line">print(a,c,_)</span><br><span class="line"></span><br><span class="line">a,b,*c = t1</span><br><span class="line">print(a,b,c)</span><br><span class="line"></span><br><span class="line">t1=(9,)</span><br><span class="line">a,*b = t1</span><br><span class="line">print(a,b) # *b 表示未知个数0~n，多个元素的话全部放在一个列表[1,2,3....]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1=(9,4,8,6)</span><br><span class="line">a,*b = t1 # 赋值时散列数据，用星号*是装包</span><br><span class="line">print(b) # [4, 8, 6]</span><br><span class="line">print(*b) # 4 8 6</span><br><span class="line">print(*[4,8,6]) # 已经装包好的数据，用星号*是拆包</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">运算符号：</span><br><span class="line">+</span><br><span class="line">*</span><br><span class="line">is  not</span><br><span class="line">in  not in</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">t2 = (4,5)+(1,2)</span><br><span class="line">print(t2)</span><br><span class="line"></span><br><span class="line">t3 = (3,4)*2</span><br><span class="line">print(t3)</span><br><span class="line"></span><br><span class="line">print(t2 is t3)</span><br><span class="line"></span><br><span class="line">print(3 in t3)</span><br><span class="line"></span><br><span class="line">print(tuple(sorted(t2)))</span><br></pre></td></tr></table></figure>

<h1 id="dict01-py"><a href="#dict01-py" class="headerlink" title="dict01.py"></a>dict01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">应用：</span><br><span class="line">貂蝉 --- [&#x27;屠龙刀&#x27;,&#x27;手榴弹&#x27;]  800</span><br><span class="line">诸葛亮 --- [&#x27;鹅毛扇&#x27;,&#x27;碧血剑&#x27;,&#x27;98K&#x27;] 300</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.符号：&#123;&#125;</span><br><span class="line">2.关键字：dict</span><br><span class="line">3.保存的元素是：key: value --键值对</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># dict1 = dict((&#x27;name&#x27;,&#x27;lucky&#x27;)) # ValueError: dictionary update sequence element #0 has length 4; 2 is required</span><br><span class="line"></span><br><span class="line">dict1 = dict([(&#x27;name&#x27;,&#x27;lucky&#x27;),(&#x27;age&#x27;,18)])</span><br><span class="line"></span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"># dict2 = dict([(1,2,3),(4,5),(6,8),(9,0)]) # ValueError: dictionary update sequence element #0 has length 3; 2 is required</span><br><span class="line"></span><br><span class="line"># 注意： list可以转成字典，前提是列表中的元素都要成对出现</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">案例：</span><br><span class="line">用户注册功能</span><br><span class="line">username</span><br><span class="line">password</span><br><span class="line">email</span><br><span class="line">phone</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># print(&#x27;------------welcome to user registry page of zhilian hire website--------------&#x27;)</span><br><span class="line"></span><br><span class="line"># database = []</span><br><span class="line"></span><br><span class="line"># while True:</span><br><span class="line">	</span><br><span class="line"># 	username = input(&#x27;please input a username: &#x27;)</span><br><span class="line"># 	password = input(&#x27;please input a password: &#x27;)</span><br><span class="line"># 	repassword = input(&#x27;please input confirm password: &#x27;)</span><br><span class="line"># 	email = input(&#x27;please input a email: &#x27;)</span><br><span class="line"># 	phone = input(&#x27;please input a phone number: &#x27;)</span><br><span class="line"></span><br><span class="line"># 	# 定义一个字典</span><br><span class="line"># 	user=&#123;&#125;</span><br><span class="line"></span><br><span class="line"># 	# 将信息保存到字典中</span><br><span class="line"># 	user[&#x27;username&#x27;]=username</span><br><span class="line"># 	if password == repassword:</span><br><span class="line"># 		user[&#x27;password&#x27;]=password</span><br><span class="line"># 	else:</span><br><span class="line"># 		print(&#x27;Confirm password is different with password, please input your info again&#x27;)</span><br><span class="line"># 		continue</span><br><span class="line"></span><br><span class="line"># 	user[&#x27;email&#x27;]=email</span><br><span class="line"># 	user[&#x27;phone&#x27;]=phone</span><br><span class="line"></span><br><span class="line"># 	# 保存到数据库</span><br><span class="line"># 	database.append(user)</span><br><span class="line"></span><br><span class="line"># 	answer = input(&#x27;Do you want to continue to registrate?(y/n): &#x27;)</span><br><span class="line"></span><br><span class="line"># 	if answer != &#x27;y&#x27;:</span><br><span class="line"># 		break</span><br><span class="line"></span><br><span class="line"># print(database)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字典内置函数： dict.keys()--取出字典中所有的key键，保存到列表中</span><br><span class="line"># dict.values()--取出字典所有的值，保存到列表中</span><br><span class="line"># dict.items()--将字典的键值对转成列表保存的形式[(key,value),(key,value),(key,value)]</span><br><span class="line"></span><br><span class="line"># 判断： key in dict, value in dict</span><br><span class="line"></span><br><span class="line"># dict.get(&#x27;key&#x27;,&#x27;value--default&#x27;)--value若能取到值则返回字典中的值，否则返回default的值</span><br><span class="line"></span><br><span class="line"># 字典的内置函数：删除</span><br><span class="line"># dict1.remove() 不存在则报错</span><br><span class="line"># dict.pop(key[,default]) ----&gt; 根据key删除字典中的键值对，返回值：删除成功则返回键值对的值value。</span><br><span class="line">#								pop的默认值，往往是在删除的时候没有找到对应的key，此时就返回default值</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#x27;zhangsan&#x27;:100,&#x27;lisi&#x27;:100,&#x27;wangwu&#x27;:100,&#x27;zhaoliu&#x27;:100&#125;</span><br><span class="line"></span><br><span class="line">result = dict1.pop(&#x27;lisi&#x27;,&#x27;80&#x27;)</span><br><span class="line">print(result)</span><br><span class="line">result = dict1.pop(&#x27;zhangxiaosan&#x27;,&#x27;There is no such key&#x27;)</span><br><span class="line">print(result)</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"># popitem():随机删除字典中键值对（一般是从末尾删除元素）</span><br><span class="line">dict1 = &#123;&#x27;zhangsan&#x27;:100,&#x27;lisi&#x27;:100,&#x27;wangwu&#x27;:100,&#x27;zhaoliu&#x27;:100&#125;</span><br><span class="line"></span><br><span class="line">result = dict1.popitem()</span><br><span class="line">print(result)</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"># clear() 删除全部</span><br><span class="line"></span><br><span class="line"># update() 类似列表 []+[] 合并操作，但字典不支持‘+’</span><br><span class="line"></span><br><span class="line">dict1 = &#123;0:&#x27;tom&#x27;,1:&#x27;jack&#x27;,2:&#x27;lucy&#x27;&#125;</span><br><span class="line"></span><br><span class="line">dict2 = &#123;0:&#x27;lily&#x27;,&#x27;4&#x27;:&#x27;ruby&#x27;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = dict1.update(dict2)</span><br><span class="line">print(result)</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># fromkeys(seq,default)----将seq转成字典的形式，若没有指定默认的value则用None</span><br><span class="line">#							&#123;&#x27;aa&#x27;: None, &#x27;bb&#x27;: None, &#x27;cc&#x27;: None&#125;</span><br><span class="line">#							如果指定default，则用default替代None这个value值</span><br><span class="line">#							&#123;&#x27;aa&#x27;: 10, &#x27;bb&#x27;: 10, &#x27;cc&#x27;: 10&#125;</span><br><span class="line"></span><br><span class="line">list1 = [&#x27;aa&#x27;,&#x27;bb&#x27;,&#x27;cc&#x27;]</span><br><span class="line">new_dict = dict.fromkeys(list1,10) # &#123;&#x27;aa&#x27;: 10, &#x27;bb&#x27;: 10, &#x27;cc&#x27;: 10&#125;</span><br><span class="line"># new_dict = dict.fromkeys(list1) -- &#123;&#x27;aa&#x27;: None, &#x27;bb&#x27;: None, &#x27;cc&#x27;: None&#125;</span><br><span class="line">print(new_dict)</span><br></pre></td></tr></table></figure>

<h1 id="类型转换-py"><a href="#类型转换-py" class="headerlink" title="类型转换.py"></a>类型转换.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 类型转换</span><br><span class="line"># str()  int()  list()  dict()  set()  tuple()</span><br><span class="line"></span><br><span class="line"># str &lt;--&gt; int,list,set,tuple,dict,float 可互相转换</span><br><span class="line"></span><br><span class="line"># list ---&gt; set,tuple,可转成字典[(key:value),(key:value),...]</span><br><span class="line"></span><br><span class="line"># tuple ---&gt; list,  set ---&gt; list,  dict --&gt; list(只存放key)</span><br></pre></td></tr></table></figure>

<h1 id="set01-py"><a href="#set01-py" class="headerlink" title="set01.py"></a>set01.py</h1><p><img src="/set.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"># 集合有不重复的特点</span><br><span class="line"></span><br><span class="line">s1 = set() # 创建空集合，其他类型转换成集合可去重</span><br><span class="line">s2 = &#123;&#125; # 创建空字典</span><br><span class="line"></span><br><span class="line"># 增加： add(), update()</span><br><span class="line"></span><br><span class="line"># 删除： remove(), discard(), pop(), clear()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 符号操作</span><br><span class="line">in  ==  </span><br><span class="line">[+  *]不支持</span><br><span class="line">-</span><br><span class="line">&amp;</span><br><span class="line">|</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">set2 = &#123;2,3,4,5,6&#125;</span><br><span class="line">set3 = &#123;2,3,4,5,6,7,8&#125;</span><br><span class="line"></span><br><span class="line">set4 = set3-set2  # 差集 difference()</span><br><span class="line">print(set4)</span><br><span class="line"></span><br><span class="line">set5 = set2 - set3</span><br><span class="line">print(set5)</span><br><span class="line"></span><br><span class="line">set6 = set3.difference(set2)</span><br><span class="line">print(set6)</span><br><span class="line"></span><br><span class="line">#  &amp; 交集  intersection()</span><br><span class="line">set7 = set3 &amp; set2</span><br><span class="line">print(set7)</span><br><span class="line"></span><br><span class="line">set7 = set3.intersection(set2)</span><br><span class="line">print(set7)</span><br><span class="line"></span><br><span class="line">#  | 并集  union()</span><br><span class="line">set8 = set3 | set2</span><br><span class="line">print(set8)</span><br><span class="line"></span><br><span class="line">set8 = set3.union(set2)</span><br><span class="line">print(set8)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">已知两个列表：</span><br><span class="line">l1 = [5,1,2,9,0,3]</span><br><span class="line">l2 = [7,2,5,7,9]</span><br><span class="line">找出两个列表的不同元素</span><br><span class="line">找出两个列表的共同元素</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">l1 = [5,1,2,9,0,3]</span><br><span class="line">l2 = [7,2,5,7,9]</span><br><span class="line"></span><br><span class="line">s1 = set(l1)</span><br><span class="line">s2 = set(l2)</span><br><span class="line"></span><br><span class="line"># 对称差集--找出不同元素</span><br><span class="line"></span><br><span class="line"># 方法一</span><br><span class="line">result = (s1 | s2) - (s1 &amp; s2)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line">result = s1 ^ s2  # symmetric_different()--对称差集</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 并集--找出共同元素</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">difference_update() 找出差集并赋值</span><br><span class="line"></span><br><span class="line">intersection_update() 交集并赋值</span><br><span class="line"></span><br><span class="line">union_update() 并集并赋值</span><br><span class="line"></span><br><span class="line">symmetric_different_update() 对称差集并赋值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">s1.difference_update(s2)</span><br><span class="line">print(s1)</span><br></pre></td></tr></table></figure>

<h1 id="PDF-TO-WORD-py"><a href="#PDF-TO-WORD-py" class="headerlink" title="PDF_TO_WORD.py"></a>PDF_TO_WORD.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">from pdfminer.pdfparser import PDFParser, PDFDocument</span><br><span class="line">from pdfminer.pdfinterp import PDFResourceManager, PDFPageInterpreter</span><br><span class="line">from pdfminer.layout import LAParams</span><br><span class="line">from pdfminer.converter import PDFPageAggregator</span><br><span class="line">from pdfminer.pdfinterp import PDFTextExtractionNotAllowed</span><br><span class="line">from docx import Document</span><br><span class="line"></span><br><span class="line">document = Document()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def parse():</span><br><span class="line">    # rb以二进制读模式打开本地pdf文件</span><br><span class="line">    fn = open(&#x27;navicat.pdf&#x27;, &#x27;rb&#x27;)</span><br><span class="line">    # 创建一个pdf文档分析器</span><br><span class="line">    parser = PDFParser(fn)</span><br><span class="line">    # 创建一个PDF文档</span><br><span class="line">    doc = PDFDocument()</span><br><span class="line">    # 连接分析器 与文档对象</span><br><span class="line">    parser.set_document(doc)</span><br><span class="line">    doc.set_parser(parser)</span><br><span class="line"></span><br><span class="line">    # 提供初始化密码doc.initialize(&quot;lianxipython&quot;)</span><br><span class="line">    # 如果没有密码 就创建一个空的字符串</span><br><span class="line">    doc.initialize(&quot; &quot;)</span><br><span class="line">    # 检测文档是否提供txt转换，不提供就忽略</span><br><span class="line">    if not doc.is_extractable:</span><br><span class="line">        raise PDFTextExtractionNotAllowed</span><br><span class="line"></span><br><span class="line">    else:</span><br><span class="line">        # 创建PDf资源管理器</span><br><span class="line">        resource = PDFResourceManager()</span><br><span class="line">        # 创建一个PDF参数分析器</span><br><span class="line">        laparams = LAParams()</span><br><span class="line">        # 创建聚合器,用于读取文档的对象</span><br><span class="line">        device = PDFPageAggregator(resource, laparams=laparams)</span><br><span class="line">        # 创建解释器，对文档编码，解释成Python能够识别的格式</span><br><span class="line">        interpreter = PDFPageInterpreter(resource, device)</span><br><span class="line">        # 循环遍历列表，每次处理一页的内容</span><br><span class="line">        # doc.get_pages() 获取page列表</span><br><span class="line">        for page in doc.get_pages():</span><br><span class="line">            # 利用解释器的process_page()方法解析读取单独页数</span><br><span class="line">            interpreter.process_page(page)</span><br><span class="line">            # 使用聚合器get_result()方法获取内容</span><br><span class="line">            layout = device.get_result()</span><br><span class="line">            # 这里layout是一个LTPage对象,里面存放着这个page解析出的各种对象</span><br><span class="line">            for out in layout:</span><br><span class="line">                # 判断是否含有get_text()方法，获取我们想要的文字</span><br><span class="line">                if hasattr(out, &quot;get_text&quot;):</span><br><span class="line">                    # print(out.get_text(), type(out.get_text()))</span><br><span class="line">                    content = out.get_text().replace(u&#x27;\xa0&#x27;, u&#x27; &#x27;)  # 将&#x27;\xa0&#x27;替换成u&#x27; &#x27;空格，这个\xa0就是&amp;nbps空格</span><br><span class="line">                    # with open(&#x27;test.txt&#x27;,&#x27;a&#x27;) as f:</span><br><span class="line">                    #     f.write(out.get_text().replace(u&#x27;\xa0&#x27;, u&#x27; &#x27;)+&#x27;\n&#x27;)</span><br><span class="line">                    document.add_paragraph(</span><br><span class="line">                        content, style=&#x27;List&#x27;  # 添加段落，样式为unordered list类型</span><br><span class="line">                    )</span><br><span class="line">                document.save(&#x27;Final_result.docx&#x27;)  # 保存这个文档</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    parse()</span><br></pre></td></tr></table></figure>

<h1 id="PictureToText-py"><a href="#PictureToText-py" class="headerlink" title="PictureToText.py"></a>PictureToText.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from aip import AipOcr  # 百度OCR API</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span><br><span class="line">APP_ID = &#x27;23564063&#x27;</span><br><span class="line">API_KEY = &#x27;LXzNPBTFspP4G078ckg1IRNR&#x27;</span><br><span class="line">SECRET_KEY = &#x27;grUtbwfub20E9kp3ShFWCBOshMqcKeuI&#x27;</span><br><span class="line"></span><br><span class="line">client = AipOcr(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 读取图片 &quot;&quot;&quot;</span><br><span class="line">def get_file_content(filePath):</span><br><span class="line">    with open(filePath, &#x27;rb&#x27;) as fp:</span><br><span class="line">        return fp.read()</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 从API的返回字典中获取文字 &quot;&quot;&quot;</span><br><span class="line">def getOcrText(txt_dict):</span><br><span class="line">	txt = &quot;&quot;</span><br><span class="line">	if type(txt_dict) == dict:</span><br><span class="line">		for i in txt_dict[&#x27;words_result&#x27;]:</span><br><span class="line">			txt = txt + i[&quot;words&quot;]</span><br><span class="line">			if len(i[&quot;words&quot;]) &lt; 25: # 这里使用字符串长度决定了文本是否换行，读者可以根据自己的喜好控制回车符的输出，实现可控的文本显示形式</span><br><span class="line">				txt = txt + &quot;\n\n&quot;</span><br><span class="line">	return txt</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 调用通用/高精度文字识别, 图片参数为本地图片 &quot;&quot;&quot;</span><br><span class="line">def BaiduOcr(imageName,Accurate=True):</span><br><span class="line">	image = get_file_content(imageName)</span><br><span class="line">	if Accurate:</span><br><span class="line">		return getOcrText(client.basicGeneral(image))</span><br><span class="line">	else:</span><br><span class="line">		return getOcrText(client.basicAccurate(image))</span><br><span class="line"></span><br><span class="line">result = BaiduOcr(&quot;1622959742576931700.png&quot;)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<h1 id="PDFToPicture-py"><a href="#PDFToPicture-py" class="headerlink" title="PDFToPicture.py"></a>PDFToPicture.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">import datetime</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">import fitz  # fitz就是pip install PyMuPDF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def pyMuPDF_fitz(pdfPath, imagePath):</span><br><span class="line">    startTime_pdf2img = datetime.datetime.now()  # 开始时间</span><br><span class="line"></span><br><span class="line">    print(&quot;imagePath=&quot; + imagePath)</span><br><span class="line">    pdfDoc = fitz.open(pdfPath)</span><br><span class="line">    for pg in range(pdfDoc.pageCount):</span><br><span class="line">        page = pdfDoc[pg]</span><br><span class="line">        rotate = int(0)</span><br><span class="line">        # 每个尺寸的缩放系数为1.3，这将为我们生成分辨率提高2.6的图像。</span><br><span class="line">        # 此处若是不做设置，默认图片大小为：792X612, dpi=96</span><br><span class="line">        zoom_x = 1.33333333  # (1.33333333--&gt;1056x816)   (2--&gt;1584x1224)</span><br><span class="line">        zoom_y = 1.33333333</span><br><span class="line">        mat = fitz.Matrix(zoom_x, zoom_y).preRotate(rotate)</span><br><span class="line">        pix = page.getPixmap(matrix=mat, alpha=False)</span><br><span class="line"></span><br><span class="line">        if not os.path.exists(imagePath):  # 判断存放图片的文件夹是否存在</span><br><span class="line">            os.makedirs(imagePath)  # 若图片文件夹不存在就创建</span><br><span class="line"></span><br><span class="line">        pix.writePNG(imagePath + &#x27;/&#x27; + &#x27;images_%s.png&#x27; % pg)  # 将图片写入指定的文件夹内</span><br><span class="line"></span><br><span class="line">    endTime_pdf2img = datetime.datetime.now()  # 结束时间</span><br><span class="line">    print(&#x27;pdf2img时间=&#x27;, (endTime_pdf2img - startTime_pdf2img).seconds)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 1、PDF地址</span><br><span class="line">    pdfPath = &#x27;navicat.pdf&#x27;</span><br><span class="line">    # 2、需要储存图片的目录</span><br><span class="line">    imagePath = &#x27;./imgs&#x27;</span><br><span class="line">    pyMuPDF_fitz(pdfPath, imagePath)</span><br></pre></td></tr></table></figure>

<h1 id="queue1121-py"><a href="#queue1121-py" class="headerlink" title="queue1121.py"></a>queue1121.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br></pre></td><td class="code"><pre><span class="line">import pyautogui</span><br><span class="line">import time</span><br><span class="line">from datetime import datetime as datetime1</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">size1 = pyautogui.size()</span><br><span class="line"></span><br><span class="line">print(size1)</span><br><span class="line"></span><br><span class="line">point1 = pyautogui.position()</span><br><span class="line"></span><br><span class="line">print(point1) # x=1052, y=717</span><br><span class="line"></span><br><span class="line"># pyautogui.click(1052,717,duration=0.5)</span><br><span class="line"># time.sleep(5)</span><br><span class="line"></span><br><span class="line"># pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line"></span><br><span class="line">time.sleep(3)</span><br><span class="line"></span><br><span class="line"># while True:</span><br><span class="line">#     try:</span><br><span class="line">#         loc1 = pyautogui.locateCenterOnScreen(&quot;a:\shot1.png&quot;, region=(937, 634, 250, 150))</span><br><span class="line"></span><br><span class="line">#         pyautogui.moveTo(*loc1, duration=0.5)</span><br><span class="line"></span><br><span class="line">#         pyautogui.click(clicks=1)</span><br><span class="line"></span><br><span class="line">#         break</span><br><span class="line">#     except:</span><br><span class="line"></span><br><span class="line">#         time.sleep(5)</span><br><span class="line">#         print(&#x27;Try again&#x27;)</span><br><span class="line">#         continue</span><br><span class="line"></span><br><span class="line">def date_and_time():</span><br><span class="line">	dayOfWeek = datetime1.now().isoweekday()</span><br><span class="line">	dt = datetime.datetime.now().strftime(&#x27;%H&#x27;)</span><br><span class="line">	hour = []</span><br><span class="line">	for i in range(13,23):</span><br><span class="line">		hour.append(i)</span><br><span class="line"></span><br><span class="line">	if ((dayOfWeek == 6) or (dayOfWeek == 7)) and (int(dt) in hour):</span><br><span class="line">		multiple = 3</span><br><span class="line">	elif (int(dt) in hour) or ((dayOfWeek == 6) or (dayOfWeek == 7)):</span><br><span class="line">		multiple = 2</span><br><span class="line">	else:</span><br><span class="line">		multiple = 1</span><br><span class="line"></span><br><span class="line">	return multiple</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def enter_game():</span><br><span class="line">	time.sleep(40)</span><br><span class="line"></span><br><span class="line">	pyautogui.press(&#x27;space&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(5)</span><br><span class="line"></span><br><span class="line">	pyautogui.press(&#x27;space&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(5)</span><br><span class="line"></span><br><span class="line">	pyautogui.press(&#x27;enter&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(30)</span><br><span class="line"></span><br><span class="line">	pyautogui.press(&#x27;space&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(20)</span><br><span class="line"></span><br><span class="line">	pyautogui.press(&#x27;space&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(60)</span><br><span class="line"></span><br><span class="line">	while True:</span><br><span class="line">		pyautogui.press([&#x27;w&#x27;,&#x27;a&#x27;,&#x27;space&#x27;], interval=1)</span><br><span class="line"></span><br><span class="line">		time.sleep(5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def enter_cloud():</span><br><span class="line">	pyautogui.keyDown(&#x27;alt&#x27;)</span><br><span class="line"></span><br><span class="line">	pyautogui.press(&#x27;tab&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(5)</span><br><span class="line"></span><br><span class="line">	while True:</span><br><span class="line">	    try:</span><br><span class="line">	        loc2 = pyautogui.locateCenterOnScreen(&quot;a:\cloud.png&quot;, region=(153, 251, 1600, 520))</span><br><span class="line"></span><br><span class="line">	        print(loc2)</span><br><span class="line"></span><br><span class="line">	        x1 = loc2[0]</span><br><span class="line">	        y1 = loc2[1]+100</span><br><span class="line"></span><br><span class="line">	        print(x1,y1)</span><br><span class="line"></span><br><span class="line">	        pyautogui.moveTo(x1,y1, duration=0.5)</span><br><span class="line"></span><br><span class="line">	        pyautogui.click(clicks=1)</span><br><span class="line"></span><br><span class="line">	        break</span><br><span class="line">	    except:</span><br><span class="line"></span><br><span class="line">	        time.sleep(5)</span><br><span class="line">	        print(&#x27;Cloud desktop does not be opened, open it then try again&#x27;)</span><br><span class="line">	        pyautogui.keyUp(&#x27;alt&#x27;)</span><br><span class="line">	        time.sleep(30)</span><br><span class="line">	        pyautogui.keyDown(&#x27;alt&#x27;)</span><br><span class="line">	        pyautogui.press(&#x27;tab&#x27;)</span><br><span class="line">	        time.sleep(5)</span><br><span class="line">	        continue</span><br><span class="line"></span><br><span class="line">	pyautogui.keyUp(&#x27;alt&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def queue_state():</span><br><span class="line">	try:</span><br><span class="line">		loc1 = pyautogui.locateCenterOnScreen(&quot;a:\shot1.png&quot;, region=(937, 634, 250, 150))</span><br><span class="line">		pyautogui.moveTo(*loc1, duration=0.5)</span><br><span class="line">		pyautogui.click(clicks=1)</span><br><span class="line">		return 0</span><br><span class="line">	except:</span><br><span class="line">		try:</span><br><span class="line">			loc1 = pyautogui.locateCenterOnScreen(&quot;a:\shot.png&quot;, region=(937, 634, 250, 150))</span><br><span class="line">			pyautogui.moveTo(*loc1, duration=0.5)</span><br><span class="line">			pyautogui.click(clicks=1)</span><br><span class="line">			return 1</span><br><span class="line">			# pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">		except:</span><br><span class="line">			loc4 = pyautogui.locateCenterOnScreen(&quot;a:\detail.png&quot;, region=(117, 950, 105, 60))</span><br><span class="line">			pyautogui.moveTo(*loc4, duration=0.5)</span><br><span class="line">			pyautogui.click(clicks=1)</span><br><span class="line"></span><br><span class="line">			try: </span><br><span class="line">				loc1 = pyautogui.locateCenterOnScreen(&quot;a:\shot1.png&quot;, region=(937, 634, 250, 150))</span><br><span class="line">				pyautogui.moveTo(*loc1, duration=0.5)</span><br><span class="line">				pyautogui.click(clicks=1)</span><br><span class="line">				return 0</span><br><span class="line">			except:</span><br><span class="line">				loc1 = pyautogui.locateCenterOnScreen(&quot;a:\shot.png&quot;, region=(937, 634, 250, 150))</span><br><span class="line">				pyautogui.moveTo(*loc1, duration=0.5)</span><br><span class="line">				pyautogui.click(clicks=1)</span><br><span class="line">				return 1</span><br><span class="line">				# pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line"></span><br><span class="line">def pytesseractOCR1():</span><br><span class="line">	pyautogui.screenshot(&#x27;a:\\10.png&#x27;,region=(746,260,400,200))</span><br><span class="line"></span><br><span class="line">	time.sleep(2)</span><br><span class="line"></span><br><span class="line">	pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line"></span><br><span class="line">	time.sleep(2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	import pytesseract</span><br><span class="line">	from PIL import Image</span><br><span class="line"></span><br><span class="line">	im = Image.open(&#x27;a:\\10.jpg&#x27;)</span><br><span class="line"></span><br><span class="line">	string = pytesseract.image_to_string(im) #, lang=&#x27;chi_sim&#x27;)</span><br><span class="line"></span><br><span class="line">	print(string)</span><br><span class="line"></span><br><span class="line">	return string</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import os # 操作系统相关</span><br><span class="line">import sys # 系统相关</span><br><span class="line">import time # 时间获取</span><br><span class="line">import signal # 系统信号</span><br><span class="line">import winsound # 提示音</span><br><span class="line">from aip import AipOcr  # 百度OCR API</span><br><span class="line">from PIL import ImageGrab # 捕获剪切板中的图片</span><br><span class="line">import win32clipboard as wc # WINDOWS 剪切板操作</span><br><span class="line">import win32con # 这里用于获取 WINDOWS 剪贴板数据的标准格式</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span><br><span class="line">APP_ID = &#x27;23564063&#x27;</span><br><span class="line">API_KEY = &#x27;LXzNPBTFspP4G078ckg1IRNR&#x27;</span><br><span class="line">SECRET_KEY = &#x27;grUtbwfub20E9kp3ShFWCBOshMqcKeuI&#x27;</span><br><span class="line"></span><br><span class="line">client = AipOcr(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 读取图片 &quot;&quot;&quot;</span><br><span class="line">def get_file_content(filePath):</span><br><span class="line">    with open(filePath, &#x27;rb&#x27;) as fp:</span><br><span class="line">        return fp.read()</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 从API的返回字典中获取文字 &quot;&quot;&quot;</span><br><span class="line">def getOcrText(txt_dict):</span><br><span class="line">	txt = &quot;&quot;</span><br><span class="line">	if type(txt_dict) == dict:</span><br><span class="line">		for i in txt_dict[&#x27;words_result&#x27;]:</span><br><span class="line">			txt = txt + i[&quot;words&quot;]</span><br><span class="line">			if len(i[&quot;words&quot;]) &lt; 25: # 这里使用字符串长度决定了文本是否换行，读者可以根据自己的喜好控制回车符的输出，实现可控的文本显示形式</span><br><span class="line">				txt = txt + &quot;\n\n&quot;</span><br><span class="line">	return txt</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 调用通用/高精度文字识别, 图片参数为本地图片 &quot;&quot;&quot;</span><br><span class="line">def BaiduOcr(imageName,Accurate=True):</span><br><span class="line">	image = get_file_content(imageName)</span><br><span class="line">	if Accurate:</span><br><span class="line">		return getOcrText(client.basicGeneral(image))</span><br><span class="line">	else:</span><br><span class="line">		return getOcrText(client.basicAccurate(image))</span><br><span class="line">	</span><br><span class="line">&quot;&quot;&quot; 带参数调用通用文字识别, 图片参数为远程url图片 &quot;&quot;&quot;</span><br><span class="line">def BaiduOcrUrl(url): </span><br><span class="line">	return getOcrText(client.basicGeneralUrl(url))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot; 剪切板操作函数 &quot;&quot;&quot;</span><br><span class="line">def get_clipboard():</span><br><span class="line">    wc.OpenClipboard()</span><br><span class="line">    txt = wc.GetClipboardData(win32con.CF_UNICODETEXT)</span><br><span class="line">    wc.CloseClipboard()</span><br><span class="line">    return txt</span><br><span class="line"></span><br><span class="line">def empty_clipboard():</span><br><span class="line">    wc.OpenClipboard()</span><br><span class="line">    wc.EmptyClipboard()</span><br><span class="line">    wc.CloseClipboard()</span><br><span class="line"></span><br><span class="line">def set_clipboard(txt):</span><br><span class="line">    wc.OpenClipboard()</span><br><span class="line">    wc.EmptyClipboard()</span><br><span class="line">    wc.SetClipboardData(win32con.CF_UNICODETEXT, txt)</span><br><span class="line">    wc.CloseClipboard()</span><br><span class="line">    </span><br><span class="line">&quot;&quot;&quot; 截图后,调用通用/高精度文字识别&quot;&quot;&quot;</span><br><span class="line">def BaiduOcrScreenshots(Accurate=True,path=&quot;./&quot;,ifauto=False):</span><br><span class="line">	if not os.path.exists(path):</span><br><span class="line">		os.makedirs(path)</span><br><span class="line">	image = ImageGrab.grabclipboard()</span><br><span class="line">	if image != None:</span><br><span class="line">		print(&quot;\rThe image has been obtained. Please wait a moment!&quot;,end=&quot;\n&quot;)</span><br><span class="line">		filename = str(time.time_ns())</span><br><span class="line">		image.save(path+filename+&quot;.png&quot;)</span><br><span class="line">		if Accurate:</span><br><span class="line">			txt = getOcrText(client.basicAccurate(get_file_content(path+filename+&quot;.png&quot;)))</span><br><span class="line">		else:	</span><br><span class="line">			txt = getOcrText(client.basicGeneral(get_file_content(path+filename+&quot;.png&quot;)))</span><br><span class="line">			os.remove(path+filename+&quot;.png&quot;)</span><br><span class="line">		# f = open(os.path.abspath(path)+&quot;\\&quot;+filename+&quot;.txt&quot;,&#x27;w&#x27;)</span><br><span class="line">		# f.write(txt)</span><br><span class="line">		set_clipboard(txt)</span><br><span class="line">		winsound.PlaySound(&#x27;SystemAsterisk&#x27;,winsound.SND_ASYNC)</span><br><span class="line"></span><br><span class="line">		# os.startfile(os.path.abspath(path)+&quot;\\&quot;+filename+&quot;.txt&quot;)</span><br><span class="line">		# empty_clipboard()</span><br><span class="line">		return txt</span><br><span class="line">	else :</span><br><span class="line">		if not ifauto:</span><br><span class="line">			print(&quot;Please get the screenshots by Shift+Win+S!     &quot;,end=&quot;&quot;)</span><br><span class="line">			return &quot;&quot;</span><br><span class="line">		else:</span><br><span class="line">			print(&quot;\rPlease get the screenshots by Shift+Win+S !       &quot;,end=&quot;&quot;)</span><br><span class="line"></span><br><span class="line">def sig_handler(signum, frame):</span><br><span class="line">    sys.exit(0)</span><br><span class="line">    </span><br><span class="line">def removeTempFile(file = [&quot;.txt&quot;,&quot;.png&quot;],path=&quot;./&quot;):</span><br><span class="line">	if not os.path.exists(path):</span><br><span class="line">		os.makedirs(path)</span><br><span class="line">	pathDir =  os.listdir(path)</span><br><span class="line">	for i in pathDir:</span><br><span class="line">		for j in file:</span><br><span class="line">			if j in i:</span><br><span class="line">				os.remove(path+i)</span><br><span class="line"></span><br><span class="line">def AutoOcrFile(path=&quot;./&quot;,filetype=[&quot;.png&quot;,&quot;.jpg&quot;,&quot;.bmp&quot;]):</span><br><span class="line">	if not os.path.exists(path):</span><br><span class="line">		os.makedirs(path)</span><br><span class="line">	pathDir =  os.listdir(path)</span><br><span class="line">	for i in pathDir:</span><br><span class="line">		for j in filetype:</span><br><span class="line">			if j in i:</span><br><span class="line">				f = open(os.path.abspath(path)+&quot;\\&quot;+str(time.time_ns())+&quot;.txt&quot;,&#x27;w&#x27;)</span><br><span class="line">				f.write(BaiduOcr(path+i))</span><br><span class="line">				break</span><br><span class="line"></span><br><span class="line">def AutoOcrScreenshots():</span><br><span class="line">	signal.signal(signal.SIGINT, sig_handler)</span><br><span class="line">	signal.signal(signal.SIGTERM, sig_handler)</span><br><span class="line">	# print(&quot;Waiting For Ctrl+C to exit ater removing all picture files and txt files!&quot;)</span><br><span class="line">	# print(&quot;Please get the screenshots by Shift+Win+S !&quot;,end=&quot;&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	pyautogui.hotkey(&#x27;shift&#x27;,&#x27;win&#x27;,&#x27;s&#x27;)</span><br><span class="line">	time.sleep(1)</span><br><span class="line">	pyautogui.moveTo(713,253, duration=0.5)  # (872,318)</span><br><span class="line">	pyautogui.dragRel(495,505,duration=0.5)  # (230,65) #(230,275)</span><br><span class="line">	time.sleep(1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	while(1):</span><br><span class="line">		try:</span><br><span class="line">			txt1 = BaiduOcrScreenshots(ifauto=True)</span><br><span class="line">			# print(txt1)</span><br><span class="line">			time.sleep(0.1)</span><br><span class="line">			removeTempFile()</span><br><span class="line">			return txt1</span><br><span class="line">		except SystemExit:</span><br><span class="line">			removeTempFile()</span><br><span class="line">			break</span><br><span class="line">		else :</span><br><span class="line">			pyautogui.hotkey(&#x27;ctrl&#x27;,&#x27;c&#x27;) # pass</span><br><span class="line">		finally:</span><br><span class="line">			pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enter_cloud()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">	txt2 = AutoOcrScreenshots()</span><br><span class="line">print(txt2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># num1=[31,32,33,34,35,36,37,38,39,40]</span><br><span class="line"># num2=[21,22,23,24,25,26,27,28,29,30]</span><br><span class="line"># num3=[11,12,13,14,15,16,17,18,19,20]</span><br><span class="line"># num4=[5,6,7,8,9,10]</span><br><span class="line"># num5=[1,2,3,4]</span><br><span class="line"></span><br><span class="line">num1=[]</span><br><span class="line">num2=[&#x27;第1位&#x27;,&#x27;第2位&#x27;,&#x27;第3位&#x27;,&#x27;第4位&#x27;]</span><br><span class="line">string3=&#x27;排队结束&#x27;</span><br><span class="line"></span><br><span class="line">for i in range(5,41):</span><br><span class="line">	num1.append(&#x27;第&#123;&#125;位&#x27;.format(i))</span><br><span class="line"></span><br><span class="line">print(num1)</span><br><span class="line"></span><br><span class="line">t1=True</span><br><span class="line">run1=1</span><br><span class="line"></span><br><span class="line">while t1:</span><br><span class="line"></span><br><span class="line">	print(&#x27; &#x27;)</span><br><span class="line">	print(&#x27;start: &#123;&#125;&#x27;.format(txt2))</span><br><span class="line">	for i in num2:</span><br><span class="line">		if i in txt2:</span><br><span class="line">			print(&#x27;*&#x27;*20,&#x27;wait for a while to enter game&#x27;,&#x27;*&#x27;*20)</span><br><span class="line">			state1=1</span><br><span class="line">			while state1:</span><br><span class="line">				state1 = queue_state()</span><br><span class="line">				print(state1)</span><br><span class="line">				time.sleep(2)</span><br><span class="line"></span><br><span class="line">			t1=False</span><br><span class="line">			break</span><br><span class="line">	else:</span><br><span class="line">		for i in num1:</span><br><span class="line">			if i in txt2:</span><br><span class="line">				print(i)</span><br><span class="line">				time.sleep(2)</span><br><span class="line">				if run1 == 1:</span><br><span class="line">					pyautogui.keyDown(&#x27;alt&#x27;)</span><br><span class="line">					pyautogui.press(&#x27;tab&#x27;)</span><br><span class="line">					pyautogui.press(&#x27;tab&#x27;)</span><br><span class="line">					pyautogui.keyUp(&#x27;alt&#x27;)</span><br><span class="line">					time.sleep(1)</span><br><span class="line">					pyautogui.press(&#x27;enter&#x27;)</span><br><span class="line">					pyautogui.click(718,700,duration=0.5)</span><br><span class="line">				else:</span><br><span class="line">					pyautogui.keyDown(&#x27;alt&#x27;)</span><br><span class="line">					pyautogui.press(&#x27;tab&#x27;)</span><br><span class="line">					pyautogui.keyUp(&#x27;alt&#x27;)</span><br><span class="line">					time.sleep(1)</span><br><span class="line">					pyautogui.click(718,700,duration=0.5)</span><br><span class="line">				run1=2</span><br><span class="line">				# print(int(i[1:len(i)-1]))</span><br><span class="line">				multiple1 = date_and_time()</span><br><span class="line">				print(multiple1)</span><br><span class="line">				time.sleep(int(i[1:len(i)-1])*multiple1*5)</span><br><span class="line">				pyautogui.click(718,700,duration=0.5)</span><br><span class="line">				enter_cloud()</span><br><span class="line">				txt2 = AutoOcrScreenshots()</span><br><span class="line">				time.sleep(2)</span><br><span class="line">				# pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">				break</span><br><span class="line">		else:</span><br><span class="line">			if string3 in txt2:</span><br><span class="line">				queue_state()</span><br><span class="line">				break</span><br><span class="line">			print(&#x27;not in queue&#x27;)</span><br><span class="line">			pyautogui.moveTo(148,495,duration=0.5)</span><br><span class="line">			pyautogui.click(clicks=1)</span><br><span class="line">			# time.sleep(8)</span><br><span class="line">			try:</span><br><span class="line"></span><br><span class="line">				time.sleep(8)</span><br><span class="line">				pyautogui.press(&#x27;win&#x27;)</span><br><span class="line">				time.sleep(1)</span><br><span class="line">				pyautogui.press(&#x27;win&#x27;)</span><br><span class="line">				loc1 = pyautogui.locateCenterOnScreen(&quot;a:\ingame.png&quot;, region=(57, 42, 250, 100))</span><br><span class="line">				pyautogui.moveTo(*loc1, duration=0.5)</span><br><span class="line">				# pyautogui.click(clicks=1)</span><br><span class="line">				break</span><br><span class="line">			except:</span><br><span class="line"></span><br><span class="line">				time.sleep(2)</span><br><span class="line">				txt2 = AutoOcrScreenshots()</span><br><span class="line">				time.sleep(5)</span><br><span class="line">				# pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">				print(&#x27; &#x27;)</span><br><span class="line">				print(&#x27;End: &#123;&#125;&#x27;.format(txt2))</span><br><span class="line">				# time.sleep(5)</span><br><span class="line">				# pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">				continue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	# for i in num1:</span><br><span class="line">	# 	if str(i) in txt2:</span><br><span class="line">	# 		pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">	# 		time.sleep(7200)</span><br><span class="line">	# 		txt2 = AutoOcrScreenshots()</span><br><span class="line">	# 		break</span><br><span class="line">	# else:</span><br><span class="line">	# 	for i in num2:</span><br><span class="line">	# 		if str(i) in txt2:</span><br><span class="line">	# 			pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">	# 			time.sleep(3600)</span><br><span class="line">	# 			txt2 = AutoOcrScreenshots()</span><br><span class="line">	# 			break</span><br><span class="line">	# 	else:</span><br><span class="line">	# 		for i in num3:</span><br><span class="line">	# 			if str(i) in txt2:</span><br><span class="line">	# 				pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">	# 				time.sleep(1800)</span><br><span class="line">	# 				txt2 = AutoOcrScreenshots()</span><br><span class="line">	# 				break</span><br><span class="line">	# 		else:</span><br><span class="line">	# 			for i in num4:</span><br><span class="line">	# 				if str(i) in txt2:</span><br><span class="line">	# 					pyautogui.hotkey(&#x27;alt&#x27;,&#x27;tab&#x27;)</span><br><span class="line">	# 					time.sleep(900)</span><br><span class="line">	# 					txt2 = AutoOcrScreenshots()</span><br><span class="line">	# 					break</span><br><span class="line">	# 			else:</span><br><span class="line">	# 				for i in num5:</span><br><span class="line">	# 					if str(i) in txt2:</span><br><span class="line">	# 						print(&#x27;wait&#x27;)</span><br><span class="line">	# 						break</span><br><span class="line">	# 				else:</span><br><span class="line">	# 					print(&#x27;not in queue&#x27;)</span><br><span class="line">	# 					break</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="queue-bat"><a href="#queue-bat" class="headerlink" title="queue.bat"></a>queue.bat</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%echo off</span><br><span class="line"></span><br><span class="line">python queue1121.py</span><br><span class="line"></span><br><span class="line">pause</span><br></pre></td></tr></table></figure>

<h1 id="可变与不可变类型-py"><a href="#可变与不可变类型-py" class="headerlink" title="可变与不可变类型.py"></a>可变与不可变类型.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># 可变与不可变</span><br><span class="line"></span><br><span class="line"># 不可变：对象所指向的内存中的值是不可以改变的</span><br><span class="line"></span><br><span class="line"># 不可变的类型： int, str, float, tuple, frozenset</span><br><span class="line"></span><br><span class="line">num=10</span><br><span class="line"></span><br><span class="line">s1=&#x27;abc&#x27;</span><br><span class="line">s2=&#x27;abcd&#x27;</span><br><span class="line">print(id(s1))</span><br><span class="line">print(id(s2))</span><br><span class="line"></span><br><span class="line">t1=(3,5,6)</span><br><span class="line">print(id(t1))</span><br><span class="line">t1=(3,5)</span><br><span class="line">print(id(t1))</span><br><span class="line"></span><br><span class="line"># 可变： 对象所指向的内存中的值是可以改变的</span><br><span class="line"></span><br><span class="line"># 可变类型： dict, list, set</span><br><span class="line"></span><br><span class="line">list1 = [1,2,3,4,5]</span><br><span class="line">print(list1,id(list1))</span><br><span class="line">list1.pop()</span><br><span class="line">print(list1,id(list1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set1=(3,5,6)</span><br><span class="line">fset = frozenset(set1)</span><br><span class="line">print(fset,id(fset))</span><br><span class="line"></span><br><span class="line">fset = frozenset(&#123;3,6&#125;)</span><br><span class="line">print(fset,id(fset))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 可变类型变量赋值与修改情况</span><br><span class="line"></span><br><span class="line">list1 = [1,3,5,8,9,0]</span><br><span class="line"></span><br><span class="line">list2 = list1</span><br><span class="line"></span><br><span class="line">list1.remove(5)</span><br><span class="line"></span><br><span class="line">print(list2) # list1与list2指向同一内存地址，任一修改则全修改</span><br><span class="line"></span><br><span class="line"># 不可变类型则不实行以上策略</span><br><span class="line">s1 = &#x27;abc&#x27;</span><br><span class="line">s2 = s1</span><br><span class="line"></span><br><span class="line">s1 = &#x27;abcd&#x27;</span><br><span class="line"></span><br><span class="line">print(s2)</span><br></pre></td></tr></table></figure>

<h1 id="func01-py"><a href="#func01-py" class="headerlink" title="func01.py"></a>func01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 可迭代参数</span><br><span class="line"></span><br><span class="line"># 求最大值函数</span><br><span class="line"></span><br><span class="line">def max(iterable):</span><br><span class="line">    max = iterable[0]</span><br><span class="line">    for i in iterable:</span><br><span class="line">        if i&gt;max:</span><br><span class="line">            max=i</span><br><span class="line">    print(&#x27;max is&#x27;, max)</span><br><span class="line"></span><br><span class="line">list1 = [4,1,4,3,8,9]</span><br><span class="line">max(list1)</span><br><span class="line"></span><br><span class="line">tuple1 = (3,6,1,0,5)</span><br><span class="line">max(tuple1)</span><br><span class="line"></span><br><span class="line"># 判断变量是什么类型：isinstance(变量,类型关键字)</span><br><span class="line"></span><br><span class="line">print(isinstance(2,int)) # 返回值是True, False</span><br><span class="line"></span><br><span class="line">print(isinstance(tuple1,tuple))</span><br><span class="line"></span><br><span class="line">if isinstance(tuple1,tuple):</span><br><span class="line">    print(&#x27;sort and reverse is not suitable&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">s1 = [1,3,6,7,8,9]</span><br><span class="line"></span><br><span class="line">for index, i in enumerate(s1):</span><br><span class="line">    print(index, i)</span><br><span class="line"></span><br><span class="line">print(enumerate(s1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 类似功能写法</span><br><span class="line"></span><br><span class="line">list1 = []</span><br><span class="line">index=0</span><br><span class="line"></span><br><span class="line">for i in s1:</span><br><span class="line">    t1 = (index, i)</span><br><span class="line">    list1.append(t1)</span><br><span class="line">    index += 1</span><br><span class="line"></span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for index, value in list1:</span><br><span class="line">    print(index,value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 复用</span><br><span class="line"></span><br><span class="line">def enumerate1(value):</span><br><span class="line">    list1 = []</span><br><span class="line">    index = 0</span><br><span class="line"></span><br><span class="line">    for i in value:</span><br><span class="line">        t1 = (index, i)</span><br><span class="line">        list1.append(t1)</span><br><span class="line">        index += 1</span><br><span class="line"></span><br><span class="line">    print(list1)</span><br><span class="line"></span><br><span class="line">s2 = (2,5,7,9,0,7)</span><br><span class="line">enumerate1(s2)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------------*args---------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">def add(*args):  # 此处星号起装包作用，把参数装包成元组</span><br><span class="line">    print(args)  # 此时args已是装包好的元组</span><br><span class="line">    sum=0</span><br><span class="line">    if len(args) &gt; 0:</span><br><span class="line">        for i in args:</span><br><span class="line">            sum += i</span><br><span class="line">        print(f&#x27;The sum is &#123;sum&#125;&#x27;)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;no number can be added&#x27;, sum)</span><br><span class="line"></span><br><span class="line">add()</span><br><span class="line">add(1)</span><br><span class="line">add(1,2)</span><br><span class="line">add(1,2,3,4)</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------------*args---------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">def add(name, age, *args):  # name, *args = &#x27;Tom&#x27;, 4,6,8</span><br><span class="line">    print(name, age, args)</span><br><span class="line">    sum=0</span><br><span class="line">    if len(args) &gt; 0:</span><br><span class="line">        for i in args:</span><br><span class="line">            sum += i</span><br><span class="line">        print(f&#x27;The sum of &#123;name&#125; is &#123;sum&#125;&#x27;)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;no number can be added&#x27;, sum)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># a,*b = 1,3,5,6,7  # 第一个赋值给a，其余赋值给带星号的b</span><br><span class="line"></span><br><span class="line">add(&#x27;Tom&#x27;, 4,6,8) # 函数参数执行上述规律</span><br><span class="line">add(&#x27;Wen&#x27;, 10)</span><br><span class="line"># add(&#x27;Qiang&#x27;) # TypeError: add() missing 1 required positional argument: &#x27;age&#x27;</span><br><span class="line">                # 传实参时，实参个数必须多于非可变形参(即不带星号形参)个数</span><br><span class="line"></span><br><span class="line"># 注意：可变参数必须放在后面：name, *args</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 函数：打印每位同学姓名和年龄</span><br><span class="line"></span><br><span class="line">students = &#123;&#x27;001&#x27;:(&#x27;Cai&#x27;, 21), &#x27;002&#x27;:(&#x27;Yuan&#x27;, 19),&#x27;003&#x27;:(&#x27;Kai&#x27;, 20),&#x27;004&#x27;:(&#x27;Xi&#x27;, 19)&#125;</span><br><span class="line"></span><br><span class="line">def print_boy(person):</span><br><span class="line">    if isinstance(person, dict):</span><br><span class="line">        value = person.values() # !!</span><br><span class="line">        print(value)</span><br><span class="line">        for name, age in value:</span><br><span class="line">            print(f&#x27;The age of &#123;name&#125; is &#123;age&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print_boy(students)</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------------------**kwargs-------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#x27;001&#x27;:&#x27;python&#x27;,&#x27;002&#x27;:&#x27;java&#x27;,&#x27;003&#x27;:&#x27;c&#x27;,&#x27;004&#x27;:&#x27;go&#x27;&#125;</span><br><span class="line"></span><br><span class="line">def func(**kwargs): # 此处双星号将key=value的形式转成字典</span><br><span class="line">    print(kwargs)</span><br><span class="line"></span><br><span class="line">func(a=1,b=2)</span><br><span class="line">func(**dict1) # 此处双星号将字典转成key=value的形式</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 函数：打印每位同学姓名和年龄</span><br><span class="line"></span><br><span class="line">students = &#123;&#x27;001&#x27;:(&#x27;Cai&#x27;, 21), &#x27;002&#x27;:(&#x27;Yuan&#x27;, 19),&#x27;003&#x27;:(&#x27;Kai&#x27;, 20),&#x27;004&#x27;:(&#x27;Xi&#x27;, 19)&#125;</span><br><span class="line"></span><br><span class="line">def print_boy(name,**person):</span><br><span class="line">    print(&#x27;&#123;&#125; likes these stars&#x27;.format(name))</span><br><span class="line">    if isinstance(person, dict):</span><br><span class="line">        value = person.values() # !!</span><br><span class="line">        # print(value)</span><br><span class="line">        for name, age in value:</span><br><span class="line">            print(f&#x27;The age of &#123;name&#125; is &#123;age&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print_boy(&#x27;Rui&#x27;, **students)</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 混用</span><br><span class="line"></span><br><span class="line">def func(name=&#x27;Tom&#x27;, age=10, *args, **kwargs):</span><br><span class="line">    print(f&#x27;&#123;name&#125;\t&#123;age&#125;\t&#123;args&#125;\t&#123;kwargs&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">list1 = [19,2]</span><br><span class="line">dict1 = &#123;&#x27;1&#x27;:&#x27;a&#x27;,&#x27;2&#x27;:&#x27;b&#x27;&#125;</span><br><span class="line">func(&#x27;Mike&#x27;, *list1, **dict1)</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------全局变量与局部变量--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 全局变量如果是不可变类型，在函数中进行修改则需要添加global关键字，否则就不需要</span><br><span class="line"># 在函数中，局部变量不能与全局变量重名，使用全局变量时，需先用global声明再使用</span><br><span class="line">name = &#x27;Yue&#x27;</span><br><span class="line"></span><br><span class="line">list1 = [1,2,4,6]</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">    name = &#x27;rui&#x27;</span><br><span class="line">    print(name)</span><br><span class="line">    print(list1)</span><br><span class="line"></span><br><span class="line">def func1():</span><br><span class="line">    global name</span><br><span class="line">    name += &#x27;Yue&#x27;</span><br><span class="line">    list1.append(8)</span><br><span class="line">    print(name)</span><br><span class="line">    print(list1)</span><br><span class="line"></span><br><span class="line">func1()</span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------内部函数--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">特点：</span><br><span class="line">1. 可以访问外部函数的变量</span><br><span class="line">2. 内部函数可以修改外部函数的可变类型变量，如list1</span><br><span class="line">3. 内部函数修改全局的不可变类型变量时，需要在内部函数声明global 变量名</span><br><span class="line">    内部函数修改外部函数的不可变的变量时，需要在内部函数中声明：nonlocal 变量名</span><br><span class="line">4. locals() 查看本地变量有哪些，以字典的形式输出</span><br><span class="line">    globals() 查看全局变量有哪些，以字典的形式输出（注意里面有系统的键值对）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">    # 声明变量</span><br><span class="line">    n = 100 # 局部变量</span><br><span class="line">    list1 = [3,6,9,4] # 局部变量</span><br><span class="line"></span><br><span class="line">    # 声明内部函数</span><br><span class="line">    def inner_func():</span><br><span class="line">        nonlocal n</span><br><span class="line">        # 对list1里面的元素进行加5操作</span><br><span class="line">        for index ,i in enumerate(list1):</span><br><span class="line">            # index=0, i=3.....</span><br><span class="line">            list1[index] = i+n</span><br><span class="line"></span><br><span class="line">        list1.sort()</span><br><span class="line"></span><br><span class="line">        # 修改n变量，需先用nonlocal声明</span><br><span class="line">        n += 101</span><br><span class="line"></span><br><span class="line">    # 内部函数声明之后，需调用才能生效</span><br><span class="line">    inner_func()</span><br><span class="line"></span><br><span class="line">    print(list1, n)</span><br><span class="line"></span><br><span class="line">func()</span><br></pre></td></tr></table></figure>

<h1 id="func02-闭包-py"><a href="#func02-闭包-py" class="headerlink" title="func02_闭包.py"></a>func02_闭包.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"># 闭包</span><br><span class="line"># 在函数中提出的概念</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">符合闭包的条件</span><br><span class="line">1. 外部函数中定义了内部函数</span><br><span class="line">2. 外部函数有返回值</span><br><span class="line">3. 返回的值是：内部函数名</span><br><span class="line">4. 内部函数引用了外部函数的变量</span><br><span class="line"></span><br><span class="line">格式：</span><br><span class="line">def 外部函数():</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    def 内部函数():</span><br><span class="line"></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">    return 内部函数</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># def func():</span><br><span class="line">#     a = 100</span><br><span class="line">#</span><br><span class="line">#     def inner_func():</span><br><span class="line">#         b = 99</span><br><span class="line">#         print(a, b)</span><br><span class="line">#</span><br><span class="line">#     print(locals())</span><br><span class="line">#     return inner_func</span><br><span class="line">#</span><br><span class="line"># # func()</span><br><span class="line">#</span><br><span class="line"># # print(a)</span><br><span class="line">#</span><br><span class="line"># # inner_func()</span><br><span class="line">#</span><br><span class="line"># x = func()</span><br><span class="line">#</span><br><span class="line"># print(x)</span><br><span class="line">#</span><br><span class="line"># # inner_func()</span><br><span class="line">#</span><br><span class="line"># # x就是内部函数，x()就表示调用函数</span><br><span class="line"># x()</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------闭包的特点--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line"># 特点：</span><br><span class="line"># 1. 保存返回闭包时的状态（外层函数变量）</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line">#</span><br><span class="line"># def func(a, b):</span><br><span class="line">#     c = 10</span><br><span class="line">#</span><br><span class="line">#     def inner_func():</span><br><span class="line">#         s = a + b + c</span><br><span class="line">#</span><br><span class="line">#         print(s)</span><br><span class="line">#</span><br><span class="line">#     return inner_func</span><br><span class="line">#</span><br><span class="line"># ifunc = func(6, 9) # 赋值调用外部函数时，内部函数记录参数的值并保存到赋给的变量</span><br><span class="line"># ifunc1 = func(2, 8) # 多次调用互不影响</span><br><span class="line"># ifunc1()</span><br><span class="line"># ifunc()</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------闭包的特点--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># def func():</span><br><span class="line">#     a = 100</span><br><span class="line">#</span><br><span class="line">#     def inner_func1():</span><br><span class="line">#         b = 90</span><br><span class="line">#         s = a + b</span><br><span class="line">#         print(s)</span><br><span class="line">#</span><br><span class="line">#     def inner_func2():</span><br><span class="line">#         inner_func1()</span><br><span class="line">#         print(&#x27;------&gt; inner_func2&#x27;)</span><br><span class="line">#         return &#x27;hello&#x27;</span><br><span class="line">#</span><br><span class="line">#     return inner_func2</span><br><span class="line">#</span><br><span class="line"># f = func()</span><br><span class="line">#</span><br><span class="line"># print(f)</span><br><span class="line">#</span><br><span class="line"># f()</span><br><span class="line">#</span><br><span class="line"># ff = f()</span><br><span class="line">#</span><br><span class="line"># print(ff)</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------闭包应用--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># # 计数器</span><br><span class="line">#</span><br><span class="line"># def generate_count():</span><br><span class="line">#     container = [0]</span><br><span class="line">#</span><br><span class="line">#     def add_one():</span><br><span class="line">#         container[0] = container[0] + 1</span><br><span class="line">#         print(&#x27;This is the &#123;&#125; time access&#x27;.format(container[0]))</span><br><span class="line">#</span><br><span class="line">#     return add_one</span><br><span class="line">#</span><br><span class="line"># container = generate_count()</span><br><span class="line">#</span><br><span class="line"># container()</span><br><span class="line">#</span><br><span class="line"># container()</span><br><span class="line">#</span><br><span class="line"># container()</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------闭包应用之装饰器--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">加入购物车，付款，修改收货地址。。。</span><br><span class="line">判断用户的登录状态</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">islogin = False # 默认没有登录</span><br><span class="line"></span><br><span class="line"># 定义一个登录函数</span><br><span class="line">def login():</span><br><span class="line">    username = input(&#x27;please input a username: &#x27;)</span><br><span class="line">    password = input(&#x27;please input password: &#x27;)</span><br><span class="line">    if username == &#x27;admin&#x27; and password == &#x27;123456&#x27;:</span><br><span class="line">        return True</span><br><span class="line">    else:</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 定义一个装饰器，进行付款验证</span><br><span class="line">def login_required(func):</span><br><span class="line">    def wrapper(*args, **kwargs):</span><br><span class="line">        global islogin</span><br><span class="line">        print(&#x27;--------paying-------&#x27;)</span><br><span class="line">        # 验证用户是否登录</span><br><span class="line">        if islogin:</span><br><span class="line">            func(*args, **kwargs)</span><br><span class="line">        else:</span><br><span class="line">            # 跳转到登录页面</span><br><span class="line">            print(&#x27;user is not logged in, unable to pay&#x27;)</span><br><span class="line">            islogin = login()</span><br><span class="line">            print(&#x27;result:&#x27;, islogin)</span><br><span class="line"></span><br><span class="line">    return wrapper</span><br><span class="line"></span><br><span class="line">@login_required</span><br><span class="line">def pay(money):</span><br><span class="line">    print(&#x27;payment in progress, amount of money is &#123;&#125;&#x27;.format(money))</span><br><span class="line">    print(&#x27;In the payment....&#x27;)</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    print(&#x27;payment complete&#x27;)</span><br><span class="line"></span><br><span class="line">pay(10000)</span><br><span class="line"></span><br><span class="line">pay(8000)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="闭包应用之装饰器副本-py"><a href="#闭包应用之装饰器副本-py" class="headerlink" title="闭包应用之装饰器副本.py"></a>闭包应用之装饰器副本.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"># def func(number):</span><br><span class="line">#     a = 100</span><br><span class="line">#</span><br><span class="line">#     def inner_func():</span><br><span class="line">#         nonlocal a</span><br><span class="line">#         nonlocal number</span><br><span class="line">#         number += 1</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#         for i in range(number):</span><br><span class="line">#             a += 1</span><br><span class="line">#</span><br><span class="line">#         print(a)</span><br><span class="line">#</span><br><span class="line">#     return inner_func</span><br><span class="line">#</span><br><span class="line"># f = func(5)</span><br><span class="line"># f()</span><br><span class="line">#</span><br><span class="line"># a = 50</span><br><span class="line"># f1 = func(a)</span><br><span class="line"># print(f1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># # 地址引用</span><br><span class="line"># # 函数作为参数调用</span><br><span class="line"># def test():</span><br><span class="line">#     print(&#x27;--------test-------&#x27;)</span><br><span class="line">#</span><br><span class="line"># t = test</span><br><span class="line"># test()</span><br><span class="line"># t()</span><br><span class="line">#</span><br><span class="line"># def func(f):</span><br><span class="line">#     print(f)</span><br><span class="line">#     f()</span><br><span class="line">#     print(&#x27;------&gt;func&#x27;)</span><br><span class="line">#</span><br><span class="line"># func(test)</span><br><span class="line"></span><br><span class="line"># 定义一个装饰器</span><br><span class="line"># def decorate(func):</span><br><span class="line">#     a = 100</span><br><span class="line">#</span><br><span class="line">#     def wrapper():</span><br><span class="line">#</span><br><span class="line">#         func()</span><br><span class="line">#         print(&#x27;------&gt;paint&#x27;)</span><br><span class="line">#         print(&#x27;-----&gt;floor&#x27;, a)</span><br><span class="line">#         print(&#x27;-----&gt;furniture&#x27;)</span><br><span class="line">#</span><br><span class="line">#     return wrapper</span><br><span class="line">#</span><br><span class="line"># # 使用装饰器</span><br><span class="line"># @decorate</span><br><span class="line"># def house():</span><br><span class="line">#     print(&#x27;This is a roughcast house....&#x27;)</span><br><span class="line">#</span><br><span class="line"># # def house1():</span><br><span class="line"># #     house()</span><br><span class="line"># #     print(&#x27;paint&#x27;)</span><br><span class="line"># #     print(&#x27;floor&#x27;)</span><br><span class="line">#</span><br><span class="line"># house()</span><br><span class="line">#</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line"># 1. house被装饰函数</span><br><span class="line"># 2. 将被装饰函数作为参数传给装饰器decorate</span><br><span class="line"># 3. 执行decorate函数</span><br><span class="line">#</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line">#</span><br><span class="line"># print(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line">#</span><br><span class="line"># # 登录校验</span><br><span class="line">#</span><br><span class="line"># import time</span><br><span class="line">#</span><br><span class="line"># def decorate(func):</span><br><span class="line">#     def wrapper(*args, **kwargs):</span><br><span class="line">#         print(&#x27;Validating...&#x27;)</span><br><span class="line">#         time.sleep(2)</span><br><span class="line">#         print(&#x27;Validate complete....&#x27;)</span><br><span class="line">#         # 调用原函数</span><br><span class="line">#         func(*args, **kwargs)</span><br><span class="line">#     return wrapper</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># @decorate</span><br><span class="line"># def f1(n):</span><br><span class="line">#     print(&#x27;------------f1------------&#x27;, n)</span><br><span class="line">#</span><br><span class="line"># @decorate</span><br><span class="line"># def f2(name, age):</span><br><span class="line">#     print(&#x27;--------------f2-----------&#x27;, name, age)</span><br><span class="line">#</span><br><span class="line"># @decorate</span><br><span class="line"># def f3(students, clazz=&#x27;1905&#x27;):</span><br><span class="line">#     print(&#x27;students in class &#123;&#125; as follow&#x27;.format(clazz))</span><br><span class="line">#     for stu in students:</span><br><span class="line">#         print(stu)</span><br><span class="line">#</span><br><span class="line"># @decorate</span><br><span class="line"># def f4():</span><br><span class="line">#     print(&#x27;------------f4-------------&#x27;)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># f1(5)</span><br><span class="line"># f2(&#x27;lily&#x27;, 20)</span><br><span class="line"># f3([&#x27;lily&#x27;, &#x27;Tom&#x27;, &#x27;Lucy&#x27;], clazz=&#x27;1904&#x27;)</span><br><span class="line"># f4()</span><br><span class="line"></span><br><span class="line"># print(&#x27;--------------------------多个装饰器----------------------------------&#x27;)</span><br><span class="line">#</span><br><span class="line"># # 多个装饰器</span><br><span class="line">#</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line"># 如果装饰器是多层的，谁距离函数最近就优先使用哪个装饰器</span><br><span class="line">#</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line">#</span><br><span class="line"># def zhuang1(func):</span><br><span class="line">#     print(&#x27;---------&gt;1 start&#x27;)</span><br><span class="line">#</span><br><span class="line">#     def wrapper(*args, **kwargs):</span><br><span class="line">#         func()</span><br><span class="line">#         print(&#x27;paint&#x27;)</span><br><span class="line">#</span><br><span class="line">#     print(&#x27;---------&gt;1 end&#x27;)</span><br><span class="line">#</span><br><span class="line">#     return wrapper</span><br><span class="line">#</span><br><span class="line"># def zhuang2(func):</span><br><span class="line">#     print(&#x27;---------&gt;2 start&#x27;)</span><br><span class="line">#</span><br><span class="line">#     def wrapper(*args, **kwargs):</span><br><span class="line">#         func()</span><br><span class="line">#         print(&#x27;floor, furniture....&#x27;)</span><br><span class="line">#</span><br><span class="line">#     print(&#x27;---------&gt;2 end&#x27;)</span><br><span class="line">#</span><br><span class="line">#     return wrapper</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># @zhuang2</span><br><span class="line"># @zhuang1</span><br><span class="line"># def house():</span><br><span class="line">#     print(&#x27;This is roughcast house....&#x27;)</span><br><span class="line">#</span><br><span class="line"># house()</span><br><span class="line"></span><br><span class="line">print(&#x27;--------------------------带参数的装饰器----------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">带参数的装饰器是三层的</span><br><span class="line">最外层的函数负责接收装饰器的参数</span><br><span class="line">里面的内容还是原装饰器的内容</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">def outer(a): # 第一层：负责接收装饰器的参数</span><br><span class="line">    def decorate(func): # 第二层：负责接收函数</span><br><span class="line">        def wrapper(*args, **kwargs): # 第三层：负责接收函数的参数</span><br><span class="line">            func(*args, **kwargs)</span><br><span class="line">            print(&#x27;------&gt; floor &#123;&#125; blocks&#x27;.format(a))</span><br><span class="line"></span><br><span class="line">        return wrapper</span><br><span class="line">    return decorate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@outer(a=10)</span><br><span class="line">def house(time):</span><br><span class="line">    print(&#x27;This is roughcast house, when reaches &#123;&#125; to get house key&#x27;.format(time))</span><br><span class="line"></span><br><span class="line">@outer(100)</span><br><span class="line">def street():</span><br><span class="line">    print(&#x27;New street: black spring road&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">house(&#x27;2019-6-12&#x27;)</span><br><span class="line"></span><br><span class="line">street()</span><br></pre></td></tr></table></figure>

<h1 id="变量的作用域-py"><a href="#变量的作用域-py" class="headerlink" title="变量的作用域.py"></a>变量的作用域.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">函数：</span><br><span class="line">作用域：LEGB</span><br><span class="line"></span><br><span class="line">L: local 局部变量</span><br><span class="line"></span><br><span class="line">E: enclosing 嵌套</span><br><span class="line"></span><br><span class="line">G: Global 全局变量</span><br><span class="line"></span><br><span class="line">B: built-in 内置的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">嵌套函数：</span><br><span class="line"></span><br><span class="line">闭包：</span><br><span class="line">1. 内置函数</span><br><span class="line">2. 内层函数引用外层函数的变量</span><br><span class="line">3. 返回内层函数</span><br><span class="line"></span><br><span class="line">装饰器：</span><br><span class="line">1. 内置函数</span><br><span class="line">2. 内层函数引用外层函数的变量</span><br><span class="line">3. 返回内层函数</span><br><span class="line">4. 函数作为外层函数的参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用装饰器：</span><br><span class="line">@装饰器名称</span><br><span class="line">def 函数名():</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="anonymous01-py"><a href="#anonymous01-py" class="headerlink" title="anonymous01.py"></a>anonymous01.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"># # 匿名函数作为参数</span><br><span class="line"># def func(x, y, func):</span><br><span class="line">#     print(x, y)</span><br><span class="line">#     print(func)</span><br><span class="line">#     s = func(x, y)</span><br><span class="line">#     print(s)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># # 调用func</span><br><span class="line"># func(1,2, lambda a, b: a + b)</span><br><span class="line">#</span><br><span class="line"># # 匿名函数与内置函数的结合使用</span><br><span class="line"># # max, sorted, zip...</span><br><span class="line">#</span><br><span class="line"># list1 = [3, 5, 8, 9, 0]</span><br><span class="line"># m = max(list1)</span><br><span class="line">#</span><br><span class="line"># print(&#x27;max is: &#x27;, m)</span><br><span class="line">#</span><br><span class="line"># list2 = [&#123;&#x27;a&#x27;: 10, &#x27;b&#x27;: 21&#125;, &#123;&#x27;a&#x27;: 13, &#x27;b&#x27;: 19&#125;, &#123;&#x27;a&#x27;: 9, &#x27;b&#x27;: 22&#125;, &#123;&#x27;a&#x27;: 29, &#x27;b&#x27;: 18&#125;]</span><br><span class="line">#</span><br><span class="line"># n = max(list2, key=lambda x: x[&#x27;a&#x27;])</span><br><span class="line"># print(&#x27;max number in list2 is: &#x27;, n)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># map函数</span><br><span class="line"></span><br><span class="line">list1 = [3,4,6,7,8,9,9,0,2,5]</span><br><span class="line"></span><br><span class="line">result = map(lambda x: x+2, list1)</span><br><span class="line">print(list(result))</span><br><span class="line"></span><br><span class="line"># 对列表中的奇数进行加1操作</span><br><span class="line"># 方法一</span><br><span class="line">result = map(lambda x: x if x%2==0 else x+1, list1)</span><br><span class="line">print(list(result))</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line">for index, i in enumerate(list1):</span><br><span class="line">    if i%2 != 0:</span><br><span class="line">        list1[index] = i+1</span><br><span class="line"></span><br><span class="line">print(list1)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">print(&#x27;---------------------reduce()---------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># reduce(): 对列表中的元素进行加减乘除运算的函数</span><br><span class="line"></span><br><span class="line">from functools import reduce</span><br><span class="line"></span><br><span class="line">tuple1 = (3,5,7,8,9,1)</span><br><span class="line"></span><br><span class="line">result = reduce(lambda x,y: x+y, tuple1)</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">tuple2 = (1,)</span><br><span class="line"></span><br><span class="line">result = reduce(lambda x,y: x+y, tuple2, 10)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># filter() 筛选函数</span><br><span class="line">list1 = [12,6,8,98,34,36,2,8,0]</span><br><span class="line">result = filter(lambda x:x&gt;10, list1)</span><br><span class="line">print(list(result))</span><br><span class="line"></span><br><span class="line"># sorted() or list.sort() 排序</span><br></pre></td></tr></table></figure>

<h1 id="book-system-py"><a href="#book-system-py" class="headerlink" title="book_system.py"></a>book_system.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"># 持久化保存：文件</span><br><span class="line"># list 元组，字典-----&gt;内存</span><br><span class="line"></span><br><span class="line"># 用户注册</span><br><span class="line"></span><br><span class="line">def register():</span><br><span class="line">    username = input(&#x27;please input username: &#x27;)</span><br><span class="line">    password = input(&#x27;please input password: &#x27;)</span><br><span class="line">    repassword = input(&#x27;Confirm password: &#x27;)</span><br><span class="line"></span><br><span class="line">    if password == repassword:</span><br><span class="line">        # 保存信息</span><br><span class="line">        with open(r&#x27;a:\p1\book\user.txt&#x27;, &#x27;a&#x27;) as wstream:</span><br><span class="line">            wstream.write(&#x27;&#123;&#125; &#123;&#125;\n&#x27;.format(username, password))</span><br><span class="line"></span><br><span class="line">        print(&#x27;user register complete!&#x27;)</span><br><span class="line"></span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;Password not match!&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 用户登录</span><br><span class="line">def login():</span><br><span class="line">    username = input(&#x27;please input username: &#x27;)</span><br><span class="line">    password = input(&#x27;please input password: &#x27;)</span><br><span class="line"></span><br><span class="line">    if username and password:</span><br><span class="line">        with open(r&#x27;a:\p1\book\user.txt&#x27;) as rstream:</span><br><span class="line">            while True:</span><br><span class="line">                user = rstream.readline()</span><br><span class="line"></span><br><span class="line">                if not user:</span><br><span class="line">                    print(&#x27;wrong username or password&#x27;)</span><br><span class="line">                    break</span><br><span class="line"></span><br><span class="line">                input_user = &#x27;&#123;&#125; &#123;&#125;\n&#x27;.format(username, password)</span><br><span class="line"></span><br><span class="line">                if user == input_user:</span><br><span class="line">                    print(&#x27;user login success!&#x27;)</span><br><span class="line">                    break</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def show_books():</span><br><span class="line">    print(&#x27;----------Books in library as follow-----------&#x27;)</span><br><span class="line">    with open(r&#x27;a:\p1\book\books.txt&#x27;, &#x27;r&#x27;) as rstream:</span><br><span class="line">        books = rstream.readlines()</span><br><span class="line">        for book in books:</span><br><span class="line">            print(book, end=&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># register()</span><br><span class="line"></span><br><span class="line"># login()</span><br><span class="line"></span><br><span class="line">show_books()</span><br></pre></td></tr></table></figure>

<h1 id="file-operation-py"><a href="#file-operation-py" class="headerlink" title="file_operation.py"></a>file_operation.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"># 文件操作</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">文件上传</span><br><span class="line">保存log</span><br><span class="line"></span><br><span class="line">系统函数：</span><br><span class="line">    open(file, mode, buffering, encoding)</span><br><span class="line">读：</span><br><span class="line">    open(path/filename,&#x27;rt&#x27;) ----&gt;返回值：stream(管道)</span><br><span class="line"></span><br><span class="line">    container = stream.read() ----&gt; 读取管道中内容</span><br><span class="line"></span><br><span class="line">    注意：如果传递的path/filename有误，则会报错：FileNotFoundError</span><br><span class="line">        如果读取的是图片文件则不能使用默认的读取方式，应采用 mode = &#x27;rb&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># # 读文件</span><br><span class="line"># stream = open(r&#x27;aa.txt&#x27;)</span><br><span class="line">#</span><br><span class="line"># container = stream.read()</span><br><span class="line">#</span><br><span class="line"># print(container)</span><br><span class="line">#</span><br><span class="line"># result = stream.readable() # 判断是否可以读取</span><br><span class="line">#</span><br><span class="line"># print(result)</span><br><span class="line">#</span><br><span class="line"># stream.close()</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># # 写文件</span><br><span class="line"># stream = open(&#x27;aa.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">#</span><br><span class="line"># # writelines(iterable) 没有自动换行</span><br><span class="line"># stream.writelines([&#x27;God of Gamblers:Gao Jin\n&#x27;,</span><br><span class="line">#                    &#x27;Conman:Xiao Dao\n&#x27;, &#x27;Saint of Gambler:Zhou Xing Xing\n&#x27;])</span><br><span class="line">#</span><br><span class="line"># stream.close()</span><br><span class="line"></span><br><span class="line"># print(&#x27;--------------------------------文件的复刻-------------------------------&#x27;)</span><br><span class="line">#</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line"># 原文件：A:\10.JPG</span><br><span class="line"># 目标文件：A:\EFI\10.jpg</span><br><span class="line">#</span><br><span class="line"># with结合open使用，可以帮助我们自动释放资源</span><br><span class="line"># &#x27;&#x27;&#x27;</span><br><span class="line">#</span><br><span class="line"># # stream = open(&#x27;A:\10.JPG&#x27;, &#x27;rb&#x27;)</span><br><span class="line">#</span><br><span class="line"># with open(&#x27;A:\cloud.png&#x27;, &#x27;rb&#x27;) as stream:</span><br><span class="line">#     container = stream.read()</span><br><span class="line">#</span><br><span class="line">#     with open(&#x27;A:\EFI\cloud.JPG&#x27;, &#x27;wb&#x27;) as wstream:</span><br><span class="line">#         wstream.write(container)</span><br><span class="line">#</span><br><span class="line"># print(&#x27;File copy complete!&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------------------相对路径和绝对路径----------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">r = os.path.isabs(&#x27;A:\EFI\cloud.JPG&#x27;) # isabs 判断是否是绝对路径</span><br><span class="line">print(&#x27;----&gt;&#x27;, r)</span><br><span class="line"></span><br><span class="line">r = os.path.isabs(&#x27;../11/Demo01.py&#x27;) # ../ 返回当前文件所在路径的上一级目录</span><br><span class="line">print(&#x27;----&gt;&#x27;, r)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 获取路径：directory</span><br><span class="line"># 当前文件所在文件夹路径</span><br><span class="line">path = os.path.dirname(__file__)</span><br><span class="line">print(path)</span><br><span class="line"></span><br><span class="line"># 通过相对路径得到绝对路径</span><br><span class="line">path = os.path.abspath(&#x27;aa.txt&#x27;)</span><br><span class="line">print(path)</span><br><span class="line"></span><br><span class="line"># 获取当前文件的绝对路径</span><br><span class="line">path = os.path.abspath(__file__)</span><br><span class="line">print(path)</span><br><span class="line"></span><br><span class="line">path = os.getcwd() # 等效 os.path.dirname(__file__)</span><br><span class="line">print(path)</span><br><span class="line"></span><br><span class="line">r = os.path.isfile(os.getcwd())</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line">r = os.path.isdir(os.getcwd())</span><br><span class="line">print(r)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># os.path</span><br><span class="line">path = r&#x27;C:\Users\Private\Desktop\code2\1\file_operation.py&#x27;</span><br><span class="line"></span><br><span class="line">result = os.path.split(path)</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">print(result[1])</span><br><span class="line"></span><br><span class="line">result = os.path.splitext(path) # 分割文件与扩展名</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">size = os.path.getsize(path) # 获取文件的大小，单位是字节</span><br><span class="line">print(size)</span><br><span class="line"></span><br><span class="line">result = os.path.join(os.getcwd(), &#x27;file&#x27;, &#x27;a&#x27;, &#x27;cloud.png&#x27;)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------os模块函数---------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">if not os.path.exists(r&#x27;a:\p3&#x27;): # 判断目录是否存在</span><br><span class="line">    f = os.mkdir(r&#x27;a:\p3&#x27;)</span><br><span class="line">    print(f)</span><br><span class="line"></span><br><span class="line">f = os.rmdir(r&#x27;a:\p3&#x27;) # 只能删除空文件夹</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line"># f = os.removedirs(r&#x27;a:\p3&#x27;) # 删除当前目录内所有文件夹</span><br><span class="line"># print(f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------------------批量文件的复刻----------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"># print(os.path)</span><br><span class="line"># path = os.path.dirname(__file__) # 获取当前文件所在的文件目录（绝对路径）</span><br><span class="line"># print(path)</span><br><span class="line"># print(type(path))</span><br><span class="line"></span><br><span class="line"># with open(&#x27;A:\cloud.png&#x27;, &#x27;rb&#x27;) as stream:</span><br><span class="line">#     container = stream.read()</span><br><span class="line">#     print(stream.name)</span><br><span class="line">#     file = stream.name</span><br><span class="line">#     filename = file[file.rfind(&#x27;\\&#x27;)+1:] # 截取文件名</span><br><span class="line">#     path = os.path.dirname(__file__)</span><br><span class="line">#     path1 = os.path.join(path, filename)</span><br><span class="line">#</span><br><span class="line">#     with open(path1, &#x27;wb&#x27;) as wstream:</span><br><span class="line">#         wstream.write(container)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">src_path = r&#x27;A:p1&#x27;</span><br><span class="line">target_path = r&#x27;A:\p2&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># # 无子目录文件复刻</span><br><span class="line"># def copy(src, target):</span><br><span class="line">#     if os.path.isdir(src) and os.path.isdir(target):</span><br><span class="line">#         filelist = os.listdir(src) # [&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;]</span><br><span class="line">#</span><br><span class="line">#         for file in filelist:</span><br><span class="line">#</span><br><span class="line">#             path = os.path.join(src,file)</span><br><span class="line">#             with open(path, &#x27;rb&#x27;) as rstream:</span><br><span class="line">#                 container = rstream.read()</span><br><span class="line">#</span><br><span class="line">#                 path1 = os.path.join(target,file)</span><br><span class="line">#                 with open(path1, &#x27;wb&#x27;) as wstream:</span><br><span class="line">#                     wstream.write(container)</span><br><span class="line">#</span><br><span class="line">#         else:</span><br><span class="line">#             print(&#x27;Copy complete!&#x27;)</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># 有子目录文件复刻</span><br><span class="line">def copy(src_path, target_path):</span><br><span class="line"></span><br><span class="line">    # 获取文件夹里面的内容</span><br><span class="line">    filelist = os.listdir(src_path)</span><br><span class="line">    # 遍历列表</span><br><span class="line">    for file in filelist:</span><br><span class="line">        # 拼接路径</span><br><span class="line">        path = os.path.join(src_path, file)</span><br><span class="line">        # 判断是文件夹还是文件</span><br><span class="line">        if os.path.isdir(path):</span><br><span class="line">            # 递归调用copy()</span><br><span class="line">            target_path1 = os.path.join(target_path, file)</span><br><span class="line">            os.mkdir(target_path1)</span><br><span class="line"></span><br><span class="line">            copy(path, target_path1)</span><br><span class="line"></span><br><span class="line">        else:</span><br><span class="line">            # 不是文件夹则直接进行复制</span><br><span class="line">            with open(path, &#x27;rb&#x27;) as rstream:</span><br><span class="line">                    container = rstream.read()</span><br><span class="line"></span><br><span class="line">                    path1 = os.path.join(target_path, file)</span><br><span class="line">                    with open(path1, &#x27;wb&#x27;) as wstream:</span><br><span class="line">                        wstream.write(container)</span><br><span class="line"></span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;Copy complete!&#x27;)</span><br><span class="line"></span><br><span class="line">copy(src_path, target_path)</span><br></pre></td></tr></table></figure>

<h1 id="aa-txt"><a href="#aa-txt" class="headerlink" title="aa.txt"></a>aa.txt</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">God of Gamblers:Gao Jin</span><br><span class="line">Conman:Xiao Dao</span><br><span class="line">Saint of Gambler:Zhou Xing Xing</span><br></pre></td></tr></table></figure>

<h1 id="异常-py"><a href="#异常-py" class="headerlink" title="异常.py"></a>异常.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># 捕获异常</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">注意：</span><br><span class="line">如果是多个except,异常类型的顺序需要注意，最大的Exception要放到最后</span><br><span class="line"></span><br><span class="line">如果使用try-except-else结构，则在try代码中不能出现return</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def Division(a, b):</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        result = a / b</span><br><span class="line">        print(&#x27;Test line&#x27;)</span><br><span class="line">    # except Exception:</span><br><span class="line">    #     print(&#x27;Error found&#x27;)</span><br><span class="line">    except ValueError:</span><br><span class="line">        print(&#x27;value error found&#x27;)</span><br><span class="line">    except NameError:</span><br><span class="line">        print(&#x27;Name error found&#x27;)</span><br><span class="line">    except ZeroDivisionError:</span><br><span class="line">        print(&#x27;a is divided by zero&#x27;)</span><br><span class="line"></span><br><span class="line">Division(2, 0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">    stream = None # 在try内定义的变量stream，在finally内不能使用，需提前声明</span><br><span class="line">    try:</span><br><span class="line">        stream = open(r&#x27;a:\p1\book\books.txt&#x27;)</span><br><span class="line">        container = stream.read()</span><br><span class="line">        print(container)</span><br><span class="line">        return 1  # try内的return不会终止finally的代码</span><br><span class="line">    except Exception as err:</span><br><span class="line">        print(err)</span><br><span class="line">        return 2 # 有异常也不会终止finally的代码</span><br><span class="line">    finally:</span><br><span class="line">        print(&#x27;----------finally----------&#x27;)</span><br><span class="line">        if stream:</span><br><span class="line">            stream.close()</span><br><span class="line">        return 3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x = func()</span><br><span class="line">print(x)</span><br><span class="line"></span><br><span class="line"># 抛出异常</span><br><span class="line"></span><br><span class="line">def register():</span><br><span class="line">    username = input(&#x27;please input a username: &#x27;)</span><br><span class="line">    if len(username) &lt; 6:</span><br><span class="line">        raise Exception(&#x27;The length of username should not be less than 6&#x27;) # 抛出自定义异常</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;The username you inputted is &#x27;, username)</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    register()</span><br><span class="line">except Exception as err:</span><br><span class="line">    print(err)</span><br><span class="line">    print(&#x27;Fail to register&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;Register complete!&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="列表推导式-py"><a href="#列表推导式-py" class="headerlink" title="列表推导式.py"></a>列表推导式.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 0-5偶数，0-10奇数</span><br><span class="line"># [(偶数， 奇数), (), ().....] 每个偶数与每个奇数组成一个元组</span><br><span class="line"></span><br><span class="line">newlist = [(x, y) for x in range(5) if x % 2 == 0 for y in range(10) if y % 2 != 0]</span><br><span class="line">print(newlist)</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#x27;name&#x27;: &#x27;Tom&#x27;, &#x27;Salary&#x27;: 5000&#125;</span><br><span class="line">dict2 = &#123;&#x27;name&#x27;: &#x27;Lucy&#x27;, &#x27;Salary&#x27;: 8000&#125;</span><br><span class="line">dict3 = &#123;&#x27;name&#x27;: &#x27;Jack&#x27;, &#x27;Salary&#x27;: 4500&#125;</span><br><span class="line">dict4 = &#123;&#x27;name&#x27;: &#x27;Lily&#x27;, &#x27;Salary&#x27;: 3000&#125;</span><br><span class="line"></span><br><span class="line">list1 = [dict1, dict2, dict3, dict4]</span><br><span class="line"></span><br><span class="line"># salary大于5000加200, 小于等于5000加500</span><br><span class="line"></span><br><span class="line">newlist = [&#123;employee[&#x27;name&#x27;]: employee[&#x27;Salary&#x27;]+200&#125; if employee[&#x27;Salary&#x27;] &gt; 5000 else &#123;employee[&#x27;name&#x27;]: employee[&#x27;Salary&#x27;]+500&#125; for employee in list1]</span><br><span class="line">print(newlist)</span><br></pre></td></tr></table></figure>

<h1 id="生成器-py"><a href="#生成器-py" class="headerlink" title="生成器.py"></a>生成器.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">得到生成器方式：</span><br><span class="line">1.通过列表推导式得到生成器</span><br><span class="line">2.通过函数得到生成器</span><br><span class="line"></span><br><span class="line">__next__(): 获取下一个元素</span><br><span class="line"></span><br><span class="line">sen(value): 向每次生成器调用中传值 注意：第一次调用需用send(None)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 定义生成器方式一</span><br><span class="line">g = (x*3 for x in range(20))</span><br><span class="line"></span><br><span class="line"># print(type(g))</span><br><span class="line">#</span><br><span class="line"># # 方式一：通过调用__next__()方式得到元素</span><br><span class="line"># print(g.__next__())</span><br><span class="line"># print(g.__next__())</span><br><span class="line">#</span><br><span class="line"># # 方式二：next()</span><br><span class="line"># # 每调用一次next则会产生一个元素</span><br><span class="line"># print(next(g))</span><br><span class="line"># print(next(g))</span><br><span class="line">#</span><br><span class="line"># # StopIteration 调用次数大于生成器可生成的个数则报错</span><br><span class="line"></span><br><span class="line"># while True:</span><br><span class="line">#     try:</span><br><span class="line">#         e = next(g)</span><br><span class="line">#         print(e)</span><br><span class="line">#     except:</span><br><span class="line">#         print(&#x27;No more elements!&#x27;)</span><br><span class="line">#         break</span><br><span class="line"></span><br><span class="line"># 定义生成器方式二：函数</span><br><span class="line"># 只要函数中出现了yield关键字，此时函数就变成生成器</span><br><span class="line"># 菲波那切数列</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">步骤：</span><br><span class="line">1. 定义一个函数，函数中使用yield关键字</span><br><span class="line">2. 调用函数，接收调用的结果</span><br><span class="line">3. 得到的结果就是生成器</span><br><span class="line">4. 借助next(), __next__得到元素</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># def func():</span><br><span class="line">#     n = 0</span><br><span class="line">#     while True:</span><br><span class="line">#         n += 1</span><br><span class="line">#         # print(n)</span><br><span class="line">#         yield n</span><br><span class="line"># g = func()</span><br><span class="line"># print(g)</span><br><span class="line">#</span><br><span class="line"># print(next(g))</span><br><span class="line"># print(next(g))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># def fib(length):</span><br><span class="line">#     a, b = 0, 1</span><br><span class="line">#     n = 0</span><br><span class="line">#     while n&lt;length:</span><br><span class="line">#         # print(b)</span><br><span class="line">#         yield b  # return b + 暂停</span><br><span class="line">#         a, b = b, a+b</span><br><span class="line">#         n += 1</span><br><span class="line">#     return &#x27;No more element&#x27;  # return就是得到在StopIteration后的提示信息</span><br><span class="line">#</span><br><span class="line"># g = fib(4)</span><br><span class="line"># print(next(g))</span><br><span class="line"># print(next(g))</span><br><span class="line"># print(next(g))</span><br><span class="line"># print(next(g))</span><br><span class="line"># print(next(g))</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># def gen():</span><br><span class="line">#     i = 0</span><br><span class="line">#     while i&lt;5:</span><br><span class="line">#         temp = yield i</span><br><span class="line">#         print(&#x27;temp&#x27;, temp)</span><br><span class="line">#         for x in range(temp):</span><br><span class="line">#             print(&#x27;-------------&gt;&#x27;, x)</span><br><span class="line">#         print(&#x27;**********************&#x27;)</span><br><span class="line">#</span><br><span class="line">#         i += 1</span><br><span class="line">#</span><br><span class="line">#     return &#x27;No more data&#x27;</span><br><span class="line">#</span><br><span class="line"># g = gen()</span><br><span class="line">#</span><br><span class="line"># # print(next(g))</span><br><span class="line"># # print(next(g))</span><br><span class="line"># # print(next(g))</span><br><span class="line">#</span><br><span class="line"># g.send(None)</span><br><span class="line"># n1 = g.send(2)</span><br><span class="line"># print(&#x27;n1:&#x27;, n1)</span><br><span class="line"># n2 = g.send(3)</span><br><span class="line"># print(&#x27;n2:&#x27;, n2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-----------------------生成器之应用多任务---------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 进程 》 线程 》 协程</span><br><span class="line"># 迅雷</span><br><span class="line"></span><br><span class="line">def task1(n):</span><br><span class="line">    for i in range(n):</span><br><span class="line">        print(&#x27;moving number &#123;&#125; block&#x27;.format(i))</span><br><span class="line">        yield None</span><br><span class="line"></span><br><span class="line">def task2(n):</span><br><span class="line">    for i in range(n):</span><br><span class="line">        print(&#x27;playing number &#123;&#125; song&#x27;.format(i))</span><br><span class="line">        yield None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">g1 = task1(10)</span><br><span class="line">g2 = task2(10)</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    try:</span><br><span class="line">        next(g1)</span><br><span class="line">        next(g2)</span><br><span class="line">    except:</span><br><span class="line">        break</span><br></pre></td></tr></table></figure>

<h1 id="迭代器和可迭代对象-py"><a href="#迭代器和可迭代对象-py" class="headerlink" title="迭代器和可迭代对象.py"></a>迭代器和可迭代对象.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># 可迭代对象：1.生成器；2. 元组，列表，集合，字典，字符串</span><br><span class="line"># 判断一个对象是否可迭代</span><br><span class="line"></span><br><span class="line">from collections.abc import Iterable</span><br><span class="line"></span><br><span class="line">list1 = [1, 4, 7, 8, 8]</span><br><span class="line">f = isinstance(list1, Iterable)</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line">f = isinstance(&#x27;abc&#x27;, Iterable)</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line">f = isinstance(100, Iterable)</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line">g = (x+1 for x in range(10))</span><br><span class="line">f = isinstance(g, Iterable)</span><br><span class="line">print(f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 可以被next()函数调用并不断返回下一个值的对象称为迭代器：Iterator</span><br><span class="line"></span><br><span class="line">list1 = [1,2,3,4]</span><br><span class="line">list1 = iter(list1) # 通过iter()函数将可迭代的变量变成一个迭代器</span><br><span class="line"></span><br><span class="line">print(next(list1))</span><br><span class="line">print(next(list1))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">生成器与迭代器：</span><br><span class="line">生成器是可迭代的，也是迭代器</span><br><span class="line">list是可迭代的，但不是迭代器</span><br><span class="line"></span><br><span class="line">list ---&gt; iter(list) ---&gt; 迭代器 next()</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="正则表达式-py"><a href="#正则表达式-py" class="headerlink" title="正则表达式.py"></a>正则表达式.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"># 正则表达式 re--regular expression</span><br><span class="line"></span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">msg = &#x27;佟丽娅娜扎热巴代斯&#x27;</span><br><span class="line"></span><br><span class="line">pattern = re.compile(&#x27;佟丽娅&#x27;)</span><br><span class="line"></span><br><span class="line">result = pattern.match(msg)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 使用正则re模块方法：match</span><br><span class="line"></span><br><span class="line">s = &#x27;娜扎佟丽娅热巴代斯&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(&#x27;佟丽娅&#x27;, s) # 从头开始匹配，匹配不成功则返回None</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># search 进行正则字符串匹配方法，匹配的是整个字符串</span><br><span class="line">result = re.search(&#x27;佟丽娅&#x27;, s)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">print(result.span()) # 返回位置</span><br><span class="line"></span><br><span class="line">print(result.group()) # 使用group提取到匹配的内容</span><br><span class="line">print(result.groups())</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------正则表达式的使用----------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 提取符合两侧是字母，中间是数字的序列</span><br><span class="line"># a2b h6k</span><br><span class="line"># [] 表示的是一个范围</span><br><span class="line"></span><br><span class="line">s = &#x27;abcd7yjkfd8hdf00&#x27;</span><br><span class="line"></span><br><span class="line">result = re.search(&#x27;[a-z][0-9][a-z]&#x27;, s)</span><br><span class="line"># search 只要前面匹配到符合的项则停止检索后面的字符</span><br><span class="line">print(result.group())</span><br><span class="line"></span><br><span class="line">result = re.findall(&#x27;[a-z][0-9][a-z]&#x27;, s)</span><br><span class="line"># findall 匹配整个字符串，匹配到一个还会继续向后匹配，直到结尾</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 正则符号</span><br><span class="line"># a7a  a88a  a7878a</span><br><span class="line"></span><br><span class="line">msg = &#x27;a7aopa88akjgka7878a&#x27;</span><br><span class="line"></span><br><span class="line">result = re.findall(&#x27;[a-z][0-9]+[a-z]&#x27;, msg) # “+”表示该符合的字符的个数&gt;=1</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># QQ号验证  5-11位 开头不能是0</span><br><span class="line">qq = &#x27;14944689962&#x27;</span><br><span class="line">result = re.match(&#x27;[1-9][0-9]&#123;4,10&#125;$&#x27;, qq)</span><br><span class="line">#                [start][remainder]&#123;remainder min len, remainder max len&#125;</span><br><span class="line"># 添加$符号可以对字符串进行匹配到结尾字符</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 用户名可以是字母或者数字，不能是数字开头，用户名长度必须6位以上[0-9a-zA-Z]</span><br><span class="line"></span><br><span class="line">username = &#x27;admin001&#x27;</span><br><span class="line"></span><br><span class="line">result = re.search(&#x27;^[a-zA-Z]\w&#123;5,&#125;$&#x27;, username)</span><br><span class="line"># \w: 匹配任意字母数字及下划线等价于[a-zA-Z0-9_]</span><br><span class="line"># 使用search时添加^符号可以对字符串进行从头开始匹配，和$一起使用时就能从头到尾完全的匹配</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">msg = &#x27;a*py ab.txt bb.py kk.png uu.py apyb.txt&#x27;</span><br><span class="line">result = re.findall(r&#x27;\w*\.py\b&#x27;, msg) # 使用&#x27;\&#x27;时，建议结合&#x27;r&#x27;使用，避免出现转义</span><br><span class="line"></span><br><span class="line"># \b: 匹配一个单词边界，也就是指单词和空格间的位置，</span><br><span class="line"># 例如：&#x27;py\b&#x27; 可以匹配&quot;python&quot;中的&#x27;py&#x27;，但不能匹配&quot;openpyx1&quot;中的&#x27;py&#x27;</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">总结：</span><br><span class="line">    . 任意字符除&#123;\n&#125;</span><br><span class="line">    ^ 开头</span><br><span class="line">    $ 结尾</span><br><span class="line">    [] 范围 [abc] [a-z] [a-z*&amp;￥]</span><br><span class="line">    </span><br><span class="line">    正则预定义：</span><br><span class="line">    \s 空白（空格）</span><br><span class="line">    \b 边界</span><br><span class="line">    \d 数字</span><br><span class="line">    \w word [0-9a-zA-Z_]</span><br><span class="line">    </span><br><span class="line">    大写反面 \S 非空格 \D 非数字。。。</span><br><span class="line">    </span><br><span class="line">    &#x27;\w[0-9]&#x27;---&gt; \w  [0-9] 只能匹配一个字母</span><br><span class="line">    </span><br><span class="line">    量词：</span><br><span class="line">    * &gt;= 0</span><br><span class="line">    + &gt;= 1</span><br><span class="line">    ? 0,1</span><br><span class="line">    </span><br><span class="line">    手机号码正则</span><br><span class="line">    re.match(&#x27;1[35789]\d&#123;9&#125;$&#x27;, phone)</span><br><span class="line">    &#123;m&#125;: 固定m位</span><br><span class="line">    &#123;m,&#125;: &gt;= m</span><br><span class="line">    &#123;m,n&#125;: m =&lt; phone &lt;= n</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="正则表达式的分组操作-py"><a href="#正则表达式的分组操作-py" class="headerlink" title="正则表达式的分组操作.py"></a>正则表达式的分组操作.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"># 分组</span><br><span class="line"># 匹配数字0-100</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">n = &#x27;100&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(r&#x27;[1-9]?\d?$|100$&#x27;, n)</span><br><span class="line"># | 表示或者，要么使用&quot;[1-9]?\d$&quot;，要么使用&quot;100$&quot;</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 验证输入的邮箱 163，126，qq</span><br><span class="line">email = &#x27;7384677868@126.com&#x27;</span><br><span class="line">result = re.match(r&#x27;\w&#123;5,20&#125;@(163|126|qq)\.(com|cn)$&#x27;, email)</span><br><span class="line"># ( word | word | word) 区别 [abc] 表示的是一个字母而不是一个单词</span><br><span class="line"># ()小括号表示分组</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 不是以4，7结尾的手机号码（11位）</span><br><span class="line"></span><br><span class="line">phone = &#x27;15901018869&#x27;</span><br><span class="line">result = re.match(r&#x27;1\d&#123;9&#125;[0-35-689]$&#x27;, phone)</span><br><span class="line">print(result.group())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 爬虫</span><br><span class="line">phone = &#x27;010-12345678&#x27;</span><br><span class="line">result = re.match(r&#x27;(\d&#123;3&#125;|\d&#123;4&#125;)-(\d&#123;8&#125;)$&#x27;, phone)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 分别提取</span><br><span class="line">print(result.group())</span><br><span class="line"># ()表示分组  group(1) 表示提取到第一组的内容  group(2)表示第二组的内容</span><br><span class="line">print(result.group(1))</span><br><span class="line">print(result.group(2))</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">msg = &#x27;&lt;html&gt;abc&lt;/h1&gt;&lt;/html&gt;&#x27;</span><br><span class="line">msg1 = &#x27;&lt;h1&gt;hello&lt;/h1&gt;&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(r&#x27;&lt;[0-9a-zA-Z]+&gt;(.+)&lt;/[0-9a-zA-Z]+&gt;&#x27;, msg)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(1))</span><br><span class="line"></span><br><span class="line"># number</span><br><span class="line">result = re.match(r&#x27;&lt;([0-9a-zA-Z]+)&gt;(.+)&lt;/\1&gt;$&#x27;, msg1)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(1))</span><br><span class="line">print(result.group(2))</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">msg = &#x27;&lt;html&gt;&lt;h1&gt;abc&lt;/h1&gt;&lt;/html&gt;&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(r&#x27;&lt;([0-9a-zA-Z]+)&gt;&lt;([0-9a-zA-Z]+)&gt;(.+)&lt;/\2&gt;&lt;/\1&gt;$&#x27;, msg)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(1))</span><br><span class="line">print(result.group(2))</span><br><span class="line">print(result.group(3))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 起名的方式: (?P&lt;名字&gt;正则) (?P=名字)</span><br><span class="line"></span><br><span class="line">msg = &#x27;&lt;html&gt;&lt;h1&gt;abc&lt;/h1&gt;&lt;/html&gt;&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(r&#x27;&lt;(?P&lt;name1&gt;\w+)&gt;&lt;(?P&lt;name2&gt;\w+)&gt;(.+)&lt;/(?P=name2)&gt;&lt;/(?P=name1)&gt;&#x27;, msg)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(1))</span><br><span class="line">print(result.group(2))</span><br><span class="line">print(result.group(3))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">分组：() ---&gt; result.group(1) 获取组中匹配内容</span><br><span class="line">引用分组的内容：number+起名</span><br><span class="line"></span><br><span class="line">re模块：</span><br><span class="line">match  从开头匹配一次</span><br><span class="line">search  只匹配一次</span><br><span class="line">findall 查找所有</span><br><span class="line">sub(正则表达式, &#x27;新内容&#x27;, string) 替换</span><br><span class="line">split</span><br><span class="line">result = re.split(r&#x27;[,:]&#x27;, &#x27;java:99, python:100&#x27;)</span><br><span class="line">在字符串中搜索，如果遇到:或者，就分割，将分割的内容都保存在列表中</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">def func(temp):</span><br><span class="line">    num = temp.group()</span><br><span class="line">    num1 = int(num)+1</span><br><span class="line">    return str(num1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># result = re.sub(r&#x27;\d+&#x27;, &#x27;90&#x27;, &#x27;java:99, python:100&#x27;)</span><br><span class="line"># print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = re.sub(r&#x27;\d+&#x27;, func, &#x27;java:99, python:100&#x27;)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">result = re.split(r&#x27;[,:]&#x27;, &#x27;java:99, python:100&#x27;)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<h1 id="贪婪匹配和惰性匹配-py"><a href="#贪婪匹配和惰性匹配-py" class="headerlink" title="贪婪匹配和惰性匹配.py"></a>贪婪匹配和惰性匹配.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">python里数量词默认是贪婪的，总是尝试匹配尽可能多的字符。</span><br><span class="line">非贪婪则相反，总是尝试匹配尽可能少的字符。</span><br><span class="line">在“*”，“？”，“+”，“&#123;m,n&#125;后面加上？，使贪婪变成非贪婪</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line"># 默认是贪婪的</span><br><span class="line">msg = &#x27;abc123abc&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(r&#x27;abc(\d+?)&#x27;, msg)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">path = &#x27;&lt;data-original=&quot;https://pic.luolanshijia.com/img/upload/vod/20200313-21/08736945e107956397067dc11086c344.jpg&quot; style=&quot;background-image: url(&amp;quot;https://pic.luolanshijia.com/img/upload/vod/20200313-21/08736945e107956397067dc11086c344.jpg&amp;quot;)&#x27;</span><br><span class="line"></span><br><span class="line">result = re.match(r&#x27;&lt;data-original=&quot;(.*?)&quot;&#x27;, path)</span><br><span class="line">print(result.group(1))</span><br><span class="line">image_path = result.group(1)</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">response = requests.get(image_path)</span><br><span class="line"></span><br><span class="line">with open(&#x27;aa.jpg&#x27;, &#x27;wb&#x27;) as wstream:</span><br><span class="line"></span><br><span class="line">    wstream.write(response.content)</span><br></pre></td></tr></table></figure>

<h1 id="进程-py"><a href="#进程-py" class="headerlink" title="进程.py"></a>进程.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"># 进程创建</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">process = Process(target=函数，name=进程的名字，args=(给函数传递的参数))</span><br><span class="line">process 对象</span><br><span class="line"></span><br><span class="line">对象调用方法</span><br><span class="line">process.start()</span><br><span class="line">process.run() 只是执行了任务但是没有启动进程</span><br><span class="line">terminate() 终止</span><br><span class="line"></span><br><span class="line">多进程对于全局变量的访问，在每一个全局变量里面都放一个m变量，</span><br><span class="line">保证每个进程访问变量互不干扰</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">from multiprocessing import Process</span><br><span class="line">from time import sleep</span><br><span class="line"></span><br><span class="line">m = 1 # 不可变类型</span><br><span class="line">list1 = [] # 可变类型</span><br><span class="line"></span><br><span class="line">def task1(s, name):</span><br><span class="line">    global m</span><br><span class="line">    while True:</span><br><span class="line">        sleep(s)</span><br><span class="line">        m += 1</span><br><span class="line">        list1.append(str(m)+&#x27;task1&#x27;)</span><br><span class="line">        print(&#x27;This is task1.......&#x27;, os.getpid(), &#x27;-----&#x27;, os.getppid(), name, m, list1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def task2(s, name):</span><br><span class="line">    global m</span><br><span class="line">    while True:</span><br><span class="line">        sleep(s)</span><br><span class="line">        m += 1</span><br><span class="line">        list1.append(str(m)+&#x27;task2&#x27;)</span><br><span class="line">        print(&#x27;This is task2.......&#x27;, os.getpid(), &#x27;-----&#x27;, os.getppid(), name, m, list1)</span><br><span class="line"></span><br><span class="line"># number = 1</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    print(os.getpid())</span><br><span class="line">    # 子进程</span><br><span class="line">    p = Process(target=task1, name=&#x27;task1&#x27;, args=(1, &#x27;aa&#x27;))</span><br><span class="line">    p.start()</span><br><span class="line">    # print(p.name)</span><br><span class="line">    p1 = Process(target=task2, name=&#x27;task2&#x27;, args=(2, &#x27;bb&#x27;))</span><br><span class="line">    p1.start()</span><br><span class="line">    # print(p1.name)</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        sleep(1)</span><br><span class="line">        m += 1</span><br><span class="line">        print(&#x27;-----------&gt;main:&#x27;, m)</span><br><span class="line"></span><br><span class="line">    # while True:</span><br><span class="line">    #     number += 1</span><br><span class="line">    #     sleep(0.2)</span><br><span class="line">    #     if number == 100:</span><br><span class="line">    #         p.terminate()</span><br><span class="line">    #         p1.terminate()</span><br><span class="line">    #         break</span><br><span class="line">    #     else:</span><br><span class="line">    #         print(&#x27;-----------------&gt;number:&#x27;, number)</span><br><span class="line"></span><br><span class="line">    print(&#x27;----------------------------------&#x27;)</span><br><span class="line">    print(&#x27;***********************************&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="自定义进程-py"><a href="#自定义进程-py" class="headerlink" title="自定义进程.py"></a>自定义进程.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">from multiprocessing import Process</span><br><span class="line">from time import sleep</span><br><span class="line"></span><br><span class="line">class MyProcess(Process):</span><br><span class="line"></span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        super(MyProcess, self).__init__()</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # 重写run方法</span><br><span class="line">    def run(self):</span><br><span class="line">        n = 1</span><br><span class="line">        while True:</span><br><span class="line">            print(&#x27;&#123;&#125;-------------&gt;self defined process, n:&#123;&#125;\n&#x27;.format(n, self.name))</span><br><span class="line">            n += 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    p = MyProcess(&#x27;xiaoming&#x27;)</span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    p1 = MyProcess(&#x27;xiaohong&#x27;)</span><br><span class="line">    p1.start()</span><br></pre></td></tr></table></figure>

<h1 id="进程池之非阻塞式-py"><a href="#进程池之非阻塞式-py" class="headerlink" title="进程池之非阻塞式.py"></a>进程池之非阻塞式.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">阻塞式：</span><br><span class="line"></span><br><span class="line">非阻塞式：全部添加到队列中，立刻返回，并没有等待其他的进程完毕，但是回调函数是等待任务完成之后才调用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">from multiprocessing import Pool</span><br><span class="line">import time</span><br><span class="line">from random import random</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 非阻塞式进程</span><br><span class="line"></span><br><span class="line">def task(task_name):</span><br><span class="line">    print(&#x27;task begin&#x27;, task_name)</span><br><span class="line">    start = time.time()</span><br><span class="line">    # 使用sleep</span><br><span class="line">    time.sleep(random()*2)</span><br><span class="line">    end = time.time()</span><br><span class="line">    # print(&#x27;elapsed time is &#123;&#125; when task &#123;&#125; complete, &#x27;</span><br><span class="line">    #       &#x27;process ID is &#123;&#125;&#x27;.format((end-start), task_name, os.getpid()))</span><br><span class="line">    return &#x27;elapsed time is &#123;&#125; when task &#123;&#125; complete, &#x27; \</span><br><span class="line">           &#x27;process ID is &#123;&#125;&#x27;.format((end-start), task_name, os.getpid())</span><br><span class="line"></span><br><span class="line">container = []</span><br><span class="line">def callback_func(n):</span><br><span class="line">    container.append(n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    pool = Pool(5)</span><br><span class="line"></span><br><span class="line">    tasks = [&#x27;listen to music&#x27;, &#x27;Enjoin meal&#x27;, &#x27;wash clothes&#x27;,</span><br><span class="line">             &#x27;Play games&#x27;, &#x27;walk&#x27;, &#x27;take care child&#x27;, &#x27;cook&#x27;]</span><br><span class="line">    for task1 in tasks:</span><br><span class="line">        pool.apply_async(task, args=(task1,), callback=callback_func)</span><br><span class="line"></span><br><span class="line">    pool.close() # 添加任务结束</span><br><span class="line">    pool.join() #</span><br><span class="line"></span><br><span class="line">    for c in container:</span><br><span class="line">        print(c)</span><br><span class="line">    print(&#x27;over!!!&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="进程池之阻塞式-py"><a href="#进程池之阻塞式-py" class="headerlink" title="进程池之阻塞式.py"></a>进程池之阻塞式.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">特点：</span><br><span class="line">添加一个任务执行一个，如果一个任务不结束，另一个任务则无法进行</span><br><span class="line"></span><br><span class="line">进程池：</span><br><span class="line">pool = Pool(max) 创建进程池对象</span><br><span class="line">pool.apply() 阻塞式</span><br><span class="line">pool.apply_async() 非阻塞式</span><br><span class="line"></span><br><span class="line">pool.close()</span><br><span class="line">pool.join() 让主进程让步</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">import time</span><br><span class="line">from multiprocessing import Pool</span><br><span class="line">from random import random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def task(task_name):</span><br><span class="line">    print(&#x27;task begin&#x27;, task_name)</span><br><span class="line">    start = time.time()</span><br><span class="line">    # 使用sleep</span><br><span class="line">    time.sleep(random()*2)</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(&#x27;elapsed time is &#123;&#125; when task &#123;&#125; complete, &#x27;</span><br><span class="line">          &#x27;process ID is &#123;&#125;&#x27;.format((end-start), task_name, os.getpid()))</span><br><span class="line">    # return &#x27;elapsed time is &#123;&#125; when task &#123;&#125; complete, &#x27; \</span><br><span class="line">    #        &#x27;process ID is &#123;&#125;&#x27;.format((end-start), task_name, os.getpid())</span><br><span class="line"></span><br><span class="line"># container = []</span><br><span class="line"># def callback_func(n):</span><br><span class="line">#     container.append(n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    pool = Pool(5)</span><br><span class="line">    tasks = [&#x27;listen to music&#x27;, &#x27;Enjoin meal&#x27;, &#x27;wash clothes&#x27;,</span><br><span class="line">             &#x27;Play games&#x27;, &#x27;walk&#x27;, &#x27;take care child&#x27;, &#x27;cook&#x27;]</span><br><span class="line">    for task1 in tasks:</span><br><span class="line">        pool.apply(task, args=(task1,))</span><br><span class="line"></span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br><span class="line"></span><br><span class="line">    print(&#x27;over!!!&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="进程间通信-py"><a href="#进程间通信-py" class="headerlink" title="进程间通信.py"></a>进程间通信.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"># 队列</span><br><span class="line">from multiprocessing import Process</span><br><span class="line">from multiprocessing import Queue</span><br><span class="line"></span><br><span class="line"># q = Queue(5)</span><br><span class="line">#</span><br><span class="line"># q.put(&#x27;A&#x27;)</span><br><span class="line"># q.put(&#x27;B&#x27;)</span><br><span class="line"># q.put(&#x27;C&#x27;)</span><br><span class="line"># q.put(&#x27;D&#x27;)</span><br><span class="line"># q.put(&#x27;E&#x27;)</span><br><span class="line"># print(q.qsize())</span><br><span class="line"># if not q.full(): # 判断队列是否满了  q.empty()--判断队列是否是空的</span><br><span class="line">#     q.put(&#x27;F&#x27;, timeout=3) # put() 如果队列满了，则只能等待，除非有空队列才可添加</span><br><span class="line"># else:</span><br><span class="line">#     print(&#x27;queue full&#x27;)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># # 获取队列的值</span><br><span class="line"># print(q.get(timeout=2))</span><br><span class="line"># print(q.get(timeout=2))</span><br><span class="line"># print(q.get(timeout=2))</span><br><span class="line"># print(q.get(timeout=2))</span><br><span class="line"># print(q.get(timeout=2))</span><br><span class="line"># # print(q.get(timeout=2)) # _queue.Empty</span><br><span class="line">#</span><br><span class="line"># q.put_nowait(&#x27;G&#x27;)</span><br><span class="line"># print(q.get_nowait())</span><br><span class="line">from time import sleep</span><br><span class="line"></span><br><span class="line"># print(&#x27;----------------------------------进程间通信--------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">def download(q):</span><br><span class="line">    images = [&#x27;girl.jpg&#x27;, &#x27;boy.jpg&#x27;, &#x27;man.jpg&#x27;]</span><br><span class="line">    for image in images:</span><br><span class="line">        print(&#x27;downloading: &#x27;, image)</span><br><span class="line">        sleep(0.5)</span><br><span class="line">        q.put(image)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def getfile(q):</span><br><span class="line">    while True:</span><br><span class="line">        try:</span><br><span class="line">            file = q.get(timeout=5)</span><br><span class="line">            print(&#x27;&#123;&#125; save sucess!&#x27;.format(file))</span><br><span class="line"></span><br><span class="line">        except:</span><br><span class="line">            print(&#x27;All file saved complete&#x27;)</span><br><span class="line">            break</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    q = Queue(5)</span><br><span class="line"></span><br><span class="line">    p1 = Process(target=download, args=(q,))</span><br><span class="line">    p2 = Process(target=getfile, args=(q,))</span><br><span class="line"></span><br><span class="line">    p1.start()</span><br><span class="line">    p1.join()</span><br><span class="line"></span><br><span class="line">    p2.start()</span><br><span class="line">    p2.join()</span><br><span class="line"></span><br><span class="line">    print(&#x27;0000000000&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="多线程-py"><a href="#多线程-py" class="headerlink" title="多线程.py"></a>多线程.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"># 线程</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">创建线程：</span><br><span class="line">t = threading.Thread(target=download, name=&#x27;aa&#x27;, args=(1,))</span><br><span class="line">使用线程：</span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line">线程状态：</span><br><span class="line">新建  就绪  运行  阻塞  结束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">线程可以共享全局变量</span><br><span class="line">GIL  全局解释器锁 --&gt; 计算量小的时候默认加锁：线程同步，速度慢，数据安全</span><br><span class="line">                    计算量大的时候释放解释器锁</span><br><span class="line"></span><br><span class="line">线程：耗时操作，爬虫，IO</span><br><span class="line">进程：计算密集型</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">from time import sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># def download(n):</span><br><span class="line">#     images = [&#x27;girl.jpg&#x27;, &#x27;boy.jpg&#x27;, &#x27;man.jpg&#x27;]</span><br><span class="line">#     for image in images:</span><br><span class="line">#         print(&#x27;downloading: &#x27;, image)</span><br><span class="line">#         sleep(n)</span><br><span class="line">#         print(&#x27;&#123;&#125; download complete!&#x27;.format(image))</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># def listenMusic():</span><br><span class="line">#     musics = [&#x27;Wide noodles in big bowl&#x27;, &#x27;Turkey ice cream&#x27;,</span><br><span class="line">#               &#x27;Roast gluten&#x27;, &#x27;Roast steamed bun slices&#x27;]</span><br><span class="line">#     for music in musics:</span><br><span class="line">#         sleep(0.5)</span><br><span class="line">#         print(&#x27;listening &#123;&#125;&#x27;.format(music))</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#</span><br><span class="line">#     # 线程对象</span><br><span class="line">#     t = threading.Thread(target=download, name=&#x27;aa&#x27;, args=(1,))</span><br><span class="line">#     t.start()</span><br><span class="line">#</span><br><span class="line">#     t1 = threading.Thread(target=listenMusic, name=&#x27;aa&#x27;)</span><br><span class="line">#     t1.start()</span><br><span class="line">#</span><br><span class="line">#     n = 1</span><br><span class="line">#     while True:</span><br><span class="line">#         print(n)</span><br><span class="line">#         sleep(1.5)</span><br><span class="line">#         n += 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">n = 0</span><br><span class="line"></span><br><span class="line">def task1():</span><br><span class="line">    global n</span><br><span class="line">    for i in range(10000000):</span><br><span class="line">        n += 1</span><br><span class="line"></span><br><span class="line">    print(&#x27;----&gt;value in task1: &#x27;, n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def task2():</span><br><span class="line">    global n</span><br><span class="line">    for i in range(10000000):</span><br><span class="line">        n += 1</span><br><span class="line"></span><br><span class="line">    print(&#x27;----&gt;value in task2: &#x27;, n)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    th1 = threading.Thread(target=task1)</span><br><span class="line">    th2 = threading.Thread(target=task2)</span><br><span class="line"></span><br><span class="line">    th1.start()</span><br><span class="line">    th2.start()</span><br><span class="line"></span><br><span class="line">    th1.join()</span><br><span class="line">    th2.join()</span><br><span class="line"></span><br><span class="line">    print(&#x27;last print&#x27;, n)</span><br></pre></td></tr></table></figure>

<h1 id="多线程同步-py"><a href="#多线程同步-py" class="headerlink" title="多线程同步.py"></a>多线程同步.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">lock = threading.Lock()</span><br><span class="line"></span><br><span class="line">lock.acquire() # 请求得到锁</span><br><span class="line">lock.release() # 释放锁</span><br><span class="line"></span><br><span class="line">只要锁不释放，其他的进程都无法进入运行状态</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import random</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"></span><br><span class="line">list1 = [0] * 10</span><br><span class="line"></span><br><span class="line">def task1():</span><br><span class="line">    # 获取线程锁，如果已经上锁，则等待锁的释放</span><br><span class="line">    # lock.acquire() # 阻塞</span><br><span class="line">    for i in range(len(list1)):</span><br><span class="line">        list1[i] = 1</span><br><span class="line">        time.sleep(0.5)</span><br><span class="line"></span><br><span class="line">    # lock.release() # 释放锁</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def task2():</span><br><span class="line">    # lock.acquire()</span><br><span class="line">    for i in range(len(list1)):</span><br><span class="line">        print(&#x27;-----&gt;&#x27;, list1[i])</span><br><span class="line">        time.sleep(0.5)</span><br><span class="line">    # lock.release()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    t1 = threading.Thread(target=task1)</span><br><span class="line">    t2 = threading.Thread(target=task2)</span><br><span class="line"></span><br><span class="line">    t2.start()</span><br><span class="line">    t1.start()</span><br><span class="line"></span><br><span class="line">    t2.join()</span><br><span class="line">    t1.join()</span><br><span class="line"></span><br><span class="line">    print(list1)</span><br></pre></td></tr></table></figure>

<h1 id="死锁-py"><a href="#死锁-py" class="headerlink" title="死锁.py"></a>死锁.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">避免死锁：</span><br><span class="line">解决方式：</span><br><span class="line">1.重构</span><br><span class="line">2.使用timeout参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">from threading import Thread, Lock</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">lockA = Lock()</span><br><span class="line">lockB = Lock()</span><br><span class="line"></span><br><span class="line">class MyThread(Thread):</span><br><span class="line">    def run(self): # start()</span><br><span class="line">        if lockA.acquire(): # 如果可以获取到锁则返回True</span><br><span class="line">            print(self.name+&#x27;acquired lock A&#x27;)</span><br><span class="line">            time.sleep(0.1)</span><br><span class="line">            if lockB.acquire(timeout=5):</span><br><span class="line">                print(self.name+&#x27;acquired lock B+A&#x27;)</span><br><span class="line">                lockB.release()</span><br><span class="line">            lockA.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyThread1(Thread):</span><br><span class="line">    # def __init__(self.name):</span><br><span class="line">    #     pass</span><br><span class="line"></span><br><span class="line">    def run(self): # start()</span><br><span class="line">        if lockB.acquire(): # 如果可以获取到锁则返回True</span><br><span class="line">            print(self.name+&#x27;acquired lock B&#x27;) # self.name 继承Thread的属性值</span><br><span class="line">            time.sleep(0.1)</span><br><span class="line">            if lockA.acquire(timeout=5):</span><br><span class="line">                print(self.name+&#x27;acquired lock A+B&#x27;)</span><br><span class="line">                lockA.release()</span><br><span class="line">            lockB.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    t1 = MyThread()</span><br><span class="line">    t2 = MyThread1()</span><br><span class="line"></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br></pre></td></tr></table></figure>

<h1 id="生产者与消费者模式-py"><a href="#生产者与消费者模式-py" class="headerlink" title="生产者与消费者模式.py"></a>生产者与消费者模式.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">生产者与消费者：两个线程之间的通信</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import threading</span><br><span class="line">import queue</span><br><span class="line">import random</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def produce(q):</span><br><span class="line">    i = 0</span><br><span class="line">    while i &lt; 10:</span><br><span class="line">        num = random.randint(1, 100)</span><br><span class="line">        q.put(&quot;producer produce data: %d&quot; % num)</span><br><span class="line">        print(&quot;producer produce data: %d&quot; % num)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        i += 1</span><br><span class="line">    q.put(None)</span><br><span class="line">    # 完成任务</span><br><span class="line">    q.task_done()</span><br><span class="line"></span><br><span class="line">def consume(q):</span><br><span class="line">    while True:</span><br><span class="line">        item = q.get()</span><br><span class="line">        if item is None:</span><br><span class="line">            break</span><br><span class="line">        print(&#x27;consumer acquire: %s&#x27; % item)</span><br><span class="line">        time.sleep(4)</span><br><span class="line">        # 完成任务</span><br><span class="line">        q.task_done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    q = queue.Queue(10)</span><br><span class="line">    arr = []</span><br><span class="line"></span><br><span class="line">    # 创建生产者</span><br><span class="line">    th = threading.Thread(target=produce, args=(q,))</span><br><span class="line">    th.start()</span><br><span class="line"></span><br><span class="line">    # 创建消费者</span><br><span class="line">    tc = threading.Thread(target=consume, args=(q,))</span><br><span class="line">    tc.start()</span><br><span class="line"></span><br><span class="line">    th.join()</span><br><span class="line">    tc.join()</span><br><span class="line">    print(&#x27;END&#x27;)</span><br></pre></td></tr></table></figure>

<h1 id="协程-py"><a href="#协程-py" class="headerlink" title="协程.py"></a>协程.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"># 协程：微线程</span><br><span class="line"># 进程 》线程 》协程</span><br><span class="line"></span><br><span class="line"># Process Thread 生成器完成</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># def task1():</span><br><span class="line">#     for i in range(3):</span><br><span class="line">#         print(&#x27;A&#x27;+ str(i))</span><br><span class="line">#         yield</span><br><span class="line">#         time.sleep(1)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># def task2():</span><br><span class="line">#     for i in range(3):</span><br><span class="line">#         print(&#x27;B&#x27;+ str(i))</span><br><span class="line">#         yield</span><br><span class="line">#         time.sleep(2)</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     g1 = task1()</span><br><span class="line">#     g2 = task2()</span><br><span class="line">#</span><br><span class="line">#     while True:</span><br><span class="line">#         try:</span><br><span class="line">#             next(g1)</span><br><span class="line">#             next(g2)</span><br><span class="line">#         except:</span><br><span class="line">#             break</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">from greenlet._greenlet import greenlet</span><br><span class="line"></span><br><span class="line"># greenlet 完成协程任务</span><br><span class="line">def a():</span><br><span class="line">    for i in range(5):</span><br><span class="line">        print(&#x27;A&#x27;+str(i))</span><br><span class="line">        gb.switch()</span><br><span class="line">        time.sleep(0.1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def b():</span><br><span class="line">    for i in range(5):</span><br><span class="line">        print(&#x27;B&#x27;+str(i))</span><br><span class="line">        gc.switch()</span><br><span class="line">        time.sleep(0.1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def c():</span><br><span class="line">    for i in range(5):</span><br><span class="line">        print(&#x27;C&#x27;+str(i))</span><br><span class="line">        ga.switch()</span><br><span class="line">        time.sleep(0.1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    ga = greenlet(a)</span><br><span class="line">    gb = greenlet(b)</span><br><span class="line">    gc = greenlet(c)</span><br><span class="line"></span><br><span class="line">    ga.switch()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="gevent和猴子补丁-py"><a href="#gevent和猴子补丁-py" class="headerlink" title="gevent和猴子补丁.py"></a>gevent和猴子补丁.py</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">import gevent</span><br><span class="line">from gevent import monkey</span><br><span class="line"></span><br><span class="line">monkey.patch_all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># def a():</span><br><span class="line">#     for i in range(5):</span><br><span class="line">#         print(&#x27;A&#x27;+str(i))</span><br><span class="line">#         time.sleep(0.1)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># def b():</span><br><span class="line">#     for i in range(5):</span><br><span class="line">#         print(&#x27;B&#x27;+str(i))</span><br><span class="line">#         time.sleep(0.1)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># def c():</span><br><span class="line">#     for i in range(5):</span><br><span class="line">#         print(&#x27;C&#x27;+str(i))</span><br><span class="line">#         time.sleep(0.1)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     g1 = gevent.spawn(a)</span><br><span class="line">#     g2 = gevent.spawn(b)</span><br><span class="line">#     g3 = gevent.spawn(c)</span><br><span class="line">#</span><br><span class="line">#     g1.join()</span><br><span class="line">#     g2.join()</span><br><span class="line">#     g3.join()</span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 协程爬虫案例</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line">import urllib.request</span><br><span class="line"></span><br><span class="line">def download(url):</span><br><span class="line">    response = urllib.request.urlopen(url)</span><br><span class="line"></span><br><span class="line">    content = response.read()</span><br><span class="line">    print(&#x27;downloaded data from &#123;&#125;, length is &#123;&#125;&#x27;.format(url, len(content)))</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    urls = [&#x27;http://www.163.com&#x27;, &#x27;http://www.baidu.com&#x27;, &#x27;http://www.qq.com&#x27;]</span><br><span class="line">    g1 = gevent.spawn(download, urls[0])</span><br><span class="line">    g2 = gevent.spawn(download, urls[1])</span><br><span class="line">    g3 = gevent.spawn(download, urls[2])</span><br><span class="line"></span><br><span class="line">    # gevent.joinall(g1, g2, g3) # 类似 g1.join()....</span><br><span class="line">    g1.join()</span><br><span class="line">    g2.join()</span><br><span class="line">    g3.join()</span><br></pre></td></tr></table></figure>

<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="类方法-py"><a href="#类方法-py" class="headerlink" title="类方法.py"></a>类方法.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">特点：</span><br><span class="line">    1. 定义需要依赖装饰器@classmethod</span><br><span class="line">    2. 类方法中参数不是一个对象，而是类</span><br><span class="line">        print(cls) --&gt; &lt;class &#x27;__main__.Dog&#x27;&gt;</span><br><span class="line">    3. 类方法中只可以使用类属性，不能使用对象属性</span><br><span class="line">    4. 在类方法中不能使用普通方法</span><br><span class="line"></span><br><span class="line">类方法作用：</span><br><span class="line">    因为只能访问类属性和类方法，所以可以在对象创建之前完成一些动作（功能）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">静态方法：</span><br><span class="line">    类似类方法</span><br><span class="line">    1. 需要用装饰器@staticmethod</span><br><span class="line">    2. 静态方法无需传递参数 &lt;cls,self&gt;</span><br><span class="line">    3. 只能访问类的属性和方法，对象的属性和方法是无法访问的</span><br><span class="line">    4. 加载时机同类方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">类方法与静态方法的不同之处：</span><br><span class="line">1. 装饰器不同</span><br><span class="line">2. 类方法是用参数的，静态方法没有参数</span><br><span class="line"></span><br><span class="line">相同之处：</span><br><span class="line">1.只能访问类的属性和方法，对象的属性和方法是无法访问的</span><br><span class="line">2.都可以通过类名调用访问</span><br><span class="line">3.都不依赖于对象，因此可以在创建对象之前调用</span><br><span class="line"></span><br><span class="line">普通方法与前两者的区别：</span><br><span class="line">    1.没有装饰器</span><br><span class="line">    2.普通方法永远依赖对象，每个普通方法都有一个self</span><br><span class="line">    3.只有先创建对象才可以调用普通方法</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">class Dog():</span><br><span class="line">    def __init__(self, nickname):</span><br><span class="line">        self.nickname = nickname</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        print(&#x27;&#123;&#125; run back and forth in the yard&#x27;.format(self.nickname))</span><br><span class="line"></span><br><span class="line">    def eat(self):</span><br><span class="line">        print(&#x27;Enjoy meal.....&#x27;)</span><br><span class="line">        self.run()  # 在类中，调用本类里面的方法，需要通过self.方法名()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def test(cls):</span><br><span class="line">        print(cls)</span><br><span class="line">        # print(self.nickname)</span><br><span class="line">        # print(cls.nickname) # 访问对象属性则报错</span><br><span class="line">        print(&#x27;-------------&#x27;)</span><br><span class="line">        # self.run() # 不能使用普通方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dog.test()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">class Person:</span><br><span class="line">    age = 18</span><br><span class="line">    __age = 28</span><br><span class="line"></span><br><span class="line">    def show(self):</span><br><span class="line">        print(&#x27;-----------&gt;&#x27;, Person.age)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def update_age(cls):</span><br><span class="line"></span><br><span class="line">        cls.__age = 20</span><br><span class="line">        print(&#x27;-----------&gt;class func&#x27;)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def show_age(cls):</span><br><span class="line">        print(&#x27;updated age is &#x27;, cls.__age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def test():</span><br><span class="line">        print(&#x27;----------&gt;static func&#x27;)</span><br><span class="line">        # print(self.name) 语法错误</span><br><span class="line">        print(Person.__age)</span><br><span class="line"></span><br><span class="line"># print(Person.__age) # 私有属性不能在类外面使用</span><br><span class="line">Person.update_age()</span><br><span class="line">Person.show_age()</span><br><span class="line">Person.test()</span><br><span class="line">print(&#x27;-----------------------&#x27;)</span><br><span class="line"></span><br><span class="line">p = Person()</span><br><span class="line">p.age = p.age + 1</span><br><span class="line">print(p.age)</span><br><span class="line">p.show()</span><br><span class="line">Person.age += 1</span><br><span class="line">print(Person.age)</span><br><span class="line">p.show()</span><br></pre></td></tr></table></figure>

<h2 id="面向对象案例-1-py"><a href="#面向对象案例-1-py" class="headerlink" title="面向对象案例-1.py"></a>面向对象案例-1.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 猫</span><br><span class="line">class Cat:</span><br><span class="line">    type = &#x27;cat&#x27;</span><br><span class="line"></span><br><span class="line">    # 通过__init__初始化特征</span><br><span class="line">    def __init__(self, nickname, age, color):</span><br><span class="line">        self.nickname = nickname</span><br><span class="line">        self.age = age</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line">    def eat(self, food):</span><br><span class="line">        print(&#x27;&#123;&#125; likes eating &#123;&#125;&#x27;.format(self.nickname, food))</span><br><span class="line"></span><br><span class="line">    def catch_mouse(self, color, weight):</span><br><span class="line">        print(&#x27;&#123;&#125; caught one &#123;&#125;kg &#123;&#125; mouse&#x27;.format(self.nickname, weight, color))</span><br><span class="line"></span><br><span class="line">    def sleep(self, hour):</span><br><span class="line">        if hour &lt; 5:</span><br><span class="line">            print(&#x27;Kitty, continue sleeping&#x27;)</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;hurry up, catch a mouse&#x27;)</span><br><span class="line"></span><br><span class="line">    def show(self):</span><br><span class="line">        print(&#x27;This cat\&#x27;s detail&#x27;)</span><br><span class="line">        print(self.nickname, self.age, self.color)</span><br><span class="line"></span><br><span class="line"># 创建对象</span><br><span class="line">cat1 = Cat(&#x27;huahua&#x27;, 2, &#x27;grey&#x27;)</span><br><span class="line"></span><br><span class="line"># 通过对象调用方法</span><br><span class="line">cat1.catch_mouse(&#x27;black&#x27;, 2)</span><br><span class="line"></span><br><span class="line">cat1.sleep(8)</span><br><span class="line"></span><br><span class="line">cat1.eat(&#x27;little fish&#x27;)</span><br><span class="line"></span><br><span class="line">cat1.show()</span><br></pre></td></tr></table></figure>

<h2 id="魔术方法-py"><a href="#魔术方法-py" class="headerlink" title="魔术方法.py"></a>魔术方法.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 魔术方法</span><br><span class="line"># __init__:初始化魔术方法</span><br><span class="line"># 触发时机：初始化对象时触发（不是实例化触发，但是和实例化在一个操作中）</span><br><span class="line"></span><br><span class="line"># __new__: 实例化的魔术方法</span><br><span class="line"># 触发时机：在实例化时触发  # 作用：开辟空间</span><br><span class="line"></span><br><span class="line"># __call__: 对象调用方法</span><br><span class="line"># 触发时机：将对象当成函数使用的时候，会默认调用此函数中内容</span><br><span class="line"></span><br><span class="line"># __del__: delete的缩写，析构魔术方法</span><br><span class="line"># 触发时机：当对象没有使用（没有任何变量引用）的时候触发  # 作用：没有指针引用的时候使用</span><br><span class="line">1.对象赋值</span><br><span class="line">p = Person()</span><br><span class="line">p1 = p</span><br><span class="line">说明：p和p1共同指向同一个地址</span><br><span class="line">2.删除地址的引用</span><br><span class="line">del p1 删除p1对地址的引用</span><br><span class="line">3.查看对地址的引用次数：</span><br><span class="line">import sys</span><br><span class="line">sys.getrefcount(p)</span><br><span class="line">4.当一块空间没有任何引用，默认执行__del__</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># __str__</span><br><span class="line"># 触发时机：打印对象名 自动触发去调用__str__里面的内容</span><br><span class="line"># 注意：一定要在__str__方法中添加return, return后面是打印对象是看到的内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">class Person:</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        print(&#x27;---------------&gt;init&#x27;, self)</span><br><span class="line">        self.name = name</span><br><span class="line">        print(name)</span><br><span class="line">        </span><br><span class="line">    def __new__(cls, *args, **kwargs):</span><br><span class="line">        print(&#x27;---------------&gt;new&#x27;)</span><br><span class="line">        position = object.__new__(cls)</span><br><span class="line">        print(position)</span><br><span class="line">        return position</span><br><span class="line">        # super(Person, cls).__new__(cls, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    def __call__(self, *args, **kwargs):</span><br><span class="line">        print(&#x27;---------------------&gt;call&#x27;)</span><br><span class="line">        print(&#x27;parameter is&#x27;, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;This is str magic func&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def __del__(self):</span><br><span class="line">        print(&#x27;---------------&gt;del&#x27;)</span><br><span class="line"></span><br><span class="line">p = Person(&#x27;jack&#x27;)</span><br><span class="line">print(p)</span><br><span class="line">print(p.name)</span><br><span class="line"></span><br><span class="line">p(&#x27;hello&#x27;)</span><br><span class="line"></span><br><span class="line">p1 = p</span><br><span class="line">p2 = p</span><br><span class="line">print(p1.name)</span><br><span class="line">print(p2.name)</span><br><span class="line"></span><br><span class="line">p1.name = &#x27;Tom&#x27;</span><br><span class="line">print(p.name)</span><br><span class="line">print(p2.name)</span><br><span class="line"></span><br><span class="line">del p2</span><br><span class="line">print(&#x27;print after delete p2&#x27;, p.name)</span><br><span class="line">print(sys.getrefcount(p))</span><br><span class="line"></span><br><span class="line">del p1</span><br><span class="line">print(&#x27;print after delete p1&#x27;, p.name)</span><br><span class="line">print(sys.getrefcount(p))</span><br><span class="line"></span><br><span class="line"># del p</span><br><span class="line"># print(&#x27;print after delete p&#x27;, p.name)</span><br><span class="line"># print(sys.getrefcount(p))</span><br><span class="line"></span><br><span class="line">print(sys.getrefcount(p))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------__str__-----------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">class Str_Magic_func:</span><br><span class="line">    def __init__(self, name, age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;name is &#x27; + self.name + &#x27;, age is &#x27; + str(self.age)</span><br><span class="line"></span><br><span class="line">p = Str_Magic_func(&#x27;Tom&#x27;, 18)</span><br><span class="line">print(p)</span><br></pre></td></tr></table></figure>

<h2 id="私有化-py"><a href="#私有化-py" class="headerlink" title="私有化.py"></a>私有化.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 封装：1.私有化属性， 2.定义公有的set和get方法</span><br><span class="line"># 好处：</span><br><span class="line"># 1.隐藏属性不被外界随意修改</span><br><span class="line"># 2.也可以通过函数修改</span><br><span class="line">#    def setXXX(self, xxx)</span><br><span class="line">        3.筛选赋值的内容</span><br><span class="line">            if xxx是否符合条件</span><br><span class="line">                赋值</span><br><span class="line">            else:</span><br><span class="line">                不赋值</span><br><span class="line">3.如果想获取具体的某一个属性</span><br><span class="line">使用get函数</span><br><span class="line">    def getXXX(self):</span><br><span class="line">        return self.__xxx</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">class Student:</span><br><span class="line">    # __age = 19 # 私有属性</span><br><span class="line"></span><br><span class="line">    def __init__(self, name, age):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line">        self.__score = 59</span><br><span class="line"></span><br><span class="line">    # 定义公有set和get方法</span><br><span class="line">    # set是赋值</span><br><span class="line">    def setAge(self, age):</span><br><span class="line">        if age &gt; 0 and age &lt;= 120:</span><br><span class="line">            self.__age = age</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;Age is not in defined range&#x27;)</span><br><span class="line"></span><br><span class="line">    # get是取值</span><br><span class="line">    def getAge(self):</span><br><span class="line">        return self.__age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # 修改名字的时候，长度必须是6位</span><br><span class="line">    def setName(self, name):</span><br><span class="line">        if len(name) == 6:</span><br><span class="line">            self.__name = name</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;name is not 6 characters&#x27;)</span><br><span class="line"></span><br><span class="line">    def getName(self):</span><br><span class="line">        return self.__name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;name &#123;&#125;, age &#123;&#125;, score &#123;&#125;&#x27;.format(self.__name, self.__age, self.__score)</span><br><span class="line"></span><br><span class="line">    # attribute: setName, getName, __init__, __str__</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = Student(&#x27;jack&#x27;, 18)</span><br><span class="line">print(s)</span><br><span class="line">s.age = 20</span><br><span class="line">s.__score = 60</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------------------------------------------&#x27;)</span><br><span class="line">print(dir(Student)) # dir() 列出可调用的属性</span><br><span class="line">print(dir(s))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------------------------------------------&#x27;)</span><br><span class="line">print(s._Student__age)</span><br><span class="line">print(s.__dir__())</span><br><span class="line">print(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------------------------------------------&#x27;)</span><br><span class="line">s.setName(&#x27;xiaopeng&#x27;)</span><br><span class="line"></span><br><span class="line"># 取出年龄</span><br><span class="line">print(s.getAge())</span><br></pre></td></tr></table></figure>

<h2 id="property装饰器-py"><a href="#property装饰器-py" class="headerlink" title="property装饰器.py"></a>property装饰器.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Student:</span><br><span class="line">    # __age = 19 # 私有属性</span><br><span class="line"></span><br><span class="line">    def __init__(self, name, age):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line">        self.__score = 59</span><br><span class="line"></span><br><span class="line">    # 先定义用于取值的函数</span><br><span class="line">    @property</span><br><span class="line">    def age(self):</span><br><span class="line">        return self.__age</span><br><span class="line"></span><br><span class="line">    # 再定义用于赋值的函数</span><br><span class="line">    @age.setter</span><br><span class="line">    def age(self, age):</span><br><span class="line">        if age &gt; 0 and age &lt; 100:</span><br><span class="line">            self.__age = age</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;age is not in defined range&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # def setAge(self, age):</span><br><span class="line">    #     if age &gt; 0 and age &lt; 100:</span><br><span class="line">    #         self.__age = age</span><br><span class="line">    #     else:</span><br><span class="line">    #         print(&#x27;age is not in defined range&#x27;)</span><br><span class="line">    #</span><br><span class="line">    # def getAge(self):</span><br><span class="line">    #     return self.__age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;name &#123;&#125;, age &#123;&#125;, score &#123;&#125;&#x27;.format(self.__name, self.__age, self.__score)</span><br><span class="line"></span><br><span class="line">s = Student(&#x27;peng&#x27;, 20)</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line">s.name = &#x27;xiaopeng&#x27;</span><br><span class="line">print(s.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s.age = 130</span><br><span class="line">print(s.age)</span><br><span class="line">print(s.__dir__())</span><br><span class="line"></span><br><span class="line"># # 私有化赋值</span><br><span class="line"># s.setAge(30)</span><br><span class="line"># print(s.getAge())</span><br></pre></td></tr></table></figure>

<h2 id="关联关系-has-a-py"><a href="#关联关系-has-a-py" class="headerlink" title="关联关系-has a.py"></a>关联关系-has a.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"># 继承：is a, has a</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">知识点</span><br><span class="line">1. has a</span><br><span class="line">    一个类中使用了另外一种自定义的类型</span><br><span class="line"></span><br><span class="line">    student使用computer</span><br><span class="line"></span><br><span class="line">2. 类型</span><br><span class="line">    系统类型</span><br><span class="line">    str  int  float...</span><br><span class="line">    自定义类型</span><br><span class="line">        自定义的类都可以将其当成一种类型</span><br><span class="line">        s = Student()</span><br><span class="line">        s是Student类型的对象</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">class Road:</span><br><span class="line">    def __init__(self, name, len):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.len = len</span><br><span class="line"></span><br><span class="line">class Car:</span><br><span class="line">    def __init__(self, brand, speed):</span><br><span class="line">        self.brand = brand</span><br><span class="line">        self.speed = speed</span><br><span class="line"></span><br><span class="line">    def get_time(self, road):  # road = r  road 与 r 指向同一地址，属于同一个对象</span><br><span class="line">        ran_time = random.randint(1, 10)</span><br><span class="line">        msg = &#x27;&#123;&#125; brand car already ran &#123;&#125; hours on &#123;&#125; with &#123;&#125; speed&#x27; \</span><br><span class="line">              &#x27;&#x27;.format(self.brand, ran_time, road.name, self.speed)</span><br><span class="line">        print(msg)</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;brand &#123;&#125;, speed &#123;&#125;&#x27;.format(self.brand, self.speed)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r = Road(&#x27;JingZang highway&#x27;, 12000)</span><br><span class="line">r.name = &#x27;Jingha highway&#x27;</span><br><span class="line">audi = Car(&#x27;audi&#x27;, 120)</span><br><span class="line"></span><br><span class="line">print(audi)</span><br><span class="line"></span><br><span class="line">audi.get_time(r)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># student, book, computer</span><br><span class="line"></span><br><span class="line">class Computer:</span><br><span class="line">    def __init__(self, brand, type, color):</span><br><span class="line">        self.brand = brand</span><br><span class="line">        self.type = type</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line">    def online(self):</span><br><span class="line">        print(&#x27;Surfing online in computer&#x27;)</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.brand+&#x27;----&#x27;+self.type+&#x27;----&#x27;+self.color</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Book:</span><br><span class="line">    def __init__(self, bname, author, number):</span><br><span class="line">        self.bname = bname</span><br><span class="line">        self.author = author</span><br><span class="line">        self.number = number</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.bname+&#x27;---&#x27;+self.author+&#x27;---&#x27;+str(self.number)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Student:</span><br><span class="line"></span><br><span class="line">    def __init__(self, name, computer, book):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.computer = computer</span><br><span class="line">        self.books = []</span><br><span class="line">        self.books.append(book)</span><br><span class="line"></span><br><span class="line">    def borrow_book(self, book):</span><br><span class="line">        for book1 in self.books:</span><br><span class="line">            if book1.bname == book.bname:</span><br><span class="line">                print(&#x27;Already borrow the book&#x27;)</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                # 将参数book添加到列表中</span><br><span class="line">                self.books.append(book)</span><br><span class="line">                print(&#x27;Borrow complete!&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def show_book(self):</span><br><span class="line">        for book in self.books: # book就是一个book对象</span><br><span class="line">            print(book.bname)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name+&#x27;---&#x27;+str(self.computer)+&#x27;---&#x27;+str(self.books)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">computer = Computer(&#x27;mac&#x27;, &#x27;mac pro2018&#x27;, &#x27;deep grey&#x27;)</span><br><span class="line"></span><br><span class="line">book = Book(&#x27;Time Raiders&#x27;, &#x27;Uncle Three&#x27;, 10)</span><br><span class="line"></span><br><span class="line">stu = Student(&#x27;songsong&#x27;, computer, book)</span><br><span class="line">print(stu)</span><br><span class="line"></span><br><span class="line"># 查看借了哪些书</span><br><span class="line">stu.show_book()</span><br><span class="line"></span><br><span class="line">book1 = Book(&#x27;Ghost Blows Out the Light&#x27;, &#x27;blogging site&#x27;, 8)</span><br><span class="line">stu.borrow_book(book1)</span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------------------------------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">stu.show_book()</span><br></pre></td></tr></table></figure>

<h2 id="继承关系—is-a-py"><a href="#继承关系—is-a-py" class="headerlink" title="继承关系—is a.py"></a>继承关系—is a.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"># is a   base class  父类  基类</span><br><span class="line"># Exception</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">继承：</span><br><span class="line">    Student, Employee, Doctor --&gt; 都属于Person类</span><br><span class="line">    相同代码 --&gt; 代码冗余，可读性不高</span><br><span class="line"></span><br><span class="line">    将相同代码提取 --&gt; Person类</span><br><span class="line">        Student, Employee, Doctor --&gt; 继承Person</span><br><span class="line"></span><br><span class="line">        class Student(Person):</span><br><span class="line">            pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">    1.如果类中不定义__init__，调用父类super class的__init__</span><br><span class="line">    2.如果类继承父类也需要定义自己的__init__，就需要在当前类的__init__中调用一下父类__init__</span><br><span class="line">    3.如何调用父类__init__(参数)</span><br><span class="line">        super().__init__(参数)</span><br><span class="line">        super(类名，对象).__init__(参数)</span><br><span class="line">    4.如果父类有eat()，子类也定义一个eat()方法，默认搜索的原则：先找当前类，再找父类</span><br><span class="line">        s.eat()</span><br><span class="line">        override: 覆写</span><br><span class="line">        父类提供的方法不能满足子类的需求，就需要在子类中定义一个同名的方法，这种行为就叫做重写</span><br><span class="line"></span><br><span class="line">    5.子类的方法中也可以调用父类的方法：</span><br><span class="line">        super().方法名(参数)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">class Person:</span><br><span class="line">    def __init__(self, name, age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def eat(self):</span><br><span class="line">        print(self.name + &#x27;eating...&#x27;)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        print(self.name + &#x27;running...&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Student(Person):</span><br><span class="line">    # def __init__(self, name):</span><br><span class="line">    #     print(&#x27;--------------&gt;student的init&#x27;)</span><br><span class="line">    #     # 如何调用父类__init__</span><br><span class="line">    #     super().__init__(name)  # super() 表示父类对象</span><br><span class="line">    def __init__(self, name, age, clazz):</span><br><span class="line">        super().__init__(name, age)</span><br><span class="line">        self.clazz = clazz</span><br><span class="line"></span><br><span class="line">    def study(self, course):</span><br><span class="line">        print(&#x27;&#123;&#125; is studying &#123;&#125; course&#x27;.format(self.name, course))</span><br><span class="line"></span><br><span class="line">    def eat(self, food):</span><br><span class="line">        super().eat()</span><br><span class="line">        print(self.name + &#x27;eating...like eating &#x27;+food)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Employee(Person):</span><br><span class="line">    def __init__(self, name, age, salary, manager):</span><br><span class="line">        super().__init__(name, age)</span><br><span class="line">        self.salary = salary</span><br><span class="line">        self.manager = manager</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Doctor(Person):</span><br><span class="line">    def __init__(self, name, age, patients):</span><br><span class="line">        super(Doctor, self).__init__(name, age)</span><br><span class="line">        self.patients = patients</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = Student(&#x27;jack&#x27;, 18, &#x27;python1905&#x27;)</span><br><span class="line">s.run()</span><br><span class="line">s.study(&#x27;python basic&#x27;)</span><br><span class="line">s.eat(&#x27;Manchu Han Imperial Feast&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">e = Employee(&#x27;Tom&#x27;, 23, 10000, &#x27;king&#x27;)</span><br><span class="line">e.run()</span><br><span class="line"></span><br><span class="line">lists = [&#x27;zhangsan&#x27;, &#x27;lisi&#x27;, &#x27;wangwu&#x27;, &#x27;zhaoliu&#x27;]</span><br><span class="line">d = Doctor(&#x27;lucy&#x27;, 30, lists)</span><br><span class="line">d.run()</span><br><span class="line"></span><br><span class="line"># e = Employee(&#x27;lily&#x27;)</span><br><span class="line"># e.run()</span><br><span class="line"># d = Doctor(&#x27;Tom&#x27;)</span><br><span class="line"># d.run()</span><br></pre></td></tr></table></figure>

<h2 id="继承练习-工资管理系统-py"><a href="#继承练习-工资管理系统-py" class="headerlink" title="继承练习-工资管理系统.py"></a>继承练习-工资管理系统.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">class Person:</span><br><span class="line">    def __init__(self, no, name, salary):</span><br><span class="line">        self.no = no</span><br><span class="line">        self.name = name</span><br><span class="line">        self.salary = salary</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        msg = &#x27;employee number: &#123;&#125;, &#x27; \</span><br><span class="line">              &#x27;name: &#123;&#125;, salary for this month: &#123;&#125;&#x27;.format(self.no, self.name, self.salary)</span><br><span class="line"></span><br><span class="line">        return msg</span><br><span class="line"></span><br><span class="line">    def getSalary(self):</span><br><span class="line">        return self.salary</span><br><span class="line"></span><br><span class="line">class Worker(Person):</span><br><span class="line">    def __init__(self, no, name, salary, hours, per_hour):</span><br><span class="line">        super().__init__(no, name, salary)</span><br><span class="line">        self.hours = hours</span><br><span class="line">        self.per_hour = per_hour</span><br><span class="line"></span><br><span class="line">    def getSalary(self):</span><br><span class="line">        money = self.hours * self.per_hour</span><br><span class="line">        self.salary += money</span><br><span class="line">        return self.salary</span><br><span class="line"></span><br><span class="line">class Salesman(Person):</span><br><span class="line">    def __init__(self, no, name, salary, salemoney, percent):</span><br><span class="line">        super().__init__(no, name, salary)</span><br><span class="line">        self.salemoney = salemoney</span><br><span class="line">        self.percent = percent</span><br><span class="line"></span><br><span class="line">    def getSalary(self):</span><br><span class="line">        money = self.salemoney * self.percent</span><br><span class="line">        self.salary += money</span><br><span class="line">        return self.salary</span><br><span class="line"></span><br><span class="line">w = Worker(&#x27;001&#x27;, &#x27;king&#x27;, 2000, 160, 50)</span><br><span class="line">s = w.getSalary()</span><br><span class="line">print(&#x27;salary per month:&#x27;, s)</span><br><span class="line">print(w)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">saler = Salesman(&#x27;002&#x27;, &#x27;lucy&#x27;, 5000, 5000000, 0.003)</span><br><span class="line">s = saler.getSalary()</span><br><span class="line">print(&#x27;salary per month:&#x27;, s)</span><br><span class="line">print(saler)</span><br></pre></td></tr></table></figure>

<h2 id="多重继承与MRO-9-py"><a href="#多重继承与MRO-9-py" class="headerlink" title="多重继承与MRO-9.py"></a>多重继承与MRO-9.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"># class Person:</span><br><span class="line">#     def __init__(self, name):</span><br><span class="line">#         self.name = name</span><br><span class="line">#</span><br><span class="line">#     def eat(self):</span><br><span class="line">#         print(&#x27;-----------&gt;eat1&#x27;)</span><br><span class="line">#</span><br><span class="line">#     def eat(self, food):</span><br><span class="line">#         print(&#x27;-------------&gt;eat&#x27;, food)</span><br><span class="line">#</span><br><span class="line"># p = Person(&#x27;jack&#x27;)</span><br><span class="line"># p.eat(&#x27;lion\&#x27;s head&#x27;)</span><br><span class="line"></span><br><span class="line">class Base:</span><br><span class="line">    def test(self):</span><br><span class="line"></span><br><span class="line">        print(&#x27;------------&gt;Base&#x27;)</span><br><span class="line"></span><br><span class="line">class A(Base):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&#x27;------------&gt;AAAAAAAAAAAAAAA&#x27;)</span><br><span class="line"></span><br><span class="line">class B(Base):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&#x27;------------&gt;BBBBBBBBBBBBBBB&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class C(Base):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&#x27;-------------&gt;CCCCCCCCCCCCCC&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class D(A,B,C):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d = D()</span><br><span class="line">d.test()</span><br><span class="line"></span><br><span class="line">import inspect</span><br><span class="line"></span><br><span class="line">print(inspect.getmro(D))</span><br><span class="line">print(D.__mro__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">python允许多继承</span><br><span class="line">def 子类(父类1，父类2，...):</span><br><span class="line">    pass</span><br><span class="line">    </span><br><span class="line">如果父类中有相同名称方法，搜索顺序：</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 多继承的搜索顺序：经典类，新式类</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># python2 --&gt; 经典类：从左至右，深度优先</span><br><span class="line"># 新式类：广度优先</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class P1(object):</span><br><span class="line">    def foo(self):</span><br><span class="line">        print(&#x27;p1--foo&#x27;)</span><br><span class="line">    def bar(self):</span><br><span class="line">        print(&#x27;p1--bar&#x27;)</span><br><span class="line"></span><br><span class="line">class P2(object):</span><br><span class="line">    def foo(self):</span><br><span class="line">        print(&#x27;p2--foo&#x27;)</span><br><span class="line"></span><br><span class="line">class C1(P1,P2):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class C2(P1, P2):</span><br><span class="line">    def bar(self):</span><br><span class="line">        print(&#x27;c2----bar&#x27;)</span><br><span class="line"></span><br><span class="line">class D(C1, C2):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">d = D()</span><br><span class="line">print(D.__mro__)</span><br><span class="line">d.foo()</span><br><span class="line">d.bar()</span><br></pre></td></tr></table></figure>

<h2 id="多态-py"><a href="#多态-py" class="headerlink" title="多态.py"></a>多态.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 面向对象 --&gt; 封装(私有化)，继承，多态</span><br><span class="line"></span><br><span class="line">class Person:</span><br><span class="line"></span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    def feed_pet(self, pet):</span><br><span class="line"></span><br><span class="line">        # isinstance(obj, 类) --&gt; 判断obj是不是类的对象或者判断obj是不是该类子类的对象</span><br><span class="line">        if isinstance(pet, Pet): # 形参pet既可以接收cat对象，也可以接收dog对象，</span><br><span class="line">            # 还可以接收tiger对象(tiger不是Pet的子类也能被接收)</span><br><span class="line">            print(&#x27;&#123;&#125; likes feed pet &#123;&#125;, &#x27;</span><br><span class="line">                  &#x27;nickname is &#123;&#125;&#x27;.format(self.name, pet.role, pet.nickname))</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;not pet type.....&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Pet:</span><br><span class="line">    role = &#x27;Pet&#x27;</span><br><span class="line"></span><br><span class="line">    def __init__(self, nickname, age):</span><br><span class="line">        self.nickname = nickname</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def show(self):</span><br><span class="line">        print(&#x27;nickname: &#123;&#125;, age: &#123;&#125;&#x27;.format(self.nickname, self.age))</span><br><span class="line"></span><br><span class="line">class Cat(Pet):</span><br><span class="line">    role = &#x27;cat&#x27;</span><br><span class="line">    def catch_mouse(self):</span><br><span class="line">        print(&#x27;catch mouse.....&#x27;)</span><br><span class="line"></span><br><span class="line">class Dog(Pet):</span><br><span class="line">    role = &#x27;dog&#x27;</span><br><span class="line">    def watch_house(self):</span><br><span class="line">        print(&#x27;watch house master....&#x27;)</span><br><span class="line"></span><br><span class="line">class Tiger:</span><br><span class="line">    def eat(self):</span><br><span class="line">        print(&#x27;horrible, able to eat human...&#x27;)</span><br><span class="line"></span><br><span class="line">cat = Cat(&#x27;huahua&#x27;, 2)</span><br><span class="line">dog = Dog(&#x27;dahuang&#x27;, 4)</span><br><span class="line">tiger = Tiger()</span><br><span class="line"></span><br><span class="line">person = Person(&#x27;dawei&#x27;)</span><br><span class="line">person.feed_pet(cat)</span><br><span class="line">person = Person(&#x27;xiaopeng&#x27;)</span><br><span class="line">person.feed_pet(tiger)</span><br></pre></td></tr></table></figure>

<h2 id="singleton-单例模式-py"><a href="#singleton-单例模式-py" class="headerlink" title="singleton-单例模式.py"></a>singleton-单例模式.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 单例模式：</span><br><span class="line"># 开发模式：单例模式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Singleton:</span><br><span class="line">    # 私有化  单例的地址就存在于__instance</span><br><span class="line">    __instance = None</span><br><span class="line"></span><br><span class="line">    # 重写__new__</span><br><span class="line">    def __new__(cls):</span><br><span class="line">        print(&#x27;----------————__new__&#x27;)</span><br><span class="line"></span><br><span class="line">        if cls.__instance is None:</span><br><span class="line">            print(&#x27;--------1&#x27;)</span><br><span class="line">            cls.__instance = object.__new__(cls)</span><br><span class="line">            return cls.__instance</span><br><span class="line"></span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;---------2&#x27;)</span><br><span class="line">            return cls.__instance</span><br><span class="line"></span><br><span class="line">s = Singleton()</span><br><span class="line">s1 = Singleton()</span><br><span class="line">print(dir(Singleton))</span><br><span class="line">print(s)</span><br><span class="line">print(s1)</span><br></pre></td></tr></table></figure>

<h2 id="calculate-py"><a href="#calculate-py" class="headerlink" title="calculate.py"></a>calculate.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">number = 100</span><br><span class="line">name = &#x27;calculation&#x27;</span><br><span class="line"></span><br><span class="line">def add(*args):</span><br><span class="line">    if len(args) &gt; 1:</span><br><span class="line">        sum = 0</span><br><span class="line">        for i in args:</span><br><span class="line">            sum += i</span><br><span class="line"></span><br><span class="line">        return sum</span><br><span class="line"></span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;require 2 arguments at minimum...&#x27;)</span><br><span class="line">        return 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def minus(*args):</span><br><span class="line">    if len(args) &gt; 1:</span><br><span class="line">        m = 0</span><br><span class="line">        for i in args:</span><br><span class="line">            m -= i</span><br><span class="line"></span><br><span class="line">        return m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;require 2 arguments at minimum...&#x27;)</span><br><span class="line">        return 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def multiply(*args):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def divide(*args):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Calculate:</span><br><span class="line">    def __init__(self, num):</span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    def test(self):</span><br><span class="line">        print(&#x27;calculating by using Calculate...&#x27;)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def test1(cls):</span><br><span class="line">        print(&#x27;------------class method in Calculate&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test():</span><br><span class="line">    print(&#x27;This is test.....&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;__name__:&#x27;, __name__)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>

<h2 id="模块的导入和使用-py"><a href="#模块的导入和使用-py" class="headerlink" title="模块的导入和使用.py"></a>模块的导入和使用.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">1.自定义模块</span><br><span class="line">2.使用系统的一些模块</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果不希望模块中部分内容进行调用，可以用__name__</span><br><span class="line">在本模块内__name__的值为：__main__</span><br><span class="line">在其他模块中通过导入的方式调用时，__name__的值为：模块名</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">list1 = [4, 2, 7, 8, 9]</span><br><span class="line"></span><br><span class="line"># 导入模块</span><br><span class="line"># import calculate</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># # 使用模块中的函数  模块名.变量  模块名.函数  模块名.类</span><br><span class="line"># result = calculate.add(*list1)</span><br><span class="line"># print(result)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># # 使用模块变量</span><br><span class="line"># print(calculate.number)</span><br><span class="line">#</span><br><span class="line"># # 使用模块中的类</span><br><span class="line">#</span><br><span class="line"># cal = calculate.Calculate(88)</span><br><span class="line"># cal.test()</span><br><span class="line"># cal.test1()</span><br><span class="line"># calculate.Calculate.test1()</span><br><span class="line"></span><br><span class="line">from calculate import *</span><br><span class="line"></span><br><span class="line">result = add(*list1)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">sum = result + number</span><br><span class="line">print(sum)</span><br><span class="line"></span><br><span class="line">c = Calculate(80)</span><br><span class="line">c.test()</span><br></pre></td></tr></table></figure>

<h2 id="package-包的导入-py"><a href="#package-包的导入-py" class="headerlink" title="package_包的导入.py"></a>package_包的导入.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 包：存放py文件的文件夹</span><br><span class="line"># 一个包中可以存放多个模块</span><br><span class="line"># 项目 &gt; 包 &gt; 模块 &gt; 类 &gt; 函数 &gt; 变量</span><br><span class="line"></span><br><span class="line"># 使用包中的模块中的User类</span><br><span class="line"># from user import models</span><br><span class="line">#</span><br><span class="line"># u = models.User(&#x27;admin&#x27;, &#x27;123456&#x27;)</span><br><span class="line"># u.show()</span><br><span class="line"></span><br><span class="line"># from user.models import User</span><br><span class="line">#</span><br><span class="line"># u = User(&#x27;admin&#x27;, &#x27;123456&#x27;)</span><br><span class="line"># u.show()</span><br><span class="line">#</span><br><span class="line"># from article.models import Article</span><br><span class="line">#</span><br><span class="line"># a = Article(&#x27;Personal summary&#x27;, &#x27;xiaowei&#x27;)</span><br><span class="line"># a.show()</span><br><span class="line"></span><br><span class="line"># from user.models import *</span><br><span class="line">#</span><br><span class="line"># # print(version)</span><br><span class="line"># u = User(&#x27;admin&#x27;, &#x27;123456&#x27;)</span><br><span class="line"># u.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 用户发表文章</span><br><span class="line"># 创建用户对象</span><br><span class="line"></span><br><span class="line"># 发表文章，文章对象</span><br><span class="line"></span><br><span class="line">from user.models import User</span><br><span class="line">from article.models import Article</span><br><span class="line"></span><br><span class="line">user = User(&#x27;admin&#x27;, &#x27;123456&#x27;) # user就是通过导入User类创建的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">article = Article(&#x27;Personal summery&#x27;, &#x27;xiaowei&#x27;)</span><br><span class="line">user.publish_article(article)</span><br></pre></td></tr></table></figure>

<h2 id="包的-init-文件-py"><a href="#包的-init-文件-py" class="headerlink" title="包的__init__文件.py"></a>包的__init__文件.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">__init__.py文件</span><br><span class="line">当导入包的时候，默认调用__init__.py</span><br><span class="line">作用：</span><br><span class="line">1.当导入包时，把一些初始化的函数，变量，类定义在__init__.py文件中</span><br><span class="line">2.对此文件内的函数，变量的访问，只需要通过包名.函数...</span><br><span class="line">3.结合__all__ = [通过*可以访问的模块]</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># import user</span><br><span class="line">#</span><br><span class="line"># # from user.models import User</span><br><span class="line">#</span><br><span class="line"># user.creat_app()</span><br><span class="line"># user.printA()</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">from 模块 import *  如果没有定义__all__，则可以使用模块里面的所有内容。</span><br><span class="line">如果定义并赋值了__all__，只有__all__ = [&#x27;&#x27;, &#x27;&#x27;]列表中的内容才可以访问。</span><br><span class="line"></span><br><span class="line">from 包 import *  如果没有定义__all__，则该包中内容是不能访问的。</span><br><span class="line">需要在__init__.py文件中定义__all__ = [可以通过*访问的模块]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">from user import *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user = models.User(&#x27;admin&#x27;, &#x27;123456&#x27;)</span><br><span class="line">user.show()</span><br><span class="line"></span><br><span class="line">print(test1221.MAX)</span><br></pre></td></tr></table></figure>

<h2 id="模块的循环导入01-py"><a href="#模块的循环导入01-py" class="headerlink" title="模块的循环导入01.py"></a>模块的循环导入01.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">循环导入：</span><br><span class="line">A模块</span><br><span class="line">    def test():</span><br><span class="line">        f()</span><br><span class="line"></span><br><span class="line">B模块</span><br><span class="line">    def f():</span><br><span class="line">        test()</span><br><span class="line"></span><br><span class="line">避免产生循环导入：</span><br><span class="line">1.重新架构</span><br><span class="line">2.将导入的语句放到函数里面</span><br><span class="line">3.把导入的语句放到模块的最后</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">from 模块的循环导入02 import func</span><br><span class="line"></span><br><span class="line">def task1():</span><br><span class="line">    print(&#x27;------------task1--------&#x27;)</span><br><span class="line"></span><br><span class="line">def task2():</span><br><span class="line">    print(&#x27;---------------task2------------&#x27;)</span><br><span class="line">    func()</span><br><span class="line"></span><br><span class="line"># 模块内的函数调用使用__main__进行内部运行，防止循环导入时代码冗余运行</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line"></span><br><span class="line">    task1()</span><br><span class="line"></span><br><span class="line">    task2()</span><br></pre></td></tr></table></figure>

<h2 id="模块的循环导入02-py"><a href="#模块的循环导入02-py" class="headerlink" title="模块的循环导入02.py"></a>模块的循环导入02.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">    print(&#x27;------------func in circular import 1------1--------&#x27;)</span><br><span class="line">    from 模块的循环导入01 import task1</span><br><span class="line">    task1()</span><br><span class="line">    print(&#x27;------------func in circular import 1------2--------&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="模块续"><a href="#模块续" class="headerlink" title="模块续"></a>模块续</h2><h3 id="sys模块-py"><a href="#sys模块-py" class="headerlink" title="sys模块.py"></a>sys模块.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">print(sys.path)</span><br><span class="line"># 作为变量存储模块的搜索路径，变量里包含当前目录，PYTHONPATH和由安装过程决定的默认目录</span><br><span class="line"></span><br><span class="line">print(sys.version) # 查看解释器版本</span><br><span class="line"></span><br><span class="line">print(sys.argv)</span><br><span class="line"># 运行程序时后面跟了参数(python xxx.py xx xx...)，argv接收这些参数并保存为一个列表</span><br></pre></td></tr></table></figure>

<h3 id="time模块-py"><a href="#time模块-py" class="headerlink" title="time模块.py"></a>time模块.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"># time模块</span><br><span class="line"># 1.时间戳</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">重点：</span><br><span class="line">time.time()</span><br><span class="line">time.sleep()</span><br><span class="line">time.strftime(&#x27;format&#x27;)</span><br><span class="line"></span><br><span class="line">了解：</span><br><span class="line">time.localtime()</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">t = time.time() # 时间戳</span><br><span class="line">print(t)</span><br><span class="line"></span><br><span class="line"># time.sleep(3)</span><br><span class="line">t1 = time.time()</span><br><span class="line">print(t1)</span><br><span class="line"></span><br><span class="line"># 将时间戳转成字符串</span><br><span class="line">s = time.ctime(t)</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line"># 将时间戳转成元组</span><br><span class="line">t = time.localtime(t)</span><br><span class="line">print(t)</span><br><span class="line">print(t.tm_yday)</span><br><span class="line">print(t.tm_hour)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将元组版转成原版时间戳, 省略小数点后面数值</span><br><span class="line">tt = time.mktime(t)</span><br><span class="line">print(tt)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将元组的时间转成字符串</span><br><span class="line">s = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;)</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line"># 将字符串转成元组的方式</span><br><span class="line">r = time.strptime(&#x27;2021/03/21&#x27;, &#x27;%Y/%m/%d&#x27;)</span><br><span class="line">print(r)</span><br></pre></td></tr></table></figure>

<h3 id="datetime模块-py"><a href="#datetime模块-py" class="headerlink" title="datetime模块.py"></a>datetime模块.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># datetime: time模块升级版</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">time 时间</span><br><span class="line">date 日期  （data数据）</span><br><span class="line">datetime 日期时间 now()</span><br><span class="line">timedelta 时间差 timedelta(days=xx,weeks=xx, ....)</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">import datetime</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">print(datetime.time.hour) # 返回的是对象</span><br><span class="line">print(time.localtime().tm_hour)</span><br><span class="line"></span><br><span class="line">d = datetime.date(2021,3,21)</span><br><span class="line">print(d.day)</span><br><span class="line">print(datetime.date.ctime(d))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(datetime.date.today())</span><br><span class="line"></span><br><span class="line"># 时间差</span><br><span class="line">timedel = datetime.timedelta(weeks=3,hours=2)</span><br><span class="line">print(timedel)</span><br><span class="line"></span><br><span class="line"># datetime.datetime.now() --&gt; 得到当前的日期和时间</span><br><span class="line">now = datetime.datetime.now()</span><br><span class="line">print(now)</span><br><span class="line">result = now - timedel</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"># 缓存，数据redis 作为缓存  redis.set(key,value,时间差) 会话：session</span><br></pre></td></tr></table></figure>

<h3 id="random模块-py"><a href="#random模块-py" class="headerlink" title="random模块.py"></a>random模块.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">ran = random.random() # 0-1之间的随机小数</span><br><span class="line">print(ran)</span><br><span class="line"></span><br><span class="line">ran = random.randrange(1,10,2)</span><br><span class="line"># randrange(start,stop,step) 1-10 step=2--&gt;1,3,5,7,9</span><br><span class="line">print(ran)</span><br><span class="line"></span><br><span class="line">ran = random.randint(1,10) # 包含两侧值</span><br><span class="line">print(ran)</span><br><span class="line"></span><br><span class="line"># 随机抽签 -- 随机选择列表的内容</span><br><span class="line">list1 = [&#x27;xueqiang&#x27;,&#x27;feifei&#x27;,&#x27;xiaowei&#x27;,&#x27;xiaopeng&#x27;,&#x27;xiaowen&#x27;]</span><br><span class="line">ran = random.choice(list1)</span><br><span class="line">print(ran)</span><br><span class="line"></span><br><span class="line"># 随机排序 -- 打乱顺序</span><br><span class="line">pai = [&#x27;hearts A&#x27;,&#x27;diamonds K&#x27;,&#x27;clubs 6&#x27;,&#x27;spades 8&#x27;]</span><br><span class="line">ran = random.shuffle(pai)</span><br><span class="line">print(pai)</span><br><span class="line">print(ran)</span><br><span class="line"></span><br><span class="line"># 验证码--字母与数字的组合</span><br><span class="line"></span><br><span class="line">def func():</span><br><span class="line">    code = &#x27;&#x27;</span><br><span class="line">    for i in range(4):</span><br><span class="line">        ran1 = str(random.randint(0,9))</span><br><span class="line">        ran2 = chr(random.randint(65,90))  # chr 将数字转换成ASCII码对应的字符</span><br><span class="line">        ran3 = chr(random.randint(97,122))</span><br><span class="line"></span><br><span class="line">        r = random.choice([ran1,ran2,ran3])</span><br><span class="line"></span><br><span class="line">        code += r</span><br><span class="line"></span><br><span class="line">    return code</span><br><span class="line"></span><br><span class="line">code = func()</span><br><span class="line">print(code)</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-py"><a href="#第三方模块-py" class="headerlink" title="第三方模块.py"></a>第三方模块.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">response = requests.get(&#x27;https://www.12306.cn/&#x27;)</span><br><span class="line"></span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure>

<h3 id="hashlib模块-py"><a href="#hashlib模块-py" class="headerlink" title="hashlib模块.py"></a>hashlib模块.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print(&#x27;--------------------------标准类库----------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># chr ord</span><br><span class="line"></span><br><span class="line"># print(chr(65)) # Unicode码---》str</span><br><span class="line"># print(type(chr(65)))</span><br><span class="line">#</span><br><span class="line"># print(ord(&#x27;A&#x27;)) # 字符转成Unicode码</span><br><span class="line">#</span><br><span class="line"># print(ord(&#x27;上&#x27;)) # 19978</span><br><span class="line"># print(ord(&#x27;下&#x27;)) # 19979</span><br><span class="line"># print(type(ord(&#x27;下&#x27;)))</span><br><span class="line">#</span><br><span class="line"># print(chr(19978))</span><br><span class="line"># print(chr(19979))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(&#x27;----------------------------hashlib--------------------------&#x27;)</span><br><span class="line"></span><br><span class="line"># 加密算法  md5  sha1  sha256 不可逆算法</span><br><span class="line"># base64 可逆算法</span><br><span class="line">import hashlib</span><br><span class="line"></span><br><span class="line"># msg = &#x27;xiaopeng, how about having lunch together?&#x27;</span><br><span class="line">#</span><br><span class="line"># md5 = hashlib.md5(msg.encode(&#x27;utf-8&#x27;))</span><br><span class="line"># print(md5.hexdigest())</span><br><span class="line"># print(len(md5.hexdigest())) # 32</span><br><span class="line">#</span><br><span class="line"># sha1 = hashlib.sha1(msg.encode(&#x27;utf-8&#x27;))</span><br><span class="line"># print(sha1.hexdigest())</span><br><span class="line"># print(len(sha1.hexdigest())) # 40</span><br><span class="line">#</span><br><span class="line"># sha256 = hashlib.sha256(msg.encode(&#x27;utf-8&#x27;))</span><br><span class="line"># print(sha256.hexdigest())</span><br><span class="line"># print(len(sha256.hexdigest())) # 64</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># # 登录密码验证</span><br><span class="line"># password = &#x27;123456&#x27;</span><br><span class="line">#</span><br><span class="line"># list1 = []</span><br><span class="line">#</span><br><span class="line"># sha256 = hashlib.sha256(password.encode(&#x27;utf-8&#x27;))</span><br><span class="line"># list1.append(sha256.hexdigest())</span><br><span class="line">#</span><br><span class="line"># pwd = input(&#x27;please input password: &#x27;)</span><br><span class="line"># pwd = hashlib.sha256(pwd.encode(&#x27;utf-8&#x27;))</span><br><span class="line"># pwd = sha256.hexdigest()</span><br><span class="line">#</span><br><span class="line"># for i in list1:</span><br><span class="line">#     if pwd == i:</span><br><span class="line">#         print(&#x27;login success&#x27;)</span><br><span class="line"></span><br><span class="line">print(&#x27;------------------------------hashlib-读取hash值-------------------------------&#x27;)</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    # MD5 / SHA1 / SHA256</span><br><span class="line">    digester = hashlib.md5()  # hashlib.sha1() / hashlib.sha256()</span><br><span class="line">    with open(&#x27;datetime模块.py&#x27;, &#x27;rb&#x27;) as file_stream:</span><br><span class="line">        file_iter = iter(lambda: file_stream.read(1024), b&#x27;&#x27;)</span><br><span class="line">        for data in file_iter:</span><br><span class="line">            digester.update(data)</span><br><span class="line">        # data = file_stream.read(1024)</span><br><span class="line">        # while data:</span><br><span class="line">        #     digester.update(data)</span><br><span class="line">        #     data = file_stream.read(1024)</span><br><span class="line">    print(digester.hexdigest())</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h2 id="article"><a href="#article" class="headerlink" title="article"></a>article</h2><h3 id="init-py"><a href="#init-py" class="headerlink" title="init.py"></a><strong>init</strong>.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="models-py"><a href="#models-py" class="headerlink" title="models.py"></a>models.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Article:</span><br><span class="line">    def __init__(self, name, author):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.author = author</span><br><span class="line"></span><br><span class="line">    def show(self):</span><br><span class="line">        print(&#x27;The name of article: &#123;&#125;, author is &#123;&#125;&#x27;.format(self.name, self.author))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Tag:</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name = name</span><br></pre></td></tr></table></figure>

<h3 id="views-py"><a href="#views-py" class="headerlink" title="views.py"></a>views.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><h3 id="init-py-1"><a href="#init-py-1" class="headerlink" title="init.py"></a><strong>init</strong>.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [&#x27;models&#x27;, &#x27;test1221&#x27;]</span><br><span class="line"></span><br><span class="line">print(&#x27;-------------------&gt;user\&#x27;s __init__&#x27;)</span><br><span class="line"></span><br><span class="line">def creat_app():</span><br><span class="line">    print(&#x27;------------&gt; create--app&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def printA():</span><br><span class="line">    print(&#x27;----------------&gt;AAAAAAA&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="models-py-1"><a href="#models-py-1" class="headerlink" title="models.py"></a>models.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [&#x27;User&#x27;] # 只对 from 包.模块 import * 起作用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">version = &#x27;1.1&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class User:</span><br><span class="line">    def __init__(self, username, password):</span><br><span class="line">        self.username = username</span><br><span class="line">        self.password = password</span><br><span class="line"></span><br><span class="line">    def login(self, username, password):</span><br><span class="line">        if username == self.username and password == self.password:</span><br><span class="line">            print(&#x27;login success&#x27;)</span><br><span class="line"></span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;login fail&#x27;)</span><br><span class="line"></span><br><span class="line">    def publish_article(self, article):</span><br><span class="line">        print(self.username, &#x27;published one article&#x27;, article.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def show(self):</span><br><span class="line">        print(self.username, self.password)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line"></span><br><span class="line">    print(&#x27;----------------user------------------------&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="test1221-py"><a href="#test1221-py" class="headerlink" title="test1221.py"></a>test1221.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from 面向对象.user.models import User</span><br><span class="line"># 建议添加上一级目录名称来导入，避免出现ModuleNotFoundError: No module named &#x27;models&#x27;</span><br><span class="line">from 面向对象.article.models import Article</span><br><span class="line"># ImportError: attempted relative import with no known parent package</span><br><span class="line"># 出现这种异常时需添加上一级目录名称</span><br><span class="line"></span><br><span class="line">user = User(&#x27;admin&#x27;, &#x27;123456&#x27;) # user就是通过导入User类创建的</span><br><span class="line"></span><br><span class="line">article = Article(&#x27;Personal summery&#x27;, &#x27;xiaowei&#x27;)</span><br><span class="line">user.publish_article(article)</span><br><span class="line"></span><br><span class="line">list1 = [1, 3, 5, 6, 7]</span><br><span class="line">from 面向对象.calculate import add</span><br><span class="line"></span><br><span class="line">result = add(*list1)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">MAX = 1000</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python%E7%BB%83%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python%E7%BB%83%E4%B9%A0/" class="post-title-link" itemprop="url">python练习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-27 13:22:53" itemprop="dateModified" datetime="2022-05-27T13:22:53+08:00">2022-05-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="p1"><a href="#p1" class="headerlink" title="p1"></a>p1</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 有4个数字：1，2，3，4，能组成多少个互不相同且无重复数字的三位数？各是多少？</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># list1 = []</span></span><br><span class="line"><span class="comment"># for i in range(1,5):</span></span><br><span class="line"><span class="comment">#     for j in range(1,5):</span></span><br><span class="line"><span class="comment">#         if i != j:</span></span><br><span class="line"><span class="comment">#             for k in range(1,5):</span></span><br><span class="line"><span class="comment">#                 if k != i and k != j: # 或者 if (i != j) and (j != k) and (i != k)</span></span><br><span class="line"><span class="comment">#                     num = i*100+j*10+k</span></span><br><span class="line"><span class="comment">#                     list1.append(num)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># tuple1 = tuple(list1)</span></span><br><span class="line"><span class="comment"># print(&#x27;number is:&#x27;, len(tuple1))</span></span><br><span class="line"><span class="comment"># for i in tuple1:</span></span><br><span class="line"><span class="comment">#     print(i)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;---------------------------------------------------------------------&#x27;</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line">filter_list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">filter_list2 = [<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="number">0</span>,<span class="number">15</span>]</span><br><span class="line">filter_list3 = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;aasf&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;123&#x27;</span>,<span class="number">123</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter_list</span>(<span class="params">l</span>):</span><br><span class="line">    <span class="string">&#x27;return a new list with the strings filtered out&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [i <span class="keyword">for</span> i <span class="keyword">in</span> l <span class="keyword">if</span> <span class="built_in">type</span>(i) <span class="keyword">is</span> <span class="built_in">int</span>]</span><br><span class="line">    <span class="comment"># l1 = []</span></span><br><span class="line">    <span class="comment"># for i in l:</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#     if type(i) is int:</span></span><br><span class="line">    <span class="comment">#         l1.append(i)</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># return l1</span></span><br><span class="line"></span><br><span class="line">l11 = filter_list(filter_list1)</span><br><span class="line"><span class="built_in">print</span>(l11)</span><br><span class="line">l11 = filter_list(filter_list2)</span><br><span class="line"><span class="built_in">print</span>(l11)</span><br><span class="line">l11 = filter_list(filter_list3)</span><br><span class="line"><span class="built_in">print</span>(l11)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;---------------------------------------------------------------------&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">digital_root</span>(<span class="params">n</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># s1 = str(n)</span></span><br><span class="line">    <span class="comment"># if len(s1) &lt; 2:</span></span><br><span class="line">    <span class="comment">#     return n</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment">#     n = 0</span></span><br><span class="line">    <span class="comment">#     for i in s1:</span></span><br><span class="line">    <span class="comment">#         n += int(i)</span></span><br><span class="line">    <span class="comment">#     return digital_root(n)</span></span><br><span class="line">    <span class="keyword">return</span> n <span class="keyword">if</span> n &lt; <span class="number">10</span> <span class="keyword">else</span> digital_root(<span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">str</span>(n))))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">n1 = digital_root(<span class="number">493193</span>)</span><br><span class="line"><span class="built_in">print</span>(n1)</span><br><span class="line"></span><br><span class="line">n2 = digital_root(<span class="number">132189</span>)</span><br><span class="line"><span class="built_in">print</span>(n2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sum</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="comment"># sum = 0</span></span><br><span class="line">    <span class="comment"># i = b</span></span><br><span class="line">    <span class="comment"># if a &gt; b:</span></span><br><span class="line">    <span class="comment">#     b = a</span></span><br><span class="line">    <span class="comment">#     a = i</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># for i in range(a,b+1):</span></span><br><span class="line">    <span class="comment">#     sum += i</span></span><br><span class="line">    <span class="comment"># return sum</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># return sum(i for i in range(b,a+1)) if a &gt; b else sum(i for i in range(a,b+1))</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(<span class="built_in">range</span>(<span class="built_in">min</span>(a, b), <span class="built_in">max</span>(a, b) + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">s1 = get_sum(-<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line">s1 = get_sum(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line">s1 = get_sum(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">binary_array_to_number</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="comment"># l1 = len(arr)-1</span></span><br><span class="line">    <span class="comment"># sum = 0</span></span><br><span class="line">    <span class="comment"># for i in arr:</span></span><br><span class="line">    <span class="comment">#     sum += i*(2**l1)</span></span><br><span class="line">    <span class="comment">#     l1 -= 1</span></span><br><span class="line">    <span class="comment"># return sum</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># return sum(digit * 2 ** i for i, digit in enumerate(reversed(arr)))</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    enumerate is useful</span></span><br><span class="line"><span class="string">    for obtaining an indexed list:</span></span><br><span class="line"><span class="string">        (0, seq[0]), (1, seq[1]), (2, seq[2]), ...</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># append_bit = lambda n, b: n &lt;&lt; 1 | b  # 二进制的逻辑或</span></span><br><span class="line">    <span class="comment"># return reduce(append_bit, arr)</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates</span></span><br><span class="line"><span class="string">        ((((1+2)+3)+4)+5)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(<span class="string">&quot;&quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>, arr)), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a1 = binary_array_to_number([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br><span class="line">a1 = binary_array_to_number([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br><span class="line">a1 = binary_array_to_number([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&quot;1011&quot;</span>, <span class="number">2</span>)) <span class="comment"># 此处的参数2表示将2进制转成十进制</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&quot;1011&quot;</span>, <span class="number">8</span>))</span><br></pre></td></tr></table></figure>

<h1 id="p2"><a href="#p2" class="headerlink" title="p2"></a>p2</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算奖金：利润(I)=&lt; 10w, 奖金K可提%10I，10w &lt; I &lt;= 20, 低于10w部分10%，高于10w部分7.5%，</span></span><br><span class="line"><span class="comment"># 高于20w部分5%，40w - 3%，60w - 1.5%, 100w - 1%</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># I = int(input(&#x27;please input the profit: &#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if I &lt;= 100000:</span></span><br><span class="line"><span class="comment">#     K = I * 0.1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># elif I &gt; 100000 and I &lt;= 200000:</span></span><br><span class="line"><span class="comment">#     K = 100000 * 0.1 + (I-100000) * 0.075</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># elif I &gt; 200000 and I &lt;= 400000:</span></span><br><span class="line"><span class="comment">#     K = 100000 * 0.1 + 100000 * 0.075 + (I-200000) * 0.05</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># elif I &gt; 400000 and I &lt;= 600000:</span></span><br><span class="line"><span class="comment">#     K = 100000 * 0.1 + 100000 * 0.075 + 200000 * 0.05 + (I-400000) * 0.03</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># elif I &gt; 600000 and I &lt;= 1000000:</span></span><br><span class="line"><span class="comment">#     K = 100000 * 0.1 + 100000 * 0.075 + 200000 * 0.05 + 200000 * 0.03 + (I-600000) * 0.015</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># else:</span></span><br><span class="line"><span class="comment">#     K = 100000 * 0.1 + 100000 * 0.075 + 200000 * 0.05 + 200000 * 0.03 + 400000 * 0.015 + (I-1000000) * 0.01</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># print(&#x27;Reward is:&#x27;, K)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># arr = [1000000, 600000, 400000, 200000, 100000, 0]</span></span><br><span class="line"><span class="comment"># rat = [0.01, 0.015, 0.03, 0.05, 0.075, 0.1]</span></span><br><span class="line"><span class="comment"># r = 0</span></span><br><span class="line"><span class="comment"># for idx in range(0, 6):</span></span><br><span class="line"><span class="comment">#     if I &gt; arr[idx]:</span></span><br><span class="line"><span class="comment">#         tmp = (I-arr[idx])*rat[idx]</span></span><br><span class="line"><span class="comment">#         r = r + tmp</span></span><br><span class="line"><span class="comment">#         I = arr[idx]</span></span><br><span class="line"><span class="comment"># print(r)</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">solution</span>(<span class="params">number</span>):</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> number &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,number):</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span>) <span class="keyword">or</span> (i % <span class="number">5</span> == <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">sum</span> += i</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sol1</span>(<span class="params">number</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,number) <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span>) <span class="keyword">or</span> (i % <span class="number">5</span> == <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">n1 = solution(<span class="number">15</span>)</span><br><span class="line"><span class="built_in">print</span>(n1)</span><br><span class="line">n1 = sol1(<span class="number">15</span>)</span><br><span class="line"><span class="built_in">print</span>(n1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">narcissistic</span>(<span class="params"> value </span>):</span><br><span class="line">    <span class="comment"># l1 = len(str(value))</span></span><br><span class="line">    <span class="comment"># sum = 0</span></span><br><span class="line">    <span class="comment"># for i in str(value):</span></span><br><span class="line">    <span class="comment">#     sum += int(i)**l1</span></span><br><span class="line">    <span class="comment"># if sum == value:</span></span><br><span class="line">    <span class="comment">#     return True</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment">#     return False</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># return True if sum(int(i)**len(str(value)) for i in str(value)) == value else False</span></span><br><span class="line">    <span class="keyword">return</span> value == <span class="built_in">sum</span>(<span class="built_in">int</span>(x) ** <span class="built_in">len</span>(<span class="built_in">str</span>(value)) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">str</span>(value))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">va1 = narcissistic(<span class="number">153</span>)</span><br><span class="line"><span class="built_in">print</span>(va1)</span><br><span class="line">va1 = narcissistic(<span class="number">371</span>)</span><br><span class="line"><span class="built_in">print</span>(va1)</span><br><span class="line">va1 = narcissistic(<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(va1)</span><br><span class="line">va1 = narcissistic(<span class="number">1652</span>)</span><br><span class="line"><span class="built_in">print</span>(va1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tribonacci</span>(<span class="params">signature, n</span>):</span><br><span class="line">    <span class="comment"># index = 0</span></span><br><span class="line">    <span class="comment"># l1 = []</span></span><br><span class="line">    <span class="comment"># while len(signature) &lt; n:</span></span><br><span class="line">    <span class="comment">#     v1 = signature[index]+signature[index+1]+signature[index+2]</span></span><br><span class="line">    <span class="comment">#     signature.append(v1)</span></span><br><span class="line">    <span class="comment">#     index += 1</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># for i in range(n):</span></span><br><span class="line">    <span class="comment">#     l1.append(signature[i])</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># return l1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> signature[:n] <span class="keyword">if</span> n &lt;= <span class="built_in">len</span>(signature) <span class="keyword">else</span> tribonacci(signature + [<span class="built_in">sum</span>(signature[-<span class="number">3</span>:])], n)</span><br><span class="line"></span><br><span class="line">list1 = tribonacci([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br><span class="line">list1 = tribonacci([<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>], <span class="number">30</span>)</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br></pre></td></tr></table></figure>

<h1 id="p3"><a href="#p3" class="headerlink" title="p3"></a>p3</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">friend</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> a: <span class="built_in">len</span>(a) == <span class="number">4</span>, x))</span><br><span class="line">    <span class="comment"># return [f for f in x if len(f) == 4]</span></span><br><span class="line"></span><br><span class="line">l1 = friend([<span class="string">&quot;Ryan&quot;</span>, <span class="string">&quot;Kieran&quot;</span>, <span class="string">&quot;Jason&quot;</span>, <span class="string">&quot;Yous&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(l1)</span><br><span class="line">l1 = friend([<span class="string">&quot;Ryan&quot;</span>, <span class="string">&quot;Kieran&quot;</span>, <span class="string">&quot;Mark&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(l1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="comment"># if num &gt; 1:</span></span><br><span class="line">    <span class="comment">#     for i in range(2,num):</span></span><br><span class="line">    <span class="comment">#         if num % i == 0:</span></span><br><span class="line">    <span class="comment">#             return False</span></span><br><span class="line">    <span class="comment">#     else:</span></span><br><span class="line">    <span class="comment">#         return True</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment">#     return False</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    我们继续分析，其实质数还有一个特点，就是它总是等于 6x-1 或者 6x+1，其中 x 是大于等于1的自然数。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    如何论证这个结论呢，其实不难。首先 6x 肯定不是质数，因为它能被 6 整除；其次 6x+2 肯定也不是质数，因为它还能被2整除；依次类推，6x+3 肯定能被 3 整除；6x+4 肯定能被 2 整除。那么，就只有 6x+1 和 6x+5 (即等同于6x-1) 可能是质数了。所以循环的步长可以设为 6，然后每次只判断 6 两侧的数即可。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param num:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># if num &lt;= 3:</span></span><br><span class="line">    <span class="comment">#     return num &gt; 1</span></span><br><span class="line">    <span class="comment"># # 不在6的倍数两侧的一定不是质数</span></span><br><span class="line">    <span class="comment"># if (num % 6 != 1 and num % 6 != 5):</span></span><br><span class="line">    <span class="comment">#     return False</span></span><br><span class="line">    <span class="comment"># sqrt = math.sqrt(num)</span></span><br><span class="line">    <span class="comment"># for i in range(5, int(sqrt+1), 6):</span></span><br><span class="line">    <span class="comment">#     if (num % i == 0 or num % (i + 2) == 0):</span></span><br><span class="line">    <span class="comment">#         return False</span></span><br><span class="line">    <span class="comment"># return True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> num &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="built_in">all</span>(num % i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">int</span>(num ** <span class="number">.5</span> + <span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># return True if ((num &gt; 1) and (num == 2 or num == 3 or (num % 2 != 0 and num % 3 != 0))) else False</span></span><br><span class="line"></span><br><span class="line">n1 = is_prime(<span class="number">97</span>)</span><br><span class="line"><span class="built_in">print</span>(n1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_it</span>(<span class="params">seq</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> seq:</span><br><span class="line">        <span class="keyword">if</span> seq.count(i) % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line">    <span class="comment"># return [x for x in seq if seq.count(x) % 2][0]</span></span><br><span class="line"></span><br><span class="line">l1 = find_it([<span class="number">20</span>,<span class="number">1</span>,-<span class="number">1</span>,<span class="number">2</span>,-<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">4</span>,-<span class="number">1</span>,-<span class="number">2</span>,<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(l1)</span><br><span class="line">l1 = find_it([<span class="number">20</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(l1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">in_array</span>(<span class="params">array1, array2</span>):</span><br><span class="line">    <span class="comment"># s1 = set()</span></span><br><span class="line">    <span class="comment"># for i in array1:</span></span><br><span class="line">    <span class="comment">#     for j in array2:</span></span><br><span class="line">    <span class="comment">#         if i in j:</span></span><br><span class="line">    <span class="comment">#             s1.add(i)</span></span><br><span class="line">    <span class="comment"># list1 = list(s1)</span></span><br><span class="line">    <span class="comment"># list1.sort()</span></span><br><span class="line">    <span class="comment"># return list1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sorted</span>(&#123;sub <span class="keyword">for</span> sub <span class="keyword">in</span> array1 <span class="keyword">if</span> <span class="built_in">any</span>(sub <span class="keyword">in</span> s <span class="keyword">for</span> s <span class="keyword">in</span> array2)&#125;)</span><br><span class="line"></span><br><span class="line">l1 = in_array([<span class="string">&quot;arp&quot;</span>, <span class="string">&quot;live&quot;</span>, <span class="string">&quot;strong&quot;</span>], [<span class="string">&quot;lively&quot;</span>, <span class="string">&quot;alive&quot;</span>, <span class="string">&quot;harp&quot;</span>, <span class="string">&quot;sharp&quot;</span>, <span class="string">&quot;armstrong&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(l1)</span><br><span class="line">l2 = in_array([<span class="string">&quot;tarp&quot;</span>, <span class="string">&quot;mice&quot;</span>, <span class="string">&quot;bull&quot;</span>], [<span class="string">&quot;lively&quot;</span>, <span class="string">&quot;alive&quot;</span>, <span class="string">&quot;harp&quot;</span>, <span class="string">&quot;sharp&quot;</span>, <span class="string">&quot;armstrong&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(l2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">song_decoder</span>(<span class="params">song</span>):</span><br><span class="line">    list1 = song.split(<span class="string">&#x27;WUB&#x27;</span>)</span><br><span class="line">    l1 = <span class="built_in">len</span>(list1)</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; l1:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(list1[i]) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">del</span> list1[i]</span><br><span class="line">            l1 -= <span class="number">1</span></span><br><span class="line">            i -= <span class="number">1</span></span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    str1 = <span class="string">&#x27; &#x27;</span>.join(list1)</span><br><span class="line">    <span class="keyword">return</span> str1</span><br><span class="line"></span><br><span class="line">    <span class="comment"># return &quot; &quot;.join(song.replace(&#x27;WUB&#x27;, &#x27; &#x27;).split())</span></span><br><span class="line">    <span class="comment"># return &#x27; &#x27;.join([a for a in song.split(&#x27;WUB&#x27;) if a])</span></span><br><span class="line"></span><br><span class="line">s1 = song_decoder(<span class="string">&quot;WUBWEWUBAREWUBWUBTHEWUBCHAMPIONSWUBMYWUBFRIENDWUB&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line">s1 = song_decoder(<span class="string">&quot;AWUBWUBWUBBWUBWUBWUBC&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_even_index</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="comment"># l1 = len(arr)</span></span><br><span class="line">    <span class="comment"># j = 1</span></span><br><span class="line">    <span class="comment"># if sum(arr[i] for i in range(1, l1)) == 0:</span></span><br><span class="line">    <span class="comment">#     return 0</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># while j &lt; l1:</span></span><br><span class="line">    <span class="comment">#     if sum(arr[i] for i in range(0, j)) == sum(arr[i] for i in range(j+1, l1)):</span></span><br><span class="line">    <span class="comment">#         return j</span></span><br><span class="line">    <span class="comment">#     j += 1</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment">#     return -1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(arr)):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">sum</span>(arr[:i]) == <span class="built_in">sum</span>(arr[i + <span class="number">1</span>:]):</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">a1 = find_even_index([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br><span class="line">a1 = find_even_index(<span class="built_in">list</span>(<span class="built_in">range</span>(-<span class="number">100</span>,-<span class="number">1</span>)))</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_missing_letter</span>(<span class="params">chars</span>):</span><br><span class="line">    <span class="comment"># arr = [chr(i) for i in range(ord(chars[0]), ord(chars[-1])+1)]</span></span><br><span class="line">    <span class="comment"># for j in arr:</span></span><br><span class="line">    <span class="comment">#     if j not in chars:</span></span><br><span class="line">    <span class="comment">#         return j</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">chr</span>(n) <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">ord</span>(chars[<span class="number">0</span>]), <span class="built_in">ord</span>(chars[-<span class="number">1</span>]) + <span class="number">1</span>) <span class="keyword">if</span> n <span class="keyword">not</span> <span class="keyword">in</span> [<span class="built_in">ord</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> chars]][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">a1 = find_missing_letter([<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;f&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br><span class="line">a1 = find_missing_letter([<span class="string">&quot;O&quot;</span>,<span class="string">&quot;Q&quot;</span>,<span class="string">&quot;R&quot;</span>,<span class="string">&quot;S&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(a1)</span><br></pre></td></tr></table></figure>

<h1 id="p4"><a href="#p4" class="headerlink" title="p4"></a>p4</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一：</span></span><br><span class="line"><span class="comment"># def zero(f = None): return 0 if not f else f(0)</span></span><br><span class="line"><span class="comment"># def one(f = None): return 1 if not f else f(1)</span></span><br><span class="line"><span class="comment"># def two(f = None): return 2 if not f else f(2)</span></span><br><span class="line"><span class="comment"># def three(f = None): return 3 if not f else f(3)</span></span><br><span class="line"><span class="comment"># def four(f = None): return 4 if not f else f(4)</span></span><br><span class="line"><span class="comment"># def five(f = None): return 5 if not f else f(5)</span></span><br><span class="line"><span class="comment"># def six(f = None): return 6 if not f else f(6)</span></span><br><span class="line"><span class="comment"># def seven(f = None): return 7 if not f else f(7)</span></span><br><span class="line"><span class="comment"># def eight(f = None): return 8 if not f else f(8)</span></span><br><span class="line"><span class="comment"># def nine(f = None): return 9 if not f else f(9)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># def plus(y): return lambda x: x+y</span></span><br><span class="line"><span class="comment"># def minus(y): return lambda x: x-y</span></span><br><span class="line"><span class="comment"># def times(y): return lambda  x: x*y</span></span><br><span class="line"><span class="comment"># def divided_by(y): return lambda  x: x/y</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：</span></span><br><span class="line"><span class="comment"># def zero(arg=&quot;&quot;):  return eval(&quot;0&quot; + arg)</span></span><br><span class="line"><span class="comment"># def one(arg=&quot;&quot;):   return eval(&quot;1&quot; + arg)</span></span><br><span class="line"><span class="comment"># def two(arg=&quot;&quot;):   return eval(&quot;2&quot; + arg)</span></span><br><span class="line"><span class="comment"># def three(arg=&quot;&quot;): return eval(&quot;3&quot; + arg)</span></span><br><span class="line"><span class="comment"># def four(arg=&quot;&quot;):  return eval(&quot;4&quot; + arg)</span></span><br><span class="line"><span class="comment"># def five(arg=&quot;&quot;):  return eval(&quot;5&quot; + arg)</span></span><br><span class="line"><span class="comment"># def six(arg=&quot;&quot;):   return eval(&quot;6&quot; + arg)</span></span><br><span class="line"><span class="comment"># def seven(arg=&quot;&quot;): return eval(&quot;7&quot; + arg)</span></span><br><span class="line"><span class="comment"># def eight(arg=&quot;&quot;): return eval(&quot;8&quot; + arg)</span></span><br><span class="line"><span class="comment"># def nine(arg=&quot;&quot;):  return eval(&quot;9&quot; + arg)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># def plus(n):    return &quot;+%s&quot; % n</span></span><br><span class="line"><span class="comment"># def minus(n):   return &quot;-%s&quot; % n</span></span><br><span class="line"><span class="comment"># def times(n):   return &quot;*%s&quot; % n</span></span><br><span class="line"><span class="comment"># def divided_by(n): return &quot;/%s&quot; % n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三：</span></span><br><span class="line"></span><br><span class="line">id_ = <span class="keyword">lambda</span> x: x</span><br><span class="line">number = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> f=id_: f(x)</span><br><span class="line">zero, one, two, three, four, five, six, seven, eight, nine = <span class="built_in">map</span>(number, <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line">plus = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y + x</span><br><span class="line">minus = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y - x</span><br><span class="line">times = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y * x</span><br><span class="line">divided_by = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y // x</span><br><span class="line"></span><br><span class="line">result = zero(plus(two()))</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">result = one(times(five()))</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法一</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># def sum_for_list(lst):</span></span><br><span class="line"><span class="comment">#     prime_num = []</span></span><br><span class="line"><span class="comment">#     l1 = []</span></span><br><span class="line"><span class="comment">#     for i in lst:</span></span><br><span class="line"><span class="comment">#         if i &lt; 0:</span></span><br><span class="line"><span class="comment">#             i = -i</span></span><br><span class="line"><span class="comment">#         &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#         一个正整数的质因数分解，每次得到一个质因数之后需要更新整数为：</span></span><br><span class="line"><span class="comment">#         原始整数除以这个质因数的值，循环直至原始整数的值小于2终止</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#         &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#         tmp = 2</span></span><br><span class="line"><span class="comment">#         if i == tmp:</span></span><br><span class="line"><span class="comment">#             prime_num.append(i)</span></span><br><span class="line"><span class="comment">#         else:</span></span><br><span class="line"><span class="comment">#             while (i &gt;= tmp):</span></span><br><span class="line"><span class="comment">#                 k = i % tmp</span></span><br><span class="line"><span class="comment">#                 if (k == 0) and (tmp not in prime_num) and (tmp &gt; 1 and all(tmp % k for k in range(2, int(tmp ** .5 + 1)))):</span></span><br><span class="line"><span class="comment">#                     prime_num.append(tmp)</span></span><br><span class="line"><span class="comment">#                     i = i / tmp  # 更新</span></span><br><span class="line"><span class="comment">#                 else:</span></span><br><span class="line"><span class="comment">#                     tmp = tmp + 1 #同时更新除数值，不必每次都从头开始</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     prime_num.sort()</span></span><br><span class="line"><span class="comment">#     for a in prime_num:</span></span><br><span class="line"><span class="comment">#         sum = 0</span></span><br><span class="line"><span class="comment">#         for b in lst:</span></span><br><span class="line"><span class="comment">#             if b % a == 0:</span></span><br><span class="line"><span class="comment">#                 sum += b</span></span><br><span class="line"><span class="comment">#         l1.append([a, sum])</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     return l1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：</span></span><br><span class="line"><span class="keyword">from</span> cffi.backend_ctypes <span class="keyword">import</span> xrange</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sum_for_list</span>(<span class="params">lst</span>):</span><br><span class="line">    factors = &#123;i <span class="keyword">for</span> k <span class="keyword">in</span> lst <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">2</span>, <span class="built_in">abs</span>(k)+<span class="number">1</span>) <span class="keyword">if</span> <span class="keyword">not</span> k % i&#125;</span><br><span class="line">    prime_factors = &#123;i <span class="keyword">for</span> i <span class="keyword">in</span> factors <span class="keyword">if</span> <span class="keyword">not</span> [j <span class="keyword">for</span> j <span class="keyword">in</span> factors-&#123;i&#125; <span class="keyword">if</span> <span class="keyword">not</span> i % j]&#125;</span><br><span class="line">    <span class="keyword">return</span> [[p, <span class="built_in">sum</span>(e <span class="keyword">for</span> e <span class="keyword">in</span> lst <span class="keyword">if</span> <span class="keyword">not</span> e % p)] <span class="keyword">for</span> p <span class="keyword">in</span> <span class="built_in">sorted</span>(prime_factors)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = sum_for_list([<span class="number">15</span>, <span class="number">30</span>, -<span class="number">45</span>])</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">result = sum_for_list([<span class="number">15</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">107</span>])</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-------------------------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">add</span>(<span class="title class_ inherited__">int</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,n</span>):</span><br><span class="line">        <span class="keyword">return</span> add(self+n)</span><br><span class="line"></span><br><span class="line">result = add(<span class="number">2</span>)(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="built_in">print</span>(result(<span class="number">5</span>))</span><br><span class="line">at = add(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(at+<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(at(<span class="number">4</span>)(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def Fibonacci(m, signature):</span></span><br><span class="line"><span class="comment">#     index = 0</span></span><br><span class="line"><span class="comment">#     while len(signature) &lt; m:</span></span><br><span class="line"><span class="comment">#         v1 = signature[index]+signature[index+1]</span></span><br><span class="line"><span class="comment">#         signature.append(v1)</span></span><br><span class="line"><span class="comment">#         index += 1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     return signature</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># def perimeter(n):</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     m = n+1</span></span><br><span class="line"><span class="comment">#     a1 = Fibonacci(m, [1, 1])</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     return sum(a1)*4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># def fib(n):</span></span><br><span class="line"><span class="comment">#     a, b = 0, 1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     for i in range(n + 1):</span></span><br><span class="line"><span class="comment">#         if i == 0:</span></span><br><span class="line"><span class="comment">#             yield b</span></span><br><span class="line"><span class="comment">#         else:</span></span><br><span class="line"><span class="comment">#             a, b = b, a + b</span></span><br><span class="line"><span class="comment">#             yield b</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># def perimeter(n):</span></span><br><span class="line"><span class="comment">#     return sum(fib(n)) * 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三：</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">perimeter</span>(<span class="params">n</span>):</span><br><span class="line">    a, b = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> n:</span><br><span class="line">        a, b, n = b, a + b, n - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span> * (b - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = perimeter(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(p1)</span><br><span class="line">p1 = perimeter(<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(p1)</span><br><span class="line">p1 = perimeter(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(p1)</span><br><span class="line"><span class="comment"># p1 = perimeter(52527)</span></span><br><span class="line"><span class="comment"># print(p1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">def cakes(recipe, available):</span></span><br><span class="line"><span class="string">    list1 = []</span></span><br><span class="line"><span class="string">    for key1, value1 in recipe.items():</span></span><br><span class="line"><span class="string">        if key1 in available:</span></span><br><span class="line"><span class="string">            list1.append(int(available[key1]/value1))</span></span><br><span class="line"><span class="string">        else:</span></span><br><span class="line"><span class="string">            return 0</span></span><br><span class="line"><span class="string">    return min(list1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># *** 方法二</span></span><br><span class="line"><span class="string">def cakes(recipe, available):</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27; Take each ingredient from the recipe, see if it is in the available ones</span></span><br><span class="line"><span class="string">        and calculate how many full cakes you can make with it.</span></span><br><span class="line"><span class="string">        If an ingredient is missing, we can&#x27;t bake a cake. Otherwise we have to</span></span><br><span class="line"><span class="string">        find the lowest possible amount of cakes.&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    return min([available[i]//recipe[i] if i in available else 0 for i in recipe])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cakes</span>(<span class="params">recipe, available</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(available.get(k, <span class="number">0</span>) // v <span class="keyword">for</span> k,v <span class="keyword">in</span> recipe.items())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c1 = cakes(&#123;<span class="string">&quot;flour&quot;</span>: <span class="number">500</span>, <span class="string">&quot;sugar&quot;</span>: <span class="number">200</span>, <span class="string">&quot;eggs&quot;</span>: <span class="number">1</span>&#125;, &#123;<span class="string">&quot;flour&quot;</span>: <span class="number">1200</span>, <span class="string">&quot;sugar&quot;</span>: <span class="number">1200</span>, <span class="string">&quot;eggs&quot;</span>: <span class="number">5</span>, <span class="string">&quot;milk&quot;</span>: <span class="number">200</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(c1)</span><br><span class="line">c1 = cakes(&#123;<span class="string">&quot;apples&quot;</span>: <span class="number">3</span>, <span class="string">&quot;flour&quot;</span>: <span class="number">300</span>, <span class="string">&quot;sugar&quot;</span>: <span class="number">150</span>, <span class="string">&quot;milk&quot;</span>: <span class="number">100</span>, <span class="string">&quot;oil&quot;</span>: <span class="number">100</span>&#125;, &#123;<span class="string">&quot;sugar&quot;</span>: <span class="number">500</span>, <span class="string">&quot;flour&quot;</span>: <span class="number">2000</span>, <span class="string">&quot;milk&quot;</span>: <span class="number">2000</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(c1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="p5"><a href="#p5" class="headerlink" title="p5"></a>p5</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># def alphanumeric(password):</span></span><br><span class="line"><span class="comment">#     return re.search(&#x27;^[0-9a-zA-Z]&#123;1,&#125;$&#x27;, password) is not None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="keyword">from</span> cffi.backend_ctypes <span class="keyword">import</span> xrange</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">alphanumeric</span>(<span class="params">string</span>):</span><br><span class="line">    <span class="keyword">return</span> string.isalnum()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(alphanumeric(<span class="string">&quot;PassW0rd&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(alphanumeric(<span class="string">&quot;hello world_&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(alphanumeric(<span class="string">&quot;    &quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># def valid_solution(board):</span></span><br><span class="line"><span class="comment">#     i = 0</span></span><br><span class="line"><span class="comment">#     while i &lt; 9:</span></span><br><span class="line"><span class="comment">#         j = 0</span></span><br><span class="line"><span class="comment">#         while j &lt; 9:</span></span><br><span class="line"><span class="comment">#             l1 = []</span></span><br><span class="line"><span class="comment">#             for k in range(i, i+3):</span></span><br><span class="line"><span class="comment">#                 for h in range(j, j+3):</span></span><br><span class="line"><span class="comment">#                     l1.append(board[k][h])</span></span><br><span class="line"><span class="comment">#             l1.sort()</span></span><br><span class="line"><span class="comment">#             if l1 != [1, 2, 3, 4, 5, 6, 7, 8, 9]:</span></span><br><span class="line"><span class="comment">#                 return False</span></span><br><span class="line"><span class="comment">#             j += 3</span></span><br><span class="line"><span class="comment">#         i += 3</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     for p in board:</span></span><br><span class="line"><span class="comment">#         if sorted(p) != [1, 2, 3, 4, 5, 6, 7, 8, 9]:</span></span><br><span class="line"><span class="comment">#             return False</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     m = 0</span></span><br><span class="line"><span class="comment">#     while m &lt; 9:</span></span><br><span class="line"><span class="comment">#         n = 0</span></span><br><span class="line"><span class="comment">#         l2 =[]</span></span><br><span class="line"><span class="comment">#         while n &lt; 9:</span></span><br><span class="line"><span class="comment">#             l2.append(board[n][m])</span></span><br><span class="line"><span class="comment">#             n += 1</span></span><br><span class="line"><span class="comment">#         if sorted(l2) != [1, 2, 3, 4, 5, 6, 7, 8, 9]:</span></span><br><span class="line"><span class="comment">#             return False</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#         m += 1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     return True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二：</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">valid_solution</span>(<span class="params">board</span>):</span><br><span class="line">    valid = <span class="built_in">set</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> board:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">set</span>(row) != valid: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> [[row[i] <span class="keyword">for</span> row <span class="keyword">in</span> board] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>)]:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">set</span>(col) != valid: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">set</span>(<span class="built_in">sum</span>([row[x * <span class="number">3</span>:(x + <span class="number">1</span>) * <span class="number">3</span>] <span class="keyword">for</span> row <span class="keyword">in</span> board[y * <span class="number">3</span>:(y + <span class="number">1</span>) * <span class="number">3</span>]], [])) != valid:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list1 = [</span><br><span class="line">  [<span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">8</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">  [<span class="number">8</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">  [<span class="number">9</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">list2 = [</span><br><span class="line">  [<span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">6</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">8</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">8</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">  [<span class="number">9</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">v1 = valid_solution(list1)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line">v1 = valid_solution(list2)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;----------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># def rot13(message):</span></span><br><span class="line"><span class="comment">#     str1 = &#x27;&#x27;</span></span><br><span class="line"><span class="comment">#     for i in message:</span></span><br><span class="line"><span class="comment">#         if 65 &lt;= ord(i) &lt;= 90 and 65 &lt;= ord(i)+13 &lt;= 90:</span></span><br><span class="line"><span class="comment">#             str1 += chr(ord(i)+13)</span></span><br><span class="line"><span class="comment">#         elif 97 &lt;= ord(i) &lt;= 122 and 97 &lt;= ord(i)+13 &lt;= 122:</span></span><br><span class="line"><span class="comment">#             str1 += chr(ord(i) + 13)</span></span><br><span class="line"><span class="comment">#         elif 65 &lt;= ord(i) &lt;= 90 and (90 &lt; ord(i)+13):</span></span><br><span class="line"><span class="comment">#             str1 += chr(ord(i)+13-26)</span></span><br><span class="line"><span class="comment">#         elif 97 &lt;= ord(i) &lt;= 122 and (ord(i)+13 &gt; 122):</span></span><br><span class="line"><span class="comment">#             str1 += chr(ord(i) + 13 - 26)</span></span><br><span class="line"><span class="comment">#         else:</span></span><br><span class="line"><span class="comment">#             str1 += i</span></span><br><span class="line"><span class="comment">#     return str1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rot13</span>(<span class="params">message</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(<span class="built_in">chr</span>((<span class="number">65</span> <span class="keyword">if</span> c.isupper() <span class="keyword">else</span> <span class="number">97</span>) + ((<span class="built_in">ord</span>(c) - (<span class="number">65</span> <span class="keyword">if</span> c.isupper() <span class="keyword">else</span> <span class="number">97</span>)) + <span class="number">13</span>)%<span class="number">26</span>) <span class="keyword">if</span> c.isalpha() <span class="keyword">else</span> c <span class="keyword">for</span> c <span class="keyword">in</span> message)</span><br><span class="line"></span><br><span class="line">m1 = rot13(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(m1)</span><br><span class="line">m1 = rot13(<span class="string">&#x27;Test&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(m1)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;abcdefghijklmnopqrstuvwxyz&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;----------------------------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># def snail(snail_map):</span></span><br><span class="line"><span class="comment">#     list1 = []</span></span><br><span class="line"><span class="comment">#     i = 0</span></span><br><span class="line"><span class="comment">#     j = 0</span></span><br><span class="line"><span class="comment">#     n = 0</span></span><br><span class="line"><span class="comment">#     l = len(snail_map)</span></span><br><span class="line"><span class="comment">#     f1 = True</span></span><br><span class="line"><span class="comment">#     f2 = True</span></span><br><span class="line"><span class="comment">#     f3 = True</span></span><br><span class="line"><span class="comment">#     while l &gt; 0:</span></span><br><span class="line"><span class="comment">#         while f1:</span></span><br><span class="line"><span class="comment">#             while f2:</span></span><br><span class="line"><span class="comment">#                 while f3:</span></span><br><span class="line"><span class="comment">#                     while j &lt; l:</span></span><br><span class="line"><span class="comment">#                         list1.append(snail_map[i][j])</span></span><br><span class="line"><span class="comment">#                         j += 1</span></span><br><span class="line"><span class="comment">#                     i += 1</span></span><br><span class="line"><span class="comment">#                     if i &lt; l:</span></span><br><span class="line"><span class="comment">#                         list1.append(snail_map[i][j-1])</span></span><br><span class="line"><span class="comment">#                     else:</span></span><br><span class="line"><span class="comment">#                         f3 = False</span></span><br><span class="line"><span class="comment">#                 j -= 1</span></span><br><span class="line"><span class="comment">#                 if j == 0:</span></span><br><span class="line"><span class="comment">#                     f2 = False</span></span><br><span class="line"><span class="comment">#                 else:</span></span><br><span class="line"><span class="comment">#                     list1.append(snail_map[i-1][j-1])</span></span><br><span class="line"><span class="comment">#             i -= 1</span></span><br><span class="line"><span class="comment">#             if i == 0:</span></span><br><span class="line"><span class="comment">#                 f1 = False</span></span><br><span class="line"><span class="comment">#             else:</span></span><br><span class="line"><span class="comment">#                 list1.append(snail_map[i][j])</span></span><br><span class="line"><span class="comment">#         n += 1</span></span><br><span class="line"><span class="comment">#         l = len(snail_map) - n</span></span><br><span class="line"><span class="comment">#     return list1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法一</span></span><br><span class="line"><span class="comment"># def snail(array):</span></span><br><span class="line"><span class="comment">#     ret = []</span></span><br><span class="line"><span class="comment">#     if array and array[0]:</span></span><br><span class="line"><span class="comment">#         size = len(array)</span></span><br><span class="line"><span class="comment">#         for n in xrange((size + 1) // 2):</span></span><br><span class="line"><span class="comment">#             for x in xrange(n, size - n):</span></span><br><span class="line"><span class="comment">#                 ret.append(array[n][x])</span></span><br><span class="line"><span class="comment">#             for y in xrange(1 + n, size - n):</span></span><br><span class="line"><span class="comment">#                 ret.append(array[y][-1 - n])</span></span><br><span class="line"><span class="comment">#             for x in xrange(2 + n, size - n + 1):</span></span><br><span class="line"><span class="comment">#                 ret.append(array[-1 - n][-x])</span></span><br><span class="line"><span class="comment">#             for y in xrange(2 + n, size - n):</span></span><br><span class="line"><span class="comment">#                 ret.append(array[-y][n])</span></span><br><span class="line"><span class="comment">#     return ret</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># def snail(array):</span></span><br><span class="line"><span class="comment">#     out = []</span></span><br><span class="line"><span class="comment">#     while len(array):</span></span><br><span class="line"><span class="comment">#         out += array.pop(0)</span></span><br><span class="line"><span class="comment">#         array = list(zip(*array))[::-1] # Rotate</span></span><br><span class="line"><span class="comment">#     return out</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三:</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">snail</span>(<span class="params">array</span>):</span><br><span class="line">    next_dir = &#123;<span class="string">&quot;right&quot;</span>: <span class="string">&quot;down&quot;</span>, <span class="string">&quot;down&quot;</span>:<span class="string">&quot;left&quot;</span>, <span class="string">&quot;left&quot;</span>:<span class="string">&quot;up&quot;</span>, <span class="string">&quot;up&quot;</span>:<span class="string">&quot;right&quot;</span>&#125;</span><br><span class="line">    <span class="built_in">dir</span> = <span class="string">&quot;right&quot;</span></span><br><span class="line">    snail = []</span><br><span class="line">    <span class="keyword">while</span> array:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">dir</span> == <span class="string">&quot;right&quot;</span>:</span><br><span class="line">            snail.extend(array.pop(<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">dir</span> == <span class="string">&quot;down&quot;</span>:</span><br><span class="line">            snail.extend([x.pop(-<span class="number">1</span>) <span class="keyword">for</span> x <span class="keyword">in</span> array])</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">dir</span> == <span class="string">&quot;left&quot;</span>:</span><br><span class="line">            snail.extend(<span class="built_in">list</span>(<span class="built_in">reversed</span>(array.pop(-<span class="number">1</span>))))</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">dir</span> == <span class="string">&quot;up&quot;</span>:</span><br><span class="line">            snail.extend([x.pop(<span class="number">0</span>) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">reversed</span>(array)])</span><br><span class="line">        <span class="built_in">dir</span> = next_dir[<span class="built_in">dir</span>]</span><br><span class="line">    <span class="keyword">return</span> snail</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">l11 = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line">n1 = snail(l11)</span><br><span class="line"><span class="built_in">print</span>(n1)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/python-automation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/python-automation/" class="post-title-link" itemprop="url">python-automation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-27 13:30:21" itemprop="dateModified" datetime="2022-05-27T13:30:21+08:00">2022-05-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="http网络协议-txt"><a href="#http网络协议-txt" class="headerlink" title="http网络协议.txt"></a>http网络协议.txt</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">HTTP, HTTPS:</span><br><span class="line">    http://域名(URL)来访问一个系统。</span><br><span class="line">    是TCP之上的一种协议，处于应用层，用于数据的交互，通过请求/响应的形态来实现通信</span><br><span class="line">    URL:统一资源定位符（类似于在UI自动化中的xpath元素定位）</span><br><span class="line">    url的格式：</span><br><span class="line">    网络协议://IP: PORT/path?args1=xxx&amp;args2=xxx</span><br><span class="line"></span><br><span class="line">通信原理：</span><br><span class="line">    1.浏览器基于URL中的域名解析出IP地址</span><br><span class="line">    2.根据查询到的IP地址与服务器建立连接</span><br><span class="line">    3.构造HTTP请求，填充头部信息（定义本次数据交互的规范化格式），通信数据内容（所提交的数据内容）</span><br><span class="line">    4.服务器基于请求返回响应结果</span><br><span class="line">    5.基于HTML渲染，进行数据提示</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">请求方法：</span><br><span class="line">    get：用于获取</span><br><span class="line">        URL的长度是有限制的，所以get请求实际在运行时有提交参数的长度限制</span><br><span class="line">    post：用于提交表单</span><br><span class="line">        在实际请求时可以不考虑长度</span><br><span class="line"></span><br><span class="line">HTTP网络协议默认是无状态连接，在2版本以上的HTTP网络协议开始提供长连接</span><br><span class="line"></span><br><span class="line">在整个系统的数据交互过程中，所有的接口在请求时都是独立的个体，在HTTP协议中，</span><br><span class="line">上一次请求与当前请求毫无关联，</span><br><span class="line">这也就是为什么我们需要通过鉴权机制来实现业务上的关联</span><br><span class="line">例如：每次访问页面，速度特别慢，所以第一次访问时，会在客户端保存cookie文件</span><br><span class="line"></span><br><span class="line">cookie, session, token三者之间的区别</span><br><span class="line">早期就只是简单的文档，图片的相关内容的浏览</span><br><span class="line">中期的系统开发以交互为主要的系统实现内容，要交互就需要有对话，</span><br><span class="line">于是就有了session，会话ID(sessionid)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="selenium自动化测试的实现-txt"><a href="#selenium自动化测试的实现-txt" class="headerlink" title="selenium自动化测试的实现.txt"></a>selenium自动化测试的实现.txt</h1><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.环境的部署：</span><br><span class="line">    1.搭建编程环境：PYTHON3.7+</span><br><span class="line">    2.搭建Selenium环境</span><br><span class="line">        安装指令：pip install selenium --default-timeout=1000</span><br><span class="line">        安装出错解决方法：</span><br><span class="line">            1.升级pip</span><br><span class="line">            2.遇到超时错误，readtimeout error, 把default指令加载到末尾即可</span><br><span class="line">    3.搭建Webdriver环境</span><br><span class="line">        将下载的webdriver文件放到python的安装路径。</span><br><span class="line">        PS: 自动化执行，所有的浏览器安装在默认路径</span><br><span class="line">    4.实现测试</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="TestforWebUI-–-selenium-py"><a href="#TestforWebUI-–-selenium-py" class="headerlink" title="TestforWebUI – selenium.py"></a>TestforWebUI – selenium.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Selenium的运行机制</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Selenium  --&gt; Webdriver --&gt;  Webbrowser</span></span><br><span class="line"><span class="string">          &lt;--     |      &lt;--</span></span><br><span class="line"><span class="string">Selenium hello world</span></span><br><span class="line"><span class="string">1.创建浏览器</span></span><br><span class="line"><span class="string">2.访问百度</span></span><br><span class="line"><span class="string">3.输入搜索条件</span></span><br><span class="line"><span class="string">4.点击搜索按钮</span></span><br><span class="line"><span class="string">5.关闭浏览器</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入Selenium包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动浏览器，访问指定的URL</span></span><br><span class="line">driver = webdriver.Edge()</span><br><span class="line">driver.get(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#查找输入框，输入关键字</span></span><br><span class="line">driver.find_element_by_id(<span class="string">&quot;kw&quot;</span>).send_keys(<span class="string">&quot;电影看看&quot;</span>)</span><br><span class="line">driver.find_element_by_id(<span class="string">&quot;su&quot;</span>).click()</span><br><span class="line">sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment">#点击第一条搜索结果</span></span><br><span class="line">driver.find_element_by_xpath(<span class="string">&#x27;//*[@id=&quot;1&quot;]/h3/a&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">5</span>)</span><br><span class="line"><span class="comment">#关闭浏览器，释放资源</span></span><br><span class="line"><span class="comment">#quit结束进程，关闭浏览器，close关闭当前句柄页页面</span></span><br><span class="line"><span class="comment"># driver.quit()</span></span><br><span class="line"><span class="comment">#　切换句柄</span></span><br><span class="line">handles = driver.window_handles</span><br><span class="line">driver.close()</span><br><span class="line">driver.switch_to.window(handles[<span class="number">1</span>])</span><br><span class="line">driver.close()</span><br><span class="line"><span class="comment"># print(driver.window_handles)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="webdriverlink-txt"><a href="#webdriverlink-txt" class="headerlink" title="webdriverlink.txt"></a>webdriverlink.txt</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Chrome浏览器驱动下载地址：http://chromedriver.storage.googleapis.com/index.html</span><br><span class="line"></span><br><span class="line">Firfox浏览器驱动下载地址：https://github.com/mozilla/geckodriver/releases</span><br><span class="line"></span><br><span class="line">IE浏览器驱动下载地址：http://docs.seleniumhq.org/download/</span><br><span class="line"></span><br><span class="line">Edge浏览器驱动下载地址：https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/</span><br><span class="line"></span><br><span class="line">https://www.selenium.dev/downloads/</span><br></pre></td></tr></table></figure>

<h1 id="接口测试–Request-py"><a href="#接口测试–Request-py" class="headerlink" title="接口测试–Request.py"></a>接口测试–Request.py</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 网络协议：HTTP是核心的协议</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 接口：是为系统提供服务的一种形式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">请求--传话通道--服务端接收请求的地方--结果--传话通道--返回响应</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1.规范</span></span><br><span class="line"><span class="string">    url = 网络协议：//IP:Port/path?args1=&amp;args2=</span></span><br><span class="line"><span class="string">    http://www.baidu.com</span></span><br><span class="line"><span class="string">    = http://182.61.200.6:80</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=baidu&amp;wd=python&amp;fenlei=256&amp;rsv_pq=80b2444e0011736d&amp;rsv_t=06a0z4Ojuehp2lnNZfoABJQqJyVmUxhbIc8EncEkKfc6jRsyjejo809wQko&amp;rqlang=cn&amp;rsv_enter=0&amp;rsv_dl=tb&amp;rsv_sug3=6&amp;rsv_sug1=6&amp;rsv_sug7=100&amp;rsv_btype=i&amp;prefixsug=python&amp;rsp=3&amp;inputT=6144&amp;rsv_sug4=6144</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2.基本信息：</span></span><br><span class="line"><span class="string">    http端口默认80</span></span><br><span class="line"><span class="string">    https端口默认443</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3.请求的方法：</span></span><br><span class="line"><span class="string">    method: get和post是核心，选择何种请求方法，是根据接口来决定的</span></span><br><span class="line"><span class="string">    在企业中，所有的系统都是有接口的，接口都是依据接口文档进行实现的</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Requests实现接口测试：</span></span><br><span class="line"><span class="string">1.环境安装</span></span><br><span class="line"><span class="string">pip install requests</span></span><br><span class="line"><span class="string">2.接口测试：</span></span><br><span class="line"><span class="string">    响应状态码：用于表示本次请求的发送是否完成，完成状态是什么？</span></span><br><span class="line"><span class="string">    2**，表示成功</span></span><br><span class="line"><span class="string">    3**，表示重定向</span></span><br><span class="line"><span class="string">    4**，路径错误</span></span><br><span class="line"><span class="string">    5**，系统异常</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实现一个get请求的测试效果</span></span><br><span class="line">url = <span class="string">&quot;https://www.baidu.com/&quot;</span></span><br><span class="line"><span class="comment"># data = &#123;&#x27;wd&#x27;: &#x27;python&#x27;&#125;</span></span><br><span class="line"><span class="comment"># res = requests.get(url=url, params=data)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># print(res.text)</span></span><br><span class="line">headers = &#123;<span class="string">&quot;xxxx&quot;</span>&#125;</span><br><span class="line">data = &#123;<span class="string">&quot;ie&quot;</span>: <span class="string">&quot;utf-16 BE&quot;</span>, <span class="string">&quot;wd&quot;</span>: <span class="string">&quot;pycharm&quot;</span>&#125;</span><br><span class="line">res = requests.post(url=url, headers=headers, data=data)</span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br><span class="line"><span class="comment"># 断言校验</span></span><br><span class="line">text = json.loads(res.text)</span><br><span class="line"><span class="built_in">print</span>(text[<span class="string">&#x27;&lt;/html&gt;&#x27;</span>])</span><br><span class="line"><span class="keyword">assert</span> <span class="string">&#x27;&lt;/html&gt;&#x27;</span> == text[<span class="string">&#x27;&lt;/html&gt;&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/Linux%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/Linux%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">linux基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-28 13:06:57" itemprop="dateModified" datetime="2022-05-28T13:06:57+08:00">2022-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-Linux命令格式"><a href="#1-Linux命令格式" class="headerlink" title="1.Linux命令格式"></a>1.Linux命令格式</h1><p>命令名称 [命名参数] [命名对象]</p>
<h2 id="（1）获取登录信息-w-who-last"><a href="#（1）获取登录信息-w-who-last" class="headerlink" title="（1）获取登录信息-w/who/last"></a>（1）获取登录信息-w/who/last</h2><p>who am i – 获取当前用户信息</p>
<p>Logout/exit – 登出当前用户</p>
<p>w – 详细登录信息</p>
<p>last – 历史登录信息</p>
<h2 id="2-History-历史命令-c-清除历史"><a href="#2-History-历史命令-c-清除历史" class="headerlink" title="(2) History - 历史命令 -c 清除历史"></a>(2) History - 历史命令 -c 清除历史</h2><h2 id="3-Wget-通过网络获取文件"><a href="#3-Wget-通过网络获取文件" class="headerlink" title="(3) Wget - 通过网络获取文件"></a>(3) Wget - 通过网络获取文件</h2><p>-O 重命名下载的文件</p>
<p>例如：wget <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python3.7.3/Python-3.7.3.tar.xz">https://www.python.org/ftp/python/python3.7.3/Python-3.7.3.tar.xz</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0a1.tgz</span><br><span class="line">tar -xvf Python-3.8.0a1.tgz</span><br></pre></td></tr></table></figure>

<p> wget <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python3.7.3/Python-3.7.3.tar.xz">https://www.python.org/ftp/python/python3.7.3/Python-3.7.3.tgz</a></p>
<h2 id="4-Xz-z-压缩-d-解压缩"><a href="#4-Xz-z-压缩-d-解压缩" class="headerlink" title="(4) Xz -z 压缩 -d 解压缩"></a>(4) Xz -z 压缩 -d 解压缩</h2><h2 id="5-Tar-xvf解归档-cvf-创建归档文件"><a href="#5-Tar-xvf解归档-cvf-创建归档文件" class="headerlink" title="(5) Tar -xvf解归档 -cvf 创建归档文件"></a>(5) Tar -xvf解归档 -cvf 创建归档文件</h2><h2 id="6-Cat-n-添加行号-cat-n-taobao-html-more"><a href="#6-Cat-n-添加行号-cat-n-taobao-html-more" class="headerlink" title="(6) Cat -n 添加行号 cat -n taobao.html | more"></a>(6) Cat -n 添加行号 cat -n taobao.html | more</h2><h2 id="7-管道-将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）"><a href="#7-管道-将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）" class="headerlink" title="(7)  | 管道 - 将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）"></a>(7)  | 管道 - 将多个进程连接起来（把前一个命令的输出作为下一个命令的输入）</h2><h2 id="8-2-gt-错误输出重定向"><a href="#8-2-gt-错误输出重定向" class="headerlink" title="(8) 2&gt; - 错误输出重定向"></a>(8) 2&gt; - 错误输出重定向</h2><h2 id="9-2-gt-gt-错误追加输出重定向"><a href="#9-2-gt-gt-错误追加输出重定向" class="headerlink" title="(9) 2&gt;&gt; - 错误追加输出重定向"></a>(9) 2&gt;&gt; - 错误追加输出重定向</h2><h2 id="10-Nginx-Web服务器（HTTP服务器）-反向代理服务器"><a href="#10-Nginx-Web服务器（HTTP服务器）-反向代理服务器" class="headerlink" title="(10) Nginx - Web服务器（HTTP服务器）/反向代理服务器"></a>(10) Nginx - Web服务器（HTTP服务器）/反向代理服务器</h2><p>nginx 启用</p>
<p>Nginx -s stop 停止</p>
<h2 id="11-Yum-list-installed-grep-nginx-–-grep查询字符串"><a href="#11-Yum-list-installed-grep-nginx-–-grep查询字符串" class="headerlink" title="(11) Yum list installed | grep nginx – grep查询字符串"></a>(11) Yum list installed | grep nginx – grep查询字符串</h2><h2 id="12-Yum-y-–自动同意所有询问"><a href="#12-Yum-y-–自动同意所有询问" class="headerlink" title="(12) Yum -y –自动同意所有询问"></a>(12) Yum -y –自动同意所有询问</h2><h2 id="13-Gcc-–version-C语言编译器"><a href="#13-Gcc-–version-C语言编译器" class="headerlink" title="(13) Gcc –version C语言编译器"></a>(13) Gcc –version C语言编译器</h2><h2 id="14-源代码构建安装Python解释器"><a href="#14-源代码构建安装Python解释器" class="headerlink" title="(14) 源代码构建安装Python解释器"></a>(14) 源代码构建安装Python解释器</h2><p>下载: wget <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python/3.8.0/Python-3.8.0a1.tgz">https://www.python.org/ftp/python/3.8.0/Python-3.8.0a1.tgz</a></p>
<p>解压缩和解归档：xz -d xxx.xz/tar -xvf xxx.tar</p>
<p>补充依赖库：</p>
<p>yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel</p>
<p>进入Python源代码目录安装前准备工作：</p>
<p>cd pythonxxx</p>
<p>./configure –prefix=usr/local/python38 –enable-optimizations</p>
<p>构建和安装：make &amp;&amp; make install</p>
<p>注册PATH环境变量：</p>
<p>Cd ~</p>
<p>Vim .bash_profile</p>
<p>PATH=…:/usr/local/python38/bin</p>
<p>激活环境变量：source .bash_profile</p>
<p>测试安装是否成功：python3 –version</p>
<p>创建链接：</p>
<p>- 硬链接：- ln /code/example01.py /root/xxx (给磁盘文件增加了新的引用，只要引用数不为0文件就不会消失)</p>
<p>- 软链接：- ln -s /usr/local/python38/bin/python3 /usr/bin/python3（相当于windows系统下的快捷方式）</p>
<h2 id="15-Ls-l长格式查看"><a href="#15-Ls-l长格式查看" class="headerlink" title="(15) Ls -l长格式查看"></a>(15) Ls -l长格式查看</h2><p>-rwxr-xr-x 当前文件r:可读w:可写x:可执行</p>
<h2 id="16-VIM编辑模式："><a href="#16-VIM编辑模式：" class="headerlink" title="(16) VIM编辑模式："></a>(16) VIM编辑模式：</h2><p>I/a: 编辑</p>
<p>Esc: 退出编辑–&gt;命令模式–&gt; :或/ 末行模式</p>
<p>:q 退出</p>
<p>:set nu 显示行号</p>
<p>:set nonu 去掉行号</p>
<p>:set ts=4 tab键占位数</p>
<p>Shift+zz/:wq ： 保存退出</p>
<p>:syntax on 高亮语法/颜色代码 off关掉</p>
<p>:set ruler 显示光标所在位置 set noruler关闭</p>
<p>命令模式下输入G移动光标到末尾，500G表示光标移动到第500行；gg - 移到开头</p>
<p>上下左右移动光标：hjkl -左下右上（前面可以加数字）</p>
<p>Ctrl+y/ctrl+e：移动一行</p>
<p>Ctrl+f/ctrl+b：翻一页</p>
<p>0/$：移到行首行尾</p>
<p>W: 移到下一个单词</p>
<p>dd: 光标所在行删除一行，100dd删除100行</p>
<p>yy: 复制光标所在行，10yy从所在行复制10行</p>
<p>P: 粘贴，5P粘贴5次</p>
<p>U: 撤销 / ctrl+R恢复</p>
<p>多文件操作：</p>
<p>:ls 显示所有同时打开的文件</p>
<p>:b 2 切换到第二个文件</p>
<p>:vs 垂直分屏</p>
<p>:sp 水平分屏</p>
<p>Ctrl+ww 切换分屏</p>
<p>:qa 退出所有分屏</p>
<p>:wqa 保存退出</p>
<p>Vim -d 文件1 文件2 - 打开多文件进行版本比较</p>
<p>映射快捷键：</p>
<p>- map <F2> gg9999dd 清空命令行</p>
<p>- inoremap _main if <strong>name</strong>== ‘__main__’:</p>
<h2 id="17-Alias-hao-’ls-laR’-把常用命令设置别名"><a href="#17-Alias-hao-’ls-laR’-把常用命令设置别名" class="headerlink" title="(17) Alias hao=’ls -laR’ 把常用命令设置别名"></a>(17) Alias hao=’ls -laR’ 把常用命令设置别名</h2><p>①   Unalias hao 取消别名</p>
<h2 id="18-宏操作："><a href="#18-宏操作：" class="headerlink" title="(18) 宏操作："></a>(18) 宏操作：</h2><p>录制宏：qa (a是寄存器的名字) - recording</p>
<p>结束录制：q</p>
<p>播放宏：@a</p>
<h2 id="19-查找和替换："><a href="#19-查找和替换：" class="headerlink" title="(19) 查找和替换："></a>(19) 查找和替换：</h2><p>查找 - ？或者/ - /idx - 支持正则</p>
<p>N / n - 正向搜索/反向搜索</p>
<p>替换 - :1,$s/idx/index/cgie</p>
<p> - c - confirm - 确认</p>
<p> - g - global - 全局(一行出现多出匹配全部找出)</p>
<p> - i - ignore case - 忽略大小写</p>
<p> - e - error - 忽略错误</p>
<h2 id="20-查找命令："><a href="#20-查找命令：" class="headerlink" title="(20) 查找命令："></a>(20) 查找命令：</h2><p> - grep - 搜索字符串(支持正则表达式)</p>
<p> - find - 搜索文件</p>
<p>-name - 根据名字搜索 - find / -name “*.html”</p>
<p>-size - 根据大小搜索 - -10M / +10M</p>
<p>-type - 根据类型搜索 - d / f / l / s</p>
<p>-atime - 最后访问时间</p>
<p>-mtime - 最后修改时间 - find . -mtime 0</p>
<p>-ctime - 创建时间</p>
<h2 id="21-网络相关命令："><a href="#21-网络相关命令：" class="headerlink" title="(21) 网络相关命令："></a>(21) 网络相关命令：</h2><p>- ssh - 安全远程连接 - 例如：ssh <a href="mailto:root@xx.xxx.xxx.xx(云服务器公网ip)">root@xx.xxx.xxx.xx(云服务器公网ip)</a></p>
<p>- scp - 安全文件拷贝 - 例如：scp -r /root/code <a href="mailto:root@xx.xxx.xxx.xx:/root/code">root@xx.xxx.xxx.xx:/root/code</a></p>
<p>- sftp - 安全文件传输（file transfer protocol）- 例如：sftp <a href="mailto:root@xx.xxx.xxx.xx">root@xx.xxx.xxx.xx</a></p>
<p>-put - 上传</p>
<p>-get - 下载</p>
<p>-bye - 退出</p>
<p>-help 查看帮助</p>
<p>-lls 本地列出文件</p>
<p>-ping - 检查网络可达性 - ICMP - Internet Control Management Protocol - 网络层</p>
<p> - ttl - time to live</p>
<p> - ping to death - DDoS - Distributed Deny of Service - 分布式拒绝服务攻击</p>
<p>-ifconfig / ip</p>
<p>- 127.0.0.1 - 回环地址 - localhost</p>
<p>-netstat</p>
<p>- netstat -nap | grep 进程或端口</p>
<p>-p - process - 查看进程信息（进程编号和进程名字）</p>
<p>- kill 进程号</p>
<h2 id="22-nginx启动停止重启服务："><a href="#22-nginx启动停止重启服务：" class="headerlink" title="(22) nginx启动停止重启服务："></a>(22) nginx启动停止重启服务：</h2><p>Service nginx start</p>
<p>Systemctl start nginx</p>
<p>Systemctl stop nginx</p>
<p>Systemctl restart nginx</p>
<p>Systemctl status nginx</p>
<p>Systemctl enable nginx - 开机自启</p>
<p>Systemctl disable nginx</p>
<h2 id="23-进程操作相关命令："><a href="#23-进程操作相关命令：" class="headerlink" title="(23) 进程操作相关命令："></a>(23) 进程操作相关命令：</h2><p>~命令+&amp; - 把命令放到后台运行</p>
<p>Ctrl+z - 把前台命令停止并放到后台运行</p>
<p>bg %编号 - 重新运行已停止的命令</p>
<p>~ ps - processes - 例如：ps -ef | grep redis | grep -v grep 不显示grep信息</p>
<p>~kill - 结束进程</p>
<p>~jobs - 查看后台运行或停止的进程</p>
<p>~fg - foreground - 将后台命令至于前台</p>
<p>~bg - background - 让命令在后台运行 ctl+z</p>
<p>~top - 任务管理器 q退出</p>
<h2 id="24-centos7-命令行界面上下翻页"><a href="#24-centos7-命令行界面上下翻页" class="headerlink" title="(24) centos7 命令行界面上下翻页:"></a>(24) centos7 命令行界面上下翻页:</h2><p>shift + pageup 上翻</p>
<p>shift + pagedown 下翻</p>
<h2 id="25-Linux下命令行中的复制和粘贴"><a href="#25-Linux下命令行中的复制和粘贴" class="headerlink" title="(25) Linux下命令行中的复制和粘贴:"></a>(25) Linux下命令行中的复制和粘贴:</h2><p>安装gpm：yum install -y gpm*</p>
<p>开启gpm服务：systemctl start gpm</p>
<p>按住鼠标左键，选中想要复制的内容，松开就完成复制，再在复制的位置按右键就完成粘贴。</p>
<h2 id="26-数据库："><a href="#26-数据库：" class="headerlink" title="(26) 数据库："></a>(26) 数据库：</h2><p>关系型数据库 - Oracle / MySQL / MariaDB - 二维表</p>
<p>非关系型数据库 - MongoDB / Redis / ElasticSearch - 文档数据库/KV数据库</p>
<p>Yum install -y mariadb mariadb-server</p>
<p>Mysqld - MySQL Daemon - 守护进程 </p>
<p>Rpm -ivh mysql-5.7.34-1.el7.x86_64.rpm</p>
<p>Rpm -e 擦除</p>
<p>Systemctl start mariadb - 启动mysql</p>
<p>Mysql -u root -p - 连接mysql</p>
<p>Use mysql</p>
<p>修改mysql密码</p>
<p>Update user set password=password(‘123456’) where user=’root’;</p>
<p>Flush privileges;</p>
<p>10.4版本以后：</p>
<p>select user, password, host from user; # 查询已有用户</p>
<p>SET PASSWORD FOR ‘bob‘@’%.loc.gov’ = PASSWORD(‘newpass’); # 根据用户及host修改密码</p>
<p>SET PASSWORD FOR ‘bob‘@localhost = PASSWORD(“”); # # 根据用户及host删除密码</p>
<p>delete from user where user=’XXX’ and host=’localhost’; ## 指定域及用户删除用户</p>
<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root‘@’%’ IDENTIFIED BY ‘123456’ WITH GRANT OPTION; 创建一个用户能使用root从任何主机连接到mysql服务器。</p>
<p>—Redis数据库：</p>
<p><a target="_blank" rel="noopener" href="https://redis.io/">https://redis.io</a></p>
<p><a target="_blank" rel="noopener" href="https://redisdoc.com/">https://redisdoc.com</a> 使用手册</p>
<p>下载Radis:</p>
<p>Wget <a target="_blank" rel="noopener" href="https://download.redis.io/releases/redis-6.2.2.tar.gz?_ga=2.183820325.200813573.1619352920-1877153441.1619352920">https://download.redis.io/releases/redis-6.2.2.tar.gz?_ga=2.183820325.200813573.1619352920-1877153441.1619352920</a></p>
<p>解压缩解归档</p>
<p>安装：make &amp;&amp; make install</p>
<p>redis:编译时报错 /bin/sh: cc: command not found：</p>
<p>补依赖项：yum -y install gcc gcc-c++ libstdc++-devel</p>
<p>【Redis】编译错误zmalloc.h:50:31: fatal error: jemalloc/jemalloc.h: No such file or directory：</p>
<p>–make MALLOC=libc</p>
<p>–redis-server –version - 查看是否安装成功</p>
<p>–redis-sever &amp; - 启动redis服务(&amp;表示后台运行)</p>
<p>–netstat -nap | grep 6379或 ps -ef | grep redis | grep -v grep 或 jobs - 查看redis服务启动是否成功</p>
<p>–redis-server –requirepass 123456 &amp; - 带密码启动</p>
<p>–redis-cli - 客户端访问 - auth 123456 - 输密码</p>
<p>–redis-cli – 关闭redis</p>
<p>–shutdown</p>
<h2 id="27-安装和使用Git"><a href="#27-安装和使用Git" class="headerlink" title="(27) 安装和使用Git:"></a>(27) 安装和使用Git:</h2><p>​    Git官网：<a target="_blank" rel="noopener" href="http://git-scm.com/">http://git-scm.com/</a></p>
<p>点击Tarballs，右击选择复制所需文件的下载链接地址</p>
<p>Wget + 链接地址</p>
<p>解压缩： xz -d xxx.tar.xz</p>
<p>解归档：tar -xvf xxx.tar</p>
<p>安装依赖项：yum install libcurl-devel； yum install zlib-devel</p>
<p>安装GIT: ./configure –prefix=/usr/local/</p>
<p> Make $$ make install</p>
<p> Git –version</p>
<p>版本控制：</p>
<p>1990s - CVS / VSS - 锁定模式</p>
<p>2000 - Subversion(SVN) - 合并模式</p>
<p>必须有版本控制的中央服务器才能使用版本控制 - 中央集权型的版本控制系统</p>
<p>分布式版本控制系统 - 2005 - Git</p>
<p>Git / Mercury</p>
<p>—Git命令：</p>
<p>Git init - 将文件夹初始化为Git仓库</p>
<p>Git add xxxx - 添加文件到git仓库</p>
<p>Git status - 查看添加状态</p>
<p>Git add . - 添加当前目录所有文件</p>
<p>Git commit -m ‘提交说明’ - 提交命令</p>
<p>按提示设置账户默认ID</p>
<p>Git log - 查看日志</p>
<p>若使用 rm -f *误删除：git checkout – . 恢复所有文件</p>
<p>或使用 git log 查看commit一栏前6位作为ID</p>
<p>Git reset –hard <ID> - 回到指定版本</p>
<p>git reset –hard HEAD^ - 回到上一版本</p>
<p>Git reflog 查看已修改过版本</p>
<p>—国内代码托管平台：gitee /coding</p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/">https://gitee.com</a> – account: <a href="mailto:1174185292@qq.com">1174185292@qq.com</a> Z110112WILOVEME</p>
<p><a target="_blank" rel="noopener" href="https://coding.net/">https://coding.net</a></p>
<p>Git clone <a target="_blank" rel="noopener" href="https://gitee.com/zwzwzw001/python001.git">https://gitee.com/zwzwzw001/python001.git</a> - 从网站克隆到本地</p>
<p>-git push - 将本地代码推到服务器</p>
<p>=git pull - 将服务器更新同步到本地</p>
<h2 id="28-centos不小心删除-root目录该如何解决"><a href="#28-centos不小心删除-root目录该如何解决" class="headerlink" title="(28) centos不小心删除/root目录该如何解决?"></a>(28) centos不小心删除/root目录该如何解决?</h2><p>1.直接创建/root目录；mkdir /root</p>
<p>2.复制/etc/skel/下的隐藏文件到/root目录下；cp /etc/skel/.bash* /root</p>
<p>3.重启即可</p>
<h2 id="29-数据库-数据的仓库-database-实现数据持久化和数据管理"><a href="#29-数据库-数据的仓库-database-实现数据持久化和数据管理" class="headerlink" title="(29) 数据库 - 数据的仓库 - database - 实现数据持久化和数据管理"></a>(29) 数据库 - 数据的仓库 - database - 实现数据持久化和数据管理</h2><p>持久化 - 将数据从内存转移到能够长久保存数据的存储介质的过程</p>
<p>保证数据的完整性和一致性</p>
<p>完整性：</p>
<p>\1. 实体完整性 - 每一个实体都是独一无二的，没有冗余 - 主键/唯一索引</p>
<p>\2. 参照完整性 - 外键</p>
<p>\3. 域完整性 - 录入的数据都是有效的数据 - 数据类型/数据长度/非空约束/默认值约束/检查约束</p>
<p>Alter table tb_score add constraint ck_score_scmark check (scmark between 0 and 100);</p>
<p>一致性：事务 - 要么全成功要么全失败，操作不可分割 - ACID特性</p>
<p>\1. A - Atomicity - 原子性 - 不可分割</p>
<p>\2. C - Consistency - 一致性 - 事务前后数据状态要一致</p>
<p>\3. I - Isolation - 隔离性 - 并发的多个事务不知道彼此的中间状态</p>
<p>\4. D - Duration - 持久性 - 事务完成后数据要做持久化</p>
<p>分类：关系型数据库(SQL)和非关系型数据库(NoSQL)</p>
<p>- 文档数据库 - MongoDB / ElasticSearch</p>
<p>- 键值对数据库 - Redis - 内存 - 单线程+异步I/O （多路I/O复用）</p>
<p>- 列族数据库</p>
<p>- 图数据库</p>
<p>计算密集型应用 - 多进程 + 多线程</p>
<p>I/O密集型应用 - 单线程 + 异步I/O (协程（微线程）)</p>
<p>2008年 - LLOOGG - log(日志)</p>
<p>MySQL - Redis - REmote DIctionary Server</p>
<p>Github / Twitter / Sina / </p>
<p>冷数据（不经常使用）/ 热数据（经常使用）</p>
<p>\1. 高速缓存服务（用户经常访问的数据从数据库搬到内存）</p>
<p>\2. 实时排行榜</p>
<p>\3. 投票点赞</p>
<p>\4. 消息队列</p>
<p>Yum install redis</p>
<p>源代码构建安装 make &amp;&amp; make install</p>
<p>Redis-server –port 1234 –requirepass 123456 –appendonly yes</p>
<p>Redis-server –requirepass 123456 &gt; redis.log&amp;</p>
<p>Redis-server 配置文件(redis.conf) &gt; redis.log &amp;</p>
<p>启动Redis客户端：</p>
<p>Redis-cli -h 主机IP地址 -p 端口（默认6379）</p>
<p>主机：端口&gt;auth 密码</p>
<p>主机：端口&gt;ping</p>
<p>&gt;keys *</p>
<p>&gt;type </p>
<p>Redis 命令参考 - <a target="_blank" rel="noopener" href="http://redisdoc.com/">http://redisdoc.com/</a></p>
<p>哈希存储 - 性能非常好的存储方案 – set(集合)</p>
<p>Obj — 哈希函数 —&gt; 哈希码（散列码） —&gt; 对象在内存中存储的位置</p>
<p>文件 —&gt; MD5 / SHA1 / SHA256 —&gt; 哈希码（数字指纹/签名）</p>
<p>哈希表</p>
<p>hmset stu1 id 1001 name xxx sex male te1 11323232xxx</p>
<p>Hget stu1 name</p>
<p>Hmget stu1 name sex tel</p>
<p>Hvals stu1</p>
<p>Hgetall stu1</p>
<p>Hdel stu1 tel </p>
<p>- Redis主从复制读写分离</p>
<p>Redis-server –slaveof [主ip] 6379 –masterauth 123456 &gt; redis.log &amp;</p>
<p>info replication # 查看主从复制信息exitexit</p>
<p>Slaveof no one</p>
<p>-Redis修复持久化文件的工具</p>
<p>-dump.rdb文件误删解决方法</p>
<p>redis-server –requirepass 123456 –appendonly yes &gt; redis.log &amp; # 生成.aof文件的保存方式</p>
<p>Redis-check-aof –fix appendonly.aof</p>
<p>Redis-check-rdb –fix dump.rdb</p>
<p>Tornado / Node.js</p>
<p>文件系统 / 层次数据库 / 网状数据库</p>
<p>- 关系型数据库：</p>
<p>- 理论基础：关系代数和集合论</p>
<p>-具体表象：用二维表来保存数据 - 学生表</p>
<p>=行：一条记录 - 一个学生的信息</p>
<p>-列：一个字段 - 学生的属性</p>
<p>-主键列：能够唯一标识一条记录的列，如学号</p>
<p>-编程语言：SQL - 结构化查询语言</p>
<p>- DDL - 数据定义语言 - create / drop / alter</p>
<p>- create database xxx default charset utf8mb4; - 创建名为xxx的数据库</p>
<p>- use school;</p>
<p>- show tables;</p>
<p>- create user ‘root’@’%’ identified by ‘123456’; 添加访问权限</p>
<p>- flush privileges</p>
<p>- grant all privileges on <em>.</em> to ‘root’@’%’ with grant option; 允许所有客户端连接</p>
<p>- flush privileges</p>
<p>- drop database if exists xxx - 删除xxx数据库</p>
<p>- ？ data types - 查看数据类型</p>
<p>- ？ int - int类型描述</p>
<p>- DML - 数据操作语言 - insert / delete / update / select</p>
<p>- DCL - 数据控制语言 - grant / revoke</p>
<p>-产品：Oracle - 甲骨文</p>
<p>IBM DB2</p>
<p>Microsoft SQLServer</p>
<p>Sybase</p>
<p>MySQL</p>
<p>PostgreSQL</p>
<p>SQLite</p>
<p>学生（学号、姓名、性别、生日、家庭住址）</p>
<p>学院（编号、名称、网址、。。。。）</p>
<p>插入不少于3条学院记录</p>
<p>实体：学生、学院</p>
<p>关系：属于</p>
<p>重数：多对一</p>
<p>– 一对一重数关系</p>
<p>create table tb_person</p>
<p>(</p>
<p>pid int auto_increment,</p>
<p>pname varchar(50),</p>
<p>primary key (pid)</p>
<p>);</p>
<p>create table tb_idcard</p>
<p>(</p>
<p>cid int auto_increment,</p>
<p>cno char(18) not null,</p>
<p>ps varchar(255) not null,</p>
<p>expire date not null,</p>
<p>pid int not null,</p>
<p>PRIMARY key (cid)</p>
<p>);</p>
<p>alter table tb_idcard add CONSTRAINT fk_card_pid foreign key (pid) REFERENCES tb_person (pid);</p>
<p>– 一对一是多对一的特例，加上唯一性约束</p>
<p>alter table tb_idcard add CONSTRAINT uni_card_pid unique (pid);</p>
<p>–SQL注射攻击：</p>
<p>tb_user</p>
<p>Userid    username     userpass …</p>
<p>1          admin        123456</p>
<p>select * from tb_user where username=’%s’ and password=’%s’</p>
<p>Username=admin</p>
<p>Password=’x’ or ‘1’=’1’</p>
<p>‘; update … where ‘1’ = ‘1’</p>
<p>select * from tb_user where username=’admin’ and password=’x’ or ‘1’=’1’</p>
<p>select * from tb_user where username=’admin’ and password=’‘; update … where ‘1’ = ‘1’</p>
<p># 向表中添加数据应避免用字符串拼接，防止SQL注射攻击。</p>
<h1 id="—-防火墙"><a href="#—-防火墙" class="headerlink" title="— 防火墙"></a>— 防火墙</h1><p>开启：systemctl start firewalld</p>
<p>添加80端口：firewall-cmd –add-port=80/tcp –permanent</p>
<p>重启：systemctl restart firewalld</p>
<p>firewalld和iptables</p>
<p>If you haven’t any real data in your database then clear all in /var/lib/mysql.</p>
<p>After that try again to run command mysql_install_db –user=mysql –basedir=/usr –datadir=/var/lib/mysql to initialize database directory.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/" class="post-title-link" itemprop="url">linux常用命令大全</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-30 15:37:19" itemprop="dateModified" datetime="2022-08-30T15:37:19+08:00">2022-08-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="系统信息"><a href="#系统信息" class="headerlink" title="/系统信息"></a>/系统信息</h2><p>arch 显示机器的处理器架构</p>
<p>uname -m 显示机器的处理器架构</p>
<p>uname -r 显示正在使用的内核版本</p>
<p>dmidecode -q 显示硬件系统部件 - (SMBIOS / DMI) </p>
<p>hdparm -i /dev/hda 罗列一个磁盘的架构特性 </p>
<p>hdparm -tT /dev/sda 在磁盘上执行测试性读取操作 </p>
<p>cat /proc/cpuinfo 显示CPU info的信息</p>
<p>cat /proc/interrupts 显示中断 </p>
<p>cat /proc/meminfo 校验内存使用 </p>
<p>cat /proc/swaps 显示哪些swap被使用</p>
<p>cat /proc/version 显示内核的版本 </p>
<p>cat /proc/net/dev 显示网络适配器及统计 </p>
<p>cat /proc/mounts 显示已加载的文件系统 </p>
<p>lspci -tv 罗列 PCI 设备 </p>
<p>lsusb -tv 显示 USB 设备 </p>
<p>date 显示系统日期</p>
<p>cal 2007 显示2007年的日历表 </p>
<p>date 041217002007.00 设置日期和时间 - 月日时分年.秒 </p>
<p>clock -w 将时间修改保存到 BIOS </p>
<h1 id="关机-系统的关机、重启以及登出"><a href="#关机-系统的关机、重启以及登出" class="headerlink" title="关机 (系统的关机、重启以及登出 )"></a>关机 (系统的关机、重启以及登出 )</h1><p>shutdown -h now 关闭系统</p>
<p>init 0 关闭系统</p>
<p>telinit 0 关闭系统</p>
<p>shutdown -h hours:minutes &amp; 按预定时间关闭系统 </p>
<p>shutdown -c 取消按预定时间关闭系统</p>
<p>shutdown -r now 重启</p>
<p>reboot 重启</p>
<p>logout 注销</p>
<h1 id="文件和目录"><a href="#文件和目录" class="headerlink" title="文件和目录"></a>文件和目录</h1><p>cd /home 进入 ‘/ home’ 目录’ </p>
<p>cd .. 返回上一级目录</p>
<p>cd ../.. 返回上两级目录</p>
<p>cd 进入个人的主目录</p>
<p>cd ~user1 进入个人的主目录</p>
<p>cd - 返回上次所在的目录</p>
<p>pwd 显示工作路径</p>
<p>ls 查看目录中的文件</p>
<p>ls -F 查看目录中的文件</p>
<p>ls -l 显示文件和目录的详细资料</p>
<p>ls -a 显示隐藏文件</p>
<p>ls <em>[0-9]</em> 显示包含数字的文件名和目录名</p>
<p>tree 显示文件和目录由根目录开始的树形结构</p>
<p>lstree 显示文件和目录由根目录开始的树形结构</p>
<p>mkdir dir1 创建一个叫做 ‘dir1’ 的目录’ </p>
<p>mkdir dir1 dir2 同时创建两个目录 </p>
<p>mkdir -p /tmp/dir1/dir2 创建一个目录树 </p>
<p>rm -f file1 删除一个叫做 ‘file1’ 的文件’ </p>
<p>rmdir dir1 删除一个叫做 ‘dir1’ 的目录’ </p>
<p>rm -rf dir1 删除一个叫做 ‘dir1’ 的目录并同时删除其内容</p>
<p>rm -rf dir1 dir2 同时删除两个目录及它们的内容 </p>
<p>mv dir1 new_dir 重命名/移动 一个目录 </p>
<p>cp file1 file2 复制一个文件 </p>
<p>cp dir/* . 复制一个目录下的所有文件到当前工作目录</p>
<p>cp -a /tmp/dir1 . 复制一个目录到当前工作目录 </p>
<p>cp -a dir1 dir2 复制一个目录 </p>
<p>cp -r dir1 dir2 复制一个目录及子目录</p>
<p>ln -s file1 lnk1 创建一个指向文件或目录的软链接 </p>
<p>ln file1 lnk1 创建一个指向文件或目录的物理链接 </p>
<p>touch -t 0712250000 file1 修改一个文件或目录的时间戳 - (YYMMDDhhmm) </p>
<p>file file1 outputs the mime type of the file as text </p>
<p>iconv -l 列出已知的编码</p>
<p>iconv -f fromEncoding -t toEncoding inputFile &gt; outputFile creates a new from the given input file by assuming it is encoded in fromEncoding and converting it to toEncoding. </p>
<p>find . -maxdepth 1 -name *.jpg -print -exec convert “{}” -resize 80x60 “thumbs/{}” ; batch resize files in the current directory and send them to a thumbnails directory (requires convert from Imagemagick) </p>
<h1 id="文件搜索"><a href="#文件搜索" class="headerlink" title="文件搜索"></a>文件搜索</h1><p>find / -name file1 从 ‘/‘ 开始进入根文件系统搜索文件和目录</p>
<p>find / -user user1 搜索属于用户 ‘user1’ 的文件和目录 </p>
<p>find /home/user1 -name *.bin 在目录 ‘/ home/user1’ 中搜索带有’.bin’ 结尾的文件</p>
<p>find /usr/bin -type f -atime +100 搜索在过去100天内未被使用过的执行文件</p>
<p>find /usr/bin -type f -mtime -10 搜索在10天内被创建或者修改过的文件</p>
<p>find / -name *.rpm -exec chmod 755 ‘{}’ ; 搜索以 ‘.rpm’ 结尾的文件并定义其权限 </p>
<p>find / -xdev -name *.rpm 搜索以 ‘.rpm’ 结尾的文件，忽略光驱、捷盘等可移动设备</p>
<p>locate *.ps 寻找以 ‘.ps’ 结尾的文件 - 先运行 ‘updatedb’ 命令 </p>
<p>whereis halt 显示一个二进制文件、源码或man的位置 </p>
<p>which halt 显示一个二进制文件或可执行文件的完整路径</p>
<h1 id="挂载一个文件系统"><a href="#挂载一个文件系统" class="headerlink" title="挂载一个文件系统"></a>挂载一个文件系统</h1><p>mount /dev/hda2 /mnt/hda2 挂载一个叫做hda2的盘 - 确定目录 ‘/ mnt/hda2’ 已经存在 </p>
<p>umount /dev/hda2 卸载一个叫做hda2的盘 - 先从挂载点 ‘/ mnt/hda2’ 退出 </p>
<p>fuser -km /mnt/hda2 当设备繁忙时强制卸载 </p>
<p>umount -n /mnt/hda2 运行卸载操作而不写入 /etc/mtab 文件- 当文件为只读或当磁盘写满时非常有用</p>
<p>mount /dev/fd0 /mnt/floppy 挂载一个软盘 </p>
<p>mount /dev/cdrom /mnt/cdrom 挂载一个cdrom或dvdrom </p>
<p>mount /dev/hdc /mnt/cdrecorder 挂载一个cdrw或dvdrom </p>
<p>mount /dev/hdb /mnt/cdrecorder 挂载一个cdrw或dvdrom </p>
<p>mount -o loop file.iso /mnt/cdrom 挂载一个文件或ISO镜像文件</p>
<p>mount -t vfat /dev/hda5 /mnt/hda5 挂载一个Windows FAT32文件系统 </p>
<p>mount /dev/sda1 /mnt/usbdisk 挂载一个usb 捷盘或闪存设备</p>
<p>mount -t smbfs -o username=user,password=pass //WinClient/share /mnt/share 挂载一个windows网络共享 </p>
<h1 id="磁盘空间"><a href="#磁盘空间" class="headerlink" title="磁盘空间"></a>磁盘空间</h1><p>df -h 显示已经挂载的分区列表</p>
<p>ls -lSr |more 以尺寸大小排列文件和目录 </p>
<p>du -sh dir1 估算目录 ‘dir1’ 已经使用的磁盘空间’ </p>
<p>du -sk * | sort -rn 以容量大小为依据依次显示文件和目录的大小 </p>
<p>rpm -q -a –qf ‘%10{SIZE}t%{NAME}n’ | sort -k1,1n 以大小为依据依次显示已安装的rpm包所使用的空间 (fedora, redhat类系统) </p>
<p>dpkg-query -W -f=’${Installed-Size;10}t${Package}n’ | sort -k1,1n 以大小为依据显示已安装的deb包所使用的空间 (ubuntu, debian类系统) </p>
<h1 id="用户和群组"><a href="#用户和群组" class="headerlink" title="用户和群组"></a>用户和群组</h1><p>groupadd group_name 创建一个新用户组 </p>
<p>groupdel group_name 删除一个用户组 </p>
<p>groupmod -n new_group_name old_group_name 重命名一个用户组 </p>
<p>useradd -c “Name Surname “ -g admin -d /home/user1 -s /bin/bash user1 创建一个属于 “admin” 用户组的用户 </p>
<p>useradd user1 创建一个新用户 </p>
<p>userdel -r user1 删除一个用户 ( ‘-r’ 排除主目录) </p>
<p>usermod -c “User FTP” -g system -d /ftp/user1 -s /bin/nologin user1 修改用户属性</p>
<p>passwd 修改口令</p>
<p>passwd user1 修改一个用户的口令 (只允许root执行) </p>
<p>chage -E 2005-12-31 user1 设置用户口令的失效期限 </p>
<p>pwck 检查 ‘/etc/passwd’ 的文件格式和语法修正以及存在的用户</p>
<p>grpck 检查 ‘/etc/passwd’ 的文件格式和语法修正以及存在的群组</p>
<p>newgrp group_name 登陆进一个新的群组以改变新创建文件的预设群组 </p>
<h1 id="文件的权限-使用-“-”-设置权限，使用-“-“-用于取消"><a href="#文件的权限-使用-“-”-设置权限，使用-“-“-用于取消" class="headerlink" title="文件的权限 - 使用 “+” 设置权限，使用 “-“ 用于取消"></a>文件的权限 - 使用 “+” 设置权限，使用 “-“ 用于取消</h1><p>ls -lh 显示权限</p>
<p>ls /tmp | pr -T5 -W$COLUMNS 将终端划分成5栏显示</p>
<p>chmod ugo+rwx directory1 设置目录的所有人(u)、群组(g)以及其他人(o)以读（r ）、写(w)和执行(x)的权限 </p>
<p>chmod go-rwx directory1 删除群组(g)与其他人(o)对目录的读写执行权限</p>
<p>chown user1 file1 改变一个文件的所有人属性 </p>
<p>chown -R user1 directory1 改变一个目录的所有人属性并同时改变改目录下所有文件的属性 </p>
<p>chgrp group1 file1 改变文件的群组 </p>
<p>chown user1:group1 file1 改变一个文件的所有人和群组属性 </p>
<p>find / -perm -u+s 罗列一个系统中所有使用了SUID控制的文件 </p>
<p>chmod u+s /bin/file1 设置一个二进制文件的 SUID 位 - 运行该文件的用户也被赋予和所有者同样的权限</p>
<p>chmod u-s /bin/file1 禁用一个二进制文件的 SUID位 </p>
<p>chmod g+s /home/public 设置一个目录的SGID 位 - 类似SUID ，不过这是针对目录的</p>
<p>chmod g-s /home/public 禁用一个目录的 SGID 位 </p>
<p>chmod o+t /home/public 设置一个文件的 STIKY 位 - 只允许合法所有人删除文件</p>
<p>chmod o-t /home/public 禁用一个目录的 STIKY 位 </p>
<h1 id="文件的特殊属性-使用-“-”-设置权限，使用-“-“-用于取消"><a href="#文件的特殊属性-使用-“-”-设置权限，使用-“-“-用于取消" class="headerlink" title="文件的特殊属性 - 使用 “+” 设置权限，使用 “-“ 用于取消"></a>文件的特殊属性 - 使用 “+” 设置权限，使用 “-“ 用于取消</h1><p>chattr +a file1 只允许以追加方式读写文件 </p>
<p>chattr +c file1 允许这个文件能被内核自动压缩/解压 </p>
<p>chattr +d file1 在进行文件系统备份时，dump程序将忽略这个文件 </p>
<p>chattr +i file1 设置成不可变的文件，不能被删除、修改、重命名或者链接 </p>
<p>chattr +s file1 允许一个文件被安全地删除 </p>
<p>chattr +S file1 一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘 </p>
<p>chattr +u file1 若文件被删除，系统会允许你在以后恢复这个被删除的文件 </p>
<p>lsattr 显示特殊的属性</p>
<h1 id="打包和压缩文件"><a href="#打包和压缩文件" class="headerlink" title="打包和压缩文件"></a>打包和压缩文件</h1><p>bunzip2 file1.bz2 解压一个叫做 ‘file1.bz2’的文件 </p>
<p>bzip2 file1 压缩一个叫做 ‘file1’ 的文件 </p>
<p>gunzip file1.gz 解压一个叫做 ‘file1.gz’的文件 </p>
<p>gzip file1 压缩一个叫做 ‘file1’的文件 </p>
<p>gzip -9 file1 最大程度压缩 </p>
<p>rar a file1.rar test_file 创建一个叫做 ‘file1.rar’ 的包 </p>
<p>rar a file1.rar file1 file2 dir1 同时压缩 ‘file1’, ‘file2’ 以及目录 ‘dir1’ </p>
<p>rar x file1.rar 解压rar包</p>
<p>unrar x file1.rar 解压rar包</p>
<p>tar -cvf archive.tar file1 创建一个非压缩的 tarball </p>
<p>tar -cvf archive.tar file1 file2 dir1 创建一个包含了 ‘file1’, ‘file2’ 以及 ‘dir1’的档案文件</p>
<p>tar -tf archive.tar 显示一个包中的内容 </p>
<p>tar -xvf archive.tar 释放一个包 </p>
<p>tar -xvf archive.tar -C /tmp 将压缩包释放到 /tmp目录下</p>
<p>tar -cvfj archive.tar.bz2 dir1 创建一个bzip2格式的压缩包</p>
<p>tar -jxvf archive.tar.bz2 解压一个bzip2格式的压缩包</p>
<p>tar -cvfz archive.tar.gz dir1 创建一个gzip格式的压缩包</p>
<p>tar -zxvf archive.tar.gz 解压一个gzip格式的压缩包</p>
<p>zip file1.zip file1 创建一个zip格式的压缩包</p>
<p>zip -r file1.zip file1 file2 dir1 将几个文件和目录同时压缩成一个zip格式的压缩包 </p>
<p>unzip file1.zip 解压一个zip格式压缩包</p>
<h1 id="扩展名-zst表示存档由zstd压缩。"><a href="#扩展名-zst表示存档由zstd压缩。" class="headerlink" title="扩展名.zst表示存档由zstd压缩。"></a>扩展名.zst表示存档由zstd压缩。</h1><p>tar命令有一个选项-I（ - use-compress-program）来指定压缩/解压缩命令。</p>
<p>可以按照如下命令进行解压：</p>
<p>$ tar -I zstd -xvf xxxx.tar.zst</p>
<p>参考文档：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/172210/answer/274433">https://cloud.tencent.com/developer/ask/172210/answer/274433</a></p>
<p>但是在执行tar -I zstd -xvf xxxx.tar.zst过程中遇到了如下问题：</p>
<p>tar (child): zstd: Cannot exec: No such file or directory</p>
<p>tar (child): Error is not recoverable: exiting now</p>
<p>tar: Child returned status 2</p>
<p>tar: Error is not recoverable: exiting now</p>
<p>出现了这个是因为没有安装zstd包，需要手动安装这个安装包来解压zst</p>
<p>ubuntu 系统可以直接通过下面命令进行安装</p>
<p>$ sudo apt install zstd</p>
<p>参考文档：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/clairedandan/p/13830908.html">https://www.cnblogs.com/clairedandan/p/13830908.html</a></p>
<h1 id="RPM-包-（Fedora-Redhat及类似系统）"><a href="#RPM-包-（Fedora-Redhat及类似系统）" class="headerlink" title="RPM 包 - （Fedora, Redhat及类似系统）"></a>RPM 包 - （Fedora, Redhat及类似系统）</h1><p>rpm -ivh package.rpm 安装一个rpm包</p>
<p>rpm -ivh –nodeeps package.rpm 安装一个rpm包而忽略依赖关系警告</p>
<p>rpm -U package.rpm 更新一个rpm包但不改变其配置文件</p>
<p>rpm -F package.rpm 更新一个确定已经安装的rpm包 </p>
<p>rpm -e package_name.rpm 删除一个rpm包</p>
<p>rpm -qa 显示系统中所有已经安装的rpm包 </p>
<p>rpm -qa | grep httpd 显示所有名称中包含 “httpd” 字样的rpm包</p>
<p>rpm -qi package_name 获取一个已安装包的特殊信息 </p>
<p>rpm -qg “System Environment/Daemons” 显示一个组件的rpm包 </p>
<p>rpm -ql package_name 显示一个已经安装的rpm包提供的文件列表</p>
<p>rpm -qc package_name 显示一个已经安装的rpm包提供的配置文件列表</p>
<p>rpm -q package_name –whatrequires 显示与一个rpm包存在依赖关系的列表</p>
<p>rpm -q package_name –whatprovides 显示一个rpm包所占的体积</p>
<p>rpm -q package_name –scripts 显示在安装/删除期间所执行的脚本l </p>
<p>rpm -q package_name –changelog 显示一个rpm包的修改历史</p>
<p>rpm -qf /etc/httpd/conf/httpd.conf 确认所给的文件由哪个rpm包所提供 </p>
<p>rpm -qp package.rpm -l 显示由一个尚未安装的rpm包提供的文件列表 </p>
<p>rpm –import /media/cdrom/RPM-GPG-KEY 导入公钥数字证书 </p>
<p>rpm –checksig package.rpm 确认一个rpm包的完整性</p>
<p>rpm -qa gpg-pubkey 确认已安装的所有rpm包的完整性</p>
<p>rpm -V package_name 检查文件尺寸、 许可、类型、所有者、群组、MD5检查以及最后修改时间</p>
<p>rpm -Va 检查系统中所有已安装的rpm包- 小心使用 </p>
<p>rpm -Vp package.rpm 确认一个rpm包还未安装</p>
<p>rpm2cpio package.rpm | cpio –extract –make-directories <em>bin</em> 从一个rpm包运行可执行文件</p>
<p>rpm -ivh /usr/src/redhat/RPMS/<code>arch</code>/package.rpm 从一个rpm源码安装一个构建好的包 </p>
<p>rpmbuild –rebuild package_name.src.rpm 从一个rpm源码构建一个 rpm 包 </p>
<h1 id="YUM-软件包升级器-（Fedora-RedHat及类似系统）"><a href="#YUM-软件包升级器-（Fedora-RedHat及类似系统）" class="headerlink" title="YUM 软件包升级器 - （Fedora, RedHat及类似系统）"></a>YUM 软件包升级器 - （Fedora, RedHat及类似系统）</h1><p>yum install package_name 下载并安装一个rpm包</p>
<p>yum localinstall package_name.rpm 将安装一个rpm包，使用你自己的软件仓库为你解决所有依赖关系</p>
<p>yum update package_name.rpm 更新当前系统中所有安装的rpm包 </p>
<p>yum update package_name 更新一个rpm包</p>
<p>yum remove package_name 删除一个rpm包</p>
<p>yum list 列出当前系统中安装的所有包</p>
<p>yum search package_name 在rpm仓库中搜寻软件包</p>
<p>yum clean packages 清理rpm缓存删除下载的包</p>
<p>yum clean headers 删除所有头文件 </p>
<p>yum clean all 删除所有缓存的包和头文件 </p>
<h1 id="DEB-包-Debian-Ubuntu-以及类似系统"><a href="#DEB-包-Debian-Ubuntu-以及类似系统" class="headerlink" title="DEB 包 (Debian, Ubuntu 以及类似系统)"></a>DEB 包 (Debian, Ubuntu 以及类似系统)</h1><p>dpkg -i package.deb 安装/更新一个 deb 包 </p>
<p>dpkg -r package_name 从系统删除一个 deb 包</p>
<p>dpkg -l 显示系统中所有已经安装的 deb 包 </p>
<p>dpkg -l | grep httpd 显示所有名称中包含 “httpd” 字样的deb包</p>
<p>dpkg -s package_name 获得已经安装在系统中一个特殊包的信息 </p>
<p>dpkg -L package_name 显示系统中已经安装的一个deb包所提供的文件列表 </p>
<p>dpkg –contents package.deb 显示尚未安装的一个包所提供的文件列表 </p>
<p>dpkg -S /bin/ping 确认所给的文件由哪个deb包提供 </p>
<h1 id="APT-软件工具-Debian-Ubuntu-以及类似系统"><a href="#APT-软件工具-Debian-Ubuntu-以及类似系统" class="headerlink" title="APT 软件工具 (Debian, Ubuntu 以及类似系统)"></a>APT 软件工具 (Debian, Ubuntu 以及类似系统)</h1><p>apt-get install package_name 安装/更新一个 deb 包 </p>
<p>apt-cdrom install package_name 从光盘安装/更新一个 deb 包 </p>
<p>apt-get update 升级列表中的软件包 </p>
<p>apt-get upgrade 升级所有已安装的软件 </p>
<p>apt-get remove package_name 从系统删除一个deb包</p>
<p>apt-get check 确认依赖的软件仓库正确 </p>
<p>apt-get clean 从下载的软件包中清理缓存 </p>
<p>apt-cache search searched-package 返回包含所要搜索字符串的软件包名称 </p>
<h1 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h1><p>cat file1 从第一个字节开始正向查看文件的内容</p>
<p>tac file1 从最后一行开始反向查看一个文件的内容</p>
<p>more file1 查看一个长文件的内容</p>
<p>less file1 类似于 ‘more’ 命令，但是它允许在文件中和正向操作一样的反向操作</p>
<p>head -2 file1 查看一个文件的前两行 </p>
<p>tail -2 file1 查看一个文件的最后两行 </p>
<p>tail -f /var/log/messages 实时查看被添加到一个文件中的内容 </p>
<h1 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h1><p>cat file1 file2 … | command &lt;&gt; file1_in.txt_or_file1_out.txt general syntax for text manipulation using PIPE, STDIN and STDOUT </p>
<p>cat file1 | command( sed, grep, awk, grep, etc…) &gt; result.txt 合并一个文件的详细说明文本，并将简介写入一个新文件中</p>
<p>cat file1 | command( sed, grep, awk, grep, etc…) &gt;&gt; result.txt 合并一个文件的详细说明文本，并将简介写入一个已有的文件中</p>
<p>grep Aug /var/log/messages 在文件 ‘/var/log/messages’中查找关键词”Aug” </p>
<p>grep ^Aug /var/log/messages 在文件 ‘/var/log/messages’中查找以”Aug”开始的词汇 </p>
<p>grep [0-9] /var/log/messages 选择 ‘/var/log/messages’ 文件中所有包含数字的行 </p>
<p>grep Aug -R /var/log/* 在目录 ‘/var/log’ 及随后的目录中搜索字符串”Aug” </p>
<p>sed ‘s/stringa1/stringa2/g’ example.txt 将example.txt文件中的 “string1” 替换成 “string2” </p>
<p>sed ‘/^$/d’ example.txt 从example.txt文件中删除所有空白行</p>
<p>sed ‘/ *#/d; /^$/d’ example.txt 从example.txt文件中删除所有注释和空白行</p>
<p>echo ‘esempio’ | tr ‘[:lower:]’ ‘[:upper:]’ 合并上下单元格内容 </p>
<p>sed -e ‘1d’ result.txt 从文件example.txt 中排除第一行 </p>
<p>sed -n ‘/stringa1/p’ 查看只包含词汇 “string1”的行 </p>
<p>sed -e ‘s/ *$//‘ example.txt 删除每一行最后的空白字符 </p>
<p>sed -e ‘s/stringa1//g’ example.txt 从文档中只删除词汇 “string1” 并保留剩余全部 </p>
<p>sed -n ‘1,5p;5q’ example.txt 查看从第一行到第5行内容</p>
<p>sed -n ‘5p;5q’ example.txt 查看第5行</p>
<p>sed -e ‘s/00*/0/g’ example.txt 用单个零替换多个零 </p>
<p>cat -n file1 标示文件的行数</p>
<p>cat example.txt | awk ‘NR%2==1’ 删除example.txt文件中的所有偶数行 </p>
<p>echo a b c | awk ‘{print $1}’ 查看一行第一栏 </p>
<p>echo a b c | awk ‘{print $1,$3}’ 查看一行的第一和第三栏 </p>
<p>paste file1 file2 合并两个文件或两栏的内容 </p>
<p>paste -d ‘+’ file1 file2 合并两个文件或两栏的内容，中间用”+”区分 </p>
<p>sort file1 file2 排序两个文件的内容 </p>
<p>sort file1 file2 | uniq 取出两个文件的并集(重复的行只保留一份) </p>
<p>sort file1 file2 | uniq -u 删除交集，留下其他的行 </p>
<p>sort file1 file2 | uniq -d 取出两个文件的交集(只留下同时存在于两个文件中的文件) </p>
<p>comm -1 file1 file2 比较两个文件的内容只删除 ‘file1’ 所包含的内容 </p>
<p>comm -2 file1 file2 比较两个文件的内容只删除 ‘file2’ 所包含的内容 </p>
<p>comm -3 file1 file2 比较两个文件的内容只删除两个文件共有的部分 </p>
<h1 id="字符设置和文件格式转换"><a href="#字符设置和文件格式转换" class="headerlink" title="字符设置和文件格式转换"></a>字符设置和文件格式转换</h1><p>dos2unix filedos.txt fileunix.txt 将一个文本文件的格式从MSDOS转换成UNIX </p>
<p>unix2dos fileunix.txt filedos.txt 将一个文本文件的格式从UNIX转换成MSDOS </p>
<p>recode ..HTML &lt; page.txt &gt; page.html 将一个文本文件转换成html </p>
<p>recode -l | more 显示所有允许的转换格式 </p>
<h1 id="文件系统分析"><a href="#文件系统分析" class="headerlink" title="文件系统分析"></a>文件系统分析</h1><p>badblocks -v /dev/hda1 检查磁盘hda1上的坏磁块</p>
<p>fsck /dev/hda1 修复/检查hda1磁盘上linux文件系统的完整性</p>
<p>fsck.ext2 /dev/hda1 修复/检查hda1磁盘上ext2文件系统的完整性</p>
<p>e2fsck /dev/hda1 修复/检查hda1磁盘上ext2文件系统的完整性</p>
<p>e2fsck -j /dev/hda1 修复/检查hda1磁盘上ext3文件系统的完整性</p>
<p>fsck.ext3 /dev/hda1 修复/检查hda1磁盘上ext3文件系统的完整性</p>
<p>fsck.vfat /dev/hda1 修复/检查hda1磁盘上fat文件系统的完整性</p>
<p>fsck.msdos /dev/hda1 修复/检查hda1磁盘上dos文件系统的完整性</p>
<p>dosfsck /dev/hda1 修复/检查hda1磁盘上dos文件系统的完整性</p>
<h1 id="初始化一个文件系统"><a href="#初始化一个文件系统" class="headerlink" title="初始化一个文件系统"></a>初始化一个文件系统</h1><p>mkfs /dev/hda1 在hda1分区创建一个文件系统</p>
<p>mke2fs /dev/hda1 在hda1分区创建一个linux ext2的文件系统 </p>
<p>mke2fs -j /dev/hda1 在hda1分区创建一个linux ext3(日志型)的文件系统 </p>
<p>mkfs -t vfat 32 -F /dev/hda1 创建一个 FAT32 文件系统</p>
<p>fdformat -n /dev/fd0 格式化一个软盘 </p>
<p>mkswap /dev/hda3 创建一个swap文件系统</p>
<h1 id="SWAP文件系统"><a href="#SWAP文件系统" class="headerlink" title="SWAP文件系统"></a>SWAP文件系统</h1><p>mkswap /dev/hda3 创建一个swap文件系统</p>
<p>swapon /dev/hda3 启用一个新的swap文件系统</p>
<p>swapon /dev/hda2 /dev/hdb3 启用两个swap分区</p>
<h1 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h1><p>dump -0aj -f /tmp/home0.bak /home 制作一个 ‘/home’ 目录的完整备份 </p>
<p>dump -1aj -f /tmp/home0.bak /home 制作一个 ‘/home’ 目录的交互式备份 </p>
<p>restore -if /tmp/home0.bak 还原一个交互式备份 </p>
<p>rsync -rogpav –delete /home /tmp 同步两边的目录 </p>
<p>rsync -rogpav -e ssh –delete /home ip_address:/tmp 通过SSH通道rsync </p>
<p>rsync -az -e ssh –delete ip_addr:/home/public /home/local 通过ssh和压缩将一个远程目录同步到本地目录</p>
<p>rsync -az -e ssh –delete /home/local ip_addr:/home/public 通过ssh和压缩将本地目录同步到远程目录</p>
<p>dd bs=1M if=/dev/hda | gzip | ssh user@ip_addr ‘dd of=hda.gz’ 通过ssh在远程主机上执行一次备份本地磁盘的操作</p>
<p>dd if=/dev/sda of=/tmp/file1 备份磁盘内容到一个文件 </p>
<p>tar -Puf backup.tar /home/user 执行一次对 ‘/home/user’ 目录的交互式备份操作 </p>
<p>( cd /tmp/local/ &amp;&amp; tar c . ) | ssh -C user@ip_addr ‘cd /home/share/ &amp;&amp; tar x -p’ 通过ssh在远程目录中复制一个目录内容</p>
<p>( tar c /home ) | ssh -C user@ip_addr ‘cd /home/backup-home &amp;&amp; tar x -p’ 通过ssh在远程目录中复制一个本地目录</p>
<p>tar cf - . | (cd /tmp/backup ; tar xf - ) 本地将一个目录复制到另一个地方，保留原有权限及链接 </p>
<p>find /home/user1 -name ‘*.txt’ | xargs cp -av –target-directory=/home/backup/ –parents 从一个目录查找并复制所有以 ‘.txt’ 结尾的文件到另一个目录</p>
<p>find /var/log -name ‘*.log’ | tar cv –files-from=- | bzip2 &gt; log.tar.bz2 查找所有以 ‘.log’ 结尾的文件并做成一个bzip包 </p>
<p>dd if=/dev/hda of=/dev/fd0 bs=512 count=1 做一个将 MBR (Master Boot Record)内容复制到软盘的动作 </p>
<p>dd if=/dev/fd0 of=/dev/hda bs=512 count=1 从已经保存到软盘的备份中恢复MBR内容 </p>
<h1 id="光盘"><a href="#光盘" class="headerlink" title="光盘"></a>光盘</h1><p>cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force 清空一个可复写的光盘内容</p>
<p>mkisofs /dev/cdrom &gt; cd.iso 在磁盘上创建一个光盘的iso镜像文件 </p>
<p>mkisofs /dev/cdrom | gzip &gt; cd_iso.gz 在磁盘上创建一个压缩了的光盘iso镜像文件 </p>
<p>mkisofs -J -allow-leading-dots -R -V “Label CD” -iso-level 4 -o ./cd.iso data_cd 创建一个目录的iso镜像文件</p>
<p>cdrecord -v dev=/dev/cdrom cd.iso 刻录一个ISO镜像文件</p>
<p>gzip -dc cd_iso.gz | cdrecord dev=/dev/cdrom - 刻录一个压缩了的ISO镜像文件 </p>
<p>mount -o loop cd.iso /mnt/iso 挂载一个ISO镜像文件</p>
<p>cd-paranoia -B 从一个CD光盘转录音轨到 wav 文件中 </p>
<p>cd-paranoia – “-3” 从一个CD光盘转录音轨到 wav 文件中（参数-3） </p>
<p>cdrecord –scanbus 扫描总线以识别scsi通道</p>
<p>dd if=/dev/hdc | md5sum 校验一个设备的md5sum编码，例如一张 CD </p>
<h1 id="网络-（以太网和WIFI无线）"><a href="#网络-（以太网和WIFI无线）" class="headerlink" title="网络 - （以太网和WIFI无线）"></a>网络 - （以太网和WIFI无线）</h1><p>ifconfig eth0 显示一个以太网卡的配置 </p>
<p>ifup eth0 启用一个 ‘eth0’ 网络设备 </p>
<p>ifdown eth0 禁用一个 ‘eth0’ 网络设备 </p>
<p>ifconfig eth0 192.168.1.1 netmask 255.255.255.0 控制IP地址 </p>
<p>ifconfig eth0 promisc 设置 ‘eth0’ 成混杂模式以嗅探数据包 (sniffing) </p>
<p>dhclient eth0 以dhcp模式启用 ‘eth0’ </p>
<p>route -n show routing table </p>
<p>route add -net 0/0 gw IP_Gateway configura default gateway </p>
<p>route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 configure static route to reach network ‘192.168.0.0/16’ </p>
<p>route del 0/0 gw IP_gateway remove static route </p>
<p>echo “1” &gt; /proc/sys/net/ipv4/ip_forward activate ip routing </p>
<p>hostname show hostname of system </p>
<p>host <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa</p>
<p>nslookup <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa</p>
<p>ip link show show link status of all interfaces </p>
<p>mii-tool eth0 show link status of ‘eth0’ </p>
<p>ethtool eth0 show statistics of network card ‘eth0’ </p>
<p>netstat -tup show all active network connections and their PID </p>
<p>netstat -tupl show all network services listening on the system and their PID </p>
<p>tcpdump tcp port 80 show all HTTP traffic </p>
<p>iwlist scan show wireless networks </p>
<p>iwconfig eth1 show configuration of a wireless network card </p>
<p>hostname show hostname </p>
<p>host <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa </p>
<p>nslookup <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup hostname to resolve name to ip address and viceversa </p>
<p>whois <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> lookup on Whois database </p>
<h1 id="JPS工具"><a href="#JPS工具" class="headerlink" title="JPS工具"></a>JPS工具</h1><p>jps(Java Virtual Machine Process Status Tool)是JDK 1.5提供的一个显示当前所有java进程pid的命令，简单实用，非常适合在linux/unix平台上简单察看当前java进程的一些简单情况。</p>
<p>  我想很多人都是用过unix系统里的ps命令，这个命令主要是用来显示当前系统的进程情况，有哪些进程，及其 id。 jps 也是一样，它的作用是显示当前系统的java进程情况，及其id号。我们可以通过它来查看我们到底启动了几个java进程（因为每一个java程序都会独占一个java虚拟机实例），和他们的进程号（为下面几个程序做准备），并可通过opt来查看这些进程的详细启动参数。</p>
<p>   使用方法：在当前命令行下打 jps(需要JAVA_HOME，没有的话，到改程序的目录下打) 。</p>
<p>jps存放在JAVA_HOME/bin/jps，使用时为了方便请将JAVA_HOME/bin/加入到Path.</p>
<p>$&gt; jps</p>
<p>23991 Jps</p>
<p>23789 BossMain</p>
<p>23651 Resin</p>
<h1 id="比较常用的参数："><a href="#比较常用的参数：" class="headerlink" title="比较常用的参数："></a>比较常用的参数：</h1><p>-q 只显示pid，不显示class名称,jar文件名和传递给main 方法的参数</p>
<p>$&gt; jps -q</p>
<p>28680</p>
<p>23789</p>
<p>23651</p>
<p>-m 输出传递给main 方法的参数，在嵌入式jvm上可能是null</p>
<p>$&gt; jps -m</p>
<p>28715 Jps -m</p>
<p>23789 BossMain</p>
<p>23651 Resin -socketwait 32768 -stdout /data/aoxj/resin/log/stdout.log -stderr /data/aoxj/resin/log/stderr.log</p>
<p>-l 输出应用程序main class的完整package名 或者 应用程序的jar文件完整路径名</p>
<p>$&gt; jps -l</p>
<p>28729 sun.tools.jps.Jps</p>
<p>23789 com.asiainfo.aimc.bossbi.BossMain</p>
<p>23651 com.caucho.server.resin.Resin</p>
<p>-v 输出传递给JVM的参数</p>
<p>$&gt; jps -v</p>
<p>23789 BossMain</p>
<p>28802 Jps -Denv.class.path=/data/aoxj/bossbi/twsecurity/java/trustwork140.jar:/data/aoxj/bossbi/twsecurity/java/:/data/aoxj/bossbi/twsecurity/java/twcmcc.jar:/data/aoxj/jdk15/lib/rt.jar:/data/aoxj/jd</p>
<p>k15/lib/tools.jar -Dapplication.home=/data/aoxj/jdk15 -Xms8m</p>
<p>23651 Resin -Xss1m -Dresin.home=/data/aoxj/resin -Dserver.root=/data/aoxj/resin -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -</p>
<p>Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl</p>
<p>sudo jps看到的进程数量最全</p>
<p>jps 192.168.0.77</p>
<p>列出远程服务器192.168.0.77机器所有的jvm实例，采用rmi协议，默认连接端口为1099</p>
<p>（前提是远程服务器提供jstatd服务）</p>
<p>注：jps命令有个地方很不好，似乎只能显示当前用户的java进程，要显示其他用户的还是只能用unix/linux的ps命令。</p>
<p>转自：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yjd_hycf_space/p/7730690.html">https://www.cnblogs.com/yjd_hycf_space/p/7730690.html</a></p>
<p>详细情况请参考sun官方文档。</p>
<p><a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.7.0/docs/tooldocs/share/jps.html">http://java.sun.com/j2se/1.7.0/docs/tooldocs/share/jps.html</a></p>
<p>(2) 修改字体和字体大小:</p>
<p>cd /lib/kbd/consolefonts    //进入到有字体的目录</p>
<p>ls                     //查看所有字体</p>
<p>setfont lat4-16+          //设置所选字体，lat4-16+为一个字体名字</p>
<p>echo ‘setfont lat4-16+’ &gt;&gt; /etc/bashrc     //设置为开机默认</p>
<p>(3) 修改分辨率</p>
<p>首先打开一个文件：</p>
<p>vi /etc/default/grub</p>
<p>在倒数第2行的 GRUB_CMDLINE_LINUX参数中的末尾添加以下内容：</p>
<p>net.ifnames=0 vga=0x314</p>
<p>将上面的文件保存退出。 </p>
<p>执行下面的命令，重新生成目标文件：</p>
<p>grub2-mkconfig &gt; /boot/grub2/grub.cfg</p>
<p>显示 done完成后，重启系统后生效：</p>
<p>reboot</p>
<h1 id="Iptables-firewalld"><a href="#Iptables-firewalld" class="headerlink" title="Iptables / firewalld"></a>Iptables / firewalld</h1><p>Centos7默认安装了firewalld，如果没有安装的话，可以使用 yum install firewalld firewalld-config进行安装。</p>
<h2 id="1-启动防火墙"><a href="#1-启动防火墙" class="headerlink" title="1.启动防火墙"></a>1.启动防火墙</h2><p>systemctl start firewalld</p>
<h2 id="2-禁用防火墙"><a href="#2-禁用防火墙" class="headerlink" title="2.禁用防火墙"></a>2.禁用防火墙</h2><p>systemctl stop firewalld</p>
<h2 id="3-设置开机启动"><a href="#3-设置开机启动" class="headerlink" title="3.设置开机启动"></a>3.设置开机启动</h2><p>systemctl enable firewalld</p>
<h2 id="4-停止并禁用开机启动"><a href="#4-停止并禁用开机启动" class="headerlink" title="4.停止并禁用开机启动"></a>4.停止并禁用开机启动</h2><p>sytemctl disable firewalld</p>
<h2 id="5-重启防火墙"><a href="#5-重启防火墙" class="headerlink" title="5.重启防火墙"></a>5.重启防火墙</h2><p>systemctl restart firewalld</p>
<p>firewall-cmd –reload</p>
<h2 id="6-查看状态"><a href="#6-查看状态" class="headerlink" title="6.查看状态"></a>6.查看状态</h2><p>systemctl status firewalld或者 firewall-cmd –state</p>
<h2 id="7-查看版本"><a href="#7-查看版本" class="headerlink" title="7.查看版本"></a>7.查看版本</h2><p>firewall-cmd –version</p>
<h2 id="8-查看帮助"><a href="#8-查看帮助" class="headerlink" title="8.查看帮助"></a>8.查看帮助</h2><p>firewall-cmd –help</p>
<h2 id="9-查看区域信息"><a href="#9-查看区域信息" class="headerlink" title="9.查看区域信息"></a>9.查看区域信息</h2><p>firewall-cmd –get-active-zones</p>
<h2 id="10-查看指定接口所属区域信息"><a href="#10-查看指定接口所属区域信息" class="headerlink" title="10.查看指定接口所属区域信息"></a>10.查看指定接口所属区域信息</h2><p>firewall-cmd –get-zone-of-interface=eth0</p>
<h2 id="11-拒绝所有包"><a href="#11-拒绝所有包" class="headerlink" title="11.拒绝所有包"></a>11.拒绝所有包</h2><p>firewall-cmd –panic-on</p>
<h2 id="12-取消拒绝状态"><a href="#12-取消拒绝状态" class="headerlink" title="12.取消拒绝状态"></a>12.取消拒绝状态</h2><p>firewall-cmd –panic-off</p>
<h2 id="13-查看是否拒绝"><a href="#13-查看是否拒绝" class="headerlink" title="13.查看是否拒绝"></a>13.查看是否拒绝</h2><p>firewall-cmd –query-panic</p>
<h2 id="14-将接口添加到区域-默认接口都在public"><a href="#14-将接口添加到区域-默认接口都在public" class="headerlink" title="14.将接口添加到区域(默认接口都在public)"></a>14.将接口添加到区域(默认接口都在public)</h2><p>firewall-cmd –zone=public –add-interface=eth0(永久生效再加上 –permanent 然后reload防火墙)</p>
<h2 id="15-设置默认接口区域"><a href="#15-设置默认接口区域" class="headerlink" title="15.设置默认接口区域"></a>15.设置默认接口区域</h2><p>firewall-cmd –set-default-zone=public(立即生效，无需重启)</p>
<h2 id="16-更新防火墙规则"><a href="#16-更新防火墙规则" class="headerlink" title="16.更新防火墙规则"></a>16.更新防火墙规则</h2><p>firewall-cmd –reload或firewall-cmd –complete-reload(两者的区别就是第一个无需断开连接，就是firewalld特性之一动态</p>
<p>添加规则，第二个需要断开连接，类似重启服务)</p>
<h2 id="17-查看指定区域所有打开的端口"><a href="#17-查看指定区域所有打开的端口" class="headerlink" title="17.查看指定区域所有打开的端口"></a>17.查看指定区域所有打开的端口</h2><p>firewall-cmd –zone=public –list-ports</p>
<h2 id="18-在指定区域打开端口（记得重启防火墙）"><a href="#18-在指定区域打开端口（记得重启防火墙）" class="headerlink" title="18.在指定区域打开端口（记得重启防火墙）"></a>18.在指定区域打开端口（记得重启防火墙）</h2><p>firewall-cmd –zone=public –add-port=80/tcp(永久生效再加上 –permanent)</p>
<p>说明：</p>
<p>–zone 作用域</p>
<p>–add-port=8080/tcp 添加端口，格式为：端口/通讯协议</p>
<p>–permanent #永久生效，没有此参数重启后失效</p>
<p>一、查看哪些端口被打开 netstat -anp</p>
<p>二、关闭端口号:</p>
<p><code>iptables -A OUTPUT -p tcp - -dport 端口号-j DROP</code></p>
<p>1</p>
<p>三、打开端口号：</p>
<p><code>iptables -A INPUT -ptcp - -dport 端口号-j ACCEPT</code></p>
<p>1</p>
<p>四、保存设置</p>
<p>service iptables save</p>
<p>1</p>
<p>五、以下是linux打开端口命令的使用方法。</p>
<p>　　nc -lp 23 &amp;(打开23端口，即telnet)</p>
<p>　　netstat -an | grep 23 (查看是否打开23端口)</p>
<p>六、linux打开端口命令每一个打开的端口，都需要有相应的监听程序才可以</p>
<p>检查更新防火墙规则：</p>
<p>firewall-cmd –list-all</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/17/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Private">
      <meta itemprop="description" content="程序语言记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PeacefulRace">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/17/mysql%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">mysql数据库基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-17 10:16:24" itemprop="dateCreated datePublished" datetime="2022-08-17T10:16:24+08:00">2022-08-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-28 14:24:33" itemprop="dateModified" datetime="2022-05-28T14:24:33+08:00">2022-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>– 如果存在名为school的数据库就删除它</p>
<p>– DROP DATABASE IF EXISTS school;</p>
<h1 id="–-创建名为school的数据库并指定默认的字符集为utf-8和排序方式"><a href="#–-创建名为school的数据库并指定默认的字符集为utf-8和排序方式" class="headerlink" title="– 创建名为school的数据库并指定默认的字符集为utf-8和排序方式"></a>– 创建名为school的数据库并指定默认的字符集为utf-8和排序方式</h1><p>CREATE DATABASE school DEFAULT charset utf8 collate utf8_bin;</p>
<p>– 切换到school数据库</p>
<p>USE school;</p>
<p>– 如果存在就删除学生表</p>
<p>DROP TABLE</p>
<p>IF EXISTS tb_student;</p>
<h2 id="–-创建学生表"><a href="#–-创建学生表" class="headerlink" title="– 创建学生表"></a>– 创建学生表</h2><p>CREATE TABLE tb_student (</p>
<p>​    stuid INT NOT NULL COMMENT ‘学号’,</p>
<p>​    stuname VARCHAR (20) NOT NULL COMMENT ‘姓名’,</p>
<p>​    stusex bit DEFAULT 1 COMMENT ‘性别’,</p>
<p>​    stubirth date COMMENT ‘生日’,</p>
<p>​    stuaddr varchar(255) default ‘’ comment ‘籍贯’,</p>
<p>​    colid int not null comment ‘所属学院’,</p>
<p>​    PRIMARY KEY (stuid),</p>
<p>​    foreign key (colid) REFERENCES tb_college (colid)</p>
<p>);</p>
<h2 id="–-修改学生表"><a href="#–-修改学生表" class="headerlink" title="– 修改学生表"></a>– 修改学生表</h2><p>ALTER TABLE tb_student ADD COLUMN stuaddr VARCHAR (255);</p>
<p>– 同第21行</p>
<p>– ALTER TABLE tb_student CHANGE COLUMN stuaddr stuaddr VARCHAR (511);</p>
<p>ALTER TABLE tb_student DROP COLUMN stuaddr;</p>
<h2 id="–-向学生表插入数据"><a href="#–-向学生表插入数据" class="headerlink" title="– 向学生表插入数据"></a>– 向学生表插入数据</h2><p>INSERT INTO tb_student</p>
<p>VALUES</p>
<p>​    (</p>
<p>​       1001,</p>
<p>​       ‘张三丰’,</p>
<p>​       1,</p>
<p>​       ‘1982-2-2’,</p>
<p>​       ‘湖北十堰’,</p>
<p>​       1</p>
<p>​    );</p>
<p>INSERT INTO tb_student</p>
<p>VALUES</p>
<p>​    (</p>
<p>​       1002,</p>
<p>​       ‘张三丰’,</p>
<p>​       1,</p>
<p>​       ‘1982-2-2’,</p>
<p>​       ‘湖北十堰’,</p>
<p>​       3</p>
<p>​    );</p>
<p>INSERT INTO tb_student (stuid, stuname)</p>
<p>VALUES</p>
<p>​    (1003, ‘张翠山’);</p>
<p>INSERT INTO tb_student (stusex, stuid, stuname)</p>
<p>VALUES</p>
<p>​    (0, 1004, ‘殷素素’);</p>
<p>INSERT INTO tb_student (stusex, stuid, stuname)</p>
<p>VALUES</p>
<p>​    (DEFAULT, 1005, ‘杨逍’),</p>
<p>​    (1, 1006, ‘谢逊’),</p>
<p>​    (0, 1007, ‘杨不悔’);</p>
<p>INSERT INTO tb_student (stusex, stuid, stuname, stubirth, stuaddr)</p>
<p>VALUES</p>
<p>​    (0, 1008, ‘周芷若’, ‘1992-04-15’, ‘湖南长沙’),</p>
<p>​    (1, 1009, ‘范瑶’, ‘1990-03-20’, ‘湖北武汉’);</p>
<h2 id="–-截断表（删除全表）"><a href="#–-截断表（删除全表）" class="headerlink" title="– 截断表（删除全表）"></a>– 截断表（删除全表）</h2><p>– truncate table tb_student;</p>
<p>– 删除学号为1002的学生</p>
<p>delete from tb_student where stuid=1002;</p>
<p>– 删除所有女学生</p>
<p>– delete from tb_student where stusex=0;</p>
<h2 id="–-更新操作"><a href="#–-更新操作" class="headerlink" title="– 更新操作"></a>– 更新操作</h2><p>– update tb_student set stuaddr=’四川成都’ where stuid=1005 or stuid=1006;</p>
<p>update tb_student set stuaddr=’四川成都’ where stuid in (1005,1006);</p>
<p>update tb_student set stubirth=’1998-12-30’, stuaddr=’山西大同’ where stuid=1007;</p>
<p>– 创建学院表</p>
<p>create table tb_college</p>
<p>(</p>
<p>colid int auto_increment comment ‘编号’,</p>
<p>colname varchar(31) not null comment ‘名称’,</p>
<p>website varchar(1023) comment ‘网址’,</p>
<p>primary key (colid)</p>
<p>);</p>
<p>ALTER TABLE tb_college ADD COLUMN colmaster VARCHAR (255);</p>
<p>update tb_college set website=’<a target="_blank" rel="noopener" href="http://www.abc.com&/#39;">http://www.abc.com&#39;</a>, colmaster=’左冷禅’ where colid=1;</p>
<p>update tb_college set website=’<a target="_blank" rel="noopener" href="http://www.xyz.com&/#39;">http://www.xyz.com&#39;</a>, colmaster=’岳不群’ where colid=2;</p>
<p>update tb_college set website=’<a target="_blank" rel="noopener" href="http://www.foo.com&/#39;">http://www.foo.com&#39;</a>, colmaster=’风清扬’ where colid=3;</p>
<p>– 插入学院记录</p>
<p>– 实体：学生、学院</p>
<p>– 关系：属于</p>
<p>– 重数：多对一</p>
<p>insert into tb_college (colname) VALUES</p>
<p>(‘计算机学院’),</p>
<p>(‘外国语学院’),</p>
<p>(‘经济管理学院’);</p>
<p>– 同第22行</p>
<p>– alter table tb_student add column colid int;</p>
<h2 id="–-修改学生表添加外键约束-参照完整性"><a href="#–-修改学生表添加外键约束-参照完整性" class="headerlink" title="– 修改学生表添加外键约束(参照完整性)"></a>– 修改学生表添加外键约束(参照完整性)</h2><p>– 同第24行</p>
<p>– alter table tb_student add constraint fk_student_colid foreign key (colid) REFERENCES tb_college (colid);</p>
<p>– 删除外键约束</p>
<p>– alter table tb_student drop foreign key fk_student_colid;</p>
<p>– 没有定义外键约束名称时先查看该表信息再删除</p>
<p>SHOW CREATE TABLE tb_score;</p>
<p>alter table tb_score drop foreign key tb_score_ibfk_1;</p>
<p>– 添加外键约束时增加级联操作-restrict不允许操作-cascade级联操作-set null设置为null</p>
<p>– alter table tb_student add constraint fk_student_colid foreign key (colid) REFERENCES tb_college (colid) on delete cascade/restrict/set null on update cascade;</p>
<p>update tb_student set colid=1 where stuid between 1001 and 1006;</p>
<p>update tb_student set colid=2 where stuid in (1007, 1008);</p>
<p>update tb_student set colid=3 where stuid=1009;</p>
<p>– 创建教师表</p>
<p>create table tb_teacher</p>
<p>(</p>
<p>teaid int not null comment ‘工号’,</p>
<p>teaname varchar(20) not null comment ‘姓名’,</p>
<p>teatitle varchar(10) default ‘助教’ comment ‘职称’,</p>
<p>colid int not null comment ‘所属学院’,</p>
<p>PRIMARY key (teaid),</p>
<p>FOREIGN key (colid) REFERENCES tb_college (colid)</p>
<p>);</p>
<p>– 创建课程表</p>
<p>create table tb_course</p>
<p>(</p>
<p>couid int not null comment ‘编号’,</p>
<p>couname varchar(50) not null comment ‘名称’,</p>
<p>coucredit int not null comment ‘学分’,</p>
<p>teaid int not null comment ‘授课老师’,</p>
<p>PRIMARY key (couid),</p>
<p>FOREIGN key (teaid) REFERENCES tb_teacher (teaid)</p>
<p>);</p>
<p>– 创建选课记录表</p>
<p>create table tb_score</p>
<p>(</p>
<p>scid int auto_increment comment ‘选课记录编号’, ##创建自动增进编号需定义主键(primary key)</p>
<p>stuid int not null comment ‘选课学生’,</p>
<p>couid int not null comment ‘所选课程’,</p>
<p>scdate datetime comment ‘选课时间日期’,</p>
<p>scmark decimal(4,1) comment ‘考试成绩’,</p>
<p>primary key (scid),</p>
<p>foreign key (stuid) REFERENCES tb_student (stuid),</p>
<p>foreign key (couid) REFERENCES tb_course (couid)</p>
<p>);</p>
<p>ALTER TABLE tb_score drop COLUMN scid;</p>
<p>– 添加唯一性约束（一个学生选某个课程只能选一次）</p>
<p>alter table tb_score add CONSTRAINT uni_score_stuid_couid</p>
<p>unique (stuid,couid);</p>
<p>– 插入学院数据</p>
<p>– 同第98-111行</p>
<p>insert into tb_college</p>
<p>(colname, colmaster, website) VALUES</p>
<p>(‘计算机学院’,’左冷禅’,’<a target="_blank" rel="noopener" href="http://www.abc.com&/#39;">http://www.abc.com&#39;</a>),</p>
<p>(‘外国语学院’,’岳不群’,’<a target="_blank" rel="noopener" href="http://www.xyz.com&/#39;">http://www.xyz.com&#39;</a>),</p>
<p>(‘经济管理学院’,’风清扬’,’<a target="_blank" rel="noopener" href="http://www.foo.com&/#39;">http://www.foo.com&#39;</a>);</p>
<p>– 插入学生数据</p>
<p>insert into tb_student</p>
<p>(stuid,stuname,stusex,stubirth,stuaddr,colid) VALUES</p>
<p>(1010,’向问天’,1,’1990-03-04’,’四川成都’,1),</p>
<p>(1011,’任我行’,1,’1992-02-02’,’湖南长沙’,1);</p>
<p>update tb_student set stubirth=’1994-03-06’, stuaddr=’贵州贵阳’ where stuid=1003;</p>
<p>update tb_student set stubirth=’1989-06-06’, stuaddr=’广西南宁’ where stuid=1004;</p>
<p>update tb_student set stubirth=’1991-02-06’ where stuid=1005;</p>
<p>update tb_student set stubirth=’1992-02-02’ where stuid=1006;</p>
<p>– 插入教师数据</p>
<p>insert into tb_teacher</p>
<p>(teaid,teaname,teatitle,colid) VALUES</p>
<p>(1122,’张二丰’,’教授’,1),</p>
<p>(1133,’宋远桥’,’副教授’,1),</p>
<p>(1144,’杨元’,’副教授’,1),</p>
<p>(2255,’范苑’,’教授’,2),</p>
<p>(3366,’韦一笑’,’讲师’,3);</p>
<p>– 插入课程数据</p>
<p>insert into tb_course (couid,couname,coucredit,teaid) VALUES</p>
<p>(1111,’python程序设计’,3,1122),</p>
<p>(2222,’web前端开发’,2,1122),</p>
<p>(3333,’操作系统’,4,1122),</p>
<p>(4444,’计算机网络’,2,1133),</p>
<p>(5555,’编译原理’,4,1144),</p>
<p>(6666,’算法和数据结构’,3,1144),</p>
<p>(7777,’经贸法语’,3,2255),</p>
<p>(8888,’成本会计’,2,3366),</p>
<p>(9999,’审计’,3,3366);</p>
<p>SELECT VERSION();</p>
<p>SELECT NOW();</p>
<p>SELECT SYSDATE() from dual;</p>
<p>– 插入选课数据</p>
<p>insert into tb_score (stuid, couid, scdate, scmark) VALUES</p>
<p>– (1001,1111,now(),95),</p>
<p>– (1001,2222,now(),87.5),</p>
<p>(1001,3333,now(),100),</p>
<p>(1001,4444,now(),null),</p>
<p>(1001,6666,now(),100),</p>
<p>(1003,1111,now(),65),</p>
<p>(1003,5555,now(),42),</p>
<p>(1004,1111,now(),92.5),</p>
<p>(1004,4444,now(),78),</p>
<p>(1004,5555,now(),82.5),</p>
<p>(1007,1111,now(),78),</p>
<p>(1008,1111,now(),82),</p>
<p>(1007,7777,now(),65.5),</p>
<p>(1006,7777,now(),88),</p>
<p>(1006,9999,now(),70),</p>
<p>(1011,1111,now(),72.5),</p>
<p>(1011,8888,now(),93),</p>
<p>(1011,9999,now(),null);</p>
<h2 id="–-CRUD操作（增删改查）"><a href="#–-CRUD操作（增删改查）" class="headerlink" title="– CRUD操作（增删改查）"></a>– CRUD操作（增删改查）</h2><p>– 查询所有学生信息</p>
<p>SELECT * from tb_student;</p>
<p>– 查询所有课程名称及学分（投影和别名）</p>
<p>SELECT couname, coucredit from tb_course;</p>
<p>– alias 别名：as ..</p>
<p>SELECT couname as 课程名称, coucredit as 学分 from tb_course;</p>
<p>SELECT stuname as 姓名, case stusex when 1 then ‘男’ else ‘女’ end as 性别 from tb_student;</p>
<p>SELECT stuname as 姓名, if(stusex, ‘男’,’女’) as 性别 from tb_student;</p>
<p>– 查询所有女学生的姓名和出生日期（筛选）</p>
<p>SELECT stuname, stubirth from tb_student where stusex=0;</p>
<p>– 查询所有80后学生的姓名、性别和出生日期（筛选）</p>
<p>SELECT stuname, stusex, stubirth from tb_student where stubirth&gt;=’1980-1-1’ and stubirth&lt;=’1989-12-31’;</p>
<p>SELECT stuname, stusex, stubirth from tb_student where stubirth between ‘1980-1-1’ and ‘1989-12-31’;</p>
<p>– 查询姓’杨‘的学生姓名和性别（模糊）</p>
<p>SELECT stuname, stusex from tb_student WHERE stuname like ‘杨%’;</p>
<p>– 查询姓’杨‘名字两个字的学生姓名和性别（模糊）</p>
<p>SELECT stuname, stusex from tb_student WHERE stuname like ‘杨_’;</p>
<p>– 查询姓’杨‘名字三个字的学生姓名和性别（模糊）</p>
<p>SELECT stuname, stusex from tb_student WHERE stuname like ‘杨__’;</p>
<p>– 查询名字中有’不‘字或’芷‘字的学生的姓名（模糊）</p>
<p>SELECT stuname from tb_student where stuname like ‘%不%’ or stuname like ‘%芷%’;</p>
<p>– 查询没有录入家庭住址的学生姓名（空值）</p>
<p>SELECT stuname from tb_student where stuaddr is null;</p>
<p>– 查询录入了家庭住址的学生姓名（空值）</p>
<p>SELECT stuname from tb_student where stuaddr is not null;</p>
<p>– 查询学生选课的所有日期（去重）</p>
<p>SELECT DISTINCT scdate from tb_score;</p>
<p>– 查询学生的家庭住址（去重）</p>
<p>SELECT DISTINCT stuaddr from tb_student where stuaddr is not null;</p>
<p>– 查询男学生的姓名和生日按年龄从大到小排序（排序）</p>
<p>– asc - ascending - 升序（从小到大）</p>
<p>– desc - descending - 降序（从大到小）</p>
<p>SELECT stuname, year(NOW()) - year(stubirth) as 年龄 from tb_student where stusex=1 ORDER BY 年龄 desc;</p>
<p>– 聚合函数 max / min / count / sum / avg (忽略空值)</p>
<p>– 查询年龄最大的学生的出生日期（聚合函数）</p>
<p>SELECT min(stubirth) from tb_student;</p>
<p>– 查询年龄最小的学生的出生日期（聚合函数）</p>
<p>SELECT max(stubirth) from tb_student;</p>
<p>– 查询男女学生的人数（分组和聚合函数）</p>
<p>SELECT count(stuid) from tb_student;</p>
<p>SELECT stusex, count(*) from tb_student group by stusex;</p>
<p>SELECT stusex, min(stubirth) from tb_student group by stusex;</p>
<p>– 查询课程编号为1111的课程的平均成绩（筛选和聚合函数）</p>
<p>SELECT avg(scmark) from tb_score where couid=1111;</p>
<p>SELECT min(scmark) from tb_score where couid=1111;</p>
<p>SELECT count(scmark) from tb_score where couid=1111;</p>
<p>SELECT count(scid) from tb_score where couid=1111;</p>
<p>– 查询学号为1001的学生所有课程的平均分（筛选和聚合函数）</p>
<p>SELECT avg(scmark) from tb_score where stuid=1001;</p>
<p>– 查询每个学生的学号和平均成绩（分组和聚合函数）</p>
<p>SELECT stuid, avg(scmark) from tb_score group by stuid;</p>
<p>– 查询平均成绩大于等于90分的学生的学号和平均成绩</p>
<p>– 分组以前的筛选使用where子句，分组以后的筛选使用having子句</p>
<p>SELECT stuid, avg(scmark) as 平均分 from tb_score group by stuid HAVING 平均分&gt;=90;</p>
<p>– 查询年龄最大的学生的姓名（子查询/嵌套查询）</p>
<p>SELECT stuname from tb_student where stubirth=(</p>
<p>SELECT min(stubirth) from tb_student);</p>
<p>– 查询年龄最大的学生的姓名和年龄（子查询+运算）</p>
<p>SELECT stuname,year(now())-year(stubirth) as 年龄 from tb_student where stubirth=(</p>
<p>SELECT min(stubirth) from tb_student);</p>
<p>– 查询选了两门以上的课程的学生姓名（子查询/分组条件/集合运算）</p>
<p>SELECT stuname from tb_student where stuid in (</p>
<p>SELECT stuid from tb_score GROUP BY stuid having count(stuid)&gt;2);</p>
<p>– 查询学生姓名、课程名称以及成绩（连接查询）</p>
<p>– 笛卡尔积</p>
<p>SELECT stuname, couname,scmark from tb_student t1,tb_course t2,tb_score t3 </p>
<p>where t1.stuid=t3.stuid and t2.couid=t3.couid and scmark is not null;</p>
<p>SELECT stuname, couname,scmark from tb_student t1 inner join tb_score t3 on t1.stuid=t3.stuid inner join tb_course t2 on t2.couid=t3.couid where scmark is not null order by scmark desc limit 5 offset 10;</p>
<p>– 分页查询（limit 5 offset 10 / limit 10,5）：跳过10条信息查询5条信息</p>
<p>SELECT stuname, couname,scmark from tb_student t1 inner join tb_score t3 on t1.stuid=t3.stuid inner join tb_course t2 on t2.couid=t3.couid where scmark is not null order by scmark desc limit 10,5;</p>
<p>– 单表：65535TB</p>
<p>– 单列：4G - LONGBLOB(Binary Large OBject) / LONGTEXT</p>
<p>– 查询选课学生的姓名和平均成绩（子查询和连接查询）</p>
<p>select stuname,avgmark from tb_student t1,</p>
<p>(SELECT stuid, avg(scmark) as avgmark from tb_score group by stuid) t2 where t1.stuid=t2.stuid;</p>
<p>– 内连接（inner join）</p>
<p>select stuname,avgmark from tb_student t1 inner join</p>
<p>(SELECT stuid, avg(scmark) as avgmark from tb_score group by stuid) t2 on t1.stuid=t2.stuid;</p>
<p>– 外连接（outer join）：左外连接-left outer join/右外连接-right outer join/全外连接-full outer join</p>
<p>– 查询每个学生的姓名和选课数量（左外连接和子查询）</p>
<p>– 左外连接：对left outer join关键词左边的查询结果（左表）做完全查询，即使不满足附加条件</p>
<p>SELECT stuname, ifnull(total,0) from tb_student t1 left outer join</p>
<p>(SELECT stuid,count(stuid) as total from tb_score group by stuid) t2 on t1.stuid=t2.stuid;</p>
<h2 id="–-注意事项"><a href="#–-注意事项" class="headerlink" title="– 注意事项"></a>– 注意事项</h2><p>– 1. 给数据库和表命名的时候尽量使用全小写</p>
<p>– 2. 作为筛选条件的字符串是否区分大小写看设置的校对规则</p>
<p>– select … where name = ‘jack’;</p>
<p>– CREATE DATABASE school DEFAULT charset utf8 collate utf8_general_ci;</p>
<p>– 3. 数据库中的对象通常会用前缀加以区分</p>
<p>– table/view/index/function/procedure/trigger</p>
<p>– 4. 向表中添加列并指定位置</p>
<p>– ALTER TABLE tb_college ADD COLUMN colmaster VARCHAR (255) after/first colname;</p>
<p>– 5. 通常不推荐使用in或者not in集合运算和distinct去重操作，可以用exists或not exists替代掉集合运算和去重操作。</p>
<p>– 查询姓’杨‘的学生（模糊）</p>
<p>– SELECT ‘x’ from dual where exists (select * from tb_student WHERE stuname like ‘杨%’);</p>
<p>– SELECT ‘x’ from dual where exists (select stuid from tb_student WHERE stuname like ‘李%’);</p>
<p>– 6. 生成执行计划explain判断性能和效率（正向查询，主键查询）</p>
<p>– SELECT stuname, stuid from tb_student where stuid=1001;</p>
<p>– SELECT stuname, stuid from tb_student where stuname=’张三丰’;</p>
<p>– 7. 创建索引提高性能（负向查询无效，模糊查询%在前无效）</p>
<p>– 索引可以加速查询所以应该在经常用于查询筛选条件的列上建立索引</p>
<p>– 索引会使用额外的存储空间而且会让增删改变得更慢（因为要更新索引），不能滥用</p>
<p>– creat index idx_student_stuname on tb_student (stuname);</p>
<p>– drop index idx_student_stuname on tb_student;</p>
<p>– 8. 视图：查询的快照</p>
<p>– 通过视图可以将用户的访问权限限制到某些指定的列上</p>
<p>create view vw_stu_col as</p>
<p>SELECT stuid, stuname, colname from tb_student t1 inner join tb_college t2 on t1.colid=t2.colid;</p>
<p>select * from vw_stu_col;</p>
<p>select stuname,colname from vw_stu_col;</p>
<p>drop view vw_stu_col;</p>
<p>– 9.（存储）过程/函数：把一系列的SQL可以封装到一个过程中，而且可以加上分支和循环，将来通过过程的名字直接调用过程即可，因为创建过程时已经提前编译了SQL语句，所以比直接执行SQL语句性能更好。</p>
<p>– 重新定义定界符为$$(默认定界符”;” “\g”)</p>
<p>delimiter $$</p>
<p>– 创建存储过程</p>
<p>create procedure sp_cou_avg_scmark(in id int, out avgscmark float) </p>
<p>begin </p>
<p>select avg(scmark) into avgscmark from tb_score where couid=id; </p>
<p>end$$</p>
<p>– 将定界符还原回;</p>
<p>delimiter ;</p>
<p>– 调用存储过程</p>
<p>call sp_cou_avg_scmark(2222, @m);</p>
<p>– 通过输出参数取出学院平均成绩</p>
<p>select @m;</p>
<p>– 删除存储过程</p>
<p>drop procedure sp_col_avg_score;</p>
<p>– 触发器：(一般不用)在执行增删改操作时可以触发其他的级联操作，但是有可能导致“锁表”现象，实际开发中应该尽量避免使用触发器</p>
<p>delete from tb_course where couid=1111;</p>
<p>update tb_course set couid=1010 where couid=1111;</p>
<p>delimiter $$</p>
<p>create trigger tr_course_update</p>
<p>after update on tb_course for each row</p>
<p>begin</p>
<p>​    update tb_student set couid=new.couid where couid=old.couid;</p>
<p>end$$</p>
<p>delimiter ;</p>
<p>drop trigger tr_course_update;</p>
<h2 id="–-DCL-授予权限（grant-to）和召回权限-revoke-from"><a href="#–-DCL-授予权限（grant-to）和召回权限-revoke-from" class="headerlink" title="– DCL: 授予权限（grant to）和召回权限(revoke from)"></a>– DCL: 授予权限（grant to）和召回权限(revoke from)</h2><p>create user ‘hellokitty‘@’%’ identified by ‘123123’;</p>
<p>grant all privileges on school.* to ‘hellokitty‘@’%’;</p>
<p>revoke insert, delete, update on school.* from ‘hellokitty‘@’%’;</p>
<p>– drop user ‘hellokitty‘@’%’;</p>
<h2 id="–-事务（transaction）-把多个增删改的操作做成不可分割的原子性操作"><a href="#–-事务（transaction）-把多个增删改的操作做成不可分割的原子性操作" class="headerlink" title="– 事务（transaction）- 把多个增删改的操作做成不可分割的原子性操作"></a>– 事务（transaction）- 把多个增删改的操作做成不可分割的原子性操作</h2><p>– 要么全部都做，要么全都不做</p>
<p>– start tansaction;</p>
<p>begin;</p>
<p>delete from tb_student;</p>
<p>– 提交（事务中的所有操作全都生效）</p>
<p>commit;</p>
<p>– 回滚（事务中的所有操作全部撤销）</p>
<p>rollback;</p>
<p>CREATE TABLE products (</p>
<p>id int auto_increment comment ‘编号’,</p>
<p>num INT NOT NULL COMMENT ‘商品编号’,</p>
<p>pname VARCHAR (20) NOT NULL COMMENT ‘品名’,</p>
<p>price INT NOT NULL COMMENT ‘价格’,</p>
<p>数量quantity INT NOT NULL COMMENT ‘数量’,</p>
<p>);</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Private</p>
  <div class="site-description" itemprop="description">程序语言记录</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Private</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
